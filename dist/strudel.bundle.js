(function(){"use strict";const DOM$1={};DOM$1.dataset_obj={},DOM$1.dataset_id=0,DOM$1.el=(e,t=document)=>(typeof t=="string"&&(t=DOM$1.el(t)),t.querySelector(e)),DOM$1.els=(e,t=document)=>(typeof t=="string"&&(t=DOM$1.el(t)),Array.from(t.querySelectorAll(e))),DOM$1.el_or_self=(e,t=document)=>{t=DOM$1.element(t);let o=t.querySelector(e);return o||t.classList.contains(DOM$1.clean_dot(e))&&(o=t),o},DOM$1.els_or_self=(e,t=document)=>{t=DOM$1.element(t);let o=Array.from(t.querySelectorAll(e));return o.length===0&&t.classList.contains(DOM$1.clean_dot(e))&&(o=[t]),o},DOM$1.clone=e=>(e=DOM$1.element(e),e.cloneNode(!0)),DOM$1.clone_children=e=>{e=DOM$1.element(e);let t=Array.from(e.children),o=[];for(let a of t)o.push(DOM$1.clone(a));return o},DOM$1.dataset=(e,t,o)=>{if(e=DOM$1.element(e),!e)return;let a=e.dataset.dataset_id;if(a||(a=DOM$1.dataset_id,DOM$1.dataset_id+=1,e.dataset.dataset_id=a,DOM$1.dataset_obj[a]={}),o!==void 0)DOM$1.dataset_obj[a][t]=o;else return DOM$1.dataset_obj[a][t]},DOM$1.create=(e,t="",o="")=>{let a=document.createElement(e);if(t){let u=t.split(" ").filter(l=>l!=="");for(let l of u)a.classList.add(l)}return o&&(a.id=o),a},DOM$1.ev=(e,t,o,a)=>{e=DOM$1.element(e),e.addEventListener(t,o,a)},DOM$1.evs=(e,t,o,a)=>{e=DOM$1.element(e);for(let u of t)e.addEventListener(u,o,a)},DOM$1.index=e=>(e=DOM$1.element(e),Array.from(e.parentNode.children).indexOf(e)),DOM$1.class=(e,t)=>{e=DOM$1.element(e);for(let o of t)if(e.classList.contains(DOM$1.clean_dot(o)))return!0;return!1},DOM$1.parent=(e,t)=>{e=DOM$1.element(e);for(let o of t){let a=e.closest(o);if(a)return a}},DOM$1.clean_dot=e=>e.replace(".",""),DOM$1.show=(e,t=1)=>{e=DOM$1.element(e),e.classList.remove(DOM$1.hidden(t))},DOM$1.hide=(e,t=1)=>{e=DOM$1.element(e),e.classList.add(DOM$1.hidden(t))},DOM$1.hidden=(e=1)=>{let t="hidden";return e>1&&(t+=`_${e}`),t},DOM$1.is_hidden=(e,t=1)=>e.classList.contains(DOM$1.hidden(t)),DOM$1.element=e=>typeof e=="string"?DOM$1.el(e):e,typeof window<"u"&&(window.DOM=DOM$1),typeof globalThis.process>"u"&&(globalThis.process={env:{}}),typeof globalThis.process.env>"u"&&(globalThis.process.env={}),typeof globalThis.process.env.NODE_ENV>"u"&&(globalThis.process.env.NODE_ENV="production");function peg$subclass(e,t){function o(){this.constructor=e}o.prototype=t.prototype,e.prototype=new o}function peg$SyntaxError(e,t,o,a){var u=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(u,peg$SyntaxError.prototype),u.expected=t,u.found=o,u.location=a,u.name="SyntaxError",u}peg$subclass(peg$SyntaxError,Error);function peg$padEnd(e,t,o){return o=o||" ",e.length>t?e:(t-=e.length,o+=o.repeat(t),e+o.slice(0,t))}peg$SyntaxError.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var o=null,a;for(a=0;a<e.length;a++)if(e[a].source===this.location.source){o=e[a].text.split(/\r\n|\n|\r/g);break}var u=this.location.start,l=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(u):u,p=this.location.source+":"+l.line+":"+l.column;if(o){var f=this.location.end,d=peg$padEnd("",l.line.toString().length," "),g=o[u.line-1],b=u.line===f.line?f.column:g.length+1,S=b-u.column||1;t+=`
 --> `+p+`
`+d+` |
`+l.line+" | "+g+`
`+d+" | "+peg$padEnd("",u.column-1," ")+peg$padEnd("",S,"^")}else t+=`
 at `+p}return t},peg$SyntaxError.buildMessage=function(e,t){var o={literal:function(g){return'"'+u(g.text)+'"'},class:function(g){var b=g.parts.map(function(S){return Array.isArray(S)?l(S[0])+"-"+l(S[1]):l(S)});return"["+(g.inverted?"^":"")+b.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(g){return g.description}};function a(g){return g.charCodeAt(0).toString(16).toUpperCase()}function u(g){return g.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(b){return"\\x0"+a(b)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(b){return"\\x"+a(b)})}function l(g){return g.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(b){return"\\x0"+a(b)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(b){return"\\x"+a(b)})}function p(g){return o[g.type](g)}function f(g){var b=g.map(p),S,E;if(b.sort(),b.length>0){for(S=1,E=1;S<b.length;S++)b[S-1]!==b[S]&&(b[E]=b[S],E++);b.length=E}switch(b.length){case 1:return b[0];case 2:return b[0]+" or "+b[1];default:return b.slice(0,-1).join(", ")+", or "+b[b.length-1]}}function d(g){return g?'"'+u(g)+'"':"end of input"}return"Expected "+f(e)+" but "+d(t)+" found."};function peg$parse(e,t){t=t!==void 0?t:{};var o={},a=t.grammarSource,u={start:rn},l=rn,p=".",f="-",d="0",g=",",b="|",S="[",E="]",F="{",$="}",k="%",B="<",V=">",U="!",ee="(",j=")",O="/",q="*",te="?",re=":",de="..",ie="^",me="struct",pe="target",le="euclid",he="slow",Ae="rotL",ye="rotR",Me="fast",ge="scale",Le="//",Xe="cat",We="$",ue="setcps",De="setbpm",Qe="hush",Re=/^[1-9]/,$e=/^[eE]/,Ze=/^[+\-]/,we=/^[0-9]/,Ie=/^[ \n\r\t\xA0]/,nt=/^["']/,tt=/^[#\--.0-9A-Z\^-_a-z~\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376-\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E-\u066F\u0671-\u06D3\u06D5\u06E5-\u06E6\u06EE-\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4-\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC-\u09DD\u09DF-\u09E1\u09F0-\u09F1\u09FC\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33\u0A35-\u0A36\u0A38-\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2-\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0-\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F-\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32-\u0B33\u0B35-\u0B39\u0B3D\u0B5C-\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99-\u0B9A\u0B9C\u0B9E-\u0B9F\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60-\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0-\u0CE1\u0CF1-\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32-\u0E33\u0E40-\u0E46\u0E81-\u0E82\u0E84\u0E87-\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA-\u0EAB\u0EAD-\u0EB0\u0EB2-\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065-\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE-\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5-\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7B9\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD-\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5-\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,Oe=/^[@_]/,mt=/^[^\n]/,je=Ht("number"),ut=Be(".",!1),ct=St([["1","9"]],!1,!1),pt=St(["e","E"],!1,!1),_t=St(["+","-"],!1,!1),yt=Be("-",!1),bt=Be("0",!1),Dt=St([["0","9"]],!1,!1),At=Ht("whitespace"),it=St([" ",`
`,"\r","	"," "],!1,!1),Et=Be(",",!1),ke=Be("|",!1),Ye=St(['"',"'"],!1,!1),Pe=Ht('a letter, a number, "-", "#", ".", "^", "_"'),He=St(["#",["-","."],["0","9"],["A","Z"],["^","_"],["a","z"],"~","ª","µ","º",["À","Ö"],["Ø","ö"],["ø","ˁ"],["ˆ","ˑ"],["ˠ","ˤ"],"ˬ","ˮ",["Ͱ","ʹ"],["Ͷ","ͷ"],["ͺ","ͽ"],"Ϳ","Ά",["Έ","Ί"],"Ό",["Ύ","Ρ"],["Σ","ϵ"],["Ϸ","ҁ"],["Ҋ","ԯ"],["Ա","Ֆ"],"ՙ",["ՠ","ֈ"],["א","ת"],["ׯ","ײ"],["ؠ","ي"],["ٮ","ٯ"],["ٱ","ۓ"],"ە",["ۥ","ۦ"],["ۮ","ۯ"],["ۺ","ۼ"],"ۿ","ܐ",["ܒ","ܯ"],["ݍ","ޥ"],"ޱ",["ߊ","ߪ"],["ߴ","ߵ"],"ߺ",["ࠀ","ࠕ"],"ࠚ","ࠤ","ࠨ",["ࡀ","ࡘ"],["ࡠ","ࡪ"],["ࢠ","ࢴ"],["ࢶ","ࢽ"],["ऄ","ह"],"ऽ","ॐ",["क़","ॡ"],["ॱ","ঀ"],["অ","ঌ"],["এ","ঐ"],["ও","ন"],["প","র"],"ল",["শ","হ"],"ঽ","ৎ",["ড়","ঢ়"],["য়","ৡ"],["ৰ","ৱ"],"ৼ",["ਅ","ਊ"],["ਏ","ਐ"],["ਓ","ਨ"],["ਪ","ਰ"],["ਲ","ਲ਼"],["ਵ","ਸ਼"],["ਸ","ਹ"],["ਖ਼","ੜ"],"ਫ਼",["ੲ","ੴ"],["અ","ઍ"],["એ","ઑ"],["ઓ","ન"],["પ","ર"],["લ","ળ"],["વ","હ"],"ઽ","ૐ",["ૠ","ૡ"],"ૹ",["ଅ","ଌ"],["ଏ","ଐ"],["ଓ","ନ"],["ପ","ର"],["ଲ","ଳ"],["ଵ","ହ"],"ଽ",["ଡ଼","ଢ଼"],["ୟ","ୡ"],"ୱ","ஃ",["அ","ஊ"],["எ","ஐ"],["ஒ","க"],["ங","ச"],"ஜ",["ஞ","ட"],["ண","த"],["ந","ப"],["ம","ஹ"],"ௐ",["అ","ఌ"],["ఎ","ఐ"],["ఒ","న"],["ప","హ"],"ఽ",["ౘ","ౚ"],["ౠ","ౡ"],"ಀ",["ಅ","ಌ"],["ಎ","ಐ"],["ಒ","ನ"],["ಪ","ಳ"],["ವ","ಹ"],"ಽ","ೞ",["ೠ","ೡ"],["ೱ","ೲ"],["അ","ഌ"],["എ","ഐ"],["ഒ","ഺ"],"ഽ","ൎ",["ൔ","ൖ"],["ൟ","ൡ"],["ൺ","ൿ"],["අ","ඖ"],["ක","න"],["ඳ","ර"],"ල",["ව","ෆ"],["ก","ะ"],["า","ำ"],["เ","ๆ"],["ກ","ຂ"],"ຄ",["ງ","ຈ"],"ຊ","ຍ",["ດ","ທ"],["ນ","ຟ"],["ມ","ຣ"],"ລ","ວ",["ສ","ຫ"],["ອ","ະ"],["າ","ຳ"],"ຽ",["ເ","ໄ"],"ໆ",["ໜ","ໟ"],"ༀ",["ཀ","ཇ"],["ཉ","ཬ"],["ྈ","ྌ"],["က","ဪ"],"ဿ",["ၐ","ၕ"],["ၚ","ၝ"],"ၡ",["ၥ","ၦ"],["ၮ","ၰ"],["ၵ","ႁ"],"ႎ",["Ⴀ","Ⴥ"],"Ⴧ","Ⴭ",["ა","ჺ"],["ჼ","ቈ"],["ቊ","ቍ"],["ቐ","ቖ"],"ቘ",["ቚ","ቝ"],["በ","ኈ"],["ኊ","ኍ"],["ነ","ኰ"],["ኲ","ኵ"],["ኸ","ኾ"],"ዀ",["ዂ","ዅ"],["ወ","ዖ"],["ዘ","ጐ"],["ጒ","ጕ"],["ጘ","ፚ"],["ᎀ","ᎏ"],["Ꭰ","Ᏽ"],["ᏸ","ᏽ"],["ᐁ","ᙬ"],["ᙯ","ᙿ"],["ᚁ","ᚚ"],["ᚠ","ᛪ"],["ᛮ","ᛸ"],["ᜀ","ᜌ"],["ᜎ","ᜑ"],["ᜠ","ᜱ"],["ᝀ","ᝑ"],["ᝠ","ᝬ"],["ᝮ","ᝰ"],["ក","ឳ"],"ៗ","ៜ",["ᠠ","ᡸ"],["ᢀ","ᢄ"],["ᢇ","ᢨ"],"ᢪ",["ᢰ","ᣵ"],["ᤀ","ᤞ"],["ᥐ","ᥭ"],["ᥰ","ᥴ"],["ᦀ","ᦫ"],["ᦰ","ᧉ"],["ᨀ","ᨖ"],["ᨠ","ᩔ"],"ᪧ",["ᬅ","ᬳ"],["ᭅ","ᭋ"],["ᮃ","ᮠ"],["ᮮ","ᮯ"],["ᮺ","ᯥ"],["ᰀ","ᰣ"],["ᱍ","ᱏ"],["ᱚ","ᱽ"],["ᲀ","ᲈ"],["Ა","Ჺ"],["Ჽ","Ჿ"],["ᳩ","ᳬ"],["ᳮ","ᳱ"],["ᳵ","ᳶ"],["ᴀ","ᶿ"],["Ḁ","ἕ"],["Ἐ","Ἕ"],["ἠ","ὅ"],["Ὀ","Ὅ"],["ὐ","ὗ"],"Ὑ","Ὓ","Ὕ",["Ὗ","ώ"],["ᾀ","ᾴ"],["ᾶ","ᾼ"],"ι",["ῂ","ῄ"],["ῆ","ῌ"],["ῐ","ΐ"],["ῖ","Ί"],["ῠ","Ῥ"],["ῲ","ῴ"],["ῶ","ῼ"],"ⁱ","ⁿ",["ₐ","ₜ"],"ℂ","ℇ",["ℊ","ℓ"],"ℕ",["ℙ","ℝ"],"ℤ","Ω","ℨ",["K","ℭ"],["ℯ","ℹ"],["ℼ","ℿ"],["ⅅ","ⅉ"],"ⅎ",["Ⅰ","ↈ"],["Ⰰ","Ⱞ"],["ⰰ","ⱞ"],["Ⱡ","ⳤ"],["Ⳬ","ⳮ"],["Ⳳ","ⳳ"],["ⴀ","ⴥ"],"ⴧ","ⴭ",["ⴰ","ⵧ"],"ⵯ",["ⶀ","ⶖ"],["ⶠ","ⶦ"],["ⶨ","ⶮ"],["ⶰ","ⶶ"],["ⶸ","ⶾ"],["ⷀ","ⷆ"],["ⷈ","ⷎ"],["ⷐ","ⷖ"],["ⷘ","ⷞ"],"ⸯ",["々","〇"],["〡","〩"],["〱","〵"],["〸","〼"],["ぁ","ゖ"],["ゝ","ゟ"],["ァ","ヺ"],["ー","ヿ"],["ㄅ","ㄯ"],["ㄱ","ㆎ"],["ㆠ","ㆺ"],["ㇰ","ㇿ"],["㐀","䶵"],["一","鿯"],["ꀀ","ꒌ"],["ꓐ","ꓽ"],["ꔀ","ꘌ"],["ꘐ","ꘟ"],["ꘪ","ꘫ"],["Ꙁ","ꙮ"],["ꙿ","ꚝ"],["ꚠ","ꛯ"],["ꜗ","ꜟ"],["Ꜣ","ꞈ"],["Ꞌ","ꞹ"],["ꟷ","ꠁ"],["ꠃ","ꠅ"],["ꠇ","ꠊ"],["ꠌ","ꠢ"],["ꡀ","ꡳ"],["ꢂ","ꢳ"],["ꣲ","ꣷ"],"ꣻ",["ꣽ","ꣾ"],["ꤊ","ꤥ"],["ꤰ","ꥆ"],["ꥠ","ꥼ"],["ꦄ","ꦲ"],"ꧏ",["ꧠ","ꧤ"],["ꧦ","ꧯ"],["ꧺ","ꧾ"],["ꨀ","ꨨ"],["ꩀ","ꩂ"],["ꩄ","ꩋ"],["ꩠ","ꩶ"],"ꩺ",["ꩾ","ꪯ"],"ꪱ",["ꪵ","ꪶ"],["ꪹ","ꪽ"],"ꫀ","ꫂ",["ꫛ","ꫝ"],["ꫠ","ꫪ"],["ꫲ","ꫴ"],["ꬁ","ꬆ"],["ꬉ","ꬎ"],["ꬑ","ꬖ"],["ꬠ","ꬦ"],["ꬨ","ꬮ"],["ꬰ","ꭚ"],["ꭜ","ꭥ"],["ꭰ","ꯢ"],["가","힣"],["ힰ","ퟆ"],["ퟋ","ퟻ"],["豈","舘"],["並","龎"],["ﬀ","ﬆ"],["ﬓ","ﬗ"],"יִ",["ײַ","ﬨ"],["שׁ","זּ"],["טּ","לּ"],"מּ",["נּ","סּ"],["ףּ","פּ"],["צּ","ﮱ"],["ﯓ","ﴽ"],["ﵐ","ﶏ"],["ﶒ","ﷇ"],["ﷰ","ﷻ"],["ﹰ","ﹴ"],["ﹶ","ﻼ"],["Ａ","Ｚ"],["ａ","ｚ"],["ｦ","ﾾ"],["ￂ","ￇ"],["ￊ","ￏ"],["ￒ","ￗ"],["ￚ","ￜ"]],!1,!1),Ne=Be("[",!1),Mt=Be("]",!1),kt=Be("{",!1),rt=Be("}",!1),Je=Be("%",!1),st=Be("<",!1),Ee=Be(">",!1),xt=St(["@","_"],!1,!1),Ct=Be("!",!1),Se=Be("(",!1),Ge=Be(")",!1),Ve=Be("/",!1),ze=Be("*",!1),et=Be("?",!1),vt=Be(":",!1),ot=Be("..",!1),A=Be("^",!1),N=Be("struct",!1),R=Be("target",!1),L=Be("euclid",!1),Z=Be("slow",!1),se=Be("rotL",!1),ae=Be("rotR",!1),fe=Be("fast",!1),_e=Be("scale",!1),Te=Be("//",!1),Ke=St([`
`],!0,!1),Pt=Be("cat",!1),Gt=Be("$",!1),Ot=Be("setcps",!1),Wt=Be("setbpm",!1),at=Be("hush",!1),fn=function(){return parseFloat(Jn())},dn=function(M){const I=M.join("");return I==="."||I==="_"},hn=function(M){return new zr(M.join(""))},mn=function(M){return M},_n=function(M,I){return M.arguments_.stepsPerCycle=I,M},gn=function(M){return M},yn=function(M){return M.arguments_.alignment="polymeter_slowcat",M},bn=function(M){return I=>I.options_.weight=(I.options_.weight??1)+(M??2)-1},An=function(M){return I=>{const K=(I.options_.reps??1)+(M??2)-1;I.options_.reps=K,I.options_.ops=I.options_.ops.filter(oe=>oe.type_!=="replicate"),I.options_.ops.push({type_:"replicate",arguments_:{amount:K}}),I.options_.weight=K}},Mn=function(M,I,K){return oe=>oe.options_.ops.push({type_:"bjorklund",arguments_:{pulse:M,step:I,rotation:K}})},Cn=function(M){return I=>I.options_.ops.push({type_:"stretch",arguments_:{amount:M,type:"slow"}})},vn=function(M){return I=>I.options_.ops.push({type_:"stretch",arguments_:{amount:M,type:"fast"}})},Pn=function(M){return I=>I.options_.ops.push({type_:"degradeBy",arguments_:{amount:M,seed:Qt++}})},Sn=function(M){return I=>I.options_.ops.push({type_:"tail",arguments_:{element:M}})},Fn=function(M){return I=>I.options_.ops.push({type_:"range",arguments_:{element:M}})},Dn=function(M,I){const K=new jr(M,{ops:[],weight:1,reps:1});for(const oe of I)oe(K);return K},En=function(M,I){return new Yt(I,"fastcat",void 0,!!M)},xn=function(M){return{alignment:"stack",list:M}},wn=function(M){return{alignment:"rand",list:M,seed:Qt++}},Gn=function(M){return{alignment:"feet",list:M,seed:Qt++}},$n=function(M,I){return I&&I.list.length>0?new Yt([M,...I.list],I.alignment,I.seed):M},kn=function(M,I){return new Yt(I?[M,...I.list]:[M],"polymeter")},Tn=function(M){return M},Rn=function(M){return{name:"struct",args:{mini:M}}},Bn=function(M){return{name:"target",args:{name:M}}},Nn=function(M,I,K){return{name:"bjorklund",args:{pulse:M,step:parseInt(I)}}},Ln=function(M){return{name:"stretch",args:{amount:M}}},In=function(M){return{name:"shift",args:{amount:"-"+M}}},Vn=function(M){return{name:"shift",args:{amount:M}}},Xn=function(M){return{name:"stretch",args:{amount:"1/"+M}}},Zn=function(M){return{name:"scale",args:{scale:M.join("")}}},en=function(M,I){return I},On=function(M,I){return I.unshift(M),new Yt(I,"slowcat")},Wn=function(M){return M},zn=function(M,I){return new Ur(M.name,M.args,I)},Un=function(M){return M},jn=function(M){return M},Yn=function(M){return new qt("setcps",{value:M})},Hn=function(M){return new qt("setcps",{value:M/120/2})},Kn=function(){return new qt("hush")},z=t.peg$currPos|0,xe=z,Tt=[{line:1,column:1}],ft=z,zt=t.peg$maxFailExpected||[],be=t.peg$silentFails|0,Xt;if(t.startRule){if(!(t.startRule in u))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');l=u[t.startRule]}function Jn(){return e.substring(xe,z)}function tn(){return Kt(xe,z)}function Be(M,I){return{type:"literal",text:M,ignoreCase:I}}function St(M,I,K){return{type:"class",parts:M,inverted:I,ignoreCase:K}}function qn(){return{type:"end"}}function Ht(M){return{type:"other",description:M}}function nn(M){var I=Tt[M],K;if(I)return I;if(M>=Tt.length)K=Tt.length-1;else for(K=M;!Tt[--K];);for(I=Tt[K],I={line:I.line,column:I.column};K<M;)e.charCodeAt(K)===10?(I.line++,I.column=1):I.column++,K++;return Tt[M]=I,I}function Kt(M,I,K){var oe=nn(M),Ce=nn(I),Ue={source:a,start:{offset:M,line:oe.line,column:oe.column},end:{offset:I,line:Ce.line,column:Ce.column}};return Ue}function ve(M){z<ft||(z>ft&&(ft=z,zt=[]),zt.push(M))}function Qn(M,I,K){return new peg$SyntaxError(peg$SyntaxError.buildMessage(M,I),M,I,K)}function rn(){var M;return M=Wr(),M}function Ft(){var M,I;return be++,M=z,lr(),I=Ut(),I!==o?(ur(),sr(),xe=M,M=fn()):(z=M,M=o),be--,M===o&&be===0&&ve(je),M}function er(){var M;return e.charCodeAt(z)===46?(M=p,z++):(M=o,be===0&&ve(ut)),M}function nr(){var M;return M=e.charAt(z),Re.test(M)?z++:(M=o,be===0&&ve(ct)),M}function rr(){var M;return M=e.charAt(z),$e.test(M)?z++:(M=o,be===0&&ve(pt)),M}function sr(){var M,I,K,oe,Ce;if(M=z,I=rr(),I!==o){if(K=e.charAt(z),Ze.test(K)?z++:(K=o,be===0&&ve(_t)),K===o&&(K=null),oe=[],Ce=Rt(),Ce!==o)for(;Ce!==o;)oe.push(Ce),Ce=Rt();else oe=o;oe!==o?(I=[I,K,oe],M=I):(z=M,M=o)}else z=M,M=o;return M}function ur(){var M,I,K,oe;if(M=z,I=er(),I!==o){if(K=[],oe=Rt(),oe!==o)for(;oe!==o;)K.push(oe),oe=Rt();else K=o;K!==o?(I=[I,K],M=I):(z=M,M=o)}else z=M,M=o;return M}function Ut(){var M,I,K,oe;if(M=cr(),M===o)if(M=z,I=nr(),I!==o){for(K=[],oe=Rt();oe!==o;)K.push(oe),oe=Rt();I=[I,K],M=I}else z=M,M=o;return M}function lr(){var M;return e.charCodeAt(z)===45?(M=f,z++):(M=o,be===0&&ve(yt)),M}function cr(){var M;return e.charCodeAt(z)===48?(M=d,z++):(M=o,be===0&&ve(bt)),M}function Rt(){var M;return M=e.charAt(z),we.test(M)?z++:(M=o,be===0&&ve(Dt)),M}function Fe(){var M,I;for(be++,M=[],I=e.charAt(z),Ie.test(I)?z++:(I=o,be===0&&ve(it));I!==o;)M.push(I),I=e.charAt(z),Ie.test(I)?z++:(I=o,be===0&&ve(it));return be--,I=o,be===0&&ve(At),M}function Bt(){var M,I,K,oe;return M=z,I=Fe(),e.charCodeAt(z)===44?(K=g,z++):(K=o,be===0&&ve(Et)),K!==o?(oe=Fe(),I=[I,K,oe],M=I):(z=M,M=o),M}function sn(){var M,I,K,oe;return M=z,I=Fe(),e.charCodeAt(z)===124?(K=b,z++):(K=o,be===0&&ve(ke)),K!==o?(oe=Fe(),I=[I,K,oe],M=I):(z=M,M=o),M}function on(){var M,I,K,oe;return M=z,I=Fe(),e.charCodeAt(z)===46?(K=p,z++):(K=o,be===0&&ve(ut)),K!==o?(oe=Fe(),I=[I,K,oe],M=I):(z=M,M=o),M}function Nt(){var M;return M=e.charAt(z),nt.test(M)?z++:(M=o,be===0&&ve(Ye)),M}function jt(){var M;return be++,M=e.charAt(z),tt.test(M)?z++:(M=o,be===0&&ve(He)),be--,M===o&&be===0&&ve(Pe),M}function an(){var M,I,K,oe;if(M=z,Fe(),I=[],K=jt(),K!==o)for(;K!==o;)I.push(K),K=jt();else I=o;return I!==o?(K=Fe(),xe=z,oe=dn(I),oe?oe=o:oe=void 0,oe!==o?(xe=M,M=hn(I)):(z=M,M=o)):(z=M,M=o),M}function fr(){var M,I,K,oe;return M=z,Fe(),e.charCodeAt(z)===91?(I=S,z++):(I=o,be===0&&ve(Ne)),I!==o?(Fe(),K=cn(),K!==o?(Fe(),e.charCodeAt(z)===93?(oe=E,z++):(oe=o,be===0&&ve(Mt)),oe!==o?(Fe(),xe=M,M=mn(K)):(z=M,M=o)):(z=M,M=o)):(z=M,M=o),M}function dr(){var M,I,K,oe,Ce;return M=z,Fe(),e.charCodeAt(z)===123?(I=F,z++):(I=o,be===0&&ve(kt)),I!==o?(Fe(),K=pn(),K!==o?(Fe(),e.charCodeAt(z)===125?(oe=$,z++):(oe=o,be===0&&ve(rt)),oe!==o?(Ce=hr(),Ce===o&&(Ce=null),Fe(),xe=M,M=_n(K,Ce)):(z=M,M=o)):(z=M,M=o)):(z=M,M=o),M}function hr(){var M,I,K;return M=z,e.charCodeAt(z)===37?(I=k,z++):(I=o,be===0&&ve(Je)),I!==o?(K=Lt(),K!==o?(xe=M,M=gn(K)):(z=M,M=o)):(z=M,M=o),M}function mr(){var M,I,K,oe;return M=z,Fe(),e.charCodeAt(z)===60?(I=B,z++):(I=o,be===0&&ve(st)),I!==o?(Fe(),K=pn(),K!==o?(Fe(),e.charCodeAt(z)===62?(oe=V,z++):(oe=o,be===0&&ve(Ee)),oe!==o?(Fe(),xe=M,M=yn(K)):(z=M,M=o)):(z=M,M=o)):(z=M,M=o),M}function Lt(){var M;return M=an(),M===o&&(M=fr(),M===o&&(M=dr(),M===o&&(M=mr()))),M}function un(){var M;return M=_r(),M===o&&(M=yr(),M===o&&(M=br(),M===o&&(M=Ar(),M===o&&(M=gr(),M===o&&(M=Mr(),M===o&&(M=Cr(),M===o&&(M=vr()))))))),M}function _r(){var M,I,K;return M=z,Fe(),I=e.charAt(z),Oe.test(I)?z++:(I=o,be===0&&ve(xt)),I!==o?(K=Ft(),K===o&&(K=null),xe=M,M=bn(K)):(z=M,M=o),M}function gr(){var M,I,K;return M=z,Fe(),e.charCodeAt(z)===33?(I=U,z++):(I=o,be===0&&ve(Ct)),I!==o?(K=Ft(),K===o&&(K=null),xe=M,M=An(K)):(z=M,M=o),M}function yr(){var M,I,K,oe,Ce,Ue,ht;return M=z,e.charCodeAt(z)===40?(I=ee,z++):(I=o,be===0&&ve(Se)),I!==o?(Fe(),K=Zt(),K!==o?(Fe(),oe=Bt(),oe!==o?(Fe(),Ce=Zt(),Ce!==o?(Fe(),Bt(),Fe(),Ue=Zt(),Ue===o&&(Ue=null),Fe(),e.charCodeAt(z)===41?(ht=j,z++):(ht=o,be===0&&ve(Ge)),ht!==o?(xe=M,M=Mn(K,Ce,Ue)):(z=M,M=o)):(z=M,M=o)):(z=M,M=o)):(z=M,M=o)):(z=M,M=o),M}function br(){var M,I,K;return M=z,e.charCodeAt(z)===47?(I=O,z++):(I=o,be===0&&ve(Ve)),I!==o?(K=Lt(),K!==o?(xe=M,M=Cn(K)):(z=M,M=o)):(z=M,M=o),M}function Ar(){var M,I,K;return M=z,e.charCodeAt(z)===42?(I=q,z++):(I=o,be===0&&ve(ze)),I!==o?(K=Lt(),K!==o?(xe=M,M=vn(K)):(z=M,M=o)):(z=M,M=o),M}function Mr(){var M,I,K;return M=z,e.charCodeAt(z)===63?(I=te,z++):(I=o,be===0&&ve(et)),I!==o?(K=Ft(),K===o&&(K=null),xe=M,M=Pn(K)):(z=M,M=o),M}function Cr(){var M,I,K;return M=z,e.charCodeAt(z)===58?(I=re,z++):(I=o,be===0&&ve(vt)),I!==o?(K=Lt(),K!==o?(xe=M,M=Sn(K)):(z=M,M=o)):(z=M,M=o),M}function vr(){var M,I,K;return M=z,e.substr(z,2)===de?(I=de,z+=2):(I=o,be===0&&ve(ot)),I!==o?(K=Lt(),K!==o?(xe=M,M=Fn(K)):(z=M,M=o)):(z=M,M=o),M}function Zt(){var M,I,K,oe;if(M=z,I=Lt(),I!==o){for(K=[],oe=un();oe!==o;)K.push(oe),oe=un();xe=M,M=Dn(I,K)}else z=M,M=o;return M}function $t(){var M,I,K,oe;if(M=z,e.charCodeAt(z)===94?(I=ie,z++):(I=o,be===0&&ve(A)),I===o&&(I=null),K=[],oe=Zt(),oe!==o)for(;oe!==o;)K.push(oe),oe=Zt();else K=o;return K!==o?(xe=M,M=En(I,K)):(z=M,M=o),M}function ln(){var M,I,K,oe,Ce;if(M=z,I=[],K=z,oe=Bt(),oe!==o?(Ce=$t(),Ce!==o?K=Ce:(z=K,K=o)):(z=K,K=o),K!==o)for(;K!==o;)I.push(K),K=z,oe=Bt(),oe!==o?(Ce=$t(),Ce!==o?K=Ce:(z=K,K=o)):(z=K,K=o);else I=o;return I!==o&&(xe=M,I=xn(I)),M=I,M}function Pr(){var M,I,K,oe,Ce;if(M=z,I=[],K=z,oe=sn(),oe!==o?(Ce=$t(),Ce!==o?K=Ce:(z=K,K=o)):(z=K,K=o),K!==o)for(;K!==o;)I.push(K),K=z,oe=sn(),oe!==o?(Ce=$t(),Ce!==o?K=Ce:(z=K,K=o)):(z=K,K=o);else I=o;return I!==o&&(xe=M,I=wn(I)),M=I,M}function Sr(){var M,I,K,oe,Ce;if(M=z,I=[],K=z,oe=on(),oe!==o?(Ce=$t(),Ce!==o?K=Ce:(z=K,K=o)):(z=K,K=o),K!==o)for(;K!==o;)I.push(K),K=z,oe=on(),oe!==o?(Ce=$t(),Ce!==o?K=Ce:(z=K,K=o)):(z=K,K=o);else I=o;return I!==o&&(xe=M,I=Gn(I)),M=I,M}function cn(){var M,I,K;return M=z,I=$t(),I!==o?(K=ln(),K===o&&(K=Pr(),K===o&&(K=Sr())),K===o&&(K=null),xe=M,M=$n(I,K)):(z=M,M=o),M}function pn(){var M,I,K;return M=z,I=$t(),I!==o?(K=ln(),K===o&&(K=null),xe=M,M=kn(I,K)):(z=M,M=o),M}function Fr(){var M,I,K,oe;return M=z,Fe(),I=Nt(),I!==o?(Fe(),K=cn(),K!==o?(Fe(),oe=Nt(),oe!==o?(xe=M,M=Tn(K)):(z=M,M=o)):(z=M,M=o)):(z=M,M=o),M}function Dr(){var M;return M=Rr(),M===o&&(M=Gr(),M===o&&(M=Tr(),M===o&&(M=xr(),M===o&&(M=wr(),M===o&&(M=Er(),M===o&&(M=kr(),M===o&&(M=$r()))))))),M}function Er(){var M,I,K;return M=z,e.substr(z,6)===me?(I=me,z+=6):(I=o,be===0&&ve(N)),I!==o?(Fe(),K=It(),K!==o?(xe=M,M=Rn(K)):(z=M,M=o)):(z=M,M=o),M}function xr(){var M,I,K,oe,Ce;return M=z,e.substr(z,6)===pe?(I=pe,z+=6):(I=o,be===0&&ve(R)),I!==o?(Fe(),K=Nt(),K!==o?(oe=an(),oe!==o?(Ce=Nt(),Ce!==o?(xe=M,M=Bn(oe)):(z=M,M=o)):(z=M,M=o)):(z=M,M=o)):(z=M,M=o),M}function wr(){var M,I,K,oe;return M=z,e.substr(z,6)===le?(I=le,z+=6):(I=o,be===0&&ve(L)),I!==o?(Fe(),K=Ut(),K!==o?(Fe(),oe=Ut(),oe!==o?(Fe(),Ut(),xe=M,M=Nn(K,oe)):(z=M,M=o)):(z=M,M=o)):(z=M,M=o),M}function Gr(){var M,I,K;return M=z,e.substr(z,4)===he?(I=he,z+=4):(I=o,be===0&&ve(Z)),I!==o?(Fe(),K=Ft(),K!==o?(xe=M,M=Ln(K)):(z=M,M=o)):(z=M,M=o),M}function $r(){var M,I,K;return M=z,e.substr(z,4)===Ae?(I=Ae,z+=4):(I=o,be===0&&ve(se)),I!==o?(Fe(),K=Ft(),K!==o?(xe=M,M=In(K)):(z=M,M=o)):(z=M,M=o),M}function kr(){var M,I,K;return M=z,e.substr(z,4)===ye?(I=ye,z+=4):(I=o,be===0&&ve(ae)),I!==o?(Fe(),K=Ft(),K!==o?(xe=M,M=Vn(K)):(z=M,M=o)):(z=M,M=o),M}function Tr(){var M,I,K;return M=z,e.substr(z,4)===Me?(I=Me,z+=4):(I=o,be===0&&ve(fe)),I!==o?(Fe(),K=Ft(),K!==o?(xe=M,M=Xn(K)):(z=M,M=o)):(z=M,M=o),M}function Rr(){var M,I,K,oe,Ce;if(M=z,e.substr(z,5)===ge?(I=ge,z+=5):(I=o,be===0&&ve(_e)),I!==o)if(Fe(),K=Nt(),K!==o){if(oe=[],Ce=jt(),Ce!==o)for(;Ce!==o;)oe.push(Ce),Ce=jt();else oe=o;oe!==o?(Ce=Nt(),Ce!==o?(xe=M,M=Zn(oe)):(z=M,M=o)):(z=M,M=o)}else z=M,M=o;else z=M,M=o;return M}function Jt(){var M,I,K,oe;if(M=z,e.substr(z,2)===Le?(I=Le,z+=2):(I=o,be===0&&ve(Te)),I!==o){for(K=[],oe=e.charAt(z),mt.test(oe)?z++:(oe=o,be===0&&ve(Ke));oe!==o;)K.push(oe),oe=e.charAt(z),mt.test(oe)?z++:(oe=o,be===0&&ve(Ke));I=[I,K],M=I}else z=M,M=o;return M}function Br(){var M,I,K,oe,Ce,Ue,ht,Vt;if(M=z,e.substr(z,3)===Xe?(I=Xe,z+=3):(I=o,be===0&&ve(Pt)),I!==o)if(Fe(),e.charCodeAt(z)===91?(K=S,z++):(K=o,be===0&&ve(Ne)),K!==o)if(Fe(),oe=It(),oe!==o){for(Ce=[],Ue=z,ht=Bt(),ht!==o?(Vt=It(),Vt!==o?(xe=Ue,Ue=en(oe,Vt)):(z=Ue,Ue=o)):(z=Ue,Ue=o);Ue!==o;)Ce.push(Ue),Ue=z,ht=Bt(),ht!==o?(Vt=It(),Vt!==o?(xe=Ue,Ue=en(oe,Vt)):(z=Ue,Ue=o)):(z=Ue,Ue=o);Ue=Fe(),e.charCodeAt(z)===93?(ht=E,z++):(ht=o,be===0&&ve(Mt)),ht!==o?(xe=M,M=On(oe,Ce)):(z=M,M=o)}else z=M,M=o;else z=M,M=o;else z=M,M=o;return M}function Nr(){var M;return M=Br(),M===o&&(M=Fr()),M}function It(){var M,I,K,oe,Ce;if(M=z,I=Nr(),I!==o){for(Fe(),K=[],oe=Jt();oe!==o;)K.push(oe),oe=Jt();xe=M,M=Wn(I)}else z=M,M=o;return M===o&&(M=z,I=Dr(),I!==o?(Fe(),e.charCodeAt(z)===36?(K=We,z++):(K=o,be===0&&ve(Gt)),K!==o?(oe=Fe(),Ce=It(),Ce!==o?(xe=M,M=zn(I,Ce)):(z=M,M=o)):(z=M,M=o)):(z=M,M=o)),M}function Lr(){var M,I;return M=z,I=It(),I!==o&&(xe=M,I=Un(I)),M=I,M===o&&(M=Jt()),M}function Ir(){var M;return M=Lr(),M}function Vr(){var M,I;return M=z,Fe(),I=Xr(),I===o&&(I=Zr(),I===o&&(I=Or())),I!==o?(Fe(),xe=M,M=jn(I)):(z=M,M=o),M}function Xr(){var M,I,K;return M=z,e.substr(z,6)===ue?(I=ue,z+=6):(I=o,be===0&&ve(Ot)),I!==o?(Fe(),K=Ft(),K!==o?(xe=M,M=Yn(K)):(z=M,M=o)):(z=M,M=o),M}function Zr(){var M,I,K;return M=z,e.substr(z,6)===De?(I=De,z+=6):(I=o,be===0&&ve(Wt)),I!==o?(Fe(),K=Ft(),K!==o?(xe=M,M=Hn(K)):(z=M,M=o)):(z=M,M=o),M}function Or(){var M,I;return M=z,e.substr(z,4)===Qe?(I=Qe,z+=4):(I=o,be===0&&ve(at)),I!==o&&(xe=M,I=Kn()),M=I,M}function Wr(){var M;return M=Ir(),M===o&&(M=Vr()),M}var zr=function(M){this.type_="atom",this.source_=M,this.location_=tn()},Yt=function(M,I,K,oe){this.type_="pattern",this.arguments_={alignment:I,_steps:oe},K!==void 0&&(this.arguments_.seed=K),this.source_=M},Ur=function(M,I,K){this.type_=M,this.arguments_=I,this.source_=K},jr=function(M,I){this.type_="element",this.source_=M,this.options_=I,this.location_=tn()},qt=function(M,I){this.type_="command",this.name_=M,this.options_=I},Qt=0;if(Xt=l(),t.peg$library)return{peg$result:Xt,peg$currPos:z,peg$FAILED:o,peg$maxFailExpected:zt,peg$maxFailPos:ft};if(Xt!==o&&z===e.length)return Xt;throw Xt!==o&&z<e.length&&ve(qn()),Qn(zt,ft<e.length?e.charAt(ft):null,ft<e.length?Kt(ft,ft+1):Kt(ft,ft))}const peg$allowedStartRules=["start"];typeof BigInt>"u"&&(BigInt=function(e){if(isNaN(e))throw new Error("");return e});const C_ZERO=BigInt(0),C_ONE=BigInt(1),C_TWO=BigInt(2),C_FIVE=BigInt(5),C_TEN=BigInt(10),MAX_CYCLE_LEN=2e3,P={s:C_ONE,n:C_ZERO,d:C_ONE};function assign(e,t){try{e=BigInt(e)}catch{throw InvalidParameter()}return e*t}function trunc(e){return typeof e=="bigint"?e:Math.floor(e)}function newFraction(e,t){if(t===C_ZERO)throw DivisionByZero();const o=Object.create(Fraction$1.prototype);o.s=e<C_ZERO?-C_ONE:C_ONE,e=e<C_ZERO?-e:e;const a=gcd$1(e,t);return o.n=e/a,o.d=t/a,o}function factorize(e){const t={};let o=e,a=C_TWO,u=C_FIVE-C_ONE;for(;u<=o;){for(;o%a===C_ZERO;)o/=a,t[a]=(t[a]||C_ZERO)+C_ONE;u+=C_ONE+C_TWO*a++}return o!==e?o>1&&(t[o]=(t[o]||C_ZERO)+C_ONE):t[e]=(t[e]||C_ZERO)+C_ONE,t}const parse$b=function(e,t){let o=C_ZERO,a=C_ONE,u=C_ONE;if(e!=null)if(t!==void 0){if(typeof e=="bigint")o=e;else{if(isNaN(e))throw InvalidParameter();if(e%1!==0)throw NonIntegerParameter();o=BigInt(e)}if(typeof t=="bigint")a=t;else{if(isNaN(t))throw InvalidParameter();if(t%1!==0)throw NonIntegerParameter();a=BigInt(t)}u=o*a}else if(typeof e=="object"){if("d"in e&&"n"in e)o=BigInt(e.n),a=BigInt(e.d),"s"in e&&(o*=BigInt(e.s));else if(0 in e)o=BigInt(e[0]),1 in e&&(a=BigInt(e[1]));else if(typeof e=="bigint")o=e;else throw InvalidParameter();u=o*a}else if(typeof e=="number"){if(isNaN(e))throw InvalidParameter();if(e<0&&(u=-C_ONE,e=-e),e%1===0)o=BigInt(e);else if(e>0){let l=1,p=0,f=1,d=1,g=1,b=1e7;for(e>=1&&(l=10**Math.floor(1+Math.log10(e)),e/=l);f<=b&&g<=b;){let S=(p+d)/(f+g);if(e===S){f+g<=b?(o=p+d,a=f+g):g>f?(o=d,a=g):(o=p,a=f);break}else e>S?(p+=d,f+=g):(d+=p,g+=f),f>b?(o=d,a=g):(o=p,a=f)}o=BigInt(o)*BigInt(l),a=BigInt(a)}}else if(typeof e=="string"){let l=0,p=C_ZERO,f=C_ZERO,d=C_ZERO,g=C_ONE,b=C_ONE,S=e.replace(/_/g,"").match(/\d+|./g);if(S===null)throw InvalidParameter();if(S[l]==="-"?(u=-C_ONE,l++):S[l]==="+"&&l++,S.length===l+1?f=assign(S[l++],u):S[l+1]==="."||S[l]==="."?(S[l]!=="."&&(p=assign(S[l++],u)),l++,(l+1===S.length||S[l+1]==="("&&S[l+3]===")"||S[l+1]==="'"&&S[l+3]==="'")&&(f=assign(S[l],u),g=C_TEN**BigInt(S[l].length),l++),(S[l]==="("&&S[l+2]===")"||S[l]==="'"&&S[l+2]==="'")&&(d=assign(S[l+1],u),b=C_TEN**BigInt(S[l+1].length)-C_ONE,l+=3)):S[l+1]==="/"||S[l+1]===":"?(f=assign(S[l],u),g=assign(S[l+2],C_ONE),l+=3):S[l+3]==="/"&&S[l+1]===" "&&(p=assign(S[l],u),f=assign(S[l+2],u),g=assign(S[l+4],C_ONE),l+=5),S.length<=l)a=g*b,u=o=d+a*p+b*f;else throw InvalidParameter()}else if(typeof e=="bigint")o=e,u=e,a=C_ONE;else throw InvalidParameter();if(a===C_ZERO)throw DivisionByZero();P.s=u<C_ZERO?-C_ONE:C_ONE,P.n=o<C_ZERO?-o:o,P.d=a<C_ZERO?-a:a};function modpow(e,t,o){let a=C_ONE;for(;t>C_ZERO;e=e*e%o,t>>=C_ONE)t&C_ONE&&(a=a*e%o);return a}function cycleLen(e,t){for(;t%C_TWO===C_ZERO;t/=C_TWO);for(;t%C_FIVE===C_ZERO;t/=C_FIVE);if(t===C_ONE)return C_ZERO;let o=C_TEN%t,a=1;for(;o!==C_ONE;a++)if(o=o*C_TEN%t,a>MAX_CYCLE_LEN)return C_ZERO;return BigInt(a)}function cycleStart(e,t,o){let a=C_ONE,u=modpow(C_TEN,o,t);for(let l=0;l<300;l++){if(a===u)return BigInt(l);a=a*C_TEN%t,u=u*C_TEN%t}return 0}function gcd$1(e,t){if(!e)return t;if(!t)return e;for(;;){if(e%=t,!e)return t;if(t%=e,!t)return e}}function Fraction$1(e,t){if(parse$b(e,t),this instanceof Fraction$1)e=gcd$1(P.d,P.n),this.s=P.s,this.n=P.n/e,this.d=P.d/e;else return newFraction(P.s*P.n,P.d)}var DivisionByZero=function(){return new Error("Division by Zero")},InvalidParameter=function(){return new Error("Invalid argument")},NonIntegerParameter=function(){return new Error("Parameters must be integer")};Fraction$1.prototype={s:C_ONE,n:C_ZERO,d:C_ONE,abs:function(){return newFraction(this.n,this.d)},neg:function(){return newFraction(-this.s*this.n,this.d)},add:function(e,t){return parse$b(e,t),newFraction(this.s*this.n*P.d+P.s*this.d*P.n,this.d*P.d)},sub:function(e,t){return parse$b(e,t),newFraction(this.s*this.n*P.d-P.s*this.d*P.n,this.d*P.d)},mul:function(e,t){return parse$b(e,t),newFraction(this.s*P.s*this.n*P.n,this.d*P.d)},div:function(e,t){return parse$b(e,t),newFraction(this.s*P.s*this.n*P.d,this.d*P.n)},clone:function(){return newFraction(this.s*this.n,this.d)},mod:function(e,t){if(e===void 0)return newFraction(this.s*this.n%this.d,C_ONE);if(parse$b(e,t),C_ZERO===P.n*this.d)throw DivisionByZero();return newFraction(this.s*(P.d*this.n)%(P.n*this.d),P.d*this.d)},gcd:function(e,t){return parse$b(e,t),newFraction(gcd$1(P.n,this.n)*gcd$1(P.d,this.d),P.d*this.d)},lcm:function(e,t){return parse$b(e,t),P.n===C_ZERO&&this.n===C_ZERO?newFraction(C_ZERO,C_ONE):newFraction(P.n*this.n,gcd$1(P.n,this.n)*gcd$1(P.d,this.d))},inverse:function(){return newFraction(this.s*this.d,this.n)},pow:function(e,t){if(parse$b(e,t),P.d===C_ONE)return P.s<C_ZERO?newFraction((this.s*this.d)**P.n,this.n**P.n):newFraction((this.s*this.n)**P.n,this.d**P.n);if(this.s<C_ZERO)return null;let o=factorize(this.n),a=factorize(this.d),u=C_ONE,l=C_ONE;for(let p in o)if(p!=="1"){if(p==="0"){u=C_ZERO;break}if(o[p]*=P.n,o[p]%P.d===C_ZERO)o[p]/=P.d;else return null;u*=BigInt(p)**o[p]}for(let p in a)if(p!=="1"){if(a[p]*=P.n,a[p]%P.d===C_ZERO)a[p]/=P.d;else return null;l*=BigInt(p)**a[p]}return P.s<C_ZERO?newFraction(l,u):newFraction(u,l)},log:function(e,t){if(parse$b(e,t),this.s<=C_ZERO||P.s<=C_ZERO)return null;const o={},a=factorize(P.n),u=factorize(P.d),l=factorize(this.n),p=factorize(this.d);for(const g in u)a[g]=(a[g]||C_ZERO)-u[g];for(const g in p)l[g]=(l[g]||C_ZERO)-p[g];for(const g in a)g!=="1"&&(o[g]=!0);for(const g in l)g!=="1"&&(o[g]=!0);let f=null,d=null;for(const g in o){const b=a[g]||C_ZERO,S=l[g]||C_ZERO;if(b===C_ZERO){if(S!==C_ZERO)return null;continue}let E=S,F=b;const $=gcd$1(E,F);if(E/=$,F/=$,f===null&&d===null)f=E,d=F;else if(E*d!==f*F)return null}return f!==null&&d!==null?newFraction(f,d):null},equals:function(e,t){return parse$b(e,t),this.s*this.n*P.d===P.s*P.n*this.d},lt:function(e,t){return parse$b(e,t),this.s*this.n*P.d<P.s*P.n*this.d},lte:function(e,t){return parse$b(e,t),this.s*this.n*P.d<=P.s*P.n*this.d},gt:function(e,t){return parse$b(e,t),this.s*this.n*P.d>P.s*P.n*this.d},gte:function(e,t){return parse$b(e,t),this.s*this.n*P.d>=P.s*P.n*this.d},compare:function(e,t){parse$b(e,t);let o=this.s*this.n*P.d-P.s*P.n*this.d;return(C_ZERO<o)-(o<C_ZERO)},ceil:function(e){return e=C_TEN**BigInt(e||0),newFraction(trunc(this.s*e*this.n/this.d)+(e*this.n%this.d>C_ZERO&&this.s>=C_ZERO?C_ONE:C_ZERO),e)},floor:function(e){return e=C_TEN**BigInt(e||0),newFraction(trunc(this.s*e*this.n/this.d)-(e*this.n%this.d>C_ZERO&&this.s<C_ZERO?C_ONE:C_ZERO),e)},round:function(e){return e=C_TEN**BigInt(e||0),newFraction(trunc(this.s*e*this.n/this.d)+this.s*((this.s>=C_ZERO?C_ONE:C_ZERO)+C_TWO*(e*this.n%this.d)>this.d?C_ONE:C_ZERO),e)},roundTo:function(e,t){parse$b(e,t);const o=this.n*P.d,a=this.d*P.n,u=o%a;let l=trunc(o/a);return u+u>=a&&l++,newFraction(this.s*l*P.n,P.d)},divisible:function(e,t){return parse$b(e,t),!(!(P.n*this.d)||this.n*P.d%(P.n*this.d))},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(e){let t=this.n,o=this.d;e=e||15;let a=cycleLen(t,o),u=cycleStart(t,o,a),l=this.s<C_ZERO?"-":"";if(l+=trunc(t/o),t%=o,t*=C_TEN,t&&(l+="."),a){for(let p=u;p--;)l+=trunc(t/o),t%=o,t*=C_TEN;l+="(";for(let p=a;p--;)l+=trunc(t/o),t%=o,t*=C_TEN;l+=")"}else for(let p=e;t&&p--;)l+=trunc(t/o),t%=o,t*=C_TEN;return l},toFraction:function(e){let t=this.n,o=this.d,a=this.s<C_ZERO?"-":"";if(o===C_ONE)a+=t;else{let u=trunc(t/o);e&&u>C_ZERO&&(a+=u,a+=" ",t%=o),a+=t,a+="/",a+=o}return a},toLatex:function(e){let t=this.n,o=this.d,a=this.s<C_ZERO?"-":"";if(o===C_ONE)a+=t;else{let u=trunc(t/o);e&&u>C_ZERO&&(a+=u,t%=o),a+="\\frac{",a+=t,a+="}{",a+=o,a+="}"}return a},toContinued:function(){let e=this.n,t=this.d,o=[];do{o.push(trunc(e/t));let a=e%t;e=t,t=a}while(e!==C_ONE);return o},simplify:function(e){const t=BigInt(1/(e||.001)|0),o=this.abs(),a=o.toContinued();for(let u=1;u<a.length;u++){let l=newFraction(a[u-1],C_ONE);for(let f=u-2;f>=0;f--)l=l.inverse().add(a[f]);let p=l.sub(o);if(p.n*t<p.d)return l.mul(this.s)}return this}};const logKey="strudel.log";let debounce=1e3,lastMessage,lastTime;function errorLogger$1(e,t="cyclist"){process.env.NODE_ENV==="development"&&console.error(e),logger$2(`[${t}] error: ${e.message}`)}function logger$2(e,t,o={}){let a=performance.now();lastMessage===e&&a-lastTime<debounce||(lastMessage=e,lastTime=a,console.log(`%c${e}`,"background-color: black;color:white;border-radius:15px"),typeof document<"u"&&typeof CustomEvent<"u"&&document.dispatchEvent(new CustomEvent(logKey,{detail:{message:e,type:t,data:o}})))}logger$2.key=logKey;const isNoteWithOctave=e=>/^[a-gA-G][#bsf]*[0-9]*$/.test(e),isNote=e=>/^[a-gA-G][#bsf]*-?[0-9]*$/.test(e),tokenizeNote$3=e=>{if(typeof e!="string")return[];const[t,o="",a]=e.match(/^([a-gA-G])([#bsf]*)(-?[0-9]*)$/)?.slice(1)||[];return t?[t,o,a?Number(a):void 0]:[]},chromas$2={c:0,d:2,e:4,f:5,g:7,a:9,b:11},accs$2={"#":1,b:-1,s:1,f:-1},getAccidentalsOffset$1=e=>e?.split("").reduce((t,o)=>t+accs$2[o],0)||0,noteToMidi$1=(e,t=3)=>{const[o,a,u=t]=tokenizeNote$3(e);if(!o)throw new Error('not a note: "'+e+'"');const l=chromas$2[o.toLowerCase()],p=getAccidentalsOffset$1(a);return(Number(u)+1)*12+l+p},midiToFreq$2=e=>Math.pow(2,(e-69)/12)*440,freqToMidi$2=e=>12*Math.log(e/440)/Math.LN2+69,valueToMidi$1=(e,t)=>{if(typeof e!="object")throw new Error("valueToMidi: expected object value");let{freq:o,note:a}=e;if(typeof o=="number")return freqToMidi$2(o);if(typeof a=="string")return noteToMidi$1(a);if(typeof a=="number")return a;if(!t)throw new Error("valueToMidi: expected freq or note to be set");return t},getEventOffsetMs=(e,t)=>(e-t)*1e3,getFreq=e=>midiToFreq$2(typeof e=="number"?e:noteToMidi$1(e)),pcs$1=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],midi2note$1=e=>{const t=Math.floor(e/12)-1;return pcs$1[e%12]+t},_mod$2=(e,t)=>(e%t+t)%t,averageArray=e=>e.reduce((t,o)=>t+o)/e.length;function nanFallback$1(e,t=0){return isNaN(Number(e))?(logger$2(`"${e}" is not a number, falling back to ${t}`,"warning"),t):e}const getSoundIndex$1=(e,t)=>_mod$2(Math.round(nanFallback$1(e??0,0)),t),getPlayableNoteValue=e=>{let{value:t,context:o}=e,a=t;if(typeof a=="object"&&!Array.isArray(a)&&(a=a.note||a.n||a.value,a===void 0))throw new Error(`cannot find a playable note for ${JSON.stringify(t)}`);if(typeof a=="number"&&o.type!=="frequency")a=midiToFreq$2(e.value);else if(typeof a=="number"&&o.type==="frequency")a=e.value;else if(typeof a!="string"||!isNote(a))throw new Error("not a note: "+JSON.stringify(a));return a},getFrequency=e=>{let{value:t,context:o}=e;if(typeof t=="object")return t.freq?t.freq:getFreq(t.note||t.n||t.value);if(typeof t=="number"&&o.type!=="frequency")t=midiToFreq$2(e.value);else if(typeof t=="string"&&isNote(t))t=midiToFreq$2(noteToMidi$1(e.value));else if(typeof t!="number")throw new Error("not a note or frequency: "+t);return t},rotate$2=(e,t)=>e.slice(t).concat(e.slice(0,t)),pipe=(...e)=>e.reduce((t,o)=>(...a)=>t(o(...a)),t=>t),compose=(...e)=>pipe(...e.reverse()),removeUndefineds=e=>e.filter(t=>t!=null),flatten=e=>[].concat(...e),id=e=>e,constant=(e,t)=>e,listRange=(e,t)=>Array.from({length:t-e+1},(o,a)=>a+e);function curry(e,t,o=e.length){const a=function u(...l){if(l.length>=o)return e.apply(this,l);{const p=function(...f){return u.apply(this,l.concat(f))};return t&&t(p,l),p}};return t&&t(a,[]),a}function parseNumeral(e){const t=Number(e);if(!isNaN(t))return t;if(isNote(e))return noteToMidi$1(e);throw new Error(`cannot parse as numeral: "${e}"`)}function mapArgs(e,t){return(...o)=>e(...o.map(t))}function numeralArgs(e){return mapArgs(e,parseNumeral)}function parseFractional(e){const t=Number(e);if(!isNaN(t))return t;const o={pi:Math.PI,w:1,h:.5,q:.25,e:.125,s:.0625,t:1/3,f:.2,x:1/6}[e];if(typeof o<"u")return o;throw new Error(`cannot parse as fractional: "${e}"`)}const fractionalArgs=e=>mapArgs(e,parseFractional),splitAt=function(e,t){return[t.slice(0,e),t.slice(e)]},zipWith=(e,t,o)=>t.map((a,u)=>e(a,o[u])),pairs=function(e){const t=[];for(let o=0;o<e.length-1;++o)t.push([e[o],e[o+1]]);return t},clamp$1=(e,t,o)=>Math.min(Math.max(e,t),o),solfeggio=["Do","Reb","Re","Mib","Mi","Fa","Solb","Sol","Lab","La","Sib","Si"],indian=["Sa","Re","Ga","Ma","Pa","Dha","Ni"],german=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Hb","H"],byzantine=["Ni","Pab","Pa","Voub","Vou","Ga","Dib","Di","Keb","Ke","Zob","Zo"],japanese=["I","Ro","Ha","Ni","Ho","He","To"],english=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],sol2note=(e,t="letters")=>{const a=(t==="solfeggio"?solfeggio:t==="indian"?indian:t==="german"?german:t==="byzantine"?byzantine:t==="japanese"?japanese:english)[e%12],u=Math.floor(e/12)-1;return a+u};function uniq(e){var t={};return e.filter(function(o){return t.hasOwn(o)?!1:t[o]=!0})}function uniqsort(e){return e.sort().filter(function(t,o,a){return!o||t!=a[o-1]})}function uniqsortr(e){return e.sort((t,o)=>t.compare(o)).filter(function(t,o,a){return!o||t.ne(a[o-1])})}function unicodeToBase64(e){const t=new TextEncoder().encode(e);return btoa(String.fromCharCode(...t))}function base64ToUnicode(e){const t=new Uint8Array(atob(e).split("").map(a=>a.charCodeAt(0)));return new TextDecoder().decode(t)}function code2hash(e){return encodeURIComponent(unicodeToBase64(e))}function hash2code(e){return base64ToUnicode(decodeURIComponent(e))}function objectMap(e,t){return Array.isArray(e)?e.map(t):Object.fromEntries(Object.entries(e).map(([o,a],u)=>[o,t(a,o,u)]))}function cycleToSeconds$1(e,t){return e/t}class ClockCollator{constructor({getTargetClockTime:t=getUnixTimeSeconds,weight:o=16,offsetDelta:a=.005,checkAfterTime:u=2,resetAfterTime:l=8}){this.offsetTime,this.timeAtPrevOffsetSample,this.prevOffsetTimes=[],this.getTargetClockTime=t,this.weight=o,this.offsetDelta=a,this.checkAfterTime=u,this.resetAfterTime=l,this.reset=()=>{this.prevOffsetTimes=[],this.offsetTime=null,this.timeAtPrevOffsetSample=null}}calculateOffset(t){const o=this.getTargetClockTime(),a=o-this.timeAtPrevOffsetSample,u=o-t;if(a>this.resetAfterTime&&this.reset(),this.offsetTime==null&&(this.offsetTime=u),this.prevOffsetTimes.push(u),this.prevOffsetTimes.length>this.weight&&this.prevOffsetTimes.shift(),this.timeAtPrevOffsetSample==null||a>this.checkAfterTime){this.timeAtPrevOffsetSample=o;const l=averageArray(this.prevOffsetTimes);Math.abs(l-this.offsetTime)>this.offsetDelta&&(this.offsetTime=l)}return this.offsetTime}calculateTimestamp(t,o){return this.calculateOffset(t)+o}}function getPerformanceTimeSeconds(){return performance.now()*.001}function getUnixTimeSeconds(){return Date.now()*.001}const keyAlias=new Map([["control","Control"],["ctrl","Control"],["alt","Alt"],["shift","Shift"],["down","ArrowDown"],["up","ArrowUp"],["left","ArrowLeft"],["right","ArrowRight"]]);let keyState;function getCurrentKeyboardState(){if(keyState==null){if(typeof window>"u")return;keyState={},window.addEventListener("keydown",e=>{keyState[e.key]=!0}),window.addEventListener("keyup",e=>{keyState[e.key]=!1})}return{...keyState}}function stringifyValues(e,t=!1){return typeof e=="object"?t?JSON.stringify(e).slice(1,-1).replaceAll('"',"").replaceAll(","," "):JSON.stringify(e):e}Fraction$1.prototype.sam=function(){return this.floor()},Fraction$1.prototype.nextSam=function(){return this.sam().add(1)},Fraction$1.prototype.wholeCycle=function(){return new TimeSpan(this.sam(),this.nextSam())},Fraction$1.prototype.cyclePos=function(){return this.sub(this.sam())},Fraction$1.prototype.lt=function(e){return this.compare(e)<0},Fraction$1.prototype.gt=function(e){return this.compare(e)>0},Fraction$1.prototype.lte=function(e){return this.compare(e)<=0},Fraction$1.prototype.gte=function(e){return this.compare(e)>=0},Fraction$1.prototype.eq=function(e){return this.compare(e)==0},Fraction$1.prototype.ne=function(e){return this.compare(e)!=0},Fraction$1.prototype.max=function(e){return this.gt(e)?this:e},Fraction$1.prototype.maximum=function(...e){return e=e.map(t=>new Fraction$1(t)),e.reduce((t,o)=>o.max(t),this)},Fraction$1.prototype.min=function(e){return this.lt(e)?this:e},Fraction$1.prototype.mulmaybe=function(e){return e!==void 0?this.mul(e):void 0},Fraction$1.prototype.divmaybe=function(e){return e!==void 0?this.div(e):void 0},Fraction$1.prototype.addmaybe=function(e){return e!==void 0?this.add(e):void 0},Fraction$1.prototype.submaybe=function(e){return e!==void 0?this.sub(e):void 0},Fraction$1.prototype.show=function(){return this.s*this.n+"/"+this.d},Fraction$1.prototype.or=function(e){return this.eq(0)?e:this};const fraction$1=e=>Fraction$1(e),gcd=(...e)=>{if(e=removeUndefineds(e),e.length!==0)return e.reduce((t,o)=>t.gcd(o),fraction$1(1))},lcm=(...e)=>{if(e=removeUndefineds(e),e.length===0)return;const t=e.pop();return e.reduce((o,a)=>o===void 0||a===void 0?void 0:o.lcm(a),t)},isFraction=e=>e instanceof Fraction$1;fraction$1._original=Fraction$1;const Fraction=fraction$1;class TimeSpan{constructor(t,o){this.begin=Fraction(t),this.end=Fraction(o)}get spanCycles(){const t=[];var o=this.begin;const a=this.end,u=a.sam();if(o.equals(a))return[new TimeSpan(o,a)];for(;a.gt(o);){if(o.sam().equals(u)){t.push(new TimeSpan(o,this.end));break}const l=o.nextSam();t.push(new TimeSpan(o,l)),o=l}return t}get duration(){return this.end.sub(this.begin)}cycleArc(){const t=this.begin.cyclePos(),o=t.add(this.duration);return new TimeSpan(t,o)}withTime(t){return new TimeSpan(t(this.begin),t(this.end))}withEnd(t){return new TimeSpan(this.begin,t(this.end))}withCycle(t){const o=this.begin.sam(),a=o.add(t(this.begin.sub(o))),u=o.add(t(this.end.sub(o)));return new TimeSpan(a,u)}intersection(t){const o=this.begin.max(t.begin),a=this.end.min(t.end);if(!o.gt(a)&&!(o.equals(a)&&(o.equals(this.end)&&this.begin.lt(this.end)||o.equals(t.end)&&t.begin.lt(t.end))))return new TimeSpan(o,a)}intersection_e(t){const o=this.intersection(t);if(o==null)throw"TimeSpans do not intersect";return o}midpoint(){return this.begin.add(this.duration.div(Fraction(2)))}equals(t){return this.begin.equals(t.begin)&&this.end.equals(t.end)}show(){return this.begin.show()+" → "+this.end.show()}}class Hap{constructor(t,o,a,u={},l=!1){this.whole=t,this.part=o,this.value=a,this.context=u,this.stateful=l,l&&console.assert(typeof this.value=="function","Stateful values must be functions")}get duration(){let t;return typeof this.value?.duration=="number"?t=Fraction(this.value.duration):t=this.whole.end.sub(this.whole.begin),typeof this.value?.clip=="number"?t.mul(this.value.clip):t}get endClipped(){return this.whole.begin.add(this.duration)}isActive(t){return this.whole.begin<=t&&this.endClipped>=t}isInPast(t){return t>this.endClipped}isInNearPast(t,o){return o-t<=this.endClipped}isInFuture(t){return t<this.whole.begin}isInNearFuture(t,o){return o<this.whole.begin&&o>this.whole.begin-t}isWithinTime(t,o){return this.whole.begin<=o&&this.endClipped>=t}wholeOrPart(){return this.whole?this.whole:this.part}withSpan(t){const o=this.whole?t(this.whole):void 0;return new Hap(o,t(this.part),this.value,this.context)}withValue(t){return new Hap(this.whole,this.part,t(this.value),this.context)}hasOnset(){return this.whole!=null&&this.whole.begin.equals(this.part.begin)}hasTag(t){return this.context.tags?.includes(t)}resolveState(t){if(this.stateful&&this.hasOnset()){console.log("stateful");const o=this.value,[a,u]=o(t);return[a,new Hap(this.whole,this.part,u,this.context,!1)]}return[t,this]}spanEquals(t){return this.whole==null&&t.whole==null||this.whole.equals(t.whole)}equals(t){return this.spanEquals(t)&&this.part.equals(t.part)&&this.value===t.value}show(t=!1){const o=typeof this.value=="object"?t?JSON.stringify(this.value).slice(1,-1).replaceAll('"',"").replaceAll(","," "):JSON.stringify(this.value):this.value;var a="";if(this.whole==null)a="~"+this.part.show;else{var u=this.whole.begin.equals(this.part.begin)&&this.whole.end.equals(this.part.end);this.whole.begin.equals(this.part.begin)||(a=this.whole.begin.show()+" ⇜ "),u||(a+="("),a+=this.part.show(),u||(a+=")"),this.whole.end.equals(this.part.end)||(a+=" ⇝ "+this.whole.end.show())}return"[ "+a+" | "+o+" ]"}showWhole(t=!1){return`${this.whole==null?"~":this.whole.show()}: ${stringifyValues(this.value,t)}`}combineContext(t){const o=this;return{...o.context,...t.context,locations:(o.context.locations||[]).concat(t.context.locations||[])}}setContext(t){return new Hap(this.whole,this.part,this.value,t)}ensureObjectValue(){if(typeof this.value!="object")throw new Error(`expected hap.value to be an object, but got "${this.value}". Hint: append .note() or .s() to the end`,"error")}}class State{constructor(t,o={}){this.span=t,this.controls=o}setSpan(t){return new State(t,this.controls)}withSpan(t){return this.setSpan(t(this.span))}setControls(t){return new State(this.span,{...this.controls,...t})}}function unionWithObj(e,t,o){if(t?.value!==void 0&&Object.keys(t).length===1)return logger$2("[warn]: Can't do arithmetic on control pattern."),e;const a=Object.keys(e).filter(u=>Object.keys(t).includes(u));return Object.assign({},e,t,Object.fromEntries(a.map(u=>[u,o(e[u],t[u])])))}curry((e,t)=>e*t),curry((e,t)=>t.map(e));function drawLine(e,t=60){let o=0,a=Fraction(0),u=[""],l="";for(;u[0].length<t;){const p=e.queryArc(o,o+1),f=p.filter(b=>b.hasOnset()).map(b=>b.duration),d=gcd(...f),g=d.inverse();u=u.map(b=>b+"|"),l+="|";for(let b=0;b<g;b++){const[S,E]=[a,a.add(d)],F=p.filter(k=>k.whole.begin.lte(S)&&k.whole.end.gte(E)),$=F.length-u.length;$>0&&(u=u.concat(Array($).fill(l))),u=u.map((k,B)=>{const V=F[B];if(V){const ee=V.whole.begin.eq(S)?""+V.value:"-";return k+ee}return k+"."}),l+=".",a=a.add(d)}o++}return u.join(`
`)}let stringParser,__steps=!0;const calculateSteps=function(e){__steps=!!e},setStringParser=e=>stringParser=e;let Pattern$1=class qe{constructor(t,o=void 0){this.query=t,this._Pattern=!0,this._steps=o}get _steps(){return this.__steps}set _steps(t){this.__steps=t===void 0?void 0:Fraction(t)}setSteps(t){return this._steps=t,this}withSteps(t){return __steps?new qe(this.query,this._steps===void 0?void 0:t(this._steps)):this}get hasSteps(){return this._steps!==void 0}withValue(t){const o=new qe(a=>this.query(a).map(u=>u.withValue(t)));return o._steps=this._steps,o}withState(t){return new qe(o=>this.query(t(o)))}fmap(t){return this.withValue(t)}appWhole(t,o){const a=this,u=function(l){const p=a.query(l),f=o.query(l),d=function(g,b){const S=g.part.intersection(b.part);if(S!=null)return new Hap(t(g.whole,b.whole),S,g.value(b.value),b.combineContext(g))};return flatten(p.map(g=>removeUndefineds(f.map(b=>d(g,b)))))};return new qe(u)}appBoth(t){const o=this,a=function(l,p){if(!(l==null||p==null))return l.intersection_e(p)},u=o.appWhole(a,t);return __steps&&(u._steps=lcm(t._steps,o._steps)),u}appLeft(t){const o=this,a=function(l){const p=[];for(const f of o.query(l)){const d=t.query(l.setSpan(f.wholeOrPart()));for(const g of d){const b=f.whole,S=f.part.intersection(g.part);if(S){const E=f.value(g.value),F=g.combineContext(f),$=new Hap(b,S,E,F);p.push($)}}}return p},u=new qe(a);return u._steps=this._steps,u}appRight(t){const o=this,a=function(l){const p=[];for(const f of t.query(l)){const d=o.query(l.setSpan(f.wholeOrPart()));for(const g of d){const b=f.whole,S=g.part.intersection(f.part);if(S){const E=g.value(f.value),F=f.combineContext(g),$=new Hap(b,S,E,F);p.push($)}}}return p},u=new qe(a);return u._steps=t._steps,u}bindWhole(t,o){const a=this,u=function(l){const p=function(d,g){return new Hap(t(d.whole,g.whole),g.part,g.value,Object.assign({},d.context,g.context,{locations:(d.context.locations||[]).concat(g.context.locations||[])}))},f=function(d){return o(d.value).query(l.setSpan(d.part)).map(g=>p(d,g))};return flatten(a.query(l).map(d=>f(d)))};return new qe(u)}bind(t){const o=function(a,u){if(!(a==null||u==null))return a.intersection_e(u)};return this.bindWhole(o,t)}join(){return this.bind(id)}outerBind(t){return this.bindWhole(o=>o,t).setSteps(this._steps)}outerJoin(){return this.outerBind(id)}innerBind(t){return this.bindWhole((o,a)=>a,t)}innerJoin(){return this.innerBind(id)}resetJoin(t=!1){const o=this;return new qe(a=>o.discreteOnly().query(a).map(u=>u.value.late(t?u.whole.begin:u.whole.begin.cyclePos()).query(a).map(l=>new Hap(l.whole?l.whole.intersection(u.whole):void 0,l.part.intersection(u.part),l.value).setContext(u.combineContext(l))).filter(l=>l.part)).flat())}restartJoin(){return this.resetJoin(!0)}squeezeJoin(){const t=this;function o(a){const u=t.discreteOnly().query(a);function l(f){const g=f.value._focusSpan(f.wholeOrPart()).query(a.setSpan(f.part));function b(S,E){let F;if(E.whole&&S.whole&&(F=E.whole.intersection(S.whole),!F))return;const $=E.part.intersection(S.part);if(!$)return;const k=E.combineContext(S);return new Hap(F,$,E.value,k)}return g.map(S=>b(f,S))}return flatten(u.map(l)).filter(f=>f)}return new qe(o)}squeezeBind(t){return this.fmap(t).squeezeJoin()}polyJoin=function(){const t=this;return t.fmap(o=>o.extend(t._steps.div(o._steps))).outerJoin()};polyBind(t){return this.fmap(t).polyJoin()}queryArc(t,o,a={}){try{return this.query(new State(new TimeSpan(t,o),a))}catch(u){return errorLogger$1(u,"query"),[]}}splitQueries(){const t=this,o=a=>flatten(a.span.spanCycles.map(u=>t.query(a.setSpan(u))));return new qe(o)}withQuerySpan(t){return new qe(o=>this.query(o.withSpan(t)))}withQuerySpanMaybe(t){const o=this;return new qe(a=>{const u=a.withSpan(t);return u.span?o.query(u):[]})}withQueryTime(t){return new qe(o=>this.query(o.withSpan(a=>a.withTime(t))))}withHapSpan(t){return new qe(o=>this.query(o).map(a=>a.withSpan(t)))}withHapTime(t){return this.withHapSpan(o=>o.withTime(t))}withHaps(t){const o=new qe(a=>t(this.query(a),a));return o._steps=this._steps,o}withHap(t){return this.withHaps(o=>o.map(t))}setContext(t){return this.withHap(o=>o.setContext(t))}withContext(t){const o=this.withHap(a=>a.setContext(t(a.context)));return this.__pure!==void 0&&(o.__pure=this.__pure,o.__pure_loc=this.__pure_loc),o}stripContext(){return this.withHap(t=>t.setContext({}))}withLoc(t,o){const a={start:t,end:o},u=this.withContext(l=>{const p=(l.locations||[]).concat([a]);return{...l,locations:p}});return this.__pure&&(u.__pure=this.__pure,u.__pure_loc=a),u}filterHaps(t){return new qe(o=>this.query(o).filter(t))}filterValues(t){return new qe(o=>this.query(o).filter(a=>t(a.value))).setSteps(this._steps)}removeUndefineds(){return this.filterValues(t=>t!=null)}onsetsOnly(){return this.filterHaps(t=>t.hasOnset())}discreteOnly(){return this.filterHaps(t=>t.whole)}defragmentHaps(){return this.discreteOnly().withHaps(o=>{const a=[];for(var u=0;u<o.length;++u){for(var l=!0,p=o[u];l;){const g=JSON.stringify(o[u].value);for(var f=!1,d=u+1;d<o.length;d++){const b=o[d];if(p.whole.equals(b.whole)){if(p.part.begin.eq(b.part.end)){if(g===JSON.stringify(b.value)){p=new Hap(p.whole,new TimeSpan(b.part.begin,p.part.end),p.value),o.splice(d,1),f=!0;break}}else if(b.part.begin.eq(p.part.end)&&g==JSON.stringify(b.value)){p=new Hap(p.whole,new TimeSpan(p.part.begin,b.part.end),p.value),o.splice(d,1),f=!0;break}}}l=f}a.push(p)}return a})}firstCycle(t=!1){var o=this;return t||(o=o.stripContext()),o.query(new State(new TimeSpan(Fraction(0),Fraction(1))))}get firstCycleValues(){return this.firstCycle().map(t=>t.value)}get showFirstCycle(){return this.firstCycle().map(t=>`${t.value}: ${t.whole.begin.toFraction()} - ${t.whole.end.toFraction()}`)}sortHapsByPart(){return this.withHaps(t=>t.sort((o,a)=>o.part.begin.sub(a.part.begin).or(o.part.end.sub(a.part.end)).or(o.whole.begin.sub(a.whole.begin).or(o.whole.end.sub(a.whole.end)))))}asNumber(){return this.fmap(parseNumeral)}_opIn(t,o){return this.fmap(o).appLeft(reify(t))}_opOut(t,o){return this.fmap(o).appRight(reify(t))}_opMix(t,o){return this.fmap(o).appBoth(reify(t))}_opSqueeze(t,o){const a=reify(t);return this.fmap(u=>a.fmap(l=>o(u)(l))).squeezeJoin()}_opSqueezeOut(t,o){const a=this;return reify(t).fmap(l=>a.fmap(p=>o(p)(l))).squeezeJoin()}_opReset(t,o){return reify(t).fmap(u=>this.fmap(l=>o(l)(u))).resetJoin()}_opRestart(t,o){return reify(t).fmap(u=>this.fmap(l=>o(l)(u))).restartJoin()}_opPoly(t,o){const a=reify(t);return this.fmap(u=>a.fmap(l=>o(l)(u))).polyJoin()}layer(...t){return stack(...t.map(o=>o(this)))}superimpose(...t){return this.stack(...t.map(o=>o(this)))}stack(...t){return stack(this,...t)}sequence(...t){return sequence(this,...t)}seq(...t){return sequence(this,...t)}cat(...t){return cat(this,...t)}fastcat(...t){return fastcat(this,...t)}slowcat(...t){return slowcat(this,...t)}onTrigger(t,o=!0){return this.withHap(a=>a.setContext({...a.context,onTrigger:(...u)=>{a.context.onTrigger?.(...u),t(...u)},dominantTrigger:a.context.dominantTrigger||o}))}log(t=a=>`[hap] ${a.showWhole(!0)}`,o=a=>({hap:a})){return this.onTrigger((...a)=>{logger$2(t(...a),void 0,o(...a))},!1)}logValues(t=o=>`[hap] ${stringifyValues(o,!0)}`){return this.log(o=>t(o.value))}drawLine(){return console.log(drawLine(this)),this}unjoin(t,o=id){return t.withHap(a=>a.withValue(u=>u?o(this.ribbon(a.whole.begin,a.whole.duration)):this))}into(t,o){return this.unjoin(t,o).innerJoin()}};function groupHapsBy(e,t){let o=[];return t.forEach(a=>{const u=o.findIndex(([l])=>e(a,l));u===-1?o.push([a]):o[u].push(a)}),o}const congruent=(e,t)=>e.spanEquals(t);Pattern$1.prototype.collect=function(){return this.withHaps(e=>groupHapsBy(congruent,e).map(t=>new Hap(t[0].whole,t[0].part,t,{})))};const arpWith=register("arpWith",(e,t)=>t.collect().fmap(o=>reify(e(o))).innerJoin().withHap(o=>new Hap(o.whole,o.part,o.value.value,o.combineContext(o.value)))),arp=register("arp",(e,t)=>t.arpWith(o=>reify(e).fmap(a=>o[a%o.length])),!1);function _nonArrayObject(e){return!Array.isArray(e)&&typeof e=="object"&&!isFraction(e)}function _composeOp(e,t,o){return _nonArrayObject(e)||_nonArrayObject(t)?(_nonArrayObject(e)||(e={value:e}),_nonArrayObject(t)||(t={value:t}),unionWithObj(e,t,o)):o(e,t)}(function(){const e={set:[(o,a)=>a],keep:[o=>o],keepif:[(o,a)=>a?o:void 0],add:[numeralArgs((o,a)=>o+a)],sub:[numeralArgs((o,a)=>o-a)],mul:[numeralArgs((o,a)=>o*a)],div:[numeralArgs((o,a)=>o/a)],mod:[numeralArgs(_mod$2)],pow:[numeralArgs(Math.pow)],log2:[numeralArgs(Math.log2)],band:[numeralArgs((o,a)=>o&a)],bor:[numeralArgs((o,a)=>o|a)],bxor:[numeralArgs((o,a)=>o^a)],blshift:[numeralArgs((o,a)=>o<<a)],brshift:[numeralArgs((o,a)=>o>>a)],lt:[(o,a)=>o<a],gt:[(o,a)=>o>a],lte:[(o,a)=>o<=a],gte:[(o,a)=>o>=a],eq:[(o,a)=>o==a],eqt:[(o,a)=>o===a],ne:[(o,a)=>o!=a],net:[(o,a)=>o!==a],and:[(o,a)=>o&&a],or:[(o,a)=>o||a],func:[(o,a)=>a(o)]},t=["In","Out","Mix","Squeeze","SqueezeOut","Reset","Restart","Poly"];for(const[o,[a,u]]of Object.entries(e)){Pattern$1.prototype["_"+o]=function(l){return this.fmap(p=>a(p,l))},Object.defineProperty(Pattern$1.prototype,o,{get:function(){const l=this,p=(...f)=>l[o].in(...f);for(const f of t)p[f.toLowerCase()]=function(...d){var g=l;d=sequence(d),u&&(g=u(g),d=u(d));var b;return o==="keepif"?(b=g["_op"+f](d,S=>E=>a(S,E)),b=b.removeUndefineds()):b=g["_op"+f](d,S=>E=>_composeOp(S,E,a)),b};return p.squeezein=p.squeeze,p}});for(const l of t)Pattern$1.prototype[l.toLowerCase()]=function(...p){return this.set[l.toLowerCase()](p)}}Pattern$1.prototype.struct=function(...o){return this.keepif.out(...o)},Pattern$1.prototype.structAll=function(...o){return this.keep.out(...o)},Pattern$1.prototype.mask=function(...o){return this.keepif.in(...o)},Pattern$1.prototype.maskAll=function(...o){return this.keep.in(...o)},Pattern$1.prototype.reset=function(...o){return this.keepif.reset(...o)},Pattern$1.prototype.resetAll=function(...o){return this.keep.reset(...o)},Pattern$1.prototype.restart=function(...o){return this.keepif.restart(...o)},Pattern$1.prototype.restartAll=function(...o){return this.keep.restart(...o)}})();const polyrhythm=stack,pr=stack,pm=polymeter,gap=e=>new Pattern$1(()=>[],e),silence=gap(1),nothing=gap(0);function pure(e){function t(a){return a.span.spanCycles.map(u=>new Hap(Fraction(u.begin).wholeCycle(),u,e))}const o=new Pattern$1(t,1);return o.__pure=e,o}function isPattern(e){return e instanceof Pattern$1||e?._Pattern}function reify(e){return isPattern(e)?e:stringParser&&typeof e=="string"?stringParser(e):pure(e)}function sequenceP(e){let t=pure([]);for(const o of e)t=t.bind(a=>o.fmap(u=>a.concat([u])));return t}function stack(...e){e=e.map(a=>Array.isArray(a)?sequence(...a):reify(a));const t=a=>flatten(e.map(u=>u.query(a))),o=new Pattern$1(t);return __steps&&(o._steps=lcm(...e.map(a=>a._steps))),o}function _stackWith(e,t){if(t=t.map(l=>Array.isArray(l)?sequence(...l):reify(l)),t.length===0)return silence;if(t.length===1)return t[0];const[o,...a]=t.map(l=>l._steps),u=__steps?o.maximum(...a):void 0;return stack(...e(u,t))}function stackLeft(...e){return _stackWith((t,o)=>o.map(a=>a._steps.eq(t)?a:stepcat(a,gap(t.sub(a._steps)))),e)}function stackRight(...e){return _stackWith((t,o)=>o.map(a=>a._steps.eq(t)?a:stepcat(gap(t.sub(a._steps)),a)),e)}function stackCentre(...e){return _stackWith((t,o)=>o.map(a=>{if(a._steps.eq(t))return a;const u=gap(t.sub(a._steps).div(2));return stepcat(u,a,u)}),e)}function stackBy(e,...t){const[o,...a]=t.map(p=>p._steps),u=o.maximum(...a),l={centre:stackCentre,left:stackLeft,right:stackRight,expand:stack,repeat:(...p)=>polymeter(...p).steps(u)};return e.inhabit(l).fmap(p=>p(...t)).innerJoin().setSteps(u)}function slowcat(...e){if(e=e.map(a=>Array.isArray(a)?fastcat(...a):reify(a)),e.length==1)return e[0];const t=function(a){const u=a.span,l=_mod$2(u.begin.sam(),e.length),p=e[l];if(!p)return[];const f=u.begin.floor().sub(u.begin.div(e.length).floor());return p.withHapTime(d=>d.add(f)).query(a.setSpan(u.withTime(d=>d.sub(f))))},o=__steps?lcm(...e.map(a=>a._steps)):void 0;return new Pattern$1(t).splitQueries().setSteps(o)}function slowcatPrime(...e){e=e.map(reify);const t=function(o){const a=Math.floor(o.span.begin)%e.length;return e[a]?.query(o)||[]};return new Pattern$1(t).splitQueries()}function cat(...e){return slowcat(...e)}function arrange(...e){const t=e.reduce((o,[a])=>o+a,0);return e=e.map(([o,a])=>[o,a.fast(o)]),stepcat(...e).slow(t)}function seqPLoop(...e){let t=Fraction(0);for(let o of e)o.length==2&&o.unshift(t),t=o[1];return stack(...e.map(([o,a,u])=>pure(reify(u)).compress(Fraction(o).div(t),Fraction(a).div(t)))).slow(t).innerJoin()}function fastcat(...e){let t=slowcat(...e);return e.length>1&&(t=t._fast(e.length),t._steps=e.length),e.length==1&&e[0].__steps_source&&(e._steps=e[0]._steps),t}function sequence(...e){return fastcat(...e)}function seq(...e){return fastcat(...e)}function _sequenceCount(e){return Array.isArray(e)?e.length==0?[silence,0]:e.length==1?_sequenceCount(e[0]):[fastcat(...e.map(t=>_sequenceCount(t)[0])),e.length]:[reify(e),1]}const mask=curry((e,t)=>reify(t).mask(e)),struct=curry((e,t)=>reify(t).struct(e)),superimpose=curry((e,t)=>reify(t).superimpose(...e)),withValue=curry((e,t)=>reify(t).withValue(e)),bind=curry((e,t)=>reify(t).bind(e)),innerBind=curry((e,t)=>reify(t).innerBind(e)),outerBind=curry((e,t)=>reify(t).outerBind(e)),squeezeBind=curry((e,t)=>reify(t).squeezeBind(e)),stepBind=curry((e,t)=>reify(t).stepBind(e)),polyBind=curry((e,t)=>reify(t).polyBind(e)),set=curry((e,t)=>reify(t).set(e)),keep=curry((e,t)=>reify(t).keep(e)),keepif=curry((e,t)=>reify(t).keepif(e)),add$7=curry((e,t)=>reify(t).add(e)),sub=curry((e,t)=>reify(t).sub(e)),mul=curry((e,t)=>reify(t).mul(e)),div=curry((e,t)=>reify(t).div(e)),mod$3=curry((e,t)=>reify(t).mod(e)),pow=curry((e,t)=>reify(t).pow(e)),band=curry((e,t)=>reify(t).band(e)),bor=curry((e,t)=>reify(t).bor(e)),bxor=curry((e,t)=>reify(t).bxor(e)),blshift=curry((e,t)=>reify(t).blshift(e)),brshift=curry((e,t)=>reify(t).brshift(e)),lt=curry((e,t)=>reify(t).lt(e)),gt=curry((e,t)=>reify(t).gt(e)),lte=curry((e,t)=>reify(t).lte(e)),gte=curry((e,t)=>reify(t).gte(e)),eq=curry((e,t)=>reify(t).eq(e)),eqt=curry((e,t)=>reify(t).eqt(e)),ne=curry((e,t)=>reify(t).ne(e)),net=curry((e,t)=>reify(t).net(e)),and=curry((e,t)=>reify(t).and(e)),or=curry((e,t)=>reify(t).or(e)),func=curry((e,t)=>reify(t).func(e));function register(e,t,o=!0,a=!1,u=l=>l.innerJoin()){if(Array.isArray(e)){const f={};for(const d of e)f[d]=register(d,t,o,a,u);return f}const l=t.length;var p;return o?p=function(...f){f=f.map(reify);const d=f[f.length-1];let g;if(l===1)g=t(d);else{const b=f.slice(0,-1);if(b.every(S=>S.__pure!=null)){const S=b.map(F=>F.__pure),E=b.filter(F=>F.__pure_loc).map(F=>F.__pure_loc);g=t(...S,d),g=g.withContext(F=>{const $=(F.locations||[]).concat(E);return{...F,locations:$}})}else{const[S,...E]=b;let F=(...$)=>t(...$,d);F=curry(F,null,l-1),g=u(E.reduce(($,k)=>$.appLeft(k),S.fmap(F)))}}return a&&(g._steps=d._steps),g}:p=function(...f){f=f.map(reify);const d=t(...f);return a&&(d._steps=f[f.length-1]._steps),d},Pattern$1.prototype[e]=function(...f){if(l===2&&f.length!==1)f=[sequence(...f)];else if(l!==f.length+1)throw new Error(`.${e}() expects ${l-1} inputs but got ${f.length}.`);return f=f.map(reify),p(...f,this)},l>1&&(Pattern$1.prototype["_"+e]=function(...f){const d=t(...f,this);return a&&d.setSteps(this._steps),d}),curry(p,null,l)}function stepRegister(e,t,o=!0,a=!1,u=l=>l.stepJoin()){return register(e,t,o,a,u)}const round=register("round",function(e){return e.asNumber().fmap(t=>Math.round(t))}),floor=register("floor",function(e){return e.asNumber().fmap(t=>Math.floor(t))}),ceil=register("ceil",function(e){return e.asNumber().fmap(t=>Math.ceil(t))}),toBipolar=register("toBipolar",function(e){return e.fmap(t=>t*2-1)}),fromBipolar=register("fromBipolar",function(e){return e.fmap(t=>(t+1)/2)}),range$2=register("range",function(e,t,o){return o.mul(t-e).add(e)}),rangex=register("rangex",function(e,t,o){return o._range(Math.log(e),Math.log(t)).fmap(Math.exp)}),range2=register("range2",function(e,t,o){return o.fromBipolar()._range(e,t)}),ratio=register("ratio",e=>e.fmap(t=>Array.isArray(t)?t.slice(1).reduce((o,a)=>o/a,t[0]):t)),compress=register("compress",function(e,t,o){return e=Fraction(e),t=Fraction(t),e.gt(t)||e.gt(1)||t.gt(1)||e.lt(0)||t.lt(0)?silence:o._fastGap(Fraction(1).div(t.sub(e)))._late(e)}),{compressSpan,compressspan}=register(["compressSpan","compressspan"],function(e,t){return t._compress(e.begin,e.end)}),{fastGap,fastgap}=register(["fastGap","fastgap"],function(e,t){const o=function(u){const l=u.begin.sam(),p=u.begin.sub(l).mul(e).min(1),f=u.end.sub(l).mul(e).min(1);if(!(p>=1))return new TimeSpan(l.add(p),l.add(f))},a=function(u){const l=u.part.begin,p=u.part.end,f=l.sam(),d=l.sub(f).div(e).min(1),g=p.sub(f).div(e).min(1),b=new TimeSpan(f.add(d),f.add(g)),S=u.whole?new TimeSpan(b.begin.sub(l.sub(u.whole.begin).div(e)),b.end.add(u.whole.end.sub(p).div(e))):void 0;return new Hap(S,b,u.value,u.context)};return t.withQuerySpanMaybe(o).withHap(a).splitQueries()}),focus=register("focus",function(e,t,o){return e=Fraction(e),t=Fraction(t),o._early(e.sam())._fast(Fraction(1).div(t.sub(e)))._late(e)}),{focusSpan,focusspan}=register(["focusSpan","focusspan"],function(e,t){return t._focus(e.begin,e.end)}),ply=register("ply",function(e,t){const o=t.fmap(a=>pure(a)._fast(e)).squeezeJoin();return __steps&&(o._steps=Fraction(e).mulmaybe(t._steps)),o}),{fast,density:density$1}=register(["fast","density"],function(e,t){return e===0?silence:(e=Fraction(e),t.withQueryTime(a=>a.mul(e)).withHapTime(a=>a.div(e)).setSteps(t._steps))},!0,!0),hurry=register("hurry",function(e,t){return t._fast(e).mul(pure({speed:e}))}),{slow,sparsity}=register(["slow","sparsity"],function(e,t){return e===0?silence:t._fast(Fraction(1).div(e))}),inside=register("inside",function(e,t,o){return t(o._slow(e))._fast(e)}),outside=register("outside",function(e,t,o){return t(o._fast(e))._slow(e)}),lastOf=register("lastOf",function(e,t,o){const a=Array(e-1).fill(o);return a.push(t(o)),slowcatPrime(...a)}),{firstOf,every}=register(["firstOf","every"],function(e,t,o){const a=Array(e-1).fill(o);return a.unshift(t(o)),slowcatPrime(...a)}),apply=register("apply",function(e,t){return e(t)}),cpm=register("cpm",function(e,t){return t._fast(e/60/1)}),early=register("early",function(e,t){return e=Fraction(e),t.withQueryTime(o=>o.add(e)).withHapTime(o=>o.sub(e))},!0,!0),late=register("late",function(e,t){return e=Fraction(e),t._early(Fraction(0).sub(e))},!0,!0),zoom=register("zoom",function(e,t,o){if(t=Fraction(t),e=Fraction(e),e.gte(t))return nothing;const a=t.sub(e),u=__steps?o._steps?.mulmaybe(a):void 0;return o.withQuerySpan(l=>l.withCycle(p=>p.mul(a).add(e))).withHapSpan(l=>l.withCycle(p=>p.sub(e).div(a))).splitQueries().setSteps(u)}),{zoomArc,zoomarc}=register(["zoomArc","zoomarc"],function(e,t){return t.zoom(e.begin,e.end)}),bite=register("bite",(e,t,o)=>t.fmap(a=>u=>{const l=Fraction(a).div(u).mod(1),p=l.add(Fraction(1).div(u));return o.zoom(l,p)}).appLeft(e).squeezeJoin(),!1),linger=register("linger",function(e,t){return e==0?silence:e<0?t._zoom(e.add(1),1)._slow(e):t._zoom(0,e)._slow(e)},!0,!0),{segment,seg}=register(["segment","seg"],function(e,t){return t.struct(pure(!0)._fast(e)).setSteps(e)}),swingBy=register("swingBy",(e,t,o)=>o.inside(t,late(seq(0,e/2)))),swing=register("swing",(e,t)=>t.swingBy(1/3,e)),{invert:invert$1,inv}=register(["invert","inv"],function(e){return e.fmap(t=>!t)},!0,!0),when=register("when",function(e,t,o){return e?t(o):o}),off=register("off",function(e,t,o){return stack(o,t(o.late(e)))}),brak=register("brak",function(e){return e.when(slowcat(!1,!0),t=>fastcat(t,silence)._late(.25))}),rev=register("rev",function(e){const t=function(o){const a=o.span,u=a.begin.sam(),l=a.begin.nextSam(),p=function(d){const g=d.withTime(S=>u.add(l.sub(S))),b=g.begin;return g.begin=g.end,g.end=b,g};return e.query(o.setSpan(p(a))).map(d=>d.withSpan(p))};return new Pattern$1(t).splitQueries()},!1,!0),revv=register("revv",function(e){const t=o=>new TimeSpan(Fraction(0).sub(o.end),Fraction(0).sub(o.begin));return e.withQuerySpan(t).withHapSpan(t)}),pressBy=register("pressBy",function(e,t){return t.fmap(o=>pure(o).compress(e,1)).squeezeJoin()}),press=register("press",function(e){return e._pressBy(.5)});Pattern$1.prototype.hush=function(){return silence};const palindrome=register("palindrome",function(e){return e.lastOf(2,rev)},!0,!0),{juxBy,juxby}=register(["juxBy","juxby"],function(e,t,o){e/=2;const a=function(p,f,d){return f in p?p[f]:d},u=o.withValue(p=>Object.assign({},p,{pan:a(p,"pan",.5)-e})),l=t(o.withValue(p=>Object.assign({},p,{pan:a(p,"pan",.5)+e})));return stack(u,l).setSteps(__steps?lcm(u._steps,l._steps):void 0)}),jux=register("jux",function(e,t){return t._juxBy(1,e,t)}),{echoWith,echowith,stutWith,stutwith}=register(["echoWith","echowith","stutWith","stutwith"],function(e,t,o,a){return stack(...listRange(0,e-1).map(u=>o(a.late(Fraction(t).mul(u)),u)))}),echo=register("echo",function(e,t,o,a){return a._echoWith(e,t,(u,l)=>u.gain(Math.pow(o,l)))}),stut=register("stut",function(e,t,o,a){return a._echoWith(e,o,(u,l)=>u.gain(Math.pow(t,l)))}),applyN=register("applyN",function(e,t,o){let a=o;for(let u=0;u<e;u++)a=t(a);return a}),plyWith=register(["plyWith","plywith"],function(e,t,o){const a=o.fmap(u=>cat(...listRange(0,e-1).map(l=>applyN(l,t,u)))._fast(e)).squeezeJoin();return __steps&&(a._steps=Fraction(e).mulmaybe(o._steps)),a}),plyForEach=register(["plyForEach","plyforeach"],function(e,t,o){const a=o.fmap(u=>cat(cat(pure(u),...listRange(1,e-1).map(l=>t(pure(u),l))))._fast(e)).squeezeJoin();return __steps&&(a._steps=Fraction(e).mulmaybe(o._steps)),a}),_iter=function(e,t,o=!1){return e=Fraction(e),slowcat(...listRange(0,e.sub(1)).map(a=>o?t.late(Fraction(a).div(e)):t.early(Fraction(a).div(e))))},iter=register("iter",function(e,t){return _iter(e,t,!1)},!0,!0),{iterBack,iterback}=register(["iterBack","iterback"],function(e,t){return _iter(e,t,!0)},!0,!0),{repeatCycles}=register("repeatCycles",function(e,t){return new Pattern$1(function(o){const a=o.span.begin.sam(),u=a.div(e).sam(),l=a.sub(u);return o=o.withSpan(p=>p.withTime(f=>f.sub(l))),t.query(o).map(p=>p.withSpan(f=>f.withTime(d=>d.add(l))))}).splitQueries()},!0,!0),_chunk=function(e,t,o,a=!1,u=!1){const l=Array(e-1).fill(!1);l.unshift(!0);const p=_iter(e,sequence(...l),!a);return u||(o=o.repeatCycles(e)),o.when(p,t)},{chunk,slowchunk,slowChunk}=register(["chunk","slowchunk","slowChunk"],function(e,t,o){return _chunk(e,t,o,!1,!1)},!0,!0),{chunkBack,chunkback}=register(["chunkBack","chunkback"],function(e,t,o){return _chunk(e,t,o,!0)},!0,!0),{fastchunk,fastChunk}=register(["fastchunk","fastChunk"],function(e,t,o){return _chunk(e,t,o,!1,!0)},!0,!0),{chunkinto,chunkInto}=register(["chunkinto","chunkInto"],function(e,t,o){return o.into(fastcat(!0,...Array(e-1).fill(!1))._iterback(e),t)}),{chunkbackinto,chunkBackInto}=register(["chunkbackinto","chunkBackInto"],function(e,t,o){return o.into(fastcat(!0,...Array(e-1).fill(!1))._iter(e)._early(1),t)}),bypass=register("bypass",function(e,t){return e=!!parseInt(e),e?silence:t},!0,!0),{ribbon,rib}=register(["ribbon","rib"],(e,t,o)=>o.early(e).restart(pure(1).slow(t))),hsla=register("hsla",(e,t,o,a,u)=>u.color(`hsla(${e}turn,${t*100}%,${o*100}%,${a})`)),hsl=register("hsl",(e,t,o,a)=>a.color(`hsl(${e}turn,${t*100}%,${o*100}%)`));Pattern$1.prototype.tag=function(e){return this.withContext(t=>({...t,tags:(t.tags||[]).concat([e])}))};const filter$1=register("filter",(e,t)=>t.withHaps(o=>o.filter(e))),filterWhen=register("filterWhen",(e,t)=>t.filter(o=>e(o.whole.begin))),within=register("within",(e,t,o,a)=>stack(o(a.filterWhen(u=>u.cyclePos()>=e&&u.cyclePos()<=t)),a.filterWhen(u=>u.cyclePos()<e||u.cyclePos()>t)));Pattern$1.prototype.stepJoin=function(){const e=this,t=stepcat(..._retime(_slices(e.queryArc(0,1))))._steps,o=function(a){const l=e.early(a.span.begin.sam()).query(a.setSpan(new TimeSpan(Fraction(0),Fraction(1))));return stepcat(..._retime(_slices(l))).query(a)};return new Pattern$1(o,t)},Pattern$1.prototype.stepBind=function(e){return this.fmap(e).stepJoin()};function _retime(e){const t=e.filter((l,p)=>p.hasSteps).reduce((l,p)=>l.add(p),Fraction(0)),o=removeUndefineds(e.map((l,p)=>p._steps)).reduce((l,p)=>l.add(p),Fraction(0)),a=t.eq(0)?void 0:o.div(t);function u(l,p){return p._steps===void 0?[l.mulmaybe(a),p]:[p._steps,p]}return e.map(l=>u(...l))}function _slices(e){const t=flatten(e.map(u=>[u.part.begin,u.part.end])),o=uniqsortr([Fraction(0),Fraction(1),...t]);return pairs(o).map(u=>[u[1].sub(u[0]),stack(..._fitslice(new TimeSpan(...u),e).map(l=>l.value.withHap(p=>p.setContext(p.combineContext(l)))))])}function _fitslice(e,t){return removeUndefineds(t.map(o=>_match(e,o)))}function _match(e,t){const o=e.intersection(t.part);if(o!=null)return new Hap(t.whole,o,t.value,t.context)}const pace=register("pace",function(e,t){return t._steps===void 0?t:t._steps.eq(Fraction(0))?nothing:t._fast(Fraction(e).div(t._steps)).setSteps(e)});function _polymeterListSteps(e,...t){const o=t.map(u=>_sequenceCount(u));if(o.length==0)return silence;e==0&&(e=o[0][1]);const a=[];for(const u of o)u[1]!=0&&(e==u[1]?a.push(u[0]):a.push(u[0]._fast(Fraction(e).div(Fraction(u[1])))));return stack(...a)}function polymeter(...e){if(Array.isArray(e[0]))return _polymeterListSteps(0,...e);if(e=e.filter(a=>a.hasSteps),e.length==0)return silence;const t=lcm(...e.map(a=>a._steps));if(t.eq(Fraction(0)))return nothing;const o=stack(...e.map(a=>a.pace(t)));return o._steps=t,o}function stepcat(...e){if(e.length===0)return nothing;const t=p=>Array.isArray(p)?p:[p._steps??1,p];if(e=e.map(t),e.find(p=>p[0]===void 0)){const p=e.map(d=>d[0]).filter(d=>d!==void 0);if(p.length===0)return fastcat(...e.map(d=>d[1]));if(p.length===e.length)return nothing;const f=p.reduce((d,g)=>d.add(g),Fraction(0)).div(p.length);for(let d of e)d[0]===void 0&&(d[0]=f)}if(e.length==1)return reify(e[0][1]).withSteps(f=>e[0][0]);const o=e.map(p=>p[0]).reduce((p,f)=>p.add(f),Fraction(0));let a=Fraction(0);const u=[];for(const[p,f]of e){if(Fraction(p).eq(0))continue;const d=a.add(p);u.push(reify(f)._compress(a.div(o),d.div(o))),a=d}const l=stack(...u);return l._steps=o,l}function stepalt(...e){e=e.map(u=>Array.isArray(u)?u.map(reify):[reify(u)]);const t=lcm(...e.map(u=>Fraction(u.length)));let o=[];for(let u=0;u<t;++u)o.push(...e.map(l=>l.length==0?silence:l[u%l.length]));o=o.filter(u=>u.hasSteps&&u._steps>0);const a=o.reduce((u,l)=>u.add(l._steps),Fraction(0));return o=stepcat(...o),o._steps=a,o}const take=stepRegister("take",function(e,t){if(!t.hasSteps||t._steps.lte(0)||(e=Fraction(e),e.eq(0)))return nothing;const o=e<0;o&&(e=e.abs());const a=e.div(t._steps);return a.lte(0)?nothing:a.gte(1)?t:o?t.zoom(Fraction(1).sub(a),1):t.zoom(0,a)}),drop=stepRegister("drop",function(e,t){return t.hasSteps?(e=Fraction(e),e.lt(0)?t.take(t._steps.add(e)):t.take(Fraction(0).sub(t._steps.sub(e)))):nothing}),extend=stepRegister("extend",function(e,t){return t.fast(e).expand(e)}),replicate=stepRegister("replicate",function(e,t){return t.repeatCycles(e).fast(e).expand(e)}),expand=stepRegister("expand",function(e,t){return t.withSteps(o=>o.mul(Fraction(e)))}),contract=stepRegister("contract",function(e,t){return t.withSteps(o=>o.div(Fraction(e)))});Pattern$1.prototype.shrinklist=function(e){const t=this;if(!t.hasSteps)return[t];let[o,a]=Array.isArray(e)?e:[e,t._steps];if(o=Fraction(o),a===0||o===0)return[t];const u=o>0,l=[];if(u){const p=Fraction(1).div(t._steps).mul(o);for(let f=0;f<a;++f){const d=p.mul(f);if(d.gt(1))break;l.push([d,1])}}else{o=Fraction(0).sub(o);const p=Fraction(1).div(t._steps).mul(o);for(let f=0;f<a;++f){const d=Fraction(1).sub(p.mul(f));if(d.lt(0))break;l.push([Fraction(0),d])}}return l.map(p=>t.zoom(...p))};const shrinklist=(e,t)=>t.shrinklist(e),shrink=register("shrink",function(e,t){if(!t.hasSteps)return nothing;const o=t.shrinklist(e),a=stepcat(...o);return a._steps=o.reduce((u,l)=>u.add(l._steps),Fraction(0)),a},!0,!1,e=>e.stepJoin()),grow=register("grow",function(e,t){if(!t.hasSteps)return nothing;const o=t.shrinklist(Fraction(0).sub(e));o.reverse();const a=stepcat(...o);return a._steps=o.reduce((u,l)=>u.add(l._steps),Fraction(0)),a},!0,!1,e=>e.stepJoin()),tour=function(e,...t){return e.tour(...t)};Pattern$1.prototype.tour=function(...e){return stepcat(...[].concat(...e.map((t,o)=>[...e.slice(0,e.length-o),this,...e.slice(e.length-o)]),this,...e))};const zip=function(...e){e=e.filter(a=>a.hasSteps);const t=slowcat(...e.map(a=>a._slow(a._steps))),o=lcm(...e.map(a=>a._steps));return t._fast(o).setSteps(o)},timecat=stepcat,timeCat=stepcat,s_cat=stepcat,s_alt=stepalt,s_polymeter=polymeter;Pattern$1.prototype.s_polymeter=Pattern$1.prototype.polymeter;const s_taper=shrink;Pattern$1.prototype.s_taper=Pattern$1.prototype.shrink;const s_taperlist=shrinklist;Pattern$1.prototype.s_taperlist=Pattern$1.prototype.shrinklist;const s_add=take;Pattern$1.prototype.s_add=Pattern$1.prototype.take;const s_sub=drop;Pattern$1.prototype.s_sub=Pattern$1.prototype.drop;const s_expand=expand;Pattern$1.prototype.s_expand=Pattern$1.prototype.expand;const s_extend=extend;Pattern$1.prototype.s_extend=Pattern$1.prototype.extend;const s_contract=contract;Pattern$1.prototype.s_contract=Pattern$1.prototype.contract;const s_tour=tour;Pattern$1.prototype.s_tour=Pattern$1.prototype.tour;const s_zip=zip;Pattern$1.prototype.s_zip=Pattern$1.prototype.zip;const steps$2=pace;Pattern$1.prototype.steps=Pattern$1.prototype.pace;const chop=register("chop",function(e,t){const a=Array.from({length:e},(p,f)=>f).map(p=>({begin:p/e,end:(p+1)/e})),u=function(p,f){if("begin"in p&&"end"in p&&p.begin!==void 0&&p.end!==void 0){const d=p.end-p.begin;f={begin:p.begin+f.begin*d,end:p.begin+f.end*d}}return Object.assign({},p,f)},l=function(p){return sequence(a.map(f=>u(p,f)))};return t.squeezeBind(l).setSteps(__steps?Fraction(e).mulmaybe(t._steps):void 0)}),striate=register("striate",function(e,t){const a=Array.from({length:e},(l,p)=>p).map(l=>({begin:l/e,end:(l+1)/e})),u=slowcat(...a);return t.set(u)._fast(e).setSteps(__steps?Fraction(e).mulmaybe(t._steps):void 0)}),_loopAt=function(e,t,o=.5){return t.speed(1/e*o).unit("c").slow(e)},slice=register("slice",function(e,t,o){return e.innerBind(a=>t.outerBind(u=>o.outerBind(l=>{l=l instanceof Object?l:{s:l};const p=Array.isArray(a)?a[u]:u/a,f=Array.isArray(a)?a[u+1]:(u+1)/a;return pure({begin:p,end:f,_slices:a,...l})}))).setSteps(t._steps)},!1);Pattern$1.prototype.onTriggerTime=function(e){return this.onTrigger((t,o,a,u)=>{const l=u-o;window.setTimeout(()=>{e(t)},l*1e3)},!1)};const splice=register("splice",function(e,t,o){const a=slice(e,t,o);return new Pattern$1(u=>{const l=u.controls._cps||1;return a.query(u).map(f=>f.withValue(d=>({speed:l/d._slices/f.whole.duration*(d.speed||1),unit:"c",...d})))}).setSteps(t._steps)},!1),{loopAt,loopat}=register(["loopAt","loopat"],function(e,t){const o=t._steps?t._steps.div(e):void 0;return new Pattern$1(a=>_loopAt(e,t,a.controls._cps).query(a),o)}),fit=register("fit",e=>e.withHaps((t,o)=>t.map(a=>a.withValue(u=>{const l=("end"in u?u.end:1)-("begin"in u?u.begin:0);return{...u,speed:(o.controls._cps||1)/a.whole.duration*l,unit:"c"}})))),{loopAtCps,loopatcps}=register(["loopAtCps","loopatcps"],function(e,t,o){return _loopAt(e,o,t)}),ref$1=e=>pure(1).withValue(()=>reify(e())).innerJoin();let fadeGain=e=>e<.5?1:1-(e-.5)/.5,xfade=(e,t,o)=>{t=reify(t),e=reify(e),o=reify(o);let a=t.fmap(l=>({gain:fadeGain(l)})),u=t.fmap(l=>({gain:fadeGain(1-l)}));return stack(e.mul(a),o.mul(u))};Pattern$1.prototype.xfade=function(e,t){return xfade(this,e,t)};const __beat=e=>(t,o,a)=>{t=Fraction(t).mod(o),o=Fraction(o);const u=t.div(o),l=t.add(1).div(o);return e(a.fmap(p=>pure(p)._compress(u,l)))},{beat}=register(["beat"],__beat(e=>e.innerJoin())),_morph=(e,t,o)=>{o=Fraction(o);const a=Fraction(1).div(e.length),u=f=>{const d=[];for(const[g,b]of f.entries())b&&d.push([Fraction(g).div(f.length),b]);return d},l=zipWith(([f,d],[g,b])=>{const S=o.mul(g-f).add(f),E=S.add(a);return new TimeSpan(S,E)},u(e),u(t));function p(f){const d=f.span.begin.sam(),g=f.span.cycleArc(),b=[];for(const S of l){const E=S.intersection(g);E!==void 0&&b.push(new Hap(S.withTime(F=>F.add(d)),E.withTime(F=>F.add(d)),!0))}return b}return new Pattern$1(p).splitQueries()},morph=(e,t,o)=>(e=reify(e),t=reify(t),o=reify(o),e.innerBind(a=>t.innerBind(u=>o.innerBind(l=>_morph(a,u,l))))),distAlgoNames=["scurve","soft","hard","cubic","diode","asym","fold","sinefold","chebyshev"];for(const e of distAlgoNames)Pattern$1.prototype[e]=function(t){const o=reify(t).fmap(a=>Array.isArray(a)?[...a,e]:[a,1,e]);return this.distort(o)};const parray=e=>{let o=pure(curry((...a)=>a,null,e.length));for(const a of e)o=o.appBoth(reify(a));return o},_ensureListPattern=e=>Array.isArray(e)?parray(e):reify(e);Pattern$1.prototype.partials=function(e){return this.withValue(t=>o=>({...t,partials:o})).appLeft(_ensureListPattern(e))};const partials=e=>_ensureListPattern(e).as("partials");Pattern$1.prototype.phases=function(e){return this.withValue(t=>o=>({...t,phases:o})).appLeft(_ensureListPattern(e))};const phases=e=>_ensureListPattern(e).as("phases");function createParam(e){let t=Array.isArray(e);e=t?e:[e];const o=e[0],a=l=>{let p;if(typeof l=="object"&&l.value!==void 0&&(p={...l},l=l.value,delete p.value),t&&Array.isArray(l)){const f=p||{};return l.forEach((d,g)=>{g<e.length&&(f[e[g]]=d)}),f}else return p?(p[o]=l,p):{[o]:l}},u=function(l,p){return p?typeof l>"u"?p.fmap(a):p.set(reify(l).withValue(a)):reify(l).withValue(a)};return Pattern$1.prototype[o]=function(l){return u(l,this)},u}const controlAlias=new Map;function isControlName(e){return controlAlias.has(e)}function registerControl(e,...t){const o=Array.isArray(e)?e[0]:e;let a={};return a[o]=createParam(e),controlAlias.set(o,o),t.forEach(u=>{a[u]=a[o],controlAlias.set(u,o),Pattern$1.prototype[u]=Pattern$1.prototype[o]}),a}const{s,sound}=registerControl(["s","n","gain"],"sound"),{wt,wavetablePosition}=registerControl("wt","wavetablePosition"),{wtenv}=registerControl("wtenv"),{wtattack,wtatt}=registerControl("wtattack","wtatt"),{wtdecay,wtdec}=registerControl("wtdecay","wtdec"),{wtsustain,wtsus}=registerControl("wtsustain","wtsus"),{wtrelease,wtrel}=registerControl("wtrelease","wtrel"),{wtrate}=registerControl("wtrate"),{wtsync}=registerControl("wtsync"),{wtdepth}=registerControl("wtdepth"),{wtshape}=registerControl("wtshape"),{wtdc}=registerControl("wtdc"),{wtskew}=registerControl("wtskew"),{warp,wavetableWarp}=registerControl("warp","wavetableWarp"),{warpattack,warpatt}=registerControl("warpattack","warpatt"),{warpdecay,warpdec}=registerControl("warpdecay","warpdec"),{warpsustain,warpsus}=registerControl("warpsustain","warpsus"),{warprelease,warprel}=registerControl("warprelease","warprel"),{warprate}=registerControl("warprate"),{warpdepth}=registerControl("warpdepth"),{warpshape}=registerControl("warpshape"),{warpdc}=registerControl("warpdc"),{warpskew}=registerControl("warpskew"),{warpmode,wavetableWarpMode}=registerControl("warpmode","wavetableWarpMode"),{wtphaserand,wavetablePhaseRand}=registerControl("wtphaserand","wavetablePhaseRand"),{warpenv}=registerControl("warpenv"),{warpsync}=registerControl("warpsync"),{source,src}=registerControl("source","src"),{n}=registerControl("n"),{note:note$2}=registerControl(["note","n"]),{accelerate}=registerControl("accelerate"),{velocity}=registerControl("velocity"),{gain}=registerControl("gain"),{postgain}=registerControl("postgain"),{amp}=registerControl("amp"),{attack,att}=registerControl("attack","att"),{fmh}=registerControl(["fmh","fmi"],"fmh"),{fmi,fm:fm$1}=registerControl(["fmi","fmh"],"fm"),{fmenv}=registerControl("fmenv"),{fmattack}=registerControl("fmattack"),{fmwave}=registerControl("fmwave"),{fmdecay}=registerControl("fmdecay"),{fmsustain}=registerControl("fmsustain"),{fmrelease}=registerControl("fmrelease"),{fmvelocity}=registerControl("fmvelocity"),{bank}=registerControl("bank"),{chorus}=registerControl("chorus"),{analyze}=registerControl("analyze"),{fft}=registerControl("fft"),{decay,dec}=registerControl("decay","dec"),{sustain,sus}=registerControl("sustain","sus"),{release,rel}=registerControl("release","rel"),{hold}=registerControl("hold"),{bandf,bpf,bp}=registerControl(["bandf","bandq","bpenv"],"bpf","bp"),{bandq,bpq}=registerControl("bandq","bpq"),{begin}=registerControl("begin"),{end}=registerControl("end"),{loop}=registerControl("loop"),{loopBegin,loopb}=registerControl("loopBegin","loopb"),{loopEnd,loope}=registerControl("loopEnd","loope"),{crush}=registerControl("crush"),{coarse}=registerControl("coarse"),{tremolo}=registerControl(["tremolo","tremolodepth","tremoloskew","tremolophase"],"trem"),{tremolosync}=registerControl(["tremolosync","tremolodepth","tremoloskew","tremolophase"],"tremsync"),{tremolodepth}=registerControl("tremolodepth","tremdepth"),{tremoloskew}=registerControl("tremoloskew","tremskew"),{tremolophase}=registerControl("tremolophase","tremphase"),{tremoloshape}=registerControl("tremoloshape","tremshape"),{drive}=registerControl("drive"),{duck}=registerControl("duckorbit","duck"),{duckdepth}=registerControl("duckdepth"),{duckonset}=registerControl("duckonset","duckons"),{duckattack}=registerControl("duckattack","duckatt"),{byteBeatExpression,bbexpr}=registerControl("byteBeatExpression","bbexpr"),{byteBeatStartTime,bbst}=registerControl("byteBeatStartTime","bbst"),{channels,ch}=registerControl("channels","ch"),{pw}=registerControl(["pw","pwrate","pwsweep"]),{pwrate}=registerControl("pwrate"),{pwsweep}=registerControl("pwsweep"),{phaserrate,ph,phaser}=registerControl(["phaserrate","phaserdepth","phasercenter","phasersweep"],"ph","phaser"),{phasersweep,phs}=registerControl("phasersweep","phs"),{phasercenter,phc}=registerControl("phasercenter","phc"),{phaserdepth,phd,phasdp}=registerControl("phaserdepth","phd","phasdp"),{channel}=registerControl("channel"),{cut}=registerControl("cut"),{cutoff,ctf,lpf,lp}=registerControl(["cutoff","resonance","lpenv"],"ctf","lpf","lp"),{lpenv,lpe}=registerControl("lpenv","lpe"),{hpenv,hpe}=registerControl("hpenv","hpe"),{bpenv,bpe}=registerControl("bpenv","bpe"),{lpattack,lpa}=registerControl("lpattack","lpa"),{hpattack,hpa}=registerControl("hpattack","hpa"),{bpattack,bpa}=registerControl("bpattack","bpa"),{lpdecay,lpd}=registerControl("lpdecay","lpd"),{hpdecay,hpd}=registerControl("hpdecay","hpd"),{bpdecay,bpd}=registerControl("bpdecay","bpd"),{lpsustain,lps}=registerControl("lpsustain","lps"),{hpsustain,hps}=registerControl("hpsustain","hps"),{bpsustain,bps}=registerControl("bpsustain","bps"),{lprelease,lpr}=registerControl("lprelease","lpr"),{hprelease,hpr}=registerControl("hprelease","hpr"),{bprelease,bpr}=registerControl("bprelease","bpr"),{ftype}=registerControl("ftype"),{fanchor}=registerControl("fanchor"),{lprate}=registerControl("lprate"),{lpsync}=registerControl("lpsync"),{lpdepth}=registerControl("lpdepth"),{lpdepthfrequency}=registerControl("lpdepthfrequency","lpdepthfreq"),{lpshape}=registerControl("lpshape"),{lpdc}=registerControl("lpdc"),{lpskew}=registerControl("lpskew"),{bprate}=registerControl("bprate"),{bpsync}=registerControl("bpsync"),{bpdepth}=registerControl("bpdepth"),{bpdepthfrequency}=registerControl("bpdepthfrequency","bpdepthfreq"),{bpshape}=registerControl("bpshape"),{bpdc}=registerControl("bpdc"),{bpskew}=registerControl("bpskew"),{hprate}=registerControl("hprate"),{hpsync}=registerControl("hpsync"),{hpdepth,hpdepthfreq}=registerControl("hpdepth"),{hpdepthfrequency}=registerControl("hpdepthfrequency","hpdepthfreq"),{hpshape}=registerControl("hpshape"),{hpdc}=registerControl("hpdc"),{hpskew}=registerControl("hpskew"),{vib,vibrato,v}=registerControl(["vib","vibmod"],"vibrato","v"),{noise}=registerControl("noise"),{vibmod,vmod}=registerControl(["vibmod","vib"],"vmod"),{hcutoff,hpf,hp}=registerControl(["hcutoff","hresonance","hpenv"],"hpf","hp"),{hresonance,hpq}=registerControl("hresonance","hpq"),{resonance,lpq}=registerControl("resonance","lpq"),{djf}=registerControl("djf"),{delay}=registerControl(["delay","delaytime","delayfeedback"]),{delayfeedback,delayfb,dfb}=registerControl("delayfeedback","delayfb","dfb"),{delayspeed}=registerControl("delayspeed"),{delaytime,delayt,dt}=registerControl("delaytime","delayt","dt"),{delaysync}=registerControl("delaysync"),{lock}=registerControl("lock"),{detune,det}=registerControl("detune","det"),{unison}=registerControl("unison"),{spread}=registerControl("spread"),{dry}=registerControl("dry"),{fadeTime,fadeOutTime}=registerControl("fadeTime","fadeOutTime"),{fadeInTime}=registerControl("fadeInTime"),{freq:freq$1}=registerControl("freq"),{pattack,patt}=registerControl("pattack","patt"),{pdecay,pdec}=registerControl("pdecay","pdec"),{psustain,psus}=registerControl("psustain","psus"),{prelease,prel}=registerControl("prelease","prel"),{penv}=registerControl("penv"),{pcurve}=registerControl("pcurve"),{panchor}=registerControl("panchor"),{gate,gat}=registerControl("gate","gat"),{leslie}=registerControl("leslie"),{lrate}=registerControl("lrate"),{lsize}=registerControl("lsize"),{activeLabel}=registerControl("activeLabel"),{label}=registerControl(["label","activeLabel"]),{degree}=registerControl("degree"),{mtranspose}=registerControl("mtranspose"),{ctranspose}=registerControl("ctranspose"),{harmonic}=registerControl("harmonic"),{stepsPerOctave}=registerControl("stepsPerOctave"),{octaveR}=registerControl("octaveR"),{nudge}=registerControl("nudge"),{octave:octave$1,oct}=registerControl("octave","oct"),{orbit}=registerControl("orbit","o"),{overgain}=registerControl("overgain"),{overshape}=registerControl("overshape"),{pan}=registerControl("pan"),{panspan}=registerControl("panspan"),{pansplay}=registerControl("pansplay"),{panwidth}=registerControl("panwidth"),{panorient}=registerControl("panorient"),{rate}=registerControl("rate"),{slide}=registerControl("slide"),{semitone}=registerControl("semitone"),{voice}=registerControl("voice"),{chord:chord$1}=registerControl("chord"),{dictionary:dictionary$5,dict}=registerControl("dictionary","dict"),{anchor}=registerControl("anchor"),{offset}=registerControl("offset"),{octaves}=registerControl("octaves"),{mode:mode$1}=registerControl(["mode","anchor"]),{room}=registerControl(["room","size"]),{roomlp,rlp}=registerControl("roomlp","rlp"),{roomdim,rdim}=registerControl("roomdim","rdim"),{roomfade,rfade}=registerControl("roomfade","rfade"),{ir,iresponse}=registerControl(["ir","i"],"iresponse"),{irspeed}=registerControl("irspeed"),{irbegin}=registerControl("irbegin"),{roomsize,size,sz,rsize}=registerControl("roomsize","size","sz","rsize"),{shape}=registerControl(["shape","shapevol"]),{distort,dist:dist$2}=registerControl(["distort","distortvol","distorttype"],"dist"),{distortvol}=registerControl("distortvol","distvol"),{distorttype}=registerControl("distorttype","disttype"),{compressor}=registerControl(["compressor","compressorRatio","compressorKnee","compressorAttack","compressorRelease"]),{compressorKnee}=registerControl("compressorKnee"),{compressorRatio}=registerControl("compressorRatio"),{compressorAttack}=registerControl("compressorAttack"),{compressorRelease}=registerControl("compressorRelease"),{speed}=registerControl("speed"),{stretch}=registerControl("stretch"),{unit}=registerControl("unit"),{squiz}=registerControl("squiz"),{vowel}=registerControl("vowel"),{waveloss}=registerControl("waveloss"),{density}=registerControl("density"),{expression}=registerControl("expression"),{sustainpedal}=registerControl("sustainpedal"),{fshift}=registerControl("fshift"),{fshiftnote}=registerControl("fshiftnote"),{fshiftphase}=registerControl("fshiftphase"),{triode}=registerControl("triode"),{krush}=registerControl("krush"),{kcutoff}=registerControl("kcutoff"),{octer}=registerControl("octer"),{octersub}=registerControl("octersub"),{octersubsub}=registerControl("octersubsub"),{ring}=registerControl("ring"),{ringf}=registerControl("ringf"),{ringdf}=registerControl("ringdf"),{freeze}=registerControl("freeze"),{xsdelay}=registerControl("xsdelay"),{tsdelay}=registerControl("tsdelay"),{real}=registerControl("real"),{imag}=registerControl("imag"),{enhance}=registerControl("enhance"),{comb}=registerControl("comb"),{smear:smear$1}=registerControl("smear"),{scram}=registerControl("scram"),{binshift}=registerControl("binshift"),{hbrick}=registerControl("hbrick"),{lbrick}=registerControl("lbrick"),{frameRate}=registerControl("frameRate"),{frames}=registerControl("frames"),{hours}=registerControl("hours"),{minutes}=registerControl("minutes"),{seconds}=registerControl("seconds"),{songPtr}=registerControl("songPtr"),{uid}=registerControl("uid"),{val}=registerControl("val"),{cps}=registerControl("cps"),{clip,legato}=registerControl("clip","legato"),{duration,dur}=registerControl("duration","dur"),{zrand}=registerControl("zrand"),{curve}=registerControl("curve"),{deltaSlide}=registerControl("deltaSlide"),{pitchJump}=registerControl("pitchJump"),{pitchJumpTime}=registerControl("pitchJumpTime"),{lfo,repeatTime}=registerControl("lfo","repeatTime"),{znoise}=registerControl("znoise"),{zmod}=registerControl("zmod"),{zcrush}=registerControl("zcrush"),{zdelay}=registerControl("zdelay"),{zzfx}=registerControl("zzfx"),{color,colour}=registerControl(["color","colour"]);let createParams=(...e)=>e.reduce((t,o)=>Object.assign(t,{[o]:createParam(o)}),{});const adsr=register("adsr",(e,t)=>{e=Array.isArray(e)?e:[e];const[o,a,u,l]=e;return t.set({attack:o,decay:a,sustain:u,release:l})}),ad=register("ad",(e,t)=>{e=Array.isArray(e)?e:[e];const[o,a=o]=e;return t.attack(o).decay(a)}),ds=register("ds",(e,t)=>{e=Array.isArray(e)?e:[e];const[o,a=0]=e;return t.set({decay:o,sustain:a})}),ar=register("ar",(e,t)=>{e=Array.isArray(e)?e:[e];const[o,a=o]=e;return t.set({attack:o,release:a})}),{midichan}=registerControl("midichan"),{midimap}=registerControl("midimap"),{midiport}=registerControl("midiport"),{midicmd}=registerControl("midicmd"),control=register("control",(e,t)=>{if(!Array.isArray(e))throw new Error("control expects an array of [ccn, ccv]");const[o,a]=e;return t.ccn(o).ccv(a)}),{ccn}=registerControl("ccn"),{ccv}=registerControl("ccv"),{ctlNum}=registerControl("ctlNum"),{nrpnn}=registerControl("nrpnn"),{nrpv}=registerControl("nrpv"),{progNum}=registerControl("progNum"),sysex=register("sysex",(e,t)=>{if(!Array.isArray(e))throw new Error("sysex expects an array of [id, data]");const[o,a]=e;return t.sysexid(o).sysexdata(a)}),{sysexid}=registerControl("sysexid"),{sysexdata}=registerControl("sysexdata"),{midibend}=registerControl("midibend"),{miditouch}=registerControl("miditouch"),{polyTouch}=registerControl("polyTouch"),{oschost}=registerControl("oschost"),{oscport}=registerControl("oscport"),getControlName=e=>controlAlias.has(e)?controlAlias.get(e):e,as=register("as",(e,t)=>(e=Array.isArray(e)?e:[e],t.fmap(o=>(o=Array.isArray(o)?o:[o],o=Object.fromEntries(e.map((a,u)=>[getControlName(a),o[u]])),o)))),scrub=register("scrub",(e,t)=>e.outerBind(o=>{Array.isArray(o)||(o=[o]);const[a,u=1]=o;return t.begin(a).mul(speed(u)).clip(1)}),!1),controls=Object.freeze(Object.defineProperty({__proto__:null,accelerate,activeLabel,ad,adsr,amp,analyze,anchor,ar,as,att,attack,bandf,bandq,bank,bbexpr,bbst,begin,binshift,bp,bpa,bpattack,bpd,bpdc,bpdecay,bpdepth,bpdepthfrequency,bpe,bpenv,bpf,bpq,bpr,bprate,bprelease,bps,bpshape,bpskew,bpsustain,bpsync,byteBeatExpression,byteBeatStartTime,ccn,ccv,ch,channel,channels,chord:chord$1,chorus,clip,coarse,color,colour,comb,compressor,compressorAttack,compressorKnee,compressorRatio,compressorRelease,control,cps,createParam,createParams,crush,ctf,ctlNum,ctranspose,curve,cut,cutoff,dec,decay,degree,delay,delayfb,delayfeedback,delayspeed,delaysync,delayt,delaytime,deltaSlide,density,det,detune,dfb,dict,dictionary:dictionary$5,dist:dist$2,distort,distorttype,distortvol,djf,drive,dry,ds,dt,duck,duckattack,duckdepth,duckonset,dur,duration,end,enhance,expression,fadeInTime,fadeOutTime,fadeTime,fanchor,fft,fm:fm$1,fmattack,fmdecay,fmenv,fmh,fmi,fmrelease,fmsustain,fmvelocity,fmwave,frameRate,frames,freeze,freq:freq$1,fshift,fshiftnote,fshiftphase,ftype,gain,gat,gate,getControlName,harmonic,hbrick,hcutoff,hold,hours,hp,hpa,hpattack,hpd,hpdc,hpdecay,hpdepth,hpdepthfreq,hpdepthfrequency,hpe,hpenv,hpf,hpq,hpr,hprate,hprelease,hps,hpshape,hpskew,hpsustain,hpsync,hresonance,imag,ir,irbegin,iresponse,irspeed,isControlName,kcutoff,krush,label,lbrick,legato,leslie,lfo,lock,loop,loopBegin,loopEnd,loopb,loope,lp,lpa,lpattack,lpd,lpdc,lpdecay,lpdepth,lpdepthfrequency,lpe,lpenv,lpf,lpq,lpr,lprate,lprelease,lps,lpshape,lpskew,lpsustain,lpsync,lrate,lsize,midibend,midichan,midicmd,midimap,midiport,miditouch,minutes,mode:mode$1,mtranspose,n,noise,note:note$2,nrpnn,nrpv,nudge,oct,octave:octave$1,octaveR,octaves,octer,octersub,octersubsub,offset,orbit,oschost,oscport,overgain,overshape,pan,panchor,panorient,panspan,pansplay,panwidth,patt,pattack,pcurve,pdec,pdecay,penv,ph,phasdp,phaser,phasercenter,phaserdepth,phaserrate,phasersweep,phc,phd,phs,pitchJump,pitchJumpTime,polyTouch,postgain,prel,prelease,progNum,psus,psustain,pw,pwrate,pwsweep,rate,rdim,real,registerControl,rel,release,repeatTime,resonance,rfade,ring,ringdf,ringf,rlp,room,roomdim,roomfade,roomlp,roomsize,rsize,s,scram,scrub,seconds,semitone,shape,size,slide,smear:smear$1,songPtr,sound,source,speed,spread,squiz,src,stepsPerOctave,stretch,sus,sustain,sustainpedal,sysex,sysexdata,sysexid,sz,tremolo,tremolodepth,tremolophase,tremoloshape,tremoloskew,tremolosync,triode,tsdelay,uid,unison,unit,v,val,velocity,vib,vibmod,vibrato,vmod,voice,vowel,warp,warpatt,warpattack,warpdc,warpdec,warpdecay,warpdepth,warpenv,warpmode,warprate,warprel,warprelease,warpshape,warpskew,warpsus,warpsustain,warpsync,waveloss,wavetablePhaseRand,wavetablePosition,wavetableWarp,wavetableWarpMode,wt,wtatt,wtattack,wtdc,wtdec,wtdecay,wtdepth,wtenv,wtphaserand,wtrate,wtrel,wtrelease,wtshape,wtskew,wtsus,wtsustain,wtsync,xsdelay,zcrush,zdelay,zmod,znoise,zrand,zzfx},Symbol.toStringTag,{value:"Module"})),left=function(e,t){const[o,a]=e,[u,l]=t,[p,f]=splitAt(a,u);return[[a,o-a],[zipWith((d,g)=>d.concat(g),p,l),f]]},right=function(e,t){const[o,a]=e,[u,l]=t,[p,f]=splitAt(o,l);return[[o,a-o],[zipWith((g,b)=>g.concat(b),u,p),f]]},_bjorklund=function(e,t){const[o,a]=e;return Math.min(o,a)<=1?[e,t]:_bjorklund(...o>a?left(e,t):right(e,t))},bjorklund=function(e,t){const o=e<0,a=Math.abs(e),u=t-a,l=Array(a).fill([1]),p=Array(u).fill([0]),f=_bjorklund([a,u],[l,p]),d=flatten(f[1][0]).concat(flatten(f[1][1]));return o?d.map(g=>1-g):d},_euclidRot=function(e,t,o){const a=bjorklund(e,t);return o?rotate$2(a,-o):a},euclid=register("euclid",function(e,t,o){return o.struct(_euclidRot(e,t,0))}),bjork=register("bjork",function(e,t){Array.isArray(e)||(e=[e]);const[o,a=o,u=0]=e;return t.struct(_euclidRot(o,a,u))}),{euclidrot,euclidRot}=register(["euclidrot","euclidRot"],function(e,t,o,a){return a.struct(_euclidRot(e,t,o))}),_euclidLegato=function(e,t,o,a){if(e<1)return silence;const l=_euclidRot(e,t,0).join("").split("1").slice(1).map(p=>[p.length+1,!0]);return a.struct(timeCat(...l)).late(Fraction(o).div(t))},euclidLegato=register(["euclidLegato"],function(e,t,o){return _euclidLegato(e,t,0,o)}),euclidLegatoRot=register(["euclidLegatoRot"],function(e,t,o,a){return _euclidLegato(e,t,o,a)}),{euclidish,eish}=register(["euclidish","eish"],function(e,t,o,a){const u=_morph(bjorklund(e,t),new Array(e).fill(1),o);return a.struct(u).setSteps(t)});function createClock(e,t,o=.05,a=.1,u=.1,l=globalThis.setInterval,p=globalThis.clearInterval,f=!0){let d=0,g=0,b=10**4,S=.01;const E=j=>o=j(o);u=u||a/2;const F=()=>{const j=e(),O=j+a+u;for(g===0&&(g=j+S);g<O;)g=f?Math.round(g*b)/b:g,t(g,o,d,j),g+=o,d++};let $;const k=()=>{B(),F(),$=l(F,a*1e3)},B=()=>{$!==void 0&&p($),$=void 0};return{setDuration:E,start:k,stop:()=>{d=0,g=0,B()},pause:()=>B(),duration:o,interval:a,getPhase:()=>g,minLatency:S}}function steady(e){return new Pattern$1(t=>[new Hap(void 0,t.span,e)])}const signal=e=>{const t=o=>[new Hap(void 0,o.span,e(o.span.begin))];return new Pattern$1(t)},saw=signal(e=>e%1),saw2=saw.toBipolar(),isaw=signal(e=>1-e%1),isaw2=isaw.toBipolar(),sine2=signal(e=>Math.sin(Math.PI*2*e)),sine=sine2.fromBipolar(),cosine=sine._early(Fraction(1).div(4)),cosine2=sine2._early(Fraction(1).div(4)),square=signal(e=>Math.floor(e*2%2)),square2=square.toBipolar(),tri=fastcat(saw,isaw),tri2=fastcat(saw2,isaw2),itri=fastcat(isaw,saw),itri2=fastcat(isaw2,saw2),time$1=signal(id);let _mouseY=0,_mouseX=0;typeof window<"u"&&document.addEventListener("mousemove",e=>{_mouseY=e.clientY/document.body.clientHeight,_mouseX=e.clientX/document.body.clientWidth});const mousey=signal(()=>_mouseY),mouseY=signal(()=>_mouseY),mousex=signal(()=>_mouseX),mouseX=signal(()=>_mouseX),xorwise=e=>{const t=e<<13^e,o=t>>17^t;return o<<5^o},_frac=e=>e-Math.trunc(e),timeToIntSeed=e=>xorwise(Math.trunc(_frac(e/300)*536870912)),intSeedToRand=e=>e%536870912/536870912,timeToRand=e=>Math.abs(intSeedToRand(timeToIntSeed(e))),timeToRandsPrime=(e,t)=>{const o=[];for(let a=0;a<t;++a)o.push(intSeedToRand(e)),e=xorwise(e);return o},timeToRands=(e,t)=>timeToRandsPrime(timeToIntSeed(e),t),run=e=>saw.range(0,e).round().segment(e),binary=e=>{const t=reify(e).log2(0).floor().add(1);return binaryN(e,t)},binaryN=(e,t=16)=>{t=reify(t);const o=run(t).mul(-1).add(t.sub(1));return reify(e).segment(t).brshift(o).band(pure(1))},binaryL=e=>{const t=reify(e).log2(0).floor().add(1);return binaryNL(e,t)},binaryNL=(e,t=16)=>reify(e).withValue(o=>a=>{const u=[];for(let l=a-1;l>=0;l--)u.push(o>>l&1);return u}).appLeft(reify(t)),randL=e=>signal(t=>o=>timeToRands(t,o).map(Math.abs)).appLeft(reify(e)),randrun=e=>signal(t=>{const a=timeToRands(t.floor().add(.5),e).map((l,p)=>[l,p]).sort((l,p)=>(l[0]>p[0])-(l[0]<p[0])).map(l=>l[1]),u=t.cyclePos().mul(e).floor()%e;return a[u]})._segment(e),_rearrangeWith=(e,t,o)=>{const a=[...Array(t).keys()].map(u=>o.zoom(Fraction(u).div(t),Fraction(u+1).div(t)));return e.fmap(u=>a[u].repeatCycles(t)._fast(t)).innerJoin()},shuffle$2=register("shuffle",(e,t)=>_rearrangeWith(randrun(e),e,t)),scramble=register("scramble",(e,t)=>_rearrangeWith(_irand(e)._segment(e),e,t)),rand=signal(timeToRand),rand2=rand.toBipolar(),_brandBy=e=>rand.fmap(t=>t<e),brandBy=e=>reify(e).fmap(_brandBy).innerJoin(),brand=_brandBy(.5),_irand=e=>rand.fmap(t=>Math.trunc(t*e)),irand=e=>reify(e).fmap(_irand).innerJoin(),__chooseWith=(e,t)=>(t=t.map(reify),t.length==0?silence:e.range(0,t.length).fmap(o=>{const a=Math.min(Math.max(Math.floor(o),0),t.length-1);return t[a]})),chooseWith=(e,t)=>__chooseWith(e,t).outerJoin(),chooseInWith=(e,t)=>__chooseWith(e,t).innerJoin(),choose=(...e)=>chooseWith(rand,e),chooseIn=(...e)=>chooseInWith(rand,e),chooseOut=choose;Pattern$1.prototype.choose=function(...e){return chooseWith(this,e)},Pattern$1.prototype.choose2=function(...e){return chooseWith(this.fromBipolar(),e)};const chooseCycles=(...e)=>chooseInWith(rand.segment(1),e),randcat=chooseCycles,_wchooseWith=function(e,...t){const o=t.map(f=>reify(f[0])),a=[];let u=pure(0);for(const f of t)u=u.add(f[1]),a.push(u);const l=sequenceP(a),p=function(f){const d=u.mul(f);return l.fmap(g=>b=>o[g.findIndex(S=>S>b,g)]).appLeft(d)};return e.bind(p)},wchooseWith=(...e)=>_wchooseWith(...e).outerJoin(),wchoose=(...e)=>wchooseWith(rand,...e),wchooseCycles=(...e)=>_wchooseWith(rand.segment(1),...e).innerJoin(),wrandcat=wchooseCycles;function _perlin(e){let t=Math.floor(e),o=t+1;const a=p=>6*p**5-15*p**4+10*p**3;return(p=>f=>d=>f+a(p)*(d-f))(e-t)(timeToRand(t))(timeToRand(o))}const perlinWith=e=>e.fmap(_perlin);function _berlin(e){const t=Math.floor(e),o=t+1,a=timeToRand(t),u=timeToRand(o)+a,l=(e-t)/(o-t);return((f,d,g)=>f+(d-f)*g)(a,u,l)/2}const berlinWith=e=>e.fmap(_berlin),perlin=perlinWith(time$1.fmap(e=>Number(e))),berlin=berlinWith(time$1.fmap(e=>Number(e))),degradeByWith=register("degradeByWith",(e,t,o)=>o.fmap(a=>u=>a).appLeft(e.filterValues(a=>a>t)),!0,!0),degradeBy=register("degradeBy",function(e,t){return t._degradeByWith(rand,e)},!0,!0),degrade=register("degrade",e=>e._degradeBy(.5),!0,!0),undegradeBy=register("undegradeBy",function(e,t){return t._degradeByWith(rand.fmap(o=>1-o),e)},!0,!0),undegrade=register("undegrade",e=>e._undegradeBy(.5),!0,!0),sometimesBy=register("sometimesBy",function(e,t,o){return reify(e).fmap(a=>stack(o._degradeBy(a),t(o._undegradeBy(1-a)))).innerJoin()}),sometimes=register("sometimes",function(e,t){return t._sometimesBy(.5,e)}),someCyclesBy=register("someCyclesBy",function(e,t,o){return reify(e).fmap(a=>stack(o._degradeByWith(rand._segment(1),a),t(o._degradeByWith(rand.fmap(u=>1-u)._segment(1),1-a)))).innerJoin()}),someCycles=register("someCycles",function(e,t){return t._someCyclesBy(.5,e)}),often=register("often",function(e,t){return t.sometimesBy(.75,e)}),rarely=register("rarely",function(e,t){return t.sometimesBy(.25,e)}),almostNever=register("almostNever",function(e,t){return t.sometimesBy(.1,e)}),almostAlways=register("almostAlways",function(e,t){return t.sometimesBy(.9,e)}),never=register("never",function(e,t){return t}),always=register("always",function(e,t){return e(t)});function _keyDown(e){Array.isArray(e)===!1&&(e=[e]);const t=getCurrentKeyboardState();return e.every(o=>{const a=keyAlias.get(o)??o;return t[a]})}const whenKey=register("whenKey",function(e,t,o){return o.when(_keyDown(e),t)}),keyDown=register("keyDown",function(e){return e.fmap(_keyDown)}),_pick=function(e,t,o=!0){const a=Array.isArray(e),u=Object.keys(e).length;return e=objectMap(e,reify),u===0?silence:t.fmap(l=>{let p=l;return a&&(p=o?Math.round(p)%u:clamp$1(Math.round(p),0,e.length-1)),e[p]})},pick=function(e,t){return Array.isArray(t)&&([t,e]=[e,t]),__pick(e,t)},__pick=register("pick",function(e,t){return _pick(e,t,!1).innerJoin()}),pickmod=register("pickmod",function(e,t){return _pick(e,t,!0).innerJoin()}),pickF=register("pickF",function(e,t,o){return o.apply(pick(e,t))}),pickmodF=register("pickmodF",function(e,t,o){return o.apply(pickmod(e,t))}),pickOut=register("pickOut",function(e,t){return _pick(e,t,!1).outerJoin()}),pickmodOut=register("pickmodOut",function(e,t){return _pick(e,t,!0).outerJoin()}),pickRestart=register("pickRestart",function(e,t){return _pick(e,t,!1).restartJoin()}),pickmodRestart=register("pickmodRestart",function(e,t){return _pick(e,t,!0).restartJoin()}),pickReset=register("pickReset",function(e,t){return _pick(e,t,!1).resetJoin()}),pickmodReset=register("pickmodReset",function(e,t){return _pick(e,t,!0).resetJoin()}),{inhabit,pickSqueeze}=register(["inhabit","pickSqueeze"],function(e,t){return _pick(e,t,!1).squeezeJoin()}),{inhabitmod,pickmodSqueeze}=register(["inhabitmod","pickmodSqueeze"],function(e,t){return _pick(e,t,!0).squeezeJoin()}),squeeze=(e,t)=>(t=t.map(reify),t.length==0?silence:e.fmap(o=>{const a=_mod$2(Math.round(o),t.length);return t[a]}).squeezeJoin());let synth;try{synth=window?.speechSynthesis}catch(e){console.warn("cannot use window: not in browser?")}let allVoices=synth?.getVoices();function triggerSpeech(e,t,o){synth.cancel();const a=new SpeechSynthesisUtterance(e);a.lang=t,allVoices=synth.getVoices();const u=allVoices.filter(l=>l.lang.includes(t));typeof o=="number"?a.voice=u[o%u.length]:typeof o=="string"&&(a.voice=u.find(l=>l.name===l)),speechSynthesis.speak(a)}const speak=register("speak",function(e,t,o){return o.onTrigger(a=>{triggerSpeech(a.value,e,t)})}),strudelScope={},evalScope$1=async(...e)=>{const t=await Promise.allSettled(e),o=t.filter(a=>a.status==="fulfilled").map(a=>a.value);return t.forEach((a,u)=>{a.status==="rejected"&&console.warn(`evalScope: module with index ${u} could not be loaded:`,a.reason)}),o.forEach(a=>{Object.entries(a).forEach(([u,l])=>{globalThis[u]=l,strudelScope[u]=l})}),o};function safeEval(e,t={}){const{wrapExpression:o=!0,wrapAsync:a=!0}=t;o&&(e=`{${e}}`),a&&(e=`(async ()=>${e})()`);const u=`"use strict";return (${e})`;return Function(u)()}const evaluate$1=async(e,t,o)=>{let a={};if(t){const p=t(e,o);e=p.output,a=p}return{mode:"javascript",pattern:await safeEval(e,{wrapExpression:!!t}),meta:a}},jsContent=`(function(){"use strict";function L(){return performance.now()*.001}let _=0,r=0,o=.5;const h=new Map,m=.1,M=new BroadcastChannel("strudeltick"),b=(s,e)=>{M.postMessage({type:s,payload:e})},C=E(L,(s,e,t,n)=>{const i=r*e,d=s-n,c=n+d,u=i*o,l=_+u,g=n-c-e,f=e*o,p=l+f,y=l+g*o;b("tick",{begin:l,end:p,cps:o,time:n,cycle:y}),r++},m);let k=!1;const I=s=>{h.set(s,{started:!0}),!k&&(C.start(),k=!0)},A=async s=>{h.set(s,{started:!1});const e=Array.from(h.values()).some(t=>t.started);!k||e||(C.stop(),w(0),k=!1)},w=s=>{r=0,_=s},D=s=>{const{type:e,payload:t}=s;switch(e){case"cpschange":{if(t.cps!==o){const n=r*m;_=_+n*o,o=t.cps,r=0}break}case"setcycle":{w(t.cycle);break}case"toggle":{t.started?I(s.id):A(s.id);break}}};self.onconnect=function(s){const e=s.ports[0];e.addEventListener("message",function(t){D(t.data)}),e.start()};function E(s,e,t=.05,n=.1,i=.1){let d=0,c=0,u=10**4,l=.01;const g=a=>t=a(t);i=i||n/2;const f=()=>{const a=s(),O=a+n+i;for(c===0&&(c=a+l);c<O;)c=Math.round(c*u)/u,c>=a&&e(c,t,d,a),c<a&&console.log("TOO LATE",c),c+=t,d++};let p;const y=()=>{T(),f(),p=setInterval(f,n*1e3)},T=()=>p!==void 0&&clearInterval(p);return{setDuration:g,start:y,stop:()=>{d=0,c=0,T()},pause:()=>T(),duration:t,interval:n,getPhase:()=>c,minLatency:l}}})();
`,blob=typeof self<"u"&&self.Blob&&new Blob(["(self.URL || self.webkitURL).revokeObjectURL(self.location.href);",jsContent],{type:"text/javascript;charset=utf-8"});function WorkerWrapper(e){let t;try{if(t=blob&&(self.URL||self.webkitURL).createObjectURL(blob),!t)throw"";const o=new Worker(t,{name:e?.name});return o.addEventListener("error",()=>{(self.URL||self.webkitURL).revokeObjectURL(t)}),o}catch{return new Worker("data:text/javascript;charset=utf-8,"+encodeURIComponent(jsContent),{name:e?.name})}}class NeoCyclist{constructor({onTrigger:t,onToggle:o,getTime:a}){this.started=!1,this.cps=.5,this.getTime=a,this.time_at_last_tick_message=0,this.collator=new ClockCollator({getTargetClockTime:a}),this.onToggle=o,this.latency=.1,this.cycle=0,this.id=Math.round(Date.now()*Math.random()),this.worker=new SharedWorker(WorkerWrapper),this.worker.port.start(),this.channel=new BroadcastChannel("strudeltick");const u=p=>{const{cps:f,begin:d,end:g,cycle:b,time:S}=p;this.cps=f,this.cycle=b;const E=this.collator.calculateOffset(S)+S;l(d,g,E),this.time_at_last_tick_message=E},l=(p,f,d)=>{if(this.started===!1)return;this.pattern.queryArc(p,f,{_cps:this.cps,cyclist:"neocyclist"}).forEach(b=>{if(b.hasOnset()){const E=cycleToSeconds$1(b.whole.begin-this.cycle,this.cps)+d+this.latency,F=cycleToSeconds$1(b.duration,this.cps);t?.(b,0,F,this.cps,E)}})};this.channel.onmessage=p=>{if(!this.started)return;const{payload:f,type:d}=p.data;switch(d){case"tick":u(f)}}}sendMessage(t,o){this.worker.port.postMessage({type:t,payload:o,id:this.id})}now(){const t=(this.getTime()-this.time_at_last_tick_message)*this.cps;return this.cycle+t}setCps(t=1){this.sendMessage("cpschange",{cps:t})}setCycle(t){this.sendMessage("setcycle",{cycle:t})}setStarted(t){this.sendMessage("toggle",{started:t}),this.started=t,this.onToggle?.(t)}start(){logger$2("[cyclist] start"),this.setStarted(!0)}stop(){logger$2("[cyclist] stop"),this.collator.reset(),this.setStarted(!1)}setPattern(t,o=!1){this.pattern=t,o&&!this.started&&this.start()}log(t,o,a){const u=a.filter(l=>l.hasOnset());console.log(`${t.toFixed(4)} - ${o.toFixed(4)} ${Array(u.length).fill("I").join("")}`)}}class Cyclist{constructor({interval:t,onTrigger:o,onToggle:a,onError:u,getTime:l,latency:p=.1,setInterval:f,clearInterval:d,beforeStart:g}){this.started=!1,this.beforeStart=g,this.cps=.5,this.num_ticks_since_cps_change=0,this.lastTick=0,this.lastBegin=0,this.lastEnd=0,this.getTime=l,this.num_cycles_at_cps_change=0,this.seconds_at_cps_change,this.onToggle=a,this.latency=p,this.clock=createClock(l,(b,S,E,F)=>{this.num_ticks_since_cps_change===0&&(this.num_cycles_at_cps_change=this.lastEnd,this.seconds_at_cps_change=b),this.num_ticks_since_cps_change++;const k=this.num_ticks_since_cps_change*S*this.cps;try{const B=this.lastEnd;this.lastBegin=B;const V=this.num_cycles_at_cps_change+k;if(this.lastEnd=V,this.lastTick=b,b<F){console.log("skip query: too late");return}this.pattern.queryArc(B,V,{_cps:this.cps,cyclist:"cyclist"}).forEach(ee=>{if(ee.hasOnset()){const j=(ee.whole.begin-this.num_cycles_at_cps_change)/this.cps+this.seconds_at_cps_change+p,O=ee.duration/this.cps,q=j-b;o?.(ee,q,O,this.cps,j),ee.value.cps!==void 0&&this.cps!=ee.value.cps&&(this.cps=ee.value.cps,this.num_ticks_since_cps_change=0)}})}catch(B){errorLogger$1(B),u?.(B)}},t,.1,.1,f,d)}now(){if(!this.started)return 0;const t=this.getTime()-this.lastTick-this.clock.duration;return this.lastBegin+t*this.cps}setStarted(t){this.started=t,this.onToggle?.(t)}async start(){if(await this.beforeStart?.(),this.num_ticks_since_cps_change=0,this.num_cycles_at_cps_change=0,!this.pattern)throw new Error("Scheduler: no pattern set! call .setPattern first.");logger$2("[cyclist] start"),this.clock.start(),this.setStarted(!0)}pause(){logger$2("[cyclist] pause"),this.clock.pause(),this.setStarted(!1)}stop(){logger$2("[cyclist] stop"),this.clock.stop(),this.lastEnd=0,this.setStarted(!1)}async setPattern(t,o=!1){this.pattern=t,o&&!this.started&&await this.start()}setCps(t=.5){this.cps!==t&&(this.cps=t,this.num_ticks_since_cps_change=0)}log(t,o,a){const u=a.filter(l=>l.hasOnset());console.log(`${t.toFixed(4)} - ${o.toFixed(4)} ${Array(u.length).fill("I").join("")}`)}}let time;function getTime(){if(!time)throw new Error("no time set! use setTime to define a time source");return time()}function setTime(e){time=e}function repl$1({defaultOutput:e,onEvalError:t,beforeEval:o,beforeStart:a,afterEval:u,getTime:l,transpiler:p,onToggle:f,editPattern:d,onUpdateState:g,sync:b=!1,setInterval:S,clearInterval:E,id:F,mondo:$=!1}){const k={schedulerError:void 0,evalError:void 0,code:"// LOADING",activeCode:"// LOADING",pattern:void 0,miniLocations:[],widgets:[],pending:!1,started:!1},B={id:F},V=ue=>{Object.assign(k,ue),k.isDirty=k.code!==k.activeCode,k.error=k.evalError||k.schedulerError,g?.(k)},U={onTrigger:getTrigger({defaultOutput:e,getTime:l}),getTime:l,onToggle:ue=>{V({started:ue}),f?.(ue)},setInterval:S,clearInterval:E,beforeStart:a},ee=b&&typeof SharedWorker<"u"?new NeoCyclist(U):new Cyclist(U);let j={},O=0,q;const te=function(){return j={},O=0,q=void 0,silence};function re(ue){return ue._Pattern?ue.__pure:ue}const de=async(ue,De=!0)=>(ue=d?.(ue)||ue,await ee.setPattern(ue,De),ue);setTime(()=>ee.now());const ie=()=>ee.stop(),me=()=>ee.start(),pe=()=>ee.pause(),le=()=>ee.toggle(),he=ue=>(ee.setCps(re(ue)),silence),Ae=ue=>(ee.setCps(re(ue)/60),silence);let ye=[];const Me=function(ue){return ye.push(ue),silence},ge=function(ue){return q=ue,silence},Le=()=>{Pattern$1.prototype.p=function(De){return typeof De=="string"&&(De.startsWith("_")||De.endsWith("_"))?silence:(De.includes("$")&&(De=`${De}${O}`,O++),j[De]=this,this)},Pattern$1.prototype.q=function(De){return silence};try{for(let De=1;De<10;++De)Object.defineProperty(Pattern$1.prototype,`d${De}`,{get(){return this.p(De)},configurable:!0}),Object.defineProperty(Pattern$1.prototype,`p${De}`,{get(){return this.p(De)},configurable:!0}),Pattern$1.prototype[`q${De}`]=silence}catch(De){console.warn("injectPatternMethods: error:",De)}const ue=register("cpm",function(De,Qe){return Qe._fast(De/60/ee.cps)});return evalScope$1({all:Me,each:ge,hush:te,cpm:ue,setCps:he,setcps:he,setCpm:Ae,setcpm:Ae})};return{scheduler:ee,evaluate:async(ue,De=!0,Qe=!0)=>{if(!ue)throw new Error("no code to evaluate");try{V({code:ue,pending:!0}),await Le(),setTime(()=>ee.now()),await o?.({code:ue}),ye=[],Qe&&te(),$&&(ue=`mondolang\`${ue}\``);let{pattern:Re,meta:$e}=await evaluate$1(ue,p,B);if(Object.keys(j).length){let Ze=[],we=!1;for(const[Ie,nt]of Object.entries(j)){const tt=Ie.length>1&&Ie.startsWith("S");if(tt&&we===!1&&(Ze=[],we=!0),!we||we&&tt){const Oe=nt.withState(mt=>mt.setControls({id:Ie}));Ze.push(Oe)}}q&&(Ze=Ze.map(Ie=>q(Ie))),Re=stack(...Ze)}else q&&(Re=q(Re));if(ye.length)for(const Ze of ye)Re=Ze(Re);return isPattern(Re)||(Re=silence),logger$2("[eval] code updated"),Re=await de(Re,De),V({miniLocations:$e?.miniLocations||[],widgets:$e?.widgets||[],activeCode:ue,pattern:Re,evalError:void 0,schedulerError:void 0,pending:!1}),u?.({code:ue,pattern:Re,meta:$e}),Re}catch(Re){logger$2(`[eval] error: ${Re.message}`,"error"),console.error(Re),V({evalError:Re,pending:!1}),t?.(Re)}},start:me,stop:ie,pause:pe,setCps:he,setPattern:de,setCode:ue=>V({code:ue}),toggle:le,state:k}}const getTrigger=({getTime:e,defaultOutput:t})=>async(o,a,u,l,p)=>{try{(!o.context.onTrigger||!o.context.dominantTrigger)&&await t(o,a,u,l,p),o.context.onTrigger&&await o.context.onTrigger(o,e(),l,p)}catch(f){errorLogger$1(f,"getTrigger")}},backgroundImage=function(e,t={}){const o=document.getElementById("code"),a="background-image:url("+e+");background-size:contain;";o.style=a;const{className:u}=o,l=(d,g)=>{({style:()=>o.style=a+";"+g,className:()=>o.className=g+" "+u})[d]()},p=Object.entries(t).filter(([d,g])=>typeof g=="function");Object.entries(t).filter(([d,g])=>typeof g=="string").forEach(([d,g])=>l(d,g)),p.length},cleanupUi=()=>{const e=document.getElementById("code");e&&(e.style="")};logger$2("🌀 @strudel/core loaded 🌀"),globalThis._strudelLoaded&&console.warn(`@strudel/core was loaded more than once...
This might happen when you have multiple versions of strudel installed. 
Please check with "npm ls @strudel/core".`),globalThis._strudelLoaded=!0;const strudelCore=Object.freeze(Object.defineProperty({__proto__:null,ClockCollator,Cyclist,Fraction,Hap,Pattern:Pattern$1,State,TimeSpan,__chooseWith,_brandBy,_fitslice,_irand,_keyDown,_match,_mod:_mod$2,_morph,_polymeterListSteps,_retime,_slices,accelerate,activeLabel,ad,add:add$7,adsr,almostAlways,almostNever,always,amp,analyze,anchor,and,apply,applyN,ar,arp,arpWith,arrange,as,att,attack,averageArray,backgroundImage,band,bandf,bandq,bank,base64ToUnicode,bbexpr,bbst,beat,begin,berlin,berlinWith,binary,binaryL,binaryN,binaryNL,bind,binshift,bite,bjork,bjorklund,blshift,bor,bp,bpa,bpattack,bpd,bpdc,bpdecay,bpdepth,bpdepthfrequency,bpe,bpenv,bpf,bpq,bpr,bprate,bprelease,bps,bpshape,bpskew,bpsustain,bpsync,brak,brand,brandBy,brshift,bxor,bypass,byteBeatExpression,byteBeatStartTime,calculateSteps,cat,ccn,ccv,ceil,ch,channel,channels,choose,chooseCycles,chooseIn,chooseInWith,chooseOut,chooseWith,chop,chord:chord$1,chorus,chunk,chunkBack,chunkBackInto,chunkInto,chunkback,chunkbackinto,chunkinto,clamp:clamp$1,cleanupUi,clip,coarse,code2hash,color,colour,comb,compose,compress,compressSpan,compressor,compressorAttack,compressorKnee,compressorRatio,compressorRelease,compressspan,constant,contract,control,controls,cosine,cosine2,cpm,cps,createClock,createParam,createParams,crush,ctf,ctlNum,ctranspose,curry,curve,cut,cutoff,cycleToSeconds:cycleToSeconds$1,dec,decay,degrade,degradeBy,degradeByWith,degree,delay,delayfb,delayfeedback,delayspeed,delaysync,delayt,delaytime,deltaSlide,det,detune,dfb,dict,dictionary:dictionary$5,dist:dist$2,distort,distorttype,distortvol,div,djf,drawLine,drive,drop,dry,ds,dt,duck,duckattack,duckdepth,duckonset,dur,duration,early,echo,echoWith,echowith,eish,end,enhance,eq,eqt,errorLogger:errorLogger$1,euclid,euclidLegato,euclidLegatoRot,euclidRot,euclidish,euclidrot,evalScope:evalScope$1,evaluate:evaluate$1,every,expand,expression,extend,fadeInTime,fadeOutTime,fadeTime,fanchor,fast,fastChunk,fastGap,fastcat,fastchunk,fastgap,fft,filter:filter$1,filterWhen,firstOf,fit,flatten,floor,fm:fm$1,fmattack,fmdecay,fmenv,fmh,fmi,fmrelease,fmsustain,fmvelocity,fmwave,focus,focusSpan,focusspan,fractionalArgs,frameRate,frames,freeze,freq:freq$1,freqToMidi:freqToMidi$2,fromBipolar,fshift,fshiftnote,fshiftphase,ftype,func,gain,gap,gat,gate,getAccidentalsOffset:getAccidentalsOffset$1,getControlName,getCurrentKeyboardState,getEventOffsetMs,getFreq,getFrequency,getPerformanceTimeSeconds,getPlayableNoteValue,getSoundIndex:getSoundIndex$1,getTime,getTrigger,grow,gt,gte,harmonic,hash2code,hbrick,hcutoff,hold,hours,hp,hpa,hpattack,hpd,hpdc,hpdecay,hpdepth,hpdepthfreq,hpdepthfrequency,hpe,hpenv,hpf,hpq,hpr,hprate,hprelease,hps,hpshape,hpskew,hpsustain,hpsync,hresonance,hsl,hsla,hurry,id,imag,inhabit,inhabitmod,innerBind,inside,inv,invert:invert$1,ir,irand,irbegin,iresponse,irspeed,isControlName,isNote,isNoteWithOctave,isPattern,isaw,isaw2,iter,iterBack,iterback,itri,itri2,jux,juxBy,juxby,kcutoff,keep,keepif,keyAlias,keyDown,krush,label,lastOf,late,lbrick,legato,leslie,lfo,linger,listRange,lock,logKey,logger:logger$2,loop,loopAt,loopAtCps,loopBegin,loopEnd,loopat,loopatcps,loopb,loope,lp,lpa,lpattack,lpd,lpdc,lpdecay,lpdepth,lpdepthfrequency,lpe,lpenv,lpf,lpq,lpr,lprate,lprelease,lps,lpshape,lpskew,lpsustain,lpsync,lrate,lsize,lt,lte,mapArgs,mask,midi2note:midi2note$1,midiToFreq:midiToFreq$2,midibend,midichan,midicmd,midimap,midiport,miditouch,minutes,mod:mod$3,mode:mode$1,morph,mouseX,mouseY,mousex,mousey,mtranspose,mul,n,nanFallback:nanFallback$1,ne,net,never,noise,note:note$2,noteToMidi:noteToMidi$1,nothing,nrpnn,nrpv,nudge,numeralArgs,objectMap,oct,octave:octave$1,octaveR,octaves,octer,octersub,octersubsub,off,offset,often,or,orbit,oschost,oscport,outerBind,outside,overgain,overshape,pace,pairs,palindrome,pan,panchor,panorient,panspan,pansplay,panwidth,parray,parseFractional,parseNumeral,partials,patt,pattack,pcurve,pdec,pdecay,penv,perlin,perlinWith,ph,phasdp,phaser,phasercenter,phaserdepth,phaserrate,phasersweep,phases,phc,phd,phs,pick,pickF,pickOut,pickReset,pickRestart,pickSqueeze,pickmod,pickmodF,pickmodOut,pickmodReset,pickmodRestart,pickmodSqueeze,pipe,pitchJump,pitchJumpTime,ply,plyForEach,plyWith,pm,polyBind,polyTouch,polymeter,polyrhythm,postgain,pow,pr,prel,prelease,press,pressBy,progNum,psus,psustain,pure,pw,pwrate,pwsweep,rand,rand2,randL,randcat,randrun,range:range$2,range2,rangex,rarely,rate,ratio,rdim,real,ref:ref$1,register,registerControl,reify,rel,release,removeUndefineds,repeatCycles,repeatTime,repl:repl$1,replicate,resonance,rev,revv,rfade,rib,ribbon,ring,ringdf,ringf,rlp,room,roomdim,roomfade,roomlp,roomsize,rotate:rotate$2,round,rsize,run,s,s_add,s_alt,s_cat,s_contract,s_expand,s_extend,s_polymeter,s_sub,s_taper,s_taperlist,s_tour,s_zip,saw,saw2,scram,scramble,scrub,seconds,seg,segment,semitone,seq,seqPLoop,sequence,sequenceP,set,setStringParser,setTime,shape,shrink,shrinklist,shuffle:shuffle$2,signal,silence,sine,sine2,size,slice,slide,slow,slowChunk,slowcat,slowcatPrime,slowchunk,smear:smear$1,sol2note,someCycles,someCyclesBy,sometimes,sometimesBy,songPtr,sound,source,sparsity,speak,speed,splice,splitAt,spread,square,square2,squeeze,squeezeBind,squiz,src,stack,stackBy,stackCentre,stackLeft,stackRight,steady,stepBind,stepalt,stepcat,steps:steps$2,stepsPerOctave,stretch,striate,stringifyValues,struct,strudelScope,stut,stutWith,stutwith,sub,superimpose,sus,sustain,sustainpedal,swing,swingBy,sysex,sysexdata,sysexid,sz,take,time:time$1,timeCat,timecat,toBipolar,tokenizeNote:tokenizeNote$3,tour,tremolo,tremolodepth,tremolophase,tremoloshape,tremoloskew,tremolosync,tri,tri2,triode,tsdelay,uid,undegrade,undegradeBy,unicodeToBase64,uniq,uniqsort,uniqsortr,unison,unit,v,val,valueToMidi:valueToMidi$1,velocity,vib,vibmod,vibrato,vmod,voice,vowel,warp,warpatt,warpattack,warpdc,warpdec,warpdecay,warpdepth,warpenv,warpmode,warprate,warprel,warprelease,warpshape,warpskew,warpsus,warpsustain,warpsync,waveloss,wavetablePhaseRand,wavetablePosition,wavetableWarp,wavetableWarpMode,wchoose,wchooseCycles,when,whenKey,withValue,within,wrandcat,wt,wtatt,wtattack,wtdc,wtdec,wtdecay,wtdepth,wtenv,wtphaserand,wtrate,wtrel,wtrelease,wtshape,wtskew,wtsus,wtsustain,wtsync,xfade,xsdelay,zcrush,zdelay,zip,zipWith,zmod,znoise,zoom,zoomArc,zoomarc,zrand,zzfx},Symbol.toStringTag,{value:"Module"})),randOffset=3e-4,applyOptions=(e,t)=>(o,a)=>{const p=e.source_[a].options_?.ops,f=o.__steps_source;if(p)for(const d of p)switch(d.type_){case"stretch":{const g=["fast","slow"],{type:b,amount:S}=d.arguments_;if(!g.includes(b))throw new Error(`mini: stretch: type must be one of ${g.join("|")} but got ${b}`);o=reify(o)[b](t(S));break}case"replicate":{const{amount:g}=d.arguments_;o=reify(o),o=o._repeatCycles(g)._fast(g);break}case"bjorklund":{d.arguments_.rotation?o=o.euclidRot(t(d.arguments_.pulse),t(d.arguments_.step),t(d.arguments_.rotation)):o=o.euclid(t(d.arguments_.pulse),t(d.arguments_.step));break}case"degradeBy":{o=reify(o)._degradeByWith(rand.early(randOffset*d.arguments_.seed),d.arguments_.amount??.5);break}case"tail":{const g=t(d.arguments_.element);o=o.fmap(b=>S=>Array.isArray(b)?[...b,S]:[b,S]).appLeft(g);break}case"range":{const g=t(d.arguments_.element);o=reify(o);const b=(E,F,$=1)=>Array.from({length:Math.abs(F-E)/$+1},(k,B)=>E<F?E+B*$:E-B*$);o=((E,F)=>E.squeezeBind($=>F.bind(k=>fastcat(...b($,k)))))(o,g);break}default:console.warn(`operator "${d.type_}" not implemented`)}return o.__steps_source=o.__steps_source||f,o};function patternifyAST(e,t,o,a=0){o?.(e);const u=l=>patternifyAST(l,t,o,a);switch(e.type_){case"pattern":{const l=e.source_.map(g=>u(g)).map(applyOptions(e,u)),p=e.arguments_.alignment,f=l.filter(g=>g.__steps_source);let d;switch(p){case"stack":{d=stack(...l),f.length&&(d._steps=lcm(...f.map(g=>Fraction(g._steps))));break}case"polymeter_slowcat":{d=stack(...l.map(g=>g._slow(g.__weight))),f.length&&(d._steps=lcm(...f.map(g=>Fraction(g._steps))));break}case"polymeter":{const g=e.arguments_.stepsPerCycle?u(e.arguments_.stepsPerCycle).fmap(S=>Fraction(S)):pure(Fraction(l.length>0?l[0].__weight:1)),b=l.map(S=>S.fast(g.fmap(E=>E.div(S.__weight))));d=stack(...b);break}case"rand":{d=chooseInWith(rand.early(randOffset*e.arguments_.seed).segment(1),l),f.length&&(d._steps=lcm(...f.map(g=>Fraction(g._steps))));break}case"feet":{d=fastcat(...l);break}default:{if(e.source_.some(b=>!!b.options_?.weight)){const b=e.source_.reduce((S,E)=>S.add(E.options_?.weight||Fraction(1)),Fraction(0));d=timeCat(...e.source_.map((S,E)=>[S.options_?.weight||Fraction(1),l[E]])),d.__weight=b,d._steps=b,f.length&&(d._steps=d._steps.mul(lcm(...f.map(S=>Fraction(S._steps)))))}else d=sequence(...l),d._steps=l.length;e.arguments_._steps&&(d.__steps_source=!0)}}return f.length&&(d.__steps_source=!0),d}case"element":return u(e.source_);case"atom":{if(e.source_==="~"||e.source_==="-")return silence;if(!e.location_)return console.warn("no location for",e),e.source_;const l=isNaN(Number(e.source_))?e.source_:Number(e.source_);if(a===-1)return pure(l);const[p,f]=getLeafLocation(t,e,a);return pure(l).withLoc(p,f)}case"stretch":return u(e.source_).slow(u(e.arguments_.amount));default:return console.warn(`node type "${e.type_}" not implemented -> returning silence`),silence}}const getLeafLocation=(e,t,o=0)=>{const{start:a,end:u}=t.location_,l=e?.split("").slice(a.offset,u.offset).join(""),[p=0,f=0]=l?l.split(t.source_).map(d=>d.split("").filter(g=>g===" ").length):[];return[a.offset+p+o,u.offset-f+o]},mini2ast=(e,t=0,o=e)=>{try{return peg$parse(e)}catch(a){const u=[a.location.start.offset+t,a.location.end.offset+t],l=o.slice(0,u[0]).split(`
`).length;throw new Error(`[mini] parse error at line ${l}: ${a.message}`)}},getLeaves=(e,t,o)=>{const a=mini2ast(e,t,o);let u=[];return patternifyAST(a,e,l=>{l.type_==="atom"&&u.push(l)},-1),u},getLeafLocations=(e,t=0,o)=>getLeaves(e,t,o).map(a=>getLeafLocation(e,a,t)),mini=(...e)=>{const t=e.map(o=>{const a=`"${o}"`,u=mini2ast(a);return patternifyAST(u,a)});return sequence(...t)},m$1=(e,t)=>{const o=`"${e}"`,a=mini2ast(o);return patternifyAST(a,o,null,t)},h$1=e=>{const t=mini2ast(e);return patternifyAST(t,e)};function minify(e){return typeof e=="string"?mini(e):reify(e)}function miniAllStrings(){setStringParser(mini)}const strudelMini=Object.freeze(Object.defineProperty({__proto__:null,StartRules:peg$allowedStartRules,SyntaxError:peg$SyntaxError,getLeafLocation,getLeafLocations,getLeaves,h:h$1,m:m$1,mini,mini2ast,miniAllStrings,minify,parse:peg$parse,patternifyAST},Symbol.toStringTag,{value:"Module"}));if(typeof DelayNode<"u"){class e extends DelayNode{constructor(o,a,u,l){super(o),a=Math.abs(a),this.delayTime.value=u;const p=o.createGain();p.gain.value=Math.min(Math.abs(l),.995),this.feedback=p.gain;const f=o.createGain();return f.gain.value=a,this.delayGain=f,this.connect(p),this.connect(f),p.connect(this),this.connect=d=>f.connect(d),this}start(o){this.delayGain.gain.setValueAtTime(this.delayGain.gain.value,o+this.delayTime.value)}}AudioContext.prototype.createFeedbackDelay=function(t,o,a){return new e(this,t,o,a)}}var reverbGen={};reverbGen.generateReverb=function(e,t){for(var o=e.audioContext||new AudioContext,a=o.sampleRate,u=e.numChannels||2,l=e.decayTime*1.5,p=Math.round(e.decayTime*a),f=Math.round(l*a),d=Math.round((e.fadeInTime||0)*a),g=Math.pow(1/1e3,1/p),b=o.createBuffer(u,f,a),S=0;S<u;S++){for(var E=b.getChannelData(S),F=0;F<f;F++)E[F]=randomSample()*Math.pow(g,F);for(var F=0;F<d;F++)E[F]*=F/d}applyGradualLowpass(b,e.lpFreqStart||0,e.lpFreqEnd||0,e.decayTime,t)},reverbGen.generateGraph=function(e,t,o,a,u){var l=document.createElement("canvas");l.width=t,l.height=o;var p=l.getContext("2d");p.fillStyle="#000",p.fillRect(0,0,l.width,l.height),p.fillStyle="#fff";for(var f=t/e.length,d=o/(u-a),g=0;g<e.length;g++)p.fillRect(g*f,o-(e[g]-a)*d,1,1);return l};var applyGradualLowpass=function(e,t,o,a,u){if(t==0){u(e);return}var l=getAllChannelData(e),p=new OfflineAudioContext(e.numberOfChannels,l[0].length,e.sampleRate),f=p.createBufferSource();f.buffer=e;var d=p.createBiquadFilter();t=Math.min(t,e.sampleRate/2),o=Math.min(o,e.sampleRate/2),d.type="lowpass",d.Q.value=1e-4,d.frequency.setValueAtTime(t,0),d.frequency.linearRampToValueAtTime(o,a),f.connect(d),d.connect(p.destination),f.start(),p.oncomplete=function(g){u(g.renderedBuffer),d.disconnect(),f.disconnect()},p.startRendering(),window.filterNode=d},getAllChannelData=function(e){for(var t=[],o=0;o<e.numberOfChannels;o++)t[o]=e.getChannelData(o);return t},randomSample=function(){return Math.random()*2-1};let log=e=>console.log(e);function errorLogger(e,t="superdough"){process.env.NODE_ENV==="development"&&console.error(e),logger$1(`[${t}] error: ${e.message}`)}const logger$1=(...e)=>log(...e),setLogger=e=>{log=e},tokenizeNote$2=e=>{if(typeof e!="string")return[];const[t,o="",a]=e.match(/^([a-gA-G])([#bsf]*)(-?[0-9]*)$/)?.slice(1)||[];return t?[t,o,a?Number(a):void 0]:[]},chromas$1={c:0,d:2,e:4,f:5,g:7,a:9,b:11},accs$1={"#":1,b:-1,s:1,f:-1},getAccidentalsOffset=e=>e?.split("").reduce((t,o)=>t+accs$1[o],0)||0,noteToMidi=(e,t=3)=>{const[o,a,u=t]=tokenizeNote$2(e);if(!o)throw new Error('not a note: "'+e+'"');const l=chromas$1[o.toLowerCase()],p=getAccidentalsOffset(a);return(Number(u)+1)*12+l+p},midiToFreq$1=e=>Math.pow(2,(e-69)/12)*440,clamp=(e,t,o)=>Math.min(Math.max(e,t),o),freqToMidi$1=e=>12*Math.log(e/440)/Math.LN2+69,valueToMidi=(e,t)=>{if(typeof e!="object")throw new Error("valueToMidi: expected object value");let{freq:o,note:a}=e;return typeof o=="number"?freqToMidi$1(o):typeof a=="string"?noteToMidi(a):typeof a=="number"?a:t};function nanFallback(e,t=0,o){return isNaN(Number(e))?(!o&&logger$1(`"${e}" is not a number, falling back to ${t}`,"warning"),t):e}const _mod$1=(e,t)=>(e%t+t)%t,getSoundIndex=(e,t)=>_mod$1(Math.round(nanFallback(e,0)),t);function cycleToSeconds(e,t){return e/t}function getCommonSampleInfo(e,t){const{s:o,n:a=0}=e;let u=valueToMidi(e,36),l=u-36,p,f=0;if(Array.isArray(t))f=getSoundIndex(a,t.length),p=t[f];else{const g=S=>noteToMidi(S)-u,b=Object.keys(t).filter(S=>!S.startsWith("_")).reduce((S,E,F)=>!S||Math.abs(g(E))<Math.abs(g(S))?E:S,null);l=-g(b),f=getSoundIndex(a,t[b].length),p=t[b][f]}const d=`${o}:${f}`;return{transpose:l,url:p,index:f,midi:u,label:d}}const pickAndRename=(e,t)=>Object.fromEntries(Object.entries(t).map(([o,a])=>[o,e[a]])),getBaseURL=e=>{try{return new URL(".",new URL(e)).href.replace(/\/$/,"")}catch{return e.split("/").slice(0,-1).join("/")}};typeof AudioContext<"u"&&(AudioContext.prototype.adjustLength=function(e,t,o=1,a=0){const u=Math.floor(clamp(a,0,1)*t.length),l=t.sampleRate*e,p=this.createBuffer(t.numberOfChannels,t.length,t.sampleRate);for(let f=0;f<t.numberOfChannels;f++){let d=t.getChannelData(f),g=p.getChannelData(f);for(let b=0;b<l;b++){let S=(u+b*Math.abs(o))%d.length;o<1&&(S=S*-1),g[b]=d.at(S)||0}}return p},AudioContext.prototype.createReverb=function(e,t,o,a,u,l,p){const f=this.createConvolver();return f.generate=(d=2,g=.1,b=15e3,S=1e3,E,F,$)=>{f.duration=d,f.fade=g,f.lp=b,f.dim=S,f.ir=E,f.irspeed=F,f.irbegin=$,E?f.buffer=this.adjustLength(d,E,F,$):reverbGen.generateReverb({audioContext:this,numChannels:2,decayTime:d,fadeInTime:g,lpFreqStart:b,lpFreqEnd:S},k=>{f.buffer=k})},f.generate(e,t,o,a,u,l,p),f});var vowelFormant={a:{freqs:[660,1120,2750,3e3,3350],gains:[1,.5012,.0708,.0631,.0126],qs:[80,90,120,130,140]},e:{freqs:[440,1800,2700,3e3,3300],gains:[1,.1995,.1259,.1,.1],qs:[70,80,100,120,120]},i:{freqs:[270,1850,2900,3350,3590],gains:[1,.0631,.0631,.0158,.0158],qs:[40,90,100,120,120]},o:{freqs:[430,820,2700,3e3,3300],gains:[1,.3162,.0501,.0794,.01995],qs:[40,80,100,120,120]},u:{freqs:[370,630,2750,3e3,3400],gains:[1,.1,.0708,.0316,.01995],qs:[40,60,100,120,120]},ae:{freqs:[650,1515,2400,3e3,3350],gains:[1,.5,.1008,.0631,.0126],qs:[80,90,120,130,140]},aa:{freqs:[560,900,2570,3e3,3300],gains:[1,.5,.0708,.0631,.0126],qs:[80,90,120,130,140]},oe:{freqs:[500,1430,2300,3e3,3300],gains:[1,.2,.0708,.0316,.01995],qs:[40,60,100,120,120]},ue:{freqs:[250,1750,2150,3200,3300],gains:[1,.1,.0708,.0316,.01995],qs:[40,60,100,120,120]},y:{freqs:[400,1460,2400,3e3,3300],gains:[1,.2,.0708,.0316,.02995],qs:[40,60,100,120,120]},uh:{freqs:[600,1250,2100,3100,3500],gains:[1,.3,.0608,.0316,.01995],qs:[40,70,100,120,130]},un:{freqs:[500,1240,2280,3e3,3500],gains:[1,.1,.1708,.0216,.02995],qs:[40,60,100,120,120]},en:{freqs:[600,1480,2450,3200,3300],gains:[1,.15,.0708,.0316,.02995],qs:[40,60,100,120,120]},an:{freqs:[700,1050,2500,3e3,3300],gains:[1,.1,.0708,.0316,.02995],qs:[40,60,100,120,120]},on:{freqs:[500,1080,2350,3e3,3300],gains:[1,.1,.0708,.0316,.02995],qs:[40,60,100,120,120]},get æ(){return this.ae},get ø(){return this.oe},get ɑ(){return this.aa},get å(){return this.aa},get ö(){return this.oe},get ü(){return this.ue},get ı(){return this.y}};if(typeof GainNode<"u"){class e extends GainNode{constructor(o,a){if(super(o),!vowelFormant[a])throw new Error("vowel: unknown vowel "+a);const{gains:u,qs:l,freqs:p}=vowelFormant[a];this.makeupGain=o.createGain(),this.audioNodes=[];for(let f=0;f<5;f++){const d=o.createGain();d.gain.value=u[f];const g=o.createBiquadFilter();g.type="bandpass",g.Q.value=l[f],g.frequency.value=p[f],super.connect(g),g.connect(d),this.audioNodes.push(g),d.connect(this.makeupGain),this.audioNodes.push(d)}return this.makeupGain.gain.value=8,this}connect(o){this.makeupGain.connect(o)}disconnect(){this.makeupGain.disconnect(),this.audioNodes.forEach(o=>o.disconnect()),super.disconnect(),this.makeupGain=null,this.audioNodes=null}}AudioContext.prototype.createVowelFilter=function(t){return new e(this,t)}}const workletsUrl="data:text/javascript;base64,dmFyIF89KGZ1bmN0aW9uKGZ0KXsidXNlIHN0cmljdCI7Y2xhc3Mga3QgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7Y29uc3RydWN0b3IodCl7c3VwZXIodCksdGhpcy5zdGFydGVkPSExLHRoaXMubmJJbnB1dHM9dC5udW1iZXJPZklucHV0cyx0aGlzLm5iT3V0cHV0cz10Lm51bWJlck9mT3V0cHV0cyx0aGlzLmJsb2NrU2l6ZT10LnByb2Nlc3Nvck9wdGlvbnMuYmxvY2tTaXplLHRoaXMuaG9wU2l6ZT0xMjgsdGhpcy5uYk92ZXJsYXBzPXRoaXMuYmxvY2tTaXplL3RoaXMuaG9wU2l6ZSx0aGlzLmlucHV0QnVmZmVycz1uZXcgQXJyYXkodGhpcy5uYklucHV0cyksdGhpcy5pbnB1dEJ1ZmZlcnNIZWFkPW5ldyBBcnJheSh0aGlzLm5iSW5wdXRzKSx0aGlzLmlucHV0QnVmZmVyc1RvU2VuZD1uZXcgQXJyYXkodGhpcy5uYklucHV0cyk7Zm9yKGxldCBlPTA7ZTx0aGlzLm5iSW5wdXRzO2UrKyl0aGlzLmFsbG9jYXRlSW5wdXRDaGFubmVscyhlLDEpO3RoaXMub3V0cHV0QnVmZmVycz1uZXcgQXJyYXkodGhpcy5uYk91dHB1dHMpLHRoaXMub3V0cHV0QnVmZmVyc1RvUmV0cmlldmU9bmV3IEFycmF5KHRoaXMubmJPdXRwdXRzKTtmb3IobGV0IGU9MDtlPHRoaXMubmJPdXRwdXRzO2UrKyl0aGlzLmFsbG9jYXRlT3V0cHV0Q2hhbm5lbHMoZSwxKX1yZWFsbG9jYXRlQ2hhbm5lbHNJZk5lZWRlZCh0LGUpe2ZvcihsZXQgcz0wO3M8dGhpcy5uYklucHV0cztzKyspe2xldCByPXRbc10ubGVuZ3RoO3IhPXRoaXMuaW5wdXRCdWZmZXJzW3NdLmxlbmd0aCYmdGhpcy5hbGxvY2F0ZUlucHV0Q2hhbm5lbHMocyxyKX1mb3IobGV0IHM9MDtzPHRoaXMubmJPdXRwdXRzO3MrKyl7bGV0IHI9ZVtzXS5sZW5ndGg7ciE9dGhpcy5vdXRwdXRCdWZmZXJzW3NdLmxlbmd0aCYmdGhpcy5hbGxvY2F0ZU91dHB1dENoYW5uZWxzKHMscil9fWFsbG9jYXRlSW5wdXRDaGFubmVscyh0LGUpe3RoaXMuaW5wdXRCdWZmZXJzW3RdPW5ldyBBcnJheShlKTtmb3IobGV0IHM9MDtzPGU7cysrKXRoaXMuaW5wdXRCdWZmZXJzW3RdW3NdPW5ldyBGbG9hdDMyQXJyYXkodGhpcy5ibG9ja1NpemUrMTI4KSx0aGlzLmlucHV0QnVmZmVyc1t0XVtzXS5maWxsKDApO3RoaXMuaW5wdXRCdWZmZXJzSGVhZFt0XT1uZXcgQXJyYXkoZSksdGhpcy5pbnB1dEJ1ZmZlcnNUb1NlbmRbdF09bmV3IEFycmF5KGUpO2ZvcihsZXQgcz0wO3M8ZTtzKyspdGhpcy5pbnB1dEJ1ZmZlcnNIZWFkW3RdW3NdPXRoaXMuaW5wdXRCdWZmZXJzW3RdW3NdLnN1YmFycmF5KDAsdGhpcy5ibG9ja1NpemUpLHRoaXMuaW5wdXRCdWZmZXJzVG9TZW5kW3RdW3NdPW5ldyBGbG9hdDMyQXJyYXkodGhpcy5ibG9ja1NpemUpfWFsbG9jYXRlT3V0cHV0Q2hhbm5lbHModCxlKXt0aGlzLm91dHB1dEJ1ZmZlcnNbdF09bmV3IEFycmF5KGUpO2ZvcihsZXQgcz0wO3M8ZTtzKyspdGhpcy5vdXRwdXRCdWZmZXJzW3RdW3NdPW5ldyBGbG9hdDMyQXJyYXkodGhpcy5ibG9ja1NpemUpLHRoaXMub3V0cHV0QnVmZmVyc1t0XVtzXS5maWxsKDApO3RoaXMub3V0cHV0QnVmZmVyc1RvUmV0cmlldmVbdF09bmV3IEFycmF5KGUpO2ZvcihsZXQgcz0wO3M8ZTtzKyspdGhpcy5vdXRwdXRCdWZmZXJzVG9SZXRyaWV2ZVt0XVtzXT1uZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKSx0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlW3RdW3NdLmZpbGwoMCl9cmVhZElucHV0cyh0KXtpZih0WzBdLmxlbmd0aCYmdFswXVswXS5sZW5ndGg9PTApe2ZvcihsZXQgZT0wO2U8dGhpcy5uYklucHV0cztlKyspZm9yKGxldCBzPTA7czx0aGlzLmlucHV0QnVmZmVyc1tlXS5sZW5ndGg7cysrKXRoaXMuaW5wdXRCdWZmZXJzW2VdW3NdLmZpbGwoMCx0aGlzLmJsb2NrU2l6ZSk7cmV0dXJufWZvcihsZXQgZT0wO2U8dGhpcy5uYklucHV0cztlKyspZm9yKGxldCBzPTA7czx0aGlzLmlucHV0QnVmZmVyc1tlXS5sZW5ndGg7cysrKXtsZXQgcj10W2VdW3NdO3RoaXMuaW5wdXRCdWZmZXJzW2VdW3NdLnNldChyLHRoaXMuYmxvY2tTaXplKX19d3JpdGVPdXRwdXRzKHQpe2ZvcihsZXQgZT0wO2U8dGhpcy5uYklucHV0cztlKyspZm9yKGxldCBzPTA7czx0aGlzLmlucHV0QnVmZmVyc1tlXS5sZW5ndGg7cysrKXtsZXQgcj10aGlzLm91dHB1dEJ1ZmZlcnNbZV1bc10uc3ViYXJyYXkoMCwxMjgpO3RbZV1bc10uc2V0KHIpfX1zaGlmdElucHV0QnVmZmVycygpe2ZvcihsZXQgdD0wO3Q8dGhpcy5uYklucHV0czt0KyspZm9yKGxldCBlPTA7ZTx0aGlzLmlucHV0QnVmZmVyc1t0XS5sZW5ndGg7ZSsrKXRoaXMuaW5wdXRCdWZmZXJzW3RdW2VdLmNvcHlXaXRoaW4oMCwxMjgpfXNoaWZ0T3V0cHV0QnVmZmVycygpe2ZvcihsZXQgdD0wO3Q8dGhpcy5uYk91dHB1dHM7dCsrKWZvcihsZXQgZT0wO2U8dGhpcy5vdXRwdXRCdWZmZXJzW3RdLmxlbmd0aDtlKyspdGhpcy5vdXRwdXRCdWZmZXJzW3RdW2VdLmNvcHlXaXRoaW4oMCwxMjgpLHRoaXMub3V0cHV0QnVmZmVyc1t0XVtlXS5zdWJhcnJheSh0aGlzLmJsb2NrU2l6ZS0xMjgpLmZpbGwoMCl9cHJlcGFyZUlucHV0QnVmZmVyc1RvU2VuZCgpe2ZvcihsZXQgdD0wO3Q8dGhpcy5uYklucHV0czt0KyspZm9yKGxldCBlPTA7ZTx0aGlzLmlucHV0QnVmZmVyc1t0XS5sZW5ndGg7ZSsrKXRoaXMuaW5wdXRCdWZmZXJzVG9TZW5kW3RdW2VdLnNldCh0aGlzLmlucHV0QnVmZmVyc0hlYWRbdF1bZV0pfWhhbmRsZU91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlKCl7Zm9yKGxldCB0PTA7dDx0aGlzLm5iT3V0cHV0czt0KyspZm9yKGxldCBlPTA7ZTx0aGlzLm91dHB1dEJ1ZmZlcnNbdF0ubGVuZ3RoO2UrKylmb3IobGV0IHM9MDtzPHRoaXMuYmxvY2tTaXplO3MrKyl0aGlzLm91dHB1dEJ1ZmZlcnNbdF1bZV1bc10rPXRoaXMub3V0cHV0QnVmZmVyc1RvUmV0cmlldmVbdF1bZV1bc10vdGhpcy5uYk92ZXJsYXBzfXByb2Nlc3ModCxlLHMpe2NvbnN0IGk9dFswXVswXSE9PXZvaWQgMDtyZXR1cm4gdGhpcy5zdGFydGVkJiYhaT8hMToodGhpcy5zdGFydGVkPWksdGhpcy5yZWFsbG9jYXRlQ2hhbm5lbHNJZk5lZWRlZCh0LGUpLHRoaXMucmVhZElucHV0cyh0KSx0aGlzLnNoaWZ0SW5wdXRCdWZmZXJzKCksdGhpcy5wcmVwYXJlSW5wdXRCdWZmZXJzVG9TZW5kKCksdGhpcy5wcm9jZXNzT0xBKHRoaXMuaW5wdXRCdWZmZXJzVG9TZW5kLHRoaXMub3V0cHV0QnVmZmVyc1RvUmV0cmlldmUscyksdGhpcy5oYW5kbGVPdXRwdXRCdWZmZXJzVG9SZXRyaWV2ZSgpLHRoaXMud3JpdGVPdXRwdXRzKGUpLHRoaXMuc2hpZnRPdXRwdXRCdWZmZXJzKCksITApfXByb2Nlc3NPTEEodCxlLHMpe2NvbnNvbGUuYXNzZXJ0KCExLCJOb3Qgb3ZlcnJpZGVuIil9fWNsYXNzIEV0e2NvbnN0cnVjdG9yKHQpe2lmKHRoaXMuc2l6ZT10fDAsdGhpcy5zaXplPD0xfHwodGhpcy5zaXplJnRoaXMuc2l6ZS0xKSE9PTApdGhyb3cgbmV3IEVycm9yKCJGRlQgc2l6ZSBtdXN0IGJlIGEgcG93ZXIgb2YgdHdvIGFuZCBiaWdnZXIgdGhhbiAxIik7dGhpcy5fY3NpemU9dDw8MTtmb3IodmFyIGU9bmV3IEFycmF5KHRoaXMuc2l6ZSoyKSxzPTA7czxlLmxlbmd0aDtzKz0yKXtjb25zdCBjPU1hdGguUEkqcy90aGlzLnNpemU7ZVtzXT1NYXRoLmNvcyhjKSxlW3MrMV09LU1hdGguc2luKGMpfXRoaXMudGFibGU9ZTtmb3IodmFyIHI9MCxpPTE7dGhpcy5zaXplPmk7aTw8PTEpcisrO3RoaXMuX3dpZHRoPXIlMj09PTA/ci0xOnIsdGhpcy5fYml0cmV2PW5ldyBBcnJheSgxPDx0aGlzLl93aWR0aCk7Zm9yKHZhciBvPTA7bzx0aGlzLl9iaXRyZXYubGVuZ3RoO28rKyl7dGhpcy5fYml0cmV2W29dPTA7Zm9yKHZhciBhPTA7YTx0aGlzLl93aWR0aDthKz0yKXt2YXIgdT10aGlzLl93aWR0aC1hLTI7dGhpcy5fYml0cmV2W29dfD0obz4+PmEmMyk8PHV9fXRoaXMuX291dD1udWxsLHRoaXMuX2RhdGE9bnVsbCx0aGlzLl9pbnY9MH1mcm9tQ29tcGxleEFycmF5KHQsZSl7Zm9yKHZhciBzPWV8fG5ldyBBcnJheSh0Lmxlbmd0aD4+PjEpLHI9MDtyPHQubGVuZ3RoO3IrPTIpc1tyPj4+MV09dFtyXTtyZXR1cm4gc31jcmVhdGVDb21wbGV4QXJyYXkoKXtjb25zdCB0PW5ldyBBcnJheSh0aGlzLl9jc2l6ZSk7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspdFtlXT0wO3JldHVybiB0fXRvQ29tcGxleEFycmF5KHQsZSl7Zm9yKHZhciBzPWV8fHRoaXMuY3JlYXRlQ29tcGxleEFycmF5KCkscj0wO3I8cy5sZW5ndGg7cis9MilzW3JdPXRbcj4+PjFdLHNbcisxXT0wO3JldHVybiBzfWNvbXBsZXRlU3BlY3RydW0odCl7Zm9yKHZhciBlPXRoaXMuX2NzaXplLHM9ZT4+PjEscj0yO3I8cztyKz0yKXRbZS1yXT10W3JdLHRbZS1yKzFdPS10W3IrMV19dHJhbnNmb3JtKHQsZSl7aWYodD09PWUpdGhyb3cgbmV3IEVycm9yKCJJbnB1dCBhbmQgb3V0cHV0IGJ1ZmZlcnMgbXVzdCBiZSBkaWZmZXJlbnQiKTt0aGlzLl9vdXQ9dCx0aGlzLl9kYXRhPWUsdGhpcy5faW52PTAsdGhpcy5fdHJhbnNmb3JtNCgpLHRoaXMuX291dD1udWxsLHRoaXMuX2RhdGE9bnVsbH1yZWFsVHJhbnNmb3JtKHQsZSl7aWYodD09PWUpdGhyb3cgbmV3IEVycm9yKCJJbnB1dCBhbmQgb3V0cHV0IGJ1ZmZlcnMgbXVzdCBiZSBkaWZmZXJlbnQiKTt0aGlzLl9vdXQ9dCx0aGlzLl9kYXRhPWUsdGhpcy5faW52PTAsdGhpcy5fcmVhbFRyYW5zZm9ybTQoKSx0aGlzLl9vdXQ9bnVsbCx0aGlzLl9kYXRhPW51bGx9aW52ZXJzZVRyYW5zZm9ybSh0LGUpe2lmKHQ9PT1lKXRocm93IG5ldyBFcnJvcigiSW5wdXQgYW5kIG91dHB1dCBidWZmZXJzIG11c3QgYmUgZGlmZmVyZW50Iik7dGhpcy5fb3V0PXQsdGhpcy5fZGF0YT1lLHRoaXMuX2ludj0xLHRoaXMuX3RyYW5zZm9ybTQoKTtmb3IodmFyIHM9MDtzPHQubGVuZ3RoO3MrKyl0W3NdLz10aGlzLnNpemU7dGhpcy5fb3V0PW51bGwsdGhpcy5fZGF0YT1udWxsfV90cmFuc2Zvcm00KCl7dmFyIHQ9dGhpcy5fb3V0LGU9dGhpcy5fY3NpemUscz10aGlzLl93aWR0aCxyPTE8PHMsaT1lL3I8PDEsbyxhLHU9dGhpcy5fYml0cmV2O2lmKGk9PT00KWZvcihvPTAsYT0wO288ZTtvKz1pLGErKyl7Y29uc3QgbT11W2FdO3RoaXMuX3NpbmdsZVRyYW5zZm9ybTIobyxtLHIpfWVsc2UgZm9yKG89MCxhPTA7bzxlO28rPWksYSsrKXtjb25zdCBtPXVbYV07dGhpcy5fc2luZ2xlVHJhbnNmb3JtNChvLG0scil9dmFyIGM9dGhpcy5faW52Py0xOjEsaD10aGlzLnRhYmxlO2ZvcihyPj49MjtyPj0yO3I+Pj0yKXtpPWUvcjw8MTt2YXIgZj1pPj4+Mjtmb3Iobz0wO288ZTtvKz1pKWZvcih2YXIgZD1vK2YsbD1vLHA9MDtsPGQ7bCs9MixwKz1yKXtjb25zdCBtPWwsST1tK2YsZz1JK2Ysdj1nK2Ysdz10W21dLFA9dFttKzFdLFM9dFtJXSxWPXRbSSsxXSxNPXRbZ10seD10W2crMV0seT10W3ZdLEE9dFt2KzFdLFc9dyxOPVAsRT1oW3BdLE89YypoW3ArMV0sRj1TKkUtVipPLEQ9UypPK1YqRSxMPWhbMipwXSxDPWMqaFsyKnArMV0sZXQ9TSpMLXgqQyxzdD1NKkMreCpMLHJ0PWhbMypwXSxudD1jKmhbMypwKzFdLGl0PXkqcnQtQSpudCxvdD15Km50K0EqcnQsYXQ9VytldCwkPU4rc3QsRz1XLWV0LGN0PU4tc3QsdXQ9RitpdCxRPUQrb3QsSj1jKihGLWl0KSxodD1jKihELW90KSxsdD1hdCt1dCxidD0kK1EsSXQ9YXQtdXQsX3Q9JC1RLEJ0PUcraHQsd3Q9Y3QtSixUdD1HLWh0LFB0PWN0K0o7dFttXT1sdCx0W20rMV09YnQsdFtJXT1CdCx0W0krMV09d3QsdFtnXT1JdCx0W2crMV09X3QsdFt2XT1UdCx0W3YrMV09UHR9fX1fc2luZ2xlVHJhbnNmb3JtMih0LGUscyl7Y29uc3Qgcj10aGlzLl9vdXQsaT10aGlzLl9kYXRhLG89aVtlXSxhPWlbZSsxXSx1PWlbZStzXSxjPWlbZStzKzFdLGg9byt1LGY9YStjLGQ9by11LGw9YS1jO3JbdF09aCxyW3QrMV09ZixyW3QrMl09ZCxyW3QrM109bH1fc2luZ2xlVHJhbnNmb3JtNCh0LGUscyl7Y29uc3Qgcj10aGlzLl9vdXQsaT10aGlzLl9kYXRhLG89dGhpcy5faW52Py0xOjEsYT1zKjIsdT1zKjMsYz1pW2VdLGg9aVtlKzFdLGY9aVtlK3NdLGQ9aVtlK3MrMV0sbD1pW2UrYV0scD1pW2UrYSsxXSxtPWlbZSt1XSxJPWlbZSt1KzFdLGc9YytsLHY9aCtwLHc9Yy1sLFA9aC1wLFM9ZittLFY9ZCtJLE09byooZi1tKSx4PW8qKGQtSSkseT1nK1MsQT12K1YsVz13K3gsTj1QLU0sRT1nLVMsTz12LVYsRj13LXgsRD1QK007clt0XT15LHJbdCsxXT1BLHJbdCsyXT1XLHJbdCszXT1OLHJbdCs0XT1FLHJbdCs1XT1PLHJbdCs2XT1GLHJbdCs3XT1EfV9yZWFsVHJhbnNmb3JtNCgpe3ZhciB0PXRoaXMuX291dCxlPXRoaXMuX2NzaXplLHM9dGhpcy5fd2lkdGgscj0xPDxzLGk9ZS9yPDwxLG8sYSx1PXRoaXMuX2JpdHJldjtpZihpPT09NClmb3Iobz0wLGE9MDtvPGU7bys9aSxhKyspe2NvbnN0IE10PXVbYV07dGhpcy5fc2luZ2xlUmVhbFRyYW5zZm9ybTIobyxNdD4+PjEscj4+PjEpfWVsc2UgZm9yKG89MCxhPTA7bzxlO28rPWksYSsrKXtjb25zdCBNdD11W2FdO3RoaXMuX3NpbmdsZVJlYWxUcmFuc2Zvcm00KG8sTXQ+Pj4xLHI+Pj4xKX12YXIgYz10aGlzLl9pbnY/LTE6MSxoPXRoaXMudGFibGU7Zm9yKHI+Pj0yO3I+PTI7cj4+PTIpe2k9ZS9yPDwxO3ZhciBmPWk+Pj4xLGQ9Zj4+PjEsbD1kPj4+MTtmb3Iobz0wO288ZTtvKz1pKWZvcih2YXIgcD0wLG09MDtwPD1sO3ArPTIsbSs9cil7dmFyIEk9bytwLGc9SStkLHY9ZytkLHc9ditkLFA9dFtJXSxTPXRbSSsxXSxWPXRbZ10sTT10W2crMV0seD10W3ZdLHk9dFt2KzFdLEE9dFt3XSxXPXRbdysxXSxOPVAsRT1TLE89aFttXSxGPWMqaFttKzFdLEQ9VipPLU0qRixMPVYqRitNKk8sQz1oWzIqbV0sZXQ9YypoWzIqbSsxXSxzdD14KkMteSpldCxydD14KmV0K3kqQyxudD1oWzMqbV0saXQ9YypoWzMqbSsxXSxvdD1BKm50LVcqaXQsYXQ9QSppdCtXKm50LCQ9TitzdCxHPUUrcnQsY3Q9Ti1zdCx1dD1FLXJ0LFE9RCtvdCxKPUwrYXQsaHQ9YyooRC1vdCksbHQ9YyooTC1hdCksYnQ9JCtRLEl0PUcrSixfdD1jdCtsdCxCdD11dC1odDtpZih0W0ldPWJ0LHRbSSsxXT1JdCx0W2ddPV90LHRbZysxXT1CdCxwPT09MCl7dmFyIHd0PSQtUSxUdD1HLUo7dFt2XT13dCx0W3YrMV09VHQ7Y29udGludWV9aWYocCE9PWwpe3ZhciBQdD1jdCxnZT0tdXQsYmU9JCxJZT0tRyxfZT0tYypsdCxCZT0tYypodCx3ZT0tYypKLFRlPS1jKlEsUGU9UHQrX2UsTWU9Z2UrQmUsU2U9YmUrVGUsVmU9SWUtd2UsQ3Q9bytkLXAsUnQ9bytmLXA7dFtDdF09UGUsdFtDdCsxXT1NZSx0W1J0XT1TZSx0W1J0KzFdPVZlfX19fV9zaW5nbGVSZWFsVHJhbnNmb3JtMih0LGUscyl7Y29uc3Qgcj10aGlzLl9vdXQsaT10aGlzLl9kYXRhLG89aVtlXSxhPWlbZStzXSx1PW8rYSxjPW8tYTtyW3RdPXUsclt0KzFdPTAsclt0KzJdPWMsclt0KzNdPTB9X3NpbmdsZVJlYWxUcmFuc2Zvcm00KHQsZSxzKXtjb25zdCByPXRoaXMuX291dCxpPXRoaXMuX2RhdGEsbz10aGlzLl9pbnY/LTE6MSxhPXMqMix1PXMqMyxjPWlbZV0saD1pW2Urc10sZj1pW2UrYV0sZD1pW2UrdV0sbD1jK2YscD1jLWYsbT1oK2QsST1vKihoLWQpLGc9bCttLHY9cCx3PS1JLFA9bC1tLFM9cCxWPUk7clt0XT1nLHJbdCsxXT0wLHJbdCsyXT12LHJbdCszXT13LHJbdCs0XT1QLHJbdCs1XT0wLHJbdCs2XT1TLHJbdCs3XT1WfX1sZXQgRHQ9bj0+Y29uc29sZS5sb2cobik7Y29uc3QgenQ9KC4uLm4pPT5EdCguLi5uKSxXdD0obix0LGUpPT5NYXRoLm1pbihNYXRoLm1heChuLHQpLGUpLFN0PW49Pm4vKDErbikscXQ9KG4sdCk9PihuJXQrdCkldCxMdD0obix0KT0+KDErdCkqbi8oMSt0Kk1hdGguYWJzKG4pKSxZPShuLHQpPT5NYXRoLnRhbmgobiooMSt0KSksWXQ9KG4sdCk9Pld0KCgxK3QpKm4sLTEsMSksVnQ9KG4sdCk9PntsZXQgZT0oMSsuNSp0KSpuO2NvbnN0IHM9cXQoZSsxLDQpO3JldHVybiAxLU1hdGguYWJzKHMtMil9LGp0PShuLHQpPT5NYXRoLnNpbihNYXRoLlBJLzIqVnQobix0KSksSHQ9KG4sdCk9Pntjb25zdCBlPVN0KE1hdGgubG9nMXAodCkpLHM9KG4tZS8zKm4qbipuKS8oMS1lLzMpO3JldHVybiBZKHMsdCl9LHh0PShuLHQsZT0hMSk9Pntjb25zdCBzPTErMip0LGk9LjA3KlN0KE1hdGgubG9nMXAodCkpLG89WShuK2ksMip0KSxhPVkoZT9pOi1uK2ksMip0KSx1PW8tYSxjPTEvTWF0aC5jb3NoKHMqaSksaD1jKmMsZj1NYXRoLm1heCgxZS04LChlPzE6MikqcypoKTtyZXR1cm4gWSh1L2YsdCl9LHl0PXtzY3VydmU6THQsc29mdDpZLGhhcmQ6WXQsY3ViaWM6SHQsZGlvZGU6eHQsYXN5bToobix0KT0+eHQobix0LCEwKSxmb2xkOlZ0LHNpbmVmb2xkOmp0LGNoZWJ5c2hldjoobix0KT0+e2NvbnN0IGU9MTAqTWF0aC5sb2cxcCh0KTtsZXQgcz0xLHI9bixpLG89MDtmb3IobGV0IGE9MTthPDY0O2ErKyl7aWYoYTwyKXtvKz1hPT0wP3M6cjtjb250aW51ZX1pPTIqbipzLXIscj1zLHM9aSxhJTI9PT0wJiYobys9TWF0aC5taW4oMS4zKmUvYSwyKSppKX1yZXR1cm4gWShvLGUvMjApfX0sWD1PYmplY3QuZnJlZXplKE9iamVjdC5rZXlzKHl0KSksS3Q9bj0+e2xldCB0PW47dHlwZW9mIG49PSJzdHJpbmciJiYodD1YLmluZGV4T2YobiksdD09PS0xJiYoenQoYFtzdXBlcmRvdWdoXSBDb3VsZCBub3QgZmluZCB3YXZlc2hhcGluZyBhbGdvcml0aG0gJHtufS4KICAgICAgICBBdmFpbGFibGUgb3B0aW9ucyBhcmUgJHtYLmpvaW4oIiwgIil9LgogICAgICAgIERlZmF1bHRpbmcgdG8gJHtYWzBdfS5gKSx0PTApKTtjb25zdCBlPVhbdCVYLmxlbmd0aF07cmV0dXJuIHl0W2VdfSxqPTEyOCxSPU1hdGguUEksaz0yKlIscT0xL3NhbXBsZVJhdGUsVD0obix0LGUpPT5NYXRoLm1pbihNYXRoLm1heChuLHQpLGUpLFV0PShuLHQsZSk9PmUqKHQtbikrbixiPShuLHQpPT5uW3RdPz9uWzBdLEg9bj0+bi1NYXRoLmZsb29yKG4pLEs9bj0+bnwwLFU9bj0+SyhuKy41KSxadD1uPT5LKG4rMSksQXQ9bj0+bi1LKG4pLHo9bj0+e2NvbnN0IHQ9bioqMjtyZXR1cm4gbiooMjcrdCkvKDI3KzkqdCl9LE50PShuLHQpPT57aWYobjwyKXJldHVybiByPT4wO2NvbnN0IGU9dC8obi0xKSxzPXQqLjU7cmV0dXJuIHI9PnIqZS1zfSxaPShuLHQpPT5uKk1hdGgucG93KDIsdC8xMik7ZnVuY3Rpb24gJHQobix0KXt0PU1hdGgubWluKHQsMS10KTtjb25zdCBlPTEvdDtyZXR1cm4gbjx0PyhuKj1lLDIqbi1uKioyLTEpOm4+MS10PyhuPShuLTEpKmUsbioqMisyKm4rMSk6MH1jb25zdCBkdD17dHJpKG4sdD0uNSl7Y29uc3QgZT0xLXQ7cmV0dXJuIG4+PXQ/MS9lLW4vZTpuL3R9LHNpbmUobil7cmV0dXJuIE1hdGguc2luKGsqbikqLjUrLjV9LHJhbXAobil7cmV0dXJuIG59LHNhdyhuKXtyZXR1cm4gMS1ufSxzcXVhcmUobix0PS41KXtyZXR1cm4gbj49dD8wOjF9LGN1c3RvbShuLHQ9WzAsMV0pe2NvbnN0IGU9dC5sZW5ndGgtMSxzPU1hdGguZmxvb3IobiplKSxyPTEvZSxpPVQodFtzXSwwLDEpLGE9VCh0W3MrMV0sMCwxKSx1PWksYz0wLGg9cjtyZXR1cm4oYS11KS8oaC1jKSoobi1yKnMpK2l9LHNhd2JsZXAobix0KXtyZXR1cm4gMipuLTEtJHQobix0KX19LEd0PU9iamVjdC5rZXlzKGR0KTtjbGFzcyBRdCBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3NvcntzdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJiZWdpbiIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJ0aW1lIixkZWZhdWx0VmFsdWU6MH0se25hbWU6ImVuZCIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJmcmVxdWVuY3kiLGRlZmF1bHRWYWx1ZTouNX0se25hbWU6InNrZXciLGRlZmF1bHRWYWx1ZTouNX0se25hbWU6ImRlcHRoIixkZWZhdWx0VmFsdWU6MX0se25hbWU6InBoYXNlb2Zmc2V0IixkZWZhdWx0VmFsdWU6MH0se25hbWU6InNoYXBlIixkZWZhdWx0VmFsdWU6MH0se25hbWU6ImN1cnZlIixkZWZhdWx0VmFsdWU6MX0se25hbWU6ImRjb2Zmc2V0IixkZWZhdWx0VmFsdWU6MH0se25hbWU6Im1pbiIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJtYXgiLGRlZmF1bHRWYWx1ZToxfV19Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMucGhhc2V9aW5jcmVtZW50UGhhc2UodCl7dGhpcy5waGFzZSs9dCx0aGlzLnBoYXNlPjEmJih0aGlzLnBoYXNlPXRoaXMucGhhc2UtMSl9cHJvY2Vzcyh0LGUscyl7Y29uc3Qgcj1zLmJlZ2luWzBdO2lmKGN1cnJlbnRUaW1lPj1zLmVuZFswXSlyZXR1cm4hMTtpZihjdXJyZW50VGltZTw9cilyZXR1cm4hMDtjb25zdCBpPWVbMF0sbz1zLmZyZXF1ZW5jeVswXSxhPXMudGltZVswXSx1PXMuZGVwdGhbMF0sYz1zLnNrZXdbMF0saD1zLnBoYXNlb2Zmc2V0WzBdLGY9cy5jdXJ2ZVswXSxkPXMuZGNvZmZzZXRbMF0sbD1zLm1pblswXSxwPXMubWF4WzBdLG09R3Rbcy5zaGFwZVswXV0sST1pWzBdLmxlbmd0aD8/MDt0aGlzLnBoYXNlPT1udWxsJiYodGhpcy5waGFzZT1BdChhKm8raCkpO2NvbnN0IGc9bypxO2ZvcihsZXQgdj0wO3Y8STt2Kyspe2ZvcihsZXQgdz0wO3c8aS5sZW5ndGg7dysrKXtsZXQgUD0oZHRbbV0odGhpcy5waGFzZSxjKStkKSp1O1A9TWF0aC5wb3coUCxmKSxpW3ddW3ZdPVQoUCxsLHApfXRoaXMuaW5jcmVtZW50UGhhc2UoZyl9cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJsZm8tcHJvY2Vzc29yIixRdCk7Y2xhc3MgSnQgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToiY29hcnNlIixkZWZhdWx0VmFsdWU6MX1dfWNvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnN0YXJ0ZWQ9ITF9cHJvY2Vzcyh0LGUscyl7Y29uc3Qgcj10WzBdLGk9ZVswXSxvPXJbMF0hPT12b2lkIDA7aWYodGhpcy5zdGFydGVkJiYhbylyZXR1cm4hMTt0aGlzLnN0YXJ0ZWQ9bztsZXQgYT1zLmNvYXJzZVswXT8/MDthPU1hdGgubWF4KDEsYSk7Zm9yKGxldCB1PTA7dTxqO3UrKylmb3IobGV0IGM9MDtjPHIubGVuZ3RoO2MrKylpW2NdW3VdPXUlYT09PTA/cltjXVt1XTppW2NdW3UtMV07cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJjb2Fyc2UtcHJvY2Vzc29yIixKdCk7Y2xhc3MgWHQgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToiY3J1c2giLGRlZmF1bHRWYWx1ZTowfV19Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMuc3RhcnRlZD0hMX1wcm9jZXNzKHQsZSxzKXtjb25zdCByPXRbMF0saT1lWzBdLG89clswXSE9PXZvaWQgMDtpZih0aGlzLnN0YXJ0ZWQmJiFvKXJldHVybiExO3RoaXMuc3RhcnRlZD1vO2xldCBhPXMuY3J1c2hbMF0/Pzg7YT1NYXRoLm1heCgxLGEpO2ZvcihsZXQgdT0wO3U8ajt1KyspZm9yKGxldCBjPTA7YzxyLmxlbmd0aDtjKyspe2NvbnN0IGg9TWF0aC5wb3coMixhLTEpO2lbY11bdV09TWF0aC5yb3VuZChyW2NdW3VdKmgpL2h9cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJjcnVzaC1wcm9jZXNzb3IiLFh0KTtjbGFzcyB0ZSBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3NvcntzdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJzaGFwZSIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJwb3N0Z2FpbiIsZGVmYXVsdFZhbHVlOjF9XX1jb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5zdGFydGVkPSExfXByb2Nlc3ModCxlLHMpe2NvbnN0IHI9dFswXSxpPWVbMF0sbz1yWzBdIT09dm9pZCAwO2lmKHRoaXMuc3RhcnRlZCYmIW8pcmV0dXJuITE7dGhpcy5zdGFydGVkPW87bGV0IGE9cy5zaGFwZVswXTthPWE8MT9hOi45OTk5OTk5OTk2LGE9MiphLygxLWEpO2NvbnN0IHU9TWF0aC5tYXgoLjAwMSxNYXRoLm1pbigxLHMucG9zdGdhaW5bMF0pKTtmb3IobGV0IGM9MDtjPGo7YysrKWZvcihsZXQgaD0wO2g8ci5sZW5ndGg7aCsrKWlbaF1bY109KDErYSkqcltoXVtjXS8oMSthKk1hdGguYWJzKHJbaF1bY10pKSp1O3JldHVybiEwfX1yZWdpc3RlclByb2Nlc3Nvcigic2hhcGUtcHJvY2Vzc29yIix0ZSk7Y2xhc3MgT3R7czA9MDtzMT0wO3VwZGF0ZSh0LGUscz0wKXtzPVQocywwLDEpLGU9VChlLDAsc2FtcGxlUmF0ZS8yLTEpO2NvbnN0IHI9VCgyKk1hdGguc2luKGUqUipxKSwwLDEuMTQpLG89MS1NYXRoLnBvdyguNSw4KnMrMSkqcjtyZXR1cm4gdGhpcy5zMD1vKnRoaXMuczAtcip0aGlzLnMxK3IqdCx0aGlzLnMxPW8qdGhpcy5zMStyKnRoaXMuczAsdGhpcy5zMX19Y2xhc3MgZWUgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToidmFsdWUiLGRlZmF1bHRWYWx1ZTouNX1dfWNvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLmZpbHRlcnM9W25ldyBPdCxuZXcgT3RdfXByb2Nlc3ModCxlLHMpe2NvbnN0IHI9dFswXSxpPWVbMF0sbz1yWzBdIT09dm9pZCAwO3RoaXMuc3RhcnRlZD1vO2NvbnN0IGE9VChzLnZhbHVlWzBdLDAsMSk7bGV0IHU9Im5vbmUiLGMsaD0xO2E+LjUxPyh1PSJoaXBhc3MiLGg9KGEtLjUpKjIpOmE8LjQ5JiYodT0ibG9wYXNzIixoPWEqMiksYz1NYXRoLnBvdyhoKjExLDQpO2ZvcihsZXQgZj0wO2Y8ci5sZW5ndGg7ZisrKWZvcihsZXQgZD0wO2Q8ajtkKyspdT09Im5vbmUiP2lbZl1bZF09cltmXVtkXToodGhpcy5maWx0ZXJzW2ZdLnVwZGF0ZShyW2ZdW2RdLGMsLjEpLHU9PT0ibG9wYXNzIj9pW2ZdW2RdPXRoaXMuZmlsdGVyc1tmXS5zMTp1PT09ImhpcGFzcyI/aVtmXVtkXT1yW2ZdW2RdLXRoaXMuZmlsdGVyc1tmXS5zMTppW2ZdW2RdPXJbZl1bZF0pO3JldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigiZGpmLXByb2Nlc3NvciIsZWUpO2NsYXNzIHNlIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImZyZXF1ZW5jeSIsZGVmYXVsdFZhbHVlOjUwMH0se25hbWU6InEiLGRlZmF1bHRWYWx1ZToxfSx7bmFtZToiZHJpdmUiLGRlZmF1bHRWYWx1ZTouNjl9XX1jb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5zdGFydGVkPSExLHRoaXMucDA9WzAsMF0sdGhpcy5wMT1bMCwwXSx0aGlzLnAyPVswLDBdLHRoaXMucDM9WzAsMF0sdGhpcy5wMzI9WzAsMF0sdGhpcy5wMzM9WzAsMF0sdGhpcy5wMzQ9WzAsMF19cHJvY2Vzcyh0LGUscyl7Y29uc3Qgcj10WzBdLGk9ZVswXSxvPXJbMF0hPT12b2lkIDA7aWYodGhpcy5zdGFydGVkJiYhbylyZXR1cm4hMTt0aGlzLnN0YXJ0ZWQ9bztjb25zdCBhPXMucVswXSx1PVQoTWF0aC5leHAocy5kcml2ZVswXSksLjEsMmUzKTtsZXQgYz1zLmZyZXF1ZW5jeVswXTtjPWMqaypxLGM9Yz4xPzE6Yztjb25zdCBoPU1hdGgubWluKDgsYSouMTMpO2xldCBmPTEvdSpNYXRoLm1pbigxLjc1LDEraCk7Zm9yKGxldCBkPTA7ZDxqO2QrKylmb3IobGV0IGw9MDtsPHIubGVuZ3RoO2wrKyl7Y29uc3QgcD10aGlzLnAzW2xdKi4zNjA4OTErdGhpcy5wMzJbbF0qLjQxNzI5K3RoaXMucDMzW2xdKi4xNzc4OTYrdGhpcy5wMzRbbF0qLjA0Mzk3MjU7dGhpcy5wMzRbbF09dGhpcy5wMzNbbF0sdGhpcy5wMzNbbF09dGhpcy5wMzJbbF0sdGhpcy5wMzJbbF09dGhpcy5wM1tsXSx0aGlzLnAwW2xdKz0oeihyW2xdW2RdKnUtaCpwKS16KHRoaXMucDBbbF0pKSpjLHRoaXMucDFbbF0rPSh6KHRoaXMucDBbbF0pLXoodGhpcy5wMVtsXSkpKmMsdGhpcy5wMltsXSs9KHoodGhpcy5wMVtsXSkteih0aGlzLnAyW2xdKSkqYyx0aGlzLnAzW2xdKz0oeih0aGlzLnAyW2xdKS16KHRoaXMucDNbbF0pKSpjLGlbbF1bZF09cCpmfXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigibGFkZGVyLXByb2Nlc3NvciIsc2UpO2NsYXNzIHJlIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImRpc3RvcnQiLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToicG9zdGdhaW4iLGRlZmF1bHRWYWx1ZToxfV19Y29uc3RydWN0b3Ioe3Byb2Nlc3Nvck9wdGlvbnM6dH0pe3N1cGVyKCksdGhpcy5zdGFydGVkPSExLHRoaXMuYWxnb3JpdGhtPUt0KHQuYWxnb3JpdGhtKX1wcm9jZXNzKHQsZSxzKXtjb25zdCByPXRbMF0saT1lWzBdLG89clswXSE9PXZvaWQgMDtpZih0aGlzLnN0YXJ0ZWQmJiFvKXJldHVybiExO3RoaXMuc3RhcnRlZD1vO2ZvcihsZXQgYT0wO2E8ajthKyspe2NvbnN0IHU9VChiKHMucG9zdGdhaW4sYSksLjAwMSwxKSxjPU1hdGguZXhwbTEoYihzLmRpc3RvcnQsYSkpO2ZvcihsZXQgaD0wO2g8ci5sZW5ndGg7aCsrKXtjb25zdCBmPXJbaF1bYV07aVtoXVthXT11KnRoaXMuYWxnb3JpdGhtKGYsYyl9fXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigiZGlzdG9ydC1wcm9jZXNzb3IiLHJlKTtjbGFzcyBuZSBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3Nvcntjb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5waGFzZT1bXX1zdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJiZWdpbiIsZGVmYXVsdFZhbHVlOjAsbWF4Ok51bWJlci5QT1NJVElWRV9JTkZJTklUWSxtaW46MH0se25hbWU6ImVuZCIsZGVmYXVsdFZhbHVlOjAsbWF4Ok51bWJlci5QT1NJVElWRV9JTkZJTklUWSxtaW46MH0se25hbWU6ImZyZXF1ZW5jeSIsZGVmYXVsdFZhbHVlOjQ0MCxtaW46TnVtYmVyLkVQU0lMT059LHtuYW1lOiJwYW5zcHJlYWQiLGRlZmF1bHRWYWx1ZTouNCxtaW46MCxtYXg6MX0se25hbWU6ImZyZXFzcHJlYWQiLGRlZmF1bHRWYWx1ZTouMixtaW46MH0se25hbWU6ImRldHVuZSIsZGVmYXVsdFZhbHVlOjAsbWluOjB9LHtuYW1lOiJ2b2ljZXMiLGRlZmF1bHRWYWx1ZTo1LG1pbjoxLGF1dG9tYXRpb25SYXRlOiJrLXJhdGUifV19cHJvY2Vzcyh0LGUscyl7aWYoY3VycmVudFRpbWU8PXMuYmVnaW5bMF0pcmV0dXJuITA7aWYoY3VycmVudFRpbWU+PXMuZW5kWzBdKXJldHVybiExO2NvbnN0IHI9ZVswXSxpPXMudm9pY2VzWzBdO2ZvcihsZXQgbz0wO288clswXS5sZW5ndGg7bysrKXtjb25zdCBhPWIocy5kZXR1bmUsbyksdT1iKHMuZnJlcXNwcmVhZCxvKSxjPWIocy5wYW5zcHJlYWQsbykqLjUrLjU7bGV0IGg9TWF0aC5zcXJ0KDEtYyksZj1NYXRoLnNxcnQoYyksZD1iKHMuZnJlcXVlbmN5LG8pO2Q9WihkLGEvMTAwKTtjb25zdCBsPU50KGksdSk7Zm9yKGxldCBwPTA7cDxpO3ArKyl7Y29uc3QgbT1aKGQsbChwKSksST1IKG0qcSk7dGhpcy5waGFzZVtwXT10aGlzLnBoYXNlW3BdPz9NYXRoLnJhbmRvbSgpO2NvbnN0IGc9ZHQuc2F3YmxlcCh0aGlzLnBoYXNlW3BdLEkpO3JbMF1bb10rPWcqaCxyWzFdW29dKz1nKmY7bGV0IHY9dGhpcy5waGFzZVtwXStJO3Y+PTEmJih2LT0xKSx0aGlzLnBoYXNlW3BdPXY7Y29uc3Qgdz1oO2g9ZixmPXd9fXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3Nvcigic3VwZXJzYXctb3NjaWxsYXRvciIsbmUpO2NvbnN0IGllPTIwNDgscHQ9bmV3IE1hcDtmdW5jdGlvbiBvZShuKXtpZighcHQuaGFzKG4pKXtjb25zdCB0PW5ldyBGbG9hdDMyQXJyYXkobik7Zm9yKGxldCBlPTA7ZTxuO2UrKyl0W2VdPS41KigxLU1hdGguY29zKGsqZS9uKSk7cHQuc2V0KG4sdCl9cmV0dXJuIHB0LmdldChuKX1jbGFzcyBhZSBleHRlbmRzIGt0e3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6InBpdGNoRmFjdG9yIixkZWZhdWx0VmFsdWU6MX1dfWNvbnN0cnVjdG9yKHQpe3QucHJvY2Vzc29yT3B0aW9ucz17YmxvY2tTaXplOmllfSxzdXBlcih0KSx0aGlzLnRpbWVDdXJzb3I9MCx0aGlzLmZmdFNpemU9dGhpcy5ibG9ja1NpemUsdGhpcy5pbnZmZnRTaXplPTEvdGhpcy5mZnRTaXplLHRoaXMuaGFubldpbmRvdz1vZSh0aGlzLmZmdFNpemUpLHRoaXMuZmZ0PW5ldyBFdCh0aGlzLmZmdFNpemUpLHRoaXMuZnJlcUNvbXBsZXhCdWZmZXI9dGhpcy5mZnQuY3JlYXRlQ29tcGxleEFycmF5KCksdGhpcy5mcmVxQ29tcGxleEJ1ZmZlclNoaWZ0ZWQ9dGhpcy5mZnQuY3JlYXRlQ29tcGxleEFycmF5KCksdGhpcy50aW1lQ29tcGxleEJ1ZmZlcj10aGlzLmZmdC5jcmVhdGVDb21wbGV4QXJyYXkoKSx0aGlzLm1hZ25pdHVkZXM9bmV3IEZsb2F0MzJBcnJheSh0aGlzLmZmdFNpemUvMisxKSx0aGlzLnBlYWtJbmRleGVzPW5ldyBJbnQzMkFycmF5KHRoaXMubWFnbml0dWRlcy5sZW5ndGgpLHRoaXMubmJQZWFrcz0wfXByb2Nlc3NPTEEodCxlLHMpe2xldCByPXMucGl0Y2hGYWN0b3Jbcy5waXRjaEZhY3Rvci5sZW5ndGgtMV07cjwwJiYocj1yKi4yNSkscj1NYXRoLm1heCgwLHIrMSk7Zm9yKGxldCBpPTA7aTx0aGlzLm5iSW5wdXRzO2krKylmb3IobGV0IG89MDtvPHRbaV0ubGVuZ3RoO28rKyl7Y29uc3QgYT10W2ldW29dLHU9ZVtpXVtvXTt0aGlzLmFwcGx5SGFubldpbmRvdyhhKSx0aGlzLmZmdC5yZWFsVHJhbnNmb3JtKHRoaXMuZnJlcUNvbXBsZXhCdWZmZXIsYSksdGhpcy5jb21wdXRlTWFnbml0dWRlcygpLHRoaXMuZmluZFBlYWtzKCksdGhpcy5zaGlmdFBlYWtzKHIpLHRoaXMuZmZ0LmNvbXBsZXRlU3BlY3RydW0odGhpcy5mcmVxQ29tcGxleEJ1ZmZlclNoaWZ0ZWQpLHRoaXMuZmZ0LmludmVyc2VUcmFuc2Zvcm0odGhpcy50aW1lQ29tcGxleEJ1ZmZlcix0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZCksdGhpcy5mZnQuZnJvbUNvbXBsZXhBcnJheSh0aGlzLnRpbWVDb21wbGV4QnVmZmVyLHUpLHRoaXMuYXBwbHlIYW5uV2luZG93KHUpfXRoaXMudGltZUN1cnNvcis9dGhpcy5ob3BTaXplfWFwcGx5SGFubldpbmRvdyh0KXtmb3IobGV0IGU9MDtlPHRoaXMuYmxvY2tTaXplO2UrKyl0W2VdKj10aGlzLmhhbm5XaW5kb3dbZV0qMS42Mn1jb21wdXRlTWFnbml0dWRlcygpe2xldCB0PTAsZT0wO2Zvcig7dDx0aGlzLm1hZ25pdHVkZXMubGVuZ3RoOyl7Y29uc3Qgcz10aGlzLmZyZXFDb21wbGV4QnVmZmVyW2VdLHI9dGhpcy5mcmVxQ29tcGxleEJ1ZmZlcltlKzFdO3RoaXMubWFnbml0dWRlc1t0XT1zKioyK3IqKjIsdCs9MSxlKz0yfX1maW5kUGVha3MoKXt0aGlzLm5iUGVha3M9MDtsZXQgdD0yO2NvbnN0IGU9dGhpcy5tYWduaXR1ZGVzLmxlbmd0aC0yO2Zvcig7dDxlOyl7Y29uc3Qgcz10aGlzLm1hZ25pdHVkZXNbdF07aWYodGhpcy5tYWduaXR1ZGVzW3QtMV0+PXN8fHRoaXMubWFnbml0dWRlc1t0LTJdPj1zKXt0Kys7Y29udGludWV9aWYodGhpcy5tYWduaXR1ZGVzW3QrMV0+PXN8fHRoaXMubWFnbml0dWRlc1t0KzJdPj1zKXt0Kys7Y29udGludWV9dGhpcy5wZWFrSW5kZXhlc1t0aGlzLm5iUGVha3NdPXQsdGhpcy5uYlBlYWtzKyssdCs9Mn19c2hpZnRQZWFrcyh0KXt0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZC5maWxsKDApO2ZvcihsZXQgZT0wO2U8dGhpcy5uYlBlYWtzO2UrKyl7Y29uc3Qgcz10aGlzLnBlYWtJbmRleGVzW2VdLHI9VShzKnQpO2lmKHI+dGhpcy5tYWduaXR1ZGVzLmxlbmd0aClicmVhaztsZXQgaT0wLG89dGhpcy5mZnRTaXplO2U+MCYmKGk9cy1VKChzLXRoaXMucGVha0luZGV4ZXNbZS0xXSkvMikpLGU8dGhpcy5uYlBlYWtzLTEmJihvPXMrWnQoKHRoaXMucGVha0luZGV4ZXNbZSsxXS1zKS8yKSk7Y29uc3QgYT1pLXMsdT1vLXMsYz1rKnRoaXMuaW52ZmZ0U2l6ZSooci1zKSxoPU1hdGguY29zKGMqdGhpcy50aW1lQ3Vyc29yKSxmPU1hdGguc2luKGMqdGhpcy50aW1lQ3Vyc29yKTtmb3IobGV0IGQ9YTtkPHU7ZCsrKXtjb25zdCBsPXMrZCxwPXIrZDtpZihwPj10aGlzLm1hZ25pdHVkZXMubGVuZ3RoKWJyZWFrO2NvbnN0IG09MipsLEk9bSsxLGc9dGhpcy5mcmVxQ29tcGxleEJ1ZmZlclttXSx2PXRoaXMuZnJlcUNvbXBsZXhCdWZmZXJbSV0sdz1nKmgtdipmLFA9ZypmK3YqaCxTPTIqcCxWPVMrMTt0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZFtTXSs9dyx0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZFtWXSs9UH19fX1yZWdpc3RlclByb2Nlc3NvcigicGhhc2Utdm9jb2Rlci1wcm9jZXNzb3IiLGFlKTtjbGFzcyBjZSBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3Nvcntjb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5waGk9LVIsdGhpcy5ZMD0wLHRoaXMuWTE9MCx0aGlzLlBXPVIsdGhpcy5CPTIuMyx0aGlzLmRwaGlmPTAsdGhpcy5lbnZmPTB9c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToiYmVnaW4iLGRlZmF1bHRWYWx1ZTowLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksbWluOjB9LHtuYW1lOiJlbmQiLGRlZmF1bHRWYWx1ZTowLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksbWluOjB9LHtuYW1lOiJmcmVxdWVuY3kiLGRlZmF1bHRWYWx1ZTo0NDAsbWluOk51bWJlci5FUFNJTE9OfSx7bmFtZToiZGV0dW5lIixkZWZhdWx0VmFsdWU6MCxtaW46TnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFl9LHtuYW1lOiJwdWxzZXdpZHRoIixkZWZhdWx0VmFsdWU6MSxtaW46MCxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZfV19cHJvY2Vzcyh0LGUscyl7aWYodGhpcy5kaXNjb25uZWN0ZWQpcmV0dXJuITE7aWYoY3VycmVudFRpbWU8PXMuYmVnaW5bMF0pcmV0dXJuITA7aWYoY3VycmVudFRpbWU+PXMuZW5kWzBdKXJldHVybiExO2NvbnN0IHI9ZVswXTtsZXQgaT0xLG87Zm9yKGxldCBhPTA7YTwoclswXS5sZW5ndGg/PzApO2ErKyl7Y29uc3QgdT0oMS1UKGIocy5wdWxzZXdpZHRoLGEpLC0uOTksLjk5KSkqUixjPWIocy5kZXR1bmUsYSksaD1aKGIocy5mcmVxdWVuY3ksYSksYy8xMDApO289aCprKnEsdGhpcy5kcGhpZis9LjEqKG8tdGhpcy5kcGhpZiksaSo9Ljk5OTgsdGhpcy5lbnZmKz0uMSooaS10aGlzLmVudmYpLHRoaXMuQj0yLjMqKDEtMWUtNCpoKSx0aGlzLkI8MCYmKHRoaXMuQj0wKSx0aGlzLnBoaSs9dGhpcy5kcGhpZix0aGlzLnBoaT49UiYmKHRoaXMucGhpLT1rKTtsZXQgZj1NYXRoLmNvcyh0aGlzLnBoaSt0aGlzLkIqdGhpcy5ZMCk7dGhpcy5ZMD0uNSooZit0aGlzLlkwKTtsZXQgZD1NYXRoLmNvcyh0aGlzLnBoaSt0aGlzLkIqdGhpcy5ZMSt1KTt0aGlzLlkxPS41KihkK3RoaXMuWTEpO2ZvcihsZXQgbD0wO2w8ci5sZW5ndGg7bCsrKXJbbF1bYV09LjE1KihmLWQpKnRoaXMuZW52Zn1yZXR1cm4hMH19cmVnaXN0ZXJQcm9jZXNzb3IoInB1bHNlLW9zY2lsbGF0b3IiLGNlKTtjb25zdCBtdD17Yml0QzpmdW5jdGlvbihuLHQsZSl7cmV0dXJuIG4mdD9lOjB9LGJyOmZ1bmN0aW9uKG4sdD04KXtpZih0PjMyKXRocm93IG5ldyBFcnJvcigiYnIoKSBTaXplIGNhbm5vdCBiZSBncmVhdGVyIHRoYW4gMzIiKTtsZXQgZT0wO2ZvcihsZXQgcz0wO3M8dDtzKyspZXw9bXQuYml0QyhuLDE8PHMsMTw8dC0ocysxKSk7cmV0dXJuIGV9LHNpbmY6ZnVuY3Rpb24obil7cmV0dXJuIE1hdGguc2luKG4qUi8xMjgpfSxjb3NmOmZ1bmN0aW9uKG4pe3JldHVybiBNYXRoLmNvcyhuKlIvMTI4KX0sdGFuZjpmdW5jdGlvbihuKXtyZXR1cm4gTWF0aC50YW4obipSLzEyOCl9LHJlZ0c6ZnVuY3Rpb24obix0KXtyZXR1cm4gdC50ZXN0KG4udG9TdHJpbmcoMikpfX07bGV0IHR0LHZ0O2Z1bmN0aW9uIHVlKG4pe2lmKHR0PT1udWxsKXt0dD1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhNYXRoKSx2dD10dC5tYXAocz0+TWF0aFtzXSk7Y29uc3QgdD1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhtdCksZT10Lm1hcChzPT5tdFtzXSk7dHQucHVzaCgiaW50Iiwid2luZG93IiwuLi50KSx2dC5wdXNoKE1hdGguZmxvb3IsZ2xvYmFsVGhpcywuLi5lKX1yZXR1cm4gbmV3IEZ1bmN0aW9uKC4uLnR0LCJ0IixgcmV0dXJuIDAsCiR7bnx8MH07YCkuYmluZChnbG9iYWxUaGlzLC4uLnZ0KX1jbGFzcyBoZSBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3Nvcntjb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5wb3J0Lm9ubWVzc2FnZT10PT57bGV0e2NvZGVUZXh0OmV9PXQuZGF0YTtjb25zdHtieXRlQmVhdFN0YXJ0VGltZTpzfT10LmRhdGE7cyE9bnVsbCYmKHRoaXMudD0wLHRoaXMuaW5pdGlhbE9mZnNldD1NYXRoLmZsb29yKHMpKSxlPWUudHJpbSgpLnJlcGxhY2UoL15ldmFsXCh1bmVzY2FwZVwoZXNjYXBlKD86YHxcKCd8XCgifFwoYCkoLio/KSg/OmB8J1wpfCJcKXxgXCkpLnJlcGxhY2VcKFwvdVwoXC5cLlwpXC9nLFsiJ2BdXCQxJVsiJ2BdXClcKVwpJC8sKHIsaSk9PnVuZXNjYXBlKGVzY2FwZShpKS5yZXBsYWNlKC91KC4uKS9nLCIkMSUiKSkpLHRoaXMuZnVuYz11ZShlKX0sdGhpcy5pbml0aWFsT2Zmc2V0PTAsdGhpcy50PW51bGwsdGhpcy5mdW5jPW51bGx9c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToiYmVnaW4iLGRlZmF1bHRWYWx1ZTowLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksbWluOjB9LHtuYW1lOiJmcmVxdWVuY3kiLGRlZmF1bHRWYWx1ZTo0NDAsbWluOk51bWJlci5FUFNJTE9OfSx7bmFtZToiZGV0dW5lIixkZWZhdWx0VmFsdWU6MCxtaW46TnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFl9LHtuYW1lOiJlbmQiLGRlZmF1bHRWYWx1ZTowLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksbWluOjB9XX1wcm9jZXNzKHQsZSxzKXtpZih0aGlzLmRpc2Nvbm5lY3RlZClyZXR1cm4hMTtpZihjdXJyZW50VGltZTw9cy5iZWdpblswXSlyZXR1cm4hMDtpZihjdXJyZW50VGltZT49cy5lbmRbMF0pcmV0dXJuITE7dGhpcy50PT1udWxsJiYodGhpcy50PXMuYmVnaW5bMF0qc2FtcGxlUmF0ZSk7Y29uc3Qgcj1lWzBdLGk9MjU2KnE7Zm9yKGxldCBvPTA7bzxyWzBdLmxlbmd0aDtvKyspe2NvbnN0IGE9YihzLmRldHVuZSxvKSx1PVooYihzLmZyZXF1ZW5jeSxvKSxhLzEwMCksYz1pKnUqdGhpcy50K3RoaXMuaW5pdGlhbE9mZnNldCxmPSh0aGlzLmZ1bmMoYykmMjU1KS8xMjcuNS0xLGQ9VChmKi4yLC0uNCwuNCk7Zm9yKGxldCBsPTA7bDxyLmxlbmd0aDtsKyspcltsXVtvXT1kO3RoaXMudCsrfXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigiYnl0ZS1iZWF0LXByb2Nlc3NvciIsaGUpO2NsYXNzIGxlIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImJlZ2luIixkZWZhdWx0VmFsdWU6MH0se25hbWU6ImVuZCIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJhdHRhY2siLGRlZmF1bHRWYWx1ZTouMDA1LG1pblZhbHVlOjB9LHtuYW1lOiJkZWNheSIsZGVmYXVsdFZhbHVlOi4xNCxtaW5WYWx1ZTowfSx7bmFtZToic3VzdGFpbiIsZGVmYXVsdFZhbHVlOjAsbWluVmFsdWU6MCxtYXhWYWx1ZToxfSx7bmFtZToicmVsZWFzZSIsZGVmYXVsdFZhbHVlOi4xLG1pblZhbHVlOjB9LHtuYW1lOiJhdHRhY2tDdXJ2ZSIsZGVmYXVsdFZhbHVlOjAsbWluVmFsdWU6LTEsbWF4VmFsdWU6MX0se25hbWU6ImRlY2F5Q3VydmUiLGRlZmF1bHRWYWx1ZTowLG1pblZhbHVlOi0xLG1heFZhbHVlOjF9LHtuYW1lOiJyZWxlYXNlQ3VydmUiLGRlZmF1bHRWYWx1ZTowLG1pblZhbHVlOi0xLG1heFZhbHVlOjF9LHtuYW1lOiJwZWFrIixkZWZhdWx0VmFsdWU6MX0se25hbWU6InJldHJpZ2dlciIsZGVmYXVsdFZhbHVlOjEsbWluVmFsdWU6MCxtYXhWYWx1ZToxfV19Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMudmFsPTAsdGhpcy5zZWdJZHg9MCx0aGlzLnN0YXRlPTAsdGhpcy5iZWdpblRpbWU9MCx0aGlzLmVuZFRpbWU9MCx0aGlzLmF0dGFja1N0YXJ0PTB9X3dhcnAodCxlLHM9OCl7aWYodD09PTB8fHQ9PT0xKXJldHVybiB0O2lmKGU+MCl7Y29uc3Qgcj0xK3MqZTtyZXR1cm4gMS1NYXRoLnBvdygxLXQscil9ZWxzZXtjb25zdCByPTEtcyplO3JldHVybiBNYXRoLnBvdyh0LHIpfX1fYWR2YW5jZSh0LGUscyxyKXtpZihzPT09MHx8dD09PWUpdGhpcy52YWw9ZTtlbHNle2NvbnN0IGk9TWF0aC5taW4oMSwoY3VycmVudFRpbWUtdGhpcy5iZWdpblRpbWUpL3MpLG89dGhpcy5fd2FycChpLHIpO3RoaXMudmFsPXQrKGUtdCkqb319cHJvY2Vzcyh0LGUscyl7Y29uc3Qgcj1lWzBdWzBdO2lmKCFyKXJldHVybiEwO2NvbnN0IGk9YihzLmJlZ2luLDApLG89YihzLnJldHJpZ2dlciwwKT49LjU7aSE9PXRoaXMuYmVnaW5UaW1lJiYodGhpcy5zdGF0ZT09PTB8fG8pJiYodGhpcy5iZWdpblRpbWU9aSx0aGlzLnN0YXRlPTEsdGhpcy5lbmRUaW1lPWIocy5lbmQsMCksdGhpcy5hdHRhY2tTdGFydD10aGlzLnZhbCk7Y29uc3QgYT10aGlzLmVuZFRpbWUtdGhpcy5iZWdpblRpbWU7Zm9yKGxldCB1PTA7dTxyLmxlbmd0aDt1Kyspe2NvbnN0IGM9YihzLmF0dGFjayx1KSxoPWIocy5kZWNheSx1KSxmPWIocy5zdXN0YWluLHUpLGQ9YihzLnJlbGVhc2UsdSksbD1iKHMuYXR0YWNrQ3VydmUsdSkscD1iKHMuZGVjYXlDdXJ2ZSx1KSxtPWIocy5yZWxlYXNlQ3VydmUsdSksST1iKHMucGVhayx1KSxnPVt7dGltZTpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksc3RhcnQ6MCx0YXJnZXQ6MH0se3RpbWU6YyxzdGFydDp0aGlzLmF0dGFja1N0YXJ0LHRhcmdldDoxLGN1cnZlOmx9LHt0aW1lOmMraCxzdGFydDoxLHRhcmdldDpmLGN1cnZlOnB9LHt0aW1lOmEsc3RhcnQ6Zix0YXJnZXQ6Zn0se3RpbWU6YStkLHN0YXJ0OmYsdGFyZ2V0OjAsY3VydmU6bX1dO2xldHt0aW1lOnYsc3RhcnQ6dyx0YXJnZXQ6UCxjdXJ2ZTpTfT1nW3RoaXMuc3RhdGVdO2Zvcih0aGlzLl9hZHZhbmNlKHcsUCx2LFMpO2N1cnJlbnRUaW1lLXRoaXMuYmVnaW5UaW1lPj12Oyl0aGlzLnN0YXRlPSh0aGlzLnN0YXRlKzEpJWcubGVuZ3RoLHY9Z1t0aGlzLnN0YXRlXS50aW1lO3JbdV09dGhpcy52YWwqSX1yZXR1cm4hMH19cmVnaXN0ZXJQcm9jZXNzb3IoImVudmVsb3BlLXByb2Nlc3NvciIsbGUpO2NvbnN0IEI9T2JqZWN0LmZyZWV6ZSh7Tk9ORTowLEFTWU06MSxNSVJST1I6MixCRU5EUDozLEJFTkRNOjQsQkVORE1QOjUsU1lOQzo2LFFVQU5UOjcsRk9MRDo4LFBXTTo5LE9SQklUOjEwLFNQSU46MTEsQ0hBT1M6MTIsUFJJTUVTOjEzLEJJTkFSWToxNCxCUk9XTklBTjoxNSxSRUNJUFJPQ0FMOjE2LFdPUk1IT0xFOjE3LExPR0lTVElDOjE4LFNJR01PSUQ6MTksRlJBQ1RBTDoyMCxGTElQOjIxfSk7ZnVuY3Rpb24gZmUobil7cmV0dXJuIG49bisyMTI3OTEyMjE0KyhuPDwxMiksbj1uXjMzNDUwNzI3MDBebj4+PjE5LG49biszNzQ3NjEzOTMrKG48PDUpLG49biszNTUwNjM1MTE2Xm48PDksbj1uKzQyNTE5OTM3OTcrKG48PDMpLG49bl4zMDQyNTk0NTY5Xm4+Pj4xNixuPj4+MH1jb25zdCBGdD1uPT4oZmUobik+Pj44KS8xNjc3NzIxNjtmdW5jdGlvbiBkZShuLHQpe2xldCBlPTA7Zm9yKGxldCBzPTA7czx0O3MrKyllPWU8PDF8biYxLG4+Pj49MTtyZXR1cm4gZX1mdW5jdGlvbiBwZShuKXtjb25zdCB0PU1hdGguZmxvb3IobiksZT1uLXQscz1GdCh0KSxyPUZ0KHQrMSk7cmV0dXJuIHMrKHItcykqZX1mdW5jdGlvbiBtZShuLHQ9NCl7bGV0IGU9LjUscz0wLHI9MCxpPTE7Zm9yKGxldCBvPTA7bzx0O28rKylzKz1lKnBlKG4qaSkscis9ZSxlKj0uNSxpKj0yO3JldHVybiBzL3IqMi0xfWNvbnN0IGd0PXt9O2NsYXNzIHZlIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImJlZ2luIixkZWZhdWx0VmFsdWU6MCxtaW46MCxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZfSx7bmFtZToiZW5kIixkZWZhdWx0VmFsdWU6MCxtaW46MCxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZfSx7bmFtZToiZnJlcXVlbmN5IixkZWZhdWx0VmFsdWU6NDQwLG1pbjpOdW1iZXIuRVBTSUxPTn0se25hbWU6ImRldHVuZSIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJmcmVxc3ByZWFkIixkZWZhdWx0VmFsdWU6LjE4LG1pbjowfSx7bmFtZToicG9zaXRpb24iLGRlZmF1bHRWYWx1ZTowLG1pbjowLG1heDoxfSx7bmFtZToid2FycCIsZGVmYXVsdFZhbHVlOjAsbWluOjAsbWF4OjF9LHtuYW1lOiJ3YXJwTW9kZSIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJ2b2ljZXMiLGRlZmF1bHRWYWx1ZToxLG1pbjoxLGF1dG9tYXRpb25SYXRlOiJrLXJhdGUifSx7bmFtZToicGFuc3ByZWFkIixkZWZhdWx0VmFsdWU6LjcsbWluOjAsbWF4OjF9LHtuYW1lOiJwaGFzZXJhbmQiLGRlZmF1bHRWYWx1ZTowLG1pbjowLG1heDoxfV19Y29uc3RydWN0b3IodCl7c3VwZXIodCksdGhpcy5mcmFtZUxlbj0wLHRoaXMubnVtRnJhbWVzPTAsdGhpcy5waGFzZT1bXSx0aGlzLnBvcnQub25tZXNzYWdlPWU9Pntjb25zdHt0eXBlOnMscGF5bG9hZDpyfT1lLmRhdGF8fHt9O2lmKHM9PT0idGFibGUiKXtjb25zdCBpPXIua2V5O2lmKHRoaXMuZnJhbWVMZW49ci5mcmFtZUxlbiwhZ3RbaV0pe2NvbnN0IG89W3IuZnJhbWVzXTtsZXQgYT1vWzBdO2ZvcihsZXQgdT0xO3U8MTt1Kyspe2NvbnN0IGM9YS5sZW5ndGg+PjEsaD1hLm1hcChmPT57Y29uc3QgZD1uZXcgRmxvYXQzMkFycmF5KGMpO2ZvcihsZXQgbD0wO2w8YztsKyspZFtsXT0oZlsyKmxdK2ZbMipsKzFdKS8yO3JldHVybiBkfSk7aWYoby5wdXNoKGgpLGE9aCxjPD0zMilicmVha31ndFtpXT1vfXRoaXMudGFibGVzPWd0W2ldLHRoaXMubnVtRnJhbWVzPXRoaXMudGFibGVzWzBdLmxlbmd0aH19fV9taXJyb3IodCl7cmV0dXJuIDEtTWF0aC5hYnMoMip0LTEpfV90b0JpdHModCxlPTIscz0xMil7Y29uc3Qgcj1zKyhlLXMpKnQ7cmV0dXJue2I6cixuOlUoTWF0aC5wb3coMixyKSl9fV93YXJwUGhhc2UodCxlLHMpe3N3aXRjaChzKXtjYXNlIEIuTk9ORTpyZXR1cm4gdDtjYXNlIEIuQVNZTTp7Y29uc3Qgcj0uMDErLjk5KmU7cmV0dXJuIHQ8cj8uNSp0L3I6LjUrLjUqKHQtcikvKDEtcil9Y2FzZSBCLk1JUlJPUjpyZXR1cm4gdGhpcy5fbWlycm9yKHRoaXMuX3dhcnBQaGFzZSh0LGUsQi5BU1lNKSk7Y2FzZSBCLkJFTkRQOnJldHVybiBNYXRoLnBvdyh0LDErMyplKTtjYXNlIEIuQkVORE06cmV0dXJuIE1hdGgucG93KHQsMS8oMSszKmUpKTtjYXNlIEIuQkVORE1QOnJldHVybiBlPC41P3RoaXMuX3dhcnBQaGFzZSh0LDEtMiplLDMpOnRoaXMuX3dhcnBQaGFzZSh0LDIqZS0xLDIpO2Nhc2UgQi5TWU5DOntjb25zdCByPU1hdGgucG93KDE2LGUqKjIpO3JldHVybiB0KnIlMX1jYXNlIEIuUVVBTlQ6e2NvbnN0e246cn09dGhpcy5fdG9CaXRzKGUpO3JldHVybiBLKHQqcikvcn1jYXNlIEIuRk9MRDp7Y29uc3QgaT0xK01hdGgubWF4KDEsVSg3KmUpKTtyZXR1cm4gTWF0aC5hYnMoQXQoaSp0KS0uNSkqMn1jYXNlIEIuUFdNOntjb25zdCByPVQoLjUrLjQ5KigyKmUtMSksMCwxKTtyZXR1cm4gdDxyP3QvciouNTouNSsodC1yKS8oMS1yKSouNX1jYXNlIEIuT1JCSVQ6e2NvbnN0IHI9LjUqZTtyZXR1cm4gSCh0K3IqTWF0aC5zaW4oayozKnQpKX1jYXNlIEIuU1BJTjp7Y29uc3Qgcj0uNSplLHtuOml9PXRoaXMuX3RvQml0cyhlLDEsNik7cmV0dXJuIEgodCtyKk1hdGguc2luKGsqaSp0KSl9Y2FzZSBCLkNIQU9TOntjb25zdCBpPSgzLjcrLjMqZSkqdCooMS10KTtyZXR1cm4gVCgoMS1lKSp0K2UqaSwwLDEpfWNhc2UgQi5QUklNRVM6e2NvbnN0IHI9bz0+e2lmKG88MilyZXR1cm4hMTtpZihvJTI9PT0wKXJldHVybiBvPT09Mjtmb3IobGV0IGE9MzthKioyPD1vO2ErPTIpaWYobyVhPT09MClyZXR1cm4hMTtyZXR1cm4hMH07bGV0e246aX09dGhpcy5fdG9CaXRzKGUsMyk7Zm9yKDshcihpKTspaSsrO3JldHVybiBLKHQqaSkvaX1jYXNlIEIuQklOQVJZOntsZXR7YjpyfT10aGlzLl90b0JpdHMoZSwzKTtyPVUocik7Y29uc3QgaT0xPDxyLG89Syh0KmkpO3JldHVybiBkZShvLHIpL2l9Y2FzZSBCLkJST1dOSUFOOntjb25zdCByPS4yNSplKm1lKDY0KnQsNCk7cmV0dXJuIEgodCtyKX1jYXNlIEIuUkVDSVBST0NBTDp7Y29uc3Qgcj0yKzQqZSxpPXQqcixvPXQrKDEtdCkqcixhPW8+MWUtMTI/aS9vOjA7cmV0dXJuIFQoYSwwLDEpfWNhc2UgQi5XT1JNSE9MRTp7Y29uc3Qgcj1UKC44KmUsMCwxKSxpPS41KigxLXIpLG89LjUqKDErcik7cmV0dXJuIHQ8aT90L2kqLjU6dD5vPy41KigxKyh0LW8pLygxLW8pKTouNX1jYXNlIEIuTE9HSVNUSUM6e2xldCByPXQ7Y29uc3QgaT0zLjYrLjQqZSxvPTErVSgyKmUpO2ZvcihsZXQgYT0wO2E8bzthKyspcj1pKnIqKDEtcik7cmV0dXJuIFQociwwLDEpfWNhc2UgQi5TSUdNT0lEOntjb25zdCByPTErMTAqZSxpPXQtLjUsbz0xLygxK01hdGguZXhwKC1yKmkpKSxhPTEvKDErTWF0aC5leHAoLjUqcikpLHU9MS8oMStNYXRoLmV4cCgtLjUqcikpO3JldHVybihvLWEpLyh1LWEpfWNhc2UgQi5GUkFDVEFMOntjb25zdCByPS41Kk1hdGguc2luKGsqdCkqZTtyZXR1cm4gSCh0K3IpfWNhc2UgQi5GTElQOnJldHVybiB0O2RlZmF1bHQ6cmV0dXJuIHR9fV9zYW1wbGVGcmFtZSh0LGUpe2NvbnN0IHM9dC5sZW5ndGgscj1lKnM7bGV0IGk9cnwwO2k+PXMmJihpPTApO2NvbnN0IG89ci1pLGE9dFtpXTtsZXQgdT1pKzE7dT49cyYmKHU9MCk7Y29uc3QgYz10W3VdO3JldHVybiBhKyhjLWEpKm99X2Nob29zZU1pcCh0KXtjb25zdCBlPVQodCwxZS02LDY0KTtsZXQgcz0wO2Zvcig7cysxPCh0aGlzLnRhYmxlcz8ubGVuZ3RofHwxKSYmZTx0aGlzLnRhYmxlc1tzXVswXS5sZW5ndGgvODspcysrO3JldHVybiBzfXByb2Nlc3ModCxlLHMpe2lmKGN1cnJlbnRUaW1lPj1zLmVuZFswXSlyZXR1cm4hMTtpZihjdXJyZW50VGltZTw9cy5iZWdpblswXSlyZXR1cm4hMDtjb25zdCByPWVbMF1bMF0saT1lWzBdWzFdfHxlWzBdWzBdO2lmKCF0aGlzLnRhYmxlcylyZXR1cm4gci5maWxsKDApLGkhPT1yJiZpLnNldChyKSwhMDtjb25zdCBvPXMudm9pY2VzWzBdO2ZvcihsZXQgYT0wO2E8ci5sZW5ndGg7YSsrKXtjb25zdCB1PWIocy5kZXR1bmUsYSksYz1iKHMuZnJlcXNwcmVhZCxhKSxmPVQoYihzLnBvc2l0aW9uLGEpLDAsMSkqKHRoaXMubnVtRnJhbWVzLTEpLGQ9ZnwwLGw9Zi1kLHA9VChiKHMud2FycCxhKSwwLDEpLG09YihzLndhcnBNb2RlLGEpLEk9VChiKHMucGhhc2VyYW5kLGEpLDAsMSksZz1vPjE/VChiKHMucGFuc3ByZWFkLGEpLDAsMSk6MCx2PU1hdGguc3FydCguNS0uNSpnKSx3PU1hdGguc3FydCguNSsuNSpnKTtsZXQgUD1iKHMuZnJlcXVlbmN5LGEpO1A9WihQLHUvMTAwKTtjb25zdCBTPTEvTWF0aC5zcXJ0KG8pLFY9TnQobyxjKTtmb3IobGV0IE09MDtNPG87TSsrKXtjb25zdCB4PShNJjEpPT0xO2xldCB5PXYsQT13O3gmJih5PXcsQT12KTtjb25zdCBOPVooUCxWKE0pKSpxLEU9dGhpcy5fY2hvb3NlTWlwKE4pLE89dGhpcy50YWJsZXNbRV07dGhpcy5waGFzZVtNXT10aGlzLnBoYXNlW01dPz9NYXRoLnJhbmRvbSgpKkk7Y29uc3QgRj10aGlzLl93YXJwUGhhc2UodGhpcy5waGFzZVtNXSxwLG0pLEQ9dGhpcy5fc2FtcGxlRnJhbWUoT1tkXSxGKSxMPXRoaXMuX3NhbXBsZUZyYW1lKE9bTWF0aC5taW4odGhpcy5udW1GcmFtZXMtMSxkKzEpXSxGKTtsZXQgQz1VdChELEwsbCk7bT09PUIuRkxJUCYmdGhpcy5waGFzZVtNXTxwJiYoQz0tQyksclthXSs9Qyp5KlMsaVthXSs9QypBKlMsdGhpcy5waGFzZVtNXT1IKHRoaXMucGhhc2VbTV0rTil9fXJldHVybiEwfX1yZXR1cm4gcmVnaXN0ZXJQcm9jZXNzb3IoIndhdmV0YWJsZS1vc2NpbGxhdG9yLXByb2Nlc3NvciIsdmUpLGZ0LldhcnBNb2RlPUIsT2JqZWN0LmRlZmluZVByb3BlcnR5KGZ0LFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6Ik1vZHVsZSJ9KSxmdH0pKHt9KTsK";let audioContext;const setDefaultAudioContext=()=>(audioContext=new AudioContext,audioContext),getAudioContext=()=>audioContext||setDefaultAudioContext();function getAudioContextCurrentTime(){return getAudioContext().currentTime}let noiseCache={};function getNoiseBuffer(e,t){const o=getAudioContext();if(noiseCache[e])return noiseCache[e];const a=2*o.sampleRate,u=o.createBuffer(1,a,o.sampleRate),l=u.getChannelData(0);let p=0,f,d,g,b,S,E,F;f=d=g=b=S=E=F=0;for(let $=0;$<a;$++)if(e==="white")l[$]=Math.random()*2-1;else if(e==="brown"){let k=Math.random()*2-1;l[$]=(p+.02*k)/1.02,p=l[$]}else if(e==="pink"){let k=Math.random()*2-1;f=.99886*f+k*.0555179,d=.99332*d+k*.0750759,g=.969*g+k*.153852,b=.8665*b+k*.3104856,S=.55*S+k*.5329522,E=-.7616*E-k*.016898,l[$]=f+d+g+b+S+E+F+k*.5362,l[$]*=.11,F=k*.115926}else if(e==="crackle"){const k=t*.01;Math.random()<k?l[$]=Math.random()*2-1:l[$]=0}return e!=="crackle"&&(noiseCache[e]=u),u}function getNoiseOscillator(e="white",t,o=.02){const u=getAudioContext().createBufferSource();return u.buffer=getNoiseBuffer(e,o),u.loop=!0,u.start(t),{node:u,stop:l=>u.stop(l)}}function getNoiseMix(e,t,o){const a=getNoiseOscillator("pink",o),u=drywet(e,a.node,t);return a.node.onended=()=>u.onended(),{node:u.node,stop:l=>a?.stop(l)}}const noises=["pink","white","brown","crackle"];function gainNode(e){const t=getAudioContext().createGain();return t.gain.value=e,t}function effectSend(e,t,o){const a=gainNode(o);return e.connect(a),a.connect(t),a}const getSlope=(e,t,o,a)=>a-o===0?0:(t-e)/(a-o);function getWorklet(e,t,o,a){const u=new AudioWorkletNode(e,t,a);return Object.entries(o).forEach(([l,p])=>{p!==void 0&&(u.parameters.get(l).value=p)}),u}const getParamADSR=(e,t,o,a,u,l,p,f,d,g="exponential")=>{t=nanFallback(t),o=nanFallback(o),a=nanFallback(a),u=nanFallback(u);const b=g==="exponential"?"exponentialRampToValueAtTime":"linearRampToValueAtTime";g==="exponential"&&(l=l===0?.001:l,p=p===0?.001:p);const S=p-l,E=p,F=l+a*S,$=d-f,k=B=>{let V;if(t>B){let U=getSlope(l,E,0,t);V=B*U+(l>E?l:0)}else V=(B-t)*getSlope(E,F,0,o)+E;return g==="exponential"&&(V=V||.001),V};e.setValueAtTime(l,f),t>$?e[b](k($),d):t+o>$?(e[b](k(t),f+t),e[b](k($),d)):(e[b](k(t),f+t),e[b](k(t+o),f+t+o),e.setValueAtTime(F,d)),e[b](l,d+u)};function getModulationShapeInput(e){return typeof e=="number"?e%5:{tri:0,triangle:0,sine:1,ramp:2,saw:3,square:4}[e]??0}function getLfo(e,t,o,a={}){const{shape:u=0,...l}=a,{dcoffset:p=-.5,depth:f=1}=a,d={frequency:1,depth:f,skew:.5,phaseoffset:0,time:t,begin:t,end:o,shape:getModulationShapeInput(u),dcoffset:p,min:p*f,max:p*f+f,curve:1,...l};return getWorklet(e,"lfo-processor",d)}function getCompressor(e,t,o,a,u,l){const p={threshold:t??-3,ratio:o??10,knee:a??10,attack:u??.005,release:l??.05};return new DynamicsCompressorNode(e,p)}const getADSRValues=(e,t="linear",o)=>{const[p,f,d,g]=e;if(p==null&&f==null&&d==null&&g==null)return o??[.001,.001,1,.01];const b=d??(p!=null&&f==null||p==null&&f==null?1:.001);return[Math.max(p??0,.001),Math.max(f??0,.001),Math.min(b,1),Math.max(g??0,.01)]};function getParamLfo(e,t,o,a,u){let{defaultDepth:l=1,depth:p,dcoffset:f,...d}=u;p==null&&(p=Object.values(d).some(S=>S!=null)?l:0);let g;return p&&(g=getLfo(e,o,a,{depth:p,dcoffset:f,...d}),g.connect(t)),g}function applyParameterModulators(e,t,o,a,u,l){let{amount:p,offset:f,defaultAmount:d=1,curve:g="linear",values:b,holdEnd:S,defaultValues:E}=u;p==null&&(p=b.some(U=>U!=null)?d:0);const F=f??0,$=p+F;if(Math.abs($-F)){const[V,U,ee,j]=getADSRValues(b,g,E);getParamADSR(t,V,U,ee,j,F,$,o,S,g)}const B=getParamLfo(e,t,o,a,l);return{lfo:B,disconnect:()=>B?.disconnect()}}function createFilter(e,t,o,a,u,l){let{frequency:p,anchor:f,env:d,type:g,model:b,q:S=1,drive:E=.69,depth:F,depthfrequency:$,dcoffset:k=-.5,skew:B,shape:V,rate:U,sync:ee}=a,j,O;b==="ladder"?(O=getWorklet(e,"ladder-processor",{frequency:p,q:S,drive:E}),j=O.parameters.get("frequency")):(O=e.createBiquadFilter(),O.type=g,O.Q.value=S,O.frequency.value=p,j=O.frequency);const q=[a.attack,a.decay,a.sustain,a.release],[te,re,de,ie]=getADSRValues(q,"exponential",[.005,.14,0,.1]);if([...q,d].some(he=>he!==void 0)){d=nanFallback(d,1,!0),f=nanFallback(f,0,!0);const he=Math.abs(d),Ae=he*f;let ye=clamp(2**-Ae*p,0,2e4),Me=clamp(2**(he-Ae)*p,0,2e4);d<0&&([ye,Me]=[Me,ye]),getParamADSR(j,te,re,de,ie,ye,Me,t,o,"exponential")}ee!=null&&(U=u*ee);const pe=[F,$,B,V,U].some(he=>he!==void 0);let le;if(pe){F=F??1;const he=l/u,ye={depth:$??(F??1)*p,dcoffset:k,skew:B,shape:V,frequency:U??u,min:-p+30,max:2e4-p,time:he,curve:1};le=getParamLfo(e,j,t,o,ye)}return{filter:O,lfo:le}}let wetfade=e=>e<.5?1:1-(e-.5)/.5;function drywet(e,t,o=0){const a=getAudioContext();if(!o)return e;let u=a.createGain(),l=a.createGain();e.connect(u),t.connect(l),u.gain.value=wetfade(o),l.gain.value=wetfade(1-o);let p=a.createGain();return u.connect(p),l.connect(p),{node:p,onended:()=>{u.disconnect(p),l.disconnect(p),e.disconnect(u),t.disconnect(l)}}}let curves=["linear","exponential"];function getPitchEnvelope(e,t,o,a){if((t.pattack??t.pdecay??t.psustain??t.prelease??t.penv)===void 0)return;const l=nanFallback(t.penv,1,!0),p=curves[t.pcurve??0];let[f,d,g,b]=getADSRValues([t.pattack,t.pdecay,t.psustain,t.prelease],p,[.2,.001,1,.001]),S=t.panchor??g;const E=l*100,F=0-E*S,$=E-E*S;getParamADSR(e,f,d,g,b,F,$,o,a,p)}function getVibratoOscillator(e,t,o){const{vibmod:a=.5,vib:u}=t;let l;if(u>0){l=getAudioContext().createOscillator(),l.frequency.value=u;const p=getAudioContext().createGain();return p.gain.value=a*100,l.connect(p),p.connect(e),l.onended=()=>{p.disconnect(e),l.disconnect(p)},l.start(o),l}}function scheduleAtTime(e,t,o=getAudioContext()){const a=o.currentTime;webAudioTimeout(o,e,a,t)}function webAudioTimeout(e,t,o,a){const u=new ConstantSourceNode(e),l=gainNode(0);return l.connect(e.destination),u.connect(l),u.onended=()=>{try{l.disconnect()}catch{}try{u.disconnect()}catch{}t()},u.start(o),u.stop(a),u}const mod$2=(e,t=1,o="sine")=>{const a=getAudioContext();let u;noises.includes(o)?(u=a.createBufferSource(),u.buffer=getNoiseBuffer(o,2),u.loop=!0):(u=a.createOscillator(),u.type=o,u.frequency.value=e),u.start();const l=gainNode(t);return u.connect(l),{node:l,stop:p=>u.stop(p),osc:u}},fm=(e,t,o,a="sine")=>{const l=e.value*t,p=l*o;return mod$2(l,p,a)};function applyFM(e,t,o){const{fmh:a=1,fmi:u,fmenv:l="exp",fmattack:p,fmdecay:f,fmsustain:d,fmrelease:g,fmvelocity:b,fmwave:S="sine",duration:E}=t;let F,$=()=>{};if(u){const B=getAudioContext().createGain(),V=fm(e,a,u,S);if(F=V.node,$=V.stop,![p,f,d,g,b].some(U=>U!==void 0))F.connect(e);else{const[U,ee,j,O]=getADSRValues([p,f,d,g]),q=o+E;getParamADSR(B.gain,U,ee,j,O,0,1,o,q,l==="exp"?"exponential":"linear"),F.connect(B),B.connect(e)}V.osc.onended=()=>{B.disconnect(),F.disconnect(),V.osc.disconnect()}}return{stop:$}}const __squash=e=>e/(1+e),_mod=(e,t)=>(e%t+t)%t,_scurve=(e,t)=>(1+t)*e/(1+t*Math.abs(e)),_soft=(e,t)=>Math.tanh(e*(1+t)),_hard=(e,t)=>clamp((1+t)*e,-1,1),_fold=(e,t)=>{let o=(1+.5*t)*e;const a=_mod(o+1,4);return 1-Math.abs(a-2)},_sineFold=(e,t)=>Math.sin(Math.PI/2*_fold(e,t)),_cubic=(e,t)=>{const o=__squash(Math.log1p(t)),a=(e-o/3*e*e*e)/(1-o/3);return _soft(a,t)},_diode=(e,t,o=!1)=>{const a=1+2*t,l=.07*__squash(Math.log1p(t)),p=_soft(e+l,2*t),f=_soft(o?l:-e+l,2*t),d=p-f,g=1/Math.cosh(a*l),b=g*g,S=Math.max(1e-8,(o?1:2)*a*b);return _soft(d/S,t)},_asym=(e,t)=>_diode(e,t,!0),_chebyshev=(e,t)=>{const o=10*Math.log1p(t);let a=1,u=e,l,p=0;for(let f=1;f<64;f++){if(f<2){p+=f==0?a:u;continue}l=2*e*a-u,u=a,a=l,f%2===0&&(p+=Math.min(1.3*o/f,2)*l)}return _soft(p,o/20)},distortionAlgorithms={scurve:_scurve,soft:_soft,hard:_hard,cubic:_cubic,diode:_diode,asym:_asym,fold:_fold,sinefold:_sineFold,chebyshev:_chebyshev},_algoNames=Object.freeze(Object.keys(distortionAlgorithms)),getDistortionAlgorithm=e=>{let t=e;typeof e=="string"&&(t=_algoNames.indexOf(e),t===-1&&(logger$1(`[superdough] Could not find waveshaping algorithm ${e}.
        Available options are ${_algoNames.join(", ")}.
        Defaulting to ${_algoNames[0]}.`),t=0));const o=_algoNames[t%_algoNames.length];return distortionAlgorithms[o]},getDistortion=(e,t,o)=>getWorklet(getAudioContext(),"distort-processor",{distort:e,postgain:t},{processorOptions:{algorithm:o}}),getFrequencyFromValue=(e,t=36)=>{let{note:o,freq:a,octave:u=0}=e;return o=o||t,typeof o=="string"&&(o=noteToMidi(o)),!a&&typeof o=="number"&&(a=midiToFreq$1(o)),a*=Math.pow(2,u),Number(a)},destroyAudioWorkletNode=e=>{e!=null&&(e.disconnect(),e.parameters.get("end")?.setValueAtTime(0,0))};let clean=Symbol("clean"),listenerQueue=[],lqIndex=0;const QUEUE_ITEMS_PER_LISTENER=4;let atom=e=>{let t=[],o={get(){return o.lc||o.listen(()=>{})(),o.value},lc:0,listen(a){return o.lc=t.push(a),()=>{for(let l=lqIndex+QUEUE_ITEMS_PER_LISTENER;l<listenerQueue.length;)listenerQueue[l]===a?listenerQueue.splice(l,QUEUE_ITEMS_PER_LISTENER):l+=QUEUE_ITEMS_PER_LISTENER;let u=t.indexOf(a);~u&&(t.splice(u,1),--o.lc||o.off())}},notify(a,u){let l=!listenerQueue.length;for(let p of t)listenerQueue.push(p,o.value,a,u);if(l){for(lqIndex=0;lqIndex<listenerQueue.length;lqIndex+=QUEUE_ITEMS_PER_LISTENER)listenerQueue[lqIndex](listenerQueue[lqIndex+1],listenerQueue[lqIndex+2],listenerQueue[lqIndex+3]);listenerQueue.length=0}},off(){},set(a){let u=o.value;u!==a&&(o.value=a,o.notify(u))},subscribe(a){let u=o.listen(a);return a(o.value),u},value:e};return process.env.NODE_ENV!=="production"&&(o[clean]=()=>{t=[],o.lc=0,o.off()}),o},map=(e={})=>{let t=atom(e);return t.setKey=function(o,a){let u=t.value;typeof a>"u"&&o in t.value?(t.value={...t.value},delete t.value[o],t.notify(u,o)):t.value[o]!==a&&(t.value={...t.value,[o]:a},t.notify(u,o))},t};const bufferCache$1={},loadCache$2={},getCachedBuffer=e=>bufferCache$1[e];function humanFileSize$1(e,t){var o=1024;if(e<o)return e+" B";var a=["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],u=-1;do e/=o,++u;while(e>=o);return e.toFixed(1)+" "+a[u]}function getSampleInfo(e,t){const{speed:o=1}=e,{transpose:a,url:u,index:l,midi:p,label:f}=getCommonSampleInfo(e,t);let d=Math.abs(o)*Math.pow(2,a/12);return{transpose:a,url:u,index:l,midi:p,label:f,playbackRate:d}}const getSampleBuffer=async(e,t,o)=>{let{url:a,label:u,playbackRate:l}=getSampleInfo(e,t);o&&(a=await o(a));const p=getAudioContext(),f=await loadBuffer$1(a,p,u);return e.unit==="c"&&(l=l*f.duration),{buffer:f,playbackRate:l}},getSampleBufferSource=async(e,t,o)=>{let{buffer:a,playbackRate:u}=await getSampleBuffer(e,t,o);e.speed<0&&(a=reverseBuffer(a));const p=getAudioContext().createBufferSource();p.buffer=a,p.playbackRate.value=u;const{loopBegin:f=0,loopEnd:d=1,begin:g=0,end:b=1}=e,S=g*p.buffer.duration;e.loop&&(p.loop=!0,p.loopStart=f*p.buffer.duration-S,p.loopEnd=d*p.buffer.duration-S);const F=p.buffer.duration/p.playbackRate.value,$=(b-g)*F;return{bufferSource:p,offset:S,bufferDuration:F,sliceDuration:$}},loadBuffer$1=(e,t,o,a=0)=>{const u=o?`sound "${o}:${a}"`:"sample";if(e=e.replace("#","%23"),!loadCache$2[e]){logger$1(`[sampler] load ${u}..`,"load-sample",{url:e});const l=Date.now();loadCache$2[e]=fetch(e).then(p=>p.arrayBuffer()).then(async p=>{const f=Date.now()-l,d=humanFileSize$1(p.byteLength);logger$1(`[sampler] load ${u}... done! loaded ${d} in ${f}ms`,"loaded-sample",{url:e});const g=await t.decodeAudioData(p);return bufferCache$1[e]=g,g})}return loadCache$2[e]};function reverseBuffer(e){const t=getAudioContext(),o=t.createBuffer(e.numberOfChannels,e.length,t.sampleRate);for(let a=0;a<e.numberOfChannels;a++)o.copyToChannel(e.getChannelData(a).slice().reverse(),a,a);return o}const getLoadedBuffer=e=>bufferCache$1[e];function resolveSpecialPaths(e){if(e.startsWith("bubo:")){const[t,o]=e.split(":");e=`github:Bubobubobubobubo/dough-${o}`}return e}function githubPath$2(e,t=""){if(!e.startsWith("github:"))throw new Error('expected "github:" at the start of pseudoUrl');let o=e.slice(7);o=o.endsWith("/")?o.slice(0,-1):o;let a=o.split("/"),u=a[0],l=a.length>=2?a[1]:"samples",p=a.length>=3?a[2]:"main",f=a.slice(3);return f.push(t||""),f=f.join("/"),`https://raw.githubusercontent.com/${u}/${l}/${p}/${f}`}const processSampleMap=(e,t,o=e._base||"")=>Object.entries(e).forEach(([a,u])=>{if(typeof u=="string"&&(u=[u]),typeof u!="object")throw new Error("wrong sample map format for "+a);o=u._base||o,o=resolveSpecialPaths(o),o.startsWith("github:")&&(o=githubPath$2(o,""));const l=p=>o+p;Array.isArray(u)?u=u.map(l):u=Object.fromEntries(Object.entries(u).map(([p,f])=>[p,(typeof f=="string"?[f]:f).map(l)])),t(a,u)});let resourcePrefixHandlers={};function registerSamplesPrefix(e,t){resourcePrefixHandlers[e]=t}function getSamplesPrefixHandler(e){const t=Object.entries(resourcePrefixHandlers).find(([o])=>e.startsWith(o));if(t)return t[1]}async function fetchSampleMap$1(e){const t=getSamplesPrefixHandler(e);if(t)return t(e);if(e=resolveSpecialPaths(e),e.startsWith("github:")&&(e=githubPath$2(e,"strudel.json")),e.startsWith("local:")&&(e="http://localhost:5432"),e.startsWith("shabda:")){let[u,l]=e.split("shabda:");e=`https://shabda.ndre.gr/${l}.json?strudel=1`}if(e.startsWith("shabda/speech")){let[u,l]=e.split("shabda/speech");l=l.startsWith("/")?l.substring(1):l;let[p,f]=l.split(":"),d="f",g="en-GB";p&&([g,d]=p.split("/")),e=`https://shabda.ndre.gr/speech/${f}.json?gender=${d}&language=${g}&strudel=1'`}if(typeof fetch!="function")return;const o=getBaseURL(e);if(typeof fetch>"u")return;const a=await fetch(e).then(u=>u.json()).catch(u=>{throw console.error(u),new Error(`error loading "${e}"`)});return[a,a._base||o]}const samples=async(e,t=e._base||"",o={})=>{if(typeof e=="string"){const[l,p]=await fetchSampleMap$1(e);return samples(l,t||p,o)}const{prebake:a,tag:u}=o;processSampleMap(e,(l,p)=>{registerSampleSource(l,p,{baseUrl:t,prebake:a,tag:u})},t)},cutGroups=[];async function onTriggerSample(e,t,o,a,u){let{s:l,nudge:p=0,cut:f,loop:d,clip:g=void 0,n:b=0,speed:S=1,duration:E}=t;if(S===0)return;const F=getAudioContext();let[$,k,B,V]=getADSRValues([t.attack,t.decay,t.sustain,t.release]);const{bufferSource:U,sliceDuration:ee,offset:j}=await getSampleBufferSource(t,a,u);if(F.currentTime>e){logger$1(`[sampler] still loading sound "${l}:${b}"`,"highlight");return}if(!U){logger$1(`[sampler] could not load "${l}:${b}"`,"error");return}let O=getVibratoOscillator(U.detune,t,e);const q=e+p;U.start(q,j);const te=F.createGain(),re=U.connect(te);g==null&&d==null&&t.release==null&&(E=ee);let de=e+E;getParamADSR(re.gain,$,k,B,V,0,1,e,de,"linear"),getPitchEnvelope(U.detune,t,e,de);const ie=F.createGain();re.connect(ie),U.onended=function(){U.disconnect(),O?.stop(),re.disconnect(),ie.disconnect(),o()};let me=de+V+.01;U.stop(me);const le={node:ie,bufferSource:U,stop:he=>{U.stop(he)}};if(f!==void 0){const he=cutGroups[f];he&&(he.node.gain.setValueAtTime(1,q),he.node.gain.linearRampToValueAtTime(0,q+.01)),cutGroups[f]=le}return le}function registerSample(e,t,o){registerSound(e,(a,u,l)=>onTriggerSample(a,u,l,t),{type:"sample",samples:t,...o})}function registerSampleSource(e,t,o){e.startsWith("wt_")?registerWaveTable(e,t,o):registerSample(e,t,o)}let hasChanged=(e,t)=>e!==void 0&&e!==t;class Orbit{reverbNode;delayNode;output;summingNode;djfNode;audioContext;constructor(t){this.audioContext=t,this.output=new GainNode(t,{gain:1,channelCount:2,channelCountMode:"explicit"}),this.summingNode=new GainNode(t,{gain:1,channelCount:2,channelCountMode:"explicit"}),this.summingNode.connect(this.output)}disconnect(){this.output.disconnect(),this.summingNode.disconnect(),this.delayNode?.disconnect(),this.reverbNode?.disconnect()}getDjf(t,o=0){this.djfNode==null&&(this.djfNode=getWorklet(this.audioContext,"djf-processor",{value:t}),this.summingNode.disconnect(),this.summingNode.connect(this.djfNode),this.djfNode.connect(this.output)),this.djfNode.parameters.get("value").setValueAtTime(t,o)}getDelay(t=0,o=.5,a){return o=clamp(o,0,.98),this.delayNode==null&&(this.delayNode=this.audioContext.createFeedbackDelay(1,t,o),this.delayNode.connect(this.summingNode),this.delayNode.start?.(a)),this.delayNode.delayTime.value!==t&&this.delayNode.delayTime.setValueAtTime(t,a),this.delayNode.feedback.value!==o&&this.delayNode.feedback.setValueAtTime(o,a),this.delayNode}getReverb(t,o,a,u,l,p,f){return this.reverbNode==null&&(this.reverbNode=this.audioContext.createReverb(t,o,a,u,l,p,f),this.reverbNode.connect(this.summingNode)),(hasChanged(t,this.reverbNode.duration)||hasChanged(o,this.reverbNode.fade)||hasChanged(a,this.reverbNode.lp)||hasChanged(u,this.reverbNode.dim)||hasChanged(p,this.reverbNode.irspeed)||hasChanged(f,this.reverbNode.irbegin)||this.reverbNode.ir!==l)&&this.reverbNode.generate(t,o,a,u,l,p,f),this.reverbNode}sendReverb(t,o){return effectSend(t,this.reverbNode,o)}sendDelay(t,o){return effectSend(t,this.delayNode,o)}duck(t,o=0,a=.1,u=1){const l=o,p=Math.max(a,.002),f=this.output.gain;webAudioTimeout(this.audioContext,()=>{const d=this.audioContext.currentTime,g=f.value;f.cancelScheduledValues(d),f.setValueAtTime(g,d);const b=Math.max(t,d),S=clamp(1-Math.sqrt(u),.01,g);f.exponentialRampToValueAtTime(S,b+l),f.exponentialRampToValueAtTime(1,b+l+p)},0,t-.01)}connectToOutput(t){t.connect(this.summingNode)}}class SuperdoughOutput{channelMerger;destinationGain;constructor(t){this.audioContext=t,this.initializeAudio()}initializeAudio(){const t=this.audioContext,o=t.destination.maxChannelCount;this.audioContext.destination.channelCount=o,this.channelMerger=new ChannelMergerNode(t,{numberOfInputs:t.destination.channelCount}),this.destinationGain=new GainNode(t),this.channelMerger.connect(this.destinationGain),this.destinationGain.connect(t.destination)}reset(){this.disconnect(),this.initializeAudio()}disconnect(){this.channelMerger.disconnect(),this.destinationGain.disconnect(),this.destinationGain=null,this.channelMerger=null}connectToDestination=(t,o=[0,1])=>{const a=new StereoPannerNode(this.audioContext);t.connect(a);const u=new ChannelSplitterNode(this.audioContext,{numberOfOutputs:a.channelCount});a.connect(u),o.forEach((l,p)=>{u.connect(this.channelMerger,p%a.channelCount,l%this.audioContext.destination.channelCount)})}}class SuperdoughAudioController{audioContext;output;nodes={};constructor(t){this.audioContext=t,this.output=new SuperdoughOutput(t)}reset(){Array.from(this.nodes).forEach(t=>{t.disconnect()}),this.nodes={},this.output.reset()}duck(t,o,a=0,u=.1,l=1){const p=[t].flat(),f=[a].flat(),d=[u].flat(),g=[l].flat();p.forEach((b,S)=>{const E=this.nodes[b];if(E==null){errorLogger(new Error(`duck target orbit ${b} does not exist`),"superdough");return}const F=f[S]??f[0],$=Math.max(d[S]??d[0],.002),k=g[S]??g[0];E.duck(o,F,$,k)})}getOrbit(t,o){return this.nodes[t]==null&&(this.nodes[t]=new Orbit(this.audioContext),this.output.connectToDestination(this.nodes[t].output,o)),this.nodes[t]}}const DEFAULT_MAX_POLYPHONY=128,DEFAULT_AUDIO_DEVICE_NAME="System Standard";let maxPolyphony=DEFAULT_MAX_POLYPHONY;function setMaxPolyphony(e){maxPolyphony=parseInt(e)??DEFAULT_MAX_POLYPHONY}let multiChannelOrbits=!1;function setMultiChannelOrbits(e){multiChannelOrbits=e==!0}const soundMap$1=map();function registerSound(e,t,o={}){e=e.toLowerCase().replace(/\s+/g,"_"),soundMap$1.setKey(e,{onTrigger:t,data:o})}let gainCurveFunc=e=>e;function applyGainCurve(e){return gainCurveFunc(e)}function setGainCurve(e){gainCurveFunc=e}function aliasBankMap(e){for(const o in e)e[o.toLowerCase()]=e[o];const t=soundMap$1.get();for(const o in t){const[a,u]=o.split("_");if(!u)continue;const l=e[a];if(l){if(typeof l=="string")t[`${l}_${u}`.toLowerCase()]=t[o];else if(Array.isArray(l))for(const p of l)t[`${p}_${u}`.toLowerCase()]=t[o]}}soundMap$1.set({...t})}async function aliasBankPath(e){const o=await(await fetch(e)).json();aliasBankMap(o)}async function aliasBank(...e){switch(e.length){case 1:return typeof e[0]=="string"?aliasBankPath(e[0]):aliasBankMap(e[0]);case 2:return aliasBankMap({[e[0]]:e[1]});default:throw new Error("aliasMap expects 1 or 2 arguments, received "+e.length)}}function soundAlias(e,t){if(getSound(e)==null){logger$1("soundAlias: original sound not found");return}soundMap$1.setKey(t,getSound(e))}function getSound(e){return typeof e!="string"?(console.warn(`getSound: expected string got "${e}". fall back to triangle`),soundMap$1.get().triangle):soundMap$1.get()[e.toLowerCase()]}const getAudioDevices=async()=>{await navigator.mediaDevices.getUserMedia({audio:!0});let e=await navigator.mediaDevices.enumerateDevices();e=e.filter(o=>o.kind==="audiooutput"&&o.deviceId!=="default");const t=new Map;return t.set(DEFAULT_AUDIO_DEVICE_NAME,""),e.forEach(o=>{t.set(o.label,o.deviceId)}),t};let defaultDefaultValues={s:"triangle",gain:.8,postgain:1,density:".03",channels:[1,2],phaserdepth:.75,shapevol:1,distortvol:1,distorttype:0,delay:0,byteBeatExpression:"0",delayfeedback:.5,delaysync:3/16,orbit:1,i:1,velocity:1,fft:8};const defaultDefaultDefaultValues=Object.freeze({...defaultDefaultValues});function setDefault(e,t){defaultDefaultValues[e]=t}function resetDefaults(){defaultDefaultValues={...defaultDefaultDefaultValues}}let defaultControls=new Map(Object.entries(defaultDefaultValues));function setDefaultValue(e,t){defaultControls.set(e,t)}function getDefaultValue(e){return defaultControls.get(e)}function setDefaultValues(e){Object.keys(e).forEach(t=>{setDefaultValue(t,e[t])})}function resetDefaultValues(){defaultControls=new Map(Object.entries(defaultDefaultValues))}function setVersionDefaults(e){resetDefaultValues(),e==="1.0"&&setDefaultValue("fanchor",.5)}const resetLoadedSounds=()=>soundMap$1.set({});let externalWorklets=[];function registerWorklet(e){externalWorklets.push(e)}let workletsLoading;function loadWorklets(){if(!workletsLoading){const e=getAudioContext(),t=externalWorklets.concat([workletsUrl]);workletsLoading=Promise.all(t.map(o=>e.audioWorklet.addModule(o)))}return workletsLoading}async function initAudio(e={}){const{disableWorklets:t=!1,maxPolyphony:o,audioDeviceName:a=DEFAULT_AUDIO_DEVICE_NAME,multiChannelOrbits:u=!1}=e;if(setMaxPolyphony(o),setMultiChannelOrbits(u),typeof window>"u")return;const l=getAudioContext();if(a!=null&&a!=DEFAULT_AUDIO_DEVICE_NAME)try{const f=(await getAudioDevices()).get(a),d=(f??"").length>0;l.sinkId!==f&&d&&await l.setSinkId(f),logger$1(`[superdough] Audio Device set to ${a}, it might take a few seconds before audio plays on all output channels`)}catch{logger$1("[superdough] failed to set audio interface","warning")}if(await l.resume(),t){logger$1("[superdough]: AudioWorklets disabled with disableWorklets");return}try{await loadWorklets(),logger$1("[superdough] AudioWorklets loaded")}catch(p){console.warn("could not load AudioWorklet effects",p)}logger$1("[superdough] ready")}let audioReady;async function initAudioOnFirstClick(e){return audioReady||(audioReady=new Promise(t=>{document.addEventListener("mousedown",async function o(){document.removeEventListener("mousedown",o),await initAudio(e),t()})})),audioReady}let controller;function getSuperdoughAudioController(){return controller==null&&(controller=new SuperdoughAudioController(getAudioContext())),controller}function connectToDestination(e,t){getSuperdoughAudioController().output.connectToDestination(e,t)}function getPhaser(e,t,o=1,a=.5,u=1e3,l=2e3){const p=getAudioContext(),f=getLfo(p,e,t,{frequency:o,depth:l*2}),d=2;let g=0;const b=[];for(let S=0;S<d;S++){const E=p.createBiquadFilter();E.type="notch",E.gain.value=1,E.frequency.value=u+g,E.Q.value=2-Math.min(Math.max(a*2,0),1.9),f.connect(E.detune),g+=282,S>0&&b[S-1].connect(E),b.push(E)}return{phaser:b[b.length-1],lfo:f}}function getFilterType(e){e=e??0;const t=["12db","ladder","24db"];return typeof e=="number"?t[Math.floor(_mod$1(e,t.length))]:e}let analysers={},analysersData={};function getAnalyserById(e,t=1024,o=.5){if(!analysers[e]){const a=getAudioContext().createAnalyser();a.fftSize=t,a.smoothingTimeConstant=o,analysers[e]=a,analysersData[e]=new Float32Array(analysers[e].frequencyBinCount)}return analysers[e].fftSize!==t&&(analysers[e].fftSize=t,analysersData[e]=new Float32Array(analysers[e].frequencyBinCount)),analysers[e]}function getAnalyzerData(e="time",t=1){const o={time:()=>analysers[t]?.getFloatTimeDomainData(analysersData[t]),frequency:()=>analysers[t]?.getFloatFrequencyData(analysersData[t])}[e];if(!o)throw new Error(`getAnalyzerData: ${e} not supported. use one of ${Object.keys(o).join(", ")}`);return o(),analysersData[t]}function resetGlobalEffects(){controller?.reset(),analysers={},analysersData={}}let activeSoundSources=new Map;function mapChannelNumbers(e){return(Array.isArray(e)?e:[e]).map(t=>t-1)}const superdough=async(e,t,o,a=.5,u=.5)=>{const l=getAudioContext(),p=getSuperdoughAudioController();let{stretch:f}=e;if(f!=null&&(t=t-.04),typeof e!="object")throw new Error(`expected hap.value to be an object, but got "${e}". Hint: append .note() or .s() to the end`,"error");if(e.duration=o,t<l.currentTime){console.warn(`[superdough]: cannot schedule sounds in the past (target: ${t.toFixed(2)}, now: ${l.currentTime.toFixed(2)})`);return}let{tremolo:d,tremolosync:g,tremolodepth:b=1,tremoloskew:S,tremolophase:E=0,tremoloshape:F,s:$=getDefaultValue("s"),bank:k,source:B,gain:V=getDefaultValue("gain"),postgain:U=getDefaultValue("postgain"),density:ee=getDefaultValue("density"),duckorbit:j,duckonset:O,duckattack:q,duckdepth:te,djf:re,fanchor:de=getDefaultValue("fanchor"),release:ie=0,phaserrate:me,phaserdepth:pe=getDefaultValue("phaserdepth"),phasersweep:le,phasercenter:he,coarse:Ae,crush:ye,dry:Me,shape:ge,shapevol:Le=getDefaultValue("shapevol"),distort:Xe,distortvol:We=getDefaultValue("distortvol"),distorttype:ue=getDefaultValue("distorttype"),pan:De,vowel:Qe,delay:Re=getDefaultValue("delay"),delayfeedback:$e=getDefaultValue("delayfeedback"),delaysync:Ze=getDefaultValue("delaysync"),delaytime:we,orbit:Ie=getDefaultValue("orbit"),room:nt,roomfade:tt,roomlp:Oe,roomdim:mt,roomsize:je,ir:ut,irspeed:ct,irbegin:pt,i:_t=getDefaultValue("i"),velocity:yt=getDefaultValue("velocity"),analyze:bt,fft:Dt=getDefaultValue("fft"),compressor:At,compressorRatio:it,compressorKnee:Et,compressorAttack:ke,compressorRelease:Ye}=e;we=we??cycleToSeconds(Ze,a);const Pe=mapChannelNumbers(multiChannelOrbits&&Ie>0?[Ie*2-1,Ie*2]:getDefaultValue("channels")),He=e.channels!=null?mapChannelNumbers(e.channels):Pe,Ne=p.getOrbit(Ie,He);j!=null&&p.duck(j,t,O,q,te),V=applyGainCurve(nanFallback(V,1)),U=applyGainCurve(U),Le=applyGainCurve(Le),We=applyGainCurve(We),Re=applyGainCurve(Re),yt=applyGainCurve(yt),b=applyGainCurve(b),V*=yt;const Mt=t+o,kt=Mt+ie,rt=Math.round(Math.random()*1e6);for(let Se=0;Se<=activeSoundSources.size-maxPolyphony;Se++){const Ge=activeSoundSources.entries().next(),Ve=Ge.value[1].deref(),ze=Ge.value[0],et=t+.25;Ve?.node?.gain?.linearRampToValueAtTime(0,et),Ve?.stop?.(et),activeSoundSources.delete(ze)}let Je=[];if(["-","~","_"].includes($))return;k&&$&&($=`${k}_${$}`,e.s=$);let st;if(B)st=B(t,e,o,a);else if(getSound($)){const{onTrigger:Se}=getSound($),Ve=await Se(t,e,()=>{Je.forEach(ze=>ze?.disconnect()),activeSoundSources.delete(rt)},a);Ve&&(st=Ve.node,activeSoundSources.set(rt,new WeakRef(Ve)))}else throw new Error(`sound ${$} not found! Is it loaded?`);if(!st)return;if(l.currentTime>t){logger$1("[webaudio] skip hap: still loading",l.currentTime-t);return}const Ee=[];Ee.push(st),f!==void 0&&Ee.push(getWorklet(l,"phase-vocoder-processor",{pitchFactor:f})),Ee.push(gainNode(V));const xt=getFilterType(e.ftype);if(e.cutoff!==void 0){const Ge=pickAndRename(e,{frequency:"cutoff",q:"resonance",attack:"lpattack",decay:"lpdecay",sustain:"lpsustain",release:"lprelease",env:"lpenv",anchor:"fanchor",model:"ftype",drive:"drive",rate:"lprate",sync:"lpsync",depth:"lpdepth",depthfrequency:"lpdepthfrequency",shape:"lpshape",dcoffset:"lpdc",skew:"lpskew"});Ge.type="lowpass";const Ve=()=>createFilter(l,t,Mt,Ge,a,u),{filter:ze,lfo:et}=Ve();if(Ee.push(ze),et&&Je.push(et),xt==="24db"){const{filter:vt,lfo:ot}=Ve();Ee.push(vt),ot&&Je.push(ot)}}if(e.hcutoff!==void 0){const Ge=pickAndRename(e,{frequency:"hcutoff",q:"hresonance",attack:"hpattack",decay:"hpdecay",sustain:"hpsustain",release:"hprelease",env:"hpenv",anchor:"fanchor",model:"ftype",drive:"drive",rate:"hprate",sync:"hpsync",depth:"hpdepth",depthfrequency:"hpdepthfrequency",shape:"hpshape",dcoffset:"hpdc",skew:"hpskew"});Ge.type="highpass";const Ve=()=>createFilter(l,t,Mt,Ge,a,u),{filter:ze,lfo:et}=Ve();if(Ee.push(ze),et&&Je.push(et),xt==="24db"){const{filter:vt,lfo:ot}=Ve();Ee.push(vt),ot&&Je.push(ot)}}if(e.bandf!==void 0){const Ge=pickAndRename(e,{frequency:"bandf",q:"bandq",attack:"bpattack",decay:"bpdecay",sustain:"bpsustain",release:"bprelease",env:"bpenv",anchor:"fanchor",model:"ftype",drive:"drive",rate:"bprate",sync:"bpsync",depth:"bpdepth",depthfrequency:"bpdepthfrequency",shape:"bpshape",dcoffset:"bpdc",skew:"bpskew"});Ge.type="bandpass";const Ve=()=>createFilter(l,t,Mt,Ge,a,u),{filter:ze,lfo:et}=Ve();if(Ee.push(ze),et&&Je.push(et),xt==="24db"){const{filter:vt,lfo:ot}=Ve();Ee.push(vt),ot&&Je.push(ot)}}if(Qe!==void 0){const Se=l.createVowelFilter(Qe);Ee.push(Se)}if(Ae!==void 0&&Ee.push(getWorklet(l,"coarse-processor",{coarse:Ae})),ye!==void 0&&Ee.push(getWorklet(l,"crush-processor",{crush:ye})),ge!==void 0&&Ee.push(getWorklet(l,"shape-processor",{shape:ge,postgain:Le})),Xe!==void 0&&Ee.push(getDistortion(Xe,We,ue)),g!=null&&(d=a*g),e.wtPosSynced!=null&&(e.wtPosRate/=a),e.wtWarpSynced!=null&&(e.wtWarpRate/=a),d!==void 0){const Se=Math.max(1-b,0),Ge=new GainNode(l,{gain:Se}),Ve=u/a,ze=getLfo(l,t,kt,{skew:S??(F!=null?.5:1),frequency:d,depth:b,time:Ve,dcoffset:0,shape:F,phaseoffset:E,min:0,max:1,curve:1.5});ze.connect(Ge.gain),Je.push(ze),Ee.push(Ge)}if(At!==void 0&&Ee.push(getCompressor(l,At,it,Et,ke,Ye)),De!==void 0){const Se=l.createStereoPanner();Se.pan.value=2*De-1,Ee.push(Se)}if(me!==void 0&&pe>0){const{phaser:Se,lfo:Ge}=getPhaser(t,kt,me,pe,he,le);Je.push(Ge),Ee.push(Se)}const Ct=new GainNode(l,{gain:U});if(Ee.push(Ct),Re>0&&we>0&&$e>0){Ne.getDelay(we,$e,t);const Se=Ne.sendDelay(Ct,Re);Je.push(Se)}if(nt>0){let Se;if(ut!==void 0){let Ve,ze=getSound(ut);Array.isArray(ze)?Ve=ze.data.samples[_t%ze.data.samples.length]:typeof ze=="object"&&(Ve=Object.values(ze.data.samples).flat()[_t%Object.values(ze.data.samples).length]),Se=await loadBuffer$1(Ve,l,ut,0)}Ne.getReverb(je,tt,Oe,mt,Se,ct,pt);const Ge=Ne.sendReverb(Ct,nt);Je.push(Ge)}if(re!=null&&Ne.getDjf(re,t),bt){const Se=getAnalyserById(bt,2**(Dt+5)),Ge=effectSend(Ct,Se,1);Je.push(Ge)}if(Me!=null){Me=applyGainCurve(Me);const Se=new GainNode(l,{gain:Me});Ee.push(Se),Ne.connectToOutput(Se)}else Ne.connectToOutput(Ct);Ee.slice(1).reduce((Se,Ge)=>Se.connect(Ge),Ee[0]),Je=Je.concat(Ee)},superdoughTrigger=(e,t,o,a)=>{superdough(t,e-o,t.duration/a,a)},waveforms=["triangle","square","sawtooth","sine","user"],waveformAliases=[["tri","triangle"],["sqr","square"],["saw","sawtooth"],["sin","sine"]];function makeSaturationCurve(e,t){const o=e,a=new Float32Array(t);for(let u=0;u<t;u++){const l=u*2/t-1;a[u]=Math.tanh(l*o)}return a}function registerSynthSounds(){[...waveforms].forEach(e=>{registerSound(e,(t,o,a)=>{const[u,l,p,f]=getADSRValues([o.attack,o.decay,o.sustain,o.release],"linear",[.001,.05,.6,.01]),d=gainNode(.3);let g=getOscillator(e,t,o,()=>{d.disconnect(),a()}),{node:b,stop:S,triggerRelease:E}=g;const{duration:F}=o,$=gainNode(1);let k=b.connect(d).connect($);const B=t+F;getParamADSR(k.gain,u,l,p,f,0,1,t,B,"linear");const V=B+f+.01;return E?.(V),S(V),{node:k,stop:U=>{S(U)}}},{type:"synth",prebake:!0})}),registerSound("sbd",(e,t,o)=>{const{duration:a,decay:u=.5,pdecay:l=.5,penv:p=36,clip:f}=t,d=getAudioContext(),g=.02,b=1.2,S=.025,E=1,F=d.createOscillator();F.type="triangle",F.frequency.value=getFrequencyFromValue(t,29),F.detune.setValueAtTime(p*100,0),F.detune.setValueAtTime(p*100,e),F.detune.exponentialRampToValueAtTime(.001,e+l);const $=gainNode(1);$.gain.setValueAtTime(1,e+g),$.gain.exponentialRampToValueAtTime(.001,e+g+u),F.start(e);const k=getNoiseOscillator("brown",e,2),B=gainNode(1);B.gain.setValueAtTime(b,e),B.gain.exponentialRampToValueAtTime(.001,e+S);const V=new WaveShaperNode(d);V.curve=makeSaturationCurve(2,d.sampleRate);const U=gainNode(E);F.onended=()=>{F.disconnect(),$.disconnect(),V.disconnect(),k.node.disconnect(),B.disconnect(),U.disconnect(),o()};const ee=F.connect(V).connect($).connect(U);k.node.connect(B).connect(U);let O=e+u+.01;return f!=null&&(O=Math.min(e+f*a,O)),U.gain.setValueAtTime(E,O-.01),U.gain.linearRampToValueAtTime(0,O),F.stop(O),k.stop(O),{node:ee,stop:q=>{F.stop(q)}}},{type:"synth",prebake:!0}),registerSound("supersaw",(e,t,o)=>{const a=getAudioContext();let{duration:u,n:l,unison:p=5,spread:f=.6,detune:d}=t;d=d??l??.18;const g=getFrequencyFromValue(t),[b,S,E,F]=getADSRValues([t.attack,t.decay,t.sustain,t.release],"linear",[.001,.05,.6,.01]),$=e+u,k=$+F+.01,B=clamp(p,1,100);let V=B>1?clamp(f,0,1):0,U=getWorklet(a,"supersaw-oscillator",{frequency:g,begin:e,end:k,freqspread:d,voices:B,panspread:V},{outputChannelCount:[2]});const ee=1/Math.sqrt(B);getPitchEnvelope(U.parameters.get("detune"),t,e,$);const j=getVibratoOscillator(U.parameters.get("detune"),t,e),O=applyFM(U.parameters.get("frequency"),t,e);let q=gainNode(1);q=U.connect(q),getParamADSR(q.gain,b,S,E,F,0,.3*ee,e,$,"linear");let te=webAudioTimeout(a,()=>{destroyAudioWorkletNode(U),q.disconnect(),o(),O?.stop(),j?.stop()},e,k);return{node:q,stop:re=>{te.stop(re)}}},{prebake:!0,type:"synth"}),registerSound("bytebeat",(e,t,o)=>{const a=["(t%255 >= t/255%255)*255","(t*(t*8%60 <= 300)|(-t)*(t*4%512 < 256))+t/400","t","t*(t >> 10^t)","t&128","t&t>>8","((t%255+t%128+t%64+t%32+t%16+t%127.8+t%64.8+t%32.8+t%16.8)/3)","((t%64+t%63.8+t%64.15+t%64.35+t%63.5)/1.25)","(t&(t>>7)-t)","(sin(t*PI/128)*127+127)","((t^t/2+t+64*(sin((t*PI/64)+(t*PI/32768))+64))%128*2)","((t^t/2+t+64*(cos >> 0))%127.85*2)","((t^t/2+t+64)%128*2)","(((t * .25)^(t * .25)/100+(t * .25))%128)*2","((t^t/2+t+64)%7 * 24)"],{n:u=0}=t,l=getFrequencyFromValue(t),{byteBeatExpression:p=a[u%a.length],byteBeatStartTime:f}=t,d=getAudioContext();let{duration:g}=t;const[b,S,E,F]=getADSRValues([t.attack,t.decay,t.sustain,t.release],"linear",[.001,.05,.6,.01]),$=e+g,k=$+F+.01;let B=getWorklet(d,"byte-beat-processor",{frequency:l,begin:e,end:k},{outputChannelCount:[2]});B.port.postMessage({codeText:p,byteBeatStartTime:f,frequency:l});let V=gainNode(1);V=B.connect(V),getParamADSR(V.gain,b,S,E,F,0,1,e,$,"linear");let U=webAudioTimeout(d,()=>{destroyAudioWorkletNode(B),V.disconnect(),o()},e,k);return{node:V,stop:ee=>{U.stop(ee)}}},{prebake:!0,type:"synth"}),registerSound("pulse",(e,t,o)=>{const a=getAudioContext();let{pwrate:u,pwsweep:l}=t;l==null&&(u!=null?l=.3:l=0),u==null&&l!=null&&(u=1);let{duration:p,pw:f=.5}=t;const d=getFrequencyFromValue(t),[g,b,S,E]=getADSRValues([t.attack,t.decay,t.sustain,t.release],"linear",[.001,.05,.6,.01]),F=e+p,$=F+E+.01;let k=getWorklet(a,"pulse-oscillator",{frequency:d,begin:e,end:$,pulsewidth:f},{outputChannelCount:[2]});getPitchEnvelope(k.parameters.get("detune"),t,e,F);const B=getVibratoOscillator(k.parameters.get("detune"),t,e),V=applyFM(k.parameters.get("frequency"),t,e);let U=gainNode(1);U=k.connect(U),getParamADSR(U.gain,g,b,S,E,0,1,e,F,"linear");let ee;l!=0&&(ee=getLfo(a,e,$,{frequency:u,depth:l}),ee.connect(k.parameters.get("pulsewidth")));let j=webAudioTimeout(a,()=>{destroyAudioWorkletNode(k),destroyAudioWorkletNode(ee),U.disconnect(),o(),V?.stop(),B?.stop()},e,$);return{node:U,stop:O=>{j.stop(O)}}},{prebake:!0,type:"synth"}),[...noises].forEach(e=>{registerSound(e,(t,o,a)=>{const[u,l,p,f]=getADSRValues([o.attack,o.decay,o.sustain,o.release],"linear",[.001,.05,.6,.01]);let d,{density:g}=o;d=getNoiseOscillator(e,t,g);let{node:b,stop:S,triggerRelease:E}=d;const F=gainNode(.3),{duration:$}=o;b.onended=()=>{b.disconnect(),F.disconnect(),a()};const k=gainNode(1);let B=b.connect(F).connect(k);const V=t+$;getParamADSR(B.gain,u,l,p,f,0,1,t,V,"linear");const U=V+f+.01;return E?.(U),S(U),{node:B,stop:ee=>{S(ee)}}},{type:"synth",prebake:!0})}),waveformAliases.forEach(([e,t])=>soundMap$1.set({...soundMap$1.get(),[e]:soundMap$1.get()[t]}))}const PI2=2*Math.PI;function waveformN(e,t,o){e=typeof e=="object"?e:new Float32Array(e).fill(1);const u=e.length,l=new Float32Array(u+1),p=new Float32Array(u+1),f=getAudioContext(),d=f.createOscillator(),g={sawtooth:S=>[0,-1/S],square:S=>[0,S%2===0?0:1/S],triangle:S=>[S%2===0?0:1/(S*S),0],user:S=>[0,1]};if(!g[o])throw new Error(`unknown wave type ${o}`);for(let S=0;S<u;S++){const E=e[S],[F,$]=g[o](S+1),k=t?.[S]??0;let B=F*E,V=$*E;if(k!==0){const U=Math.cos(PI2*k),ee=Math.sin(PI2*k);B=U*B-ee*V,V=ee*B+U*V}l[S+1]=B,p[S+1]=V}const b=f.createPeriodicWave(l,p);return d.setPeriodicWave(b),d}function getOscillator(e,t,o,a){const{duration:u,noise:l=0}=o,p=o.partials??o.n;let f;e==="user"&&!p&&(logger$1("[superdough] Synth 'user' was selected, but partials not specified. Defaulting to triangle. Use pat.partials to setup custom waveform"),e="triangle"),e=e==="user"&&!p?"triangle":e,!p||p?.length===0||e==="sine"?(f=getAudioContext().createOscillator(),f.type=e||"triangle"):f=waveformN(p,o.phases,e),f.frequency.value=getFrequencyFromValue(o);let d=getVibratoOscillator(f.detune,o,t);getPitchEnvelope(f.detune,o,t,t+u);const g=applyFM(f.frequency,o,t);let b;return l&&(b=getNoiseMix(f,l,t)),f.onended=()=>{b||f.disconnect(),b?.node.disconnect(),a()},f.start(t),{node:b?.node||f,stop:S=>{g.stop(S),d?.stop(S),b?.stop(S),f.stop(S)},triggerRelease:S=>{}}}function buildSamples(e=1,t=.05,o=220,a=0,u=0,l=.1,p=0,f=1,d=0,g=0,b=0,S=0,E=0,F=0,$=0,k=0,B=0,V=1,U=0,ee=0){let j=Math.PI*2,O=getAudioContext().sampleRate,q=Le=>Le>0?1:-1,te=d*=500*j/O/O,re=o*=(1+t*2*Math.random()-t)*j/O,de=[],ie=0,me=0,pe=0,le=1,he=0,Ae=0,ye=0,Me,ge;for(a=a*O+9,U*=O,u*=O,l*=O,B*=O,g*=500*j/O**3,$*=j/O,b*=j/O,S*=O,E=E*O|0,ge=a+U+u+l+B|0;pe<ge;de[pe++]=ye)++Ae%(k*100|0)||(ye=p?p>1?p>2?p>3?Math.sin((ie%j)**3):Math.max(Math.min(Math.tan(ie),1),-1):1-(2*ie/j%2+2)%2:1-4*Math.abs(Math.round(ie/j)-ie/j):Math.sin(ie),ye=(E?1-ee+ee*Math.sin(j*pe/E):1)*q(ye)*Math.abs(ye)**f*e*1*(pe<a?pe/a:pe<a+U?1-(pe-a)/U*(1-V):pe<a+U+u?V:pe<ge-B?(ge-pe-B)/l*V:0),ye=B?ye/2+(B>pe?0:(pe<ge-B?1:(ge-pe)/B)*de[pe-B|0]/2):ye),Me=(o+=d+=g)*Math.cos($*me++),ie+=Me-Me*F*(1-(Math.sin(pe)+1)*1e9%2),le&&++le>S&&(o+=b,re+=b,le=0),E&&!(++he%E)&&(o=re,d=te,le||=1);return de}const getZZFX=(e,t)=>{let{s:o,note:a=36,freq:u,zrand:l=0,attack:p=0,decay:f=0,sustain:d=.8,release:g=.1,curve:b=1,slide:S=0,deltaSlide:E=0,pitchJump:F=0,pitchJumpTime:$=0,lfo:k=0,znoise:B=0,zmod:V=0,zcrush:U=0,zdelay:ee=0,tremolo:j=0,duration:O=.2,zzfx:q}=e;const te=Math.max(O-p-f,0);typeof a=="string"&&(a=noteToMidi(a)),!u&&typeof a=="number"&&(u=midiToFreq$1(a)),o=o.replace("z_","");const re=["sine","triangle","sawtooth","tan","noise"].indexOf(o)||0;b=o==="square"?0:b;const ie=buildSamples(...q||[.25,l,u,p,te,g,re,b,S,E,F,$,k,B,V,U,ee,d,f,j]),me=getAudioContext(),pe=me.createBuffer(1,ie.length,me.sampleRate);pe.getChannelData(0).set(ie);const le=getAudioContext().createBufferSource();return le.buffer=pe,le.start(t),{node:le}};function registerZZFXSounds(){["zzfx","z_sine","z_sawtooth","z_triangle","z_square","z_tan","z_noise"].forEach(e=>{registerSound(e,(t,o,a)=>{const{node:u}=getZZFX({s:e,...o},t);return u.onended=()=>{u.disconnect(),a()},{node:u,stop:()=>{}}},{type:"synth",prebake:!0})})}let worklet;async function dspWorklet(e,t){const o=`dsp-worklet-${Date.now()}`,a=`${t}
let __q = []; // trigger queue
class MyProcessor extends AudioWorkletProcessor {
  constructor() {
    super();
    this.t = 0;
    this.stopped = false;
    this.port.onmessage = (e) => {
      if(e.data==='stop') {
        this.stopped = true;
      } else if(e.data?.dough) {
        __q.push(e.data)
      } else {
        msg?.(e.data)
      }
    };
  }
  process(inputs, outputs, parameters) {
    const output = outputs[0];
    if(__q.length) {
      for(let i=0;i<__q.length;++i) {
        const deadline = __q[i].time-currentTime;
        if(deadline<=0) {
          trigger(__q[i].dough)
          __q.splice(i,1)
        }
      }
    }
    for (let i = 0; i < output[0].length; i++) {
      const out = dsp(this.t / sampleRate);
      output.forEach((channel) => {
        channel[i] = out;
      });
      this.t++;
    }
  return !this.stopped;
  }
}
registerProcessor('${o}', MyProcessor);
`,l=`data:text/javascript;base64,${btoa(a)}`;await e.audioWorklet.addModule(l);const p=new AudioWorkletNode(e,o);return{node:p,stop:()=>p.port.postMessage("stop")}}const stop=()=>{worklet&&(worklet?.stop(),worklet?.node?.disconnect())};typeof window<"u"&&window.addEventListener("message",e=>{e.data==="strudel-stop"?stop():e.data?.dough&&worklet?.node.port.postMessage(e.data)});const dough=async e=>{const t=getAudioContext();stop(),worklet=await dspWorklet(t,e),worklet.node.connect(t.destination)};function doughTrigger(e,t,o,a){window.postMessage({time:a,dough:e.value,currentTime:t,duration:e.duration,cps:o})}const Warpmode=Object.freeze({NONE:0,ASYM:1,MIRROR:2,BENDP:3,BENDM:4,BENDMP:5,SYNC:6,QUANT:7,FOLD:8,PWM:9,ORBIT:10,SPIN:11,CHAOS:12,PRIMES:13,BINARY:14,BROWNIAN:15,RECIPROCAL:16,WORMHOLE:17,LOGISTIC:18,SIGMOID:19,FRACTAL:20,FLIP:21}),seenKeys=new Set;async function getPayload(e,t,o=2048){const a=`${e},${o}`;if(!seenKeys.has(a)){const l=(await loadBuffer(e,t)).getChannelData(0),p=l.length,f=Math.max(1,Math.floor(p/o)),d=new Array(f);for(let g=0;g<f;g++){const b=g*o;d[g]=l.subarray(b,b+o)}return seenKeys.add(a),{frames:d,frameLen:o,numFrames:f,key:a}}return{frameLen:o,key:a}}function humanFileSize(e,t){var o=1024;if(e<o)return e+" B";var a=["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],u=-1;do e/=o,++u;while(e>=o);return e.toFixed(1)+" "+a[u]}function parseWavSampleRate(e){const t=new DataView(e);let o=12;for(;o+8<=t.byteLength;){const a=String.fromCharCode(t.getUint8(o),t.getUint8(o+1),t.getUint8(o+2),t.getUint8(o+3)),u=t.getUint32(o+4,!0);if(a==="fmt ")return t.getUint32(o+12,!0);o+=8+u+(u&1)}return null}async function decodeAtNativeRate(e){const t=parseWavSampleRate(e)||44100;return await new OfflineAudioContext(1,1,t).decodeAudioData(e)}const loadCache$1={},loadBuffer=(e,t)=>{if(e=e.replace("#","%23"),!loadCache$1[e]){logger$1(`[wavetable] load table ${t}..`,"load-table",{url:e});const o=Date.now();loadCache$1[e]=fetch(e).then(a=>a.arrayBuffer()).then(async a=>{const u=Date.now()-o,l=humanFileSize(a.byteLength);return logger$1(`[wavetable] load table ${t}... done! loaded ${l} in ${u}ms`,"loaded-table",{url:e}),await decodeAtNativeRate(a)})}return loadCache$1[e]};function githubPath$1(e,t=""){if(!e.startsWith("github:"))throw new Error('expected "github:" at the start of pseudoUrl');let[o,a]=e.split("github:");return a=a.endsWith("/")?a.slice(0,-1):a,a.split("/").length===2&&(a+="/main"),`https://raw.githubusercontent.com/${a}/${t}`}const _processTables=(e,t,o,a={})=>(t=e._base||t,Object.entries(e).forEach(([u,l])=>{if(u==="_base")return!1;if(typeof l=="string"&&(l=[l]),typeof l!="object")throw new Error("wrong json format for "+u);let p=t;p.startsWith("github:")&&(p=githubPath$1(p,"")),l=l.map(f=>p+f).filter(f=>f.toLowerCase().endsWith(".wav")?!0:(logger$1(`[wavetable] skipping ${f} -- wavetables must be ".wav" format`),!1)),l.length&&registerWaveTable(u,l,{baseUrl:t,frameLen:o})}));function registerWaveTable(e,t,o){registerSound(e,(a,u,l,p)=>onTriggerSynth(a,u,l,t,p,o?.frameLen??2048),{type:"wavetable",tables:t,...o})}const tables=async(e,t,o,a={})=>{if(o!==void 0)return _processTables(o,e,t);e.startsWith("github:")&&(e=githubPath$1(e,"strudel.json")),e.startsWith("local:")&&(e="http://localhost:5432");const u=getBaseURL(e);if(typeof fetch=="function"&&!(typeof fetch>"u"))return fetch(e).then(l=>l.json()).then(l=>_processTables(l,u,t,a)).catch(l=>{throw console.error(l),new Error(`error loading "${e}"`)})};async function onTriggerSynth(e,t,o,a,u,l){const{s:p,n:f=0,duration:d,clip:g}=t,b=getAudioContext(),[S,E,F,$]=getADSRValues([t.attack,t.decay,t.sustain,t.release]);let{warpmode:k}=t;typeof k=="string"&&(k=Warpmode[k.toUpperCase()]??Warpmode.NONE);const B=getFrequencyFromValue(t),{url:V,label:U}=getCommonSampleInfo(t,a),ee=await getPayload(V,U,l);let j=e+d;g!==void 0&&(j=Math.min(e+g*d,j));const O=j+$,q=O+.01,te=getWorklet(b,"wavetable-oscillator-processor",{begin:e,end:q,frequency:B,freqspread:t.detune,position:t.wt,warp:t.warp,warpMode:k,voices:Math.max(t.unison??1,1),panspread:t.spread,phaserand:t.wtphaserand??t.unison>1?1:0},{outputChannelCount:[2]});if(te.port.postMessage({type:"table",payload:ee}),b.currentTime>e){logger$1(`[wavetable] still loading sound "${p}:${f}"`,"highlight");return}const re=[t.wtattack,t.wtdecay,t.wtsustain,t.wtrelease],de=[t.warpattack,t.warpdecay,t.warpsustain,t.warprelease],ie=te.parameters,me=ie.get("position"),pe=ie.get("warp");let le=t.wtrate;t.wtsync!=null&&(le=u*t.wtsync);const he=applyParameterModulators(b,me,e,O,{offset:t.wt,amount:t.wtenv,defaultAmount:.5,values:re,holdEnd:j,defaultValues:[0,.5,0,.1]},{frequency:le,depth:t.wtdepth,defaultDepth:.5,shape:t.wtshape,skew:t.wtskew,dcoffset:t.wtdc??0});let Ae=t.warprate;t.warpsync!=null&&(Ae=Ae=u*t.warpsync);const ye=applyParameterModulators(b,pe,e,O,{offset:t.warp,amount:t.warpenv,defaultAmount:.5,values:de,holdEnd:j,defaultValues:[0,.5,0,.1]},{frequency:Ae,depth:t.warpdepth,defaultDepth:.5,shape:t.warpshape,skew:t.warpskew,dcoffset:t.warpdc??0}),Me=getVibratoOscillator(te.parameters.get("detune"),t,e),ge=applyFM(te.parameters.get("frequency"),t,e),Le=b.createGain(),Xe=te.connect(Le);getParamADSR(Xe.gain,S,E,F,$,0,.3,e,j,"linear"),getPitchEnvelope(te.parameters.get("detune"),t,e,j);const We={node:Xe,source:te},ue=webAudioTimeout(b,()=>{destroyAudioWorkletNode(te),Me?.stop(),ge?.stop(),Xe.disconnect(),he?.disconnect(),ye?.disconnect(),o()},e,q);return We.stop=De=>{ue.stop(De)},We}let doughWorklet;function initDoughWorklet(){const e=getAudioContext();doughWorklet=getWorklet(e,"dough-processor",{},{outputChannelCount:[2]}),connectToDestination(doughWorklet)}const soundMap=new Map,loadedSounds=new Map;Pattern$1.prototype.supradough=function(){return this.onTrigger((e,t,o,a)=>{e.value._begin=a,e.value._duration=e.duration/o,!doughWorklet&&initDoughWorklet();const u=(e.value.bank?e.value.bank+"_":"")+e.value.s,l=e.value.n??0,p=`${u}:${l}`;if(soundMap.has(u)&&(e.value.s=p),soundMap.has(u)&&!loadedSounds.has(p)){const f=soundMap.get(u),d=f[l%f.length];console.log(`load ${p} from ${d}`);const g=fetchSample(d);loadedSounds.set(p,g),g.then(({channels:b,sampleRate:S})=>doughWorklet.port.postMessage({sample:p,channels:b,sampleRate:S}))}doughWorklet.port.postMessage({spawn:e.value})},1)};function githubPath(e,t=""){if(!e.startsWith("github:"))throw new Error('expected "github:" at the start of pseudoUrl');let[o,a]=e.split("github:");return a=a.endsWith("/")?a.slice(0,-1):a,a.split("/").length===2&&(a+="/main"),`https://raw.githubusercontent.com/${a}/${t}`}async function fetchSampleMap(e){if(e.startsWith("github:")&&(e=githubPath(e,"strudel.json")),e.startsWith("local:")&&(e="http://localhost:5432"),e.startsWith("shabda:")){let[a,u]=e.split("shabda:");e=`https://shabda.ndre.gr/${u}.json?strudel=1`}if(e.startsWith("shabda/speech")){let[a,u]=e.split("shabda/speech");u=u.startsWith("/")?u.substring(1):u;let[l,p]=u.split(":"),f="f",d="en-GB";l&&([d,f]=l.split("/")),e=`https://shabda.ndre.gr/speech/${p}.json?gender=${f}&language=${d}&strudel=1'`}if(typeof fetch!="function")return;const t=e.split("/").slice(0,-1).join("/");if(typeof fetch>"u")return;const o=await fetch(e).then(a=>a.json()).catch(a=>{throw console.error(a),new Error(`error loading "${e}"`)});return[o,o._base||t]}async function fetchSample(e){const t=await fetch(e).then(a=>a.arrayBuffer()).then(a=>getAudioContext().decodeAudioData(a));let o=[];for(let a=0;a<t.numberOfChannels;a++)o.push(t.getChannelData(a));return{channels:o,sampleRate:t.sampleRate}}async function doughsamples(e,t){if(typeof e=="string"){const[o,a]=await fetchSampleMap(e);return doughsamples(o,a)}Object.entries(e).map(async([o,a])=>{o!=="_base"&&(a=a.map(u=>t+u),soundMap.set(o,a))})}const _workletUrl="data:text/javascript;base64,KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2NvbnN0IGQ9dHlwZW9mIHNhbXBsZVJhdGU8InUiP3NhbXBsZVJhdGU6NDhlMyxBPU1hdGguUEkvZCxiPTEvZDtsZXQgRT1pPT5NYXRoLnBvdyhpLDIpO2NvbnN0IFY9KGkscyx0KT0+TWF0aC5taW4oTWF0aC5tYXgoaSxzKSx0KTtmdW5jdGlvbiBjKGkpe3JldHVybiBFKGkpfWZ1bmN0aW9uIE8oaSxzLHQpe2NvbnN0IGU9TWF0aC5zaW4oKDEtdCkqLjUqTWF0aC5QSSksaD1NYXRoLnNpbih0Ki41Kk1hdGguUEkpO3JldHVybiBpKmUrcypofWNsYXNzIHZ7cGhhc2U9MDt1cGRhdGUocyl7Y29uc3QgdD1NYXRoLnNpbih0aGlzLnBoYXNlKjIqTWF0aC5QSSk7cmV0dXJuIHRoaXMucGhhc2U9KHRoaXMucGhhc2Urcy9kKSUxLHR9fWNsYXNzIHh7cGhhc2U9MDt1cGRhdGUocyl7cmV0dXJuIHRoaXMucGhhc2UrPWIqcyx0aGlzLnBoYXNlJTEqMi0xfX1mdW5jdGlvbiB5KGkscyl7cmV0dXJuIGk8cz8oaS89cyxpK2ktaSppLTEpOmk+MS1zPyhpPShpLTEpL3MsaSppK2kraSsxKTowfWNsYXNzIFJ7Y29uc3RydWN0b3Iocz17fSl7dGhpcy5waGFzZT1zLnBoYXNlPz8wfXVwZGF0ZShzKXtjb25zdCB0PXMvZDtsZXQgZT15KHRoaXMucGhhc2UsdCksaD0yKnRoaXMucGhhc2UtMS1lO3JldHVybiB0aGlzLnBoYXNlKz10LHRoaXMucGhhc2U+MSYmKHRoaXMucGhhc2UtPTEpLGh9fWZ1bmN0aW9uIFQoaSxzLHQpe3JldHVybiBpPDI/MDooKGgsbyxuKT0+biooby1oKStoKSgtcyouNSxzKi41LHQvKGktMSkpfWZ1bmN0aW9uIHooaSxzKXtyZXR1cm4gaSpNYXRoLnBvdygyLHMvMTIpfWNsYXNzIEZ7Y29uc3RydWN0b3Iocz17fSl7dGhpcy52b2ljZXM9cy52b2ljZXM/PzUsdGhpcy5mcmVxc3ByZWFkPXMuZnJlcXNwcmVhZD8/LjIsdGhpcy5wYW5zcHJlYWQ9cy5wYW5zcHJlYWQ/Py40LHRoaXMucGhhc2U9bmV3IEZsb2F0MzJBcnJheSh0aGlzLnZvaWNlcykubWFwKCgpPT5NYXRoLnJhbmRvbSgpKX11cGRhdGUocyl7Y29uc3QgdD1NYXRoLnNxcnQoMS10aGlzLnBhbnNwcmVhZCksZT1NYXRoLnNxcnQodGhpcy5wYW5zcHJlYWQpO2xldCBoPTAsbz0wO2ZvcihsZXQgbj0wO248dGhpcy52b2ljZXM7bisrKXtjb25zdCBhPXoocyxUKHRoaXMudm9pY2VzLHRoaXMuZnJlcXNwcmVhZCxuKSkvZCxwPShuJjEpPT0xO2xldCB1PXQ7cCYmKHU9ZSk7bGV0IHE9eSh0aGlzLnBoYXNlW25dLGEpLEQ9Mip0aGlzLnBoYXNlW25dLTEtcTtoPWgrRCp1LG89bytEKnUsdGhpcy5waGFzZVtuXSs9YSx0aGlzLnBoYXNlW25dPjEmJih0aGlzLnBoYXNlW25dLT0xKX1yZXR1cm4gaCtvfX1jbGFzcyB3e3BoYXNlPTA7dXBkYXRlKHMpe3RoaXMucGhhc2UrPWIqcztsZXQgdD10aGlzLnBoYXNlJTE7cmV0dXJuKHQ8LjU/Mip0OjEtMioodC0uNSkpKjItMX19Y2xhc3MgZ3tzMD0wO3MxPTA7dXBkYXRlKHMsdCxlPTApe2U9TWF0aC5tYXgoZSwwKSx0PU1hdGgubWluKHQsMmU0KTtsZXQgaD0yKk1hdGguc2luKHQqQSk7aD1WKGgsMCwxLjE0KTtjb25zdCBuPTEtTWF0aC5wb3coLjUsKGUrLjEyNSkvLjEyNSkqaDtyZXR1cm4gdGhpcy5zMD1uKnRoaXMuczAtaCp0aGlzLnMxK2gqcyx0aGlzLnMxPW4qdGhpcy5zMStoKnRoaXMuczAsdGhpcy5zMX19Y2xhc3MgSXtjb25zdHJ1Y3RvcihzPTApe3RoaXMucGhhc2U9c31zYXcocyx0KXtsZXQgZT0odGhpcy5waGFzZStzKSUxLGg9eShlLHQpO3JldHVybiAyKmUtMS1ofXVwZGF0ZShzLHQ9LjUpe2NvbnN0IGU9cy9kO2xldCBoPXRoaXMuc2F3KDAsZSktdGhpcy5zYXcodCxlKTtyZXR1cm4gdGhpcy5waGFzZT0odGhpcy5waGFzZStlKSUxLGgrdCoyLTF9fWNsYXNzIEx7cGhhc2U9MDt1cGRhdGUocyx0PS41KXtyZXR1cm4gdGhpcy5waGFzZSs9YipzLHRoaXMucGhhc2UlMTx0PzE6LTF9fWNsYXNzIFN7dXBkYXRlPXM9Pk1hdGgucmFuZG9tKCk8cypiP01hdGgucmFuZG9tKCk6MH1jbGFzcyBOe3VwZGF0ZSgpe3JldHVybiBNYXRoLnJhbmRvbSgpKjItMX19Y2xhc3MgQntjb25zdHJ1Y3Rvcigpe3RoaXMub3V0PTB9dXBkYXRlKCl7bGV0IHM9TWF0aC5yYW5kb20oKSoyLTE7cmV0dXJuIHRoaXMub3V0PSh0aGlzLm91dCsuMDIqcykvMS4wMix0aGlzLm91dH19Y2xhc3MgR3tjb25zdHJ1Y3Rvcigpe3RoaXMuYjA9MCx0aGlzLmIxPTAsdGhpcy5iMj0wLHRoaXMuYjM9MCx0aGlzLmI0PTAsdGhpcy5iNT0wLHRoaXMuYjY9MH11cGRhdGUoKXtjb25zdCBzPU1hdGgucmFuZG9tKCkqMi0xO3RoaXMuYjA9Ljk5ODg2KnRoaXMuYjArcyouMDU1NTE3OSx0aGlzLmIxPS45OTMzMip0aGlzLmIxK3MqLjA3NTA3NTksdGhpcy5iMj0uOTY5KnRoaXMuYjIrcyouMTUzODUyLHRoaXMuYjM9Ljg2NjUqdGhpcy5iMytzKi4zMTA0ODU2LHRoaXMuYjQ9LjU1KnRoaXMuYjQrcyouNTMyOTUyMix0aGlzLmI1PS0uNzYxNip0aGlzLmI1LXMqLjAxNjg5ODtjb25zdCB0PXRoaXMuYjArdGhpcy5iMSt0aGlzLmIyK3RoaXMuYjMrdGhpcy5iNCt0aGlzLmI1K3RoaXMuYjYrcyouNTM2MjtyZXR1cm4gdGhpcy5iNj1zKi4xMTU5MjYsdCouMTF9fWNsYXNzIGp7cGhhc2U9MTt1cGRhdGUocyl7dGhpcy5waGFzZSs9YipzO2xldCB0PXRoaXMucGhhc2U+PTE/MTowO3JldHVybiB0aGlzLnBoYXNlPXRoaXMucGhhc2UlMSx0fX1mdW5jdGlvbiBNKGkscyx0LGU9MSl7aWYoaTw9MClyZXR1cm4gcztpZihpPj0xKXJldHVybiB0O2xldCBoO3JldHVybiBlPT09MD9oPWk6ZT4wP2g9TWF0aC5wb3coaSxlKTpoPTEtTWF0aC5wb3coMS1pLC1lKSxzKyh0LXMpKmh9Y2xhc3MgZntjb25zdHJ1Y3RvcihzPXt9KXt0aGlzLnN0YXRlPSJvZmYiLHRoaXMuc3RhcnRUaW1lPTAsdGhpcy5zdGFydFZhbD0wLHRoaXMuZGVjYXlDdXJ2ZT1zLmRlY2F5Q3VydmU/PzF9dXBkYXRlKHMsdCxlLGgsbyxuKXtzd2l0Y2godGhpcy5zdGF0ZSl7Y2FzZSJvZmYiOnJldHVybiB0PjAmJih0aGlzLnN0YXRlPSJhdHRhY2siLHRoaXMuc3RhcnRUaW1lPXMsdGhpcy5zdGFydFZhbD0wKSwwO2Nhc2UiYXR0YWNrIjp7bGV0IGw9cy10aGlzLnN0YXJ0VGltZTtyZXR1cm4gbD5lPyh0aGlzLnN0YXRlPSJkZWNheSIsdGhpcy5zdGFydFRpbWU9cywxKTpNKGwvZSx0aGlzLnN0YXJ0VmFsLDEsMSl9Y2FzZSJkZWNheSI6e2xldCBsPXMtdGhpcy5zdGFydFRpbWUsYT1NKGwvaCwxLG8sLXRoaXMuZGVjYXlDdXJ2ZSk7cmV0dXJuIHQ8PTA/KHRoaXMuc3RhdGU9InJlbGVhc2UiLHRoaXMuc3RhcnRUaW1lPXMsdGhpcy5zdGFydFZhbD1hLGEpOmw+aD8odGhpcy5zdGF0ZT0ic3VzdGFpbiIsdGhpcy5zdGFydFRpbWU9cyxvKTphfWNhc2Uic3VzdGFpbiI6cmV0dXJuIHQ8PTAmJih0aGlzLnN0YXRlPSJyZWxlYXNlIix0aGlzLnN0YXJ0VGltZT1zLHRoaXMuc3RhcnRWYWw9byksbztjYXNlInJlbGVhc2UiOntsZXQgbD1zLXRoaXMuc3RhcnRUaW1lO2lmKGw+bilyZXR1cm4gdGhpcy5zdGF0ZT0ib2ZmIiwwO2xldCBhPU0obC9uLHRoaXMuc3RhcnRWYWwsMCwtdGhpcy5kZWNheUN1cnZlKTtyZXR1cm4gdD4wJiYodGhpcy5zdGF0ZT0iYXR0YWNrIix0aGlzLnN0YXJ0VGltZT1zLHRoaXMuc3RhcnRWYWw9YSksYX19dGhyb3ciaW52YWxpZCBlbnZlbG9wZSBzdGF0ZSJ9fWNvbnN0ICQ9MTA7Y2xhc3Mga3t3cml0ZUlkeD0wO3JlYWRJZHg9MDtidWZmZXI9bmV3IEZsb2F0MzJBcnJheSgkKmQpO3dyaXRlKHMsdCl7dGhpcy53cml0ZUlkeD0odGhpcy53cml0ZUlkeCsxKSV0aGlzLmJ1ZmZlci5sZW5ndGgsdGhpcy5idWZmZXJbdGhpcy53cml0ZUlkeF09cztsZXQgZT1NYXRoLm1pbihNYXRoLmZsb29yKGQqdCksdGhpcy5idWZmZXIubGVuZ3RoLTEpO3RoaXMucmVhZElkeD10aGlzLndyaXRlSWR4LWUsdGhpcy5yZWFkSWR4PDAmJih0aGlzLnJlYWRJZHgrPXRoaXMuYnVmZmVyLmxlbmd0aCl9dXBkYXRlKHMsdCl7cmV0dXJuIHRoaXMud3JpdGUocyx0KSx0aGlzLmJ1ZmZlclt0aGlzLnJlYWRJZHhdfX1jbGFzcyBXe2RlbGF5PW5ldyBrO21vZHVsYXRvcj1uZXcgdzt1cGRhdGUocyx0LGUsaCxvKXtjb25zdCBuPXRoaXMubW9kdWxhdG9yLnVwZGF0ZShoKSpvLGw9dGhpcy5kZWxheS51cGRhdGUocyxlKigxK24pKTtyZXR1cm4gTyhzLGwsdCl9fWNsYXNzIFh7aG9sZD0wO3Q9MDt1cGRhdGUocyx0KXtyZXR1cm4gdGhpcy50KysldD09PTAmJih0aGlzLnQ9MCx0aGlzLmhvbGQ9cyksdGhpcy5ob2xkfX1jbGFzcyBVe3VwZGF0ZShzLHQpe3Q9TWF0aC5tYXgoMSx0KTtjb25zdCBlPU1hdGgucG93KDIsdC0xKTtyZXR1cm4gTWF0aC5yb3VuZChzKmUpL2V9fWNsYXNzIFl7dXBkYXRlKHMsdD0wLGU9MSl7ZT1NYXRoLm1heCguMDAxLE1hdGgubWluKDEsZSkpO2NvbnN0IGg9TWF0aC5leHBtMSh0KTtyZXR1cm4oMStoKSpzLygxK2gqTWF0aC5hYnMocykpKmV9fWNsYXNzIF97c3RhdGljIHNhbXBsZXM9bmV3IE1hcDtidWZmZXI7c2FtcGxlUmF0ZTtwb3M9MDtzYW1wbGVGcmVxPVAoKTtjb25zdHJ1Y3RvcihzLHQsZSl7dGhpcy5idWZmZXI9cyx0aGlzLnNhbXBsZVJhdGU9dCx0aGlzLmR1cmF0aW9uPXRoaXMuYnVmZmVyLmxlbmd0aC90aGlzLnNhbXBsZVJhdGUsdGhpcy5zcGVlZD1kL3RoaXMuc2FtcGxlUmF0ZSxlJiYodGhpcy5zcGVlZCo9dGhpcy5kdXJhdGlvbil9dXBkYXRlKHMpe2lmKHRoaXMucG9zPj10aGlzLmJ1ZmZlci5sZW5ndGgpcmV0dXJuIDA7Y29uc3QgdD1zL3RoaXMuc2FtcGxlRnJlcSp0aGlzLnNwZWVkO2xldCBlPXRoaXMuYnVmZmVyW01hdGguZmxvb3IodGhpcy5wb3MpXTtyZXR1cm4gdGhpcy5wb3M9dGhpcy5wb3MrdCxlfX1jb25zdCBtPShpLHM9ImxpbmVhciIsdCk9Pntjb25zdFtuLGwsYSxwXT1pO2lmKG49PW51bGwmJmw9PW51bGwmJmE9PW51bGwmJnA9PW51bGwpcmV0dXJuIHQ/P1suMDAxLC4wMDEsMSwuMDFdO2NvbnN0IHU9YT8/KG4hPW51bGwmJmw9PW51bGx8fG49PW51bGwmJmw9PW51bGw/MTouMDAxKTtyZXR1cm5bTWF0aC5tYXgobj8/MCwuMDAxKSxNYXRoLm1heChsPz8wLC4wMDEpLE1hdGgubWluKHUsMSksTWF0aC5tYXgocD8/MCwuMDEpXX07bGV0IEM9e3NpbmU6dixzYXc6Uix6YXc6eCxzYXd0b290aDpSLHphd3Rvb3RoOngsc3VwZXJzYXc6Rix0cmk6dyx0cmlhbmdsZTp3LHB1bHNlOkksc3F1YXJlOkkscHVsemU6TCxkdXN0OlMsY3JhY2tsZTpTLGltcHVsc2U6aix3aGl0ZTpOLGJyb3duOkIscGluazpHfTtjb25zdCBaPXtjaG9ydXM6MCxub3RlOjQ4LHM6InRyaWFuZ2xlIixiYW5rOiIiLGdhaW46MSxwb3N0Z2FpbjoxLHZlbG9jaXR5OjEsZGVuc2l0eToiLjAzIixmdHlwZToiMTJkYiIsZmFuY2hvcjowLHJlc29uYW5jZTowLGhyZXNvbmFuY2U6MCxiYW5kcTowLGNoYW5uZWxzOlsxLDJdLHBoYXNlcmRlcHRoOi43NSxzaGFwZXZvbDoxLGRpc3RvcnR2b2w6MSxkZWxheTowLGJ5dGVCZWF0RXhwcmVzc2lvbjoiMCIsZGVsYXlmZWVkYmFjazouNSxkZWxheXNwZWVkOjEsZGVsYXl0aW1lOi4yNSxvcmJpdDoxLGk6MSxmZnQ6OCx6OiJ0cmlhbmdsZSIscGFuOi41LGZtaDoxLGZtZW52OjAsc3BlZWQ6MSxwdzouNX07bGV0IHI9aT0+WltpXTtjb25zdCBIPXtjOjAsZDoyLGU6NCxmOjUsZzo3LGE6OSxiOjExfSxKPXsiIyI6MSxiOi0xLHM6MSxmOi0xfSxLPShpLHM9Myk9PntsZXRbdCxlPSIiLGg9IiJdPVN0cmluZyhpKS5tYXRjaCgvXihbYS1nQS1HXSkoWyNic2ZdKikoWzAtOV0qKSQvKT8uc2xpY2UoMSl8fFtdO2lmKCF0KXRocm93IG5ldyBFcnJvcignbm90IGEgbm90ZTogIicraSsnIicpO2NvbnN0IG89SFt0LnRvTG93ZXJDYXNlKCldLG49ZT8uc3BsaXQoIiIpLnJlZHVjZSgoYSxwKT0+YStKW3BdLDApfHwwO3JldHVybihOdW1iZXIoaHx8cykrMSkqMTIrbytufSxRPWk9Pk1hdGgucG93KDIsKGktNjkpLzEyKSo0NDAsUD1pPT4oaT1pfHxyKCJub3RlIiksdHlwZW9mIGk9PSJzdHJpbmciJiYoaT1LKGksMykpLFEoaSkpO2NsYXNzIHR0e2lkPTA7b3V0PVswLDBdO2F0dGFjaztkZWNheTtzdXN0YWluO3JlbGVhc2U7X2JlZ2luO19kdXJhdGlvbjtfc291bmQ7X2NoYW5uZWxzPTE7X2J1ZmZlcnM7dW5pdDtfcGVudjtwZW52O3BhdHRhY2s7cGRlY2F5O3BzdXN0YWluO3ByZWxlYXNlO3ZpYjtfdmliO3ZpYm1vZDtfZm07Zm1oO2ZtaTtfZm1lbnY7Zm1hdHRhY2s7Zm1kZWNheTtmbXN1c3RhaW47Zm1yZWxlYXNlO19scGVudjtscGVudjtscGF0dGFjaztscGRlY2F5O2xwc3VzdGFpbjtscHJlbGVhc2U7X2hwZW52O2hwZW52O2hwYXR0YWNrO2hwZGVjYXk7aHBzdXN0YWluO2hwcmVsZWFzZTtfYnBlbnY7YnBlbnY7YnBhdHRhY2s7YnBkZWNheTticHN1c3RhaW47YnByZWxlYXNlO2N1dG9mZjtoY3V0b2ZmO2JhbmRmO2NvYXJzZTtjcnVzaDtkaXN0b3J0O2ZyZXE7bm90ZTtfbHBmO19ocGY7X2JwZjtfY2hvcnVzO19jb2Fyc2U7X2NydXNoO19kaXN0b3J0O2NvbnN0cnVjdG9yKHMpe3RoaXMuZnJlcT8/PVAocy5ub3RlKSx0aGlzLl9iZWdpbj1zLl9iZWdpbix0aGlzLl9kdXJhdGlvbj1zLl9kdXJhdGlvbix0aGlzLnJlbGVhc2U9cy5yZWxlYXNlPz8wO2xldCB0PXRoaXM7aWYoT2JqZWN0LmFzc2lnbih0LHMpLHQucz10LnM/P3IoInMiKSx0LmdhaW49Yyh0LmdhaW4/P3IoImdhaW4iKSksdC52ZWxvY2l0eT1jKHQudmVsb2NpdHk/P3IoInZlbG9jaXR5IikpLHQucG9zdGdhaW49Yyh0LnBvc3RnYWluPz9yKCJwb3N0Z2FpbiIpKSx0LmRlbnNpdHk9dC5kZW5zaXR5Pz9yKCJkZW5zaXR5IiksdC5mYW5jaG9yPXQuZmFuY2hvcj8/cigiZmFuY2hvciIpLHQuZHJpdmU9dC5kcml2ZT8/LjY5LHQucGhhc2VyZGVwdGg9dC5waGFzZXJkZXB0aD8/cigicGhhc2VyZGVwdGgiKSx0LnNoYXBldm9sPWModC5zaGFwZXZvbD8/cigic2hhcGV2b2wiKSksdC5kaXN0b3J0dm9sPWModC5kaXN0b3J0dm9sPz9yKCJkaXN0b3J0dm9sIikpLHQuaT10Lmk/P3IoImkiKSx0LmNob3J1cz10LmNob3J1cz8/cigiY2hvcnVzIiksdC5mZnQ9dC5mZnQ/P3IoImZmdCIpLHQucGFuPXQucGFuPz9yKCJwYW4iKSx0Lm9yYml0PXQub3JiaXQ/P3IoIm9yYml0IiksdC5mbWVudj10LmZtZW52Pz9yKCJmbWVudiIpLHQucmVzb25hbmNlPXQucmVzb25hbmNlPz9yKCJyZXNvbmFuY2UiKSx0LmhyZXNvbmFuY2U9dC5ocmVzb25hbmNlPz9yKCJocmVzb25hbmNlIiksdC5iYW5kcT10LmJhbmRxPz9yKCJiYW5kcSIpLHQuc3BlZWQ9dC5zcGVlZD8/cigic3BlZWQiKSx0LnB3PXQucHc/P3IoInB3IiksW3QuYXR0YWNrLHQuZGVjYXksdC5zdXN0YWluLHQucmVsZWFzZV09bShbdC5hdHRhY2ssdC5kZWNheSx0LnN1c3RhaW4sdC5yZWxlYXNlXSksdC5faG9sZEVuZD10Ll9iZWdpbit0Ll9kdXJhdGlvbix0Ll9lbmQ9dC5faG9sZEVuZCt0LnJlbGVhc2UrLjAxLHQuZm1pJiYodC5zPT09InNhdyJ8fHQucz09PSJzYXd0b290aCIpJiYodC5zPSJ6YXciKSxDW3Quc10pe2NvbnN0IGU9Q1t0LnNdO3QuX3NvdW5kPW5ldyBlLHQuX2NoYW5uZWxzPTF9ZWxzZSBpZihfLnNhbXBsZXMuaGFzKHQucykpe2NvbnN0IGU9Xy5zYW1wbGVzLmdldCh0LnMpO3QuX2J1ZmZlcnM9W10sdC5fY2hhbm5lbHM9ZS5jaGFubmVscy5sZW5ndGg7Zm9yKGxldCBoPTA7aDx0Ll9jaGFubmVscztoKyspdC5fYnVmZmVycy5wdXNoKG5ldyBfKGUuY2hhbm5lbHNbaF0sZS5zYW1wbGVSYXRlLHQudW5pdD09PSJjIikpfWVsc2UgY29uc29sZS53YXJuKCJzb3VuZCBub3QgbG9hZGVkIix0LnMpO3QucGVudiYmKHQuX3BlbnY9bmV3IGYoe2RlY2F5Q3VydmU6NH0pLFt0LnBhdHRhY2ssdC5wZGVjYXksdC5wc3VzdGFpbix0LnByZWxlYXNlXT1tKFt0LnBhdHRhY2ssdC5wZGVjYXksdC5wc3VzdGFpbix0LnByZWxlYXNlXSkpLHQudmliJiYodC5fdmliPW5ldyB2LHQudmlibW9kPXQudmlibW9kPz9yKCJ2aWJtb2QiKSksdC5mbWkmJih0Ll9mbT1uZXcgdix0LmZtaD10LmZtaD8/cigiZm1oIiksdC5mbWVudiYmKHQuX2ZtZW52PW5ldyBmKHtkZWNheUN1cnZlOjJ9KSxbdC5mbWF0dGFjayx0LmZtZGVjYXksdC5mbXN1c3RhaW4sdC5mbXJlbGVhc2VdPW0oW3QuZm1hdHRhY2ssdC5mbWRlY2F5LHQuZm1zdXN0YWluLHQuZm1yZWxlYXNlXSkpKSx0Ll9hZHNyPW5ldyBmKHtkZWNheUN1cnZlOjJ9KSx0LmRlbGF5PWModC5kZWxheT8/cigiZGVsYXkiKSksdC5kZWxheWZlZWRiYWNrPXQuZGVsYXlmZWVkYmFjaz8/cigiZGVsYXlmZWVkYmFjayIpLHQuZGVsYXlzcGVlZD10LmRlbGF5c3BlZWQ/P3IoImRlbGF5c3BlZWQiKSx0LmRlbGF5dGltZT10LmRlbGF5dGltZT8/cigiZGVsYXl0aW1lIiksdC5scGVudiYmKHQuX2xwZW52PW5ldyBmKHtkZWNheUN1cnZlOjR9KSxbdC5scGF0dGFjayx0LmxwZGVjYXksdC5scHN1c3RhaW4sdC5scHJlbGVhc2VdPW0oW3QubHBhdHRhY2ssdC5scGRlY2F5LHQubHBzdXN0YWluLHQubHByZWxlYXNlXSkpLHQuaHBlbnYmJih0Ll9ocGVudj1uZXcgZih7ZGVjYXlDdXJ2ZTo0fSksW3QuaHBhdHRhY2ssdC5ocGRlY2F5LHQuaHBzdXN0YWluLHQuaHByZWxlYXNlXT1tKFt0LmhwYXR0YWNrLHQuaHBkZWNheSx0Lmhwc3VzdGFpbix0LmhwcmVsZWFzZV0pKSx0LmJwZW52JiYodC5fYnBlbnY9bmV3IGYoe2RlY2F5Q3VydmU6NH0pLFt0LmJwYXR0YWNrLHQuYnBkZWNheSx0LmJwc3VzdGFpbix0LmJwcmVsZWFzZV09bShbdC5icGF0dGFjayx0LmJwZGVjYXksdC5icHN1c3RhaW4sdC5icHJlbGVhc2VdKSksdC5fY2hvcnVzPXQuY2hvcnVzP1tdOm51bGwsdC5fbHBmPXQuY3V0b2ZmP1tdOm51bGwsdC5faHBmPXQuaGN1dG9mZj9bXTpudWxsLHQuX2JwZj10LmJhbmRmP1tdOm51bGwsdC5fY29hcnNlPXQuY29hcnNlP1tdOm51bGwsdC5fY3J1c2g9dC5jcnVzaD9bXTpudWxsLHQuX2Rpc3RvcnQ9dC5kaXN0b3J0P1tdOm51bGw7Zm9yKGxldCBlPTA7ZTx0aGlzLl9jaGFubmVscztlKyspdC5fbHBmPy5wdXNoKG5ldyBnKSx0Ll9ocGY/LnB1c2gobmV3IGcpLHQuX2JwZj8ucHVzaChuZXcgZyksdC5fY2hvcnVzPy5wdXNoKG5ldyBXKSx0Ll9jb2Fyc2U/LnB1c2gobmV3IFgpLHQuX2NydXNoPy5wdXNoKG5ldyBVKSx0Ll9kaXN0b3J0Py5wdXNoKG5ldyBZKX11cGRhdGUocyl7aWYoIXRoaXMuX3NvdW5kJiYhdGhpcy5fYnVmZmVycylyZXR1cm4gMDtsZXQgdD0rKHM+PXRoaXMuX2JlZ2luJiZzPD10aGlzLl9ob2xkRW5kKSxlPXRoaXMuZnJlcSp0aGlzLnNwZWVkO2lmKHRoaXMuX2ZtJiZ0aGlzLmZtaCE9PXZvaWQgMCYmdGhpcy5mbWkhPT12b2lkIDApe2xldCBhPXRoaXMuZm1pO2lmKHRoaXMuX2ZtZW52KXtjb25zdCBxPXRoaXMuX2ZtZW52LnVwZGF0ZShzLHQsdGhpcy5mbWF0dGFjayx0aGlzLmZtZGVjYXksdGhpcy5mbXN1c3RhaW4sdGhpcy5mbXJlbGVhc2UpO2E9dGhpcy5mbWVudipxKmF9Y29uc3QgcD1lKnRoaXMuZm1oLHU9cCphO2U9ZSt0aGlzLl9mbS51cGRhdGUocCkqdX1pZih0aGlzLl92aWImJnRoaXMudmlibW9kIT09dm9pZCAwJiYoZT1lKjIqKih0aGlzLl92aWIudXBkYXRlKHRoaXMudmliKSp0aGlzLnZpYm1vZC8xMikpLHRoaXMuX3BlbnYmJnRoaXMucGVudiE9PXZvaWQgMCl7Y29uc3QgYT10aGlzLl9wZW52LnVwZGF0ZShzLHQsdGhpcy5wYXR0YWNrLHRoaXMucGRlY2F5LHRoaXMucHN1c3RhaW4sdGhpcy5wcmVsZWFzZSk7ZT1lK2EqdGhpcy5wZW52fWxldCBoPXRoaXMuY3V0b2ZmO2lmKGghPT12b2lkIDAmJnRoaXMuX2xwZW52KXtjb25zdCBhPXRoaXMuX2xwZW52LnVwZGF0ZShzLHQsdGhpcy5scGF0dGFjayx0aGlzLmxwZGVjYXksdGhpcy5scHN1c3RhaW4sdGhpcy5scHJlbGVhc2UpO2g9dGhpcy5scGVudiphKmgraH1sZXQgbz10aGlzLmhjdXRvZmY7aWYobyE9PXZvaWQgMCYmdGhpcy5faHBlbnYmJnRoaXMuaHBlbnYhPT12b2lkIDApe2NvbnN0IGE9dGhpcy5faHBlbnYudXBkYXRlKHMsdCx0aGlzLmhwYXR0YWNrLHRoaXMuaHBkZWNheSx0aGlzLmhwc3VzdGFpbix0aGlzLmhwcmVsZWFzZSk7bz0yKip0aGlzLmhwZW52KmEqbytvfWxldCBuPXRoaXMuYmFuZGY7aWYobiE9PXZvaWQgMCYmdGhpcy5fYnBlbnYmJnRoaXMuYnBlbnYhPT12b2lkIDApe2NvbnN0IGE9dGhpcy5fYnBlbnYudXBkYXRlKHMsdCx0aGlzLmJwYXR0YWNrLHRoaXMuYnBkZWNheSx0aGlzLmJwc3VzdGFpbix0aGlzLmJwcmVsZWFzZSk7bj0yKip0aGlzLmJwZW52KmEqbitufWNvbnN0IGw9dGhpcy5fYWRzci51cGRhdGUocyx0LHRoaXMuYXR0YWNrLHRoaXMuZGVjYXksdGhpcy5zdXN0YWluLHRoaXMucmVsZWFzZSk7Zm9yKGxldCBhPTA7YTx0aGlzLl9jaGFubmVsczthKyspe2lmKHRoaXMuX3NvdW5kJiZ0aGlzLnM9PT0icHVsc2UiP3RoaXMub3V0W2FdPXRoaXMuX3NvdW5kLnVwZGF0ZShlLHRoaXMucHcpOnRoaXMuX3NvdW5kP3RoaXMub3V0W2FdPXRoaXMuX3NvdW5kLnVwZGF0ZShlKTp0aGlzLl9idWZmZXJzJiYodGhpcy5vdXRbYV09dGhpcy5fYnVmZmVyc1thXS51cGRhdGUoZSkpLHRoaXMub3V0W2FdPXRoaXMub3V0W2FdKnRoaXMuZ2Fpbip0aGlzLnZlbG9jaXR5LHRoaXMuX2Nob3J1cyl7Y29uc3QgcD10aGlzLl9jaG9ydXNbYV0udXBkYXRlKHRoaXMub3V0W2FdLHRoaXMuY2hvcnVzLC4wMysuMDUqYSwxLC4xMSk7dGhpcy5vdXRbYV09cCt0aGlzLm91dFthXX10aGlzLl9scGYmJih0aGlzLl9scGZbYV0udXBkYXRlKHRoaXMub3V0W2FdLGgsdGhpcy5yZXNvbmFuY2UpLHRoaXMub3V0W2FdPXRoaXMuX2xwZlthXS5zMSksdGhpcy5faHBmJiYodGhpcy5faHBmW2FdLnVwZGF0ZSh0aGlzLm91dFthXSxvLHRoaXMuaHJlc29uYW5jZSksdGhpcy5vdXRbYV09dGhpcy5vdXRbYV0tdGhpcy5faHBmW2FdLnMxKSx0aGlzLl9icGYmJih0aGlzLl9icGZbYV0udXBkYXRlKHRoaXMub3V0W2FdLG4sdGhpcy5iYW5kcSksdGhpcy5vdXRbYV09dGhpcy5fYnBmW2FdLnMwKSx0aGlzLl9jb2Fyc2UmJih0aGlzLm91dFthXT10aGlzLl9jb2Fyc2VbYV0udXBkYXRlKHRoaXMub3V0W2FdLHRoaXMuY29hcnNlKSksdGhpcy5fY3J1c2gmJih0aGlzLm91dFthXT10aGlzLl9jcnVzaFthXS51cGRhdGUodGhpcy5vdXRbYV0sdGhpcy5jcnVzaCkpLHRoaXMuX2Rpc3RvcnQmJih0aGlzLm91dFthXT10aGlzLl9kaXN0b3J0W2FdLnVwZGF0ZSh0aGlzLm91dFthXSx0aGlzLmRpc3RvcnQsdGhpcy5kaXN0b3J0dm9sKSksdGhpcy5vdXRbYV09dGhpcy5vdXRbYV0qbCx0aGlzLm91dFthXT10aGlzLm91dFthXSp0aGlzLnBvc3RnYWluLHRoaXMuX2J1ZmZlcnN8fCh0aGlzLm91dFthXT10aGlzLm91dFthXSouMil9aWYodGhpcy5fY2hhbm5lbHM9PT0xJiYodGhpcy5vdXRbMV09dGhpcy5vdXRbMF0pLHRoaXMucGFuIT09LjUpe2NvbnN0IGE9dGhpcy5wYW4qTWF0aC5QSS8yO3RoaXMub3V0WzBdPXRoaXMub3V0WzBdKk1hdGguY29zKGEpLHRoaXMub3V0WzFdPXRoaXMub3V0WzFdKk1hdGguc2luKGEpfX19Y2xhc3Mgc3R7dm9pY2VzPVtdO3ZpZD0wO3E9W107b3V0PVswLDBdO2RlbGF5c2VuZD1bMCwwXTtkZWxheXRpbWU9cigiZGVsYXl0aW1lIik7ZGVsYXlmZWVkYmFjaz1yKCJkZWxheWZlZWRiYWNrIik7ZGVsYXlzcGVlZD1yKCJkZWxheXNwZWVkIik7dD0wO2NvbnN0cnVjdG9yKHM9NDhlMyx0PTApe3RoaXMuc2FtcGxlUmF0ZT1zLHRoaXMudD1NYXRoLmZsb29yKHQqcyksdGhpcy5fZGVsYXlMPW5ldyBrLHRoaXMuX2RlbGF5Uj1uZXcga31sb2FkU2FtcGxlKHMsdCxlKXtfLnNhbXBsZXMuc2V0KHMse2NoYW5uZWxzOnQsc2FtcGxlUmF0ZTplfSl9c2NoZWR1bGVTcGF3bihzKXtpZihzLl9iZWdpbj09PXZvaWQgMCl0aHJvdyBuZXcgRXJyb3IoIltkb3VnaF06IHNjaGVkdWxlU3Bhd24gZXhwZWN0ZWQgX2JlZ2luIHRvIGJlIHNldCIpO2lmKHMuX2R1cmF0aW9uPT09dm9pZCAwKXRocm93IG5ldyBFcnJvcigiW2RvdWdoXTogc2NoZWR1bGVTcGF3biBleHBlY3RlZCBfZHVyYXRpb24gdG8gYmUgc2V0Iik7cy5zYW1wbGVSYXRlPXRoaXMuc2FtcGxlUmF0ZTtjb25zdCB0PU1hdGguZmxvb3Iocy5fYmVnaW4qdGhpcy5zYW1wbGVSYXRlKTt0aGlzLnNjaGVkdWxlKHt0aW1lOnQsdHlwZToic3Bhd24iLGFyZzpzfSl9c3Bhd24ocyl7cy5pZD10aGlzLnZpZCsrO2NvbnN0IHQ9bmV3IHR0KHMpO3RoaXMudm9pY2VzLnB1c2godCk7Y29uc3QgZT1NYXRoLmNlaWwodC5fZW5kKnRoaXMuc2FtcGxlUmF0ZSk7dGhpcy5zY2hlZHVsZSh7dGltZTplLHR5cGU6ImRlc3Bhd24iLGFyZzp0LmlkfSl9ZGVzcGF3bihzKXt0aGlzLnZvaWNlcz10aGlzLnZvaWNlcy5maWx0ZXIodD0+dC5pZCE9PXMpfXNjaGVkdWxlKHMpe2lmKCF0aGlzLnEubGVuZ3RoKXt0aGlzLnEucHVzaChzKTtyZXR1cm59bGV0IHQ9MDtmb3IoO3Q8dGhpcy5xLmxlbmd0aCYmdGhpcy5xW3RdLnRpbWU8cy50aW1lOyl0Kys7dGhpcy5xLnNwbGljZSh0LDAscyl9dXBkYXRlKCl7Zm9yKDt0aGlzLnEubGVuZ3RoPjAmJnRoaXMucVswXS50aW1lPD10aGlzLnQ7KXRoaXNbdGhpcy5xWzBdLnR5cGVdKHRoaXMucVswXS5hcmcpLHRoaXMucS5zaGlmdCgpO3RoaXMub3V0WzBdPTAsdGhpcy5vdXRbMV09MDtmb3IobGV0IGU9MDtlPHRoaXMudm9pY2VzLmxlbmd0aDtlKyspdGhpcy52b2ljZXNbZV0udXBkYXRlKHRoaXMudC90aGlzLnNhbXBsZVJhdGUpLHRoaXMub3V0WzBdKz10aGlzLnZvaWNlc1tlXS5vdXRbMF0sdGhpcy5vdXRbMV0rPXRoaXMudm9pY2VzW2VdLm91dFsxXSx0aGlzLnZvaWNlc1tlXS5kZWxheSYmKHRoaXMuZGVsYXlzZW5kWzBdKz10aGlzLnZvaWNlc1tlXS5vdXRbMF0qdGhpcy52b2ljZXNbZV0uZGVsYXksdGhpcy5kZWxheXNlbmRbMV0rPXRoaXMudm9pY2VzW2VdLm91dFsxXSp0aGlzLnZvaWNlc1tlXS5kZWxheSx0aGlzLmRlbGF5dGltZT10aGlzLnZvaWNlc1tlXS5kZWxheXRpbWUsdGhpcy5kZWxheXNwZWVkPXRoaXMudm9pY2VzW2VdLmRlbGF5c3BlZWQsdGhpcy5kZWxheWZlZWRiYWNrPXRoaXMudm9pY2VzW2VdLmRlbGF5ZmVlZGJhY2spO2NvbnN0IHM9dGhpcy5fZGVsYXlMLnVwZGF0ZSh0aGlzLmRlbGF5c2VuZFswXSx0aGlzLmRlbGF5dGltZSksdD10aGlzLl9kZWxheVIudXBkYXRlKHRoaXMuZGVsYXlzZW5kWzFdLHRoaXMuZGVsYXl0aW1lKTt0aGlzLmRlbGF5c2VuZFswXT1zKnRoaXMuZGVsYXlmZWVkYmFjayx0aGlzLmRlbGF5c2VuZFsxXT10KnRoaXMuZGVsYXlmZWVkYmFjayx0aGlzLm91dFswXSs9cyx0aGlzLm91dFsxXSs9dCx0aGlzLnQrK319Y29uc3QgZXQ9KGkscyx0KT0+TWF0aC5taW4oTWF0aC5tYXgoaSxzKSx0KTtjbGFzcyBpdCBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3Nvcntjb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5kb3VnaD1uZXcgc3Qoc2FtcGxlUmF0ZSxjdXJyZW50VGltZSksdGhpcy5wb3J0Lm9ubWVzc2FnZT1zPT57cy5kYXRhLnNwYXduP3RoaXMuZG91Z2guc2NoZWR1bGVTcGF3bihzLmRhdGEuc3Bhd24pOnMuZGF0YS5zYW1wbGU/dGhpcy5kb3VnaC5sb2FkU2FtcGxlKHMuZGF0YS5zYW1wbGUscy5kYXRhLmNoYW5uZWxzLHMuZGF0YS5zYW1wbGVSYXRlKTpzLmRhdGEuc2FtcGxlcz9zLmRhdGEuc2FtcGxlcy5mb3JFYWNoKChbdCxlLGhdKT0+e3RoaXMuZG91Z2gubG9hZFNhbXBsZSh0LGUsaCl9KTpjb25zb2xlLmxvZygidW5yZWNvZ25pemVkIGV2ZW50IHR5cGUiLHMuZGF0YSl9fXByb2Nlc3Mocyx0LGUpe2lmKHRoaXMuZGlzY29ubmVjdGVkKXJldHVybiExO2NvbnN0IGg9dFswXTtmb3IobGV0IG89MDtvPGhbMF0ubGVuZ3RoO28rKyl7dGhpcy5kb3VnaC51cGRhdGUoKTtmb3IobGV0IG49MDtuPGgubGVuZ3RoO24rKyloW25dW29dPWV0KHRoaXMuZG91Z2gub3V0W25dLC0xLDEpfXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigiZG91Z2gtcHJvY2Vzc29yIixpdCl9KSgpOwo=";typeof sampleRate<"u"&&sampleRate;const workletUrl=_workletUrl;registerWorklet(workletUrl);const{Pattern,logger,repl}=strudelCore;setLogger(logger);const hap2value=e=>(e.ensureObjectValue(),e.value),webaudioOutput=(e,t,o,a,u)=>superdough(hap2value(e),u,o,a,e.whole?.begin.valueOf());function webaudioRepl(e={}){return e={getTime:()=>getAudioContext().currentTime,defaultOutput:webaudioOutput,...e},repl(e)}Pattern.prototype.dough=function(){return this.onTrigger(doughTrigger,1)};const getDrawContext=(e="test-canvas",t)=>{let{contextType:o="2d",pixelated:a=!1,pixelRatio:u=window.devicePixelRatio}=t||{},l=document.querySelector("#"+e);if(!l){l=document.createElement("canvas"),l.id=e,l.width=window.innerWidth*u,l.height=window.innerHeight*u,l.style="pointer-events:none;width:100%;height:100%;position:fixed;top:0;left:0",a&&(l.style.imageRendering="pixelated"),document.body.prepend(l);let p;window.addEventListener("resize",()=>{p&&clearTimeout(p),p=setTimeout(()=>{l.width=window.innerWidth*u,l.height=window.innerHeight*u},200)})}return l.getContext(o,{willReadFrequently:!0})};let animationFrames={};function stopAnimationFrame(e){animationFrames[e]!==void 0&&(cancelAnimationFrame(animationFrames[e]),delete animationFrames[e])}function stopAllAnimations(e){Object.keys(animationFrames).forEach(t=>stopAnimationFrame(t))}let memory={};Pattern$1.prototype.draw=function(e,t){if(typeof window>"u")return this;let{id:o=1,lookbehind:a=0,lookahead:u=0}=t,l=Math.max(getTime(),0);stopAnimationFrame(o),a=Math.abs(a),memory[o]=(memory[o]||[]).filter(g=>!g.isInFuture(l));let p=this.queryArc(l,l+u).filter(g=>g.hasOnset());memory[o]=memory[o].concat(p);let f;const d=()=>{const g=getTime(),b=g+u;memory[o]=memory[o].filter(F=>F.isInNearPast(a,g));let S=Math.max(f||b,b-1/10);const E=this.queryArc(S,b).filter(F=>F.hasOnset());memory[o]=memory[o].concat(E),f=b,e(memory[o],g,b,this),animationFrames[o]=requestAnimationFrame(d)};return animationFrames[o]=requestAnimationFrame(d),this};const cleanupDraw=(e=!0,t)=>{const o=getDrawContext();e&&o.clearRect(0,0,o.canvas.width,o.canvas.height),stopAllAnimations()};Pattern$1.prototype.onPaint=function(e){return this.withState(t=>(t.controls.painters||(t.controls.painters=[]),t.controls.painters.push(e),t))},Pattern$1.prototype.getPainters=function(){let e=[];return this.queryArc(0,0,{painters:e}),e};let theme={background:"#222",foreground:"#75baff",caret:"#ffcc00",selection:"rgba(128, 203, 196, 0.5)",selectionMatch:"#036dd626",lineHighlight:"#00000050",gutterBackground:"transparent",gutterForeground:"#8a919966"};function getTheme(){return theme}let clearColor="#22222210";Pattern$1.prototype.animate=function({callback:e,sync:t=!1,smear:o=.5}={}){window.frame&&cancelAnimationFrame(window.frame);const a=getDrawContext();let{clientWidth:u,clientHeight:l}=a.canvas;u*=window.devicePixelRatio,l*=window.devicePixelRatio;let p=o===0?"99":Number((1-o)*100).toFixed(0);p=p.length===1?`0${p}`:p,clearColor=`#200010${p}`;const f=d=>{let g;d=Math.round(d),g=this.slow(1e3).queryArc(d,d),a.fillStyle=clearColor,a.fillRect(0,0,u,l),g.forEach(b=>{let{x:S,y:E,w:F,h:$,s:k,r:B,angle:V=0,fill:U="darkseagreen"}=b.value;if(F*=u,$*=l,B!==void 0&&V!==void 0){const j=V*2*Math.PI,[O,q]=[(u-F)/2,(l-$)/2];S=O+Math.cos(j)*B*O,E=q+Math.sin(j)*B*q}else S*=u-F,E*=l-$;const ee={...b.value,x:S,y:E,w:F,h:$};a.fillStyle=U,k==="rect"?a.fillRect(S,E,F,$):k==="ellipse"&&(a.beginPath(),a.ellipse(S+F/2,E+$/2,F/2,$/2,0,0,2*Math.PI),a.fill()),e&&e(a,ee,b)}),window.frame=requestAnimationFrame(f)};return window.frame=requestAnimationFrame(f),silence};const{x:x$1,y,w,h,angle,r,fill,smear}=createParams("x","y","w","h","angle","r","fill","smear");register("rescale",function(e,t){return t.mul(x$1(e).w(e).y(e).h(e))}),register("moveXY",function(e,t,o){return o.add(x$1(e).y(t))}),register("zoomIn",function(e,t){const o=pure(1).sub(e).div(2);return t.rescale(e).move(o,o)});const scale$2=(e,t,o)=>e*(o-t)+t,getValue=e=>{let{value:t}=e;typeof e.value!="object"&&(t={value:t});let{note:o,n:a,freq:u,s:l}=t;if(u)return freqToMidi$2(u);if(o=o??a,typeof o=="string")try{return noteToMidi$1(o)}catch{return 0}return typeof o=="number"?o:l?"_"+l:t};Pattern$1.prototype.pianoroll=function(e={}){let{cycles:t=4,playhead:o=.5,overscan:a=0,hideNegative:u=!1,ctx:l=getDrawContext(),id:p=1}=e,f=-t*o,d=t*(1-o);const g=(b,S)=>(!u||b.whole.begin>=0)&&b.isWithinTime(S+f,S+d);return this.draw((b,S)=>{__pianoroll({...e,time:S,ctx:l,haps:b.filter(E=>g(E,S))})},{lookbehind:f-a,lookahead:d+a,id:p}),this};function __pianoroll({time:e,haps:t,cycles:o=4,playhead:a=.5,flipTime:u=0,flipValues:l=0,hideNegative:p=!1,inactive:f=getTheme().foreground,active:d=getTheme().foreground,background:g="transparent",smear:b=0,playheadColor:S=getTheme().foreground,minMidi:E=10,maxMidi:F=90,autorange:$=0,timeframe:k,fold:B=1,vertical:V=0,labels:U=!1,fill:ee=1,fillActive:j=!1,strokeActive:O=!0,stroke:q,hideInactive:te=0,colorizeInactive:re=1,fontFamily:de,ctx:ie,id:me}={}){const pe=ie.canvas.width,le=ie.canvas.height;let he=-o*a,Ae=o*(1-a);me&&(t=t.filter(we=>we.hasTag(me))),k&&(console.warn("timeframe is deprecated! use from/to instead"),he=0,Ae=k);const ye=V?le:pe,Me=V?pe:le;let ge=V?[ye,0]:[0,ye];const Le=Ae-he,Xe=V?[0,Me]:[Me,0];let We=F-E+1,ue=Me/We,De=[];u&&ge.reverse(),l&&Xe.reverse();const{min:Qe,max:Re,values:$e}=t.reduce(({min:we,max:Ie,values:nt},tt)=>{const Oe=getValue(tt);return{min:Oe<we?Oe:we,max:Oe>Ie?Oe:Ie,values:nt.includes(Oe)?nt:[...nt,Oe]}},{min:1/0,max:-1/0,values:[]});$&&(E=Qe,F=Re,We=F-E+1),De=$e.sort((we,Ie)=>typeof we=="number"&&typeof Ie=="number"?we-Ie:typeof we=="number"?1:String(we).localeCompare(String(Ie))),ue=B?Me/De.length:Me/We,ie.fillStyle=g,ie.globalAlpha=1,b||(ie.clearRect(0,0,pe,le),ie.fillRect(0,0,pe,le)),t.forEach(we=>{const Ie=we.whole.begin<=e&&we.endClipped>e;let nt=q??(O&&Ie),tt=!Ie&&ee||Ie&&j;if(te&&!Ie)return;let Oe=we.value?.color;d=Oe||d,f=re&&Oe||f,Oe=Ie?d:f,ie.fillStyle=tt?Oe:"transparent",ie.strokeStyle=Oe;const{velocity:mt=1,gain:je=1}=we.value||{};ie.globalAlpha=mt*je;const ut=(we.whole.begin-(u?Ae:he))/Le,ct=scale$2(ut,...ge);let pt=scale$2(we.duration/Le,0,ye);const _t=getValue(we),yt=B?De.indexOf(_t)/De.length:(Number(_t)-E)/We,bt=scale$2(yt,...Xe);let Dt=0;const At=scale$2(e/Le,...ge);let it;if(V?it=[bt+1-(l?ue:0),ye-At+ct+Dt+1-(u?0:pt),ue-2,pt-2]:it=[ct-At+Dt+1-(u?pt:0),bt+1-(l?0:ue),pt-2,ue-2],nt&&ie.strokeRect(...it),tt&&ie.fillRect(...it),U){const Et=we.value.note??we.value.s+(we.value.n?`:${we.value.n}`:""),{label:ke,activeLabel:Ye}=we.value,He=(Ie&&Ye||ke)??Et;let Ne=V?pt:ue*.75;ie.font=`${Ne}px ${de||"monospace"}`,ie.fillStyle=tt?"black":Oe,ie.textBaseline="top",ie.fillText(He,...it)}}),ie.globalAlpha=1;const Ze=scale$2(-he/Le,...ge);return ie.strokeStyle=S,ie.beginPath(),V?(ie.moveTo(0,Ze),ie.lineTo(Me,Ze)):(ie.moveTo(Ze,0),ie.lineTo(Ze,Me)),ie.stroke(),this}function getDrawOptions(e,t={}){let[o,a]=e;o=Math.abs(o);const u=a+o,l=u!==0?o/u:0;return{fold:1,...t,cycles:u,playhead:l}}const getPunchcardPainter=(e={})=>(t,o,a,u)=>__pianoroll({ctx:t,time:o,haps:a,...getDrawOptions(u,e)});Pattern$1.prototype.punchcard=function(e){return this.onPaint(getPunchcardPainter(e))},Pattern$1.prototype.wordfall=function(e){return this.punchcard({vertical:1,labels:1,stroke:0,fillActive:1,active:"white",...e})};function fromPolar(e,t,o,a){const u=(e-90)*Math.PI/180;return[o+Math.cos(u)*t,a+Math.sin(u)*t]}const xyOnSpiral=(e,t,o,a,u=0)=>fromPolar((e+u)*360,t*e,o,a);function spiralSegment(e){let{ctx:t,from:o=0,to:a=3,margin:u=50,cx:l=100,cy:p=100,rotate:f=0,thickness:d=u/2,color:g=getTheme().foreground,cap:b="round",stretch:S=1,fromOpacity:E=1,toOpacity:F=1}=e;o*=S,a*=S,f*=S,t.lineWidth=d,t.lineCap=b,t.strokeStyle=g,t.globalAlpha=E,t.beginPath();let[$,k]=xyOnSpiral(o,u,l,p,f);t.moveTo($,k);const B=1/60;let V=o;for(;V<=a;){const[U,ee]=xyOnSpiral(V,u,l,p,f);t.globalAlpha=(V-o)/(a-o)*F,t.lineTo(U,ee),V+=B}t.stroke()}function drawSpiral(e){let{stretch:t=1,size:o=80,thickness:a=o/2,cap:u="butt",inset:l=3,playheadColor:p="#ffffff",playheadLength:f=.02,playheadThickness:d=a,padding:g=0,steady:b=1,activeColor:S=getTheme().foreground,inactiveColor:E=getTheme().gutterForeground,colorizeInactive:F=0,fade:$=!0,ctx:k,time:B,haps:V,drawTime:U,id:ee}=e;ee&&(V=V.filter(pe=>pe.hasTag(ee)));const[j,O]=[k.canvas.width,k.canvas.height];k.clearRect(0,0,j*2,O*2);const[q,te]=[j/2,O/2],re={margin:o/t,cx:q,cy:te,stretch:t,cap:u,thickness:a},de={...re,thickness:d,from:l-f,to:l,color:p},[ie]=U,me=b*B;V.forEach(pe=>{const le=pe.whole.begin<=B&&pe.endClipped>B,he=pe.whole.begin-B+l,Ae=pe.endClipped-B+l-g,ye=pe.value?.color||S,Me=F||le?ye:E,ge=$?1-Math.abs((pe.whole.begin-B)/ie):1;spiralSegment({ctx:k,...re,from:he,to:Ae,rotate:me,color:Me,fromOpacity:ge,toOpacity:ge})}),spiralSegment({ctx:k,...de,rotate:me})}Pattern$1.prototype.spiral=function(e={}){return this.onPaint((t,o,a,u)=>drawSpiral({ctx:t,time:o,haps:a,drawTime:u,...e}))};const c=midiToFreq$2(36),circlePos=(e,t,o,a)=>{a=a*Math.PI*2;const u=Math.sin(a)*o+e,l=Math.cos(a)*o+t;return[u,l]},freq2angle=(e,t)=>.5-Math.log2(e/t)%1;function pitchwheel({haps:e,ctx:t,id:o,hapcircles:a=1,circle:u=0,edo:l=12,root:p=c,thickness:f=3,hapRadius:d=6,mode:g="flake",margin:b=10}={}){const S=g==="polygon",E=g==="flake",F=t.canvas.width,$=t.canvas.height;t.clearRect(0,0,F,$);const k=getTheme().foreground,V=Math.min(F,$)/2-f/2-d-b,U=F/2,ee=$/2;o&&(e=e.filter(O=>O.hasTag(o))),t.strokeStyle=k,t.fillStyle=k,t.globalAlpha=1,t.lineWidth=f,u&&(t.beginPath(),t.arc(U,ee,V,0,2*Math.PI),t.stroke()),l&&(Array.from({length:l},(O,q)=>{const te=freq2angle(p*Math.pow(2,q/l),p),[re,de]=circlePos(U,ee,V,te);t.beginPath(),t.arc(re,de,d,0,2*Math.PI),t.fill()}),t.stroke());let j=[];t.lineWidth=d,e.forEach(O=>{let q;try{q=getFrequency(O)}catch{return}const te=freq2angle(q,p),[re,de]=circlePos(U,ee,V,te),ie=O.value.color||k;t.strokeStyle=ie,t.fillStyle=ie;const{velocity:me=1,gain:pe=1}=O.value||{},le=me*pe;t.globalAlpha=le,j.push([re,de,te,ie,le]),t.beginPath(),a&&(t.moveTo(re+d,de),t.arc(re,de,d,0,2*Math.PI),t.fill()),E&&(t.moveTo(U,ee),t.lineTo(re,de)),t.stroke()}),t.strokeStyle=k,t.globalAlpha=1,S&&j.length&&(j=j.sort((O,q)=>O[2]-q[2]),t.beginPath(),t.moveTo(j[0][0],j[0][1]),j.forEach(([O,q,te,re,de])=>{t.strokeStyle=re,t.globalAlpha=de,t.lineTo(O,q)}),t.lineTo(j[0][0],j[0][1]),t.stroke())}Pattern$1.prototype.pitchwheel=function(e={}){let{ctx:t=getDrawContext(),id:o=1}=e;return this.tag(o).onPaint((a,u,l)=>pitchwheel({...e,ctx:t,haps:l.filter(p=>p.isActive(u)),id:o}))};function drawTimeScope(e,{align:t=!0,color:o="white",thickness:a=3,scale:u=.25,pos:l=.75,trigger:p=0,ctx:f=getDrawContext(),id:d=1}={}){f.lineWidth=a,f.strokeStyle=o;let g=f.canvas;if(!e){f.beginPath();let k=l*g.height;f.moveTo(0,k),f.lineTo(g.width,k),f.stroke();return}const b=getAnalyzerData("time",d);f.beginPath();const S=e.frequencyBinCount;let E=t?Array.from(b).findIndex((k,B,V)=>B&&V[B-1]>-p&&k<=-p):0;E=Math.max(E,0);const F=g.width*1/S;let $=0;for(let k=E;k<S;k++){const B=b[k]+1,V=(l-u*(B-1))*g.height;k===0?f.moveTo($,V):f.lineTo($,V),$+=F}f.stroke()}function drawFrequencyScope(e,{color:t="white",scale:o=.25,pos:a=.75,lean:u=.5,min:l=-150,max:p=0,ctx:f=getDrawContext(),id:d=1}={}){if(!e){f.beginPath();let $=a*b.height;f.moveTo(0,$),f.lineTo(b.width,$),f.stroke();return}const g=getAnalyzerData("frequency",d),b=f.canvas;f.fillStyle=t;const S=e.frequencyBinCount,E=b.width*1/S;let F=0;for(let $=0;$<S;$++){const B=clamp$1((g[$]-l)/(p-l),0,1)*o,V=B*b.height,U=(a-B*u)*b.height;f.fillRect(F,U,Math.max(E,1),V),F+=E}}function clearScreen(e=0,t="0,0,0",o=getDrawContext()){e?(o.fillStyle=`rgba(${t},${1-e})`,o.fillRect(0,0,o.canvas.width,o.canvas.height)):o.clearRect(0,0,o.canvas.width,o.canvas.height)}Pattern$1.prototype.fscope=function(e={}){let t=e.id??1;return this.analyze(t).draw(()=>{clearScreen(e.smear,"0,0,0",e.ctx),analysers[t]&&drawFrequencyScope(analysers[t],e)},{id:t})},Pattern$1.prototype.tscope=function(e={}){let t=e.id??1;return this.analyze(t).draw(o=>{e.color=o[0]?.value?.color||getTheme().foreground,e.color,clearScreen(e.smear,"0,0,0",e.ctx),drawTimeScope(analysers[t],e)},{id:t})},Pattern$1.prototype.scope=Pattern$1.prototype.tscope;let latestColor={};Pattern$1.prototype.spectrum=function(e={}){let t=e.id??1;return this.analyze(t).draw(o=>{e.color=o[0]?.value?.color||latestColor[t]||getTheme().foreground,latestColor[t]=e.color,drawSpectrum(analysers[t],e)},{id:t})},Pattern$1.prototype.scope=Pattern$1.prototype.tscope;const lastFrames=new Map;function drawSpectrum(e,{thickness:t=3,speed:o=1,min:a=-80,max:u=0,ctx:l=getDrawContext(),id:p=1,color:f}={}){if(l.lineWidth=t,l.strokeStyle=f,!e)return;const d=o,g=getAnalyzerData("frequency",p),b=l.canvas;l.fillStyle=f;const S=e.frequencyBinCount;let E=lastFrames.get(p)||l.getImageData(0,0,b.width,b.height);lastFrames.set(p,E),l.clearRect(0,0,l.canvas.width,l.canvas.height),l.putImageData(E,-d,0);let F=b.width-o;for(let $=0;$<S;$++){const k=clamp$1((g[$]-a)/(u-a),0,1);l.globalAlpha=k;const B=Math.log($+1)/Math.log(S)*b.height;l.fillRect(F,b.height-B,d,2)}lastFrames.set(p,l.getImageData(0,0,b.width,b.height))}const strudelWebAudio=Object.freeze(Object.defineProperty({__proto__:null,DEFAULT_MAX_POLYPHONY,Warpmode,aliasBank,get analysers(){return analysers},get analysersData(){return analysersData},applyFM,applyGainCurve,applyParameterModulators,connectToDestination,createFilter,destroyAudioWorkletNode,distortionAlgorithms,dough,doughTrigger,doughsamples,drawFrequencyScope,drawTimeScope,drywet,dspWorklet,effectSend,errorLogger,gainNode,getADSRValues,getAnalyserById,getAnalyzerData,getAudioContext,getAudioContextCurrentTime,getAudioDevices,getCachedBuffer,getCompressor,getDefaultValue,getDistortion,getDistortionAlgorithm,getFrequencyFromValue,getLfo,getLoadedBuffer,getOscillator,getParamADSR,getParamLfo,getPitchEnvelope,getSampleBuffer,getSampleBufferSource,getSampleInfo,getSound,getSuperdoughAudioController,getVibratoOscillator,getWorklet,getZZFX,initAudio,initAudioOnFirstClick,loadBuffer:loadBuffer$1,logger:logger$1,noises,onTriggerSample,onTriggerSynth,processSampleMap,registerSampleSource,registerSamplesPrefix,registerSound,registerSynthSounds,registerWaveTable,registerWorklet,registerZZFXSounds,resetDefaultValues,resetDefaults,resetGlobalEffects,resetLoadedSounds,reverseBuffer,samples,scheduleAtTime,setDefault,setDefaultAudioContext,setDefaultValue,setDefaultValues,setGainCurve,setLogger,setMaxPolyphony,setMultiChannelOrbits,setVersionDefaults,soundAlias,soundMap:soundMap$1,superdough,superdoughTrigger,tables,waveformN,webAudioTimeout,webaudioOutput,webaudioRepl},Symbol.toStringTag,{value:"Module"}));var astralIdentifierCodes=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,7,9,32,4,318,1,80,3,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,68,8,2,0,3,0,2,3,2,4,2,0,15,1,83,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,7,19,58,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,343,9,54,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,10,5350,0,7,14,11465,27,2343,9,87,9,39,4,60,6,26,9,535,9,470,0,2,54,8,3,82,0,12,1,19628,1,4178,9,519,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,245,1,2,9,726,6,110,6,6,9,4759,9,787719,239],astralIdentifierStartCodes=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,4,51,13,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,39,27,10,22,251,41,7,1,17,2,60,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,31,9,2,0,3,0,2,37,2,0,26,0,2,0,45,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,200,32,32,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,26,3994,6,582,6842,29,1763,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,433,44,212,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,42,9,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,229,29,3,0,496,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],nonASCIIidentifierChars="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࢗ-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‌‍‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯・꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿･",nonASCIIidentifierStartChars="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲊᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟍꟐꟑꟓꟕ-Ƛꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",reservedWords={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},ecma5AndLessKeywords="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",keywords$1={5:ecma5AndLessKeywords,"5module":ecma5AndLessKeywords+" export import",6:ecma5AndLessKeywords+" const class extends export import super"},keywordRelationalOperator=/^in(stanceof)?$/,nonASCIIidentifierStart=new RegExp("["+nonASCIIidentifierStartChars+"]"),nonASCIIidentifier=new RegExp("["+nonASCIIidentifierStartChars+nonASCIIidentifierChars+"]");function isInAstralSet(e,t){for(var o=65536,a=0;a<t.length;a+=2){if(o+=t[a],o>e)return!1;if(o+=t[a+1],o>=e)return!0}return!1}function isIdentifierStart(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&nonASCIIidentifierStart.test(String.fromCharCode(e)):t===!1?!1:isInAstralSet(e,astralIdentifierStartCodes)}function isIdentifierChar(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&nonASCIIidentifier.test(String.fromCharCode(e)):t===!1?!1:isInAstralSet(e,astralIdentifierStartCodes)||isInAstralSet(e,astralIdentifierCodes)}var TokenType=function(t,o){o===void 0&&(o={}),this.label=t,this.keyword=o.keyword,this.beforeExpr=!!o.beforeExpr,this.startsExpr=!!o.startsExpr,this.isLoop=!!o.isLoop,this.isAssign=!!o.isAssign,this.prefix=!!o.prefix,this.postfix=!!o.postfix,this.binop=o.binop||null,this.updateContext=null};function binop(e,t){return new TokenType(e,{beforeExpr:!0,binop:t})}var beforeExpr={beforeExpr:!0},startsExpr={startsExpr:!0},keywords={};function kw(e,t){return t===void 0&&(t={}),t.keyword=e,keywords[e]=new TokenType(e,t)}var types$1={num:new TokenType("num",startsExpr),regexp:new TokenType("regexp",startsExpr),string:new TokenType("string",startsExpr),name:new TokenType("name",startsExpr),privateId:new TokenType("privateId",startsExpr),eof:new TokenType("eof"),bracketL:new TokenType("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new TokenType("]"),braceL:new TokenType("{",{beforeExpr:!0,startsExpr:!0}),braceR:new TokenType("}"),parenL:new TokenType("(",{beforeExpr:!0,startsExpr:!0}),parenR:new TokenType(")"),comma:new TokenType(",",beforeExpr),semi:new TokenType(";",beforeExpr),colon:new TokenType(":",beforeExpr),dot:new TokenType("."),question:new TokenType("?",beforeExpr),questionDot:new TokenType("?."),arrow:new TokenType("=>",beforeExpr),template:new TokenType("template"),invalidTemplate:new TokenType("invalidTemplate"),ellipsis:new TokenType("...",beforeExpr),backQuote:new TokenType("`",startsExpr),dollarBraceL:new TokenType("${",{beforeExpr:!0,startsExpr:!0}),eq:new TokenType("=",{beforeExpr:!0,isAssign:!0}),assign:new TokenType("_=",{beforeExpr:!0,isAssign:!0}),incDec:new TokenType("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new TokenType("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:binop("||",1),logicalAND:binop("&&",2),bitwiseOR:binop("|",3),bitwiseXOR:binop("^",4),bitwiseAND:binop("&",5),equality:binop("==/!=/===/!==",6),relational:binop("</>/<=/>=",7),bitShift:binop("<</>>/>>>",8),plusMin:new TokenType("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:binop("%",10),star:binop("*",10),slash:binop("/",10),starstar:new TokenType("**",{beforeExpr:!0}),coalesce:binop("??",1),_break:kw("break"),_case:kw("case",beforeExpr),_catch:kw("catch"),_continue:kw("continue"),_debugger:kw("debugger"),_default:kw("default",beforeExpr),_do:kw("do",{isLoop:!0,beforeExpr:!0}),_else:kw("else",beforeExpr),_finally:kw("finally"),_for:kw("for",{isLoop:!0}),_function:kw("function",startsExpr),_if:kw("if"),_return:kw("return",beforeExpr),_switch:kw("switch"),_throw:kw("throw",beforeExpr),_try:kw("try"),_var:kw("var"),_const:kw("const"),_while:kw("while",{isLoop:!0}),_with:kw("with"),_new:kw("new",{beforeExpr:!0,startsExpr:!0}),_this:kw("this",startsExpr),_super:kw("super",startsExpr),_class:kw("class",startsExpr),_extends:kw("extends",beforeExpr),_export:kw("export"),_import:kw("import",startsExpr),_null:kw("null",startsExpr),_true:kw("true",startsExpr),_false:kw("false",startsExpr),_in:kw("in",{beforeExpr:!0,binop:7}),_instanceof:kw("instanceof",{beforeExpr:!0,binop:7}),_typeof:kw("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:kw("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:kw("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},lineBreak=/\r\n?|\n|\u2028|\u2029/,lineBreakG=new RegExp(lineBreak.source,"g");function isNewLine(e){return e===10||e===13||e===8232||e===8233}function nextLineBreak(e,t,o){o===void 0&&(o=e.length);for(var a=t;a<o;a++){var u=e.charCodeAt(a);if(isNewLine(u))return a<o-1&&u===13&&e.charCodeAt(a+1)===10?a+2:a+1}return-1}var nonASCIIwhitespace=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,skipWhiteSpace=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,ref=Object.prototype,hasOwnProperty=ref.hasOwnProperty,toString=ref.toString,hasOwn=Object.hasOwn||(function(e,t){return hasOwnProperty.call(e,t)}),isArray=Array.isArray||(function(e){return toString.call(e)==="[object Array]"}),regexpCache=Object.create(null);function wordsRegexp(e){return regexpCache[e]||(regexpCache[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function codePointToString(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var loneSurrogate=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,Position=function(t,o){this.line=t,this.column=o};Position.prototype.offset=function(t){return new Position(this.line,this.column+t)};var SourceLocation=function(t,o,a){this.start=o,this.end=a,t.sourceFile!==null&&(this.source=t.sourceFile)};function getLineInfo(e,t){for(var o=1,a=0;;){var u=nextLineBreak(e,a,t);if(u<0)return new Position(o,t-a);++o,a=u}}var defaultOptions={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},warnedAboutEcmaVersion=!1;function getOptions(e){var t={};for(var o in defaultOptions)t[o]=e&&hasOwn(e,o)?e[o]:defaultOptions[o];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!warnedAboutEcmaVersion&&typeof console=="object"&&console.warn&&(warnedAboutEcmaVersion=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),isArray(t.onToken)){var a=t.onToken;t.onToken=function(u){return a.push(u)}}return isArray(t.onComment)&&(t.onComment=pushComment(t,t.onComment)),t}function pushComment(e,t){return function(o,a,u,l,p,f){var d={type:o?"Block":"Line",value:a,start:u,end:l};e.locations&&(d.loc=new SourceLocation(this,p,f)),e.ranges&&(d.range=[u,l]),t.push(d)}}var SCOPE_TOP=1,SCOPE_FUNCTION=2,SCOPE_ASYNC=4,SCOPE_GENERATOR=8,SCOPE_ARROW=16,SCOPE_SIMPLE_CATCH=32,SCOPE_SUPER=64,SCOPE_DIRECT_SUPER=128,SCOPE_CLASS_STATIC_BLOCK=256,SCOPE_CLASS_FIELD_INIT=512,SCOPE_VAR=SCOPE_TOP|SCOPE_FUNCTION|SCOPE_CLASS_STATIC_BLOCK;function functionFlags(e,t){return SCOPE_FUNCTION|(e?SCOPE_ASYNC:0)|(t?SCOPE_GENERATOR:0)}var BIND_NONE=0,BIND_VAR=1,BIND_LEXICAL=2,BIND_FUNCTION=3,BIND_SIMPLE_CATCH=4,BIND_OUTSIDE=5,Parser=function(t,o,a){this.options=t=getOptions(t),this.sourceFile=t.sourceFile,this.keywords=wordsRegexp(keywords$1[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var u="";t.allowReserved!==!0&&(u=reservedWords[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(u+=" await")),this.reservedWords=wordsRegexp(u);var l=(u?u+" ":"")+reservedWords.strict;this.reservedWordsStrict=wordsRegexp(l),this.reservedWordsStrictBind=wordsRegexp(l+" "+reservedWords.strictBind),this.input=String(o),this.containsEsc=!1,a?(this.pos=a,this.lineStart=this.input.lastIndexOf(`
`,a-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(lineBreak).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=types$1.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(SCOPE_TOP),this.regexpState=null,this.privateNameStack=[]},prototypeAccessors={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Parser.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)},prototypeAccessors.inFunction.get=function(){return(this.currentVarScope().flags&SCOPE_FUNCTION)>0},prototypeAccessors.inGenerator.get=function(){return(this.currentVarScope().flags&SCOPE_GENERATOR)>0},prototypeAccessors.inAsync.get=function(){return(this.currentVarScope().flags&SCOPE_ASYNC)>0},prototypeAccessors.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e],o=t.flags;if(o&(SCOPE_CLASS_STATIC_BLOCK|SCOPE_CLASS_FIELD_INIT))return!1;if(o&SCOPE_FUNCTION)return(o&SCOPE_ASYNC)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},prototypeAccessors.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags;return(t&SCOPE_SUPER)>0||this.options.allowSuperOutsideMethod},prototypeAccessors.allowDirectSuper.get=function(){return(this.currentThisScope().flags&SCOPE_DIRECT_SUPER)>0},prototypeAccessors.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},prototypeAccessors.allowNewDotTarget.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e],o=t.flags;if(o&(SCOPE_CLASS_STATIC_BLOCK|SCOPE_CLASS_FIELD_INIT)||o&SCOPE_FUNCTION&&!(o&SCOPE_ARROW))return!0}return!1},prototypeAccessors.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&SCOPE_CLASS_STATIC_BLOCK)>0},Parser.extend=function(){for(var t=[],o=arguments.length;o--;)t[o]=arguments[o];for(var a=this,u=0;u<t.length;u++)a=t[u](a);return a},Parser.parse=function(t,o){return new this(o,t).parse()},Parser.parseExpressionAt=function(t,o,a){var u=new this(a,t,o);return u.nextToken(),u.parseExpression()},Parser.tokenizer=function(t,o){return new this(o,t)},Object.defineProperties(Parser.prototype,prototypeAccessors);var pp$9=Parser.prototype,literal=/^(?:'((?:\\[^]|[^'\\])*?)'|"((?:\\[^]|[^"\\])*?)")/;pp$9.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){skipWhiteSpace.lastIndex=e,e+=skipWhiteSpace.exec(this.input)[0].length;var t=literal.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){skipWhiteSpace.lastIndex=e+t[0].length;var o=skipWhiteSpace.exec(this.input),a=o.index+o[0].length,u=this.input.charAt(a);return u===";"||u==="}"||lineBreak.test(o[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(u)||u==="!"&&this.input.charAt(a+1)==="=")}e+=t[0].length,skipWhiteSpace.lastIndex=e,e+=skipWhiteSpace.exec(this.input)[0].length,this.input[e]===";"&&e++}},pp$9.eat=function(e){return this.type===e?(this.next(),!0):!1},pp$9.isContextual=function(e){return this.type===types$1.name&&this.value===e&&!this.containsEsc},pp$9.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1},pp$9.expectContextual=function(e){this.eatContextual(e)||this.unexpected()},pp$9.canInsertSemicolon=function(){return this.type===types$1.eof||this.type===types$1.braceR||lineBreak.test(this.input.slice(this.lastTokEnd,this.start))},pp$9.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},pp$9.semicolon=function(){!this.eat(types$1.semi)&&!this.insertSemicolon()&&this.unexpected()},pp$9.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0},pp$9.expect=function(e){this.eat(e)||this.unexpected()},pp$9.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var DestructuringErrors=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};pp$9.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var o=t?e.parenthesizedAssign:e.parenthesizedBind;o>-1&&this.raiseRecoverable(o,t?"Assigning to rvalue":"Parenthesized pattern")}},pp$9.checkExpressionErrors=function(e,t){if(!e)return!1;var o=e.shorthandAssign,a=e.doubleProto;if(!t)return o>=0||a>=0;o>=0&&this.raise(o,"Shorthand property assignments are valid only in destructuring patterns"),a>=0&&this.raiseRecoverable(a,"Redefinition of __proto__ property")},pp$9.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},pp$9.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var pp$8=Parser.prototype;pp$8.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==types$1.eof;){var o=this.parseStatement(null,!0,t);e.body.push(o)}if(this.inModule)for(var a=0,u=Object.keys(this.undefinedExports);a<u.length;a+=1){var l=u[a];this.raiseRecoverable(this.undefinedExports[l].start,"Export '"+l+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var loopLabel={kind:"loop"},switchLabel={kind:"switch"};pp$8.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;skipWhiteSpace.lastIndex=this.pos;var t=skipWhiteSpace.exec(this.input),o=this.pos+t[0].length,a=this.input.charCodeAt(o);if(a===91||a===92)return!0;if(e)return!1;if(a===123||a>55295&&a<56320)return!0;if(isIdentifierStart(a,!0)){for(var u=o+1;isIdentifierChar(a=this.input.charCodeAt(u),!0);)++u;if(a===92||a>55295&&a<56320)return!0;var l=this.input.slice(o,u);if(!keywordRelationalOperator.test(l))return!0}return!1},pp$8.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;skipWhiteSpace.lastIndex=this.pos;var e=skipWhiteSpace.exec(this.input),t=this.pos+e[0].length,o;return!lineBreak.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(isIdentifierChar(o=this.input.charCodeAt(t+8))||o>55295&&o<56320))},pp$8.isUsingKeyword=function(e,t){if(this.options.ecmaVersion<17||!this.isContextual(e?"await":"using"))return!1;skipWhiteSpace.lastIndex=this.pos;var o=skipWhiteSpace.exec(this.input),a=this.pos+o[0].length;if(lineBreak.test(this.input.slice(this.pos,a)))return!1;if(e){var u=a+5,l;if(this.input.slice(a,u)!=="using"||u===this.input.length||isIdentifierChar(l=this.input.charCodeAt(u))||l>55295&&l<56320)return!1;skipWhiteSpace.lastIndex=u;var p=skipWhiteSpace.exec(this.input);if(p&&lineBreak.test(this.input.slice(u,u+p[0].length)))return!1}if(t){var f=a+2,d;if(this.input.slice(a,f)==="of"&&(f===this.input.length||!isIdentifierChar(d=this.input.charCodeAt(f))&&!(d>55295&&d<56320)))return!1}var g=this.input.charCodeAt(a);return isIdentifierStart(g,!0)||g===92},pp$8.isAwaitUsing=function(e){return this.isUsingKeyword(!0,e)},pp$8.isUsing=function(e){return this.isUsingKeyword(!1,e)},pp$8.parseStatement=function(e,t,o){var a=this.type,u=this.startNode(),l;switch(this.isLet(e)&&(a=types$1._var,l="let"),a){case types$1._break:case types$1._continue:return this.parseBreakContinueStatement(u,a.keyword);case types$1._debugger:return this.parseDebuggerStatement(u);case types$1._do:return this.parseDoStatement(u);case types$1._for:return this.parseForStatement(u);case types$1._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(u,!1,!e);case types$1._class:return e&&this.unexpected(),this.parseClass(u,!0);case types$1._if:return this.parseIfStatement(u);case types$1._return:return this.parseReturnStatement(u);case types$1._switch:return this.parseSwitchStatement(u);case types$1._throw:return this.parseThrowStatement(u);case types$1._try:return this.parseTryStatement(u);case types$1._const:case types$1._var:return l=l||this.value,e&&l!=="var"&&this.unexpected(),this.parseVarStatement(u,l);case types$1._while:return this.parseWhileStatement(u);case types$1._with:return this.parseWithStatement(u);case types$1.braceL:return this.parseBlock(!0,u);case types$1.semi:return this.parseEmptyStatement(u);case types$1._export:case types$1._import:if(this.options.ecmaVersion>10&&a===types$1._import){skipWhiteSpace.lastIndex=this.pos;var p=skipWhiteSpace.exec(this.input),f=this.pos+p[0].length,d=this.input.charCodeAt(f);if(d===40||d===46)return this.parseExpressionStatement(u,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),a===types$1._import?this.parseImport(u):this.parseExport(u,o);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(u,!0,!e);var g=this.isAwaitUsing(!1)?"await using":this.isUsing(!1)?"using":null;if(g)return t&&this.options.sourceType==="script"&&this.raise(this.start,"Using declaration cannot appear in the top level when source type is `script`"),g==="await using"&&(this.canAwait||this.raise(this.start,"Await using cannot appear outside of async function"),this.next()),this.next(),this.parseVar(u,!1,g),this.semicolon(),this.finishNode(u,"VariableDeclaration");var b=this.value,S=this.parseExpression();return a===types$1.name&&S.type==="Identifier"&&this.eat(types$1.colon)?this.parseLabeledStatement(u,b,S,e):this.parseExpressionStatement(u,S)}},pp$8.parseBreakContinueStatement=function(e,t){var o=t==="break";this.next(),this.eat(types$1.semi)||this.insertSemicolon()?e.label=null:this.type!==types$1.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var a=0;a<this.labels.length;++a){var u=this.labels[a];if((e.label==null||u.name===e.label.name)&&(u.kind!=null&&(o||u.kind==="loop")||e.label&&o))break}return a===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,o?"BreakStatement":"ContinueStatement")},pp$8.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")},pp$8.parseDoStatement=function(e){return this.next(),this.labels.push(loopLabel),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(types$1._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(types$1.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")},pp$8.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(loopLabel),this.enterScope(0),this.expect(types$1.parenL),this.type===types$1.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var o=this.isLet();if(this.type===types$1._var||this.type===types$1._const||o){var a=this.startNode(),u=o?"let":this.value;return this.next(),this.parseVar(a,!0,u),this.finishNode(a,"VariableDeclaration"),this.parseForAfterInit(e,a,t)}var l=this.isContextual("let"),p=!1,f=this.isUsing(!0)?"using":this.isAwaitUsing(!0)?"await using":null;if(f){var d=this.startNode();return this.next(),f==="await using"&&this.next(),this.parseVar(d,!0,f),this.finishNode(d,"VariableDeclaration"),this.parseForAfterInit(e,d,t)}var g=this.containsEsc,b=new DestructuringErrors,S=this.start,E=t>-1?this.parseExprSubscripts(b,"await"):this.parseExpression(!0,b);return this.type===types$1._in||(p=this.options.ecmaVersion>=6&&this.isContextual("of"))?(t>-1?(this.type===types$1._in&&this.unexpected(t),e.await=!0):p&&this.options.ecmaVersion>=8&&(E.start===S&&!g&&E.type==="Identifier"&&E.name==="async"?this.unexpected():this.options.ecmaVersion>=9&&(e.await=!1)),l&&p&&this.raise(E.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(E,!1,b),this.checkLValPattern(E),this.parseForIn(e,E)):(this.checkExpressionErrors(b,!0),t>-1&&this.unexpected(t),this.parseFor(e,E))},pp$8.parseForAfterInit=function(e,t,o){return(this.type===types$1._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&t.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===types$1._in?o>-1&&this.unexpected(o):e.await=o>-1),this.parseForIn(e,t)):(o>-1&&this.unexpected(o),this.parseFor(e,t))},pp$8.parseFunctionStatement=function(e,t,o){return this.next(),this.parseFunction(e,FUNC_STATEMENT|(o?0:FUNC_HANGING_STATEMENT),!1,t)},pp$8.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(types$1._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")},pp$8.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(types$1.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")},pp$8.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(types$1.braceL),this.labels.push(switchLabel),this.enterScope(0);for(var t,o=!1;this.type!==types$1.braceR;)if(this.type===types$1._case||this.type===types$1._default){var a=this.type===types$1._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),a?t.test=this.parseExpression():(o&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),o=!0,t.test=null),this.expect(types$1.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")},pp$8.parseThrowStatement=function(e){return this.next(),lineBreak.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var empty$1=[];pp$8.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?SCOPE_SIMPLE_CATCH:0),this.checkLValPattern(e,t?BIND_SIMPLE_CATCH:BIND_LEXICAL),this.expect(types$1.parenR),e},pp$8.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===types$1._catch){var t=this.startNode();this.next(),this.eat(types$1.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(types$1._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")},pp$8.parseVarStatement=function(e,t,o){return this.next(),this.parseVar(e,!1,t,o),this.semicolon(),this.finishNode(e,"VariableDeclaration")},pp$8.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(loopLabel),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")},pp$8.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")},pp$8.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")},pp$8.parseLabeledStatement=function(e,t,o,a){for(var u=0,l=this.labels;u<l.length;u+=1){var p=l[u];p.name===t&&this.raise(o.start,"Label '"+t+"' is already declared")}for(var f=this.type.isLoop?"loop":this.type===types$1._switch?"switch":null,d=this.labels.length-1;d>=0;d--){var g=this.labels[d];if(g.statementStart===e.start)g.statementStart=this.start,g.kind=f;else break}return this.labels.push({name:t,kind:f,statementStart:this.start}),e.body=this.parseStatement(a?a.indexOf("label")===-1?a+"label":a:"label"),this.labels.pop(),e.label=o,this.finishNode(e,"LabeledStatement")},pp$8.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")},pp$8.parseBlock=function(e,t,o){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(types$1.braceL),e&&this.enterScope(0);this.type!==types$1.braceR;){var a=this.parseStatement(null);t.body.push(a)}return o&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")},pp$8.parseFor=function(e,t){return e.init=t,this.expect(types$1.semi),e.test=this.type===types$1.semi?null:this.parseExpression(),this.expect(types$1.semi),e.update=this.type===types$1.parenR?null:this.parseExpression(),this.expect(types$1.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")},pp$8.parseForIn=function(e,t){var o=this.type===types$1._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!o||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(o?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=o?this.parseExpression():this.parseMaybeAssign(),this.expect(types$1.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,o?"ForInStatement":"ForOfStatement")},pp$8.parseVar=function(e,t,o,a){for(e.declarations=[],e.kind=o;;){var u=this.startNode();if(this.parseVarId(u,o),this.eat(types$1.eq)?u.init=this.parseMaybeAssign(t):!a&&o==="const"&&!(this.type===types$1._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!a&&(o==="using"||o==="await using")&&this.options.ecmaVersion>=17&&this.type!==types$1._in&&!this.isContextual("of")?this.raise(this.lastTokEnd,"Missing initializer in "+o+" declaration"):!a&&u.id.type!=="Identifier"&&!(t&&(this.type===types$1._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):u.init=null,e.declarations.push(this.finishNode(u,"VariableDeclarator")),!this.eat(types$1.comma))break}return e},pp$8.parseVarId=function(e,t){e.id=t==="using"||t==="await using"?this.parseIdent():this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?BIND_VAR:BIND_LEXICAL,!1)};var FUNC_STATEMENT=1,FUNC_HANGING_STATEMENT=2,FUNC_NULLABLE_ID=4;pp$8.parseFunction=function(e,t,o,a,u){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!a)&&(this.type===types$1.star&&t&FUNC_HANGING_STATEMENT&&this.unexpected(),e.generator=this.eat(types$1.star)),this.options.ecmaVersion>=8&&(e.async=!!a),t&FUNC_STATEMENT&&(e.id=t&FUNC_NULLABLE_ID&&this.type!==types$1.name?null:this.parseIdent(),e.id&&!(t&FUNC_HANGING_STATEMENT)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?BIND_VAR:BIND_LEXICAL:BIND_FUNCTION));var l=this.yieldPos,p=this.awaitPos,f=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(functionFlags(e.async,e.generator)),t&FUNC_STATEMENT||(e.id=this.type===types$1.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,o,!1,u),this.yieldPos=l,this.awaitPos=p,this.awaitIdentPos=f,this.finishNode(e,t&FUNC_STATEMENT?"FunctionDeclaration":"FunctionExpression")},pp$8.parseFunctionParams=function(e){this.expect(types$1.parenL),e.params=this.parseBindingList(types$1.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},pp$8.parseClass=function(e,t){this.next();var o=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var a=this.enterClassBody(),u=this.startNode(),l=!1;for(u.body=[],this.expect(types$1.braceL);this.type!==types$1.braceR;){var p=this.parseClassElement(e.superClass!==null);p&&(u.body.push(p),p.type==="MethodDefinition"&&p.kind==="constructor"?(l&&this.raiseRecoverable(p.start,"Duplicate constructor in the same class"),l=!0):p.key&&p.key.type==="PrivateIdentifier"&&isPrivateNameConflicted(a,p)&&this.raiseRecoverable(p.key.start,"Identifier '#"+p.key.name+"' has already been declared"))}return this.strict=o,this.next(),e.body=this.finishNode(u,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")},pp$8.parseClassElement=function(e){if(this.eat(types$1.semi))return null;var t=this.options.ecmaVersion,o=this.startNode(),a="",u=!1,l=!1,p="method",f=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(types$1.braceL))return this.parseClassStaticBlock(o),o;this.isClassElementNameStart()||this.type===types$1.star?f=!0:a="static"}if(o.static=f,!a&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===types$1.star)&&!this.canInsertSemicolon()?l=!0:a="async"),!a&&(t>=9||!l)&&this.eat(types$1.star)&&(u=!0),!a&&!l&&!u){var d=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?p=d:a=d)}if(a?(o.computed=!1,o.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),o.key.name=a,this.finishNode(o.key,"Identifier")):this.parseClassElementName(o),t<13||this.type===types$1.parenL||p!=="method"||u||l){var g=!o.static&&checkKeyName(o,"constructor"),b=g&&e;g&&p!=="method"&&this.raise(o.key.start,"Constructor can't have get/set modifier"),o.kind=g?"constructor":p,this.parseClassMethod(o,u,l,b)}else this.parseClassField(o);return o},pp$8.isClassElementNameStart=function(){return this.type===types$1.name||this.type===types$1.privateId||this.type===types$1.num||this.type===types$1.string||this.type===types$1.bracketL||this.type.keyword},pp$8.parseClassElementName=function(e){this.type===types$1.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)},pp$8.parseClassMethod=function(e,t,o,a){var u=e.key;e.kind==="constructor"?(t&&this.raise(u.start,"Constructor can't be a generator"),o&&this.raise(u.start,"Constructor can't be an async method")):e.static&&checkKeyName(e,"prototype")&&this.raise(u.start,"Classes may not have a static property named prototype");var l=e.value=this.parseMethod(t,o,a);return e.kind==="get"&&l.params.length!==0&&this.raiseRecoverable(l.start,"getter should have no params"),e.kind==="set"&&l.params.length!==1&&this.raiseRecoverable(l.start,"setter should have exactly one param"),e.kind==="set"&&l.params[0].type==="RestElement"&&this.raiseRecoverable(l.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")},pp$8.parseClassField=function(e){return checkKeyName(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&checkKeyName(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(types$1.eq)?(this.enterScope(SCOPE_CLASS_FIELD_INIT|SCOPE_SUPER),e.value=this.parseMaybeAssign(),this.exitScope()):e.value=null,this.semicolon(),this.finishNode(e,"PropertyDefinition")},pp$8.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(SCOPE_CLASS_STATIC_BLOCK|SCOPE_SUPER);this.type!==types$1.braceR;){var o=this.parseStatement(null);e.body.push(o)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")},pp$8.parseClassId=function(e,t){this.type===types$1.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,BIND_LEXICAL,!1)):(t===!0&&this.unexpected(),e.id=null)},pp$8.parseClassSuper=function(e){e.superClass=this.eat(types$1._extends)?this.parseExprSubscripts(null,!1):null},pp$8.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared},pp$8.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,o=e.used;if(this.options.checkPrivateFields)for(var a=this.privateNameStack.length,u=a===0?null:this.privateNameStack[a-1],l=0;l<o.length;++l){var p=o[l];hasOwn(t,p.name)||(u?u.used.push(p):this.raiseRecoverable(p.start,"Private field '#"+p.name+"' must be declared in an enclosing class"))}};function isPrivateNameConflicted(e,t){var o=t.key.name,a=e[o],u="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(u=(t.static?"s":"i")+t.kind),a==="iget"&&u==="iset"||a==="iset"&&u==="iget"||a==="sget"&&u==="sset"||a==="sset"&&u==="sget"?(e[o]="true",!1):a?!0:(e[o]=u,!1)}function checkKeyName(e,t){var o=e.computed,a=e.key;return!o&&(a.type==="Identifier"&&a.name===t||a.type==="Literal"&&a.value===t)}pp$8.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==types$1.string&&this.unexpected(),e.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(e.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")},pp$8.parseExport=function(e,t){if(this.next(),this.eat(types$1.star))return this.parseExportAllDeclaration(e,t);if(this.eat(types$1._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null,this.options.ecmaVersion>=16&&(e.attributes=[]);else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==types$1.string&&this.unexpected(),e.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(e.attributes=this.parseWithClause());else{for(var o=0,a=e.specifiers;o<a.length;o+=1){var u=a[o];this.checkUnreserved(u.local),this.checkLocalExport(u.local),u.local.type==="Literal"&&this.raise(u.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null,this.options.ecmaVersion>=16&&(e.attributes=[])}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")},pp$8.parseExportDeclaration=function(e){return this.parseStatement(null)},pp$8.parseExportDefaultDeclaration=function(){var e;if(this.type===types$1._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,FUNC_STATEMENT|FUNC_NULLABLE_ID,!1,e)}else if(this.type===types$1._class){var o=this.startNode();return this.parseClass(o,"nullableID")}else{var a=this.parseMaybeAssign();return this.semicolon(),a}},pp$8.checkExport=function(e,t,o){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),hasOwn(e,t)&&this.raiseRecoverable(o,"Duplicate export '"+t+"'"),e[t]=!0)},pp$8.checkPatternExport=function(e,t){var o=t.type;if(o==="Identifier")this.checkExport(e,t,t.start);else if(o==="ObjectPattern")for(var a=0,u=t.properties;a<u.length;a+=1){var l=u[a];this.checkPatternExport(e,l)}else if(o==="ArrayPattern")for(var p=0,f=t.elements;p<f.length;p+=1){var d=f[p];d&&this.checkPatternExport(e,d)}else o==="Property"?this.checkPatternExport(e,t.value):o==="AssignmentPattern"?this.checkPatternExport(e,t.left):o==="RestElement"&&this.checkPatternExport(e,t.argument)},pp$8.checkVariableExport=function(e,t){if(e)for(var o=0,a=t;o<a.length;o+=1){var u=a[o];this.checkPatternExport(e,u.id)}},pp$8.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()},pp$8.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")},pp$8.parseExportSpecifiers=function(e){var t=[],o=!0;for(this.expect(types$1.braceL);!this.eat(types$1.braceR);){if(o)o=!1;else if(this.expect(types$1.comma),this.afterTrailingComma(types$1.braceR))break;t.push(this.parseExportSpecifier(e))}return t},pp$8.parseImport=function(e){return this.next(),this.type===types$1.string?(e.specifiers=empty$1,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===types$1.string?this.parseExprAtom():this.unexpected()),this.options.ecmaVersion>=16&&(e.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(e,"ImportDeclaration")},pp$8.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,BIND_LEXICAL),this.finishNode(e,"ImportSpecifier")},pp$8.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,BIND_LEXICAL),this.finishNode(e,"ImportDefaultSpecifier")},pp$8.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,BIND_LEXICAL),this.finishNode(e,"ImportNamespaceSpecifier")},pp$8.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===types$1.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(types$1.comma)))return e;if(this.type===types$1.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(types$1.braceL);!this.eat(types$1.braceR);){if(t)t=!1;else if(this.expect(types$1.comma),this.afterTrailingComma(types$1.braceR))break;e.push(this.parseImportSpecifier())}return e},pp$8.parseWithClause=function(){var e=[];if(!this.eat(types$1._with))return e;this.expect(types$1.braceL);for(var t={},o=!0;!this.eat(types$1.braceR);){if(o)o=!1;else if(this.expect(types$1.comma),this.afterTrailingComma(types$1.braceR))break;var a=this.parseImportAttribute(),u=a.key.type==="Identifier"?a.key.name:a.key.value;hasOwn(t,u)&&this.raiseRecoverable(a.key.start,"Duplicate attribute key '"+u+"'"),t[u]=!0,e.push(a)}return e},pp$8.parseImportAttribute=function(){var e=this.startNode();return e.key=this.type===types$1.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never"),this.expect(types$1.colon),this.type!==types$1.string&&this.unexpected(),e.value=this.parseExprAtom(),this.finishNode(e,"ImportAttribute")},pp$8.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===types$1.string){var e=this.parseLiteral(this.value);return loneSurrogate.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)},pp$8.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)},pp$8.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var pp$7=Parser.prototype;pp$7.toAssignable=function(e,t,o){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",o&&this.checkPatternErrors(o,!0);for(var a=0,u=e.properties;a<u.length;a+=1){var l=u[a];this.toAssignable(l,t),l.type==="RestElement"&&(l.argument.type==="ArrayPattern"||l.argument.type==="ObjectPattern")&&this.raise(l.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",o&&this.checkPatternErrors(o,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,o);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else o&&this.checkPatternErrors(o,!0);return e},pp$7.toAssignableList=function(e,t){for(var o=e.length,a=0;a<o;a++){var u=e[a];u&&this.toAssignable(u,t)}if(o){var l=e[o-1];this.options.ecmaVersion===6&&t&&l&&l.type==="RestElement"&&l.argument.type!=="Identifier"&&this.unexpected(l.argument.start)}return e},pp$7.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")},pp$7.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==types$1.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")},pp$7.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case types$1.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(types$1.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case types$1.braceL:return this.parseObj(!0)}return this.parseIdent()},pp$7.parseBindingList=function(e,t,o,a){for(var u=[],l=!0;!this.eat(e);)if(l?l=!1:this.expect(types$1.comma),t&&this.type===types$1.comma)u.push(null);else{if(o&&this.afterTrailingComma(e))break;if(this.type===types$1.ellipsis){var p=this.parseRestBinding();this.parseBindingListItem(p),u.push(p),this.type===types$1.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else u.push(this.parseAssignableListItem(a))}return u},pp$7.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t},pp$7.parseBindingListItem=function(e){return e},pp$7.parseMaybeDefault=function(e,t,o){if(o=o||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(types$1.eq))return o;var a=this.startNodeAt(e,t);return a.left=o,a.right=this.parseMaybeAssign(),this.finishNode(a,"AssignmentPattern")},pp$7.checkLValSimple=function(e,t,o){t===void 0&&(t=BIND_NONE);var a=t!==BIND_NONE;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(a?"Binding ":"Assigning to ")+e.name+" in strict mode"),a&&(t===BIND_LEXICAL&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),o&&(hasOwn(o,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),o[e.name]=!0),t!==BIND_OUTSIDE&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":a&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return a&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,o);default:this.raise(e.start,(a?"Binding":"Assigning to")+" rvalue")}},pp$7.checkLValPattern=function(e,t,o){switch(t===void 0&&(t=BIND_NONE),e.type){case"ObjectPattern":for(var a=0,u=e.properties;a<u.length;a+=1){var l=u[a];this.checkLValInnerPattern(l,t,o)}break;case"ArrayPattern":for(var p=0,f=e.elements;p<f.length;p+=1){var d=f[p];d&&this.checkLValInnerPattern(d,t,o)}break;default:this.checkLValSimple(e,t,o)}},pp$7.checkLValInnerPattern=function(e,t,o){switch(t===void 0&&(t=BIND_NONE),e.type){case"Property":this.checkLValInnerPattern(e.value,t,o);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,o);break;case"RestElement":this.checkLValPattern(e.argument,t,o);break;default:this.checkLValPattern(e,t,o)}};var TokContext=function(t,o,a,u,l){this.token=t,this.isExpr=!!o,this.preserveSpace=!!a,this.override=u,this.generator=!!l},types={b_stat:new TokContext("{",!1),b_expr:new TokContext("{",!0),b_tmpl:new TokContext("${",!1),p_stat:new TokContext("(",!1),p_expr:new TokContext("(",!0),q_tmpl:new TokContext("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new TokContext("function",!1),f_expr:new TokContext("function",!0),f_expr_gen:new TokContext("function",!0,!1,null,!0),f_gen:new TokContext("function",!1,!1,null,!0)},pp$6=Parser.prototype;pp$6.initialContext=function(){return[types.b_stat]},pp$6.curContext=function(){return this.context[this.context.length-1]},pp$6.braceIsBlock=function(e){var t=this.curContext();return t===types.f_expr||t===types.f_stat?!0:e===types$1.colon&&(t===types.b_stat||t===types.b_expr)?!t.isExpr:e===types$1._return||e===types$1.name&&this.exprAllowed?lineBreak.test(this.input.slice(this.lastTokEnd,this.start)):e===types$1._else||e===types$1.semi||e===types$1.eof||e===types$1.parenR||e===types$1.arrow?!0:e===types$1.braceL?t===types.b_stat:e===types$1._var||e===types$1._const||e===types$1.name?!1:!this.exprAllowed},pp$6.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1},pp$6.updateContext=function(e){var t,o=this.type;o.keyword&&e===types$1.dot?this.exprAllowed=!1:(t=o.updateContext)?t.call(this,e):this.exprAllowed=o.beforeExpr},pp$6.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)},types$1.parenR.updateContext=types$1.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===types.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr},types$1.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?types.b_stat:types.b_expr),this.exprAllowed=!0},types$1.dollarBraceL.updateContext=function(){this.context.push(types.b_tmpl),this.exprAllowed=!0},types$1.parenL.updateContext=function(e){var t=e===types$1._if||e===types$1._for||e===types$1._with||e===types$1._while;this.context.push(t?types.p_stat:types.p_expr),this.exprAllowed=!0},types$1.incDec.updateContext=function(){},types$1._function.updateContext=types$1._class.updateContext=function(e){e.beforeExpr&&e!==types$1._else&&!(e===types$1.semi&&this.curContext()!==types.p_stat)&&!(e===types$1._return&&lineBreak.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===types$1.colon||e===types$1.braceL)&&this.curContext()===types.b_stat)?this.context.push(types.f_expr):this.context.push(types.f_stat),this.exprAllowed=!1},types$1.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0},types$1.backQuote.updateContext=function(){this.curContext()===types.q_tmpl?this.context.pop():this.context.push(types.q_tmpl),this.exprAllowed=!1},types$1.star.updateContext=function(e){if(e===types$1._function){var t=this.context.length-1;this.context[t]===types.f_expr?this.context[t]=types.f_expr_gen:this.context[t]=types.f_gen}this.exprAllowed=!0},types$1.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==types$1.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var pp$5=Parser.prototype;pp$5.checkPropClash=function(e,t,o){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var a=e.key,u;switch(a.type){case"Identifier":u=a.name;break;case"Literal":u=String(a.value);break;default:return}var l=e.kind;if(this.options.ecmaVersion>=6){u==="__proto__"&&l==="init"&&(t.proto&&(o?o.doubleProto<0&&(o.doubleProto=a.start):this.raiseRecoverable(a.start,"Redefinition of __proto__ property")),t.proto=!0);return}u="$"+u;var p=t[u];if(p){var f;l==="init"?f=this.strict&&p.init||p.get||p.set:f=p.init||p[l],f&&this.raiseRecoverable(a.start,"Redefinition of property")}else p=t[u]={init:!1,get:!1,set:!1};p[l]=!0}},pp$5.parseExpression=function(e,t){var o=this.start,a=this.startLoc,u=this.parseMaybeAssign(e,t);if(this.type===types$1.comma){var l=this.startNodeAt(o,a);for(l.expressions=[u];this.eat(types$1.comma);)l.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(l,"SequenceExpression")}return u},pp$5.parseMaybeAssign=function(e,t,o){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var a=!1,u=-1,l=-1,p=-1;t?(u=t.parenthesizedAssign,l=t.trailingComma,p=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new DestructuringErrors,a=!0);var f=this.start,d=this.startLoc;(this.type===types$1.parenL||this.type===types$1.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var g=this.parseMaybeConditional(e,t);if(o&&(g=o.call(this,g,f,d)),this.type.isAssign){var b=this.startNodeAt(f,d);return b.operator=this.value,this.type===types$1.eq&&(g=this.toAssignable(g,!1,t)),a||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=g.start&&(t.shorthandAssign=-1),this.type===types$1.eq?this.checkLValPattern(g):this.checkLValSimple(g),b.left=g,this.next(),b.right=this.parseMaybeAssign(e),p>-1&&(t.doubleProto=p),this.finishNode(b,"AssignmentExpression")}else a&&this.checkExpressionErrors(t,!0);return u>-1&&(t.parenthesizedAssign=u),l>-1&&(t.trailingComma=l),g},pp$5.parseMaybeConditional=function(e,t){var o=this.start,a=this.startLoc,u=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return u;if(this.eat(types$1.question)){var l=this.startNodeAt(o,a);return l.test=u,l.consequent=this.parseMaybeAssign(),this.expect(types$1.colon),l.alternate=this.parseMaybeAssign(e),this.finishNode(l,"ConditionalExpression")}return u},pp$5.parseExprOps=function(e,t){var o=this.start,a=this.startLoc,u=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||u.start===o&&u.type==="ArrowFunctionExpression"?u:this.parseExprOp(u,o,a,-1,e)},pp$5.parseExprOp=function(e,t,o,a,u){var l=this.type.binop;if(l!=null&&(!u||this.type!==types$1._in)&&l>a){var p=this.type===types$1.logicalOR||this.type===types$1.logicalAND,f=this.type===types$1.coalesce;f&&(l=types$1.logicalAND.binop);var d=this.value;this.next();var g=this.start,b=this.startLoc,S=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,u),g,b,l,u),E=this.buildBinary(t,o,e,S,d,p||f);return(p&&this.type===types$1.coalesce||f&&(this.type===types$1.logicalOR||this.type===types$1.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(E,t,o,a,u)}return e},pp$5.buildBinary=function(e,t,o,a,u,l){a.type==="PrivateIdentifier"&&this.raise(a.start,"Private identifier can only be left side of binary expression");var p=this.startNodeAt(e,t);return p.left=o,p.operator=u,p.right=a,this.finishNode(p,l?"LogicalExpression":"BinaryExpression")},pp$5.parseMaybeUnary=function(e,t,o,a){var u=this.start,l=this.startLoc,p;if(this.isContextual("await")&&this.canAwait)p=this.parseAwait(a),t=!0;else if(this.type.prefix){var f=this.startNode(),d=this.type===types$1.incDec;f.operator=this.value,f.prefix=!0,this.next(),f.argument=this.parseMaybeUnary(null,!0,d,a),this.checkExpressionErrors(e,!0),d?this.checkLValSimple(f.argument):this.strict&&f.operator==="delete"&&isLocalVariableAccess(f.argument)?this.raiseRecoverable(f.start,"Deleting local variable in strict mode"):f.operator==="delete"&&isPrivateFieldAccess(f.argument)?this.raiseRecoverable(f.start,"Private fields can not be deleted"):t=!0,p=this.finishNode(f,d?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===types$1.privateId)(a||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),p=this.parsePrivateIdent(),this.type!==types$1._in&&this.unexpected();else{if(p=this.parseExprSubscripts(e,a),this.checkExpressionErrors(e))return p;for(;this.type.postfix&&!this.canInsertSemicolon();){var g=this.startNodeAt(u,l);g.operator=this.value,g.prefix=!1,g.argument=p,this.checkLValSimple(p),this.next(),p=this.finishNode(g,"UpdateExpression")}}if(!o&&this.eat(types$1.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(u,l,p,this.parseMaybeUnary(null,!1,!1,a),"**",!1);else return p};function isLocalVariableAccess(e){return e.type==="Identifier"||e.type==="ParenthesizedExpression"&&isLocalVariableAccess(e.expression)}function isPrivateFieldAccess(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&isPrivateFieldAccess(e.expression)||e.type==="ParenthesizedExpression"&&isPrivateFieldAccess(e.expression)}pp$5.parseExprSubscripts=function(e,t){var o=this.start,a=this.startLoc,u=this.parseExprAtom(e,t);if(u.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return u;var l=this.parseSubscripts(u,o,a,!1,t);return e&&l.type==="MemberExpression"&&(e.parenthesizedAssign>=l.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=l.start&&(e.parenthesizedBind=-1),e.trailingComma>=l.start&&(e.trailingComma=-1)),l},pp$5.parseSubscripts=function(e,t,o,a,u){for(var l=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,p=!1;;){var f=this.parseSubscript(e,t,o,a,l,p,u);if(f.optional&&(p=!0),f===e||f.type==="ArrowFunctionExpression"){if(p){var d=this.startNodeAt(t,o);d.expression=f,f=this.finishNode(d,"ChainExpression")}return f}e=f}},pp$5.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(types$1.arrow)},pp$5.parseSubscriptAsyncArrow=function(e,t,o,a){return this.parseArrowExpression(this.startNodeAt(e,t),o,!0,a)},pp$5.parseSubscript=function(e,t,o,a,u,l,p){var f=this.options.ecmaVersion>=11,d=f&&this.eat(types$1.questionDot);a&&d&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var g=this.eat(types$1.bracketL);if(g||d&&this.type!==types$1.parenL&&this.type!==types$1.backQuote||this.eat(types$1.dot)){var b=this.startNodeAt(t,o);b.object=e,g?(b.property=this.parseExpression(),this.expect(types$1.bracketR)):this.type===types$1.privateId&&e.type!=="Super"?b.property=this.parsePrivateIdent():b.property=this.parseIdent(this.options.allowReserved!=="never"),b.computed=!!g,f&&(b.optional=d),e=this.finishNode(b,"MemberExpression")}else if(!a&&this.eat(types$1.parenL)){var S=new DestructuringErrors,E=this.yieldPos,F=this.awaitPos,$=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var k=this.parseExprList(types$1.parenR,this.options.ecmaVersion>=8,!1,S);if(u&&!d&&this.shouldParseAsyncArrow())return this.checkPatternErrors(S,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=E,this.awaitPos=F,this.awaitIdentPos=$,this.parseSubscriptAsyncArrow(t,o,k,p);this.checkExpressionErrors(S,!0),this.yieldPos=E||this.yieldPos,this.awaitPos=F||this.awaitPos,this.awaitIdentPos=$||this.awaitIdentPos;var B=this.startNodeAt(t,o);B.callee=e,B.arguments=k,f&&(B.optional=d),e=this.finishNode(B,"CallExpression")}else if(this.type===types$1.backQuote){(d||l)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var V=this.startNodeAt(t,o);V.tag=e,V.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(V,"TaggedTemplateExpression")}return e},pp$5.parseExprAtom=function(e,t,o){this.type===types$1.slash&&this.readRegexp();var a,u=this.potentialArrowAt===this.start;switch(this.type){case types$1._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),a=this.startNode(),this.next(),this.type===types$1.parenL&&!this.allowDirectSuper&&this.raise(a.start,"super() call outside constructor of a subclass"),this.type!==types$1.dot&&this.type!==types$1.bracketL&&this.type!==types$1.parenL&&this.unexpected(),this.finishNode(a,"Super");case types$1._this:return a=this.startNode(),this.next(),this.finishNode(a,"ThisExpression");case types$1.name:var l=this.start,p=this.startLoc,f=this.containsEsc,d=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!f&&d.name==="async"&&!this.canInsertSemicolon()&&this.eat(types$1._function))return this.overrideContext(types.f_expr),this.parseFunction(this.startNodeAt(l,p),0,!1,!0,t);if(u&&!this.canInsertSemicolon()){if(this.eat(types$1.arrow))return this.parseArrowExpression(this.startNodeAt(l,p),[d],!1,t);if(this.options.ecmaVersion>=8&&d.name==="async"&&this.type===types$1.name&&!f&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return d=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(types$1.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(l,p),[d],!0,t)}return d;case types$1.regexp:var g=this.value;return a=this.parseLiteral(g.value),a.regex={pattern:g.pattern,flags:g.flags},a;case types$1.num:case types$1.string:return this.parseLiteral(this.value);case types$1._null:case types$1._true:case types$1._false:return a=this.startNode(),a.value=this.type===types$1._null?null:this.type===types$1._true,a.raw=this.type.keyword,this.next(),this.finishNode(a,"Literal");case types$1.parenL:var b=this.start,S=this.parseParenAndDistinguishExpression(u,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(S)&&(e.parenthesizedAssign=b),e.parenthesizedBind<0&&(e.parenthesizedBind=b)),S;case types$1.bracketL:return a=this.startNode(),this.next(),a.elements=this.parseExprList(types$1.bracketR,!0,!0,e),this.finishNode(a,"ArrayExpression");case types$1.braceL:return this.overrideContext(types.b_expr),this.parseObj(!1,e);case types$1._function:return a=this.startNode(),this.next(),this.parseFunction(a,0);case types$1._class:return this.parseClass(this.startNode(),!1);case types$1._new:return this.parseNew();case types$1.backQuote:return this.parseTemplate();case types$1._import:return this.options.ecmaVersion>=11?this.parseExprImport(o):this.unexpected();default:return this.parseExprAtomDefault()}},pp$5.parseExprAtomDefault=function(){this.unexpected()},pp$5.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===types$1.parenL&&!e)return this.parseDynamicImport(t);if(this.type===types$1.dot){var o=this.startNodeAt(t.start,t.loc&&t.loc.start);return o.name="import",t.meta=this.finishNode(o,"Identifier"),this.parseImportMeta(t)}else this.unexpected()},pp$5.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),this.options.ecmaVersion>=16)this.eat(types$1.parenR)?e.options=null:(this.expect(types$1.comma),this.afterTrailingComma(types$1.parenR)?e.options=null:(e.options=this.parseMaybeAssign(),this.eat(types$1.parenR)||(this.expect(types$1.comma),this.afterTrailingComma(types$1.parenR)||this.unexpected())));else if(!this.eat(types$1.parenR)){var t=this.start;this.eat(types$1.comma)&&this.eat(types$1.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")},pp$5.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")},pp$5.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.value!=null?t.value.toString():t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")},pp$5.parseParenExpression=function(){this.expect(types$1.parenL);var e=this.parseExpression();return this.expect(types$1.parenR),e},pp$5.shouldParseArrow=function(e){return!this.canInsertSemicolon()},pp$5.parseParenAndDistinguishExpression=function(e,t){var o=this.start,a=this.startLoc,u,l=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var p=this.start,f=this.startLoc,d=[],g=!0,b=!1,S=new DestructuringErrors,E=this.yieldPos,F=this.awaitPos,$;for(this.yieldPos=0,this.awaitPos=0;this.type!==types$1.parenR;)if(g?g=!1:this.expect(types$1.comma),l&&this.afterTrailingComma(types$1.parenR,!0)){b=!0;break}else if(this.type===types$1.ellipsis){$=this.start,d.push(this.parseParenItem(this.parseRestBinding())),this.type===types$1.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else d.push(this.parseMaybeAssign(!1,S,this.parseParenItem));var k=this.lastTokEnd,B=this.lastTokEndLoc;if(this.expect(types$1.parenR),e&&this.shouldParseArrow(d)&&this.eat(types$1.arrow))return this.checkPatternErrors(S,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=E,this.awaitPos=F,this.parseParenArrowList(o,a,d,t);(!d.length||b)&&this.unexpected(this.lastTokStart),$&&this.unexpected($),this.checkExpressionErrors(S,!0),this.yieldPos=E||this.yieldPos,this.awaitPos=F||this.awaitPos,d.length>1?(u=this.startNodeAt(p,f),u.expressions=d,this.finishNodeAt(u,"SequenceExpression",k,B)):u=d[0]}else u=this.parseParenExpression();if(this.options.preserveParens){var V=this.startNodeAt(o,a);return V.expression=u,this.finishNode(V,"ParenthesizedExpression")}else return u},pp$5.parseParenItem=function(e){return e},pp$5.parseParenArrowList=function(e,t,o,a){return this.parseArrowExpression(this.startNodeAt(e,t),o,!1,a)};var empty=[];pp$5.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===types$1.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var o=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),o&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var a=this.start,u=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),a,u,!0,!1),this.eat(types$1.parenL)?e.arguments=this.parseExprList(types$1.parenR,this.options.ecmaVersion>=8,!1):e.arguments=empty,this.finishNode(e,"NewExpression")},pp$5.parseTemplateElement=function(e){var t=e.isTagged,o=this.startNode();return this.type===types$1.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),o.value={raw:this.value.replace(/\r\n?/g,`
`),cooked:null}):o.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),o.tail=this.type===types$1.backQuote,this.finishNode(o,"TemplateElement")},pp$5.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var o=this.startNode();this.next(),o.expressions=[];var a=this.parseTemplateElement({isTagged:t});for(o.quasis=[a];!a.tail;)this.type===types$1.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(types$1.dollarBraceL),o.expressions.push(this.parseExpression()),this.expect(types$1.braceR),o.quasis.push(a=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(o,"TemplateLiteral")},pp$5.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===types$1.name||this.type===types$1.num||this.type===types$1.string||this.type===types$1.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===types$1.star)&&!lineBreak.test(this.input.slice(this.lastTokEnd,this.start))},pp$5.parseObj=function(e,t){var o=this.startNode(),a=!0,u={};for(o.properties=[],this.next();!this.eat(types$1.braceR);){if(a)a=!1;else if(this.expect(types$1.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(types$1.braceR))break;var l=this.parseProperty(e,t);e||this.checkPropClash(l,u,t),o.properties.push(l)}return this.finishNode(o,e?"ObjectPattern":"ObjectExpression")},pp$5.parseProperty=function(e,t){var o=this.startNode(),a,u,l,p;if(this.options.ecmaVersion>=9&&this.eat(types$1.ellipsis))return e?(o.argument=this.parseIdent(!1),this.type===types$1.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(o,"RestElement")):(o.argument=this.parseMaybeAssign(!1,t),this.type===types$1.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(o,"SpreadElement"));this.options.ecmaVersion>=6&&(o.method=!1,o.shorthand=!1,(e||t)&&(l=this.start,p=this.startLoc),e||(a=this.eat(types$1.star)));var f=this.containsEsc;return this.parsePropertyName(o),!e&&!f&&this.options.ecmaVersion>=8&&!a&&this.isAsyncProp(o)?(u=!0,a=this.options.ecmaVersion>=9&&this.eat(types$1.star),this.parsePropertyName(o)):u=!1,this.parsePropertyValue(o,e,a,u,l,p,t,f),this.finishNode(o,"Property")},pp$5.parseGetterSetter=function(e){var t=e.key.name;this.parsePropertyName(e),e.value=this.parseMethod(!1),e.kind=t;var o=e.kind==="get"?0:1;if(e.value.params.length!==o){var a=e.value.start;e.kind==="get"?this.raiseRecoverable(a,"getter should have no params"):this.raiseRecoverable(a,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")},pp$5.parsePropertyValue=function(e,t,o,a,u,l,p,f){(o||a)&&this.type===types$1.colon&&this.unexpected(),this.eat(types$1.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,p),e.kind="init"):this.options.ecmaVersion>=6&&this.type===types$1.parenL?(t&&this.unexpected(),e.method=!0,e.value=this.parseMethod(o,a),e.kind="init"):!t&&!f&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==types$1.comma&&this.type!==types$1.braceR&&this.type!==types$1.eq?((o||a)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((o||a)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=u),t?e.value=this.parseMaybeDefault(u,l,this.copyNode(e.key)):this.type===types$1.eq&&p?(p.shorthandAssign<0&&(p.shorthandAssign=this.start),e.value=this.parseMaybeDefault(u,l,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.kind="init",e.shorthand=!0):this.unexpected()},pp$5.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(types$1.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(types$1.bracketR),e.key;e.computed=!1}return e.key=this.type===types$1.num||this.type===types$1.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")},pp$5.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)},pp$5.parseMethod=function(e,t,o){var a=this.startNode(),u=this.yieldPos,l=this.awaitPos,p=this.awaitIdentPos;return this.initFunction(a),this.options.ecmaVersion>=6&&(a.generator=e),this.options.ecmaVersion>=8&&(a.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(functionFlags(t,a.generator)|SCOPE_SUPER|(o?SCOPE_DIRECT_SUPER:0)),this.expect(types$1.parenL),a.params=this.parseBindingList(types$1.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(a,!1,!0,!1),this.yieldPos=u,this.awaitPos=l,this.awaitIdentPos=p,this.finishNode(a,"FunctionExpression")},pp$5.parseArrowExpression=function(e,t,o,a){var u=this.yieldPos,l=this.awaitPos,p=this.awaitIdentPos;return this.enterScope(functionFlags(o,!1)|SCOPE_ARROW),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!o),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,a),this.yieldPos=u,this.awaitPos=l,this.awaitIdentPos=p,this.finishNode(e,"ArrowFunctionExpression")},pp$5.parseFunctionBody=function(e,t,o,a){var u=t&&this.type!==types$1.braceL,l=this.strict,p=!1;if(u)e.body=this.parseMaybeAssign(a),e.expression=!0,this.checkParams(e,!1);else{var f=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!l||f)&&(p=this.strictDirective(this.end),p&&f&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var d=this.labels;this.labels=[],p&&(this.strict=!0),this.checkParams(e,!l&&!p&&!t&&!o&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,BIND_OUTSIDE),e.body=this.parseBlock(!1,void 0,p&&!l),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=d}this.exitScope()},pp$5.isSimpleParamList=function(e){for(var t=0,o=e;t<o.length;t+=1){var a=o[t];if(a.type!=="Identifier")return!1}return!0},pp$5.checkParams=function(e,t){for(var o=Object.create(null),a=0,u=e.params;a<u.length;a+=1){var l=u[a];this.checkLValInnerPattern(l,BIND_VAR,t?null:o)}},pp$5.parseExprList=function(e,t,o,a){for(var u=[],l=!0;!this.eat(e);){if(l)l=!1;else if(this.expect(types$1.comma),t&&this.afterTrailingComma(e))break;var p=void 0;o&&this.type===types$1.comma?p=null:this.type===types$1.ellipsis?(p=this.parseSpread(a),a&&this.type===types$1.comma&&a.trailingComma<0&&(a.trailingComma=this.start)):p=this.parseMaybeAssign(!1,a),u.push(p)}return u},pp$5.checkUnreserved=function(e){var t=e.start,o=e.end,a=e.name;if(this.inGenerator&&a==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&a==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),!(this.currentThisScope().flags&SCOPE_VAR)&&a==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(a==="arguments"||a==="await")&&this.raise(t,"Cannot use "+a+" in class static initialization block"),this.keywords.test(a)&&this.raise(t,"Unexpected keyword '"+a+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,o).indexOf("\\")!==-1)){var u=this.strict?this.reservedWordsStrict:this.reservedWords;u.test(a)&&(!this.inAsync&&a==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+a+"' is reserved"))}},pp$5.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t},pp$5.parseIdentNode=function(){var e=this.startNode();return this.type===types$1.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=types$1.name):this.unexpected(),e},pp$5.parsePrivateIdent=function(){var e=this.startNode();return this.type===types$1.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e},pp$5.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===types$1.semi||this.canInsertSemicolon()||this.type!==types$1.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(types$1.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")},pp$5.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var pp$4=Parser.prototype;pp$4.raise=function(e,t){var o=getLineInfo(this.input,e);t+=" ("+o.line+":"+o.column+")",this.sourceFile&&(t+=" in "+this.sourceFile);var a=new SyntaxError(t);throw a.pos=e,a.loc=o,a.raisedAt=this.pos,a},pp$4.raiseRecoverable=pp$4.raise,pp$4.curPosition=function(){if(this.options.locations)return new Position(this.curLine,this.pos-this.lineStart)};var pp$3=Parser.prototype,Scope=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[]};pp$3.enterScope=function(e){this.scopeStack.push(new Scope(e))},pp$3.exitScope=function(){this.scopeStack.pop()},pp$3.treatFunctionsAsVarInScope=function(e){return e.flags&SCOPE_FUNCTION||!this.inModule&&e.flags&SCOPE_TOP},pp$3.declareName=function(e,t,o){var a=!1;if(t===BIND_LEXICAL){var u=this.currentScope();a=u.lexical.indexOf(e)>-1||u.functions.indexOf(e)>-1||u.var.indexOf(e)>-1,u.lexical.push(e),this.inModule&&u.flags&SCOPE_TOP&&delete this.undefinedExports[e]}else if(t===BIND_SIMPLE_CATCH){var l=this.currentScope();l.lexical.push(e)}else if(t===BIND_FUNCTION){var p=this.currentScope();this.treatFunctionsAsVar?a=p.lexical.indexOf(e)>-1:a=p.lexical.indexOf(e)>-1||p.var.indexOf(e)>-1,p.functions.push(e)}else for(var f=this.scopeStack.length-1;f>=0;--f){var d=this.scopeStack[f];if(d.lexical.indexOf(e)>-1&&!(d.flags&SCOPE_SIMPLE_CATCH&&d.lexical[0]===e)||!this.treatFunctionsAsVarInScope(d)&&d.functions.indexOf(e)>-1){a=!0;break}if(d.var.push(e),this.inModule&&d.flags&SCOPE_TOP&&delete this.undefinedExports[e],d.flags&SCOPE_VAR)break}a&&this.raiseRecoverable(o,"Identifier '"+e+"' has already been declared")},pp$3.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)},pp$3.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},pp$3.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&(SCOPE_VAR|SCOPE_CLASS_FIELD_INIT|SCOPE_CLASS_STATIC_BLOCK))return t}},pp$3.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&(SCOPE_VAR|SCOPE_CLASS_FIELD_INIT|SCOPE_CLASS_STATIC_BLOCK)&&!(t.flags&SCOPE_ARROW))return t}};var Node=function(t,o,a){this.type="",this.start=o,this.end=0,t.options.locations&&(this.loc=new SourceLocation(t,a)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[o,0])},pp$2=Parser.prototype;pp$2.startNode=function(){return new Node(this,this.start,this.startLoc)},pp$2.startNodeAt=function(e,t){return new Node(this,e,t)};function finishNodeAt(e,t,o,a){return e.type=t,e.end=o,this.options.locations&&(e.loc.end=a),this.options.ranges&&(e.range[1]=o),e}pp$2.finishNode=function(e,t){return finishNodeAt.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)},pp$2.finishNodeAt=function(e,t,o,a){return finishNodeAt.call(this,e,t,o,a)},pp$2.copyNode=function(e){var t=new Node(this,e.start,this.startLoc);for(var o in e)t[o]=e[o];return t};var scriptValuesAddedInUnicode="Gara Garay Gukh Gurung_Khema Hrkt Katakana_Or_Hiragana Kawi Kirat_Rai Krai Nag_Mundari Nagm Ol_Onal Onao Sunu Sunuwar Todhri Todr Tulu_Tigalari Tutg Unknown Zzzz",ecma9BinaryProperties="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",ecma10BinaryProperties=ecma9BinaryProperties+" Extended_Pictographic",ecma11BinaryProperties=ecma10BinaryProperties,ecma12BinaryProperties=ecma11BinaryProperties+" EBase EComp EMod EPres ExtPict",ecma13BinaryProperties=ecma12BinaryProperties,ecma14BinaryProperties=ecma13BinaryProperties,unicodeBinaryProperties={9:ecma9BinaryProperties,10:ecma10BinaryProperties,11:ecma11BinaryProperties,12:ecma12BinaryProperties,13:ecma13BinaryProperties,14:ecma14BinaryProperties},ecma14BinaryPropertiesOfStrings="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",unicodeBinaryPropertiesOfStrings={9:"",10:"",11:"",12:"",13:"",14:ecma14BinaryPropertiesOfStrings},unicodeGeneralCategoryValues="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",ecma9ScriptValues="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",ecma10ScriptValues=ecma9ScriptValues+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",ecma11ScriptValues=ecma10ScriptValues+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",ecma12ScriptValues=ecma11ScriptValues+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",ecma13ScriptValues=ecma12ScriptValues+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",ecma14ScriptValues=ecma13ScriptValues+" "+scriptValuesAddedInUnicode,unicodeScriptValues={9:ecma9ScriptValues,10:ecma10ScriptValues,11:ecma11ScriptValues,12:ecma12ScriptValues,13:ecma13ScriptValues,14:ecma14ScriptValues},data={};function buildUnicodeData(e){var t=data[e]={binary:wordsRegexp(unicodeBinaryProperties[e]+" "+unicodeGeneralCategoryValues),binaryOfStrings:wordsRegexp(unicodeBinaryPropertiesOfStrings[e]),nonBinary:{General_Category:wordsRegexp(unicodeGeneralCategoryValues),Script:wordsRegexp(unicodeScriptValues[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var i=0,list=[9,10,11,12,13,14];i<list.length;i+=1){var ecmaVersion=list[i];buildUnicodeData(ecmaVersion)}var pp$1=Parser.prototype,BranchID=function(t,o){this.parent=t,this.base=o||this};BranchID.prototype.separatedFrom=function(t){for(var o=this;o;o=o.parent)for(var a=t;a;a=a.parent)if(o.base===a.base&&o!==a)return!0;return!1},BranchID.prototype.sibling=function(){return new BranchID(this.parent,this.base)};var RegExpValidationState=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=data[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=Object.create(null),this.backReferenceNames=[],this.branchID=null};RegExpValidationState.prototype.reset=function(t,o,a){var u=a.indexOf("v")!==-1,l=a.indexOf("u")!==-1;this.start=t|0,this.source=o+"",this.flags=a,u&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=l&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=l&&this.parser.options.ecmaVersion>=9)},RegExpValidationState.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)},RegExpValidationState.prototype.at=function(t,o){o===void 0&&(o=!1);var a=this.source,u=a.length;if(t>=u)return-1;var l=a.charCodeAt(t);if(!(o||this.switchU)||l<=55295||l>=57344||t+1>=u)return l;var p=a.charCodeAt(t+1);return p>=56320&&p<=57343?(l<<10)+p-56613888:l},RegExpValidationState.prototype.nextIndex=function(t,o){o===void 0&&(o=!1);var a=this.source,u=a.length;if(t>=u)return u;var l=a.charCodeAt(t),p;return!(o||this.switchU)||l<=55295||l>=57344||t+1>=u||(p=a.charCodeAt(t+1))<56320||p>57343?t+1:t+2},RegExpValidationState.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)},RegExpValidationState.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)},RegExpValidationState.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)},RegExpValidationState.prototype.eat=function(t,o){return o===void 0&&(o=!1),this.current(o)===t?(this.advance(o),!0):!1},RegExpValidationState.prototype.eatChars=function(t,o){o===void 0&&(o=!1);for(var a=this.pos,u=0,l=t;u<l.length;u+=1){var p=l[u],f=this.at(a,o);if(f===-1||f!==p)return!1;a=this.nextIndex(a,o)}return this.pos=a,!0},pp$1.validateRegExpFlags=function(e){for(var t=e.validFlags,o=e.flags,a=!1,u=!1,l=0;l<o.length;l++){var p=o.charAt(l);t.indexOf(p)===-1&&this.raise(e.start,"Invalid regular expression flag"),o.indexOf(p,l+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),p==="u"&&(a=!0),p==="v"&&(u=!0)}this.options.ecmaVersion>=15&&a&&u&&this.raise(e.start,"Invalid regular expression flag")};function hasProp(e){for(var t in e)return!0;return!1}pp$1.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&hasProp(e.groupNames)&&(e.switchN=!0,this.regexp_pattern(e))},pp$1.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames=Object.create(null),e.backReferenceNames.length=0,e.branchID=null,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,o=e.backReferenceNames;t<o.length;t+=1){var a=o[t];e.groupNames[a]||e.raise("Invalid named capture referenced")}},pp$1.regexp_disjunction=function(e){var t=this.options.ecmaVersion>=16;for(t&&(e.branchID=new BranchID(e.branchID,null)),this.regexp_alternative(e);e.eat(124);)t&&(e.branchID=e.branchID.sibling()),this.regexp_alternative(e);t&&(e.branchID=e.branchID.parent),this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")},pp$1.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););},pp$1.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1},pp$1.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var o=!1;if(this.options.ecmaVersion>=9&&(o=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!o,!0}return e.pos=t,!1},pp$1.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1},pp$1.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)},pp$1.regexp_eatBracedQuantifier=function(e,t){var o=e.pos;if(e.eat(123)){var a=0,u=-1;if(this.regexp_eatDecimalDigits(e)&&(a=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(u=e.lastIntValue),e.eat(125)))return u!==-1&&u<a&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=o}return!1},pp$1.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)},pp$1.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1},pp$1.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)){if(this.options.ecmaVersion>=16){var o=this.regexp_eatModifiers(e),a=e.eat(45);if(o||a){for(var u=0;u<o.length;u++){var l=o.charAt(u);o.indexOf(l,u+1)>-1&&e.raise("Duplicate regular expression modifiers")}if(a){var p=this.regexp_eatModifiers(e);!o&&!p&&e.current()===58&&e.raise("Invalid regular expression modifiers");for(var f=0;f<p.length;f++){var d=p.charAt(f);(p.indexOf(d,f+1)>-1||o.indexOf(d)>-1)&&e.raise("Duplicate regular expression modifiers")}}}}if(e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}}e.pos=t}return!1},pp$1.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1},pp$1.regexp_eatModifiers=function(e){for(var t="",o=0;(o=e.current())!==-1&&isRegularExpressionModifier(o);)t+=codePointToString(o),e.advance();return t};function isRegularExpressionModifier(e){return e===105||e===109||e===115}pp$1.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)},pp$1.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1},pp$1.regexp_eatSyntaxCharacter=function(e){var t=e.current();return isSyntaxCharacter(t)?(e.lastIntValue=t,e.advance(),!0):!1};function isSyntaxCharacter(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}pp$1.regexp_eatPatternCharacters=function(e){for(var t=e.pos,o=0;(o=e.current())!==-1&&!isSyntaxCharacter(o);)e.advance();return e.pos!==t},pp$1.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1},pp$1.regexp_groupSpecifier=function(e){if(e.eat(63)){this.regexp_eatGroupName(e)||e.raise("Invalid group");var t=this.options.ecmaVersion>=16,o=e.groupNames[e.lastStringValue];if(o)if(t)for(var a=0,u=o;a<u.length;a+=1){var l=u[a];l.separatedFrom(e.branchID)||e.raise("Duplicate capture group name")}else e.raise("Duplicate capture group name");t?(o||(e.groupNames[e.lastStringValue]=[])).push(e.branchID):e.groupNames[e.lastStringValue]=!0}},pp$1.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1},pp$1.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=codePointToString(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=codePointToString(e.lastIntValue);return!0}return!1},pp$1.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,o=this.options.ecmaVersion>=11,a=e.current(o);return e.advance(o),a===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,o)&&(a=e.lastIntValue),isRegExpIdentifierStart(a)?(e.lastIntValue=a,!0):(e.pos=t,!1)};function isRegExpIdentifierStart(e){return isIdentifierStart(e,!0)||e===36||e===95}pp$1.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,o=this.options.ecmaVersion>=11,a=e.current(o);return e.advance(o),a===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,o)&&(a=e.lastIntValue),isRegExpIdentifierPart(a)?(e.lastIntValue=a,!0):(e.pos=t,!1)};function isRegExpIdentifierPart(e){return isIdentifierChar(e,!0)||e===36||e===95||e===8204||e===8205}pp$1.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)},pp$1.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var o=e.lastIntValue;if(e.switchU)return o>e.maxBackReference&&(e.maxBackReference=o),!0;if(o<=e.numCapturingParens)return!0;e.pos=t}return!1},pp$1.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1},pp$1.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)},pp$1.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1},pp$1.regexp_eatZero=function(e){return e.current()===48&&!isDecimalDigit(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1},pp$1.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1},pp$1.regexp_eatControlLetter=function(e){var t=e.current();return isControlLetter(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function isControlLetter(e){return e>=65&&e<=90||e>=97&&e<=122}pp$1.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var o=e.pos,a=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var u=e.lastIntValue;if(a&&u>=55296&&u<=56319){var l=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var p=e.lastIntValue;if(p>=56320&&p<=57343)return e.lastIntValue=(u-55296)*1024+(p-56320)+65536,!0}e.pos=l,e.lastIntValue=u}return!0}if(a&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&isValidUnicode(e.lastIntValue))return!0;a&&e.raise("Invalid unicode escape"),e.pos=o}return!1};function isValidUnicode(e){return e>=0&&e<=1114111}pp$1.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1},pp$1.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var CharSetNone=0,CharSetOk=1,CharSetString=2;pp$1.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(isCharacterClassEscape(t))return e.lastIntValue=-1,e.advance(),CharSetOk;var o=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((o=t===80)||t===112)){e.lastIntValue=-1,e.advance();var a;if(e.eat(123)&&(a=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return o&&a===CharSetString&&e.raise("Invalid property name"),a;e.raise("Invalid property name")}return CharSetNone};function isCharacterClassEscape(e){return e===100||e===68||e===115||e===83||e===119||e===87}pp$1.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var o=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var a=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,o,a),CharSetOk}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var u=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,u)}return CharSetNone},pp$1.regexp_validateUnicodePropertyNameAndValue=function(e,t,o){hasOwn(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(o)||e.raise("Invalid property value")},pp$1.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return CharSetOk;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return CharSetString;e.raise("Invalid property name")},pp$1.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";isUnicodePropertyNameCharacter(t=e.current());)e.lastStringValue+=codePointToString(t),e.advance();return e.lastStringValue!==""};function isUnicodePropertyNameCharacter(e){return isControlLetter(e)||e===95}pp$1.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";isUnicodePropertyValueCharacter(t=e.current());)e.lastStringValue+=codePointToString(t),e.advance();return e.lastStringValue!==""};function isUnicodePropertyValueCharacter(e){return isUnicodePropertyNameCharacter(e)||isDecimalDigit(e)}pp$1.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)},pp$1.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),o=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&o===CharSetString&&e.raise("Negated character class may contain strings"),!0}return!1},pp$1.regexp_classContents=function(e){return e.current()===93?CharSetOk:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),CharSetOk)},pp$1.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var o=e.lastIntValue;e.switchU&&(t===-1||o===-1)&&e.raise("Invalid character class"),t!==-1&&o!==-1&&t>o&&e.raise("Range out of order in character class")}}},pp$1.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var o=e.current();(o===99||isOctalDigit(o))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var a=e.current();return a!==93?(e.lastIntValue=a,e.advance(),!0):!1},pp$1.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)},pp$1.regexp_classSetExpression=function(e){var t=CharSetOk,o;if(!this.regexp_eatClassSetRange(e))if(o=this.regexp_eatClassSetOperand(e)){o===CharSetString&&(t=CharSetString);for(var a=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(o=this.regexp_eatClassSetOperand(e))){o!==CharSetString&&(t=CharSetOk);continue}e.raise("Invalid character in character class")}if(a!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(a!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(o=this.regexp_eatClassSetOperand(e),!o)return t;o===CharSetString&&(t=CharSetString)}},pp$1.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var o=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var a=e.lastIntValue;return o!==-1&&a!==-1&&o>a&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1},pp$1.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?CharSetOk:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)},pp$1.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var o=e.eat(94),a=this.regexp_classContents(e);if(e.eat(93))return o&&a===CharSetString&&e.raise("Negated character class may contain strings"),a;e.pos=t}if(e.eat(92)){var u=this.regexp_eatCharacterClassEscape(e);if(u)return u;e.pos=t}return null},pp$1.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var o=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return o}else e.raise("Invalid escape");e.pos=t}return null},pp$1.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===CharSetString&&(t=CharSetString);return t},pp$1.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?CharSetOk:CharSetString},pp$1.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var o=e.current();return o<0||o===e.lookahead()&&isClassSetReservedDoublePunctuatorCharacter(o)||isClassSetSyntaxCharacter(o)?!1:(e.advance(),e.lastIntValue=o,!0)};function isClassSetReservedDoublePunctuatorCharacter(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function isClassSetSyntaxCharacter(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}pp$1.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return isClassSetReservedPunctuator(t)?(e.lastIntValue=t,e.advance(),!0):!1};function isClassSetReservedPunctuator(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}pp$1.regexp_eatClassControlLetter=function(e){var t=e.current();return isDecimalDigit(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1},pp$1.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1},pp$1.regexp_eatDecimalDigits=function(e){var t=e.pos,o=0;for(e.lastIntValue=0;isDecimalDigit(o=e.current());)e.lastIntValue=10*e.lastIntValue+(o-48),e.advance();return e.pos!==t};function isDecimalDigit(e){return e>=48&&e<=57}pp$1.regexp_eatHexDigits=function(e){var t=e.pos,o=0;for(e.lastIntValue=0;isHexDigit(o=e.current());)e.lastIntValue=16*e.lastIntValue+hexToInt(o),e.advance();return e.pos!==t};function isHexDigit(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function hexToInt(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}pp$1.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var o=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+o*8+e.lastIntValue:e.lastIntValue=t*8+o}else e.lastIntValue=t;return!0}return!1},pp$1.regexp_eatOctalDigit=function(e){var t=e.current();return isOctalDigit(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function isOctalDigit(e){return e>=48&&e<=55}pp$1.regexp_eatFixedHexDigits=function(e,t){var o=e.pos;e.lastIntValue=0;for(var a=0;a<t;++a){var u=e.current();if(!isHexDigit(u))return e.pos=o,!1;e.lastIntValue=16*e.lastIntValue+hexToInt(u),e.advance()}return!0};var Token=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new SourceLocation(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},pp=Parser.prototype;pp.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new Token(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},pp.getToken=function(){return this.next(),new Token(this)},typeof Symbol<"u"&&(pp[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===types$1.eof,value:t}}}}),pp.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(types$1.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())},pp.readToken=function(e){return isIdentifierStart(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)},pp.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888},pp.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,o=this.input.indexOf("*/",this.pos+=2);if(o===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=o+2,this.options.locations)for(var a=void 0,u=t;(a=nextLineBreak(this.input,u,this.pos))>-1;)++this.curLine,u=this.lineStart=a;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,o),t,this.pos,e,this.curPosition())},pp.skipLineComment=function(e){for(var t=this.pos,o=this.options.onComment&&this.curPosition(),a=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!isNewLine(a);)a=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,o,this.curPosition())},pp.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&nonASCIIwhitespace.test(String.fromCharCode(e)))++this.pos;else break e}}},pp.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var o=this.type;this.type=e,this.value=t,this.updateContext(o)},pp.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(types$1.ellipsis)):(++this.pos,this.finishToken(types$1.dot))},pp.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(types$1.assign,2):this.finishOp(types$1.slash,1)},pp.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),o=1,a=e===42?types$1.star:types$1.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++o,a=types$1.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(types$1.assign,o+1):this.finishOp(a,o)},pp.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var o=this.input.charCodeAt(this.pos+2);if(o===61)return this.finishOp(types$1.assign,3)}return this.finishOp(e===124?types$1.logicalOR:types$1.logicalAND,2)}return t===61?this.finishOp(types$1.assign,2):this.finishOp(e===124?types$1.bitwiseOR:types$1.bitwiseAND,1)},pp.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(types$1.assign,2):this.finishOp(types$1.bitwiseXOR,1)},pp.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||lineBreak.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(types$1.incDec,2):t===61?this.finishOp(types$1.assign,2):this.finishOp(types$1.plusMin,1)},pp.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),o=1;return t===e?(o=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+o)===61?this.finishOp(types$1.assign,o+1):this.finishOp(types$1.bitShift,o)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(o=2),this.finishOp(types$1.relational,o))},pp.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(types$1.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(types$1.arrow)):this.finishOp(e===61?types$1.eq:types$1.prefix,1)},pp.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var o=this.input.charCodeAt(this.pos+2);if(o<48||o>57)return this.finishOp(types$1.questionDot,2)}if(t===63){if(e>=12){var a=this.input.charCodeAt(this.pos+2);if(a===61)return this.finishOp(types$1.assign,3)}return this.finishOp(types$1.coalesce,2)}}return this.finishOp(types$1.question,1)},pp.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),isIdentifierStart(t,!0)||t===92))return this.finishToken(types$1.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+codePointToString(t)+"'")},pp.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(types$1.parenL);case 41:return++this.pos,this.finishToken(types$1.parenR);case 59:return++this.pos,this.finishToken(types$1.semi);case 44:return++this.pos,this.finishToken(types$1.comma);case 91:return++this.pos,this.finishToken(types$1.bracketL);case 93:return++this.pos,this.finishToken(types$1.bracketR);case 123:return++this.pos,this.finishToken(types$1.braceL);case 125:return++this.pos,this.finishToken(types$1.braceR);case 58:return++this.pos,this.finishToken(types$1.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(types$1.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(types$1.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+codePointToString(e)+"'")},pp.finishOp=function(e,t){var o=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,o)},pp.readRegexp=function(){for(var e,t,o=this.pos;;){this.pos>=this.input.length&&this.raise(o,"Unterminated regular expression");var a=this.input.charAt(this.pos);if(lineBreak.test(a)&&this.raise(o,"Unterminated regular expression"),e)e=!1;else{if(a==="[")t=!0;else if(a==="]"&&t)t=!1;else if(a==="/"&&!t)break;e=a==="\\"}++this.pos}var u=this.input.slice(o,this.pos);++this.pos;var l=this.pos,p=this.readWord1();this.containsEsc&&this.unexpected(l);var f=this.regexpState||(this.regexpState=new RegExpValidationState(this));f.reset(o,u,p),this.validateRegExpFlags(f),this.validateRegExpPattern(f);var d=null;try{d=new RegExp(u,p)}catch{}return this.finishToken(types$1.regexp,{pattern:u,flags:p,value:d})},pp.readInt=function(e,t,o){for(var a=this.options.ecmaVersion>=12&&t===void 0,u=o&&this.input.charCodeAt(this.pos)===48,l=this.pos,p=0,f=0,d=0,g=t??1/0;d<g;++d,++this.pos){var b=this.input.charCodeAt(this.pos),S=void 0;if(a&&b===95){u&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),f===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),d===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),f=b;continue}if(b>=97?S=b-97+10:b>=65?S=b-65+10:b>=48&&b<=57?S=b-48:S=1/0,S>=e)break;f=b,p=p*e+S}return a&&f===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===l||t!=null&&this.pos-l!==t?null:p};function stringToNumber(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function stringToBigInt(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}pp.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var o=this.readInt(e);return o==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(o=stringToBigInt(this.input.slice(t,this.pos)),++this.pos):isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(types$1.num,o)},pp.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var o=this.pos-t>=2&&this.input.charCodeAt(t)===48;o&&this.strict&&this.raise(t,"Invalid number");var a=this.input.charCodeAt(this.pos);if(!o&&!e&&this.options.ecmaVersion>=11&&a===110){var u=stringToBigInt(this.input.slice(t,this.pos));return++this.pos,isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(types$1.num,u)}o&&/[89]/.test(this.input.slice(t,this.pos))&&(o=!1),a===46&&!o&&(++this.pos,this.readInt(10),a=this.input.charCodeAt(this.pos)),(a===69||a===101)&&!o&&(a=this.input.charCodeAt(++this.pos),(a===43||a===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var l=stringToNumber(this.input.slice(t,this.pos),o);return this.finishToken(types$1.num,l)},pp.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var o=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(o,"Code point out of bounds")}else t=this.readHexChar(4);return t},pp.readString=function(e){for(var t="",o=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var a=this.input.charCodeAt(this.pos);if(a===e)break;a===92?(t+=this.input.slice(o,this.pos),t+=this.readEscapedChar(!1),o=this.pos):a===8232||a===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(isNewLine(a)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(o,this.pos++),this.finishToken(types$1.string,t)};var INVALID_TEMPLATE_ESCAPE_ERROR={};pp.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===INVALID_TEMPLATE_ESCAPE_ERROR)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1},pp.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw INVALID_TEMPLATE_ESCAPE_ERROR;this.raise(e,t)},pp.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var o=this.input.charCodeAt(this.pos);if(o===96||o===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===types$1.template||this.type===types$1.invalidTemplate)?o===36?(this.pos+=2,this.finishToken(types$1.dollarBraceL)):(++this.pos,this.finishToken(types$1.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(types$1.template,e));if(o===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(isNewLine(o)){switch(e+=this.input.slice(t,this.pos),++this.pos,o){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(o);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}},pp.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(types$1.invalidTemplate,this.input.slice(this.start,this.pos));case"\r":this.input[this.pos+1]===`
`&&++this.pos;case`
`:case"\u2028":case"\u2029":++this.curLine,this.lineStart=this.pos+1;break}this.raise(this.start,"Unterminated template")},pp.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return codePointToString(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var o=this.pos-1;this.invalidStringToken(o,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var a=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],u=parseInt(a,8);return u>255&&(a=a.slice(0,-1),u=parseInt(a,8)),this.pos+=a.length-1,t=this.input.charCodeAt(this.pos),(a!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-a.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(u)}return isNewLine(t)?(this.options.locations&&(this.lineStart=this.pos,++this.curLine),""):String.fromCharCode(t)}},pp.readHexChar=function(e){var t=this.pos,o=this.readInt(16,e);return o===null&&this.invalidStringToken(t,"Bad character escape sequence"),o},pp.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,o=this.pos,a=this.options.ecmaVersion>=6;this.pos<this.input.length;){var u=this.fullCharCodeAtPos();if(isIdentifierChar(u,a))this.pos+=u<=65535?1:2;else if(u===92){this.containsEsc=!0,e+=this.input.slice(o,this.pos);var l=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var p=this.readCodePoint();(t?isIdentifierStart:isIdentifierChar)(p,a)||this.invalidStringToken(l,"Invalid Unicode escape"),e+=codePointToString(p),o=this.pos}else break;t=!1}return e+this.input.slice(o,this.pos)},pp.readWord=function(){var e=this.readWord1(),t=types$1.name;return this.keywords.test(e)&&(t=keywords[e]),this.finishToken(t,e)};var version$1="8.15.0";Parser.acorn={Parser,version:version$1,defaultOptions,Position,SourceLocation,getLineInfo,Node,TokenType,tokTypes:types$1,keywordTypes:keywords,TokContext,tokContexts:types,isIdentifierChar,isIdentifierStart,Token,isNewLine,lineBreak,lineBreakG,nonASCIIwhitespace};function parse$a(e,t){return Parser.parse(e,t)}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var o=function a(){var u=!1;try{u=this instanceof a}catch{}return u?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};o.prototype=t.prototype}else o={};return Object.defineProperty(o,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var u=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(o,a,u.get?u:{enumerable:!0,get:function(){return e[a]}})}),o}var escodegen$1={},estraverse={},hasRequiredEstraverse;function requireEstraverse(){return hasRequiredEstraverse||(hasRequiredEstraverse=1,(function(e){(function t(o){var a,u,l,p,f,d;function g(O){var q={},te,re;for(te in O)O.hasOwnProperty(te)&&(re=O[te],typeof re=="object"&&re!==null?q[te]=g(re):q[te]=re);return q}function b(O,q){var te,re,de,ie;for(re=O.length,de=0;re;)te=re>>>1,ie=de+te,q(O[ie])?re=te:(de=ie+1,re-=te+1);return de}a={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ChainExpression:"ChainExpression",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportExpression:"ImportExpression",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",PrivateIdentifier:"PrivateIdentifier",Program:"Program",Property:"Property",PropertyDefinition:"PropertyDefinition",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},l={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ChainExpression:["expression"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportExpression:["source"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],PrivateIdentifier:[],Program:["body"],Property:["key","value"],PropertyDefinition:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},p={},f={},d={},u={Break:p,Skip:f,Remove:d};function S(O,q){this.parent=O,this.key=q}S.prototype.replace=function(q){this.parent[this.key]=q},S.prototype.remove=function(){return Array.isArray(this.parent)?(this.parent.splice(this.key,1),!0):(this.replace(null),!1)};function E(O,q,te,re){this.node=O,this.path=q,this.wrap=te,this.ref=re}function F(){}F.prototype.path=function(){var q,te,re,de,ie,me;function pe(le,he){if(Array.isArray(he))for(re=0,de=he.length;re<de;++re)le.push(he[re]);else le.push(he)}if(!this.__current.path)return null;for(ie=[],q=2,te=this.__leavelist.length;q<te;++q)me=this.__leavelist[q],pe(ie,me.path);return pe(ie,this.__current.path),ie},F.prototype.type=function(){var O=this.current();return O.type||this.__current.wrap},F.prototype.parents=function(){var q,te,re;for(re=[],q=1,te=this.__leavelist.length;q<te;++q)re.push(this.__leavelist[q].node);return re},F.prototype.current=function(){return this.__current.node},F.prototype.__execute=function(q,te){var re,de;return de=void 0,re=this.__current,this.__current=te,this.__state=null,q&&(de=q.call(this,te.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=re,de},F.prototype.notify=function(q){this.__state=q},F.prototype.skip=function(){this.notify(f)},F.prototype.break=function(){this.notify(p)},F.prototype.remove=function(){this.notify(d)},F.prototype.__initialize=function(O,q){this.visitor=q,this.root=O,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null,this.__fallback=null,q.fallback==="iteration"?this.__fallback=Object.keys:typeof q.fallback=="function"&&(this.__fallback=q.fallback),this.__keys=l,q.keys&&(this.__keys=Object.assign(Object.create(this.__keys),q.keys))};function $(O){return O==null?!1:typeof O=="object"&&typeof O.type=="string"}function k(O,q){return(O===a.ObjectExpression||O===a.ObjectPattern)&&q==="properties"}function B(O,q){for(var te=O.length-1;te>=0;--te)if(O[te].node===q)return!0;return!1}F.prototype.traverse=function(q,te){var re,de,ie,me,pe,le,he,Ae,ye,Me,ge,Le;for(this.__initialize(q,te),Le={},re=this.__worklist,de=this.__leavelist,re.push(new E(q,null,null,null)),de.push(new E(null,null,null,null));re.length;){if(ie=re.pop(),ie===Le){if(ie=de.pop(),le=this.__execute(te.leave,ie),this.__state===p||le===p)return;continue}if(ie.node){if(le=this.__execute(te.enter,ie),this.__state===p||le===p)return;if(re.push(Le),de.push(ie),this.__state===f||le===f)continue;if(me=ie.node,pe=me.type||ie.wrap,Me=this.__keys[pe],!Me)if(this.__fallback)Me=this.__fallback(me);else throw new Error("Unknown node type "+pe+".");for(Ae=Me.length;(Ae-=1)>=0;)if(he=Me[Ae],ge=me[he],!!ge){if(Array.isArray(ge)){for(ye=ge.length;(ye-=1)>=0;)if(ge[ye]&&!B(de,ge[ye])){if(k(pe,Me[Ae]))ie=new E(ge[ye],[he,ye],"Property",null);else if($(ge[ye]))ie=new E(ge[ye],[he,ye],null,null);else continue;re.push(ie)}}else if($(ge)){if(B(de,ge))continue;re.push(new E(ge,he,null,null))}}}}},F.prototype.replace=function(q,te){var re,de,ie,me,pe,le,he,Ae,ye,Me,ge,Le,Xe;function We(ue){var De,Qe,Re,$e;if(ue.ref.remove()){for(Qe=ue.ref.key,$e=ue.ref.parent,De=re.length;De--;)if(Re=re[De],Re.ref&&Re.ref.parent===$e){if(Re.ref.key<Qe)break;--Re.ref.key}}}for(this.__initialize(q,te),ge={},re=this.__worklist,de=this.__leavelist,Le={root:q},le=new E(q,null,null,new S(Le,"root")),re.push(le),de.push(le);re.length;){if(le=re.pop(),le===ge){if(le=de.pop(),pe=this.__execute(te.leave,le),pe!==void 0&&pe!==p&&pe!==f&&pe!==d&&le.ref.replace(pe),(this.__state===d||pe===d)&&We(le),this.__state===p||pe===p)return Le.root;continue}if(pe=this.__execute(te.enter,le),pe!==void 0&&pe!==p&&pe!==f&&pe!==d&&(le.ref.replace(pe),le.node=pe),(this.__state===d||pe===d)&&(We(le),le.node=null),this.__state===p||pe===p)return Le.root;if(ie=le.node,!!ie&&(re.push(ge),de.push(le),!(this.__state===f||pe===f))){if(me=ie.type||le.wrap,ye=this.__keys[me],!ye)if(this.__fallback)ye=this.__fallback(ie);else throw new Error("Unknown node type "+me+".");for(he=ye.length;(he-=1)>=0;)if(Xe=ye[he],Me=ie[Xe],!!Me)if(Array.isArray(Me)){for(Ae=Me.length;(Ae-=1)>=0;)if(Me[Ae]){if(k(me,ye[he]))le=new E(Me[Ae],[Xe,Ae],"Property",new S(Me,Ae));else if($(Me[Ae]))le=new E(Me[Ae],[Xe,Ae],null,new S(Me,Ae));else continue;re.push(le)}}else $(Me)&&re.push(new E(Me,Xe,null,new S(ie,Xe)))}}return Le.root};function V(O,q){var te=new F;return te.traverse(O,q)}function U(O,q){var te=new F;return te.replace(O,q)}function ee(O,q){var te;return te=b(q,function(de){return de.range[0]>O.range[0]}),O.extendedRange=[O.range[0],O.range[1]],te!==q.length&&(O.extendedRange[1]=q[te].range[0]),te-=1,te>=0&&(O.extendedRange[0]=q[te].range[1]),O}function j(O,q,te){var re=[],de,ie,me,pe;if(!O.range)throw new Error("attachComments needs range information");if(!te.length){if(q.length){for(me=0,ie=q.length;me<ie;me+=1)de=g(q[me]),de.extendedRange=[0,O.range[0]],re.push(de);O.leadingComments=re}return O}for(me=0,ie=q.length;me<ie;me+=1)re.push(ee(g(q[me]),te));return pe=0,V(O,{enter:function(le){for(var he;pe<re.length&&(he=re[pe],!(he.extendedRange[1]>le.range[0]));)he.extendedRange[1]===le.range[0]?(le.leadingComments||(le.leadingComments=[]),le.leadingComments.push(he),re.splice(pe,1)):pe+=1;if(pe===re.length)return u.Break;if(re[pe].extendedRange[0]>le.range[1])return u.Skip}}),pe=0,V(O,{leave:function(le){for(var he;pe<re.length&&(he=re[pe],!(le.range[1]<he.extendedRange[0]));)le.range[1]===he.extendedRange[0]?(le.trailingComments||(le.trailingComments=[]),le.trailingComments.push(he),re.splice(pe,1)):pe+=1;if(pe===re.length)return u.Break;if(re[pe].extendedRange[0]>le.range[1])return u.Skip}}),O}return o.Syntax=a,o.traverse=V,o.replace=U,o.attachComments=j,o.VisitorKeys=l,o.VisitorOption=u,o.Controller=F,o.cloneEnvironment=function(){return t({})},o})(e)})(estraverse)),estraverse}var utils={},ast={exports:{}},hasRequiredAst;function requireAst(){return hasRequiredAst||(hasRequiredAst=1,(function(){function e(p){if(p==null)return!1;switch(p.type){case"ArrayExpression":case"AssignmentExpression":case"BinaryExpression":case"CallExpression":case"ConditionalExpression":case"FunctionExpression":case"Identifier":case"Literal":case"LogicalExpression":case"MemberExpression":case"NewExpression":case"ObjectExpression":case"SequenceExpression":case"ThisExpression":case"UnaryExpression":case"UpdateExpression":return!0}return!1}function t(p){if(p==null)return!1;switch(p.type){case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"WhileStatement":return!0}return!1}function o(p){if(p==null)return!1;switch(p.type){case"BlockStatement":case"BreakStatement":case"ContinueStatement":case"DebuggerStatement":case"DoWhileStatement":case"EmptyStatement":case"ExpressionStatement":case"ForInStatement":case"ForStatement":case"IfStatement":case"LabeledStatement":case"ReturnStatement":case"SwitchStatement":case"ThrowStatement":case"TryStatement":case"VariableDeclaration":case"WhileStatement":case"WithStatement":return!0}return!1}function a(p){return o(p)||p!=null&&p.type==="FunctionDeclaration"}function u(p){switch(p.type){case"IfStatement":return p.alternate!=null?p.alternate:p.consequent;case"LabeledStatement":case"ForStatement":case"ForInStatement":case"WhileStatement":case"WithStatement":return p.body}return null}function l(p){var f;if(p.type!=="IfStatement"||p.alternate==null)return!1;f=p.consequent;do{if(f.type==="IfStatement"&&f.alternate==null)return!0;f=u(f)}while(f);return!1}ast.exports={isExpression:e,isStatement:o,isIterationStatement:t,isSourceElement:a,isProblematicIfStatement:l,trailingStatement:u}})()),ast.exports}var code={exports:{}},hasRequiredCode;function requireCode(){return hasRequiredCode||(hasRequiredCode=1,(function(){var e,t,o,a,u,l;t={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,NonAsciiIdentifierPart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/},e={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};function p(B){return 48<=B&&B<=57}function f(B){return 48<=B&&B<=57||97<=B&&B<=102||65<=B&&B<=70}function d(B){return B>=48&&B<=55}o=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function g(B){return B===32||B===9||B===11||B===12||B===160||B>=5760&&o.indexOf(B)>=0}function b(B){return B===10||B===13||B===8232||B===8233}function S(B){if(B<=65535)return String.fromCharCode(B);var V=String.fromCharCode(Math.floor((B-65536)/1024)+55296),U=String.fromCharCode((B-65536)%1024+56320);return V+U}for(a=new Array(128),l=0;l<128;++l)a[l]=l>=97&&l<=122||l>=65&&l<=90||l===36||l===95;for(u=new Array(128),l=0;l<128;++l)u[l]=l>=97&&l<=122||l>=65&&l<=90||l>=48&&l<=57||l===36||l===95;function E(B){return B<128?a[B]:t.NonAsciiIdentifierStart.test(S(B))}function F(B){return B<128?u[B]:t.NonAsciiIdentifierPart.test(S(B))}function $(B){return B<128?a[B]:e.NonAsciiIdentifierStart.test(S(B))}function k(B){return B<128?u[B]:e.NonAsciiIdentifierPart.test(S(B))}code.exports={isDecimalDigit:p,isHexDigit:f,isOctalDigit:d,isWhiteSpace:g,isLineTerminator:b,isIdentifierStartES5:E,isIdentifierPartES5:F,isIdentifierStartES6:$,isIdentifierPartES6:k}})()),code.exports}var keyword={exports:{}},hasRequiredKeyword;function requireKeyword(){return hasRequiredKeyword||(hasRequiredKeyword=1,(function(){var e=requireCode();function t(E){switch(E){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"let":return!0;default:return!1}}function o(E,F){return!F&&E==="yield"?!1:a(E,F)}function a(E,F){if(F&&t(E))return!0;switch(E.length){case 2:return E==="if"||E==="in"||E==="do";case 3:return E==="var"||E==="for"||E==="new"||E==="try";case 4:return E==="this"||E==="else"||E==="case"||E==="void"||E==="with"||E==="enum";case 5:return E==="while"||E==="break"||E==="catch"||E==="throw"||E==="const"||E==="yield"||E==="class"||E==="super";case 6:return E==="return"||E==="typeof"||E==="delete"||E==="switch"||E==="export"||E==="import";case 7:return E==="default"||E==="finally"||E==="extends";case 8:return E==="function"||E==="continue"||E==="debugger";case 10:return E==="instanceof";default:return!1}}function u(E,F){return E==="null"||E==="true"||E==="false"||o(E,F)}function l(E,F){return E==="null"||E==="true"||E==="false"||a(E,F)}function p(E){return E==="eval"||E==="arguments"}function f(E){var F,$,k;if(E.length===0||(k=E.charCodeAt(0),!e.isIdentifierStartES5(k)))return!1;for(F=1,$=E.length;F<$;++F)if(k=E.charCodeAt(F),!e.isIdentifierPartES5(k))return!1;return!0}function d(E,F){return(E-55296)*1024+(F-56320)+65536}function g(E){var F,$,k,B,V;if(E.length===0)return!1;for(V=e.isIdentifierStartES6,F=0,$=E.length;F<$;++F){if(k=E.charCodeAt(F),55296<=k&&k<=56319){if(++F,F>=$||(B=E.charCodeAt(F),!(56320<=B&&B<=57343)))return!1;k=d(k,B)}if(!V(k))return!1;V=e.isIdentifierPartES6}return!0}function b(E,F){return f(E)&&!u(E,F)}function S(E,F){return g(E)&&!l(E,F)}keyword.exports={isKeywordES5:o,isKeywordES6:a,isReservedWordES5:u,isReservedWordES6:l,isRestrictedWord:p,isIdentifierNameES5:f,isIdentifierNameES6:g,isIdentifierES5:b,isIdentifierES6:S}})()),keyword.exports}var hasRequiredUtils;function requireUtils(){return hasRequiredUtils||(hasRequiredUtils=1,(function(){utils.ast=requireAst(),utils.code=requireCode(),utils.keyword=requireKeyword()})()),utils}var sourceMap={},sourceMapGenerator={},base64Vlq={},base64={},hasRequiredBase64;function requireBase64(){if(hasRequiredBase64)return base64;hasRequiredBase64=1;var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");return base64.encode=function(t){if(0<=t&&t<e.length)return e[t];throw new TypeError("Must be between 0 and 63: "+t)},base64.decode=function(t){var o=65,a=90,u=97,l=122,p=48,f=57,d=43,g=47,b=26,S=52;return o<=t&&t<=a?t-o:u<=t&&t<=l?t-u+b:p<=t&&t<=f?t-p+S:t==d?62:t==g?63:-1},base64}var hasRequiredBase64Vlq;function requireBase64Vlq(){if(hasRequiredBase64Vlq)return base64Vlq;hasRequiredBase64Vlq=1;var e=requireBase64(),t=5,o=1<<t,a=o-1,u=o;function l(f){return f<0?(-f<<1)+1:(f<<1)+0}function p(f){var d=(f&1)===1,g=f>>1;return d?-g:g}return base64Vlq.encode=function(d){var g="",b,S=l(d);do b=S&a,S>>>=t,S>0&&(b|=u),g+=e.encode(b);while(S>0);return g},base64Vlq.decode=function(d,g,b){var S=d.length,E=0,F=0,$,k;do{if(g>=S)throw new Error("Expected more digits in base 64 VLQ value.");if(k=e.decode(d.charCodeAt(g++)),k===-1)throw new Error("Invalid base64 digit: "+d.charAt(g-1));$=!!(k&u),k&=a,E=E+(k<<F),F+=t}while($);b.value=p(E),b.rest=g},base64Vlq}var util={},hasRequiredUtil;function requireUtil(){return hasRequiredUtil||(hasRequiredUtil=1,(function(e){function t(j,O,q){if(O in j)return j[O];if(arguments.length===3)return q;throw new Error('"'+O+'" is a required argument.')}e.getArg=t;var o=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,a=/^data:.+\,.+$/;function u(j){var O=j.match(o);return O?{scheme:O[1],auth:O[2],host:O[3],port:O[4],path:O[5]}:null}e.urlParse=u;function l(j){var O="";return j.scheme&&(O+=j.scheme+":"),O+="//",j.auth&&(O+=j.auth+"@"),j.host&&(O+=j.host),j.port&&(O+=":"+j.port),j.path&&(O+=j.path),O}e.urlGenerate=l;function p(j){var O=j,q=u(j);if(q){if(!q.path)return j;O=q.path}for(var te=e.isAbsolute(O),re=O.split(/\/+/),de,ie=0,me=re.length-1;me>=0;me--)de=re[me],de==="."?re.splice(me,1):de===".."?ie++:ie>0&&(de===""?(re.splice(me+1,ie),ie=0):(re.splice(me,2),ie--));return O=re.join("/"),O===""&&(O=te?"/":"."),q?(q.path=O,l(q)):O}e.normalize=p;function f(j,O){j===""&&(j="."),O===""&&(O=".");var q=u(O),te=u(j);if(te&&(j=te.path||"/"),q&&!q.scheme)return te&&(q.scheme=te.scheme),l(q);if(q||O.match(a))return O;if(te&&!te.host&&!te.path)return te.host=O,l(te);var re=O.charAt(0)==="/"?O:p(j.replace(/\/+$/,"")+"/"+O);return te?(te.path=re,l(te)):re}e.join=f,e.isAbsolute=function(j){return j.charAt(0)==="/"||o.test(j)};function d(j,O){j===""&&(j="."),j=j.replace(/\/$/,"");for(var q=0;O.indexOf(j+"/")!==0;){var te=j.lastIndexOf("/");if(te<0||(j=j.slice(0,te),j.match(/^([^\/]+:\/)?\/*$/)))return O;++q}return Array(q+1).join("../")+O.substr(j.length+1)}e.relative=d;var g=(function(){var j=Object.create(null);return!("__proto__"in j)})();function b(j){return j}function S(j){return F(j)?"$"+j:j}e.toSetString=g?b:S;function E(j){return F(j)?j.slice(1):j}e.fromSetString=g?b:E;function F(j){if(!j)return!1;var O=j.length;if(O<9||j.charCodeAt(O-1)!==95||j.charCodeAt(O-2)!==95||j.charCodeAt(O-3)!==111||j.charCodeAt(O-4)!==116||j.charCodeAt(O-5)!==111||j.charCodeAt(O-6)!==114||j.charCodeAt(O-7)!==112||j.charCodeAt(O-8)!==95||j.charCodeAt(O-9)!==95)return!1;for(var q=O-10;q>=0;q--)if(j.charCodeAt(q)!==36)return!1;return!0}function $(j,O,q){var te=B(j.source,O.source);return te!==0||(te=j.originalLine-O.originalLine,te!==0)||(te=j.originalColumn-O.originalColumn,te!==0||q)||(te=j.generatedColumn-O.generatedColumn,te!==0)||(te=j.generatedLine-O.generatedLine,te!==0)?te:B(j.name,O.name)}e.compareByOriginalPositions=$;function k(j,O,q){var te=j.generatedLine-O.generatedLine;return te!==0||(te=j.generatedColumn-O.generatedColumn,te!==0||q)||(te=B(j.source,O.source),te!==0)||(te=j.originalLine-O.originalLine,te!==0)||(te=j.originalColumn-O.originalColumn,te!==0)?te:B(j.name,O.name)}e.compareByGeneratedPositionsDeflated=k;function B(j,O){return j===O?0:j===null?1:O===null?-1:j>O?1:-1}function V(j,O){var q=j.generatedLine-O.generatedLine;return q!==0||(q=j.generatedColumn-O.generatedColumn,q!==0)||(q=B(j.source,O.source),q!==0)||(q=j.originalLine-O.originalLine,q!==0)||(q=j.originalColumn-O.originalColumn,q!==0)?q:B(j.name,O.name)}e.compareByGeneratedPositionsInflated=V;function U(j){return JSON.parse(j.replace(/^\)]}'[^\n]*\n/,""))}e.parseSourceMapInput=U;function ee(j,O,q){if(O=O||"",j&&(j[j.length-1]!=="/"&&O[0]!=="/"&&(j+="/"),O=j+O),q){var te=u(q);if(!te)throw new Error("sourceMapURL could not be parsed");if(te.path){var re=te.path.lastIndexOf("/");re>=0&&(te.path=te.path.substring(0,re+1))}O=f(l(te),O)}return p(O)}e.computeSourceURL=ee})(util)),util}var arraySet={},hasRequiredArraySet;function requireArraySet(){if(hasRequiredArraySet)return arraySet;hasRequiredArraySet=1;var e=requireUtil(),t=Object.prototype.hasOwnProperty,o=typeof Map<"u";function a(){this._array=[],this._set=o?new Map:Object.create(null)}return a.fromArray=function(l,p){for(var f=new a,d=0,g=l.length;d<g;d++)f.add(l[d],p);return f},a.prototype.size=function(){return o?this._set.size:Object.getOwnPropertyNames(this._set).length},a.prototype.add=function(l,p){var f=o?l:e.toSetString(l),d=o?this.has(l):t.call(this._set,f),g=this._array.length;(!d||p)&&this._array.push(l),d||(o?this._set.set(l,g):this._set[f]=g)},a.prototype.has=function(l){if(o)return this._set.has(l);var p=e.toSetString(l);return t.call(this._set,p)},a.prototype.indexOf=function(l){if(o){var p=this._set.get(l);if(p>=0)return p}else{var f=e.toSetString(l);if(t.call(this._set,f))return this._set[f]}throw new Error('"'+l+'" is not in the set.')},a.prototype.at=function(l){if(l>=0&&l<this._array.length)return this._array[l];throw new Error("No element indexed by "+l)},a.prototype.toArray=function(){return this._array.slice()},arraySet.ArraySet=a,arraySet}var mappingList={},hasRequiredMappingList;function requireMappingList(){if(hasRequiredMappingList)return mappingList;hasRequiredMappingList=1;var e=requireUtil();function t(a,u){var l=a.generatedLine,p=u.generatedLine,f=a.generatedColumn,d=u.generatedColumn;return p>l||p==l&&d>=f||e.compareByGeneratedPositionsInflated(a,u)<=0}function o(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}return o.prototype.unsortedForEach=function(u,l){this._array.forEach(u,l)},o.prototype.add=function(u){t(this._last,u)?(this._last=u,this._array.push(u)):(this._sorted=!1,this._array.push(u))},o.prototype.toArray=function(){return this._sorted||(this._array.sort(e.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},mappingList.MappingList=o,mappingList}var hasRequiredSourceMapGenerator;function requireSourceMapGenerator(){if(hasRequiredSourceMapGenerator)return sourceMapGenerator;hasRequiredSourceMapGenerator=1;var e=requireBase64Vlq(),t=requireUtil(),o=requireArraySet().ArraySet,a=requireMappingList().MappingList;function u(l){l||(l={}),this._file=t.getArg(l,"file",null),this._sourceRoot=t.getArg(l,"sourceRoot",null),this._skipValidation=t.getArg(l,"skipValidation",!1),this._sources=new o,this._names=new o,this._mappings=new a,this._sourcesContents=null}return u.prototype._version=3,u.fromSourceMap=function(p){var f=p.sourceRoot,d=new u({file:p.file,sourceRoot:f});return p.eachMapping(function(g){var b={generated:{line:g.generatedLine,column:g.generatedColumn}};g.source!=null&&(b.source=g.source,f!=null&&(b.source=t.relative(f,b.source)),b.original={line:g.originalLine,column:g.originalColumn},g.name!=null&&(b.name=g.name)),d.addMapping(b)}),p.sources.forEach(function(g){var b=g;f!==null&&(b=t.relative(f,g)),d._sources.has(b)||d._sources.add(b);var S=p.sourceContentFor(g);S!=null&&d.setSourceContent(g,S)}),d},u.prototype.addMapping=function(p){var f=t.getArg(p,"generated"),d=t.getArg(p,"original",null),g=t.getArg(p,"source",null),b=t.getArg(p,"name",null);this._skipValidation||this._validateMapping(f,d,g,b),g!=null&&(g=String(g),this._sources.has(g)||this._sources.add(g)),b!=null&&(b=String(b),this._names.has(b)||this._names.add(b)),this._mappings.add({generatedLine:f.line,generatedColumn:f.column,originalLine:d!=null&&d.line,originalColumn:d!=null&&d.column,source:g,name:b})},u.prototype.setSourceContent=function(p,f){var d=p;this._sourceRoot!=null&&(d=t.relative(this._sourceRoot,d)),f!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[t.toSetString(d)]=f):this._sourcesContents&&(delete this._sourcesContents[t.toSetString(d)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},u.prototype.applySourceMap=function(p,f,d){var g=f;if(f==null){if(p.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);g=p.file}var b=this._sourceRoot;b!=null&&(g=t.relative(b,g));var S=new o,E=new o;this._mappings.unsortedForEach(function(F){if(F.source===g&&F.originalLine!=null){var $=p.originalPositionFor({line:F.originalLine,column:F.originalColumn});$.source!=null&&(F.source=$.source,d!=null&&(F.source=t.join(d,F.source)),b!=null&&(F.source=t.relative(b,F.source)),F.originalLine=$.line,F.originalColumn=$.column,$.name!=null&&(F.name=$.name))}var k=F.source;k!=null&&!S.has(k)&&S.add(k);var B=F.name;B!=null&&!E.has(B)&&E.add(B)},this),this._sources=S,this._names=E,p.sources.forEach(function(F){var $=p.sourceContentFor(F);$!=null&&(d!=null&&(F=t.join(d,F)),b!=null&&(F=t.relative(b,F)),this.setSourceContent(F,$))},this)},u.prototype._validateMapping=function(p,f,d,g){if(f&&typeof f.line!="number"&&typeof f.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(p&&"line"in p&&"column"in p&&p.line>0&&p.column>=0&&!f&&!d&&!g)){if(p&&"line"in p&&"column"in p&&f&&"line"in f&&"column"in f&&p.line>0&&p.column>=0&&f.line>0&&f.column>=0&&d)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:p,source:d,original:f,name:g}))}},u.prototype._serializeMappings=function(){for(var p=0,f=1,d=0,g=0,b=0,S=0,E="",F,$,k,B,V=this._mappings.toArray(),U=0,ee=V.length;U<ee;U++){if($=V[U],F="",$.generatedLine!==f)for(p=0;$.generatedLine!==f;)F+=";",f++;else if(U>0){if(!t.compareByGeneratedPositionsInflated($,V[U-1]))continue;F+=","}F+=e.encode($.generatedColumn-p),p=$.generatedColumn,$.source!=null&&(B=this._sources.indexOf($.source),F+=e.encode(B-S),S=B,F+=e.encode($.originalLine-1-g),g=$.originalLine-1,F+=e.encode($.originalColumn-d),d=$.originalColumn,$.name!=null&&(k=this._names.indexOf($.name),F+=e.encode(k-b),b=k)),E+=F}return E},u.prototype._generateSourcesContent=function(p,f){return p.map(function(d){if(!this._sourcesContents)return null;f!=null&&(d=t.relative(f,d));var g=t.toSetString(d);return Object.prototype.hasOwnProperty.call(this._sourcesContents,g)?this._sourcesContents[g]:null},this)},u.prototype.toJSON=function(){var p={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(p.file=this._file),this._sourceRoot!=null&&(p.sourceRoot=this._sourceRoot),this._sourcesContents&&(p.sourcesContent=this._generateSourcesContent(p.sources,p.sourceRoot)),p},u.prototype.toString=function(){return JSON.stringify(this.toJSON())},sourceMapGenerator.SourceMapGenerator=u,sourceMapGenerator}var sourceMapConsumer={},binarySearch={},hasRequiredBinarySearch;function requireBinarySearch(){return hasRequiredBinarySearch||(hasRequiredBinarySearch=1,(function(e){e.GREATEST_LOWER_BOUND=1,e.LEAST_UPPER_BOUND=2;function t(o,a,u,l,p,f){var d=Math.floor((a-o)/2)+o,g=p(u,l[d],!0);return g===0?d:g>0?a-d>1?t(d,a,u,l,p,f):f==e.LEAST_UPPER_BOUND?a<l.length?a:-1:d:d-o>1?t(o,d,u,l,p,f):f==e.LEAST_UPPER_BOUND?d:o<0?-1:o}e.search=function(a,u,l,p){if(u.length===0)return-1;var f=t(-1,u.length,a,u,l,p||e.GREATEST_LOWER_BOUND);if(f<0)return-1;for(;f-1>=0&&l(u[f],u[f-1],!0)===0;)--f;return f}})(binarySearch)),binarySearch}var quickSort={},hasRequiredQuickSort;function requireQuickSort(){if(hasRequiredQuickSort)return quickSort;hasRequiredQuickSort=1;function e(a,u,l){var p=a[u];a[u]=a[l],a[l]=p}function t(a,u){return Math.round(a+Math.random()*(u-a))}function o(a,u,l,p){if(l<p){var f=t(l,p),d=l-1;e(a,f,p);for(var g=a[p],b=l;b<p;b++)u(a[b],g)<=0&&(d+=1,e(a,d,b));e(a,d+1,b);var S=d+1;o(a,u,l,S-1),o(a,u,S+1,p)}}return quickSort.quickSort=function(a,u){o(a,u,0,a.length-1)},quickSort}var hasRequiredSourceMapConsumer;function requireSourceMapConsumer(){if(hasRequiredSourceMapConsumer)return sourceMapConsumer;hasRequiredSourceMapConsumer=1;var e=requireUtil(),t=requireBinarySearch(),o=requireArraySet().ArraySet,a=requireBase64Vlq(),u=requireQuickSort().quickSort;function l(g,b){var S=g;return typeof g=="string"&&(S=e.parseSourceMapInput(g)),S.sections!=null?new d(S,b):new p(S,b)}l.fromSourceMap=function(g,b){return p.fromSourceMap(g,b)},l.prototype._version=3,l.prototype.__generatedMappings=null,Object.defineProperty(l.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),l.prototype.__originalMappings=null,Object.defineProperty(l.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),l.prototype._charIsMappingSeparator=function(b,S){var E=b.charAt(S);return E===";"||E===","},l.prototype._parseMappings=function(b,S){throw new Error("Subclasses must implement _parseMappings")},l.GENERATED_ORDER=1,l.ORIGINAL_ORDER=2,l.GREATEST_LOWER_BOUND=1,l.LEAST_UPPER_BOUND=2,l.prototype.eachMapping=function(b,S,E){var F=S||null,$=E||l.GENERATED_ORDER,k;switch($){case l.GENERATED_ORDER:k=this._generatedMappings;break;case l.ORIGINAL_ORDER:k=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var B=this.sourceRoot;k.map(function(V){var U=V.source===null?null:this._sources.at(V.source);return U=e.computeSourceURL(B,U,this._sourceMapURL),{source:U,generatedLine:V.generatedLine,generatedColumn:V.generatedColumn,originalLine:V.originalLine,originalColumn:V.originalColumn,name:V.name===null?null:this._names.at(V.name)}},this).forEach(b,F)},l.prototype.allGeneratedPositionsFor=function(b){var S=e.getArg(b,"line"),E={source:e.getArg(b,"source"),originalLine:S,originalColumn:e.getArg(b,"column",0)};if(E.source=this._findSourceIndex(E.source),E.source<0)return[];var F=[],$=this._findMapping(E,this._originalMappings,"originalLine","originalColumn",e.compareByOriginalPositions,t.LEAST_UPPER_BOUND);if($>=0){var k=this._originalMappings[$];if(b.column===void 0)for(var B=k.originalLine;k&&k.originalLine===B;)F.push({line:e.getArg(k,"generatedLine",null),column:e.getArg(k,"generatedColumn",null),lastColumn:e.getArg(k,"lastGeneratedColumn",null)}),k=this._originalMappings[++$];else for(var V=k.originalColumn;k&&k.originalLine===S&&k.originalColumn==V;)F.push({line:e.getArg(k,"generatedLine",null),column:e.getArg(k,"generatedColumn",null),lastColumn:e.getArg(k,"lastGeneratedColumn",null)}),k=this._originalMappings[++$]}return F},sourceMapConsumer.SourceMapConsumer=l;function p(g,b){var S=g;typeof g=="string"&&(S=e.parseSourceMapInput(g));var E=e.getArg(S,"version"),F=e.getArg(S,"sources"),$=e.getArg(S,"names",[]),k=e.getArg(S,"sourceRoot",null),B=e.getArg(S,"sourcesContent",null),V=e.getArg(S,"mappings"),U=e.getArg(S,"file",null);if(E!=this._version)throw new Error("Unsupported version: "+E);k&&(k=e.normalize(k)),F=F.map(String).map(e.normalize).map(function(ee){return k&&e.isAbsolute(k)&&e.isAbsolute(ee)?e.relative(k,ee):ee}),this._names=o.fromArray($.map(String),!0),this._sources=o.fromArray(F,!0),this._absoluteSources=this._sources.toArray().map(function(ee){return e.computeSourceURL(k,ee,b)}),this.sourceRoot=k,this.sourcesContent=B,this._mappings=V,this._sourceMapURL=b,this.file=U}p.prototype=Object.create(l.prototype),p.prototype.consumer=l,p.prototype._findSourceIndex=function(g){var b=g;if(this.sourceRoot!=null&&(b=e.relative(this.sourceRoot,b)),this._sources.has(b))return this._sources.indexOf(b);var S;for(S=0;S<this._absoluteSources.length;++S)if(this._absoluteSources[S]==g)return S;return-1},p.fromSourceMap=function(b,S){var E=Object.create(p.prototype),F=E._names=o.fromArray(b._names.toArray(),!0),$=E._sources=o.fromArray(b._sources.toArray(),!0);E.sourceRoot=b._sourceRoot,E.sourcesContent=b._generateSourcesContent(E._sources.toArray(),E.sourceRoot),E.file=b._file,E._sourceMapURL=S,E._absoluteSources=E._sources.toArray().map(function(q){return e.computeSourceURL(E.sourceRoot,q,S)});for(var k=b._mappings.toArray().slice(),B=E.__generatedMappings=[],V=E.__originalMappings=[],U=0,ee=k.length;U<ee;U++){var j=k[U],O=new f;O.generatedLine=j.generatedLine,O.generatedColumn=j.generatedColumn,j.source&&(O.source=$.indexOf(j.source),O.originalLine=j.originalLine,O.originalColumn=j.originalColumn,j.name&&(O.name=F.indexOf(j.name)),V.push(O)),B.push(O)}return u(E.__originalMappings,e.compareByOriginalPositions),E},p.prototype._version=3,Object.defineProperty(p.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function f(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}p.prototype._parseMappings=function(b,S){for(var E=1,F=0,$=0,k=0,B=0,V=0,U=b.length,ee=0,j={},O={},q=[],te=[],re,de,ie,me,pe;ee<U;)if(b.charAt(ee)===";")E++,ee++,F=0;else if(b.charAt(ee)===",")ee++;else{for(re=new f,re.generatedLine=E,me=ee;me<U&&!this._charIsMappingSeparator(b,me);me++);if(de=b.slice(ee,me),ie=j[de],ie)ee+=de.length;else{for(ie=[];ee<me;)a.decode(b,ee,O),pe=O.value,ee=O.rest,ie.push(pe);if(ie.length===2)throw new Error("Found a source, but no line and column");if(ie.length===3)throw new Error("Found a source and line, but no column");j[de]=ie}re.generatedColumn=F+ie[0],F=re.generatedColumn,ie.length>1&&(re.source=B+ie[1],B+=ie[1],re.originalLine=$+ie[2],$=re.originalLine,re.originalLine+=1,re.originalColumn=k+ie[3],k=re.originalColumn,ie.length>4&&(re.name=V+ie[4],V+=ie[4])),te.push(re),typeof re.originalLine=="number"&&q.push(re)}u(te,e.compareByGeneratedPositionsDeflated),this.__generatedMappings=te,u(q,e.compareByOriginalPositions),this.__originalMappings=q},p.prototype._findMapping=function(b,S,E,F,$,k){if(b[E]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+b[E]);if(b[F]<0)throw new TypeError("Column must be greater than or equal to 0, got "+b[F]);return t.search(b,S,$,k)},p.prototype.computeColumnSpans=function(){for(var b=0;b<this._generatedMappings.length;++b){var S=this._generatedMappings[b];if(b+1<this._generatedMappings.length){var E=this._generatedMappings[b+1];if(S.generatedLine===E.generatedLine){S.lastGeneratedColumn=E.generatedColumn-1;continue}}S.lastGeneratedColumn=1/0}},p.prototype.originalPositionFor=function(b){var S={generatedLine:e.getArg(b,"line"),generatedColumn:e.getArg(b,"column")},E=this._findMapping(S,this._generatedMappings,"generatedLine","generatedColumn",e.compareByGeneratedPositionsDeflated,e.getArg(b,"bias",l.GREATEST_LOWER_BOUND));if(E>=0){var F=this._generatedMappings[E];if(F.generatedLine===S.generatedLine){var $=e.getArg(F,"source",null);$!==null&&($=this._sources.at($),$=e.computeSourceURL(this.sourceRoot,$,this._sourceMapURL));var k=e.getArg(F,"name",null);return k!==null&&(k=this._names.at(k)),{source:$,line:e.getArg(F,"originalLine",null),column:e.getArg(F,"originalColumn",null),name:k}}}return{source:null,line:null,column:null,name:null}},p.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(b){return b==null}):!1},p.prototype.sourceContentFor=function(b,S){if(!this.sourcesContent)return null;var E=this._findSourceIndex(b);if(E>=0)return this.sourcesContent[E];var F=b;this.sourceRoot!=null&&(F=e.relative(this.sourceRoot,F));var $;if(this.sourceRoot!=null&&($=e.urlParse(this.sourceRoot))){var k=F.replace(/^file:\/\//,"");if($.scheme=="file"&&this._sources.has(k))return this.sourcesContent[this._sources.indexOf(k)];if((!$.path||$.path=="/")&&this._sources.has("/"+F))return this.sourcesContent[this._sources.indexOf("/"+F)]}if(S)return null;throw new Error('"'+F+'" is not in the SourceMap.')},p.prototype.generatedPositionFor=function(b){var S=e.getArg(b,"source");if(S=this._findSourceIndex(S),S<0)return{line:null,column:null,lastColumn:null};var E={source:S,originalLine:e.getArg(b,"line"),originalColumn:e.getArg(b,"column")},F=this._findMapping(E,this._originalMappings,"originalLine","originalColumn",e.compareByOriginalPositions,e.getArg(b,"bias",l.GREATEST_LOWER_BOUND));if(F>=0){var $=this._originalMappings[F];if($.source===E.source)return{line:e.getArg($,"generatedLine",null),column:e.getArg($,"generatedColumn",null),lastColumn:e.getArg($,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},sourceMapConsumer.BasicSourceMapConsumer=p;function d(g,b){var S=g;typeof g=="string"&&(S=e.parseSourceMapInput(g));var E=e.getArg(S,"version"),F=e.getArg(S,"sections");if(E!=this._version)throw new Error("Unsupported version: "+E);this._sources=new o,this._names=new o;var $={line:-1,column:0};this._sections=F.map(function(k){if(k.url)throw new Error("Support for url field in sections not implemented.");var B=e.getArg(k,"offset"),V=e.getArg(B,"line"),U=e.getArg(B,"column");if(V<$.line||V===$.line&&U<$.column)throw new Error("Section offsets must be ordered and non-overlapping.");return $=B,{generatedOffset:{generatedLine:V+1,generatedColumn:U+1},consumer:new l(e.getArg(k,"map"),b)}})}return d.prototype=Object.create(l.prototype),d.prototype.constructor=l,d.prototype._version=3,Object.defineProperty(d.prototype,"sources",{get:function(){for(var g=[],b=0;b<this._sections.length;b++)for(var S=0;S<this._sections[b].consumer.sources.length;S++)g.push(this._sections[b].consumer.sources[S]);return g}}),d.prototype.originalPositionFor=function(b){var S={generatedLine:e.getArg(b,"line"),generatedColumn:e.getArg(b,"column")},E=t.search(S,this._sections,function($,k){var B=$.generatedLine-k.generatedOffset.generatedLine;return B||$.generatedColumn-k.generatedOffset.generatedColumn}),F=this._sections[E];return F?F.consumer.originalPositionFor({line:S.generatedLine-(F.generatedOffset.generatedLine-1),column:S.generatedColumn-(F.generatedOffset.generatedLine===S.generatedLine?F.generatedOffset.generatedColumn-1:0),bias:b.bias}):{source:null,line:null,column:null,name:null}},d.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(b){return b.consumer.hasContentsOfAllSources()})},d.prototype.sourceContentFor=function(b,S){for(var E=0;E<this._sections.length;E++){var F=this._sections[E],$=F.consumer.sourceContentFor(b,!0);if($)return $}if(S)return null;throw new Error('"'+b+'" is not in the SourceMap.')},d.prototype.generatedPositionFor=function(b){for(var S=0;S<this._sections.length;S++){var E=this._sections[S];if(E.consumer._findSourceIndex(e.getArg(b,"source"))!==-1){var F=E.consumer.generatedPositionFor(b);if(F){var $={line:F.line+(E.generatedOffset.generatedLine-1),column:F.column+(E.generatedOffset.generatedLine===F.line?E.generatedOffset.generatedColumn-1:0)};return $}}}return{line:null,column:null}},d.prototype._parseMappings=function(b,S){this.__generatedMappings=[],this.__originalMappings=[];for(var E=0;E<this._sections.length;E++)for(var F=this._sections[E],$=F.consumer._generatedMappings,k=0;k<$.length;k++){var B=$[k],V=F.consumer._sources.at(B.source);V=e.computeSourceURL(F.consumer.sourceRoot,V,this._sourceMapURL),this._sources.add(V),V=this._sources.indexOf(V);var U=null;B.name&&(U=F.consumer._names.at(B.name),this._names.add(U),U=this._names.indexOf(U));var ee={source:V,generatedLine:B.generatedLine+(F.generatedOffset.generatedLine-1),generatedColumn:B.generatedColumn+(F.generatedOffset.generatedLine===B.generatedLine?F.generatedOffset.generatedColumn-1:0),originalLine:B.originalLine,originalColumn:B.originalColumn,name:U};this.__generatedMappings.push(ee),typeof ee.originalLine=="number"&&this.__originalMappings.push(ee)}u(this.__generatedMappings,e.compareByGeneratedPositionsDeflated),u(this.__originalMappings,e.compareByOriginalPositions)},sourceMapConsumer.IndexedSourceMapConsumer=d,sourceMapConsumer}var sourceNode={},hasRequiredSourceNode;function requireSourceNode(){if(hasRequiredSourceNode)return sourceNode;hasRequiredSourceNode=1;var e=requireSourceMapGenerator().SourceMapGenerator,t=requireUtil(),o=/(\r?\n)/,a=10,u="$$$isSourceNode$$$";function l(p,f,d,g,b){this.children=[],this.sourceContents={},this.line=p??null,this.column=f??null,this.source=d??null,this.name=b??null,this[u]=!0,g!=null&&this.add(g)}return l.fromStringWithSourceMap=function(f,d,g){var b=new l,S=f.split(o),E=0,F=function(){var U=j(),ee=j()||"";return U+ee;function j(){return E<S.length?S[E++]:void 0}},$=1,k=0,B=null;return d.eachMapping(function(U){if(B!==null)if($<U.generatedLine)V(B,F()),$++,k=0;else{var ee=S[E]||"",j=ee.substr(0,U.generatedColumn-k);S[E]=ee.substr(U.generatedColumn-k),k=U.generatedColumn,V(B,j),B=U;return}for(;$<U.generatedLine;)b.add(F()),$++;if(k<U.generatedColumn){var ee=S[E]||"";b.add(ee.substr(0,U.generatedColumn)),S[E]=ee.substr(U.generatedColumn),k=U.generatedColumn}B=U},this),E<S.length&&(B&&V(B,F()),b.add(S.splice(E).join(""))),d.sources.forEach(function(U){var ee=d.sourceContentFor(U);ee!=null&&(g!=null&&(U=t.join(g,U)),b.setSourceContent(U,ee))}),b;function V(U,ee){if(U===null||U.source===void 0)b.add(ee);else{var j=g?t.join(g,U.source):U.source;b.add(new l(U.originalLine,U.originalColumn,j,ee,U.name))}}},l.prototype.add=function(f){if(Array.isArray(f))f.forEach(function(d){this.add(d)},this);else if(f[u]||typeof f=="string")f&&this.children.push(f);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+f);return this},l.prototype.prepend=function(f){if(Array.isArray(f))for(var d=f.length-1;d>=0;d--)this.prepend(f[d]);else if(f[u]||typeof f=="string")this.children.unshift(f);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+f);return this},l.prototype.walk=function(f){for(var d,g=0,b=this.children.length;g<b;g++)d=this.children[g],d[u]?d.walk(f):d!==""&&f(d,{source:this.source,line:this.line,column:this.column,name:this.name})},l.prototype.join=function(f){var d,g,b=this.children.length;if(b>0){for(d=[],g=0;g<b-1;g++)d.push(this.children[g]),d.push(f);d.push(this.children[g]),this.children=d}return this},l.prototype.replaceRight=function(f,d){var g=this.children[this.children.length-1];return g[u]?g.replaceRight(f,d):typeof g=="string"?this.children[this.children.length-1]=g.replace(f,d):this.children.push("".replace(f,d)),this},l.prototype.setSourceContent=function(f,d){this.sourceContents[t.toSetString(f)]=d},l.prototype.walkSourceContents=function(f){for(var d=0,g=this.children.length;d<g;d++)this.children[d][u]&&this.children[d].walkSourceContents(f);for(var b=Object.keys(this.sourceContents),d=0,g=b.length;d<g;d++)f(t.fromSetString(b[d]),this.sourceContents[b[d]])},l.prototype.toString=function(){var f="";return this.walk(function(d){f+=d}),f},l.prototype.toStringWithSourceMap=function(f){var d={code:"",line:1,column:0},g=new e(f),b=!1,S=null,E=null,F=null,$=null;return this.walk(function(k,B){d.code+=k,B.source!==null&&B.line!==null&&B.column!==null?((S!==B.source||E!==B.line||F!==B.column||$!==B.name)&&g.addMapping({source:B.source,original:{line:B.line,column:B.column},generated:{line:d.line,column:d.column},name:B.name}),S=B.source,E=B.line,F=B.column,$=B.name,b=!0):b&&(g.addMapping({generated:{line:d.line,column:d.column}}),S=null,b=!1);for(var V=0,U=k.length;V<U;V++)k.charCodeAt(V)===a?(d.line++,d.column=0,V+1===U?(S=null,b=!1):b&&g.addMapping({source:B.source,original:{line:B.line,column:B.column},generated:{line:d.line,column:d.column},name:B.name})):d.column++}),this.walkSourceContents(function(k,B){g.setSourceContent(k,B)}),{code:d.code,map:g}},sourceNode.SourceNode=l,sourceNode}var hasRequiredSourceMap;function requireSourceMap(){return hasRequiredSourceMap||(hasRequiredSourceMap=1,sourceMap.SourceMapGenerator=requireSourceMapGenerator().SourceMapGenerator,sourceMap.SourceMapConsumer=requireSourceMapConsumer().SourceMapConsumer,sourceMap.SourceNode=requireSourceNode().SourceNode),sourceMap}const version="2.1.0",require$$3={version};var hasRequiredEscodegen;function requireEscodegen(){return hasRequiredEscodegen||(hasRequiredEscodegen=1,(function(e){(function(){var t,o,a,u,l,p,f,d,g,b,S,E,F,$,k,B,V,U,ee,j,O,q,te,re,de,ie;l=requireEstraverse(),p=requireUtils(),t=l.Syntax;function me(A){return Se.Expression.hasOwnProperty(A.type)}function pe(A){return Se.Statement.hasOwnProperty(A.type)}o={Sequence:0,Yield:1,Assignment:1,Conditional:2,ArrowFunction:2,Coalesce:3,LogicalOR:4,LogicalAND:5,BitwiseOR:6,BitwiseXOR:7,BitwiseAND:8,Equality:9,Relational:10,BitwiseSHIFT:11,Additive:12,Multiplicative:13,Exponentiation:14,Await:15,Unary:15,Postfix:16,OptionalChaining:17,Call:18,New:19,TaggedTemplate:20,Member:21,Primary:22},a={"??":o.Coalesce,"||":o.LogicalOR,"&&":o.LogicalAND,"|":o.BitwiseOR,"^":o.BitwiseXOR,"&":o.BitwiseAND,"==":o.Equality,"!=":o.Equality,"===":o.Equality,"!==":o.Equality,is:o.Equality,isnt:o.Equality,"<":o.Relational,">":o.Relational,"<=":o.Relational,">=":o.Relational,in:o.Relational,instanceof:o.Relational,"<<":o.BitwiseSHIFT,">>":o.BitwiseSHIFT,">>>":o.BitwiseSHIFT,"+":o.Additive,"-":o.Additive,"*":o.Multiplicative,"%":o.Multiplicative,"/":o.Multiplicative,"**":o.Exponentiation};var le=1,he=2,Ae=4,ye=8,Me=16,ge=32,Le=64,Xe=he|Ae,We=le|he,ue=le|he|Ae,De=le,Qe=Ae,Re=le|Ae,$e=le,Ze=le|ge,we=0,Ie=le|Me,nt=le|ye;function tt(){return{indent:null,base:null,parse:null,comment:!1,format:{indent:{style:"    ",base:0,adjustMultilineComment:!1},newline:`
`,space:" ",json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0,safeConcatenation:!1,preserveBlankLines:!1},moz:{comprehensionExpressionStartsWithAssignment:!1,starlessGenerator:!1},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:!1,directive:!1,raw:!0,verbatim:null,sourceCode:null}}function Oe(A,N){var R="";for(N|=0;N>0;N>>>=1,A+=A)N&1&&(R+=A);return R}function mt(A){return/[\r\n]/g.test(A)}function je(A){var N=A.length;return N&&p.code.isLineTerminator(A.charCodeAt(N-1))}function ut(A,N){var R;for(R in N)N.hasOwnProperty(R)&&(A[R]=N[R]);return A}function ct(A,N){var R,L;function Z(se){return typeof se=="object"&&se instanceof Object&&!(se instanceof RegExp)}for(R in N)N.hasOwnProperty(R)&&(L=N[R],Z(L)?Z(A[R])?ct(A[R],L):A[R]=ct({},L):A[R]=L);return A}function pt(A){var N,R,L,Z,se;if(A!==A)throw new Error("Numeric literal whose value is NaN");if(A<0||A===0&&1/A<0)throw new Error("Numeric literal whose value is negative");if(A===1/0)return g?"null":b?"1e400":"1e+400";if(N=""+A,!b||N.length<3)return N;for(R=N.indexOf("."),!g&&N.charCodeAt(0)===48&&R===1&&(R=0,N=N.slice(1)),L=N,N=N.replace("e+","e"),Z=0,(se=L.indexOf("e"))>0&&(Z=+L.slice(se+1),L=L.slice(0,se)),R>=0&&(Z-=L.length-R-1,L=+(L.slice(0,R)+L.slice(R+1))+""),se=0;L.charCodeAt(L.length+se-1)===48;)--se;return se!==0&&(Z-=se,L=L.slice(0,se)),Z!==0&&(L+="e"+Z),(L.length<N.length||S&&A>1e12&&Math.floor(A)===A&&(L="0x"+A.toString(16)).length<N.length)&&+L===A&&(N=L),N}function _t(A,N){return(A&-2)===8232?(N?"u":"\\u")+(A===8232?"2028":"2029"):A===10||A===13?(N?"":"\\")+(A===10?"n":"r"):String.fromCharCode(A)}function yt(A){var N,R,L,Z,se,ae,fe,_e;if(R=A.toString(),A.source){if(N=R.match(/\/([^/]*)$/),!N)return R;for(L=N[1],R="",fe=!1,_e=!1,Z=0,se=A.source.length;Z<se;++Z)ae=A.source.charCodeAt(Z),_e?(R+=_t(ae,_e),_e=!1):(fe?ae===93&&(fe=!1):ae===47?R+="\\":ae===91&&(fe=!0),R+=_t(ae,_e),_e=ae===92);return"/"+R+"/"+L}return R}function bt(A,N){var R;return A===8?"\\b":A===12?"\\f":A===9?"\\t":(R=A.toString(16).toUpperCase(),g||A>255?"\\u"+"0000".slice(R.length)+R:A===0&&!p.code.isDecimalDigit(N)?"\\0":A===11?"\\x0B":"\\x"+"00".slice(R.length)+R)}function Dt(A){if(A===92)return"\\\\";if(A===10)return"\\n";if(A===13)return"\\r";if(A===8232)return"\\u2028";if(A===8233)return"\\u2029";throw new Error("Incorrectly classified character")}function At(A){var N,R,L,Z;for(Z=E==="double"?'"':"'",N=0,R=A.length;N<R;++N)if(L=A.charCodeAt(N),L===39){Z='"';break}else if(L===34){Z="'";break}else L===92&&++N;return Z+A+Z}function it(A){var N="",R,L,Z,se=0,ae=0,fe,_e;for(R=0,L=A.length;R<L;++R){if(Z=A.charCodeAt(R),Z===39)++se;else if(Z===34)++ae;else if(Z===47&&g)N+="\\";else if(p.code.isLineTerminator(Z)||Z===92){N+=Dt(Z);continue}else if(!p.code.isIdentifierPartES5(Z)&&(g&&Z<32||!g&&!F&&(Z<32||Z>126))){N+=bt(Z,A.charCodeAt(R+1));continue}N+=String.fromCharCode(Z)}if(fe=!(E==="double"||E==="auto"&&ae<se),_e=fe?"'":'"',!(fe?se:ae))return _e+N+_e;for(A=N,N=_e,R=0,L=A.length;R<L;++R)Z=A.charCodeAt(R),(Z===39&&fe||Z===34&&!fe)&&(N+="\\"),N+=String.fromCharCode(Z);return N+_e}function Et(A){var N,R,L,Z="";for(N=0,R=A.length;N<R;++N)L=A[N],Z+=Array.isArray(L)?Et(L):L;return Z}function ke(A,N){if(!q)return Array.isArray(A)?Et(A):A;if(N==null){if(A instanceof u)return A;N={}}return N.loc==null?new u(null,null,q,A,N.name||null):new u(N.loc.start.line,N.loc.start.column,q===!0?N.loc.source||null:q,A,N.name||null)}function Ye(){return k||" "}function Pe(A,N){var R,L,Z,se;return R=ke(A).toString(),R.length===0?[N]:(L=ke(N).toString(),L.length===0?[A]:(Z=R.charCodeAt(R.length-1),se=L.charCodeAt(0),(Z===43||Z===45)&&Z===se||p.code.isIdentifierPartES5(Z)&&p.code.isIdentifierPartES5(se)||Z===47&&se===105?[A,Ye(),N]:p.code.isWhiteSpace(Z)||p.code.isLineTerminator(Z)||p.code.isWhiteSpace(se)||p.code.isLineTerminator(se)?[A,N]:[A,k,N]))}function He(A){return[f,A]}function Ne(A){var N;N=f,f+=d,A(f),f=N}function Mt(A){var N;for(N=A.length-1;N>=0&&!p.code.isLineTerminator(A.charCodeAt(N));--N);return A.length-1-N}function kt(A,N){var R,L,Z,se,ae,fe,_e,Te;for(R=A.split(/\r\n|[\r\n]/),fe=Number.MAX_VALUE,L=1,Z=R.length;L<Z;++L){for(se=R[L],ae=0;ae<se.length&&p.code.isWhiteSpace(se.charCodeAt(ae));)++ae;fe>ae&&(fe=ae)}for(typeof N<"u"?(_e=f,R[1][fe]==="*"&&(N+=" "),f=N):(fe&1&&--fe,_e=f),L=1,Z=R.length;L<Z;++L)Te=ke(He(R[L].slice(fe))),R[L]=q?Te.join(""):Te;return f=_e,R.join(`
`)}function rt(A,N){if(A.type==="Line"){if(je(A.value))return"//"+A.value;var R="//"+A.value;return re||(R+=`
`),R}return j.format.indent.adjustMultilineComment&&/[\n\r]/.test(A.value)?kt("/*"+A.value+"*/",N):"/*"+A.value+"*/"}function Je(A,N){var R,L,Z,se,ae,fe,_e,Te,Ke,Pt,Gt,Ot,Wt,at;if(A.leadingComments&&A.leadingComments.length>0){if(se=N,re){for(Z=A.leadingComments[0],N=[],Te=Z.extendedRange,Ke=Z.range,Gt=te.substring(Te[0],Ke[0]),at=(Gt.match(/\n/g)||[]).length,at>0?(N.push(Oe(`
`,at)),N.push(He(rt(Z)))):(N.push(Gt),N.push(rt(Z))),Pt=Ke,R=1,L=A.leadingComments.length;R<L;R++)Z=A.leadingComments[R],Ke=Z.range,Ot=te.substring(Pt[1],Ke[0]),at=(Ot.match(/\n/g)||[]).length,N.push(Oe(`
`,at)),N.push(He(rt(Z))),Pt=Ke;Wt=te.substring(Ke[1],Te[1]),at=(Wt.match(/\n/g)||[]).length,N.push(Oe(`
`,at))}else for(Z=A.leadingComments[0],N=[],U&&A.type===t.Program&&A.body.length===0&&N.push(`
`),N.push(rt(Z)),je(ke(N).toString())||N.push(`
`),R=1,L=A.leadingComments.length;R<L;++R)Z=A.leadingComments[R],_e=[rt(Z)],je(ke(_e).toString())||_e.push(`
`),N.push(He(_e));N.push(He(se))}if(A.trailingComments)if(re)Z=A.trailingComments[0],Te=Z.extendedRange,Ke=Z.range,Gt=te.substring(Te[0],Ke[0]),at=(Gt.match(/\n/g)||[]).length,at>0?(N.push(Oe(`
`,at)),N.push(He(rt(Z)))):(N.push(Gt),N.push(rt(Z)));else for(ae=!je(ke(N).toString()),fe=Oe(" ",Mt(ke([f,N,d]).toString())),R=0,L=A.trailingComments.length;R<L;++R)Z=A.trailingComments[R],ae?(R===0?N=[N,d]:N=[N,fe],N.push(rt(Z,fe))):N=[N,He(rt(Z))],R!==L-1&&!je(ke(N).toString())&&(N=[N,`
`]);return N}function st(A,N,R){var L,Z=0;for(L=A;L<N;L++)te[L]===`
`&&Z++;for(L=1;L<Z;L++)R.push($)}function Ee(A,N,R){return N<R?["(",A,")"]:A}function xt(A){var N,R,L;for(L=A.split(/\r\n|\n/),N=1,R=L.length;N<R;N++)L[N]=$+f+L[N];return L}function Ct(A,N){var R,L,Z;return R=A[j.verbatim],typeof R=="string"?L=Ee(xt(R),o.Sequence,N):(L=xt(R.content),Z=R.precedence!=null?R.precedence:o.Sequence,L=Ee(L,Z,N)),ke(L,A)}function Se(){}Se.prototype.maybeBlock=function(A,N){var R,L,Z=this;return L=!j.comment||!A.leadingComments,A.type===t.BlockStatement&&L?[k,this.generateStatement(A,N)]:A.type===t.EmptyStatement&&L?";":(Ne(function(){R=[$,He(Z.generateStatement(A,N))]}),R)},Se.prototype.maybeBlockSuffix=function(A,N){var R=je(ke(N).toString());return A.type===t.BlockStatement&&(!j.comment||!A.leadingComments)&&!R?[N,k]:R?[N,f]:[N,$,f]};function Ge(A){return ke(A.name,A)}function Ve(A,N){return A.async?"async"+(N?Ye():k):""}function ze(A){var N=A.generator&&!j.moz.starlessGenerator;return N?"*"+k:""}function et(A){var N=A.value,R="";return N.async&&(R+=Ve(N,!A.computed)),N.generator&&(R+=ze(N)?"*":""),R}Se.prototype.generatePattern=function(A,N,R){return A.type===t.Identifier?Ge(A):this.generateExpression(A,N,R)},Se.prototype.generateFunctionParams=function(A){var N,R,L,Z;if(Z=!1,A.type===t.ArrowFunctionExpression&&!A.rest&&(!A.defaults||A.defaults.length===0)&&A.params.length===1&&A.params[0].type===t.Identifier)L=[Ve(A,!0),Ge(A.params[0])];else{for(L=A.type===t.ArrowFunctionExpression?[Ve(A,!1)]:[],L.push("("),A.defaults&&(Z=!0),N=0,R=A.params.length;N<R;++N)Z&&A.defaults[N]?L.push(this.generateAssignment(A.params[N],A.defaults[N],"=",o.Assignment,ue)):L.push(this.generatePattern(A.params[N],o.Assignment,ue)),N+1<R&&L.push(","+k);A.rest&&(A.params.length&&L.push(","+k),L.push("..."),L.push(Ge(A.rest))),L.push(")")}return L},Se.prototype.generateFunctionBody=function(A){var N,R;return N=this.generateFunctionParams(A),A.type===t.ArrowFunctionExpression&&(N.push(k),N.push("=>")),A.expression?(N.push(k),R=this.generateExpression(A.body,o.Assignment,ue),R.toString().charAt(0)==="{"&&(R=["(",R,")"]),N.push(R)):N.push(this.maybeBlock(A.body,nt)),N},Se.prototype.generateIterationForStatement=function(A,N,R){var L=["for"+(N.await?Ye()+"await":"")+k+"("],Z=this;return Ne(function(){N.left.type===t.VariableDeclaration?Ne(function(){L.push(N.left.kind+Ye()),L.push(Z.generateStatement(N.left.declarations[0],we))}):L.push(Z.generateExpression(N.left,o.Call,ue)),L=Pe(L,A),L=[Pe(L,Z.generateExpression(N.right,o.Assignment,ue)),")"]}),L.push(this.maybeBlock(N.body,R)),L},Se.prototype.generatePropertyKey=function(A,N){var R=[];return N&&R.push("["),R.push(this.generateExpression(A,o.Assignment,ue)),N&&R.push("]"),R},Se.prototype.generateAssignment=function(A,N,R,L,Z){return o.Assignment<L&&(Z|=le),Ee([this.generateExpression(A,o.Call,Z),k+R+k,this.generateExpression(N,o.Assignment,Z)],o.Assignment,L)},Se.prototype.semicolon=function(A){return!V&&A&ge?"":";"},Se.Statement={BlockStatement:function(A,N){var R,L,Z=["{",$],se=this;return Ne(function(){A.body.length===0&&re&&(R=A.range,R[1]-R[0]>2&&(L=te.substring(R[0]+1,R[1]-1),L[0]===`
`&&(Z=["{"]),Z.push(L)));var ae,fe,_e,Te;for(Te=$e,N&ye&&(Te|=Me),ae=0,fe=A.body.length;ae<fe;++ae)re&&(ae===0&&(A.body[0].leadingComments&&(R=A.body[0].leadingComments[0].extendedRange,L=te.substring(R[0],R[1]),L[0]===`
`&&(Z=["{"])),A.body[0].leadingComments||st(A.range[0],A.body[0].range[0],Z)),ae>0&&!A.body[ae-1].trailingComments&&!A.body[ae].leadingComments&&st(A.body[ae-1].range[1],A.body[ae].range[0],Z)),ae===fe-1&&(Te|=ge),A.body[ae].leadingComments&&re?_e=se.generateStatement(A.body[ae],Te):_e=He(se.generateStatement(A.body[ae],Te)),Z.push(_e),je(ke(_e).toString())||re&&ae<fe-1&&A.body[ae+1].leadingComments||Z.push($),re&&ae===fe-1&&(A.body[ae].trailingComments||st(A.body[ae].range[1],A.range[1],Z))}),Z.push(He("}")),Z},BreakStatement:function(A,N){return A.label?"break "+A.label.name+this.semicolon(N):"break"+this.semicolon(N)},ContinueStatement:function(A,N){return A.label?"continue "+A.label.name+this.semicolon(N):"continue"+this.semicolon(N)},ClassBody:function(A,N){var R=["{",$],L=this;return Ne(function(Z){var se,ae;for(se=0,ae=A.body.length;se<ae;++se)R.push(Z),R.push(L.generateExpression(A.body[se],o.Sequence,ue)),se+1<ae&&R.push($)}),je(ke(R).toString())||R.push($),R.push(f),R.push("}"),R},ClassDeclaration:function(A,N){var R,L;return R=["class"],A.id&&(R=Pe(R,this.generateExpression(A.id,o.Sequence,ue))),A.superClass&&(L=Pe("extends",this.generateExpression(A.superClass,o.Unary,ue)),R=Pe(R,L)),R.push(k),R.push(this.generateStatement(A.body,Ze)),R},DirectiveStatement:function(A,N){return j.raw&&A.raw?A.raw+this.semicolon(N):At(A.directive)+this.semicolon(N)},DoWhileStatement:function(A,N){var R=Pe("do",this.maybeBlock(A.body,$e));return R=this.maybeBlockSuffix(A.body,R),Pe(R,["while"+k+"(",this.generateExpression(A.test,o.Sequence,ue),")"+this.semicolon(N)])},CatchClause:function(A,N){var R,L=this;return Ne(function(){var Z;A.param?(R=["catch"+k+"(",L.generateExpression(A.param,o.Sequence,ue),")"],A.guard&&(Z=L.generateExpression(A.guard,o.Sequence,ue),R.splice(2,0," if ",Z))):R=["catch"]}),R.push(this.maybeBlock(A.body,$e)),R},DebuggerStatement:function(A,N){return"debugger"+this.semicolon(N)},EmptyStatement:function(A,N){return";"},ExportDefaultDeclaration:function(A,N){var R=["export"],L;return L=N&ge?Ze:$e,R=Pe(R,"default"),pe(A.declaration)?R=Pe(R,this.generateStatement(A.declaration,L)):R=Pe(R,this.generateExpression(A.declaration,o.Assignment,ue)+this.semicolon(N)),R},ExportNamedDeclaration:function(A,N){var R=["export"],L,Z=this;return L=N&ge?Ze:$e,A.declaration?Pe(R,this.generateStatement(A.declaration,L)):(A.specifiers&&(A.specifiers.length===0?R=Pe(R,"{"+k+"}"):A.specifiers[0].type===t.ExportBatchSpecifier?R=Pe(R,this.generateExpression(A.specifiers[0],o.Sequence,ue)):(R=Pe(R,"{"),Ne(function(se){var ae,fe;for(R.push($),ae=0,fe=A.specifiers.length;ae<fe;++ae)R.push(se),R.push(Z.generateExpression(A.specifiers[ae],o.Sequence,ue)),ae+1<fe&&R.push(","+$)}),je(ke(R).toString())||R.push($),R.push(f+"}")),A.source?R=Pe(R,["from"+k,this.generateExpression(A.source,o.Sequence,ue),this.semicolon(N)]):R.push(this.semicolon(N))),R)},ExportAllDeclaration:function(A,N){return["export"+k,"*"+k,"from"+k,this.generateExpression(A.source,o.Sequence,ue),this.semicolon(N)]},ExpressionStatement:function(A,N){var R,L;function Z(fe){var _e;return fe.slice(0,5)!=="class"?!1:(_e=fe.charCodeAt(5),_e===123||p.code.isWhiteSpace(_e)||p.code.isLineTerminator(_e))}function se(fe){var _e;return fe.slice(0,8)!=="function"?!1:(_e=fe.charCodeAt(8),_e===40||p.code.isWhiteSpace(_e)||_e===42||p.code.isLineTerminator(_e))}function ae(fe){var _e,Te,Ke;if(fe.slice(0,5)!=="async"||!p.code.isWhiteSpace(fe.charCodeAt(5)))return!1;for(Te=6,Ke=fe.length;Te<Ke&&p.code.isWhiteSpace(fe.charCodeAt(Te));++Te);return Te===Ke||fe.slice(Te,Te+8)!=="function"?!1:(_e=fe.charCodeAt(Te+8),_e===40||p.code.isWhiteSpace(_e)||_e===42||p.code.isLineTerminator(_e))}return R=[this.generateExpression(A.expression,o.Sequence,ue)],L=ke(R).toString(),L.charCodeAt(0)===123||Z(L)||se(L)||ae(L)||ee&&N&Me&&A.expression.type===t.Literal&&typeof A.expression.value=="string"?R=["(",R,")"+this.semicolon(N)]:R.push(this.semicolon(N)),R},ImportDeclaration:function(A,N){var R,L,Z=this;return A.specifiers.length===0?["import",k,this.generateExpression(A.source,o.Sequence,ue),this.semicolon(N)]:(R=["import"],L=0,A.specifiers[L].type===t.ImportDefaultSpecifier&&(R=Pe(R,[this.generateExpression(A.specifiers[L],o.Sequence,ue)]),++L),A.specifiers[L]&&(L!==0&&R.push(","),A.specifiers[L].type===t.ImportNamespaceSpecifier?R=Pe(R,[k,this.generateExpression(A.specifiers[L],o.Sequence,ue)]):(R.push(k+"{"),A.specifiers.length-L===1?(R.push(k),R.push(this.generateExpression(A.specifiers[L],o.Sequence,ue)),R.push(k+"}"+k)):(Ne(function(se){var ae,fe;for(R.push($),ae=L,fe=A.specifiers.length;ae<fe;++ae)R.push(se),R.push(Z.generateExpression(A.specifiers[ae],o.Sequence,ue)),ae+1<fe&&R.push(","+$)}),je(ke(R).toString())||R.push($),R.push(f+"}"+k)))),R=Pe(R,["from"+k,this.generateExpression(A.source,o.Sequence,ue),this.semicolon(N)]),R)},VariableDeclarator:function(A,N){var R=N&le?ue:Xe;return A.init?[this.generateExpression(A.id,o.Assignment,R),k,"=",k,this.generateExpression(A.init,o.Assignment,R)]:this.generatePattern(A.id,o.Assignment,R)},VariableDeclaration:function(A,N){var R,L,Z,se,ae,fe=this;R=[A.kind],ae=N&le?$e:we;function _e(){for(se=A.declarations[0],j.comment&&se.leadingComments?(R.push(`
`),R.push(He(fe.generateStatement(se,ae)))):(R.push(Ye()),R.push(fe.generateStatement(se,ae))),L=1,Z=A.declarations.length;L<Z;++L)se=A.declarations[L],j.comment&&se.leadingComments?(R.push(","+$),R.push(He(fe.generateStatement(se,ae)))):(R.push(","+k),R.push(fe.generateStatement(se,ae)))}return A.declarations.length>1?Ne(_e):_e(),R.push(this.semicolon(N)),R},ThrowStatement:function(A,N){return[Pe("throw",this.generateExpression(A.argument,o.Sequence,ue)),this.semicolon(N)]},TryStatement:function(A,N){var R,L,Z,se;if(R=["try",this.maybeBlock(A.block,$e)],R=this.maybeBlockSuffix(A.block,R),A.handlers)for(L=0,Z=A.handlers.length;L<Z;++L)R=Pe(R,this.generateStatement(A.handlers[L],$e)),(A.finalizer||L+1!==Z)&&(R=this.maybeBlockSuffix(A.handlers[L].body,R));else{for(se=A.guardedHandlers||[],L=0,Z=se.length;L<Z;++L)R=Pe(R,this.generateStatement(se[L],$e)),(A.finalizer||L+1!==Z)&&(R=this.maybeBlockSuffix(se[L].body,R));if(A.handler)if(Array.isArray(A.handler))for(L=0,Z=A.handler.length;L<Z;++L)R=Pe(R,this.generateStatement(A.handler[L],$e)),(A.finalizer||L+1!==Z)&&(R=this.maybeBlockSuffix(A.handler[L].body,R));else R=Pe(R,this.generateStatement(A.handler,$e)),A.finalizer&&(R=this.maybeBlockSuffix(A.handler.body,R))}return A.finalizer&&(R=Pe(R,["finally",this.maybeBlock(A.finalizer,$e)])),R},SwitchStatement:function(A,N){var R,L,Z,se,ae,fe=this;if(Ne(function(){R=["switch"+k+"(",fe.generateExpression(A.discriminant,o.Sequence,ue),")"+k+"{"+$]}),A.cases)for(ae=$e,Z=0,se=A.cases.length;Z<se;++Z)Z===se-1&&(ae|=ge),L=He(this.generateStatement(A.cases[Z],ae)),R.push(L),je(ke(L).toString())||R.push($);return R.push(He("}")),R},SwitchCase:function(A,N){var R,L,Z,se,ae,fe=this;return Ne(function(){for(A.test?R=[Pe("case",fe.generateExpression(A.test,o.Sequence,ue)),":"]:R=["default:"],Z=0,se=A.consequent.length,se&&A.consequent[0].type===t.BlockStatement&&(L=fe.maybeBlock(A.consequent[0],$e),R.push(L),Z=1),Z!==se&&!je(ke(R).toString())&&R.push($),ae=$e;Z<se;++Z)Z===se-1&&N&ge&&(ae|=ge),L=He(fe.generateStatement(A.consequent[Z],ae)),R.push(L),Z+1!==se&&!je(ke(L).toString())&&R.push($)}),R},IfStatement:function(A,N){var R,L,Z,se=this;return Ne(function(){R=["if"+k+"(",se.generateExpression(A.test,o.Sequence,ue),")"]}),Z=N&ge,L=$e,Z&&(L|=ge),A.alternate?(R.push(this.maybeBlock(A.consequent,$e)),R=this.maybeBlockSuffix(A.consequent,R),A.alternate.type===t.IfStatement?R=Pe(R,["else ",this.generateStatement(A.alternate,L)]):R=Pe(R,Pe("else",this.maybeBlock(A.alternate,L)))):R.push(this.maybeBlock(A.consequent,L)),R},ForStatement:function(A,N){var R,L=this;return Ne(function(){R=["for"+k+"("],A.init?A.init.type===t.VariableDeclaration?R.push(L.generateStatement(A.init,we)):(R.push(L.generateExpression(A.init,o.Sequence,Xe)),R.push(";")):R.push(";"),A.test&&(R.push(k),R.push(L.generateExpression(A.test,o.Sequence,ue))),R.push(";"),A.update&&(R.push(k),R.push(L.generateExpression(A.update,o.Sequence,ue))),R.push(")")}),R.push(this.maybeBlock(A.body,N&ge?Ze:$e)),R},ForInStatement:function(A,N){return this.generateIterationForStatement("in",A,N&ge?Ze:$e)},ForOfStatement:function(A,N){return this.generateIterationForStatement("of",A,N&ge?Ze:$e)},LabeledStatement:function(A,N){return[A.label.name+":",this.maybeBlock(A.body,N&ge?Ze:$e)]},Program:function(A,N){var R,L,Z,se,ae;for(se=A.body.length,R=[U&&se>0?`
`:""],ae=Ie,Z=0;Z<se;++Z)!U&&Z===se-1&&(ae|=ge),re&&(Z===0&&(A.body[0].leadingComments||st(A.range[0],A.body[Z].range[0],R)),Z>0&&!A.body[Z-1].trailingComments&&!A.body[Z].leadingComments&&st(A.body[Z-1].range[1],A.body[Z].range[0],R)),L=He(this.generateStatement(A.body[Z],ae)),R.push(L),Z+1<se&&!je(ke(L).toString())&&(re&&A.body[Z+1].leadingComments||R.push($)),re&&Z===se-1&&(A.body[Z].trailingComments||st(A.body[Z].range[1],A.range[1],R));return R},FunctionDeclaration:function(A,N){return[Ve(A,!0),"function",ze(A)||Ye(),A.id?Ge(A.id):"",this.generateFunctionBody(A)]},ReturnStatement:function(A,N){return A.argument?[Pe("return",this.generateExpression(A.argument,o.Sequence,ue)),this.semicolon(N)]:["return"+this.semicolon(N)]},WhileStatement:function(A,N){var R,L=this;return Ne(function(){R=["while"+k+"(",L.generateExpression(A.test,o.Sequence,ue),")"]}),R.push(this.maybeBlock(A.body,N&ge?Ze:$e)),R},WithStatement:function(A,N){var R,L=this;return Ne(function(){R=["with"+k+"(",L.generateExpression(A.object,o.Sequence,ue),")"]}),R.push(this.maybeBlock(A.body,N&ge?Ze:$e)),R}},ut(Se.prototype,Se.Statement),Se.Expression={SequenceExpression:function(A,N,R){var L,Z,se;for(o.Sequence<N&&(R|=le),L=[],Z=0,se=A.expressions.length;Z<se;++Z)L.push(this.generateExpression(A.expressions[Z],o.Assignment,R)),Z+1<se&&L.push(","+k);return Ee(L,o.Sequence,N)},AssignmentExpression:function(A,N,R){return this.generateAssignment(A.left,A.right,A.operator,N,R)},ArrowFunctionExpression:function(A,N,R){return Ee(this.generateFunctionBody(A),o.ArrowFunction,N)},ConditionalExpression:function(A,N,R){return o.Conditional<N&&(R|=le),Ee([this.generateExpression(A.test,o.Coalesce,R),k+"?"+k,this.generateExpression(A.consequent,o.Assignment,R),k+":"+k,this.generateExpression(A.alternate,o.Assignment,R)],o.Conditional,N)},LogicalExpression:function(A,N,R){return A.operator==="??"&&(R|=Le),this.BinaryExpression(A,N,R)},BinaryExpression:function(A,N,R){var L,Z,se,ae,fe,_e;return ae=a[A.operator],Z=A.operator==="**"?o.Postfix:ae,se=A.operator==="**"?ae:ae+1,ae<N&&(R|=le),fe=this.generateExpression(A.left,Z,R),_e=fe.toString(),_e.charCodeAt(_e.length-1)===47&&p.code.isIdentifierPartES5(A.operator.charCodeAt(0))?L=[fe,Ye(),A.operator]:L=Pe(fe,A.operator),fe=this.generateExpression(A.right,se,R),A.operator==="/"&&fe.toString().charAt(0)==="/"||A.operator.slice(-1)==="<"&&fe.toString().slice(0,3)==="!--"?(L.push(Ye()),L.push(fe)):L=Pe(L,fe),A.operator==="in"&&!(R&le)?["(",L,")"]:(A.operator==="||"||A.operator==="&&")&&R&Le?["(",L,")"]:Ee(L,ae,N)},CallExpression:function(A,N,R){var L,Z,se;for(L=[this.generateExpression(A.callee,o.Call,We)],A.optional&&L.push("?."),L.push("("),Z=0,se=A.arguments.length;Z<se;++Z)L.push(this.generateExpression(A.arguments[Z],o.Assignment,ue)),Z+1<se&&L.push(","+k);return L.push(")"),R&he?Ee(L,o.Call,N):["(",L,")"]},ChainExpression:function(A,N,R){o.OptionalChaining<N&&(R|=he);var L=this.generateExpression(A.expression,o.OptionalChaining,R);return Ee(L,o.OptionalChaining,N)},NewExpression:function(A,N,R){var L,Z,se,ae,fe;if(Z=A.arguments.length,fe=R&Ae&&!B&&Z===0?Re:De,L=Pe("new",this.generateExpression(A.callee,o.New,fe)),!(R&Ae)||B||Z>0){for(L.push("("),se=0,ae=Z;se<ae;++se)L.push(this.generateExpression(A.arguments[se],o.Assignment,ue)),se+1<ae&&L.push(","+k);L.push(")")}return Ee(L,o.New,N)},MemberExpression:function(A,N,R){var L,Z;return L=[this.generateExpression(A.object,o.Call,R&he?We:De)],A.computed?(A.optional&&L.push("?."),L.push("["),L.push(this.generateExpression(A.property,o.Sequence,R&he?ue:Re)),L.push("]")):(!A.optional&&A.object.type===t.Literal&&typeof A.object.value=="number"&&(Z=ke(L).toString(),Z.indexOf(".")<0&&!/[eExX]/.test(Z)&&p.code.isDecimalDigit(Z.charCodeAt(Z.length-1))&&!(Z.length>=2&&Z.charCodeAt(0)===48)&&L.push(" ")),L.push(A.optional?"?.":"."),L.push(Ge(A.property))),Ee(L,o.Member,N)},MetaProperty:function(A,N,R){var L;return L=[],L.push(typeof A.meta=="string"?A.meta:Ge(A.meta)),L.push("."),L.push(typeof A.property=="string"?A.property:Ge(A.property)),Ee(L,o.Member,N)},UnaryExpression:function(A,N,R){var L,Z,se,ae,fe;return Z=this.generateExpression(A.argument,o.Unary,ue),k===""?L=Pe(A.operator,Z):(L=[A.operator],A.operator.length>2?L=Pe(L,Z):(ae=ke(L).toString(),fe=ae.charCodeAt(ae.length-1),se=Z.toString().charCodeAt(0),((fe===43||fe===45)&&fe===se||p.code.isIdentifierPartES5(fe)&&p.code.isIdentifierPartES5(se))&&L.push(Ye()),L.push(Z))),Ee(L,o.Unary,N)},YieldExpression:function(A,N,R){var L;return A.delegate?L="yield*":L="yield",A.argument&&(L=Pe(L,this.generateExpression(A.argument,o.Yield,ue))),Ee(L,o.Yield,N)},AwaitExpression:function(A,N,R){var L=Pe(A.all?"await*":"await",this.generateExpression(A.argument,o.Await,ue));return Ee(L,o.Await,N)},UpdateExpression:function(A,N,R){return A.prefix?Ee([A.operator,this.generateExpression(A.argument,o.Unary,ue)],o.Unary,N):Ee([this.generateExpression(A.argument,o.Postfix,ue),A.operator],o.Postfix,N)},FunctionExpression:function(A,N,R){var L=[Ve(A,!0),"function"];return A.id?(L.push(ze(A)||Ye()),L.push(Ge(A.id))):L.push(ze(A)||k),L.push(this.generateFunctionBody(A)),L},ArrayPattern:function(A,N,R){return this.ArrayExpression(A,N,R,!0)},ArrayExpression:function(A,N,R,L){var Z,se,ae=this;return A.elements.length?(se=L?!1:A.elements.length>1,Z=["[",se?$:""],Ne(function(fe){var _e,Te;for(_e=0,Te=A.elements.length;_e<Te;++_e)A.elements[_e]?(Z.push(se?fe:""),Z.push(ae.generateExpression(A.elements[_e],o.Assignment,ue))):(se&&Z.push(fe),_e+1===Te&&Z.push(",")),_e+1<Te&&Z.push(","+(se?$:k))}),se&&!je(ke(Z).toString())&&Z.push($),Z.push(se?f:""),Z.push("]"),Z):"[]"},RestElement:function(A,N,R){return"..."+this.generatePattern(A.argument)},ClassExpression:function(A,N,R){var L,Z;return L=["class"],A.id&&(L=Pe(L,this.generateExpression(A.id,o.Sequence,ue))),A.superClass&&(Z=Pe("extends",this.generateExpression(A.superClass,o.Unary,ue)),L=Pe(L,Z)),L.push(k),L.push(this.generateStatement(A.body,Ze)),L},MethodDefinition:function(A,N,R){var L,Z;return A.static?L=["static"+k]:L=[],A.kind==="get"||A.kind==="set"?Z=[Pe(A.kind,this.generatePropertyKey(A.key,A.computed)),this.generateFunctionBody(A.value)]:Z=[et(A),this.generatePropertyKey(A.key,A.computed),this.generateFunctionBody(A.value)],Pe(L,Z)},Property:function(A,N,R){return A.kind==="get"||A.kind==="set"?[A.kind,Ye(),this.generatePropertyKey(A.key,A.computed),this.generateFunctionBody(A.value)]:A.shorthand?A.value.type==="AssignmentPattern"?this.AssignmentPattern(A.value,o.Sequence,ue):this.generatePropertyKey(A.key,A.computed):A.method?[et(A),this.generatePropertyKey(A.key,A.computed),this.generateFunctionBody(A.value)]:[this.generatePropertyKey(A.key,A.computed),":"+k,this.generateExpression(A.value,o.Assignment,ue)]},ObjectExpression:function(A,N,R){var L,Z,se,ae=this;return A.properties.length?(L=A.properties.length>1,Ne(function(){se=ae.generateExpression(A.properties[0],o.Sequence,ue)}),!L&&!mt(ke(se).toString())?["{",k,se,k,"}"]:(Ne(function(fe){var _e,Te;if(Z=["{",$,fe,se],L)for(Z.push(","+$),_e=1,Te=A.properties.length;_e<Te;++_e)Z.push(fe),Z.push(ae.generateExpression(A.properties[_e],o.Sequence,ue)),_e+1<Te&&Z.push(","+$)}),je(ke(Z).toString())||Z.push($),Z.push(f),Z.push("}"),Z)):"{}"},AssignmentPattern:function(A,N,R){return this.generateAssignment(A.left,A.right,"=",N,R)},ObjectPattern:function(A,N,R){var L,Z,se,ae,fe,_e=this;if(!A.properties.length)return"{}";if(ae=!1,A.properties.length===1)fe=A.properties[0],fe.type===t.Property&&fe.value.type!==t.Identifier&&(ae=!0);else for(Z=0,se=A.properties.length;Z<se;++Z)if(fe=A.properties[Z],fe.type===t.Property&&!fe.shorthand){ae=!0;break}return L=["{",ae?$:""],Ne(function(Te){var Ke,Pt;for(Ke=0,Pt=A.properties.length;Ke<Pt;++Ke)L.push(ae?Te:""),L.push(_e.generateExpression(A.properties[Ke],o.Sequence,ue)),Ke+1<Pt&&L.push(","+(ae?$:k))}),ae&&!je(ke(L).toString())&&L.push($),L.push(ae?f:""),L.push("}"),L},ThisExpression:function(A,N,R){return"this"},Super:function(A,N,R){return"super"},Identifier:function(A,N,R){return Ge(A)},ImportDefaultSpecifier:function(A,N,R){return Ge(A.id||A.local)},ImportNamespaceSpecifier:function(A,N,R){var L=["*"],Z=A.id||A.local;return Z&&L.push(k+"as"+Ye()+Ge(Z)),L},ImportSpecifier:function(A,N,R){var L=A.imported,Z=[L.name],se=A.local;return se&&se.name!==L.name&&Z.push(Ye()+"as"+Ye()+Ge(se)),Z},ExportSpecifier:function(A,N,R){var L=A.local,Z=[L.name],se=A.exported;return se&&se.name!==L.name&&Z.push(Ye()+"as"+Ye()+Ge(se)),Z},Literal:function(A,N,R){var L;if(A.hasOwnProperty("raw")&&O&&j.raw)try{if(L=O(A.raw).body[0].expression,L.type===t.Literal&&L.value===A.value)return A.raw}catch{}return A.regex?"/"+A.regex.pattern+"/"+A.regex.flags:typeof A.value=="bigint"?A.value.toString()+"n":A.bigint?A.bigint+"n":A.value===null?"null":typeof A.value=="string"?it(A.value):typeof A.value=="number"?pt(A.value):typeof A.value=="boolean"?A.value?"true":"false":yt(A.value)},GeneratorExpression:function(A,N,R){return this.ComprehensionExpression(A,N,R)},ComprehensionExpression:function(A,N,R){var L,Z,se,ae,fe=this;return L=A.type===t.GeneratorExpression?["("]:["["],j.moz.comprehensionExpressionStartsWithAssignment&&(ae=this.generateExpression(A.body,o.Assignment,ue),L.push(ae)),A.blocks&&Ne(function(){for(Z=0,se=A.blocks.length;Z<se;++Z)ae=fe.generateExpression(A.blocks[Z],o.Sequence,ue),Z>0||j.moz.comprehensionExpressionStartsWithAssignment?L=Pe(L,ae):L.push(ae)}),A.filter&&(L=Pe(L,"if"+k),ae=this.generateExpression(A.filter,o.Sequence,ue),L=Pe(L,["(",ae,")"])),j.moz.comprehensionExpressionStartsWithAssignment||(ae=this.generateExpression(A.body,o.Assignment,ue),L=Pe(L,ae)),L.push(A.type===t.GeneratorExpression?")":"]"),L},ComprehensionBlock:function(A,N,R){var L;return A.left.type===t.VariableDeclaration?L=[A.left.kind,Ye(),this.generateStatement(A.left.declarations[0],we)]:L=this.generateExpression(A.left,o.Call,ue),L=Pe(L,A.of?"of":"in"),L=Pe(L,this.generateExpression(A.right,o.Sequence,ue)),["for"+k+"(",L,")"]},SpreadElement:function(A,N,R){return["...",this.generateExpression(A.argument,o.Assignment,ue)]},TaggedTemplateExpression:function(A,N,R){var L=We;R&he||(L=De);var Z=[this.generateExpression(A.tag,o.Call,L),this.generateExpression(A.quasi,o.Primary,Qe)];return Ee(Z,o.TaggedTemplate,N)},TemplateElement:function(A,N,R){return A.value.raw},TemplateLiteral:function(A,N,R){var L,Z,se;for(L=["`"],Z=0,se=A.quasis.length;Z<se;++Z)L.push(this.generateExpression(A.quasis[Z],o.Primary,ue)),Z+1<se&&(L.push("${"+k),L.push(this.generateExpression(A.expressions[Z],o.Sequence,ue)),L.push(k+"}"));return L.push("`"),L},ModuleSpecifier:function(A,N,R){return this.Literal(A,N,R)},ImportExpression:function(A,N,R){return Ee(["import(",this.generateExpression(A.source,o.Assignment,ue),")"],o.Call,N)}},ut(Se.prototype,Se.Expression),Se.prototype.generateExpression=function(A,N,R){var L,Z;return Z=A.type||t.Property,j.verbatim&&A.hasOwnProperty(j.verbatim)?Ct(A,N):(L=this[Z](A,N,R),j.comment&&(L=Je(A,L)),ke(L,A))},Se.prototype.generateStatement=function(A,N){var R,L;return R=this[A.type](A,N),j.comment&&(R=Je(A,R)),L=ke(R).toString(),A.type===t.Program&&!U&&$===""&&L.charAt(L.length-1)===`
`&&(R=q?ke(R).replaceRight(/\s+$/,""):L.replace(/\s+$/,"")),ke(R,A)};function vt(A){var N;if(N=new Se,pe(A))return N.generateStatement(A,$e);if(me(A))return N.generateExpression(A,o.Sequence,ue);throw new Error("Unknown node type: "+A.type)}function ot(A,N){var R=tt(),L,Z;return N!=null?(typeof N.indent=="string"&&(R.format.indent.style=N.indent),typeof N.base=="number"&&(R.format.indent.base=N.base),N=ct(R,N),d=N.format.indent.style,typeof N.base=="string"?f=N.base:f=Oe(d,N.format.indent.base)):(N=R,d=N.format.indent.style,f=Oe(d,N.format.indent.base)),g=N.format.json,b=N.format.renumber,S=g?!1:N.format.hexadecimal,E=g?"double":N.format.quotes,F=N.format.escapeless,$=N.format.newline,k=N.format.space,N.format.compact&&($=k=d=f=""),B=N.format.parentheses,V=N.format.semicolons,U=N.format.safeConcatenation,ee=N.directive,O=g?null:N.parse,q=N.sourceMap,te=N.sourceCode,re=N.format.preserveBlankLines&&te!==null,j=N,q&&(e.browser?u=commonjsGlobal.sourceMap.SourceNode:u=requireSourceMap().SourceNode),L=vt(A),q?(Z=L.toStringWithSourceMap({file:N.file,sourceRoot:N.sourceMapRoot}),N.sourceContent&&Z.map.setSourceContent(N.sourceMap,N.sourceContent),N.sourceMapWithCode?Z:Z.map.toString()):(Z={code:L.toString(),map:null},N.sourceMapWithCode?Z:Z.code)}de={indent:{style:"",base:0},renumber:!0,hexadecimal:!0,quotes:"auto",escapeless:!0,compact:!0,parentheses:!1,semicolons:!1},ie=tt().format,e.version=require$$3.version,e.generate=ot,e.attachComments=l.attachComments,e.Precedence=ct({},o),e.browser=!1,e.FORMAT_MINIFY=de,e.FORMAT_DEFAULTS=ie})()})(escodegen$1)),escodegen$1}var escodegenExports=requireEscodegen();const escodegen=getDefaultExportFromCjs(escodegenExports);class WalkerBase{constructor(){this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.context={skip:()=>this.should_skip=!0,remove:()=>this.should_remove=!0,replace:t=>this.replacement=t}}replace(t,o,a,u){t&&o&&(a!=null?t[o][a]=u:t[o]=u)}remove(t,o,a){t&&o&&(a!=null?t[o].splice(a,1):delete t[o])}}class SyncWalker extends WalkerBase{constructor(t,o){super(),this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.context={skip:()=>this.should_skip=!0,remove:()=>this.should_remove=!0,replace:a=>this.replacement=a},this.enter=t,this.leave=o}visit(t,o,a,u){if(t){if(this.enter){const p=this.should_skip,f=this.should_remove,d=this.replacement;this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.enter.call(this.context,t,o,a,u),this.replacement&&(t=this.replacement,this.replace(o,a,u,t)),this.should_remove&&this.remove(o,a,u);const g=this.should_skip,b=this.should_remove;if(this.should_skip=p,this.should_remove=f,this.replacement=d,g)return t;if(b)return null}let l;for(l in t){const p=t[l];if(p&&typeof p=="object")if(Array.isArray(p)){const f=p;for(let d=0;d<f.length;d+=1){const g=f[d];isNode(g)&&(this.visit(g,t,l,d)||d--)}}else isNode(p)&&this.visit(p,t,l,null)}if(this.leave){const p=this.replacement,f=this.should_remove;this.replacement=null,this.should_remove=!1,this.leave.call(this.context,t,o,a,u),this.replacement&&(t=this.replacement,this.replace(o,a,u,t)),this.should_remove&&this.remove(o,a,u);const d=this.should_remove;if(this.replacement=p,this.should_remove=f,d)return null}}return t}}function isNode(e){return e!==null&&typeof e=="object"&&"type"in e&&typeof e.type=="string"}function walk(e,{enter:t,leave:o}){return new SyncWalker(t,o).visit(e,null)}let widgetMethods=[],languages=new Map;function transpiler(e,t={}){const{wrapAsync:o=!1,addReturn:a=!0,emitMiniLocations:u=!0,emitWidgets:l=!0}=t;let p=parse$a(e,{ecmaVersion:2022,allowAwaitOutsideFunction:!0,locations:!0}),f=[];const d=(E,F)=>{const $=languages.get("minilang");if($){const k=`[${E}]`,B=$.getLocations(k,F.start);f=f.concat(B)}else{const k=getLeafLocations(`"${E}"`,F.start,e);f=f.concat(k)}};let g=[];walk(p,{enter(E,F){if(isLanguageLiteral(E)){const{name:$}=E.tag,k=languages.get($),B=E.quasi.quasis[0].value.raw,V=E.quasi.start+1;if(u){const U=k.getLocations(B,V);f=f.concat(U)}return this.skip(),this.replace(languageWithLocation($,B,V))}if(isTemplateLiteral(E,"tidal")){const $=E.quasi.quasis[0].value.raw,k=E.quasi.start+1;if(u){const B=collectHaskellMiniLocations($,k);f=f.concat(B)}return this.skip(),this.replace(tidalWithLocation($,k))}if(isBackTickString(E,F)){const{quasis:$}=E,{raw:k}=$[0].value;return this.skip(),u&&d(k,E),this.replace(miniWithLocation(k,E))}if(isStringWithDoubleQuotes(E)){const{value:$}=E;return this.skip(),u&&d($,E),this.replace(miniWithLocation($,E))}if(isSliderFunction(E))return l&&g.push({from:E.arguments[0].start,to:E.arguments[0].end,value:E.arguments[0].raw,min:E.arguments[1]?.value??0,max:E.arguments[2]?.value??1,step:E.arguments[3]?.value,type:"slider"}),this.replace(sliderWithLocation(E));if(isWidgetMethod(E)){const $=E.callee.property.name,k=g.filter(V=>V.type===$).length,B={to:E.end,index:k,type:$,id:t.id};return l&&g.push(B),this.replace(widgetWithLocation(E,B))}if(isBareSamplesCall(E,F))return this.replace(withAwait(E));if(isLabelStatement(E))return this.replace(labelToP(E))},leave(E,F,$,k){}});let{body:b}=p;if(!b.length)console.warn("empty body -> fallback to silence"),b.push({type:"ExpressionStatement",expression:{type:"Identifier",name:"silence"}});else if(!b?.[b.length-1]?.expression)throw new Error("unexpected ast format without body expression");if(a){const{expression:E}=b[b.length-1];b[b.length-1]={type:"ReturnStatement",argument:E}}let S=escodegen.generate(p);return o&&(S=`(async ()=>{${S}})()`),u?{output:S,miniLocations:f,widgets:g}:{output:S}}function isStringWithDoubleQuotes(e,t,o){return e.type!=="Literal"?!1:e.raw[0]==='"'}function isBackTickString(e,t){return e.type==="TemplateLiteral"&&t.type!=="TaggedTemplateExpression"}function miniWithLocation(e,t){const{start:o}=t,a=languages.get("minilang");let u="m";return a&&a.name&&(u=a.name),{type:"CallExpression",callee:{type:"Identifier",name:u},arguments:[{type:"Literal",value:e},{type:"Literal",value:o}],optional:!1}}function isSliderFunction(e){return e.type==="CallExpression"&&e.callee.name==="slider"}function isWidgetMethod(e){return e.type==="CallExpression"&&widgetMethods.includes(e.callee.property?.name)}function sliderWithLocation(e){const t="slider_"+e.arguments[0].start;return e.arguments.unshift({type:"Literal",value:t,raw:t}),e.callee.name="sliderWithID",e}function getWidgetID(e){return`${e.id||""}_widget_${e.type}_${e.index}`}function widgetWithLocation(e,t){const o=getWidgetID(t);return e.arguments.unshift({type:"Literal",value:o,raw:o}),e}function isBareSamplesCall(e,t){return e.type==="CallExpression"&&e.callee.name==="samples"&&t.type!=="AwaitExpression"}function withAwait(e){return{type:"AwaitExpression",argument:e}}function isLabelStatement(e){return e.type==="LabeledStatement"}function labelToP(e){return{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"MemberExpression",object:e.body.expression,property:{type:"Identifier",name:"p"}},arguments:[{type:"Literal",value:e.label.name,raw:`'${e.label.name}'`}]}}}function isLanguageLiteral(e){return e.type==="TaggedTemplateExpression"&&languages.has(e.tag.name)}function isTemplateLiteral(e,t){return e.type==="TaggedTemplateExpression"&&e.tag.name===t}function collectHaskellMiniLocations(e,t){return e.split("").reduce((o,a,u)=>(a!=='"'||(!o.length||o[o.length-1].length>1?o.push([u+1]):o[o.length-1].push(u)),o),[]).map(([o,a])=>{const u=e.slice(o,a);return getLeafLocations(`"${u}"`,t+o-1)}).flat()}function tidalWithLocation(e,t){return{type:"CallExpression",callee:{type:"Identifier",name:"tidal"},arguments:[{type:"Literal",value:e},{type:"Literal",value:t}],optional:!1}}function languageWithLocation(e,t,o){return{type:"CallExpression",callee:{type:"Identifier",name:e},arguments:[{type:"Literal",value:t},{type:"Literal",value:o}],optional:!1}}const gm={gm_piano:["0000_JCLive_sf2_file","0000_FluidR3_GM_sf2_file","0000_Aspirin_sf2_file","0000_Chaos_sf2_file","0000_GeneralUserGS_sf2_file","0001_FluidR3_GM_sf2_file","0001_GeneralUserGS_sf2_file","0010_Aspirin_sf2_file","0010_Chaos_sf2_file","0010_FluidR3_GM_sf2_file","0010_GeneralUserGS_sf2_file","0010_JCLive_sf2_file","0011_Aspirin_sf2_file","0011_FluidR3_GM_sf2_file","0011_GeneralUserGS_sf2_file","0012_GeneralUserGS_sf2_file","0020_Aspirin_sf2_file","0020_Chaos_sf2_file","0020_FluidR3_GM_sf2_file","0020_GeneralUserGS_sf2_file","0020_JCLive_sf2_file","0021_Aspirin_sf2_file","0021_GeneralUserGS_sf2_file","0022_Aspirin_sf2_file","0030_Aspirin_sf2_file","0030_Chaos_sf2_file","0030_FluidR3_GM_sf2_file","0030_GeneralUserGS_sf2_file","0030_JCLive_sf2_file","0031_Aspirin_sf2_file","0031_FluidR3_GM_sf2_file","0031_GeneralUserGS_sf2_file"],gm_epiano1:["0040_JCLive_sf2_file","0040_FluidR3_GM_sf2_file","0040_Aspirin_sf2_file","0040_Chaos_sf2_file","0040_GeneralUserGS_sf2_file","0041_FluidR3_GM_sf2_file","0041_GeneralUserGS_sf2_file","0042_GeneralUserGS_sf2_file","0043_GeneralUserGS_sf2_file","0044_GeneralUserGS_sf2_file","0046_GeneralUserGS_sf2_file"],gm_epiano2:["0050_JCLive_sf2_file","0050_FluidR3_GM_sf2_file","0050_Aspirin_sf2_file","0050_Chaos_sf2_file","0050_GeneralUserGS_sf2_file","0051_FluidR3_GM_sf2_file","0051_GeneralUserGS_sf2_file","0053_GeneralUserGS_sf2_file","0054_GeneralUserGS_sf2_file"],gm_harpsichord:["0060_JCLive_sf2_file","0060_FluidR3_GM_sf2_file","0060_Aspirin_sf2_file","0060_Chaos_sf2_file","0060_GeneralUserGS_sf2_file","0061_Aspirin_sf2_file","0061_GeneralUserGS_sf2_file","0062_GeneralUserGS_sf2_file"],gm_clavinet:["0070_JCLive_sf2_file","0070_FluidR3_GM_sf2_file","0070_Aspirin_sf2_file","0070_Chaos_sf2_file"],gm_celesta:["0080_JCLive_sf2_file","0080_Aspirin_sf2_file","0080_Chaos_sf2_file","0080_FluidR3_GM_sf2_file","0080_GeneralUserGS_sf2_file","0081_FluidR3_GM_sf2_file"],gm_glockenspiel:["0090_JCLive_sf2_file","0090_Aspirin_sf2_file","0090_Chaos_sf2_file","0090_FluidR3_GM_sf2_file","0090_GeneralUserGS_sf2_file"],gm_music_box:["0100_JCLive_sf2_file","0100_Aspirin_sf2_file","0100_Chaos_sf2_file","0100_FluidR3_GM_sf2_file","0100_GeneralUserGS_sf2_file"],gm_vibraphone:["0110_JCLive_sf2_file","0110_Aspirin_sf2_file","0110_Chaos_sf2_file","0110_FluidR3_GM_sf2_file","0110_GeneralUserGS_sf2_file","0111_FluidR3_GM_sf2_file"],gm_marimba:["0120_JCLive_sf2_file","0120_Aspirin_sf2_file","0120_Chaos_sf2_file","0120_FluidR3_GM_sf2_file","0120_GeneralUserGS_sf2_file","0121_FluidR3_GM_sf2_file","0121_GeneralUserGS_sf2_file"],gm_xylophone:["0130_JCLive_sf2_file","0130_Aspirin_sf2_file","0130_Chaos_sf2_file","0130_FluidR3_GM_sf2_file","0130_GeneralUserGS_sf2_file","0131_FluidR3_GM_sf2_file"],gm_tubular_bells:["0140_JCLive_sf2_file","0140_Aspirin_sf2_file","0140_FluidR3_GM_sf2_file","0140_GeneralUserGS_sf2_file","0141_FluidR3_GM_sf2_file","0142_GeneralUserGS_sf2_file"],gm_dulcimer:["0150_Aspirin_sf2_file","0150_Chaos_sf2_file","0150_FluidR3_GM_sf2_file","0150_GeneralUserGS_sf2_file","0151_FluidR3_GM_sf2_file"],gm_drawbar_organ:["0160_JCLive_sf2_file","0160_Aspirin_sf2_file","0160_Chaos_sf2_file","0160_FluidR3_GM_sf2_file","0160_GeneralUserGS_sf2_file","0161_Aspirin_sf2_file","0161_FluidR3_GM_sf2_file"],gm_percussive_organ:["0170_JCLive_sf2_file","0170_Aspirin_sf2_file","0170_Chaos_sf2_file","0170_FluidR3_GM_sf2_file","0171_FluidR3_GM_sf2_file","0172_FluidR3_GM_sf2_file"],gm_rock_organ:["0180_JCLive_sf2_file","0180_Aspirin_sf2_file","0180_Chaos_sf2_file","0180_FluidR3_GM_sf2_file","0180_GeneralUserGS_sf2_file"],gm_church_organ:["0190_JCLive_sf2_file","0190_Aspirin_sf2_file","0190_Chaos_sf2_file","0190_FluidR3_GM_sf2_file","0190_GeneralUserGS_sf2_file"],gm_reed_organ:["0200_JCLive_sf2_file","0200_Aspirin_sf2_file","0200_Chaos_sf2_file","0200_FluidR3_GM_sf2_file","0200_GeneralUserGS_sf2_file","0201_Aspirin_sf2_file","0201_FluidR3_GM_sf2_file","0201_GeneralUserGS_sf2_file"],gm_accordion:["0210_JCLive_sf2_file","0210_FluidR3_GM_sf2_file","0210_GeneralUserGS_sf2_file","0211_Aspirin_sf2_file","0211_FluidR3_GM_sf2_file","0211_GeneralUserGS_sf2_file","0212_GeneralUserGS_sf2_file"],gm_harmonica:["0220_FluidR3_GM_sf2_file","0220_JCLive_sf2_file","0220_Aspirin_sf2_file","0220_Chaos_sf2_file","0220_GeneralUserGS_sf2_file","0221_FluidR3_GM_sf2_file"],gm_bandoneon:["0230_Aspirin_sf2_file","0230_JCLive_sf2_file","0230_Chaos_sf2_file","0230_FluidR3_GM_sf2_file","0230_GeneralUserGS_sf2_file","0231_FluidR3_GM_sf2_file","0231_GeneralUserGS_sf2_file","0231_JCLive_sf2_file","0232_FluidR3_GM_sf2_file","0233_FluidR3_GM_sf2_file"],gm_acoustic_guitar_nylon:["0240_JCLive_sf2_file","0240_Aspirin_sf2_file","0240_Chaos_sf2_file","0240_FluidR3_GM_sf2_file","0240_GeneralUserGS_sf2_file","0240_LK_Godin_Nylon_SF2_file","0241_JCLive_sf2_file","0242_JCLive_sf2_file","0243_JCLive_sf2_file"],gm_acoustic_guitar_steel:["0253_Acoustic_Guitar_sf2_file","0250_Aspirin_sf2_file","0250_Chaos_sf2_file","0250_FluidR3_GM_sf2_file","0250_GeneralUserGS_sf2_file","0250_LK_AcousticSteel_SF2_file","0253_Acoustic_Guitar_sf2_file","0253_GeneralUserGS_sf2_file","0254_Acoustic_Guitar_sf2_file","0254_GeneralUserGS_sf2_file"],gm_electric_guitar_jazz:["0260_JCLive_sf2_file","0260_Aspirin_sf2_file","0260_Chaos_sf2_file","0260_FluidR3_GM_sf2_file","0260_GeneralUserGS_sf2_file","0260_Stratocaster_sf2_file","0261_GeneralUserGS_sf2_file","0261_Stratocaster_sf2_file","0262_Stratocaster_sf2_file"],gm_electric_guitar_clean:["0270_Aspirin_sf2_file","0270_Chaos_sf2_file","0270_FluidR3_GM_sf2_file","0270_GeneralUserGS_sf2_file","0270_SBAWE32_sf2_file","0270_Stratocaster_sf2_file","0271_GeneralUserGS_sf2_file","0271_Stratocaster_sf2_file","0272_Stratocaster_sf2_file"],gm_electric_guitar_muted:["0280_Aspirin_sf2_file","0280_Chaos_sf2_file","0280_GeneralUserGS_sf2_file","0280_JCLive_sf2_file","0280_LesPaul_sf2_file","0280_SBAWE32_sf2_file","0281_Aspirin_sf2_file","0281_FluidR3_GM_sf2_file","0281_GeneralUserGS_sf2_file","0282_FluidR3_GM_sf2_file"],gm_overdriven_guitar:["0290_FluidR3_GM_sf2_file","0290_Aspirin_sf2_file","0290_Chaos_sf2_file","0290_GeneralUserGS_sf2_file","0290_LesPaul_sf2_file","0290_SBAWE32_sf2_file","0291_LesPaul_sf2_file","0291_SBAWE32_sf2_file","0292_Aspirin_sf2_file","0292_LesPaul_sf2_file"],gm_distortion_guitar:["0300_FluidR3_GM_sf2_file","0300_Aspirin_sf2_file","0300_Chaos_sf2_file","0300_GeneralUserGS_sf2_file","0300_LesPaul_sf2_file","0302_Aspirin_sf2_file","0304_Aspirin_sf2_file"],gm_guitar_harmonics:["0310_Aspirin_sf2_file","0310_FluidR3_GM_sf2_file","0310_Chaos_sf2_file"],gm_acoustic_bass:["0320_JCLive_sf2_file","0320_FluidR3_GM_sf2_file","0320_Aspirin_sf2_file","0320_Chaos_sf2_file"],gm_electric_bass_finger:["0330_JCLive_sf2_file","0330_FluidR3_GM_sf2_fible","0330_Aspirin_sf2_file","0330_GeneralUserGS_sf2_file"],gm_electric_bass_pick:["0340_JCLive_sf2_file","0340_FluidR3_GM_sf2_file","0340_Aspirin_sf2_file","0340_GeneralUserGS_sf2_file","0341_Aspirin_sf2_file"],gm_fretless_bass:["0350_Aspirin_sf2_file","0350_JCLive_sf2_file"],gm_slap_bass_1:["0360_Aspirin_sf2_file","0360_JCLive_sf2_file","0360_FluidR3_GM_sf2_file","0360_Chaos_sf2_file"],gm_slap_bass_2:["0370_Aspirin_sf2_file","0370_FluidR3_GM_sf2_file","0370_GeneralUserGS_sf2_fil e","0370_JCLive_sf2_file"],gm_synth_bass_1:["0380_Chaos_sf2_file","0380_FluidR3_GM_sf2_file","0380_JCLive_sf2_file","0381_FluidR3_GM_sf2_file","0381_GeneralUserGS_sf2_file","0382_GeneralUserGS_sf2_file","0383_GeneralUserGS_sf2_file","0384_GeneralUserGS_sf2_file","0387_GeneralUserGS_sf2_file"],gm_synth_bass_2:["0390_Aspirin_sf2_file","0390_FluidR3_GM_sf2_file","0390_GeneralUserGS_sf2_file","0390_JCLive_sf2_file","0391_FluidR3_GM_sf2_file","0392_FluidR3_GM_sf2_file","0393_GeneralUserGS_sf2_file"],gm_violin:["0400_Aspirin_sf2_file","0400_Chaos_sf2_file","0400_JCLive_sf2_file","0400_FluidR3_GM_sf2_file","0400_GeneralUserGS_sf2_file","0401_Aspirin_sf2_file","0401_FluidR3_GM_sf2_file","0401_GeneralUserGS_sf2_file","0402_GeneralUserGS_sf2_file"],gm_viola:["0410_Aspirin_sf2_file","0410_FluidR3_GM_sf2_file","0410_GeneralUserGS_sf2_file","0410_JCLive_sf2_file","0411_FluidR3_GM_sf2_file"],gm_cello:["0420_Aspirin_sf2_file","0420_FluidR3_GM_sf2_file","0420_GeneralUserGS_sf2_file","0420_JCLive_sf2_file","0421_FluidR3_GM_sf2_file","0421_GeneralUserGS_sf2_file"],gm_contrabass:["0430_Aspirin_sf2_file","0430_Chaos_sf2_file","0430_GeneralUserGS_sf2_file"],gm_tremolo_strings:["0440_Aspirin_sf2_file","0440_Chaos_sf2_file","0440_GeneralUserGS_sf2_file","0440_JCLive_sf2_file","0441_GeneralUserGS_sf2_file","0442_GeneralUserGS_sf2_file"],gm_pizzicato_strings:["0450_Aspirin_sf2_file","0450_Chaos_sf2_file","0450_FluidR3_GM_sf2_file","0450_GeneralUserGS_sf2_file","0450_JCLive_sf2_file","0451_FluidR3_GM_sf2_file"],gm_orchestral_harp:["0460_Aspirin_sf2_file","0460_FluidR3_GM_sf2_file","0460_GeneralUserGS_sf2_file","0460_JCLive_sf2_file","0461_FluidR3_GM_sf2_file"],gm_timpani:["0470_Aspirin_sf2_file","0470_Chaos_sf2_file","0470_FluidR3_GM_sf2_file","0470_GeneralUserGS_sf2_file","0471_FluidR3_GM_sf2_file","0471_GeneralUserGS_sf2_file"],gm_string_ensemble_1:["0480_Aspirin_sf2_file","0480_Chaos_sf2_file","0480_FluidR3_GM_sf2_file","0480_GeneralUserGS_sf2_file","0480_JCLive_sf2_file","0481_Aspirin_sf2_file","0481_FluidR3_GM_sf2_file","0481_GeneralUserGS_sf2_file","0482_Aspirin_sf2_file","0482_GeneralUserGS_sf2_file","0483_GeneralUserGS_sf2_file"],gm_string_ensemble_2:["0490_Aspirin_sf2_file","0490_Chaos_sf2_file","0490_FluidR3_GM_sf2_file","0490_GeneralUserGS_sf2_file","0490_JCLive_sf2_file","0491_GeneralUserGS_sf2_file","0492_GeneralUserGS_sf2_file"],gm_synth_strings_1:["0500_Aspirin_sf2_file","0500_GeneralUserGS_sf2_file","0500_JCLive_sf2_file","0501_FluidR3_GM_sf2_file","0502_GeneralUserGS_sf2_file","0503_FluidR3_GM_sf2_file","0505_FluidR3_GM_sf2_file"],gm_synth_strings_2:["0510_Aspirin_sf2_file","0510_Chaos_sf2_file","0510_GeneralUserGS_sf2_file","0511_GeneralUserGS_sf2_file"],gm_choir_aahs:["0520_Aspirin_sf2_file","0520_Chaos_sf2_file","0520_FluidR3_GM_sf2_file","0520_GeneralUserGS_sf2_file","0520_JCLive_sf2_file","0520_Soul_Ahhs_sf2_file","0521_FluidR3_GM_sf2_file","0521_Soul_Ahhs_sf2_file","0522_Soul_Ahhs_sf2_file"],gm_voice_oohs:["0530_Aspirin_sf2_file","0530_Chaos_sf2_file","0530_FluidR3_GM_sf2_file","0530_GeneralUserGS_sf2_file","0531_FluidR3_GM_sf2_file","0531_JCLive_sf2_file"],gm_synth_choir:["0540_Aspirin_sf2_file","0540_Chaos_sf2_file","0540_FluidR3_GM_sf2_file","0540_GeneralUserGS_sf2_file","0541_FluidR3_GM_sf2_file"],gm_orchestra_hit:["0550_Aspirin_sf2_file","0550_Chaos_sf2_file","0550_FluidR3_GM_sf2_file","0550_GeneralUserGS_sf2_file","0551_FluidR3_GM_sf2_file"],gm_trumpet:["0560_FluidR3_GM_sf2_file","0560_JCLive_sf2_file","0560_Aspirin_sf2_file","0560_Chaos_sf2_file"],gm_trombone:["0570_Aspirin_sf2_file","0570_Chaos_sf2_file","0570_FluidR3_GM_sf2_file","0570_GeneralUserGS_sf2_file","0571_GeneralUserGS_sf2_file"],gm_tuba:["0580_FluidR3_GM_sf2_file","0580_Aspirin_sf2_file","0580_Chaos_sf2_file","0580_GeneralUserGS_sf2_file"],gm_muted_trumpet:["0590_JCLive_sf2_file","0590_Aspirin_sf2_file","0590_Chaos_sf2_file","0590_FluidR3_GM_sf2_file","0590_GeneralUserGS_sf2_file"],gm_french_horn:["0600_Aspirin_sf2_file","0600_FluidR3_GM_sf2_file","0600_GeneralUserGS_sf2_file","0600_JCLive_sf2_file","0601_FluidR3_GM_sf2_file"],gm_brass_section:["0610_JCLive_sf2_file","0610_Aspirin_sf2_file","0610_Chaos_sf2_file","0610_FluidR3_GM_sf2_file","0610_GeneralUserGS_sf2_file"],gm_synth_brass_1:["0620_Aspirin_sf2_file","0620_FluidR3_GM_sf2_file","0621_Aspirin_sf2_file","0621_FluidR3_GM_sf2_file"],gm_synth_brass_2:["0630_Aspirin_sf2_file","0630_Chaos_sf2_file","0630_FluidR3_GM_sf2_file","0630_JCLive_sf2_file","0631_FluidR3_GM_sf2_file","0632_FluidR3_GM_sf2_file","0633_FluidR3_GM_sf2_file"],gm_soprano_sax:["0640_JCLive_sf2_file","0640_Aspirin_sf2_file","0640_Chaos_sf2_file","0640_FluidR3_GM_sf2_file","0641_FluidR3_GM_sf2_file"],gm_alto_sax:["0650_JCLive_sf2_file","0650_Chaos_sf2_file","0650_FluidR3_GM_sf2_file","0650_GeneralUserGS_sf2_file","0651_Aspirin_sf2_file","0651_FluidR3_GM_sf2_file"],gm_tenor_sax:["0660_JCLive_sf2_file","0660_Aspirin_sf2_file","0660_Chaos_sf2_file","0660_GeneralUserGS_sf2_file"],gm_baritone_sax:["0670_JCLive_sf2_file","0670_Aspirin_sf2_file","0670_Chaos_sf2_file","0670_FluidR3_GM_sf2_file","0670_GeneralUserGS_sf2_file","0671_FluidR3_GM_sf2_file"],gm_oboe:["0680_JCLive_sf2_file","0680_Chaos_sf2_file","0680_FluidR3_GM_sf2_file","0680_GeneralUserGS_sf2_file","0681_FluidR3_GM_sf2_file"],gm_english_horn:["0690_JCLive_sf2_file","0690_Aspirin_sf2_file","0690_FluidR3_GM_sf2_file","0691_FluidR3_GM_sf2_file"],gm_bassoon:["0700_JCLive_sf2_file","0700_FluidR3_GM_sf2_file","0700_GeneralUserGS_sf2_file","0701_FluidR3_GM_sf2_file"],gm_clarinet:["0710_JCLive_sf2_file","0710_Aspirin_sf2_file","0710_Chaos_sf2_file","0710_FluidR3_GM_sf2_file","0710_GeneralUserGS_sf2_file","0711_FluidR3_GM_sf2_file"],gm_piccolo:["0720_JCLive_sf2_file","0720_Aspirin_sf2_file","0720_FluidR3_GM_sf2_file","0720_GeneralUserGS_sf2_file","0721_FluidR3_GM_sf2_file"],gm_flute:["0730_JCLive_sf2_file","0730_Aspirin_sf2_file","0730_FluidR3_GM_sf2_file","0730_GeneralUserGS_sf2_file","0731_FluidR3_GM_sf2_file"],gm_recorder:["0740_JCLive_sf2_file","0740_Aspirin_sf2_file","0740_Chaos_sf2_file","0740_FluidR3_GM_sf2_file","0740_GeneralUserGS_sf2_file"],gm_pan_flute:["0750_JCLive_sf2_file","0750_FluidR3_GM_sf2_file","0750_Aspirin_sf2_file","0750_Chaos_sf2_file","0750_GeneralUserGS_sf2_file","0751_Aspirin_sf2_file","0751_FluidR3_GM_sf2_file","0751_GeneralUserGS_sf2_file"],gm_blown_bottle:["0760_FluidR3_GM_sf2_file","0760_JCLive_sf2_file","0760_Chaos_sf2_file","0760_GeneralUserGS_sf2_file","0761_FluidR3_GM_sf2_file"],gm_shakuhachi:["0770_JCLive_sf2_file","0771_FluidR3_GM_sf2_file","0770_Aspirin_sf2_file","0770_FluidR3_GM_sf2_file","0770_GeneralUserGS_sf2_file"],gm_whistle:["0780_FluidR3_GM_sf2_file","0780_JCLive_sf2_file","0780_Aspirin_sf2_file","0780_Chaos_sf2_file"],gm_ocarina:["0790_FluidR3_GM_sf2_file","0790_JCLive_sf2_file","0790_Aspirin_sf2_file","0790_GeneralUserGS_sf2_file"],gm_lead_1_square:["0800_Aspirin_sf2_file","0800_Chaos_sf2_file","0800_FluidR3_GM_sf2_file"],gm_lead_2_sawtooth:["0810_JCLive_sf2_file","0810_Aspirin_sf2_file","0810_Chaos_sf2_file","0810_FluidR3_GM_sf2_file","0810_GeneralUserGS_sf2_file","0811_Aspirin_sf2_file","0811_GeneralUserGS_sf2_file"],gm_lead_3_calliope:["0820_JCLive_sf2_file","0820_Aspirin_sf2_file","0820_Chaos_sf2_file","0820_FluidR3_GM_sf2_file","0820_GeneralUserGS_sf2_file","0821_FluidR3_GM_sf2_file","0821_GeneralUserGS_sf2_file"],gm_lead_4_chiff:["0830_JCLive_sf2_file","0830_Aspirin_sf2_file","0830_FluidR3_GM_sf2_file","0830_GeneralUserGS_sf2_file","0831_FluidR3_GM_sf2_file","0831_GeneralUserGS_sf2_file"],gm_lead_5_charang:["0840_JCLive_sf2_file","0840_FluidR3_GM_sf2_file","0840_Aspirin_sf2_file","0840_Chaos_sf2_file","0840_GeneralUserGS_sf2_file","0841_Aspirin_sf2_file","0841_Chaos_sf2_file","0841_FluidR3_GM_sf2_file","0841_GeneralUserGS_sf2_file","0842_FluidR3_GM_sf2_file"],gm_lead_6_voice:["0850_JCLive_sf2_file","0850_Aspirin_sf2_file","0850_FluidR3_GM_sf2_file","0851_FluidR3_GM_sf2_file","0851_GeneralUserGS_sf2_file","0851_JCLive_sf2_file"],gm_lead_7_fifths:["0860_JCLive_sf2_file","0860_Aspirin_sf2_file","0860_Chaos_sf2_file","0860_GeneralUserGS_sf2_file","0861_Aspirin_sf2_file"],gm_lead_8_bass_lead:["0870_JCLive_sf2_file","0870_Aspirin_sf2_file","0870_Chaos_sf2_file","0870_FluidR3_GM_sf2_file","0870_GeneralUserGS_sf2_file"],gm_pad_new_age:["0880_JCLive_sf2_file","0880_Aspirin_sf2_file","0880_Chaos_sf2_file","0880_FluidR3_GM_sf2_file","0880_GeneralUserGS_sf2_file","0881_Aspirin_sf2_file","0881_FluidR3_GM_sf2_file","0881_GeneralUserGS_sf2_file","0882_Aspirin_sf2_file","0882_GeneralUserGS_sf2_file","0885_GeneralUserGS_sf2_file","0887_GeneralUserGS_sf2_file"],gm_pad_warm:["0890_JCLive_sf2_file","0890_Aspirin_sf2_file","0890_Chaos_sf2_file","0890_FluidR3_GM_sf2_file","0890_GeneralUserGS_sf2_file","0891_Aspirin_sf2_file","0891_FluidR3_GM_sf2_file"],gm_pad_poly:["0900_JCLive_sf2_file","0900_Chaos_sf2_file","0900_FluidR3_GM_sf2_file","0900_GeneralUserGS_sf2_file","0901_Aspirin_sf2_file","0901_FluidR3_GM_sf2_file","0901_GeneralUserGS_sf2_file"],gm_pad_choir:["0910_FluidR3_GM_sf2_file","0910_JCLive_sf2_file","0910_Aspirin_sf2_file","0910_GeneralUserGS_sf2_file","0911_GeneralUserGS_sf2_file","0911_JCLive_sf2_file"],gm_pad_bowed:["0920_JCLive_sf2_file","0920_Aspirin_sf2_file","0920_GeneralUserGS_sf2_file","0921_Aspirin_sf2_file","0921_GeneralUserGS_sf2_file"],gm_pad_metallic:["0930_Aspirin_sf2_file","0930_Chaos_sf2_file","0930_FluidR3_GM_sf2_file","0930_GeneralUserGS_sf2_file","0931_Aspirin_sf2_file","0931_FluidR3_GM_sf2_file","0931_GeneralUserGS_sf2_file"],gm_pad_halo:["0940_Chaos_sf2_file","0940_FluidR3_GM_sf2_file","0940_GeneralUserGS_sf2_file","0940_JCLive_sf2_file","0941_Aspirin_sf2_file","0941_FluidR3_GM_sf2_file","0941_GeneralUserGS_sf2_file","0941_JCLive_sf2_file"],gm_pad_sweep:["0950_Aspirin_sf2_file","0950_Chaos_sf2_file","0950_FluidR3_GM_sf2_file","0950_GeneralUserGS_sf2_file","0950_JCLive_sf2_file","0951_FluidR3_GM_sf2_file","0951_GeneralUserGS_sf2_file"],gm_fx_rain:["0960_FluidR3_GM_sf2_file","0960_Chaos_sf2_file","0960_GeneralUserGS_sf2_file","0961_Aspirin_sf2_file","0961_FluidR3_GM_sf2_file","0962_GeneralUserGS_sf2_file"],gm_fx_soundtrack:["0970_FluidR3_GM_sf2_file","0970_Aspirin_sf2_file","0970_GeneralUserGS_sf2_file","0971_FluidR3_GM_sf2_file","0971_GeneralUserGS_sf2_file"],gm_fx_crystal:["0980_Aspirin_sf2_file","0980_JCLive_sf2_file","0980_Chaos_sf2_file","0980_GeneralUserGS_sf2_file","0981_FluidR3_GM_sf2_file","0981_Aspirin_sf2_file","0981_GeneralUserGS_sf2_file","0982_GeneralUserGS_sf2_file","0983_GeneralUserGS_sf2_file","0984_GeneralUserGS_sf2_file"],gm_fx_atmosphere:["0990_JCLive_sf2_file","0990_Aspirin_sf2_file","0990_Chaos_sf2_file","0990_FluidR3_GM_sf2_file","0990_GeneralUserGS_sf2_file","0991_Aspirin_sf2_file","0991_FluidR3_GM_sf2_file","0991_GeneralUserGS_sf2_file","0991_JCLive_sf2_file","0992_FluidR3_GM_sf2_file","0992_JCLive_sf2_file","0993_JCLive_sf2_file","0994_JCLive_sf2_file"],gm_fx_brightness:["1000_JCLive_sf2_file","1000_Aspirin_sf2_file","1000_Chaos_sf2_file","1000_FluidR3_GM_sf2_file","1000_GeneralUserGS_sf2_file","1001_Aspirin_sf2_file","1001_FluidR3_GM_sf2_file","1001_GeneralUserGS_sf2_file","1001_JCLive_sf2_file","1002_Aspirin_sf2_file","1002_FluidR3_GM_sf2_file","1002_GeneralUserGS_sf2_file"],gm_fx_goblins:["1010_FluidR3_GM_sf2_file","1010_JCLive_sf2_file","1010_Aspirin_sf2_file","1010_Chaos_sf2_file","1010_GeneralUserGS_sf2_file","1011_Aspirin_sf2_file","1011_FluidR3_GM_sf2_file","1011_JCLive_sf2_file","1012_Aspirin_sf2_file"],gm_fx_echoes:["1020_FluidR3_GM_sf2_file","1020_JCLive_sf2_file","1020_Aspirin_sf2_file","1020_Chaos_sf2_file","1020_GeneralUserGS_sf2_file","1021_Aspirin_sf2_file","1021_FluidR3_GM_sf2_file","1021_GeneralUserGS_sf2_file","1021_JCLive_sf2_file","1022_GeneralUserGS_sf2_file"],gm_fx_sci_fi:["1030_FluidR3_GM_sf2_file","1030_Aspirin_sf2_file","1030_Chaos_sf2_file","1030_GeneralUserGS_sf2_file","1030_JCLive_sf2_file","1031_Aspirin_sf2_file","1031_FluidR3_GM_sf2_file","1031_GeneralUserGS_sf2_file","1032_FluidR3_GM_sf2_file"],gm_sitar:["1040_Aspirin_sf2_file","1040_FluidR3_GM_sf2_file","1040_JCLive_sf2_file","1040_Chaos_sf2_file","1040_GeneralUserGS_sf2_file","1041_FluidR3_GM_sf2_file","1041_GeneralUserGS_sf2_file"],gm_banjo:["1050_FluidR3_GM_sf2_file","1050_JCLive_sf2_file","1050_Aspirin_sf2_file","1050_Chaos_sf2_file","1050_GeneralUserGS_sf2_file","1051_GeneralUserGS_sf2_file"],gm_shamisen:["1060_JCLive_sf2_file","1060_FluidR3_GM_sf2_file","1060_Aspirin_sf2_file","1060_Chaos_sf2_file","1060_GeneralUserGS_sf2_file","1061_FluidR3_GM_sf2_file","1061_GeneralUserGS_sf2_file"],gm_koto:["1070_FluidR3_GM_sf2_file","1070_JCLive_sf2_file","1070_Aspirin_sf2_file","1070_Chaos_sf2_file","1070_GeneralUserGS_sf2_file","1071_FluidR3_GM_sf2_file","1071_GeneralUserGS_sf2_file","1072_GeneralUserGS_sf2_file","1073_GeneralUserGS_sf2_file"],gm_kalimba:["1080_JCLive_sf2_file","1080_FluidR3_GM_sf2_file","1080_Aspirin_sf2_file","1080_Chaos_sf2_file","1080_GeneralUserGS_sf2_file"],gm_bagpipe:["1090_Aspirin_sf2_file"],gm_fiddle:["1100_JCLive_sf2_file","1100_Aspirin_sf2_file","1100_Chaos_sf2_file","1100_FluidR3_GM_sf2_file","1100_GeneralUserGS_sf2_file","1101_Aspirin_sf2_file","1101_FluidR3_GM_sf2_file","1101_GeneralUserGS_sf2_file","1102_GeneralUserGS_sf2_file"],gm_shanai:["1110_Aspirin_sf2_file","1110_FluidR3_GM_sf2_file","1110_JCLive_sf2_file","1110_Chaos_sf2_file","1110_GeneralUserGS_sf2_file"],gm_tinkle_bell:["1120_Aspirin_sf2_file"],gm_agogo:["1130_JCLive_sf2_file","1130_Aspirin_sf2_file","1130_Chaos_sf2_file","1130_FluidR3_GM_sf2_file","1130_GeneralUserGS_sf2_file","1131_FluidR3_GM_sf2_file"],gm_steel_drums:["1140_FluidR3_GM_sf2_file","1140_Aspirin_sf2_file","1140_JCLive_sf2_file","1140_Chaos_sf2_file","1140_GeneralUserGS_sf2_file","1141_FluidR3_GM_sf2_file"],gm_woodblock:["1150_JCLive_sf2_file","1150_Aspirin_sf2_file","1150_Chaos_sf2_file","1150_FluidR3_GM_sf2_file","1150_GeneralUserGS_sf2_file","1151_FluidR3_GM_sf2_file","1151_GeneralUserGS_sf2_file","1152_FluidR3_GM_sf2_file","1152_GeneralUserGS_sf2_file"],gm_taiko_drum:["1160_JCLive_sf2_file","1160_FluidR3_GM_sf2_file","1160_Aspirin_sf2_file","1160_Chaos_sf2_file","1160_GeneralUserGS_sf2_file","1161_FluidR3_GM_sf2_file","1161_GeneralUserGS_sf2_file","1162_FluidR3_GM_sf2_file","1162_GeneralUserGS_sf2_file","1163_FluidR3_GM_sf2_file"],gm_melodic_tom:["1170_JCLive_sf2_file","1170_Aspirin_sf2_file","1170_Chaos_sf2_file","1170_FluidR3_GM_sf2_file","1170_GeneralUserGS_sf2_file","1171_FluidR3_GM_sf2_file","1171_GeneralUserGS_sf2_file","1172_FluidR3_GM_sf2_file","1173_FluidR3_GM_sf2_file"],gm_synth_drum:["1180_JCLive_sf2_file","1180_Aspirin_sf2_file","1180_Chaos_sf2_file","1180_FluidR3_GM_sf2_file","1180_GeneralUserGS_sf2_file","1181_FluidR3_GM_sf2_file","1181_GeneralUserGS_sf2_file"],gm_reverse_cymbal:["1190_JCLive_sf2_file","1190_Aspirin_sf2_file","1190_Chaos_sf2_file","1190_FluidR3_GM_sf2_file","1190_GeneralUserGS_sf2_file","1191_GeneralUserGS_sf2_file","1192_GeneralUserGS_sf2_file","1193_GeneralUserGS_sf2_file","1194_GeneralUserGS_sf2_file"],gm_guitar_fret_noise:["1200_JCLive_sf2_file","1200_Aspirin_sf2_file","1200_Chaos_sf2_file","1200_FluidR3_GM_sf2_file","1200_GeneralUserGS_sf2_file","1201_Aspirin_sf2_file","1201_GeneralUserGS_sf2_file","1202_GeneralUserGS_sf2_file"],gm_breath_noise:["1210_FluidR3_GM_sf2_file","1210_JCLive_sf2_file","1210_Aspirin_sf2_file","1210_Chaos_sf2_file","1210_GeneralUserGS_sf2_file","1211_Aspirin_sf2_file","1211_GeneralUserGS_sf2_file","1212_GeneralUserGS_sf2_file"],gm_seashore:["1220_JCLive_sf2_file","1220_Aspirin_sf2_file","1220_Chaos_sf2_file","1220_FluidR3_GM_sf2_file","1220_GeneralUserGS_sf2_file","1221_Aspirin_sf2_file","1221_GeneralUserGS_sf2_file","1221_JCLive_sf2_file","1222_Aspirin_sf2_file","1222_GeneralUserGS_sf2_file","1223_Aspirin_sf2_file","1223_GeneralUserGS_sf2_file","1224_Aspirin_sf2_file","1224_GeneralUserGS_sf2_file","1225_GeneralUserGS_sf2_file","1226_GeneralUserGS_sf2_file"],gm_bird_tweet:["1230_FluidR3_GM_sf2_file","1230_JCLive_sf2_file","1230_Aspirin_sf2_file","1230_GeneralUserGS_sf2_file","1231_GeneralUserGS_sf2_file","1232_GeneralUserGS_sf2_file","1234_GeneralUserGS_sf2_file"],gm_telephone:["1240_JCLive_sf2_file","1240_Aspirin_sf2_file","1240_Chaos_sf2_file","1240_FluidR3_GM_sf2_file","1241_Aspirin_sf2_file","1242_GeneralUserGS_sf2_file","1243_Aspirin_sf2_file","1243_GeneralUserGS_sf2_file","1244_Aspirin_sf2_file","1244_GeneralUserGS_sf2_file"],gm_helicopter:["1250_JCLive_sf2_file","1250_Aspirin_sf2_file","1250_FluidR3_GM_sf2_file","1250_GeneralUserGS_sf2_file","1251_FluidR3_GM_sf2_file","1251_GeneralUserGS_sf2_file","1252_Aspirin_sf2_file","1252_FluidR3_GM_sf2_file","1252_GeneralUserGS_sf2_file","1253_GeneralUserGS_sf2_file","1254_GeneralUserGS_sf2_file","1255_GeneralUserGS_sf2_file","1256_GeneralUserGS_sf2_file","1257_GeneralUserGS_sf2_file","1258_GeneralUserGS_sf2_file","1259_GeneralUserGS_sf2_file"],gm_applause:["1260_JCLive_sf2_file","1260_Aspirin_sf2_file","1260_Chaos_sf2_file","1260_FluidR3_GM_sf2_file","1260_GeneralUserGS_sf2_file","1261_Aspirin_sf2_file","1261_GeneralUserGS_sf2_file","1262_Aspirin_sf2_file","1262_GeneralUserGS_sf2_file","1263_Aspirin_sf2_file","1263_GeneralUserGS_sf2_file","1264_Aspirin_sf2_file","1264_GeneralUserGS_sf2_file","1265_Aspirin_sf2_file","1265_GeneralUserGS_sf2_file"],gm_gunshot:["1270_JCLive_sf2_file","1270_Aspirin_sf2_file","1270_Chaos_sf2_file","1270_FluidR3_GM_sf2_file","1270_GeneralUserGS_sf2_file","1271_Aspirin_sf2_file","1271_GeneralUserGS_sf2_file","1272_Aspirin_sf2_file","1272_GeneralUserGS_sf2_file","1273_GeneralUserGS_sf2_file","1274_GeneralUserGS_sf2_file",""]};let defaultSoundfontUrl="https://felixroos.github.io/webaudiofontdata/sound",soundfontUrl=defaultSoundfontUrl,loadCache={};async function loadFont(name){if(loadCache[name])return loadCache[name];const load=async()=>{const url=`${soundfontUrl}/${name}.js`,preset=await fetch(url).then(e=>e.text());let[_,data]=preset.split("={");return eval("{"+data)};return loadCache[name]=load(),loadCache[name]}async function getFontBufferSource(e,t,o){let{note:a="c3",freq:u}=t,l;if(u)l=freqToMidi$2(u);else if(typeof a=="string")l=noteToMidi$1(a);else if(typeof a=="number")l=a;else throw new Error(`unexpected "note" type "${typeof a}"`);const{buffer:p,zone:f}=await getFontPitch(e,l,o),d=o.createBufferSource();d.buffer=p;const g=f.originalPitch-100*f.coarseTune-f.fineTune,b=1*Math.pow(2,(100*l-g)/1200);return d.playbackRate.value=b,f.loopStart>1&&f.loopStart<f.loopEnd&&(d.loop=!0,d.loopStart=f.loopStart/f.sampleRate,d.loopEnd=f.loopEnd/f.sampleRate),d}let bufferCache={};async function getFontPitch(e,t,o){const a=`${e}:::${t}`;if(bufferCache[a])return bufferCache[a];const u=async()=>{const l=await loadFont(e);if(!l)throw new Error(`Could not load soundfont ${e}`);const p=findZone(l,t);if(!p)throw new Error("no soundfont zone found for preset ",e,"pitch",t);const f=await getBuffer(p,o);if(!f)throw new Error(`no soundfont buffer found for preset ${e}, pitch: ${t}`);return{buffer:f,zone:p}};return bufferCache[a]=u(),bufferCache[a]}function findZone(e,t){return e.find(o=>o.keyRangeLow<=t&&o.keyRangeHigh+1>=t)}async function getBuffer(e,t){if(e.sample){console.warn("zone.sample untested!");const a=atob(e.sample);e.buffer=t.createBuffer(1,a.length/2,e.sampleRate);const u=e.buffer.getChannelData(0);let l,p,f;for(var o=0;o<a.length/2;o++)l=a.charCodeAt(o*2),p=a.charCodeAt(o*2+1),l<0&&(l=256+l),p<0&&(p=256+p),f=p*256+l,f>=65536/2&&(f=f-65536),u[o]=f/65536}else if(e.file){const a=e.file.length,u=new ArrayBuffer(a),l=new Uint8Array(u),p=atob(e.file);let f;for(let d=0;d<p.length;d++)f=p.charCodeAt(d),l[d]=f;return new Promise(d=>t.decodeAudioData(u,d))}}function registerSoundfonts(){Object.entries(gm).forEach(([e,t])=>{registerSound(e,async(o,a,u)=>{const[l,p,f,d]=getADSRValues([a.attack,a.decay,a.sustain,a.release]),{duration:g}=a,b=getSoundIndex$1(a.n,t.length),S=t[b],E=getAudioContext(),F=await getFontBufferSource(S,a,E);F.start(o);const $=E.createGain(),k=F.connect($),B=o+g;getParamADSR(k.gain,l,p,f,d,0,.3,o,B,"linear");let V=B+d+.01,U=getVibratoOscillator(F.detune,a,o);getPitchEnvelope(F.detune,a,o,B),F.stop(V);const ee=j=>{};return F.onended=()=>{F.disconnect(),U?.stop(),k.disconnect(),u()},{node:k,stop:ee}},{type:"soundfont",prebake:!0,fonts:t})})}var SoundFont2={exports:{}},hasRequiredSoundFont2;function requireSoundFont2(){return hasRequiredSoundFont2||(hasRequiredSoundFont2=1,(function(e,t){(function(o,a){e.exports=a()})(window,function(){return(function(o){var a={};function u(l){if(a[l])return a[l].exports;var p=a[l]={i:l,l:!1,exports:{}};return o[l].call(p.exports,p,p.exports,u),p.l=!0,p.exports}return u.m=o,u.c=a,u.d=function(l,p,f){u.o(l,p)||Object.defineProperty(l,p,{enumerable:!0,get:f})},u.r=function(l){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},u.t=function(l,p){if(1&p&&(l=u(l)),8&p||4&p&&typeof l=="object"&&l&&l.__esModule)return l;var f=Object.create(null);if(u.r(f),Object.defineProperty(f,"default",{enumerable:!0,value:l}),2&p&&typeof l!="string")for(var d in l)u.d(f,d,function(g){return l[g]}.bind(null,d));return f},u.n=function(l){var p=l&&l.__esModule?function(){return l.default}:function(){return l};return u.d(p,"a",p),p},u.o=function(l,p){return Object.prototype.hasOwnProperty.call(l,p)},u.p="",u(u.s="./src/index.ts")})({"./src/chunk.ts":function(o,a,u){u.r(a),u.d(a,"SF2Chunk",function(){return F});var l=u("./src/riff/index.ts"),p=u("./src/constants.ts"),f=u("./src/chunks/index.ts");function d($){return(d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k})($)}function g($,k){for(var B=0;B<k.length;B++){var V=k[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty($,V.key,V)}}function b($){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(k){return k.__proto__||Object.getPrototypeOf(k)})($)}function S($,k){return(S=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B})($,k)}function E($){if($===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $}var F=(function($){function k(U){var ee,j,O,q,te,re;return(function(de,ie){if(!(de instanceof ie))throw new TypeError("Cannot call a class as a function")})(this,k),j=this,ee=!(O=b(k).call(this,U.id,U.length,U.buffer,U.subChunks))||d(O)!=="object"&&typeof O!="function"?E(j):O,q=E(E(ee)),re=void 0,(te="subChunks")in q?Object.defineProperty(q,te,{value:re,enumerable:!0,configurable:!0,writable:!0}):q[te]=re,ee.subChunks=U.subChunks.map(function(de){return new k(de)}),ee}var B,V;return(function(U,ee){if(typeof ee!="function"&&ee!==null)throw new TypeError("Super expression must either be null or a function");U.prototype=Object.create(ee&&ee.prototype,{constructor:{value:U,writable:!0,configurable:!0}}),ee&&S(U,ee)})(k,l.RIFFChunk),B=k,(V=[{key:"getMetaData",value:function(){if(this.id!=="LIST")throw new l.ParseError("Unexpected chunk ID","'LIST'","'".concat(this.id,"'"));var U=this.subChunks.reduce(function(ee,j){if(j.id==="ifil"||j.id==="iver"){if(j.length!==p.SF_VERSION_LENGTH)throw new l.ParseError("Invalid size for the '".concat(j.id,"' sub-chunk"));ee[j.id]="".concat(j.getInt16(),".").concat(j.getInt16(2))}else ee[j.id]=j.getString();return ee},{});if(!U.ifil)throw new l.ParseError("Missing required 'ifil' sub-chunk");if(!U.INAM)throw new l.ParseError("Missing required 'INAM' sub-chunk");return{version:U.ifil,soundEngine:U.isng||"EMU8000",name:U.INAM,rom:U.irom,romVersion:U.iver,creationDate:U.ICRD,author:U.IENG,product:U.IPRD,copyright:U.ICOP,comments:U.ICMT,createdBy:U.ISFT}}},{key:"getSampleData",value:function(){if(this.id!=="LIST")throw new l.ParseError("Unexpected chunk ID","'LIST'","'".concat(this.id,"'"));var U=this.subChunks[0];if(U.id!=="smpl")throw new l.ParseError("Invalid chunk signature","'smpl'","'".concat(U.id,"'"));return U.buffer}},{key:"getPresetData",value:function(){if(this.id!=="LIST")throw new l.ParseError("Unexpected chunk ID","'LIST'","'".concat(this.id,"'"));return{presetHeaders:Object(f.getPresetHeaders)(this.subChunks[0]),presetZones:Object(f.getZones)(this.subChunks[1],"pbag"),presetModulators:Object(f.getModulators)(this.subChunks[2],"pmod"),presetGenerators:Object(f.getGenerators)(this.subChunks[3],"pgen"),instrumentHeaders:Object(f.getInstrumentHeaders)(this.subChunks[4]),instrumentZones:Object(f.getZones)(this.subChunks[5],"ibag"),instrumentModulators:Object(f.getModulators)(this.subChunks[6],"imod"),instrumentGenerators:Object(f.getGenerators)(this.subChunks[7],"igen"),sampleHeaders:Object(f.getSampleHeaders)(this.subChunks[8])}}}])&&g(B.prototype,V),k})()},"./src/chunks/generators.ts":function(o,a,u){u.r(a),u.d(a,"getGenerators",function(){return S});var l=u("./src/riff/index.ts"),p=u("./src/types/index.ts"),f=u("./src/constants.ts"),d=[p.GeneratorType.StartAddrsOffset,p.GeneratorType.EndAddrsOffset,p.GeneratorType.StartLoopAddrsOffset,p.GeneratorType.EndLoopAddrsOffset,p.GeneratorType.StartAddrsCoarseOffset,p.GeneratorType.EndAddrsCoarseOffset,p.GeneratorType.StartLoopAddrsCoarseOffset,p.GeneratorType.KeyNum,p.GeneratorType.Velocity,p.GeneratorType.EndLoopAddrsCoarseOffset,p.GeneratorType.SampleModes,p.GeneratorType.ExclusiveClass,p.GeneratorType.OverridingRootKey],g=[p.GeneratorType.Unused1,p.GeneratorType.Unused2,p.GeneratorType.Unused3,p.GeneratorType.Unused4,p.GeneratorType.Reserved1,p.GeneratorType.Reserved2,p.GeneratorType.Reserved3],b=[p.GeneratorType.KeyRange,p.GeneratorType.VelRange],S=function(E,F){if(E.id!==F)throw new l.ParseError("Unexpected chunk ID","'".concat(F,"'"),"'".concat(E.id,"'"));if(E.length%f.SF_GENERATOR_SIZE)throw new l.ParseError("Invalid size for the '".concat(F,"' sub-chunk"));return E.iterate(function($){var k=$.getInt16();return p.GeneratorType[k]?F==="pgen"&&d.includes(k)||F==="igen"&&g.includes(k)?null:b.includes(k)?{id:k,range:{lo:$.getByte(),hi:$.getByte()}}:{id:k,value:$.getInt16BE()}:null})}},"./src/chunks/index.ts":function(o,a,u){u.r(a);var l=u("./src/chunks/instruments/index.ts");u.d(a,"getInstrumentHeaders",function(){return l.getInstrumentHeaders});var p=u("./src/chunks/presets/index.ts");u.d(a,"getPresetHeaders",function(){return p.getPresetHeaders});var f=u("./src/chunks/samples/index.ts");u.d(a,"getSampleHeaders",function(){return f.getSampleHeaders});var d=u("./src/chunks/generators.ts");u.d(a,"getGenerators",function(){return d.getGenerators});var g=u("./src/chunks/modulators.ts");u.d(a,"getModulators",function(){return g.getModulators});var b=u("./src/chunks/zones.ts");u.d(a,"getZones",function(){return b.getZones}),u.d(a,"getItemsInZone",function(){return b.getItemsInZone})},"./src/chunks/instruments/headers.ts":function(o,a,u){u.r(a),u.d(a,"getInstrumentHeaders",function(){return f});var l=u("./src/riff/index.ts"),p=u("./src/constants.ts"),f=function(d){if(d.id!=="inst")throw new l.ParseError("Unexpected chunk ID","'inst'","'".concat(d.id,"'"));if(d.length%p.SF_INSTRUMENT_HEADER_SIZE)throw new l.ParseError("Invalid size for the 'inst' sub-chunk");return d.iterate(function(g){return{name:g.getString(),bagIndex:g.getInt16()}})}},"./src/chunks/instruments/index.ts":function(o,a,u){u.r(a);var l=u("./src/chunks/instruments/headers.ts");u.d(a,"getInstrumentHeaders",function(){return l.getInstrumentHeaders})},"./src/chunks/modulators.ts":function(o,a,u){u.r(a),u.d(a,"getModulators",function(){return d});var l=u("./src/riff/index.ts"),p=u("./src/constants.ts"),f=function(g){return{type:g>>10&63,polarity:g>>9&1,direction:g>>8&1,palette:g>>7&1,index:127&g}},d=function(g,b){if(g.id!==b)throw new l.ParseError("Unexpected chunk ID","'".concat(b,"'"),"'".concat(g.id,"'"));if(g.length%p.SF_MODULATOR_SIZE)throw new l.ParseError("Invalid size for the '".concat(b,"' sub-chunk"));return g.iterate(function(S){return{source:f(S.getInt16BE()),id:S.getInt16BE(),value:S.getInt16BE(),valueSource:f(S.getInt16BE()),transform:S.getInt16BE()}})}},"./src/chunks/presets/headers.ts":function(o,a,u){u.r(a),u.d(a,"getPresetHeaders",function(){return f});var l=u("./src/riff/index.ts"),p=u("./src/constants.ts"),f=function(d){if(d.id!=="phdr")throw new l.ParseError("Invalid chunk ID","'phdr'","'".concat(d.id,"'"));if(d.length%p.SF_PRESET_HEADER_SIZE)throw new l.ParseError("Invalid size for the 'phdr' sub-chunk");return d.iterate(function(g){return{name:g.getString(),preset:g.getInt16(),bank:g.getInt16(),bagIndex:g.getInt16(),library:g.getUInt32(),genre:g.getUInt32(),morphology:g.getUInt32()}})}},"./src/chunks/presets/index.ts":function(o,a,u){u.r(a);var l=u("./src/chunks/presets/headers.ts");u.d(a,"getPresetHeaders",function(){return l.getPresetHeaders})},"./src/chunks/samples/headers.ts":function(o,a,u){u.r(a),u.d(a,"getSampleHeaders",function(){return f});var l=u("./src/riff/index.ts"),p=u("./src/constants.ts"),f=function(d){if(d.id!=="shdr")throw new l.ParseError("Unexpected chunk ID","'shdr'","'".concat(d.id,"'"));if(d.length%p.SF_SAMPLE_HEADER_SIZE)throw new l.ParseError("Invalid size for the 'shdr' sub-chunk");return d.iterate(function(g){return{name:g.getString(),start:g.getUInt32(),end:g.getUInt32(),startLoop:g.getUInt32(),endLoop:g.getUInt32(),sampleRate:g.getUInt32(),originalPitch:g.getByte(),pitchCorrection:g.getChar(),link:g.getInt16(),type:g.getInt16()}})}},"./src/chunks/samples/index.ts":function(o,a,u){u.r(a);var l=u("./src/chunks/samples/headers.ts");u.d(a,"getSampleHeaders",function(){return l.getSampleHeaders})},"./src/chunks/zones.ts":function(o,a,u){u.r(a),u.d(a,"getZones",function(){return d}),u.d(a,"getItemsInZone",function(){return g});var l=u("./src/riff/index.ts"),p=u("./src/constants.ts"),f=u("./src/types/index.ts"),d=function(F,$){if(F.id!==$)throw new l.ParseError("Unexpected chunk ID","'".concat($,"'"),"'".concat(F.id,"'"));if(F.length%p.SF_BAG_SIZE)throw new l.ParseError("Invalid size for the '".concat($,"' sub-chunk"));return F.iterate(function(k){return{generatorIndex:k.getInt16(),modulatorIndex:k.getInt16()}})},g=function(F,$,k,B,V,U){for(var ee=[],j=0;j<F.length;j++){for(var O=F[j],q=F[j+1],te=O.bagIndex,re=q?q.bagIndex:$.length,de=[],ie=void 0,me=te;me<re;me++){var pe=b(me,$,k),le=S(me,$,B),he=le[f.GeneratorType.KeyRange]&&le[f.GeneratorType.KeyRange].range,Ae=le[U];if(Ae){var ye=V[Ae.value];ye&&de.push({keyRange:he,modulators:pe,generators:le,reference:ye})}else me-te==0&&(ie={keyRange:he,modulators:pe,generators:le})}ee.push({header:O,globalZone:ie,zones:de})}return ee},b=function(F,$,k){var B=$[F],V=$[F+1],U=B.modulatorIndex,ee=V?V.modulatorIndex:$.length;return E(U,ee,k)},S=function(F,$,k){var B=$[F],V=$[F+1],U=B.generatorIndex,ee=V?V.generatorIndex:$.length;return E(U,ee,k)},E=function(F,$,k){for(var B={},V=F;V<$;V++){var U=k[V];U&&(B[U.id]=U)}return B}},"./src/constants.ts":function(o,a,u){u.r(a),u.d(a,"SF_VERSION_LENGTH",function(){return l}),u.d(a,"SF_PRESET_HEADER_SIZE",function(){return p}),u.d(a,"SF_BAG_SIZE",function(){return f}),u.d(a,"SF_MODULATOR_SIZE",function(){return d}),u.d(a,"SF_GENERATOR_SIZE",function(){return g}),u.d(a,"SF_INSTRUMENT_HEADER_SIZE",function(){return b}),u.d(a,"SF_SAMPLE_HEADER_SIZE",function(){return S}),u.d(a,"DEFAULT_SAMPLE_RATE",function(){return E});var l=4,p=38,f=4,d=10,g=4,b=22,S=46,E=22050},"./src/index.ts":function(o,a,u){u.r(a);var l=u("./src/types/index.ts");for(var p in l)p!=="default"&&(function(b){u.d(a,b,function(){return l[b]})})(p);var f=u("./src/chunk.ts");u.d(a,"SF2Chunk",function(){return f.SF2Chunk});var d=u("./src/constants.ts");u.d(a,"SF_VERSION_LENGTH",function(){return d.SF_VERSION_LENGTH}),u.d(a,"SF_PRESET_HEADER_SIZE",function(){return d.SF_PRESET_HEADER_SIZE}),u.d(a,"SF_BAG_SIZE",function(){return d.SF_BAG_SIZE}),u.d(a,"SF_MODULATOR_SIZE",function(){return d.SF_MODULATOR_SIZE}),u.d(a,"SF_GENERATOR_SIZE",function(){return d.SF_GENERATOR_SIZE}),u.d(a,"SF_INSTRUMENT_HEADER_SIZE",function(){return d.SF_INSTRUMENT_HEADER_SIZE}),u.d(a,"SF_SAMPLE_HEADER_SIZE",function(){return d.SF_SAMPLE_HEADER_SIZE}),u.d(a,"DEFAULT_SAMPLE_RATE",function(){return d.DEFAULT_SAMPLE_RATE});var g=u("./src/soundFont2.ts");u.d(a,"SoundFont2",function(){return g.SoundFont2})},"./src/riff/chunkIterator.ts":function(o,a,u){u.r(a),u.d(a,"ChunkIterator",function(){return d});var l=u("./src/utils/index.ts");function p(g,b){for(var S=0;S<b.length;S++){var E=b[S];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,E.key,E)}}function f(g,b,S){return b in g?Object.defineProperty(g,b,{value:S,enumerable:!0,configurable:!0,writable:!0}):g[b]=S,g}var d=(function(){function g(E){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;(function($,k){if(!($ instanceof k))throw new TypeError("Cannot call a class as a function")})(this,g),f(this,"target",[]),f(this,"chunk",void 0),f(this,"position",0),this.chunk=E,this.position=F}var b,S;return b=g,(S=[{key:"iterate",value:function(E){for(;this.position<this.chunk.length;){var F=E(this);F&&this.target.push(F)}}},{key:"getString",value:function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:20,F=Object(l.getStringFromBuffer)(this.getBuffer(this.position,E));return this.position+=E,F}},{key:"getInt16",value:function(){return this.chunk.buffer[this.position++]|this.chunk.buffer[this.position++]<<8}},{key:"getInt16BE",value:function(){return this.getInt16()<<16>>16}},{key:"getUInt32",value:function(){return(this.chunk.buffer[this.position++]|this.chunk.buffer[this.position++]<<8|this.chunk.buffer[this.position++]<<16|this.chunk.buffer[this.position++]<<24)>>>0}},{key:"getByte",value:function(){return this.chunk.buffer[this.position++]}},{key:"getChar",value:function(){return this.chunk.buffer[this.position++]<<24>>24}},{key:"skip",value:function(E){this.position+=E}},{key:"getBuffer",value:function(E,F){return this.chunk.buffer.subarray(E,E+F)}},{key:"currentPosition",get:function(){return this.position}}])&&p(b.prototype,S),g})()},"./src/riff/index.ts":function(o,a,u){u.r(a);var l=u("./src/riff/chunkIterator.ts");u.d(a,"ChunkIterator",function(){return l.ChunkIterator});var p=u("./src/riff/parseError.ts");u.d(a,"ParseError",function(){return p.ParseError});var f=u("./src/riff/parser.ts");u.d(a,"parseBuffer",function(){return f.parseBuffer}),u.d(a,"getChunk",function(){return f.getChunk}),u.d(a,"getChunkLength",function(){return f.getChunkLength}),u.d(a,"getSubChunks",function(){return f.getSubChunks}),u.d(a,"getChunkId",function(){return f.getChunkId});var d=u("./src/riff/riffChunk.ts");u.d(a,"RIFFChunk",function(){return d.RIFFChunk})},"./src/riff/parseError.ts":function(o,a,u){function l(E){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F})(E)}function p(E,F){return!F||l(F)!=="object"&&typeof F!="function"?(function($){if($===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $})(E):F}function f(E){var F=typeof Map=="function"?new Map:void 0;return(f=function($){if($===null||(k=$,Function.toString.call(k).indexOf("[native code]")===-1))return $;var k;if(typeof $!="function")throw new TypeError("Super expression must either be null or a function");if(F!==void 0){if(F.has($))return F.get($);F.set($,B)}function B(){return d($,arguments,b(this).constructor)}return B.prototype=Object.create($.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),g(B,$)})(E)}function d(E,F,$){return(d=(function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}})()?Reflect.construct:function(k,B,V){var U=[null];U.push.apply(U,B);var ee=new(Function.bind.apply(k,U));return V&&g(ee,V.prototype),ee}).apply(null,arguments)}function g(E,F){return(g=Object.setPrototypeOf||function($,k){return $.__proto__=k,$})(E,F)}function b(E){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(F){return F.__proto__||Object.getPrototypeOf(F)})(E)}u.r(a),u.d(a,"ParseError",function(){return S});var S=(function(E){function F($,k,B){return(function(V,U){if(!(V instanceof U))throw new TypeError("Cannot call a class as a function")})(this,F),p(this,b(F).call(this,"".concat($).concat(k&&B?", expected ".concat(k,", received ").concat(B):"")))}return(function($,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function");$.prototype=Object.create(k&&k.prototype,{constructor:{value:$,writable:!0,configurable:!0}}),k&&g($,k)})(F,f(Error)),F})()},"./src/riff/parser.ts":function(o,a,u){u.r(a),u.d(a,"parseBuffer",function(){return d}),u.d(a,"getChunk",function(){return g}),u.d(a,"getChunkLength",function(){return b}),u.d(a,"getSubChunks",function(){return S}),u.d(a,"getChunkId",function(){return E});var l=u("./src/riff/parseError.ts"),p=u("./src/utils/buffer.ts"),f=u("./src/riff/riffChunk.ts"),d=function(F){var $=E(F);if($!=="RIFF")throw new l.ParseError("Invalid file format","RIFF",$);var k=E(F,8);if(k!=="sfbk")throw new l.ParseError("Invalid signature","sfbk",k);var B=F.subarray(8),V=S(B.subarray(4));return new f.RIFFChunk($,B.length,B,V)},g=function(F,$){var k=E(F,$),B=b(F,$+4),V=[];return k!=="RIFF"&&k!=="LIST"||(V=S(F.subarray($+12))),new f.RIFFChunk(k,B,F.subarray($+8),V)},b=function(F,$){return((F=F.subarray($,$+4))[0]|F[1]<<8|F[2]<<16|F[3]<<24)>>>0},S=function(F){for(var $=[],k=0;k<=F.length-8;){var B=g(F,k);$.push(B),k=(k+=8+B.length)%2?k+1:k}return $},E=function(F){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Object(p.getStringFromBuffer)(F.subarray($,$+4))}},"./src/riff/riffChunk.ts":function(o,a,u){u.r(a),u.d(a,"RIFFChunk",function(){return g});var l=u("./src/riff/chunkIterator.ts"),p=u("./src/utils/index.ts");function f(b,S){for(var E=0;E<S.length;E++){var F=S[E];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(b,F.key,F)}}function d(b,S,E){return S in b?Object.defineProperty(b,S,{value:E,enumerable:!0,configurable:!0,writable:!0}):b[S]=E,b}var g=(function(){function b(F,$,k,B){(function(V,U){if(!(V instanceof U))throw new TypeError("Cannot call a class as a function")})(this,b),d(this,"id",void 0),d(this,"length",void 0),d(this,"buffer",void 0),d(this,"subChunks",void 0),this.id=F,this.length=$,this.buffer=k,this.subChunks=B}var S,E;return S=b,(E=[{key:"getString",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,$=arguments.length>1?arguments[1]:void 0;return Object(p.getStringFromBuffer)(this.getBuffer(F,$||this.length-F))}},{key:"getInt16",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.buffer[F++]|this.buffer[F]<<8}},{key:"getUInt32",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return(this.buffer[F++]|this.buffer[F++]<<8|this.buffer[F++]<<16|this.buffer[F]<<24)>>>0}},{key:"getByte",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.buffer[F]}},{key:"getChar",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.buffer[F]<<24>>24}},{key:"iterator",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new l.ChunkIterator(this,F)}},{key:"iterate",value:function(F){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,k=new l.ChunkIterator(this,$);return k.iterate(F),k.target}},{key:"getBuffer",value:function(F,$){return this.buffer.subarray(F,F+$)}}])&&f(S.prototype,E),b})()},"./src/soundFont2.ts":function(o,a,u){u.r(a),u.d(a,"SoundFont2",function(){return $});var l=u("./src/types/index.ts"),p=u("./src/chunk.ts"),f=u("./src/riff/index.ts"),d=u("./src/chunks/index.ts"),g=u("./src/utils/index.ts");function b(k){for(var B=1;B<arguments.length;B++){var V=arguments[B]!=null?arguments[B]:{},U=Object.keys(V);typeof Object.getOwnPropertySymbols=="function"&&(U=U.concat(Object.getOwnPropertySymbols(V).filter(function(ee){return Object.getOwnPropertyDescriptor(V,ee).enumerable}))),U.forEach(function(ee){F(k,ee,V[ee])})}return k}function S(k,B){for(var V=0;V<B.length;V++){var U=B[V];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(k,U.key,U)}}function E(k,B,V){return B&&S(k.prototype,B),V&&S(k,V),k}function F(k,B,V){return B in k?Object.defineProperty(k,B,{value:V,enumerable:!0,configurable:!0,writable:!0}):k[B]=V,k}var $=(function(){function k(B){if((function(U,ee){if(!(U instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,k),F(this,"chunk",void 0),F(this,"metaData",void 0),F(this,"sampleData",void 0),F(this,"samples",void 0),F(this,"presetData",void 0),F(this,"instruments",void 0),F(this,"presets",void 0),F(this,"banks",void 0),!(B instanceof p.SF2Chunk)){var V=Object(f.parseBuffer)(B);B=new p.SF2Chunk(V)}if(B.subChunks.length!==3)throw new f.ParseError("Invalid sfbk structure","3 chunks","".concat(B.subChunks.length," chunks"));this.chunk=B,this.metaData=B.subChunks[0].getMetaData(),this.sampleData=B.subChunks[1].getSampleData(),this.presetData=B.subChunks[2].getPresetData(),this.samples=this.getSamples(),this.instruments=this.getInstruments(),this.presets=this.getPresets(),this.banks=this.getBanks()}return E(k,null,[{key:"from",value:function(B){return new k(B)}}]),E(k,[{key:"getKeyData",value:function(B){var V=this,U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return Object(g.memoize)(function(j,O,q){var te=V.banks[O];if(te){var re=te.presets[q];if(re){var de=re.zones.find(function(Ae){return V.isKeyInRange(Ae,j)});if(de){var ie=de.instrument,me=ie.zones.find(function(Ae){return V.isKeyInRange(Ae,j)});if(me){var pe=me.sample,le=b({},de.generators,me.generators),he=b({},de.modulators,me.modulators);return{keyNumber:j,preset:re,instrument:ie,sample:pe,generators:le,modulators:he}}}}}return null})(B,U,ee)}},{key:"isKeyInRange",value:function(B,V){return B.keyRange===void 0||B.keyRange.lo<=V&&B.keyRange.hi>=V}},{key:"getBanks",value:function(){return this.presets.reduce(function(B,V){var U=V.header.bank;return B[U]||(B[U]={presets:[]}),B[U].presets[V.header.preset]=V,B},[])}},{key:"getPresets",value:function(){var B=this.presetData,V=B.presetHeaders,U=B.presetZones,ee=B.presetGenerators,j=B.presetModulators;return Object(d.getItemsInZone)(V,U,j,ee,this.instruments,l.GeneratorType.Instrument).filter(function(O){return O.header.name!=="EOP"}).map(function(O){return{header:O.header,globalZone:O.globalZone,zones:O.zones.map(function(q){return{keyRange:q.keyRange,generators:q.generators,modulators:q.modulators,instrument:q.reference}})}})}},{key:"getInstruments",value:function(){var B=this.presetData,V=B.instrumentHeaders,U=B.instrumentZones,ee=B.instrumentModulators,j=B.instrumentGenerators;return Object(d.getItemsInZone)(V,U,ee,j,this.samples,l.GeneratorType.SampleId).filter(function(O){return O.header.name!=="EOI"}).map(function(O){return{header:O.header,globalZone:O.globalZone,zones:O.zones.map(function(q){return{keyRange:q.keyRange,generators:q.generators,modulators:q.modulators,sample:q.reference}})}})}},{key:"getSamples",value:function(){var B=this;return this.presetData.sampleHeaders.filter(function(V){return V.name!=="EOS"}).map(function(V){if(V.name!=="EOS"&&V.sampleRate<=0)throw new Error("Illegal sample rate of ".concat(V.sampleRate," hz in sample '").concat(V.name,"'"));return V.originalPitch>=128&&V.originalPitch<=254&&(V.originalPitch=60),V.startLoop-=V.start,V.endLoop-=V.start,{header:V,data:new Int16Array(new Uint8Array(B.sampleData.subarray(2*V.start,2*V.end)).buffer)}})}}]),k})()},"./src/types/bank.ts":function(o,a){},"./src/types/generator.ts":function(o,a,u){var l,p;function f(g,b,S){return b in g?Object.defineProperty(g,b,{value:S,enumerable:!0,configurable:!0,writable:!0}):g[b]=S,g}u.r(a),u.d(a,"GeneratorType",function(){return p}),u.d(a,"DEFAULT_GENERATOR_VALUES",function(){return d}),(function(g){g[g.StartAddrsOffset=0]="StartAddrsOffset",g[g.EndAddrsOffset=1]="EndAddrsOffset",g[g.StartLoopAddrsOffset=2]="StartLoopAddrsOffset",g[g.EndLoopAddrsOffset=3]="EndLoopAddrsOffset",g[g.StartAddrsCoarseOffset=4]="StartAddrsCoarseOffset",g[g.ModLFOToPitch=5]="ModLFOToPitch",g[g.VibLFOToPitch=6]="VibLFOToPitch",g[g.ModEnvToPitch=7]="ModEnvToPitch",g[g.InitialFilterFc=8]="InitialFilterFc",g[g.InitialFilterQ=9]="InitialFilterQ",g[g.ModLFOToFilterFc=10]="ModLFOToFilterFc",g[g.ModEnvToFilterFc=11]="ModEnvToFilterFc",g[g.EndAddrsCoarseOffset=12]="EndAddrsCoarseOffset",g[g.ModLFOToVolume=13]="ModLFOToVolume",g[g.Unused1=14]="Unused1",g[g.ChorusEffectsSend=15]="ChorusEffectsSend",g[g.ReverbEffectsSend=16]="ReverbEffectsSend",g[g.Pan=17]="Pan",g[g.Unused2=18]="Unused2",g[g.Unused3=19]="Unused3",g[g.Unused4=20]="Unused4",g[g.DelayModLFO=21]="DelayModLFO",g[g.FreqModLFO=22]="FreqModLFO",g[g.DelayVibLFO=23]="DelayVibLFO",g[g.FreqVibLFO=24]="FreqVibLFO",g[g.DelayModEnv=25]="DelayModEnv",g[g.AttackModEnv=26]="AttackModEnv",g[g.HoldModEnv=27]="HoldModEnv",g[g.DecayModEnv=28]="DecayModEnv",g[g.SustainModEnv=29]="SustainModEnv",g[g.ReleaseModEnv=30]="ReleaseModEnv",g[g.KeyNumToModEnvHold=31]="KeyNumToModEnvHold",g[g.KeyNumToModEnvDecay=32]="KeyNumToModEnvDecay",g[g.DelayVolEnv=33]="DelayVolEnv",g[g.AttackVolEnv=34]="AttackVolEnv",g[g.HoldVolEnv=35]="HoldVolEnv",g[g.DecayVolEnv=36]="DecayVolEnv",g[g.SustainVolEnv=37]="SustainVolEnv",g[g.ReleaseVolEnv=38]="ReleaseVolEnv",g[g.KeyNumToVolEnvHold=39]="KeyNumToVolEnvHold",g[g.KeyNumToVolEnvDecay=40]="KeyNumToVolEnvDecay",g[g.Instrument=41]="Instrument",g[g.Reserved1=42]="Reserved1",g[g.KeyRange=43]="KeyRange",g[g.VelRange=44]="VelRange",g[g.StartLoopAddrsCoarseOffset=45]="StartLoopAddrsCoarseOffset",g[g.KeyNum=46]="KeyNum",g[g.Velocity=47]="Velocity",g[g.InitialAttenuation=48]="InitialAttenuation",g[g.Reserved2=49]="Reserved2",g[g.EndLoopAddrsCoarseOffset=50]="EndLoopAddrsCoarseOffset",g[g.CoarseTune=51]="CoarseTune",g[g.FineTune=52]="FineTune",g[g.SampleId=53]="SampleId",g[g.SampleModes=54]="SampleModes",g[g.Reserved3=55]="Reserved3",g[g.ScaleTuning=56]="ScaleTuning",g[g.ExclusiveClass=57]="ExclusiveClass",g[g.OverridingRootKey=58]="OverridingRootKey",g[g.Unused5=59]="Unused5",g[g.EndOper=60]="EndOper"})(p||(p={}));var d=(f(l={},p.StartAddrsOffset,0),f(l,p.EndAddrsOffset,0),f(l,p.StartLoopAddrsOffset,0),f(l,p.EndLoopAddrsOffset,0),f(l,p.StartAddrsCoarseOffset,0),f(l,p.ModLFOToPitch,0),f(l,p.VibLFOToPitch,0),f(l,p.ModEnvToPitch,0),f(l,p.InitialFilterFc,13500),f(l,p.InitialFilterQ,0),f(l,p.ModLFOToFilterFc,0),f(l,p.ModEnvToFilterFc,0),f(l,p.EndAddrsCoarseOffset,0),f(l,p.ModLFOToVolume,0),f(l,p.ChorusEffectsSend,0),f(l,p.ReverbEffectsSend,0),f(l,p.Pan,0),f(l,p.DelayModLFO,-12e3),f(l,p.FreqModLFO,0),f(l,p.DelayVibLFO,-12e3),f(l,p.FreqVibLFO,0),f(l,p.DelayModEnv,-12e3),f(l,p.AttackModEnv,-12e3),f(l,p.HoldModEnv,-12e3),f(l,p.DecayModEnv,-12e3),f(l,p.SustainModEnv,0),f(l,p.ReleaseModEnv,-12e3),f(l,p.KeyNumToModEnvHold,0),f(l,p.KeyNumToModEnvDecay,0),f(l,p.DelayVolEnv,-12e3),f(l,p.AttackVolEnv,-12e3),f(l,p.HoldVolEnv,-12e3),f(l,p.DecayVolEnv,-12e3),f(l,p.SustainVolEnv,0),f(l,p.ReleaseVolEnv,-12e3),f(l,p.KeyNumToVolEnvHold,0),f(l,p.KeyNumToVolEnvDecay,0),f(l,p.StartLoopAddrsCoarseOffset,0),f(l,p.KeyNum,-1),f(l,p.Velocity,-1),f(l,p.InitialAttenuation,0),f(l,p.EndLoopAddrsCoarseOffset,0),f(l,p.CoarseTune,0),f(l,p.FineTune,0),f(l,p.SampleModes,0),f(l,p.ScaleTuning,100),f(l,p.ExclusiveClass,0),f(l,p.OverridingRootKey,-1),l)},"./src/types/index.ts":function(o,a,u){u.r(a);var l=u("./src/types/bank.ts");for(var p in l)p!=="default"&&(function(B){u.d(a,B,function(){return l[B]})})(p);var f=u("./src/types/generator.ts");u.d(a,"GeneratorType",function(){return f.GeneratorType}),u.d(a,"DEFAULT_GENERATOR_VALUES",function(){return f.DEFAULT_GENERATOR_VALUES});var d=u("./src/types/instrument.ts");for(var p in d)["GeneratorType","DEFAULT_GENERATOR_VALUES","default"].indexOf(p)<0&&(function(V){u.d(a,V,function(){return d[V]})})(p);var g=u("./src/types/key.ts");for(var p in g)["GeneratorType","DEFAULT_GENERATOR_VALUES","default"].indexOf(p)<0&&(function(V){u.d(a,V,function(){return g[V]})})(p);var b=u("./src/types/metaData.ts");for(var p in b)["GeneratorType","DEFAULT_GENERATOR_VALUES","default"].indexOf(p)<0&&(function(V){u.d(a,V,function(){return b[V]})})(p);var S=u("./src/types/modulator.ts");u.d(a,"ControllerType",function(){return S.ControllerType}),u.d(a,"ControllerPolarity",function(){return S.ControllerPolarity}),u.d(a,"ControllerDirection",function(){return S.ControllerDirection}),u.d(a,"ControllerPalette",function(){return S.ControllerPalette}),u.d(a,"Controller",function(){return S.Controller}),u.d(a,"TransformType",function(){return S.TransformType}),u.d(a,"DEFAULT_INSTRUMENT_MODULATORS",function(){return S.DEFAULT_INSTRUMENT_MODULATORS});var E=u("./src/types/preset.ts");for(var p in E)["GeneratorType","DEFAULT_GENERATOR_VALUES","ControllerType","ControllerPolarity","ControllerDirection","ControllerPalette","Controller","TransformType","DEFAULT_INSTRUMENT_MODULATORS","default"].indexOf(p)<0&&(function(V){u.d(a,V,function(){return E[V]})})(p);var F=u("./src/types/presetData.ts");for(var p in F)["GeneratorType","DEFAULT_GENERATOR_VALUES","ControllerType","ControllerPolarity","ControllerDirection","ControllerPalette","Controller","TransformType","DEFAULT_INSTRUMENT_MODULATORS","default"].indexOf(p)<0&&(function(V){u.d(a,V,function(){return F[V]})})(p);var $=u("./src/types/sample.ts");u.d(a,"SampleType",function(){return $.SampleType});var k=u("./src/types/zone.ts");for(var p in k)["GeneratorType","DEFAULT_GENERATOR_VALUES","ControllerType","ControllerPolarity","ControllerDirection","ControllerPalette","Controller","TransformType","DEFAULT_INSTRUMENT_MODULATORS","SampleType","default"].indexOf(p)<0&&(function(V){u.d(a,V,function(){return k[V]})})(p)},"./src/types/instrument.ts":function(o,a){},"./src/types/key.ts":function(o,a){},"./src/types/metaData.ts":function(o,a){},"./src/types/modulator.ts":function(o,a,u){u.r(a),u.d(a,"ControllerType",function(){return l}),u.d(a,"ControllerPolarity",function(){return p}),u.d(a,"ControllerDirection",function(){return f}),u.d(a,"ControllerPalette",function(){return d}),u.d(a,"Controller",function(){return g}),u.d(a,"TransformType",function(){return b}),u.d(a,"DEFAULT_INSTRUMENT_MODULATORS",function(){return E});var l,p,f,d,g,b,S=u("./src/types/generator.ts");(function(F){F[F.Linear=0]="Linear",F[F.Concave=1]="Concave",F[F.Convex=2]="Convex",F[F.Switch=3]="Switch"})(l||(l={})),(function(F){F[F.Unipolar=0]="Unipolar",F[F.Bipolar=1]="Bipolar"})(p||(p={})),(function(F){F[F.Increasing=0]="Increasing",F[F.Decreasing=1]="Decreasing"})(f||(f={})),(function(F){F[F.GeneralController=0]="GeneralController",F[F.MidiController=1]="MidiController"})(d||(d={})),(function(F){F[F.NoController=0]="NoController",F[F.NoteOnVelocity=2]="NoteOnVelocity",F[F.NoteOnKeyNumber=3]="NoteOnKeyNumber",F[F.PolyPressure=10]="PolyPressure",F[F.ChannelPressure=13]="ChannelPressure",F[F.PitchWheel=14]="PitchWheel",F[F.PitchWheelSensitivity=16]="PitchWheelSensitivity",F[F.Link=127]="Link"})(g||(g={})),(function(F){F[F.Linear=0]="Linear",F[F.Absolute=2]="Absolute"})(b||(b={}));var E=[{id:S.GeneratorType.InitialAttenuation,source:{type:l.Concave,polarity:p.Unipolar,direction:f.Decreasing,palette:d.GeneralController,index:g.NoteOnVelocity},value:960,valueSource:{type:l.Linear,polarity:p.Unipolar,direction:f.Increasing,palette:d.GeneralController,index:g.NoController},transform:b.Linear},{id:S.GeneratorType.InitialFilterFc,source:{type:l.Linear,polarity:p.Unipolar,direction:f.Decreasing,palette:d.GeneralController,index:g.NoteOnVelocity},value:-2400,valueSource:{type:l.Linear,polarity:p.Unipolar,direction:f.Increasing,palette:d.GeneralController,index:g.NoController},transform:b.Linear},{id:S.GeneratorType.VibLFOToPitch,source:{type:l.Linear,polarity:p.Unipolar,direction:f.Increasing,palette:d.GeneralController,index:g.ChannelPressure},value:50,valueSource:{type:l.Linear,polarity:p.Unipolar,direction:f.Increasing,palette:d.GeneralController,index:g.NoController},transform:b.Linear},{id:S.GeneratorType.VibLFOToPitch,source:{type:l.Linear,polarity:p.Unipolar,direction:f.Increasing,palette:d.MidiController,index:1},value:50,valueSource:{type:l.Linear,polarity:p.Unipolar,direction:f.Increasing,palette:d.GeneralController,index:g.NoController},transform:b.Linear},{id:S.GeneratorType.InitialAttenuation,source:{type:l.Concave,polarity:p.Unipolar,direction:f.Decreasing,palette:d.MidiController,index:7},value:960,valueSource:{type:l.Linear,polarity:p.Unipolar,direction:f.Increasing,palette:d.GeneralController,index:g.NoController},transform:b.Linear},{id:S.GeneratorType.InitialAttenuation,source:{type:l.Linear,polarity:p.Bipolar,direction:f.Increasing,palette:d.MidiController,index:10},value:1e3,valueSource:{type:l.Linear,polarity:p.Unipolar,direction:f.Increasing,palette:d.GeneralController,index:g.NoController},transform:b.Linear},{id:S.GeneratorType.InitialAttenuation,source:{type:l.Concave,polarity:p.Unipolar,direction:f.Decreasing,palette:d.MidiController,index:11},value:960,valueSource:{type:l.Linear,polarity:p.Unipolar,direction:f.Increasing,palette:d.GeneralController,index:g.NoController},transform:b.Linear},{id:S.GeneratorType.ReverbEffectsSend,source:{type:l.Linear,polarity:p.Unipolar,direction:f.Increasing,palette:d.MidiController,index:91},value:200,valueSource:{type:l.Linear,polarity:p.Unipolar,direction:f.Increasing,palette:d.GeneralController,index:g.NoController},transform:b.Linear},{id:S.GeneratorType.ChorusEffectsSend,source:{type:l.Linear,polarity:p.Unipolar,direction:f.Increasing,palette:d.MidiController,index:93},value:200,valueSource:{type:l.Linear,polarity:p.Unipolar,direction:f.Increasing,palette:d.GeneralController,index:g.NoController},transform:b.Linear},{id:S.GeneratorType.CoarseTune,source:{type:l.Linear,polarity:p.Bipolar,direction:f.Increasing,palette:d.GeneralController,index:g.PitchWheel},value:12700,valueSource:{type:l.Linear,polarity:p.Unipolar,direction:f.Increasing,palette:d.GeneralController,index:g.PitchWheelSensitivity},transform:b.Linear}]},"./src/types/preset.ts":function(o,a){},"./src/types/presetData.ts":function(o,a){},"./src/types/sample.ts":function(o,a,u){var l;u.r(a),u.d(a,"SampleType",function(){return l}),(function(p){p[p.EOS=0]="EOS",p[p.Mono=1]="Mono",p[p.Right=2]="Right",p[p.Left=4]="Left",p[p.Linked=8]="Linked",p[p.RomMono=32769]="RomMono",p[p.RomRight=32770]="RomRight",p[p.RomLeft=32772]="RomLeft",p[p.RomLinked=32776]="RomLinked"})(l||(l={}))},"./src/types/zone.ts":function(o,a){},"./src/utils/buffer.ts":function(o,a,u){u.r(a),u.d(a,"getStringFromBuffer",function(){return l});var l=function(p){return new TextDecoder("utf8").decode(p).split(/\0/)[0].trim()}},"./src/utils/index.ts":function(o,a,u){u.r(a);var l=u("./src/utils/buffer.ts");u.d(a,"getStringFromBuffer",function(){return l.getStringFromBuffer});var p=u("./src/utils/memoize.ts");u.d(a,"memoize",function(){return p.memoize})},"./src/utils/memoize.ts":function(o,a,u){u.r(a),u.d(a,"memoize",function(){return l});var l=function(p){var f={};return function(){for(var d=arguments.length,g=new Array(d),b=0;b<d;b++)g[b]=arguments[b];var S=JSON.stringify(g);if(S in f)return f[S];var E=p.apply(void 0,g);return f[S]=E,E}}}})})})(SoundFont2)),SoundFont2.exports}var SoundFont2Exports=requireSoundFont2();const m=e=>Math.pow(2,e/1200),Q=e=>e/1e3,G=(e,t)=>{const o=Math.pow(10,t);return Math.round(e*o)/o};typeof AudioParam<"u"&&(AudioParam.prototype.dahdsr=function(e,t,o,a,u,l,p,f,d){u=Math.max(G(u,4),.001),p=Math.max(G(p,4),.001),d=G(d,4),t=Math.max(t,.001);let g=e;return this.setValueAtTime(t,g),this.setValueAtTime(t,g+=a),this.exponentialRampToValueAtTime(o,g+=u),this.setValueAtTime(o,g+=l),this.exponentialRampToValueAtTime(Math.max(f*o,.001),g+=p),(b,S)=>{this.cancelAndHoldAtTime(b);const E=Math.max(S??t,.001);this.exponentialRampToValueAtTime(E,b+d)}});const T={0:"startAddrOffset",1:"endAddrOffset",2:"startloopAddrsOffset",3:"endloopAddrsOffset",4:"startAddrsCoarseOffset",5:"modLfoToPitch",6:"vibLfoToPitch",7:"modEnvToPitch",8:"initialFilterFc",9:"initialFilterQ",10:"modLfoToFilterFc",11:"modEnvToFilterFc",12:"endAddrsCoarseOffset",13:"modLfoToVolume",14:"unused1",15:"chorusEffectsSend",16:"reverbEffectsSend",17:"pan",18:"unused2",19:"unused3",20:"unused4",21:"delayModLFO",22:"freqModLFO",23:"delayVibLFO",24:"freqVibLFO",25:"delayModEnv",26:"attackModEnv",27:"holdModEnv",28:"decayModEnv",29:"sustainModEnv",30:"releaseModEnv",31:"keyNumToModEnvHold",32:"keyNumToModEnvDecay",33:"delayVolEnv",34:"attackVolEnv",35:"holdVolEnv",36:"decayVolEnv",37:"sustainVolEnv",38:"releaseVolEnv",39:"keyNumToVolEnvHold",40:"keyNumToVolEnvDecay",41:"instrument",42:"reserved1",43:"keyRange",44:"velRange",45:"startloopAddrsCoarseOffset",46:"keyNum",47:"velocity",48:"initialAttenuation",49:"reserved2",50:"endloopAddrsCoarseOffset",51:"coarseTune",52:"fineTune",53:"sampleID",54:"sampleModes",55:"reserved3",56:"scaleTuning",57:"exclusiveClass",58:"overridingRootKey",59:"unused5",60:"endOper"};Object.fromEntries(Object.entries(SoundFont2Exports.DEFAULT_GENERATOR_VALUES).map(([e,t])=>[T[e],t]));const D=(e,t,o,a,u)=>{var l,p,f,d,g,b,S;const E=SoundFont2Exports.DEFAULT_GENERATOR_VALUES[e];if(typeof E!="number")throw new Error(`no default value found for generator with index ${e}`);const F=t.generators[e],$=(p=(l=o.globalZone)==null?void 0:l.generators)==null?void 0:p[e],k=(f=a?.generators)==null?void 0:f[e],B=(g=(d=u.globalZone)==null?void 0:d.generators)==null?void 0:g[e],V=F&&"value"in F?F.value:void 0,U=$&&"value"in $?$.value:void 0,ee=k&&"value"in k?k.value:void 0,j=B&&"value"in B?B.value:void 0,O=(b=V??U)!=null?b:E,q=(S=ee??j)!=null?S:0;return O+q},J=e=>SoundFont2Exports.DEFAULT_GENERATOR_VALUES[e]!==void 0,W=(e,t,o)=>{var a,u,l,p;return Object.fromEntries(Array.from(new Set([Object.keys((u=(a=o.globalZone)==null?void 0:a.generators)!=null?u:{}),Object.keys(t.generators),Object.keys((p=(l=t.instrument.globalZone)==null?void 0:l.generators)!=null?p:{}),Object.keys(e.generators)].flat())).filter(J).map(f=>[T[f],D(parseInt(f),e,t.instrument,t,o)]))};function X(e,t,o){let{time:a=e.currentTime}=o;const{midi:u,start:l,velocity:p=.3,startLoop:f,endLoop:d,sampleRate:g,originalPitch:b,pitchCorrection:S,type:E,sampleModes:F=0,overridingRootKey:$,fineTune:k=0,startloopAddrsOffset:B=0,startloopAddrsCoarseOffset:V=0,endloopAddrsOffset:U=0,endloopAddrsCoarseOffset:ee=0,delayVolEnv:j=-12e3,attackVolEnv:O=-12e3,holdVolEnv:q=-12e3,decayVolEnv:te=-12e3,sustainVolEnv:re=0,releaseVolEnv:de=-12e3,pan:ie=0,...me}=o,pe=100*($!==void 0&&$!==-1?$:b)+S-k,le=u*100-pe,he=1*Math.pow(2,le/1200);t.playbackRate.value=he;const Ae=f+B+V*32768,ye=d+U+ee*32768;ye>Ae&&F===1?(t.loopStart=Ae/g,t.loopEnd=ye/g,t.loop=!0):F===3&&console.warn("unimplemented sampleMode 3 (play till end on note off)"),Object.keys(me).filter(We=>!["name","instrument","keyRange","sampleID","end"].includes(We)).length;const Me=e.createGain(),ge=[a,0,p,m(j),m(O),m(q),m(te),re>=960?0:1-Q(re),m(de)],Le=Me.gain.dahdsr(...ge),Xe=e.createStereoPanner();return Xe.pan.value=ie/1e3,Me.connect(Xe),t.connect(Me),Xe.connect(e.destination),t.start(a),(We=e.currentTime)=>{t.stop(We+m(de)),Le(We)}}function Y(e,t,o={}){const{header:a,data:u}=t,l=new Float32Array(u.length);for(let d=0;d<u.length;d++)l[d]=u[d]/32768;const p=e.createBuffer(1,l.length,a.sampleRate);p.getChannelData(0).set(l);const f=e.createBufferSource();return f.buffer=p,o={...a,...o},X(e,f,o)}const C=(e,t)=>!e.keyRange||e.keyRange.lo<=t&&t<=e.keyRange.hi,x=(e,t)=>e.zones.filter(o=>C(o,t)&&o.instrument).map(o=>o.instrument.zones.filter(a=>C(a,t)).map(a=>{const u=W(a,o,e);return{...a,mergedGenerators:u}})).flat(),ce=(e,t,o,a=e.currentTime)=>{const u=x(t,o).map(l=>Y(e,l.sample,{...l.mergedGenerators,midi:o,time:a}));return(l=e.currentTime)=>{u.forEach(p=>p(l))}};Pattern$1.prototype.soundfont=function(e,t=0){return this.onTrigger((o,a,u,l)=>{const p=getAudioContext(),f=getPlayableNoteValue(o),d=e.presets[t%e.presets.length],g=l,b=[p,d,noteToMidi$1(f),g];ce(...b)(g+o.duration)})};let latestOptions,hydra;async function initHydra(e={}){if(latestOptions&&JSON.stringify(latestOptions)!==JSON.stringify(e)&&document.getElementById("hydra-canvas")?.remove(),latestOptions=e,!document.getElementById("hydra-canvas")){const{src:t="https://unpkg.com/hydra-synth",feedStrudel:o=!1,contextType:a="webgl",pixelRatio:u=1,pixelated:l=!0,...p}={detectAudio:!1,...e},{canvas:f}=getDrawContext("hydra-canvas",{contextType:a,pixelRatio:u,pixelated:l});if(p.canvas=f,await import(t),hydra=new Hydra(p),o){const{canvas:d}=getDrawContext();d.style.display="none",hydra.synth.s0.init({src:d})}}return hydra}function clearHydra(){hydra&&hydra.hush(),globalThis.s0?.clear(),document.getElementById("hydra-canvas")?.remove(),globalThis.speed=speed,globalThis.shape=shape}const H=e=>()=>reify(e).queryArc(getTime(),getTime())[0].value,App$2={};App$2.last_eval_error="",App$2.handle_eval_error=e=>{App$2.has_error=!0,App$2.last_eval_error=e?.message||`${e}`,typeof App$2.set_status=="function"?App$2.set_status(App$2.last_eval_error):console.error("Strudel evaluation error",App$2.last_eval_error)};const{evaluate,scheduler}=webaudioRepl({transpiler,onEvalError:e=>{App$2.set_song_context(song_name),App$2.handle_eval_error(e)}});App$2.app_name="Slide",App$2.song_query_key="song",App$2.cpm_query_key="cpm",App$2.current_song="",App$2.events_started=!1,App$2.audio_started=!1,App$2.fetch_in_flight=!1,App$2.status_watch_cancelled=!1,App$2.default_cpm=60,App$2.tempo_cpm=App$2.default_cpm,App$2.tempo_storage_key="slide.tempoCpm",App$2.tempo_debounce_timer=void 0,App$2.is_playing=!1,App$2.color_index=0,App$2.color_cycle_timer=void 0,App$2.do_partial_updates=!1,App$2.endpoint_storage_key="slide.statusEndpoint",App$2.status_endpoint="/status",App$2.code_scroll_frame=void 0,App$2.code_scroll_last_ts=0,App$2.code_scroll_direction=1,App$2.code_scroll_active=!1,App$2.code_scroll_speed_px_per_second=80,App$2.code_scroll_pause_until=0,App$2.code_scroll_wheel_pause_ms=350,App$2.code_scroll_song_pause_ms=1.2*1e3,App$2.code_scroll_pending_delay_ms=0,App$2.fetch_delay_seconds=5,App$2.fetch_delay_storage_key="slide.fetchDelaySeconds",App$2.cycle_colors=["#94dd94","rgb(197, 187, 106)","rgb(222, 143, 143)","rgb(127, 155, 210)"],App$2.clear_status_watch=(e=!0)=>{App$2.fetch_timer&&(console.info("Interval cleared."),clearInterval(App$2.fetch_timer),App$2.fetch_timer=void 0,e&&(App$2.status_watch_cancelled=!0))},App$2.apply_color=e=>{let t=DOM.el("#code-input"),o=DOM.el("#volume-value"),a=DOM.el("#volume-slider"),u=DOM.el("#tempo-value"),l=DOM.el("#tempo-slider"),p=DOM.el("#status"),f=DOM.el("#image"),d=DOM.el("#scope-visualizer"),g=DOM.el("#scope-canvas");t&&(t.style.color=e),o&&(o.style.color=e),a&&(a.style.accentColor=e),u&&(u.style.color=e),l&&(l.style.accentColor=e),p&&(p.style.color=e),f&&(f.style.filter=`drop-shadow(0 0 0.15rem ${e})`),d&&(d.style.borderColor=App$2.scope_border_color,d.style.boxShadow=`0 0 0.35rem ${App$2.scope_border_color}33`),g&&(g.style.boxShadow=`inset 0 0 0.4rem ${App$2.scope_border_color}1a`)},App$2.start_color_cycle=()=>{App$2.color_cycle_timer||(App$2.is_playing=!0,App$2.color_index=0,App$2.apply_color(App$2.cycle_colors[0],0),App$2.color_cycle_timer=setInterval(()=>{App$2.color_index=(App$2.color_index+1)%App$2.cycle_colors.length,App$2.apply_color(App$2.cycle_colors[App$2.color_index],App$2.color_index)},3*1e3))},App$2.stop_color_cycle=()=>{App$2.color_cycle_timer&&(clearInterval(App$2.color_cycle_timer),App$2.color_cycle_timer=void 0),App$2.is_playing=!1,App$2.color_index=0;let e=App$2.cycle_colors[0],t=DOM.el("#code-input"),o=DOM.el("#volume-value"),a=DOM.el("#volume-slider"),u=DOM.el("#tempo-value"),l=DOM.el("#tempo-slider"),p=DOM.el("#status"),f=DOM.el("#image");t&&(t.style.color=e),o&&(o.style.color=e),a&&(a.style.accentColor=e),u&&(u.style.color=e),l&&(l.style.accentColor=e),p&&(p.style.color=e),f&&(f.style.filter="")},App$2.strudel_init=async()=>{if(App$2.audio_started){console.info("Audio already initialized");return}console.info("Initializing Audio...");try{console.info("Loading scope..."),await App$2.ensure_scope(),console.info("Scope loaded"),console.info("Initializing audio context..."),await initAudio(),miniAllStrings();const e="https://raw.githubusercontent.com/felixroos/dough-samples/main";console.info("Loading samples and soundfonts..."),await Promise.all([registerSynthSounds(),registerSoundfonts(),samples("github:tidalcycles/dirt-samples"),samples(`${e}/tidal-drum-machines.json`)]),App$2.audio_started=!0,App$2.apply_volume(),App$2.try_start_scope_visualizer(),console.info("Audio Ready."),App$2.code_to_play&&(App$2.play_action(App$2.code_to_play),App$2.code_to_play="")}catch(e){throw console.error("Audio Failed:",e),e}},App$2.playing=e=>{let t="Playing 🥁";App$2.current_song&&(t=`Playing: ${App$2.underspace(App$2.current_song)}`),e&&(t=`${t} - ${e}`.trim()),App$2.set_status(t)},App$2.set_tempo=()=>{try{scheduler.setCps(App$2.tempo_cpm/60)}catch(e){console.debug("Tempo will be applied when audio starts",e)}},App$2.strudel_update=async e=>{if(!App$2.audio_started){console.warn("Audio not started yet. Call strudel_init() first.");return}console.info("Updating 💨"),await App$2.ensure_scope(),App$2.set_tempo();const t=await App$2.run_eval(e);if(t.ok){App$2.playing();return}App$2.do_partial_updates&&await App$2.apply_partial_update(e)||App$2.report_eval_failure(t.error)},App$2.clear_draw_context=()=>{try{cleanupDraw(!0)}catch(e){console.warn("Failed to clear draw context",e)}},App$2.strudel_stop=()=>{App$2.stop_color_cycle(),App$2.clear_draw_context(),evaluate("hush"),App$2.clean_canvas()},App$2.fetch_status_code=async()=>{const e=await fetch(App$2.status_endpoint,{cache:"no-store"});if(!e.ok)throw new Error(`Status endpoint returned ${e.status}`);return e.text()},App$2.stop_status_watch=()=>{App$2.clear_status_watch()},App$2.strudel_watch_status=e=>{if(Number.isFinite(e)&&e>0&&(App$2.fetch_delay_seconds=e),!App$2.fetch_delay_seconds||App$2.fetch_delay_seconds<=0){console.error("Provide a fetch interval in seconds greater than zero");return}App$2.status_watch_cancelled=!1;const t=App$2.fetch_delay_seconds*1e3,o=async()=>{if(console.info("Fetching status..."),!App$2.fetch_in_flight){App$2.fetch_in_flight=!0;try{const u=(await App$2.fetch_status_code()).trim();if(!u)return;if(App$2.status_watch_cancelled){console.info("Status watch was cancelled, skipping play action");return}App$2.set_song_context(),App$2.audio_started?await App$2.play_action(u):App$2.code_to_play=u}catch(a){console.error("Failed to update Strudel status",a)}finally{App$2.fetch_in_flight=!1}}};App$2.clear_status_watch(!1),o(),App$2.fetch_timer=setInterval(()=>{o()},t),console.info("Interval started.")},App$2.set_status=e=>{let t=DOM.el("#status");t.innerText=e},App$2.reset_eval_state=()=>{App$2.has_error=!1},App$2.report_eval_failure=e=>{const t=e?.message||App$2.last_eval_error||"Failed to evaluate Strudel code";App$2.last_eval_error=t,App$2.set_status(t)},App$2.run_eval=async e=>{App$2.reset_eval_state(),e=App$2.filter_code(e),App$2.set_input(e);try{await evaluate(e)}catch(t){return{ok:!1,error:t}}return App$2.has_error?{ok:!1,error:new Error(App$2.last_eval_error||"Evaluation error")}:{ok:!0}},App$2.normalize_code=(e="")=>e.replace(/\r\n/g,`
`).trim(),App$2.strip_set_cpm=e=>e.split(`
`).filter(t=>!t.trim().match(/^setCpm\s*\(/)).join(`
`),App$2.split_by_newlines=e=>{let t="",o=null,a=0,u=0,l=0;const p=[],f=()=>{const d=t.trim();d&&p.push(d),t=""};for(let d=0;d<e.length;d+=1){const g=e[d],b=e[d-1];if(t+=g,o){g===o&&b!=="\\"&&(o=null);continue}if(g==='"'||g==="'"||g==="`"){o=g;continue}if(g==="("?a+=1:g===")"?a=Math.max(0,a-1):g==="["?u+=1:g==="]"?u=Math.max(0,u-1):g==="{"?l+=1:g==="}"&&(l=Math.max(0,l-1)),g!==`
`)continue;const S=e[d+1];a===0&&u===0&&l===0&&!(S===" "||S==="	")&&!(S===`
`)&&f()}return f(),p},App$2.segment_code=e=>{const t=App$2.normalize_code(e);if(!t)return[];const o=t.split(/\n{2,}/g).map(u=>u.trim()).filter(Boolean),a=[];for(const u of o){if(!u.includes(`
`)){a.push(u);continue}const l=App$2.split_by_newlines(u);l.length?a.push(...l):a.push(u)}if(a.length<=1&&t.includes(`
`)){const u=t.split(/\n+/g).map(l=>l.trim()).filter(Boolean);if(u.length>1)return u}return a},App$2.apply_partial_update=async e=>{const t=App$2.segment_code(e);if(!t.length)return!1;const o=[];let a=0;for(const l of t){const p=await App$2.run_eval(l);if(p.ok){o.push(l);continue}a+=1,console.warn("Skipping segment due to error",p.error)}if(!o.length)return!1;const u=o.join(`

`);return App$2.set_input(u),a>0?App$2.playing(`Skipped ${a} segment(s)`):App$2.playing(),!0},App$2.ensure_strudel_ready=async()=>window.strudel_init?(await window.strudel_init(),!0):(App$2.set_status("Bundle not loaded. Check console for errors"),console.error("strudel.bundle.js is missing or failed to load"),!1),App$2.restart_code_scroll=()=>{let e=App$2.get_input();e&&(e.scrollTop=0),App$2.code_scroll_active&&(App$2.defer_code_scroll(App$2.code_scroll_song_pause_ms),App$2.reset_code_scroll_for_content(App$2.code_scroll_song_pause_ms))},App$2.play_action=async(e="",t=!1)=>{if(await App$2.ensure_strudel_ready()&&(e||(e=App$2.get_input().value),!!e&&!(!t&&e===App$2.last_code))){App$2.restart_code_scroll(),App$2.last_code=e,App$2.clear_draw_context(),App$2.start_color_cycle(),App$2.clean_canvas();try{await App$2.strudel_update(e)}catch(a){App$2.set_status(`Error: ${a.message}`)}}},App$2.stop_action=()=>{if(!App$2.strudel_stop){App$2.set_status("Bundle not loaded. Cannot stop audio");return}App$2.strudel_stop_status_watch&&App$2.strudel_stop_status_watch(),App$2.strudel_stop(),App$2.stop_code_scroll(),App$2.last_code=null,App$2.clear_draw_context(),App$2.set_status("Stopped"),App$2.set_song_context()},App$2.start_status_watch=()=>{if(!App$2.strudel_watch_status){console.warn("Polling function missing. Did strudel bundle load?");return}let e=window.App&&window.App.statusPollSeconds;if(!Number.isFinite(e)||e<=0){let t=window.App&&window.App.statusPollMinutes;Number.isFinite(t)&&t>0&&(e=t*60)}App$2.strudel_watch_status(e)},App$2.open_about_modal=()=>{let e=DOM.el("#about-modal");e&&e.classList.add("active")},App$2.close_about_modal=()=>{let e=DOM.el("#about-modal");e&&e.classList.remove("active")},App$2.open_endpoint_modal=()=>{let e=DOM.el("#endpoint-modal");if(!e)return;let t=DOM.el("#endpoint-delay-select");t&&(t.value=App$2.fetch_delay_seconds),e.classList.add("active")},App$2.close_endpoint_modal=()=>{let e=DOM.el("#endpoint-modal");e&&e.classList.remove("active")},App$2.truncate_path=(e,t=20)=>e.length<=t?e:e.substring(0,t)+"...",App$2.start_auto_with_endpoint=async e=>{if(App$2.close_endpoint_modal(),!e||!e.trim()){App$2.set_status("Invalid endpoint");return}if(App$2.status_endpoint=e.trim(),localStorage.setItem(App$2.endpoint_storage_key,App$2.status_endpoint),!await App$2.ensure_strudel_ready())return;App$2.start_status_watch();let o=App$2.truncate_path(App$2.status_endpoint);App$2.set_status(`Auto mode running (${o})`)},App$2.load_endpoint_from_storage=()=>{let e=localStorage.getItem(App$2.endpoint_storage_key);e&&(App$2.status_endpoint=e)},App$2.persist_fetch_delay=()=>{try{localStorage.setItem(App$2.fetch_delay_storage_key,`${App$2.fetch_delay_seconds}`)}catch(e){console.warn("Failed to persist fetch delay",e)}},App$2.load_fetch_delay_from_storage=()=>{try{let e=localStorage.getItem(App$2.fetch_delay_storage_key);if(e){let t=parseInt(e,10);Number.isFinite(t)&&t>0&&(App$2.fetch_delay_seconds=t)}}catch(e){console.warn("Failed to load fetch delay",e)}},App$2.start_events=()=>{if(App$2.events_started)return;App$2.events_started=!0,DOM.ev("#btn-play","click",()=>{App$2.stop_status_watch();let f=App$2.get_input(),d=f?f.value:"";App$2.play_action(d,!0)}),DOM.ev("#btn-auto","click",()=>{App$2.open_endpoint_modal()}),DOM.ev("#btn-stop","click",()=>{App$2.stop_status_watch(),App$2.stop_action()}),DOM.ev("#btn-songs","click",()=>{App$2.stop_status_watch(),App$2.open_songs_modal()}),DOM.ev("#modal-close","click",()=>{App$2.close_songs_modal()}),DOM.ev("#songs-modal","click",f=>{f.target.id==="songs-modal"&&App$2.close_songs_modal()});let e=DOM.el("#image");e&&DOM.ev(e,"click",()=>{App$2.open_about_modal()}),DOM.ev("#about-close","click",()=>{App$2.close_about_modal()}),DOM.ev("#about-modal","click",f=>{f.target.id==="about-modal"&&App$2.close_about_modal()});let t=DOM.el("#endpoint-close");t&&DOM.ev(t,"click",()=>{App$2.close_endpoint_modal()});let o=DOM.el("#endpoint-modal");o&&DOM.ev(o,"click",f=>{f.target.id==="endpoint-modal"&&App$2.close_endpoint_modal()});let a=DOM.el("#endpoint-start");a&&DOM.ev(a,"click",()=>{let f=DOM.el("#endpoint-input");f&&App$2.start_auto_with_endpoint(f.value)});let u=DOM.el("#endpoint-default");u&&DOM.ev(u,"click",()=>{App$2.start_auto_with_endpoint("/status")});let l=DOM.el("#endpoint-input");l&&DOM.ev(l,"keydown",f=>{if(f.key==="Enter"){f.preventDefault();let d=DOM.el("#endpoint-input");d&&App$2.start_auto_with_endpoint(d.value)}});let p=DOM.el("#endpoint-delay-select");p&&DOM.ev(p,"change",f=>{App$2.fetch_delay_seconds=parseInt(f.target.value,10),App$2.persist_fetch_delay(),App$2.fetch_timer&&App$2.strudel_watch_status()}),App$2.init_volume_controls(),App$2.init_tempo_controls(),App$2.init_code_input_controls(),App$2.init_scope_checkbox(),App$2.setup_scope_canvas(),DOM.ev(window,"resize",()=>{App$2.handle_scope_resize()}),App$2.load_endpoint_from_storage(),App$2.load_fetch_delay_from_storage(),App$2.load_song_from_query()},App$2.set_title=e=>{if(e){document.title=`${App$2.app_name} - ${e}`;return}document.title=App$2.app_name},App$2.update_song_query_param=(e="")=>{if(!window?.history?.replaceState)return;let t=new URL(window.location.href);e?t.searchParams.set(App$2.song_query_key,e):t.searchParams.delete(App$2.song_query_key),e?t.searchParams.set(App$2.cpm_query_key,`${App$2.tempo_cpm}`):t.searchParams.delete(App$2.cpm_query_key),window.history.replaceState({},document.title,`${t.pathname}${t.search}${t.hash}`)},App$2.set_song_context=(e="")=>{App$2.current_song=e||"",App$2.set_title(App$2.underspace(App$2.current_song)),App$2.update_song_query_param(App$2.current_song)},App$2.load_song_from_query=async()=>{if(!window||!window.location)return;let e=new URLSearchParams(window.location.search),t=e.get(App$2.song_query_key),o=e.get(App$2.cpm_query_key);if(o){let a=parseInt(o,10);Number.isFinite(a)&&(App$2.update_tempo(a),App$2.set_tempo())}if(t)try{App$2.set_status(`Loading ${t}...`);let a=await App$2.fetch_song_content(t);App$2.restart_code_scroll(),App$2.set_input(a),App$2.set_song_context(t),App$2.code_to_play=a,App$2.set_status(`Loaded: ${App$2.underspace(t)}`)}catch(a){App$2.set_status(`Failed to load song: ${a.message}`),console.error("Failed to load song:",a)}},App$2.underspace=e=>e.replace(/_+/g," ").trim(),App$2.clean_canvas=()=>{},App$2.clean_canvas=()=>{let e=document.body,t=Array.from(e.children),o=["script","style"],a=["overlay","main"];for(let u of t){let l=u.tagName.toLowerCase();o.includes(l)||a.includes(u.id)||e.removeChild(u)}},window.strudel_init=App$2.strudel_init,window.strudel_update=App$2.strudel_update,window.strudel_stop=App$2.strudel_stop,window.strudel_watch_status=App$2.strudel_watch_status,window.strudel_stop_status_watch=App$2.stop_status_watch,window.initHydra=initHydra,window.clearHydra=clearHydra,window.H=H,window.App=App$2,App.filter_code=e=>(e=e.replace(/setcps\s*\([^)]*\)/gi,""),e=e.replace(/setbpm\s*\([^)]*\)/gi,""),e=e.replace(/setcpm\s*\([^)]*\)/gi,""),e=e.replace(/\._?cpm\s*\([^)]*\)/gi,""),e=e.replace(/\n\s*\n\s*\n+/g,`

`),e.trim()),App.get_input=()=>DOM.el("#code-input"),App.defer_code_scroll=e=>{if(!Number.isFinite(e)||e<=0){App.code_scroll_pending_delay_ms=0;return}App.code_scroll_pending_delay_ms=e},App.reset_code_scroll_for_content=(e={})=>{let t=0,o=e.scroll_delay_ms??App.code_scroll_song_pause_ms;if(App.code_scroll_active&&(Number.isFinite(App.code_scroll_pending_delay_ms)&&App.code_scroll_pending_delay_ms>0?t=App.code_scroll_pending_delay_ms:Number.isFinite(o)&&o>0&&(t=o)),App.code_scroll_pending_delay_ms=0,App.code_scroll_direction=1,App.code_scroll_last_ts=0,t<=0||typeof window>"u"){App.code_scroll_pause_until=0;return}window.performance?.now?App.code_scroll_pause_until=window.performance.now()+t:App.code_scroll_pause_until=t},App.set_input=e=>{const t=App.get_input();t&&(t.value=e,t.scrollTop=0,App.reset_code_scroll_for_content())},App.set_code_scroll_button_active=e=>{let t=DOM.el("#code-input-scroll");if(t){if(e){t.classList.add("active");return}t.classList.remove("active")}},App.code_scroll_tick=e=>{if(!App.code_scroll_active){App.code_scroll_frame=void 0;return}let t=App.get_input();if(!t){App.stop_code_scroll();return}if(App.code_scroll_last_ts||(App.code_scroll_last_ts=e),App.code_scroll_pause_until&&e<App.code_scroll_pause_until){App.code_scroll_last_ts=e,App.code_scroll_frame=window.requestAnimationFrame(App.code_scroll_tick);return}App.code_scroll_pause_until=0;let o=e-App.code_scroll_last_ts;App.code_scroll_last_ts=e;let a=App.code_scroll_speed_px_per_second*o/1e3,u=t.scrollTop+a*App.code_scroll_direction;t.scrollTop=u;let l=Math.max(0,t.scrollHeight-t.clientHeight);if(l<=0){App.stop_code_scroll();return}t.scrollTop>=l?(t.scrollTop=l,App.code_scroll_direction=-1):t.scrollTop<=0&&(t.scrollTop=0,App.code_scroll_direction=1),App.code_scroll_frame=window.requestAnimationFrame(App.code_scroll_tick)},App.start_code_scroll=()=>{if(App.code_scroll_active)return;let e=App.get_input();!e||Math.max(0,e.scrollHeight-e.clientHeight)<=0||(App.code_scroll_active=!0,App.code_scroll_direction=1,App.code_scroll_last_ts=0,App.code_scroll_pause_until=0,App.set_code_scroll_button_active(!0),App.code_scroll_frame=window.requestAnimationFrame(App.code_scroll_tick))},App.stop_code_scroll=()=>{!App.code_scroll_active&&!App.code_scroll_frame||(App.code_scroll_active=!1,App.code_scroll_direction=1,App.code_scroll_last_ts=0,App.code_scroll_pause_until=0,App.code_scroll_frame&&(window.cancelAnimationFrame(App.code_scroll_frame),App.code_scroll_frame=void 0),App.set_code_scroll_button_active(!1))},App.init_code_input_controls=()=>{let e=DOM.el("#code-input-wrapper"),t=App.get_input(),o=DOM.el("#code-input-scroll"),a=DOM.el("#code-input-max"),u=DOM.el("#code-input-top"),l=DOM.el("#code-input-bottom");if(u&&DOM.ev(u,"click",p=>{p.preventDefault(),t.scrollTop=0,App.reset_code_scroll_for_content()}),l&&DOM.ev(l,"click",p=>{p.preventDefault(),t.scrollTop=t.scrollHeight,App.reset_code_scroll_for_content()}),o&&DOM.ev(o,"click",p=>{if(p.preventDefault(),App.code_scroll_active){App.stop_code_scroll();return}App.start_code_scroll()}),a&&DOM.ev(a,"click",p=>{App.toggle_max()}),t){if(DOM.ev(t,"pointerdown",p=>{if(!App.code_scroll_active)return;let d=p.target.getBoundingClientRect();p.clientX>d.right-20&&p.clientY>d.bottom-20||App.stop_code_scroll()}),e){let p=DOM.el("#resize-handle");if(p){let f=!1;DOM.ev(p,"mousedown",d=>{d.preventDefault(),f=!0,document.body.style.userSelect="none",document.body.style.cursor="se-resize";let g=DOM.el("#code-input-controls");g&&(g.style.opacity="1",g.style.pointerEvents="auto",g.classList.add("active")),p.style.opacity="1",p.style.pointerEvents="auto",p.classList.add("active");let b=d.clientX,S=d.clientY,E=e.offsetWidth,F=e.offsetHeight,$=B=>{if(!f)return;let V=E+(B.clientX-b),U=F+(B.clientY-S),ee=getComputedStyle(document.documentElement),j=parseInt(ee.getPropertyValue("--input_min_width")),O=parseInt(ee.getPropertyValue("--input_min_height")),q=parseInt(ee.getPropertyValue("--input_max_height"));V=Math.max(j,V),U=Math.max(O,Math.min(q,U)),e.style.width=`${V}px`,e.style.height=`${U}px`},k=()=>{f=!1,document.body.style.userSelect="",document.body.style.cursor="";let B=DOM.el("#code-input-controls");B&&(B.style.opacity="",B.style.pointerEvents="",B.classList.remove("active")),p.style.opacity="",p.style.pointerEvents="",p.classList.remove("active"),document.removeEventListener("mousemove",$),document.removeEventListener("mouseup",k)};document.addEventListener("mousemove",$),document.addEventListener("mouseup",k)}),DOM.ev(p,"dblclick",d=>{App.toggle_max("restore")})}}DOM.ev(t,"wheel",p=>{App.code_scroll_active&&(window.performance?.now?App.code_scroll_pause_until=window.performance.now()+App.code_scroll_wheel_pause_ms:App.code_scroll_pause_until=App.code_scroll_wheel_pause_ms,p.deltaY<0?App.code_scroll_direction=-1:p.deltaY>0&&(App.code_scroll_direction=1))},{passive:!0})}},App.toggle_max=(e="toggle")=>{let t=DOM.el("#code-input-wrapper");if(!t)return;let o=getComputedStyle(document.documentElement),a=parseInt(o.getPropertyValue("--input_height")),u=parseInt(o.getPropertyValue("--input_max_height")),l=parseInt(o.getPropertyValue("--input_max_width")),p=t.offsetHeight,f=t.getBoundingClientRect().width;if(t.style.width=`${l}%`,e==="restore")t.style.height=`${a}px`;else{let d=2,g=DOM.el("#main"),b=window.innerWidth;if(g){let E=getComputedStyle(g),F=parseFloat(E.paddingLeft)||0,$=parseFloat(E.paddingRight)||0,k=g.clientWidth||g.getBoundingClientRect().width;b=Math.max(0,k-F-$)}let S=l/100*b;Math.abs(p-u)>d||Math.abs(f-S)>d?t.style.height=`${u}px`:t.style.height=`${a}px`}},App.volume_percent=100,App.volume_storage_key="slide.volumePercent",App.volume_step=1,App.get_volume_slider=()=>DOM.el("#volume-slider"),App.get_volume_value=()=>DOM.el("#volume-value"),App.read_volume_value=e=>{if(!e)return App.volume_percent;const t=e.valueAsNumber;if(Number.isFinite(t))return t;const o=parseInt(e.value,10);return Number.isFinite(o)?o:App.volume_percent},App.refresh_volume_ui=()=>{const e=App.get_volume_slider(),t=App.get_volume_value();e&&(e.value=`${App.volume_percent}`),t&&(t.innerText=`${App.volume_percent}%`)},App.persist_volume=()=>{if(!(typeof window>"u"))try{window.localStorage?.setItem(App.volume_storage_key,`${App.volume_percent}`)}catch(e){console.warn("Failed to persist volume",e)}},App.load_saved_volume=()=>{if(!(typeof window>"u"))try{const e=window.localStorage?.getItem(App.volume_storage_key);if(e==null)return;const t=Number(e);return Number.isFinite(t)?t:void 0}catch(e){console.warn("Failed to load volume",e);return}},App.apply_volume=()=>{if(App.audio_started)try{const t=getSuperdoughAudioController()?.output?.destinationGain;if(!t){console.warn("Destination gain node missing");return}t.gain.value=App.volume_percent/100}catch(e){console.error("Failed to apply volume",e)}},App.update_volume=e=>{let t=Number(e);Number.isFinite(t)||(t=App.volume_percent),t=Math.min(100,Math.max(0,t)),App.volume_percent=t,App.refresh_volume_ui(),App.persist_volume(),App.apply_volume()},App.init_volume_controls=()=>{const e=App.get_volume_slider(),t=DOM.el("#volume-control"),o=DOM.el("#volume-decrement"),a=DOM.el("#volume-increment");if(!e)return;const u=App.load_saved_volume(),l=App.read_volume_value(e);Number.isFinite(u)?App.volume_percent=u:App.volume_percent=l,App.refresh_volume_ui(),App.persist_volume(),DOM.ev(e,"input",f=>{App.update_volume(App.read_volume_value(f.target))});const p=f=>{App.update_volume(App.volume_percent+f*App.volume_step)};o&&DOM.ev(o,"click",()=>{p(-1)}),a&&DOM.ev(a,"click",()=>{p(1)}),DOM.ev(t,"auxclick",f=>{f.button===1&&App.update_volume(50)}),DOM.ev(t,"wheel",f=>{f.preventDefault();let d=parseInt(e.step,10)||App.volume_step,g=parseInt(e.value,10);f.deltaY<0?e.value=g+d:e.value=g-d,App.update_volume(App.read_volume_value(e))},{passive:!1})},App.tempo_cpm=App.default_cpm,App.tempo_storage_key="slide.tempoCpm",App.tempo_debounce_timer=void 0,App.tempo_commit_delay_ms=500,App.min_tempo=20,App.max_tempo=160,App.tempo_step=5,App.tempo_wheel_commit_timer=void 0,App.tempo_wheel_commit_delay_ms=150,App.schedule_tempo_commit=e=>{if(typeof window>"u"){e();return}App.tempo_debounce_timer&&window.clearTimeout(App.tempo_debounce_timer),App.tempo_debounce_timer=window.setTimeout(()=>{App.tempo_debounce_timer=void 0,e()},App.tempo_commit_delay_ms)},App.schedule_tempo_wheel_commit=()=>{if(typeof window>"u"){App.on_tempo_change(!0,App.tempo_cpm);return}App.tempo_wheel_commit_timer&&window.clearTimeout(App.tempo_wheel_commit_timer),App.tempo_wheel_commit_timer=window.setTimeout(()=>{App.tempo_wheel_commit_timer=void 0,App.on_tempo_change(!0,App.tempo_cpm)},App.tempo_wheel_commit_delay_ms)},App.get_tempo_slider=()=>DOM.el("#tempo-slider"),App.get_tempo_value=()=>DOM.el("#tempo-value"),App.refresh_tempo_ui=()=>{let e=App.get_tempo_slider(),t=App.get_tempo_value();e&&(e.value=`${App.tempo_cpm}`),t&&(t.textContent=`${App.tempo_cpm} cpm`)},App.persist_tempo=()=>{if(!(typeof window>"u"))try{window.localStorage?.setItem(App.tempo_storage_key,`${App.tempo_cpm}`)}catch(e){console.warn("Failed to persist tempo",e)}},App.load_saved_tempo=()=>{if(!(typeof window>"u"))try{let e=window.localStorage?.getItem(App.tempo_storage_key);if(e==null)return;let t=parseInt(e,10);return Number.isFinite(t)?t:void 0}catch(e){console.warn("Failed to load tempo",e);return}},App.update_tempo=e=>{let t=parseInt(e,10);Number.isFinite(t)||(t=App.tempo_cpm),t=Math.round(t/App.tempo_step)*App.tempo_step,t=Math.min(App.max_tempo,Math.max(App.min_tempo,t)),App.tempo_cpm=t,App.refresh_tempo_ui()},App.on_tempo_change=(e=!1,t=void 0)=>{let o=t;o==null&&(o=App.get_tempo_slider()?.value),App.update_tempo(o),e&&App.schedule_tempo_commit(()=>{App.persist_tempo(),App.current_song&&App.update_song_query_param(App.current_song),App.set_tempo()})},App.init_tempo_controls=()=>{let e=App.get_tempo_slider(),t=DOM.el("#tempo-control"),o=DOM.el("#tempo-decrement"),a=DOM.el("#tempo-increment");if(!e)return;let u=App.load_saved_tempo();Number.isFinite(u)&&(App.tempo_cpm=u),App.refresh_tempo_ui(),App.persist_tempo(),DOM.ev(e,"input",p=>{App.update_tempo(p.target.value)}),DOM.ev(t,"auxclick",p=>{p.button===1&&(e.value=App.default_cpm,App.update_tempo(App.default_cpm),App.set_tempo())}),DOM.ev(t,"wheel",p=>{if(p.preventDefault(),!e)return;let f=parseInt(e.step,10);(!Number.isFinite(f)||f<=0)&&(f=App.tempo_step);let d=e.valueAsNumber;if(Number.isFinite(d)||(d=App.tempo_cpm),p.deltaY<0)d+=f;else if(p.deltaY>0)d-=f;else return;App.on_tempo_change(!1,d),App.schedule_tempo_wheel_commit()},{passive:!1}),DOM.ev(t,"change",()=>{App.on_tempo_change(!0)});let l=p=>{let f=App.tempo_cpm+p*App.tempo_step;App.on_tempo_change(!0,f)};o&&DOM.ev(o,"click",()=>{l(-1)}),a&&DOM.ev(a,"click",()=>{l(1)})};function isNamedPitch$6(e){return e!==null&&typeof e=="object"&&"name"in e&&typeof e.name=="string"}function isPitch$6(e){return e!==null&&typeof e=="object"&&"step"in e&&typeof e.step=="number"&&"alt"in e&&typeof e.alt=="number"&&!isNaN(e.step)&&!isNaN(e.alt)}var FIFTHS$6=[0,2,4,-1,1,3,5],STEPS_TO_OCTS$6=FIFTHS$6.map(e=>Math.floor(e*7/12));function coordinates$6(e){const{step:t,alt:o,oct:a,dir:u=1}=e,l=FIFTHS$6[t]+7*o;if(a===void 0)return[u*l];const p=a-STEPS_TO_OCTS$6[t]-4*o;return[u*l,u*p]}var FIFTHS_TO_STEPS$3=[3,0,4,1,5,2,6];function pitch$3(e){const[t,o,a]=e,u=FIFTHS_TO_STEPS$3[unaltered$3(t)],l=Math.floor((t+1)/7);if(o===void 0)return{step:u,alt:l,dir:a};const p=o+4*l+STEPS_TO_OCTS$6[u];return{step:u,alt:l,oct:p,dir:a}}function unaltered$3(e){const t=(e+1)%7;return t<0?7+t:t}var fillStr$9=(e,t)=>Array(Math.abs(t)+1).join(e),NoInterval$5=Object.freeze({empty:!0,name:"",num:NaN,q:"",type:"",step:NaN,alt:NaN,dir:NaN,simple:NaN,semitones:NaN,chroma:NaN,coord:[],oct:NaN}),INTERVAL_TONAL_REGEX$5="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",INTERVAL_SHORTHAND_REGEX$5="(AA|A|P|M|m|d|dd)([-+]?\\d+)",REGEX$c=new RegExp("^"+INTERVAL_TONAL_REGEX$5+"|"+INTERVAL_SHORTHAND_REGEX$5+"$");function tokenizeInterval$5(e){const t=REGEX$c.exec(`${e}`);return t===null?["",""]:t[1]?[t[1],t[2]]:[t[4],t[3]]}var cache$9={};function interval$5(e){return typeof e=="string"?cache$9[e]||(cache$9[e]=parse$9(e)):isPitch$6(e)?interval$5(pitchName$7(e)):isNamedPitch$6(e)?interval$5(e.name):NoInterval$5}var SIZES$6=[0,2,4,5,7,9,11],TYPES$5="PMMPPMM";function parse$9(e){const t=tokenizeInterval$5(e);if(t[0]==="")return NoInterval$5;const o=+t[0],a=t[1],u=(Math.abs(o)-1)%7,l=TYPES$5[u];if(l==="M"&&a==="P")return NoInterval$5;const p=l==="M"?"majorable":"perfectable",f=""+o+a,d=o<0?-1:1,g=o===8||o===-8?o:d*(u+1),b=qToAlt$5(p,a),S=Math.floor((Math.abs(o)-1)/7),E=d*(SIZES$6[u]+b+12*S),F=(d*(SIZES$6[u]+b)%12+12)%12,$=coordinates$6({step:u,alt:b,oct:S,dir:d});return{empty:!1,name:f,num:o,q:a,step:u,alt:b,dir:d,type:p,simple:g,semitones:E,chroma:F,coord:$,oct:S}}function coordToInterval$2(e,t){const[o,a=0]=e,u=o*7+a*12<0,l=t||u?[-o,-a,-1]:[o,a,1];return interval$5(pitch$3(l))}function qToAlt$5(e,t){return t==="M"&&e==="majorable"||t==="P"&&e==="perfectable"?0:t==="m"&&e==="majorable"?-1:/^A+$/.test(t)?t.length:/^d+$/.test(t)?-1*(e==="perfectable"?t.length:t.length+1):0}function pitchName$7(e){const{step:t,alt:o,oct:a=0,dir:u}=e;if(!u)return"";const l=t+1+7*a,p=l===0?t+1:l,f=u<0?"-":"",d=TYPES$5[t]==="M"?"majorable":"perfectable";return f+p+altToQ$5(d,o)}function altToQ$5(e,t){return t===0?e==="majorable"?"M":"P":t===-1&&e==="majorable"?"m":t>0?fillStr$9("A",t):fillStr$9("d",e==="perfectable"?t:t+1)}function isNamedPitch$5(e){return e!==null&&typeof e=="object"&&"name"in e&&typeof e.name=="string"}function isPitch$5(e){return e!==null&&typeof e=="object"&&"step"in e&&typeof e.step=="number"&&"alt"in e&&typeof e.alt=="number"&&!isNaN(e.step)&&!isNaN(e.alt)}var FIFTHS$5=[0,2,4,-1,1,3,5],STEPS_TO_OCTS$5=FIFTHS$5.map(e=>Math.floor(e*7/12));function coordinates$5(e){const{step:t,alt:o,oct:a,dir:u=1}=e,l=FIFTHS$5[t]+7*o;if(a===void 0)return[u*l];const p=a-STEPS_TO_OCTS$5[t]-4*o;return[u*l,u*p]}var FIFTHS_TO_STEPS$2=[3,0,4,1,5,2,6];function pitch$2(e){const[t,o,a]=e,u=FIFTHS_TO_STEPS$2[unaltered$2(t)],l=Math.floor((t+1)/7);if(o===void 0)return{step:u,alt:l,dir:a};const p=o+4*l+STEPS_TO_OCTS$5[u];return{step:u,alt:l,oct:p,dir:a}}function unaltered$2(e){const t=(e+1)%7;return t<0?7+t:t}var fillStr$8=(e,t)=>Array(Math.abs(t)+1).join(e),NoNote$1=Object.freeze({empty:!0,name:"",letter:"",acc:"",pc:"",step:NaN,alt:NaN,chroma:NaN,height:NaN,coord:[],midi:null,freq:null}),cache$8=new Map,stepToLetter$1=e=>"CDEFGAB".charAt(e),altToAcc$1=e=>e<0?fillStr$8("b",-e):fillStr$8("#",e),accToAlt$1=e=>e[0]==="b"?-e.length:e.length;function note$1(e){const t=JSON.stringify(e),o=cache$8.get(t);if(o)return o;const a=typeof e=="string"?parse$8(e):isPitch$5(e)?note$1(pitchName$6(e)):isNamedPitch$5(e)?note$1(e.name):NoNote$1;return cache$8.set(t,a),a}var REGEX$b=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function tokenizeNote$1(e){const t=REGEX$b.exec(e);return t?[t[1].toUpperCase(),t[2].replace(/x/g,"##"),t[3],t[4]]:["","","",""]}function coordToNote$1(e){return note$1(pitch$2(e))}var mod$1=(e,t)=>(e%t+t)%t,SEMI$1=[0,2,4,5,7,9,11];function parse$8(e){const t=tokenizeNote$1(e);if(t[0]===""||t[3]!=="")return NoNote$1;const o=t[0],a=t[1],u=t[2],l=(o.charCodeAt(0)+3)%7,p=accToAlt$1(a),f=u.length?+u:void 0,d=coordinates$5({step:l,alt:p,oct:f}),g=o+a+u,b=o+a,S=(SEMI$1[l]+p+120)%12,E=f===void 0?mod$1(SEMI$1[l]+p,12)-1188:SEMI$1[l]+p+12*(f+1),F=E>=0&&E<=127?E:null,$=f===void 0?null:Math.pow(2,(E-69)/12)*440;return{empty:!1,acc:a,alt:p,chroma:S,coord:d,freq:$,height:E,letter:o,midi:F,name:g,oct:f,pc:b,step:l}}function pitchName$6(e){const{step:t,alt:o,oct:a}=e,u=stepToLetter$1(t);if(!u)return"";const l=u+altToAcc$1(o);return a||a===0?l+a:l}function transpose$5(e,t){const o=note$1(e),a=Array.isArray(t)?t:interval$5(t).coord;if(o.empty||!a||a.length<2)return"";const u=o.coord,l=u.length===1?[u[0]+a[0]]:[u[0]+a[0],u[1]+a[1]];return coordToNote$1(l).name}function tonicIntervalsTransposer$1(e,t){const o=e.length;return a=>{if(!t)return"";const u=a<0?(o- -a%o)%o:a%o,l=Math.floor(a/o),p=transpose$5(t,[0,l]);return transpose$5(p,e[u])}}function distance$5(e,t){const o=note$1(e),a=note$1(t);if(o.empty||a.empty)return"";const u=o.coord,l=a.coord,p=l[0]-u[0],f=u.length===2&&l.length===2?l[1]-u[1]:-Math.floor(p*7/12),d=a.height===o.height&&a.midi!==null&&o.oct===a.oct&&o.step>a.step;return coordToInterval$2([p,f],d).name}var fillStr$7=(e,t)=>Array(t+1).join(e),REGEX$a=/^(_{1,}|=|\^{1,}|)([abcdefgABCDEFG])([,']*)$/;function tokenize$4(e){const t=REGEX$a.exec(e);return t?[t[1],t[2],t[3]]:["","",""]}function abcToScientificNotation(e){const[t,o,a]=tokenize$4(e);if(o==="")return"";let u=4;for(let p=0;p<a.length;p++)u+=a.charAt(p)===","?-1:1;const l=t[0]==="_"?t.replace(/_/g,"b"):t[0]==="^"?t.replace(/\^/g,"#"):"";return o.charCodeAt(0)>96?o.toUpperCase()+l+(u+1):o+l+u}function scientificToAbcNotation(e){const t=note$1(e);if(t.empty||!t.oct&&t.oct!==0)return"";const{letter:o,acc:a,oct:u}=t,l=a[0]==="b"?a.replace(/b/g,"_"):a.replace(/#/g,"^"),p=u>4?o.toLowerCase():o,f=u===5?"":u>4?fillStr$7("'",u-5):fillStr$7(",",4-u);return l+p+f}function transpose$4(e,t){return scientificToAbcNotation(transpose$5(abcToScientificNotation(e),t))}function distance$4(e,t){return distance$5(abcToScientificNotation(e),abcToScientificNotation(t))}var abc_notation_default={abcToScientificNotation,scientificToAbcNotation,tokenize:tokenize$4,transpose:transpose$4,distance:distance$4};function ascR$1(e,t){const o=[];for(;t--;o[t]=t+e);return o}function descR$1(e,t){const o=[];for(;t--;o[t]=e-t);return o}function range$1(e,t){return e<t?ascR$1(e,t-e+1):descR$1(e,e-t+1)}function rotate$1(e,t){const o=t.length,a=(e%o+o)%o;return t.slice(a,o).concat(t.slice(0,a))}function compact$1(e){return e.filter(t=>t===0||t)}function sortedNoteNames(e){return e.map(o=>note$1(o)).filter(o=>!o.empty).sort((o,a)=>o.height-a.height).map(o=>o.name)}function sortedUniqNoteNames(e){return sortedNoteNames(e).filter((t,o,a)=>o===0||t!==a[o-1])}function shuffle$1(e,t=Math.random){let o,a,u=e.length;for(;u;)o=Math.floor(t()*u--),a=e[u],e[u]=e[o],e[o]=a;return e}function permutations$1(e){return e.length===0?[[]]:permutations$1(e.slice(1)).reduce((t,o)=>t.concat(e.map((a,u)=>{const l=o.slice();return l.splice(u,0,e[0]),l})),[])}const index$6=Object.freeze(Object.defineProperty({__proto__:null,compact:compact$1,permutations:permutations$1,range:range$1,rotate:rotate$1,shuffle:shuffle$1,sortedNoteNames,sortedUniqNoteNames},Symbol.toStringTag,{value:"Module"}));function ascR(e,t){const o=[];for(;t--;o[t]=t+e);return o}function descR(e,t){const o=[];for(;t--;o[t]=e-t);return o}function range(e,t){return e<t?ascR(e,t-e+1):descR(e,e-t+1)}function rotate(e,t){const o=t.length,a=(e%o+o)%o;return t.slice(a,o).concat(t.slice(0,a))}function compact(e){return e.filter(t=>t===0||t)}function shuffle(e,t=Math.random){let o,a,u=e.length;for(;u;)o=Math.floor(t()*u--),a=e[u],e[u]=e[o],e[o]=a;return e}function permutations(e){return e.length===0?[[]]:permutations(e.slice(1)).reduce((t,o)=>t.concat(e.map((a,u)=>{const l=o.slice();return l.splice(u,0,e[0]),l})),[])}var collection_default={compact,permutations,range,rotate,shuffle};function isNamedPitch$4(e){return e!==null&&typeof e=="object"&&"name"in e&&typeof e.name=="string"}function isPitch$4(e){return e!==null&&typeof e=="object"&&"step"in e&&typeof e.step=="number"&&"alt"in e&&typeof e.alt=="number"&&!isNaN(e.step)&&!isNaN(e.alt)}var FIFTHS$4=[0,2,4,-1,1,3,5],STEPS_TO_OCTS$4=FIFTHS$4.map(e=>Math.floor(e*7/12));function coordinates$4(e){const{step:t,alt:o,oct:a,dir:u=1}=e,l=FIFTHS$4[t]+7*o;if(a===void 0)return[u*l];const p=a-STEPS_TO_OCTS$4[t]-4*o;return[u*l,u*p]}var fillStr$6=(e,t)=>Array(Math.abs(t)+1).join(e),NoInterval$4=Object.freeze({empty:!0,name:"",num:NaN,q:"",type:"",step:NaN,alt:NaN,dir:NaN,simple:NaN,semitones:NaN,chroma:NaN,coord:[],oct:NaN}),INTERVAL_TONAL_REGEX$4="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",INTERVAL_SHORTHAND_REGEX$4="(AA|A|P|M|m|d|dd)([-+]?\\d+)",REGEX$9=new RegExp("^"+INTERVAL_TONAL_REGEX$4+"|"+INTERVAL_SHORTHAND_REGEX$4+"$");function tokenizeInterval$4(e){const t=REGEX$9.exec(`${e}`);return t===null?["",""]:t[1]?[t[1],t[2]]:[t[4],t[3]]}var cache$7={};function interval$4(e){return typeof e=="string"?cache$7[e]||(cache$7[e]=parse$7(e)):isPitch$4(e)?interval$4(pitchName$5(e)):isNamedPitch$4(e)?interval$4(e.name):NoInterval$4}var SIZES$5=[0,2,4,5,7,9,11],TYPES$4="PMMPPMM";function parse$7(e){const t=tokenizeInterval$4(e);if(t[0]==="")return NoInterval$4;const o=+t[0],a=t[1],u=(Math.abs(o)-1)%7,l=TYPES$4[u];if(l==="M"&&a==="P")return NoInterval$4;const p=l==="M"?"majorable":"perfectable",f=""+o+a,d=o<0?-1:1,g=o===8||o===-8?o:d*(u+1),b=qToAlt$4(p,a),S=Math.floor((Math.abs(o)-1)/7),E=d*(SIZES$5[u]+b+12*S),F=(d*(SIZES$5[u]+b)%12+12)%12,$=coordinates$4({step:u,alt:b,oct:S,dir:d});return{empty:!1,name:f,num:o,q:a,step:u,alt:b,dir:d,type:p,simple:g,semitones:E,chroma:F,coord:$,oct:S}}function qToAlt$4(e,t){return t==="M"&&e==="majorable"||t==="P"&&e==="perfectable"?0:t==="m"&&e==="majorable"?-1:/^A+$/.test(t)?t.length:/^d+$/.test(t)?-1*(e==="perfectable"?t.length:t.length+1):0}function pitchName$5(e){const{step:t,alt:o,oct:a=0,dir:u}=e;if(!u)return"";const l=t+1+7*a,p=l===0?t+1:l,f=u<0?"-":"",d=TYPES$4[t]==="M"?"majorable":"perfectable";return f+p+altToQ$4(d,o)}function altToQ$4(e,t){return t===0?e==="majorable"?"M":"P":t===-1&&e==="majorable"?"m":t>0?fillStr$6("A",t):fillStr$6("d",e==="perfectable"?t:t+1)}var EmptyPcset={empty:!0,name:"",setNum:0,chroma:"000000000000",normalized:"000000000000",intervals:[]},setNumToChroma=e=>Number(e).toString(2).padStart(12,"0"),chromaToNumber=e=>parseInt(e,2),REGEX$8=/^[01]{12}$/;function isChroma(e){return REGEX$8.test(e)}var isPcsetNum=e=>typeof e=="number"&&e>=0&&e<=4095,isPcset=e=>e&&isChroma(e.chroma),cache$6={[EmptyPcset.chroma]:EmptyPcset};function get$b(e){const t=isChroma(e)?e:isPcsetNum(e)?setNumToChroma(e):Array.isArray(e)?listToChroma(e):isPcset(e)?e.chroma:EmptyPcset.chroma;return cache$6[t]=cache$6[t]||chromaToPcset(t)}var pcset$1=get$b,chroma$3=e=>get$b(e).chroma,intervals=e=>get$b(e).intervals,num$1=e=>get$b(e).setNum,IVLS=["1P","2m","2M","3m","3M","4P","5d","5P","6m","6M","7m","7M"];function chromaToIntervals(e){const t=[];for(let o=0;o<12;o++)e.charAt(o)==="1"&&t.push(IVLS[o]);return t}function notes$1(e){return get$b(e).intervals.map(t=>transpose$5("C",t))}function chromas(){return range(2048,4095).map(setNumToChroma)}function modes$1(e,t=!0){const a=get$b(e).chroma.split("");return compact(a.map((u,l)=>{const p=rotate(l,a);return t&&p[0]==="0"?null:p.join("")}))}function isEqual(e,t){return get$b(e).setNum===get$b(t).setNum}function isSubsetOf(e){const t=get$b(e).setNum;return o=>{const a=get$b(o).setNum;return t&&t!==a&&(a&t)===a}}function isSupersetOf(e){const t=get$b(e).setNum;return o=>{const a=get$b(o).setNum;return t&&t!==a&&(a|t)===a}}function isNoteIncludedIn(e){const t=get$b(e);return o=>{const a=note$1(o);return t&&!a.empty&&t.chroma.charAt(a.chroma)==="1"}}function filter(e){const t=isNoteIncludedIn(e);return o=>o.filter(t)}var pcset_default={get:get$b,chroma:chroma$3,num:num$1,intervals,chromas,isSupersetOf,isSubsetOf,isNoteIncludedIn,isEqual,filter,modes:modes$1,notes:notes$1,pcset:pcset$1};function chromaRotations(e){const t=e.split("");return t.map((o,a)=>rotate(a,t).join(""))}function chromaToPcset(e){const t=chromaToNumber(e),o=chromaRotations(e).map(chromaToNumber).filter(l=>l>=2048).sort()[0],a=setNumToChroma(o),u=chromaToIntervals(e);return{empty:!1,name:"",setNum:t,chroma:e,normalized:a,intervals:u}}function listToChroma(e){if(e.length===0)return EmptyPcset.chroma;let t;const o=[0,0,0,0,0,0,0,0,0,0,0,0];for(let a=0;a<e.length;a++)t=note$1(e[a]),t.empty&&(t=interval$4(e[a])),t.empty||(o[t.chroma]=1);return o.join("")}var CHORDS$3=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7 Δ ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 Δ9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 Δ#4 Δ#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -Δ7 mΔ -^7 -maj7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim ° o"],["1P 3m 5d 7d","diminished seventh","dim7 °7 o7"],["1P 3m 5d 7m","half-diminished","m7b5 ø -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 Δ9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],data_default$5=CHORDS$3;({...EmptyPcset});var dictionary$4=[],index$5={};function all$4(){return dictionary$4.slice()}function add$6(e,t,o){const a=getQuality$3(e),u={...get$b(e),name:o||"",quality:a,intervals:e,aliases:t};dictionary$4.push(u),u.name&&(index$5[u.name]=u),index$5[u.setNum]=u,index$5[u.chroma]=u,u.aliases.forEach(l=>addAlias$4(u,l))}function addAlias$4(e,t){index$5[t]=e}function getQuality$3(e){const t=o=>e.indexOf(o)!==-1;return t("5A")?"Augmented":t("3M")?"Major":t("5d")?"Diminished":t("3m")?"Minor":"Unknown"}data_default$5.forEach(([e,t,o])=>add$6(e.split(" "),o.split(" "),t)),dictionary$4.sort((e,t)=>e.setNum-t.setNum);var namedSet=e=>{const t=e.reduce((o,a)=>{const u=note$1(a).chroma;return u!==void 0&&(o[u]=o[u]||note$1(a).name),o},{});return o=>t[o]};function detect$1(e,t={}){const o=e.map(u=>note$1(u).pc).filter(u=>u);return note$1.length===0?[]:findMatches(o,1,t).filter(u=>u.weight).sort((u,l)=>l.weight-u.weight).map(u=>u.name)}var BITMASK={anyThirds:384,perfectFifth:16,nonPerfectFifths:40,anySeventh:3},testChromaNumber=e=>t=>!!(t&e),hasAnyThird=testChromaNumber(BITMASK.anyThirds),hasPerfectFifth=testChromaNumber(BITMASK.perfectFifth),hasAnySeventh=testChromaNumber(BITMASK.anySeventh),hasNonPerfectFifth=testChromaNumber(BITMASK.nonPerfectFifths);function hasAnyThirdAndPerfectFifthAndAnySeventh(e){const t=parseInt(e.chroma,2);return hasAnyThird(t)&&hasPerfectFifth(t)&&hasAnySeventh(t)}function withPerfectFifth(e){const t=parseInt(e,2);return hasNonPerfectFifth(t)?e:(t|16).toString(2)}function findMatches(e,t,o){const a=e[0],u=note$1(a).chroma,l=namedSet(e),p=modes$1(e,!1),f=[];return p.forEach((d,g)=>{const b=o.assumePerfectFifth&&withPerfectFifth(d);all$4().filter(E=>o.assumePerfectFifth&&hasAnyThirdAndPerfectFifthAndAnySeventh(E)?E.chroma===b:E.chroma===d).forEach(E=>{const F=E.aliases[0],$=l(g);g!==u?f.push({weight:.5*t,name:`${$}${F}/${a}`}):f.push({weight:1*t,name:`${$}${F}`})})}),f}function isNamedPitch$3(e){return e!==null&&typeof e=="object"&&"name"in e&&typeof e.name=="string"}var SIZES$4=[0,2,4,5,7,9,11],chroma$2=({step:e,alt:t})=>(SIZES$4[e]+t+120)%12,height=({step:e,alt:t,oct:o,dir:a=1})=>a*(SIZES$4[e]+t+12*(o===void 0?-100:o)),midi$1=e=>{const t=height(e);return e.oct!==void 0&&t>=-12&&t<=115?t+12:null};function isPitch$3(e){return e!==null&&typeof e=="object"&&"step"in e&&typeof e.step=="number"&&"alt"in e&&typeof e.alt=="number"}var FIFTHS$3=[0,2,4,-1,1,3,5],STEPS_TO_OCTS$3=FIFTHS$3.map(e=>Math.floor(e*7/12));function coordinates$3(e){const{step:t,alt:o,oct:a,dir:u=1}=e,l=FIFTHS$3[t]+7*o;if(a===void 0)return[u*l];const p=a-STEPS_TO_OCTS$3[t]-4*o;return[u*l,u*p]}var FIFTHS_TO_STEPS$1=[3,0,4,1,5,2,6];function pitch$1(e){const[t,o,a]=e,u=FIFTHS_TO_STEPS$1[unaltered$1(t)],l=Math.floor((t+1)/7);if(o===void 0)return{step:u,alt:l,dir:a};const p=o+4*l+STEPS_TO_OCTS$3[u];return{step:u,alt:l,oct:p,dir:a}}function unaltered$1(e){const t=(e+1)%7;return t<0?7+t:t}var fillStr$5=(e,t)=>Array(Math.abs(t)+1).join(e),NoInterval$3={empty:!0,name:"",acc:""},INTERVAL_TONAL_REGEX$3="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",INTERVAL_SHORTHAND_REGEX$3="(AA|A|P|M|m|d|dd)([-+]?\\d+)",REGEX$7=new RegExp("^"+INTERVAL_TONAL_REGEX$3+"|"+INTERVAL_SHORTHAND_REGEX$3+"$");function tokenizeInterval$3(e){const t=REGEX$7.exec(`${e}`);return t===null?["",""]:t[1]?[t[1],t[2]]:[t[4],t[3]]}var cache$5={};function interval$3(e){return typeof e=="string"?cache$5[e]||(cache$5[e]=parse$6(e)):isPitch$3(e)?interval$3(pitchName$4(e)):isNamedPitch$3(e)?interval$3(e.name):NoInterval$3}var SIZES$3=[0,2,4,5,7,9,11],TYPES$3="PMMPPMM";function parse$6(e){const t=tokenizeInterval$3(e);if(t[0]==="")return NoInterval$3;const o=+t[0],a=t[1],u=(Math.abs(o)-1)%7,l=TYPES$3[u];if(l==="M"&&a==="P")return NoInterval$3;const p=l==="M"?"majorable":"perfectable",f=""+o+a,d=o<0?-1:1,g=o===8||o===-8?o:d*(u+1),b=qToAlt$3(p,a),S=Math.floor((Math.abs(o)-1)/7),E=d*(SIZES$3[u]+b+12*S),F=(d*(SIZES$3[u]+b)%12+12)%12,$=coordinates$3({step:u,alt:b,oct:S,dir:d});return{empty:!1,name:f,num:o,q:a,step:u,alt:b,dir:d,type:p,simple:g,semitones:E,chroma:F,coord:$,oct:S}}function coordToInterval$1(e,t){const[o,a=0]=e,u=o*7+a*12<0,l=t||u?[-o,-a,-1]:[o,a,1];return interval$3(pitch$1(l))}function qToAlt$3(e,t){return t==="M"&&e==="majorable"||t==="P"&&e==="perfectable"?0:t==="m"&&e==="majorable"?-1:/^A+$/.test(t)?t.length:/^d+$/.test(t)?-1*(e==="perfectable"?t.length:t.length+1):0}function pitchName$4(e){const{step:t,alt:o,oct:a=0,dir:u}=e;if(!u)return"";const l=t+1+7*a,p=l===0?t+1:l,f=u<0?"-":"",d=TYPES$3[t]==="M"?"majorable":"perfectable";return f+p+altToQ$3(d,o)}function altToQ$3(e,t){return t===0?e==="majorable"?"M":"P":t===-1&&e==="majorable"?"m":t>0?fillStr$5("A",t):fillStr$5("d",e==="perfectable"?t:t+1)}var fillStr$4=(e,t)=>Array(Math.abs(t)+1).join(e),NoNote={empty:!0,name:"",pc:"",acc:""},cache$4=new Map,stepToLetter=e=>"CDEFGAB".charAt(e),altToAcc=e=>e<0?fillStr$4("b",-e):fillStr$4("#",e),accToAlt=e=>e[0]==="b"?-e.length:e.length;function note(e){const t=JSON.stringify(e),o=cache$4.get(t);if(o)return o;const a=typeof e=="string"?parse$5(e):isPitch$3(e)?note(pitchName$3(e)):isNamedPitch$3(e)?note(e.name):NoNote;return cache$4.set(t,a),a}var REGEX$6=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function tokenizeNote(e){const t=REGEX$6.exec(e);return t?[t[1].toUpperCase(),t[2].replace(/x/g,"##"),t[3],t[4]]:["","","",""]}function coordToNote(e){return note(pitch$1(e))}var mod=(e,t)=>(e%t+t)%t,SEMI=[0,2,4,5,7,9,11];function parse$5(e){const t=tokenizeNote(e);if(t[0]===""||t[3]!=="")return NoNote;const o=t[0],a=t[1],u=t[2],l=(o.charCodeAt(0)+3)%7,p=accToAlt(a),f=u.length?+u:void 0,d=coordinates$3({step:l,alt:p,oct:f}),g=o+a+u,b=o+a,S=(SEMI[l]+p+120)%12,E=f===void 0?mod(SEMI[l]+p,12)-1188:SEMI[l]+p+12*(f+1),F=E>=0&&E<=127?E:null,$=f===void 0?null:Math.pow(2,(E-69)/12)*440;return{empty:!1,acc:a,alt:p,chroma:S,coord:d,freq:$,height:E,letter:o,midi:F,name:g,oct:f,pc:b,step:l}}function pitchName$3(e){const{step:t,alt:o,oct:a}=e,u=stepToLetter(t);if(!u)return"";const l=u+altToAcc(o);return a||a===0?l+a:l}function transpose$3(e,t){const o=note(e),a=Array.isArray(t)?t:interval$3(t).coord;if(o.empty||!a||a.length<2)return"";const u=o.coord,l=u.length===1?[u[0]+a[0]]:[u[0]+a[0],u[1]+a[1]];return coordToNote(l).name}function tonicIntervalsTransposer(e,t){const o=e.length;return a=>{if(!t)return"";const u=a<0?(o- -a%o)%o:a%o,l=Math.floor(a/o),p=transpose$3(t,[0,l]);return transpose$3(p,e[u])}}function distance$3(e,t){const o=note(e),a=note(t);if(o.empty||a.empty)return"";const u=o.coord,l=a.coord,p=l[0]-u[0],f=u.length===2&&l.length===2?l[1]-u[1]:-Math.floor(p*7/12),d=a.height===o.height&&a.midi!==null&&o.midi!==null&&o.step>a.step;return coordToInterval$1([p,f],d).name}var fillStr$3=(e,t)=>Array(Math.abs(t)+1).join(e);function deprecate(e,t,o){return function(...a){return console.warn(`${e} is deprecated. Use ${t}.`),o.apply(this,a)}}var isNamed=deprecate("isNamed","isNamedPitch",isNamedPitch$3);const Core=Object.freeze(Object.defineProperty({__proto__:null,accToAlt,altToAcc,chroma:chroma$2,coordToInterval:coordToInterval$1,coordToNote,coordinates:coordinates$3,deprecate,distance:distance$3,fillStr:fillStr$3,height,interval:interval$3,isNamed,isNamedPitch:isNamedPitch$3,isPitch:isPitch$3,midi:midi$1,note,pitch:pitch$1,stepToLetter,tokenizeInterval:tokenizeInterval$3,tokenizeNote,tonicIntervalsTransposer,transpose:transpose$3},Symbol.toStringTag,{value:"Module"}));var CHORDS$2=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7 Δ ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 Δ9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 Δ#4 Δ#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -Δ7 mΔ -^7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim ° o"],["1P 3m 5d 7d","diminished seventh","dim7 °7 o7"],["1P 3m 5d 7m","half-diminished","m7b5 ø -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 Δ9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],data_default$4=CHORDS$2,NoChordType={...EmptyPcset,name:"",quality:"Unknown",intervals:[],aliases:[]},dictionary$3=[],index$4={};function get$a(e){return index$4[e]||NoChordType}var chordType=deprecate("ChordType.chordType","ChordType.get",get$a);function names$8(){return dictionary$3.map(e=>e.name).filter(e=>e)}function symbols(){return dictionary$3.map(e=>e.aliases[0]).filter(e=>e)}function keys$1(){return Object.keys(index$4)}function all$3(){return dictionary$3.slice()}var entries$2=deprecate("ChordType.entries","ChordType.all",all$3);function removeAll$1(){dictionary$3=[],index$4={}}function add$5(e,t,o){const a=getQuality$2(e),u={...get$b(e),name:o||"",quality:a,intervals:e,aliases:t};dictionary$3.push(u),u.name&&(index$4[u.name]=u),index$4[u.setNum]=u,index$4[u.chroma]=u,u.aliases.forEach(l=>addAlias$3(u,l))}function addAlias$3(e,t){index$4[t]=e}function getQuality$2(e){const t=o=>e.indexOf(o)!==-1;return t("5A")?"Augmented":t("3M")?"Major":t("5d")?"Diminished":t("3m")?"Minor":"Unknown"}data_default$4.forEach(([e,t,o])=>add$5(e.split(" "),o.split(" "),t)),dictionary$3.sort((e,t)=>e.setNum-t.setNum);var chord_type_default={names:names$8,symbols,get:get$a,all:all$3,add:add$5,removeAll:removeAll$1,keys:keys$1,entries:entries$2,chordType},SCALES=[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2M 3m 4P 5P 6m 7m","minor","aeolian"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 6A","whole tone","messiaen's mode #1"],["1P 2m 4P 4A 5P 7M","messiaen's mode #5"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2m 2A 3M 4A 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished","aeolian b5"],["1P 2M 3M 4P 5P 6m 7m","mixolydian b6","melodic minor fifth mode","hindu"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7","overtone"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","dorian b2","phrygian #6","melodic minor second mode"],["1P 2m 3m 4d 5d 6m 7d","ultralocrian","superlocrian bb7","superlocrian diminished"],["1P 2m 3m 4P 5d 6M 7m","locrian 6","locrian natural 6","locrian sharp 6"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 4A 5P 6M 7m","dorian #4","ukrainian dorian","romanian minor","altered dorian"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","major augmented","major #5","ionian augmented","ionian #5"],["1P 2A 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 2M 4P 4A 5P 6m 7M","messiaen's mode #4"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished","messiaen's mode #2"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3M 4P 4A 5A 6A 7M","messiaen's mode #6"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2M 3m 3M 4A 5P 6m 7m 7M","messiaen's mode #3"],["1P 2m 2M 3m 4P 4A 5P 6m 6M 7M","messiaen's mode #7"],["1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M","chromatic"]],data_default$3=SCALES,NoScaleType={...EmptyPcset,intervals:[],aliases:[]},dictionary$2=[],index$3={};function names$7(){return dictionary$2.map(e=>e.name)}function get$9(e){return index$3[e]||NoScaleType}var scaleType=get$9;function all$2(){return dictionary$2.slice()}var entries$1=all$2;function keys(){return Object.keys(index$3)}function removeAll(){dictionary$2=[],index$3={}}function add$4(e,t,o=[]){const a={...get$b(e),name:t,intervals:e,aliases:o};return dictionary$2.push(a),index$3[a.name]=a,index$3[a.setNum]=a,index$3[a.chroma]=a,a.aliases.forEach(u=>addAlias$2(a,u)),a}function addAlias$2(e,t){index$3[t]=e}data_default$3.forEach(([e,t,...o])=>add$4(e.split(" "),t,o));var scale_type_default={names:names$7,get:get$9,all:all$2,add:add$4,removeAll,keys,entries:entries$1,scaleType},NoChord={empty:!0,name:"",symbol:"",root:"",rootDegree:0,type:"",tonic:null,setNum:NaN,quality:"Unknown",chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function tokenize$3(e){const[t,o,a,u]=tokenizeNote(e);return t===""?["",e]:t==="A"&&u==="ug"?["","aug"]:[t+o,a+u]}function get$8(e){if(e==="")return NoChord;if(Array.isArray(e)&&e.length===2)return getChord(e[1],e[0]);{const[t,o]=tokenize$3(e),a=getChord(o,t);return a.empty?getChord(e):a}}function getChord(e,t,o){const a=get$a(e),u=note(t||""),l=note(o||"");if(a.empty||t&&u.empty||o&&l.empty)return NoChord;const p=distance$3(u.pc,l.pc),f=a.intervals.indexOf(p)+1;if(!l.empty&&!f)return NoChord;const d=Array.from(a.intervals);for(let E=1;E<f;E++){const F=d[0][0],$=d[0][1],k=parseInt(F,10)+7;d.push(`${k}${$}`),d.shift()}const g=u.empty?[]:d.map(E=>transpose$3(u,E));e=a.aliases.indexOf(e)!==-1?e:a.aliases[0];const b=`${u.empty?"":u.pc}${e}${l.empty||f<=1?"":"/"+l.pc}`,S=`${t?u.pc+" ":""}${a.name}${f>1&&o?" over "+l.pc:""}`;return{...a,name:S,symbol:b,type:a.name,root:l.name,intervals:d,rootDegree:f,tonic:u.name,notes:g}}var chord=deprecate("Chord.chord","Chord.get",get$8);function transpose$2(e,t){const[o,a]=tokenize$3(e);return o?transpose$3(o,t)+a:e}function chordScales(e){const t=get$8(e),o=isSupersetOf(t.chroma);return all$2().filter(a=>o(a.chroma)).map(a=>a.name)}function extended$1(e){const t=get$8(e),o=isSupersetOf(t.chroma);return all$3().filter(a=>o(a.chroma)).map(a=>t.tonic+a.aliases[0])}function reduced$1(e){const t=get$8(e),o=isSubsetOf(t.chroma);return all$3().filter(a=>o(a.chroma)).map(a=>t.tonic+a.aliases[0])}function degrees$1(e){const{intervals:t,tonic:o}=get$8(e),a=tonicIntervalsTransposer(t,o);return u=>u?a(u>0?u-1:u):""}function steps$1(e){const{intervals:t,tonic:o}=get$8(e);return tonicIntervalsTransposer(t,o)}var chord_default={getChord,get:get$8,detect:detect$1,chordScales,extended:extended$1,reduced:reduced$1,tokenize:tokenize$3,transpose:transpose$2,degrees:degrees$1,steps:steps$1,chord},DATA=[[.125,"dl",["large","duplex longa","maxima","octuple","octuple whole"]],[.25,"l",["long","longa"]],[.5,"d",["double whole","double","breve"]],[1,"w",["whole","semibreve"]],[2,"h",["half","minim"]],[4,"q",["quarter","crotchet"]],[8,"e",["eighth","quaver"]],[16,"s",["sixteenth","semiquaver"]],[32,"t",["thirty-second","demisemiquaver"]],[64,"sf",["sixty-fourth","hemidemisemiquaver"]],[128,"h",["hundred twenty-eighth"]],[256,"th",["two hundred fifty-sixth"]]],data_default$2=DATA,VALUES=[];data_default$2.forEach(([e,t,o])=>add$3(e,t,o));var NoDuration={empty:!0,name:"",value:0,fraction:[0,0],shorthand:"",dots:"",names:[]};function names$6(){return VALUES.reduce((e,t)=>(t.names.forEach(o=>e.push(o)),e),[])}function shorthands(){return VALUES.map(e=>e.shorthand)}var REGEX$5=/^([^.]+)(\.*)$/;function get$7(e){const[t,o,a]=REGEX$5.exec(e)||[],u=VALUES.find(f=>f.shorthand===o||f.names.includes(o));if(!u)return NoDuration;const l=calcDots(u.fraction,a.length),p=l[0]/l[1];return{...u,name:e,dots:a,value:p,fraction:l}}var value=e=>get$7(e).value,fraction=e=>get$7(e).fraction,duration_value_default={names:names$6,shorthands,get:get$7,value,fraction};function add$3(e,t,o){VALUES.push({empty:!1,dots:"",name:"",value:1/e,fraction:e<1?[1/e,1]:[1,e],shorthand:t,names:o})}function calcDots(e,t){const o=Math.pow(2,t);let a=e[0]*o,u=e[1]*o;const l=a;for(let p=0;p<t;p++)a+=l/Math.pow(2,p+1);for(;a%2===0&&u%2===0;)a/=2,u/=2;return[a,u]}function names$5(){return"1P 2M 3M 4P 5P 6m 7m".split(" ")}var get$6=interval$3,name$1=e=>interval$3(e).name,semitones=e=>interval$3(e).semitones,quality=e=>interval$3(e).q,num=e=>interval$3(e).num;function simplify$2(e){const t=interval$3(e);return t.empty?"":t.simple+t.q}function invert(e){const t=interval$3(e);if(t.empty)return"";const o=(7-t.step)%7,a=t.type==="perfectable"?-t.alt:-(t.alt+1);return interval$3({step:o,alt:a,oct:t.oct,dir:t.dir}).name}var IN=[1,2,2,3,3,4,5,5,6,6,7,7],IQ="P m M m M P d P m M m M".split(" ");function fromSemitones(e){const t=e<0?-1:1,o=Math.abs(e),a=o%12,u=Math.floor(o/12);return t*(IN[a]+7*u)+IQ[a]}var distance$2=distance$5,add$2=combinator((e,t)=>[e[0]+t[0],e[1]+t[1]]),addTo=e=>t=>add$2(e,t),substract=combinator((e,t)=>[e[0]-t[0],e[1]-t[1]]);function transposeFifths$2(e,t){const o=get$6(e);if(o.empty)return"";const[a,u,l]=o.coord;return coordToInterval$1([a+t,u,l]).name}var interval_default={names:names$5,get:get$6,name:name$1,num,semitones,quality,fromSemitones,distance:distance$2,invert,simplify:simplify$2,add:add$2,addTo,substract,transposeFifths:transposeFifths$2};function combinator(e){return(t,o)=>{const a=interval$3(t).coord,u=interval$3(o).coord;if(a&&u){const l=e(a,u);return coordToInterval$1(l).name}}}function isMidi(e){return+e>=0&&+e<=127}function toMidi(e){if(isMidi(e))return+e;const t=note$1(e);return t.empty?null:t.midi}function midiToFreq(e,t=440){return Math.pow(2,(e-69)/12)*t}var L2=Math.log(2),L440=Math.log(440);function freqToMidi(e){const t=12*(Math.log(e)-L440)/L2+69;return Math.round(t*100)/100}var SHARPS="C C# D D# E F F# G G# A A# B".split(" "),FLATS="C Db D Eb E F Gb G Ab A Bb B".split(" ");function midiToNoteName(e,t={}){if(isNaN(e)||e===-1/0||e===1/0)return"";e=Math.round(e);const a=(t.sharps===!0?SHARPS:FLATS)[e%12];if(t.pitchClass)return a;const u=Math.floor(e/12)-1;return a+u}function chroma$1(e){return e%12}function pcsetFromChroma(e){return e.split("").reduce((t,o,a)=>(a<12&&o==="1"&&t.push(a),t),[])}function pcsetFromMidi(e){return e.map(chroma$1).sort((t,o)=>t-o).filter((t,o,a)=>o===0||t!==a[o-1])}function pcset(e){return Array.isArray(e)?pcsetFromMidi(e):pcsetFromChroma(e)}function pcsetNearest(e){const t=pcset(e);return o=>{const a=chroma$1(o);for(let u=0;u<12;u++){if(t.includes(a+u))return o+u;if(t.includes(a-u))return o-u}}}function pcsetSteps(e,t){const o=pcset(e),a=o.length;return u=>{const l=u<0?(a- -u%a)%a:u%a,p=Math.floor(u/a);return o[l]+p*12+t}}function pcsetDegrees(e,t){const o=pcsetSteps(e,t);return a=>{if(a!==0)return o(a>0?a-1:a)}}var index_default$4={chroma:chroma$1,freqToMidi,isMidi,midiToFreq,midiToNoteName,pcsetNearest,pcset,pcsetDegrees,pcsetSteps,toMidi},NAMES$2=["C","D","E","F","G","A","B"],toName=e=>e.name,onlyNotes=e=>e.map(note$1).filter(t=>!t.empty);function names$4(e){return e===void 0?NAMES$2.slice():Array.isArray(e)?onlyNotes(e).map(toName):[]}var get$5=note$1,name=e=>get$5(e).name,pitchClass=e=>get$5(e).pc,accidentals=e=>get$5(e).acc,octave=e=>get$5(e).oct,midi=e=>get$5(e).midi,freq=e=>get$5(e).freq,chroma=e=>get$5(e).chroma;function fromMidi(e){return midiToNoteName(e)}function fromFreq(e){return midiToNoteName(freqToMidi(e))}function fromFreqSharps(e){return midiToNoteName(freqToMidi(e),{sharps:!0})}function fromMidiSharps(e){return midiToNoteName(e,{sharps:!0})}var distance$1=distance$5,transpose$1=transpose$5,tr=transpose$5,transposeBy=e=>t=>transpose$1(t,e),trBy=transposeBy,transposeFrom=e=>t=>transpose$1(e,t),trFrom=transposeFrom;function transposeFifths$1(e,t){return transpose$1(e,[t,0])}var trFifths=transposeFifths$1;function transposeOctaves(e,t){return transpose$1(e,[0,t])}var ascending=(e,t)=>e.height-t.height,descending=(e,t)=>t.height-e.height;function sortedNames(e,t){return t=t||ascending,onlyNotes(e).sort(t).map(toName)}function sortedUniqNames(e){return sortedNames(e,ascending).filter((t,o,a)=>o===0||t!==a[o-1])}var simplify$1=e=>{const t=get$5(e);return t.empty?"":midiToNoteName(t.midi||t.chroma,{sharps:t.alt>0,pitchClass:t.midi===null})};function enharmonic(e,t){const o=get$5(e);if(o.empty)return"";const a=get$5(t||midiToNoteName(o.midi||o.chroma,{sharps:o.alt<0,pitchClass:!0}));if(a.empty||a.chroma!==o.chroma)return"";if(o.oct===void 0)return a.pc;const u=o.chroma-o.alt,l=a.chroma-a.alt,p=u>11||l<0?-1:u<0||l>11?1:0,f=o.oct+p;return a.pc+f}var index_default$3={names:names$4,get:get$5,name,pitchClass,accidentals,octave,midi,ascending,descending,distance:distance$1,sortedNames,sortedUniqNames,fromMidi,fromMidiSharps,freq,fromFreq,fromFreqSharps,chroma,transpose:transpose$1,tr,transposeBy,trBy,transposeFrom,trFrom,transposeFifths:transposeFifths$1,transposeOctaves,trFifths,simplify:simplify$1,enharmonic};function isNamedPitch$2(e){return e!==null&&typeof e=="object"&&"name"in e&&typeof e.name=="string"}function isPitch$2(e){return e!==null&&typeof e=="object"&&"step"in e&&typeof e.step=="number"&&"alt"in e&&typeof e.alt=="number"&&!isNaN(e.step)&&!isNaN(e.alt)}var FIFTHS$2=[0,2,4,-1,1,3,5],STEPS_TO_OCTS$2=FIFTHS$2.map(e=>Math.floor(e*7/12));function coordinates$2(e){const{step:t,alt:o,oct:a,dir:u=1}=e,l=FIFTHS$2[t]+7*o;if(a===void 0)return[u*l];const p=a-STEPS_TO_OCTS$2[t]-4*o;return[u*l,u*p]}var fillStr$2=(e,t)=>Array(Math.abs(t)+1).join(e),NoInterval$2=Object.freeze({empty:!0,name:"",num:NaN,q:"",type:"",step:NaN,alt:NaN,dir:NaN,simple:NaN,semitones:NaN,chroma:NaN,coord:[],oct:NaN}),INTERVAL_TONAL_REGEX$2="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",INTERVAL_SHORTHAND_REGEX$2="(AA|A|P|M|m|d|dd)([-+]?\\d+)",REGEX$4=new RegExp("^"+INTERVAL_TONAL_REGEX$2+"|"+INTERVAL_SHORTHAND_REGEX$2+"$");function tokenizeInterval$2(e){const t=REGEX$4.exec(`${e}`);return t===null?["",""]:t[1]?[t[1],t[2]]:[t[4],t[3]]}var cache$3={};function interval$2(e){return typeof e=="string"?cache$3[e]||(cache$3[e]=parse$4(e)):isPitch$2(e)?interval$2(pitchName$2(e)):isNamedPitch$2(e)?interval$2(e.name):NoInterval$2}var SIZES$2=[0,2,4,5,7,9,11],TYPES$2="PMMPPMM";function parse$4(e){const t=tokenizeInterval$2(e);if(t[0]==="")return NoInterval$2;const o=+t[0],a=t[1],u=(Math.abs(o)-1)%7,l=TYPES$2[u];if(l==="M"&&a==="P")return NoInterval$2;const p=l==="M"?"majorable":"perfectable",f=""+o+a,d=o<0?-1:1,g=o===8||o===-8?o:d*(u+1),b=qToAlt$2(p,a),S=Math.floor((Math.abs(o)-1)/7),E=d*(SIZES$2[u]+b+12*S),F=(d*(SIZES$2[u]+b)%12+12)%12,$=coordinates$2({step:u,alt:b,oct:S,dir:d});return{empty:!1,name:f,num:o,q:a,step:u,alt:b,dir:d,type:p,simple:g,semitones:E,chroma:F,coord:$,oct:S}}function qToAlt$2(e,t){return t==="M"&&e==="majorable"||t==="P"&&e==="perfectable"?0:t==="m"&&e==="majorable"?-1:/^A+$/.test(t)?t.length:/^d+$/.test(t)?-1*(e==="perfectable"?t.length:t.length+1):0}function pitchName$2(e){const{step:t,alt:o,oct:a=0,dir:u}=e;if(!u)return"";const l=t+1+7*a,p=l===0?t+1:l,f=u<0?"-":"",d=TYPES$2[t]==="M"?"majorable":"perfectable";return f+p+altToQ$2(d,o)}function altToQ$2(e,t){return t===0?e==="majorable"?"M":"P":t===-1&&e==="majorable"?"m":t>0?fillStr$2("A",t):fillStr$2("d",e==="perfectable"?t:t+1)}var NoRomanNumeral={empty:!0,name:"",chordType:""},cache$2={};function get$4(e){return typeof e=="string"?cache$2[e]||(cache$2[e]=parse$3(e)):typeof e=="number"?get$4(NAMES$1[e]||""):isPitch$2(e)?fromPitch(e):isNamedPitch$2(e)?get$4(e.name):NoRomanNumeral}var romanNumeral=get$4;function names$3(e=!0){return(e?NAMES$1:NAMES_MINOR).slice()}function fromPitch(e){return get$4(altToAcc$1(e.alt)+NAMES$1[e.step])}var REGEX$3=/^(#{1,}|b{1,}|x{1,}|)(IV|I{1,3}|VI{0,2}|iv|i{1,3}|vi{0,2})([^IViv]*)$/;function tokenize$2(e){return REGEX$3.exec(e)||["","","",""]}var ROMANS="I II III IV V VI VII",NAMES$1=ROMANS.split(" "),NAMES_MINOR=ROMANS.toLowerCase().split(" ");function parse$3(e){const[t,o,a,u]=tokenize$2(e);if(!a)return NoRomanNumeral;const l=a.toUpperCase(),p=NAMES$1.indexOf(l),f=accToAlt$1(o),d=1;return{empty:!1,name:t,roman:a,interval:interval$2({step:p,alt:f,dir:d}).name,acc:o,chordType:u,alt:f,step:p,major:a===l,oct:0,dir:d}}var roman_numeral_default={names:names$3,get:get$4,romanNumeral},Empty=Object.freeze([]),NoKey={type:"major",tonic:"",alteration:0,keySignature:""},NoKeyScale={tonic:"",grades:Empty,intervals:Empty,scale:Empty,triads:Empty,chords:Empty,chordsHarmonicFunction:Empty,chordScales:Empty,secondaryDominants:Empty,secondaryDominantSupertonics:Empty,substituteDominantsMinorRelative:Empty,substituteDominants:Empty,substituteDominantSupertonics:Empty,secondaryDominantsMinorRelative:Empty},NoMajorKey={...NoKey,...NoKeyScale,type:"major",minorRelative:"",scale:Empty,substituteDominants:Empty,secondaryDominantSupertonics:Empty,substituteDominantsMinorRelative:Empty},NoMinorKey={...NoKey,type:"minor",relativeMajor:"",natural:NoKeyScale,harmonic:NoKeyScale,melodic:NoKeyScale},mapScaleToType=(e,t,o="")=>t.map((a,u)=>`${e[u]}${o}${a}`);function keyScale(e,t,o,a,u){return l=>{const p=e.map(F=>get$4(F).interval||""),f=p.map(F=>transpose$1(l,F)),d=mapScaleToType(f,o),g=f.map(F=>transpose$1(F,"5P")).map(F=>f.includes(F)&&!d.includes(F+"7")?F+"7":""),b=supertonics(g,t),S=g.map(F=>{if(!F)return"";const $=F.slice(0,-1);return transpose$1($,"5d")+"7"}),E=supertonics(S,t);return{tonic:l,grades:e,intervals:p,scale:f,triads:mapScaleToType(f,t),chords:d,chordsHarmonicFunction:a.slice(),chordScales:mapScaleToType(f,u," "),secondaryDominants:g,secondaryDominantSupertonics:b,substituteDominants:S,substituteDominantSupertonics:E,secondaryDominantsMinorRelative:b,substituteDominantsMinorRelative:E}}}var supertonics=(e,t)=>e.map((o,a)=>{if(!o)return"";const u=o.slice(0,-1),l=transpose$1(u,"5P");return t[a].endsWith("m")?l+"m7":l+"m7b5"}),distInFifths=(e,t)=>{const o=note$1(e),a=note$1(t);return o.empty||a.empty?0:a.coord[0]-o.coord[0]},MajorScale=keyScale("I II III IV V VI VII".split(" ")," m m   m dim".split(" "),"maj7 m7 m7 maj7 7 m7 m7b5".split(" "),"T SD T SD D T D".split(" "),"major,dorian,phrygian,lydian,mixolydian,minor,locrian".split(",")),NaturalScale=keyScale("I II bIII IV V bVI bVII".split(" "),"m dim  m m  ".split(" "),"m7 m7b5 maj7 m7 m7 maj7 7".split(" "),"T SD T SD D SD SD".split(" "),"minor,locrian,major,dorian,phrygian,lydian,mixolydian".split(",")),HarmonicScale=keyScale("I II bIII IV V bVI VII".split(" "),"m dim aug m   dim".split(" "),"mMaj7 m7b5 +maj7 m7 7 maj7 o7".split(" "),"T SD T SD D SD D".split(" "),"harmonic minor,locrian 6,major augmented,lydian diminished,phrygian dominant,lydian #9,ultralocrian".split(",")),MelodicScale=keyScale("I II bIII IV V VI VII".split(" "),"m m aug   dim dim".split(" "),"m6 m7 +maj7 7 7 m7b5 m7b5".split(" "),"T SD T SD D  ".split(" "),"melodic minor,dorian b2,lydian augmented,lydian dominant,mixolydian b6,locrian #2,altered".split(","));function majorKey(e){const t=note$1(e).pc;if(!t)return NoMajorKey;const o=MajorScale(t),a=distInFifths("C",t);return{...o,type:"major",minorRelative:transpose$1(t,"-3m"),alteration:a,keySignature:altToAcc$1(a)}}function minorKey(e){const t=note$1(e).pc;if(!t)return NoMinorKey;const o=distInFifths("C",t)-3;return{type:"minor",tonic:t,relativeMajor:transpose$1(t,"3m"),alteration:o,keySignature:altToAcc$1(o),natural:NaturalScale(t),harmonic:HarmonicScale(t),melodic:MelodicScale(t)}}function majorTonicFromKeySignature(e){return typeof e=="number"?transposeFifths$1("C",e):typeof e=="string"&&/^b+|#+$/.test(e)?transposeFifths$1("C",accToAlt$1(e)):null}var index_default$2={majorKey,majorTonicFromKeySignature,minorKey};function isNamedPitch$1(e){return e!==null&&typeof e=="object"&&"name"in e&&typeof e.name=="string"}function isPitch$1(e){return e!==null&&typeof e=="object"&&"step"in e&&typeof e.step=="number"&&"alt"in e&&typeof e.alt=="number"&&!isNaN(e.step)&&!isNaN(e.alt)}var FIFTHS$1=[0,2,4,-1,1,3,5],STEPS_TO_OCTS$1=FIFTHS$1.map(e=>Math.floor(e*7/12));function coordinates$1(e){const{step:t,alt:o,oct:a,dir:u=1}=e,l=FIFTHS$1[t]+7*o;if(a===void 0)return[u*l];const p=a-STEPS_TO_OCTS$1[t]-4*o;return[u*l,u*p]}var FIFTHS_TO_STEPS=[3,0,4,1,5,2,6];function pitch(e){const[t,o,a]=e,u=FIFTHS_TO_STEPS[unaltered(t)],l=Math.floor((t+1)/7);if(o===void 0)return{step:u,alt:l,dir:a};const p=o+4*l+STEPS_TO_OCTS$1[u];return{step:u,alt:l,oct:p,dir:a}}function unaltered(e){const t=(e+1)%7;return t<0?7+t:t}var fillStr$1=(e,t)=>Array(Math.abs(t)+1).join(e),NoInterval$1=Object.freeze({empty:!0,name:"",num:NaN,q:"",type:"",step:NaN,alt:NaN,dir:NaN,simple:NaN,semitones:NaN,chroma:NaN,coord:[],oct:NaN}),INTERVAL_TONAL_REGEX$1="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",INTERVAL_SHORTHAND_REGEX$1="(AA|A|P|M|m|d|dd)([-+]?\\d+)",REGEX$2=new RegExp("^"+INTERVAL_TONAL_REGEX$1+"|"+INTERVAL_SHORTHAND_REGEX$1+"$");function tokenizeInterval$1(e){const t=REGEX$2.exec(`${e}`);return t===null?["",""]:t[1]?[t[1],t[2]]:[t[4],t[3]]}var cache$1={};function interval$1(e){return typeof e=="string"?cache$1[e]||(cache$1[e]=parse$2(e)):isPitch$1(e)?interval$1(pitchName$1(e)):isNamedPitch$1(e)?interval$1(e.name):NoInterval$1}var SIZES$1=[0,2,4,5,7,9,11],TYPES$1="PMMPPMM";function parse$2(e){const t=tokenizeInterval$1(e);if(t[0]==="")return NoInterval$1;const o=+t[0],a=t[1],u=(Math.abs(o)-1)%7,l=TYPES$1[u];if(l==="M"&&a==="P")return NoInterval$1;const p=l==="M"?"majorable":"perfectable",f=""+o+a,d=o<0?-1:1,g=o===8||o===-8?o:d*(u+1),b=qToAlt$1(p,a),S=Math.floor((Math.abs(o)-1)/7),E=d*(SIZES$1[u]+b+12*S),F=(d*(SIZES$1[u]+b)%12+12)%12,$=coordinates$1({step:u,alt:b,oct:S,dir:d});return{empty:!1,name:f,num:o,q:a,step:u,alt:b,dir:d,type:p,simple:g,semitones:E,chroma:F,coord:$,oct:S}}function coordToInterval(e,t){const[o,a=0]=e,l=o*7+a*12<0?[-o,-a,-1]:[o,a,1];return interval$1(pitch(l))}function qToAlt$1(e,t){return t==="M"&&e==="majorable"||t==="P"&&e==="perfectable"?0:t==="m"&&e==="majorable"?-1:/^A+$/.test(t)?t.length:/^d+$/.test(t)?-1*(e==="perfectable"?t.length:t.length+1):0}function pitchName$1(e){const{step:t,alt:o,oct:a=0,dir:u}=e;if(!u)return"";const l=t+1+7*a,p=l===0?t+1:l,f=u<0?"-":"",d=TYPES$1[t]==="M"?"majorable":"perfectable";return f+p+altToQ$1(d,o)}function altToQ$1(e,t){return t===0?e==="majorable"?"M":"P":t===-1&&e==="majorable"?"m":t>0?fillStr$1("A",t):fillStr$1("d",e==="perfectable"?t:t+1)}var get$3=interval$1;function simplify(e){const t=interval$1(e);return t.empty?"":t.simple+t.q}function transposeFifths(e,t){const o=get$3(e);if(o.empty)return"";const[a,u,l]=o.coord;return coordToInterval([a+t,u,l]).name}var MODES=[[0,2773,0,"ionian","","Maj7","major"],[1,2902,2,"dorian","m","m7"],[2,3418,4,"phrygian","m","m7"],[3,2741,-1,"lydian","","Maj7"],[4,2774,1,"mixolydian","","7"],[5,2906,3,"aeolian","m","m7","minor"],[6,3434,5,"locrian","dim","m7b5"]],NoMode={...EmptyPcset,name:"",alt:0,modeNum:NaN,triad:"",seventh:"",aliases:[]},modes=MODES.map(toMode),index$2={};modes.forEach(e=>{index$2[e.name]=e,e.aliases.forEach(t=>{index$2[t]=e})});function get$2(e){return typeof e=="string"?index$2[e.toLowerCase()]||NoMode:e&&e.name?get$2(e.name):NoMode}var mode=get$2;function all$1(){return modes.slice()}var entries=all$1;function names$2(){return modes.map(e=>e.name)}function toMode(e){const[t,o,a,u,l,p,f]=e,d=f?[f]:[],g=Number(o).toString(2);return{empty:!1,intervals:get$9(u).intervals,modeNum:t,chroma:g,normalized:g,name:u,setNum:o,alt:a,triad:l,seventh:p,aliases:d}}function notes(e,t){return get$2(e).intervals.map(o=>transpose$5(t,o))}function chords(e){return(t,o)=>{const a=get$2(t);if(a.empty)return[];const u=rotate(a.modeNum,e),l=a.intervals.map(p=>transpose$5(o,p));return u.map((p,f)=>l[f]+p)}}var triads$1=chords(MODES.map(e=>e[4])),seventhChords=chords(MODES.map(e=>e[5]));function distance(e,t){const o=get$2(t),a=get$2(e);return o.empty||a.empty?"":simplify(transposeFifths("1P",a.alt-o.alt))}function relativeTonic(e,t,o){return transpose$5(o,distance(e,t))}var mode_default={get:get$2,names:names$2,all:all$1,distance,relativeTonic,notes,triads:triads$1,seventhChords,entries,mode},CHORDS$1=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7 Δ ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 Δ9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 Δ#4 Δ#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -Δ7 mΔ -^7 -maj7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim ° o"],["1P 3m 5d 7d","diminished seventh","dim7 °7 o7"],["1P 3m 5d 7m","half-diminished","m7b5 ø -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 Δ9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],data_default$1=CHORDS$1;({...EmptyPcset});var dictionary$1=[],index$1={};function add$1(e,t,o){const a=getQuality$1(e),u={...get$b(e),name:o||"",quality:a,intervals:e,aliases:t};dictionary$1.push(u),u.name&&(index$1[u.name]=u),index$1[u.setNum]=u,index$1[u.chroma]=u,u.aliases.forEach(l=>addAlias$1(u,l))}function addAlias$1(e,t){index$1[t]=e}function getQuality$1(e){const t=o=>e.indexOf(o)!==-1;return t("5A")?"Augmented":t("3M")?"Major":t("5d")?"Diminished":t("3m")?"Minor":"Unknown"}data_default$1.forEach(([e,t,o])=>add$1(e.split(" "),o.split(" "),t)),dictionary$1.sort((e,t)=>e.setNum-t.setNum);function isNamedPitch(e){return e!==null&&typeof e=="object"&&"name"in e&&typeof e.name=="string"}function isPitch(e){return e!==null&&typeof e=="object"&&"step"in e&&typeof e.step=="number"&&"alt"in e&&typeof e.alt=="number"&&!isNaN(e.step)&&!isNaN(e.alt)}var FIFTHS=[0,2,4,-1,1,3,5],STEPS_TO_OCTS=FIFTHS.map(e=>Math.floor(e*7/12));function coordinates(e){const{step:t,alt:o,oct:a,dir:u=1}=e,l=FIFTHS[t]+7*o;if(a===void 0)return[u*l];const p=a-STEPS_TO_OCTS[t]-4*o;return[u*l,u*p]}var fillStr=(e,t)=>Array(Math.abs(t)+1).join(e),NoInterval=Object.freeze({empty:!0,name:"",num:NaN,q:"",type:"",step:NaN,alt:NaN,dir:NaN,simple:NaN,semitones:NaN,chroma:NaN,coord:[],oct:NaN}),INTERVAL_TONAL_REGEX="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",INTERVAL_SHORTHAND_REGEX="(AA|A|P|M|m|d|dd)([-+]?\\d+)",REGEX$1=new RegExp("^"+INTERVAL_TONAL_REGEX+"|"+INTERVAL_SHORTHAND_REGEX+"$");function tokenizeInterval(e){const t=REGEX$1.exec(`${e}`);return t===null?["",""]:t[1]?[t[1],t[2]]:[t[4],t[3]]}var cache={};function interval(e){return typeof e=="string"?cache[e]||(cache[e]=parse$1(e)):isPitch(e)?interval(pitchName(e)):isNamedPitch(e)?interval(e.name):NoInterval}var SIZES=[0,2,4,5,7,9,11],TYPES="PMMPPMM";function parse$1(e){const t=tokenizeInterval(e);if(t[0]==="")return NoInterval;const o=+t[0],a=t[1],u=(Math.abs(o)-1)%7,l=TYPES[u];if(l==="M"&&a==="P")return NoInterval;const p=l==="M"?"majorable":"perfectable",f=""+o+a,d=o<0?-1:1,g=o===8||o===-8?o:d*(u+1),b=qToAlt(p,a),S=Math.floor((Math.abs(o)-1)/7),E=d*(SIZES[u]+b+12*S),F=(d*(SIZES[u]+b)%12+12)%12,$=coordinates({step:u,alt:b,oct:S,dir:d});return{empty:!1,name:f,num:o,q:a,step:u,alt:b,dir:d,type:p,simple:g,semitones:E,chroma:F,coord:$,oct:S}}function qToAlt(e,t){return t==="M"&&e==="majorable"||t==="P"&&e==="perfectable"?0:t==="m"&&e==="majorable"?-1:/^A+$/.test(t)?t.length:/^d+$/.test(t)?-1*(e==="perfectable"?t.length:t.length+1):0}function pitchName(e){const{step:t,alt:o,oct:a=0,dir:u}=e;if(!u)return"";const l=t+1+7*a,p=l===0?t+1:l,f=u<0?"-":"",d=TYPES[t]==="M"?"majorable":"perfectable";return f+p+altToQ(d,o)}function altToQ(e,t){return t===0?e==="majorable"?"M":"P":t===-1&&e==="majorable"?"m":t>0?fillStr("A",t):fillStr("d",e==="perfectable"?t:t+1)}function tokenize$1(e){const[t,o,a,u]=tokenizeNote$1(e);return t===""?tokenizeBass("",e):t==="A"&&u==="ug"?tokenizeBass("","aug"):tokenizeBass(t+o,a+u)}function tokenizeBass(e,t){const o=t.split("/");if(o.length===1)return[e,o[0],""];const[a,u,l,p]=tokenizeNote$1(o[1]);return a!==""&&l===""&&p===""?[e,o[0],a+u]:[e,t,""]}function fromRomanNumerals(e,t){return t.map(get$4).map(a=>transpose$5(e,interval(a))+a.chordType)}function toRomanNumerals(e,t){return t.map(o=>{const[a,u]=tokenize$1(o),l=distance$5(e,a);return get$4(interval(l)).name+u})}var progression_default={fromRomanNumerals,toRomanNumerals};function numeric(e){const t=compact(e.map(o=>typeof o=="number"?o:toMidi(o)));return!e.length||t.length!==e.length?[]:t.reduce((o,a)=>{const u=o[o.length-1];return o.concat(range(u,a).slice(1))},[t[0]])}function chromatic(e,t){return numeric(e).map(o=>midiToNoteName(o,t))}var index_default$1={numeric,chromatic},CHORDS=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7 Δ ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 Δ9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 Δ#4 Δ#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -Δ7 mΔ -^7 -maj7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim ° o"],["1P 3m 5d 7d","diminished seventh","dim7 °7 o7"],["1P 3m 5d 7m","half-diminished","m7b5 ø -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 Δ9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],data_default=CHORDS;({...EmptyPcset});var dictionary=[],index={};function all(){return dictionary.slice()}function add(e,t,o){const a=getQuality(e),u={...get$b(e),name:o||"",quality:a,intervals:e,aliases:t};dictionary.push(u),u.name&&(index[u.name]=u),index[u.setNum]=u,index[u.chroma]=u,u.aliases.forEach(l=>addAlias(u,l))}function addAlias(e,t){index[t]=e}function getQuality(e){const t=o=>e.indexOf(o)!==-1;return t("5A")?"Augmented":t("3M")?"Major":t("5d")?"Diminished":t("3m")?"Minor":"Unknown"}data_default.forEach(([e,t,o])=>add(e.split(" "),o.split(" "),t)),dictionary.sort((e,t)=>e.setNum-t.setNum);var NoScale={empty:!0,name:"",type:"",tonic:null,setNum:NaN,chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function tokenize(e){if(typeof e!="string")return["",""];const t=e.indexOf(" "),o=note$1(e.substring(0,t));if(o.empty){const u=note$1(e);return u.empty?["",e.toLowerCase()]:[u.name,""]}const a=e.substring(o.name.length+1).toLowerCase();return[o.name,a.length?a:""]}var names$1=names$7;function get$1(e){const t=Array.isArray(e)?e:tokenize(e),o=note$1(t[0]).name,a=get$9(t[1]);if(a.empty)return NoScale;const u=a.name,l=o?a.intervals.map(f=>transpose$5(o,f)):[],p=o?o+" "+u:u;return{...a,name:p,type:u,tonic:o,notes:l}}var scale$1=get$1;function detect(e,t={}){const o=chroma$3(e),a=note$1(t.tonic??e[0]??""),u=a.chroma;if(u===void 0)return[];const l=o.split("");l[u]="1";const p=rotate(u,l).join(""),f=all$2().find(g=>g.chroma===p),d=[];return f&&d.push(a.name+" "+f.name),t.match==="exact"||extended(p).forEach(g=>{d.push(a.name+" "+g)}),d}function scaleChords(e){const t=get$1(e),o=isSubsetOf(t.chroma);return all().filter(a=>o(a.chroma)).map(a=>a.aliases[0])}function extended(e){const t=isChroma(e)?e:get$1(e).chroma,o=isSupersetOf(t);return all$2().filter(a=>o(a.chroma)).map(a=>a.name)}function reduced(e){const t=isSubsetOf(get$1(e).chroma);return all$2().filter(o=>t(o.chroma)).map(o=>o.name)}function scaleNotes(e){const t=e.map(u=>note$1(u).pc).filter(u=>u),o=t[0],a=sortedUniqNames(t);return rotate(a.indexOf(o),a)}function modeNames(e){const t=get$1(e);if(t.empty)return[];const o=t.tonic?t.notes:t.intervals;return modes$1(t.chroma).map((a,u)=>{const l=get$1(a).name;return l?[o[u],l]:["",""]}).filter(a=>a[0])}function getNoteNameOf(e){const t=Array.isArray(e)?scaleNotes(e):get$1(e).notes,o=t.map(a=>note$1(a).chroma);return a=>{const u=note$1(typeof a=="number"?fromMidi(a):a),l=u.height;if(l===void 0)return;const p=l%12,f=o.indexOf(p);if(f!==-1)return enharmonic(u.name,t[f])}}function rangeOf(e){const t=getNoteNameOf(e);return(o,a)=>{const u=note$1(o).height,l=note$1(a).height;return u===void 0||l===void 0?[]:range(u,l).map(t).filter(p=>p)}}function degrees(e){const{intervals:t,tonic:o}=get$1(e),a=tonicIntervalsTransposer$1(t,o);return u=>u?a(u>0?u-1:u):""}function steps(e){const{intervals:t,tonic:o}=get$1(e);return tonicIntervalsTransposer$1(t,o)}var index_default={degrees,detect,extended,get:get$1,modeNames,names:names$1,rangeOf,reduced,scaleChords,scaleNotes,steps,tokenize,scale:scale$1},NONE={empty:!0,name:"",upper:void 0,lower:void 0,type:void 0,additive:[]},NAMES=["4/4","3/4","2/4","2/2","12/8","9/8","6/8","3/8"];function names(){return NAMES.slice()}var REGEX=/^(\d*\d(?:\+\d)*)\/(\d+)$/,CACHE=new Map;function get(e){const t=JSON.stringify(e),o=CACHE.get(t);if(o)return o;const a=build(parse(e));return CACHE.set(t,a),a}function parse(e){if(typeof e=="string"){const[l,p,f]=REGEX.exec(e)||[];return parse([p,f])}const[t,o]=e,a=+o;if(typeof t=="number")return[t,a];const u=t.split("+").map(l=>+l);return u.length===1?[u[0],a]:[u,a]}var time_signature_default={names,parse,get},isPowerOfTwo=e=>Math.log(e)/Math.log(2)%1===0;function build([e,t]){const o=Array.isArray(e)?e.reduce((f,d)=>f+d,0):e,a=t;if(o===0||a===0)return NONE;const u=Array.isArray(e)?`${e.join("+")}/${t}`:`${e}/${t}`,l=Array.isArray(e)?e:[],p=a===4||a===2?"simple":a===8&&o%3===0?"compound":isPowerOfTwo(a)?"irregular":"irrational";return{empty:!1,name:u,type:p,upper:o,lower:a,additive:l}}var Tonal=Core,PcSet=pcset_default,ChordDictionary=chord_type_default,ScaleDictionary=scale_type_default;const dist$1=Object.freeze(Object.defineProperty({__proto__:null,AbcNotation:abc_notation_default,Array:index$6,Chord:chord_default,ChordDictionary,ChordType:chord_type_default,Collection:collection_default,Core,DurationValue:duration_value_default,Interval:interval_default,Key:index_default$2,Midi:index_default$4,Mode:mode_default,Note:index_default$3,PcSet,Pcset:pcset_default,Progression:progression_default,Range:index_default$1,RomanNumeral:roman_numeral_default,Scale:index_default,ScaleDictionary,ScaleType:scale_type_default,TimeSignature:time_signature_default,Tonal,accToAlt,altToAcc,chroma:chroma$2,coordToInterval:coordToInterval$1,coordToNote,coordinates:coordinates$3,deprecate,distance:distance$3,fillStr:fillStr$3,height,interval:interval$3,isNamed,isNamedPitch:isNamedPitch$3,isPitch:isPitch$3,midi:midi$1,note,pitch:pitch$1,stepToLetter,tokenizeInterval:tokenizeInterval$3,tokenizeNote,tonicIntervalsTransposer,transpose:transpose$3},Symbol.toStringTag,{value:"Module"})),flats=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],pcs=["c","db","d","eb","e","f","gb","g","ab","a","bb","b"],sharps=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],accs={b:-1,"#":1},pc2chroma=e=>{const[t,...o]=e.split("");return pcs.indexOf(t.toLowerCase())+o.reduce((a,u)=>a+accs[u],0)};function tokenizeChord$1(e){const t=(e||"").match(/^([A-G][b#]*)([^/]*)[/]?([A-G][b#]*)?$/);return t?t.slice(1):[]}const midi2chroma=e=>e%12,step2semitones=e=>{let t=Number(e);return isNaN(t)?interval_default.semitones(e):t},x2midi=(e,t)=>{if(typeof e=="number")return e;if(typeof e=="string")return noteToMidi$1(e,t)},midi2note=(e,t=!1)=>{const o=Math.floor(e/12)-1;return(t?sharps:flats)[e%12]+o};function scaleStep$1(e,t,o=1){e=e.map(u=>typeof u=="string"?noteToMidi$1(u):u);const a=Math.floor(t/e.length)*o*12;return t=_mod$2(t,e.length),e[t]+a}function nearestNumberIndex(e,t,o){let a=0,u=1/0;return t.forEach((l,p)=>{const f=Math.abs(l-e);(!o&&f<u||o&&f<=u)&&(a=p,u=f)}),a}let scaleSteps={};function stepInNamedScale(e,t,o,a){const[u,l]=index_default.tokenize(t),p=x2midi(u),f=midi2chroma(p);if(!scaleSteps[l]){const{intervals:E}=index_default.get(`C ${l}`);scaleSteps[l]=E.map(step2semitones)}const d=scaleSteps[l];if(!d)return null;let g=p;if(o){o=x2midi(o,3);const E=midi2chroma(o),F=_mod$2(E-f,12),$=nearestNumberIndex(F,d,a);e=e+$,g=o-F}const b=Math.floor(e/d.length)*12;return e=_mod$2(e,d.length),d[e]+g+b}let modeTarget={below:e=>e.slice(-1)[0],duck:e=>e.slice(-1)[0],above:e=>e[0],root:e=>e[0]};function renderVoicing({chord:e,dictionary:t,offset:o=0,n:a,mode:u="below",anchor:l="c5",octaves:p=1}){const[f,d]=tokenizeChord$1(e),g=pc2chroma(f);l=x2midi(l?.note||l,4);const b=midi2chroma(l),S=t[d].map(q=>(typeof q=="string"?q.split(" "):q).map(step2semitones));let E,F,$=S.map((q,te)=>{const re=modeTarget[u](q),de=_mod$2(b-re-g,12);return(E===void 0||de<E)&&(E=de,F=te),de});u==="root"&&(F=0);const k=Math.ceil(o/S.length)*12,B=_mod$2(F+o,S.length),V=S[B],U=modeTarget[u](V),ee=l-$[B]+k,j=V.map(q=>ee-U+q);let O=j.map(q=>midi2note(q));return u==="duck"&&(O=O.filter((q,te)=>j[te]!==l)),a!==void 0?[scaleStep$1(O,a,p)]:O}const octavesInterval=e=>(e<=0?-1:1)+e*7+"P";function getScale(e){e=e.replaceAll(":"," ");const t=index_default.get(e),{tonic:o,empty:a}=t;if(a&&isNote(e)||a&&!o)throw new Error(`Scale name ${e} is incomplete. Make sure to use ":" instead of spaces, example: .scale("C:major")`);if(a)throw new Error(`Invalid scale name "${e}"`);return t}function scaleStep(e,t){e=Math.ceil(e);let{intervals:o,tonic:a}=getScale(t);a=a||"C";const{pc:u,oct:l=3}=index_default$3.get(a),p=Math.floor(e/o.length),f=_mod$2(e,o.length),d=interval_default.add(o[f],octavesInterval(p));return index_default$3.transpose(u+l,d)}function scaleOffset(e,t,o){let{notes:a}=getScale(e);if(a=a.map(S=>index_default$3.get(S).pc),t=Number(t),isNaN(t))throw new Error(`scale offset "${t}" not a number`);const{pc:u,oct:l=3}=index_default$3.get(o),p=a.indexOf(u);if(p===-1)throw new Error(`note "${o}" is not in scale "${e}"`);let f=p,d=l,g=u;const b=Math.sign(t);for(;Math.abs(f-p)<Math.abs(t);){f+=b;const S=_mod$2(f,a.length);b<0&&g[0]==="C"&&(d+=b),g=a[S],b>0&&g[0]==="C"&&(d+=b)}return g+d}const{transpose,trans}=register(["transpose","trans"],function e(t,o){return o.withHap(a=>{const u=a.value.note??a.value;if(typeof u=="number"){let f;typeof t=="number"?f=t:typeof t=="string"&&(f=interval_default.semitones(t)||0);const d=u+f;return typeof a.value=="object"?a.withValue(()=>({...a.value,note:d})):a.withValue(()=>d)}if(typeof u!="string"||!isNote(u))return logger$2(`[tonal] transpose: not a note "${u}"`,"warning"),a;const l=isNaN(Number(t))?String(t):interval_default.fromSemitones(t),p=index_default$3.transpose(u,l);return typeof a.value=="object"?a.withValue(()=>({...a.value,note:p})):a.withValue(()=>p)})}),{scaleTranspose,scaleTrans,strans}=register(["scaleTranspose","scaleTrans","strans"],function(e,t){return t.withHap(o=>{if(!o.context.scale)throw new Error("can only use scaleTranspose after .scale");if(typeof o.value=="object")return o.withValue(()=>({...o.value,note:scaleOffset(o.context.scale,Number(e),o.value.note)}));if(typeof o.value!="string")throw new Error("can only use scaleTranspose with notes");return o.withValue(()=>scaleOffset(o.context.scale,Number(e),o.value))})});function _convertStepToNumberAndOffset(e){let t=Number(e),o=0;if(isNaN(t)){e=String(e);const a=/^(-?\d+)([#bsf]*)$/.exec(e);if(!a)throw new Error(`invalid scale step "${e}", expected number or integer with optional # b suffixes`);t=Number(a[1]);const u=a[2]||"";o=getAccidentalsOffset$1(u)}return[t,o]}let scaleToMidisAndNotes={};function _getNearestScaleNote(e,t,o=!0){let a=typeof t=="string"?noteToMidi$1(t):t;if(scaleToMidisAndNotes[e]===void 0){const{intervals:S,tonic:E}=getScale(e),{pc:F}=index_default$3.get(E),k=S.concat("8P").map(V=>index_default$3.transpose(F+"0",V)),B=k.map(noteToMidi$1);scaleToMidisAndNotes[e]=[B,k]}const[u,l]=scaleToMidisAndNotes[e],p=u[0],f=Math.floor((a-p)/12),d=u.map(S=>S+12*f),g=nearestNumberIndex(a,d,o),b=l[g];return index_default$3.transpose(b,interval_default.fromSemitones(12*f))}const scale=register("scale",function(e,t){return Array.isArray(e)&&(e=e.flat().join(" ")),t.withHaps(o=>(o=o.map(a=>{let u=a.value;const l=typeof u=="object";u=l?u:{n:u};const{note:p,n:f,value:d,...g}=u,b=p??f??d;if(b===void 0)return logger$2(`[tonal] Invalid value format for 'scale'. Value must contain n, note, or value but received keys [${Object.keys(u).join(", ")}]`,"error"),a;let S;if(isNote(b))S=_getNearestScaleNote(e,b),a.value={...g,note:S};else try{const[E,F]=_convertStepToNumberAndOffset(b);g.anchor?S=stepInNamedScale(E,e,g.anchor):S=scaleStep(E,e),F!=0&&(S=index_default$3.transpose(S,interval_default.fromSemitones(F)))}catch(E){errorLogger$1(E,"tonal");return}return a.value=l?{...g,note:S}:S,a.setContext({...a.context,scale:e})}),removeUndefineds(o)))},!0,!0);var dist={},dictionaryVoicing$1={},getBestVoicing={},hasRequiredGetBestVoicing;function requireGetBestVoicing(){if(hasRequiredGetBestVoicing)return getBestVoicing;hasRequiredGetBestVoicing=1,getBestVoicing.__esModule=!0,getBestVoicing.getBestVoicing=void 0;function e(t){var o=t.chord,a=t.range,u=t.finder,l=t.picker,p=t.lastVoicing,f=u(o,a);return f.length?l(f,p):[]}return getBestVoicing.getBestVoicing=e,getBestVoicing}var voicingsInRange={};const require$$0=getAugmentedNamespace(dist$1);var tokenizeChord={},hasRequiredTokenizeChord;function requireTokenizeChord(){if(hasRequiredTokenizeChord)return tokenizeChord;hasRequiredTokenizeChord=1,tokenizeChord.__esModule=!0,tokenizeChord.tokenizeChord=void 0;function e(t){var o=(t||"").match(/^([A-G][b#]*)([^\/]*)[\/]?([A-G][b#]*)?$/);return o?o.slice(1):[]}return tokenizeChord.tokenizeChord=e,tokenizeChord}var hasRequiredVoicingsInRange;function requireVoicingsInRange(){if(hasRequiredVoicingsInRange)return voicingsInRange;hasRequiredVoicingsInRange=1,voicingsInRange.__esModule=!0,voicingsInRange.voicingsInRange=void 0;var e=require$$0,t=requireDictionaryVoicing(),o=requireTokenizeChord();function a(u,l,p){l===void 0&&(l=t.lefthand),p===void 0&&(p=["D3","A4"]);var f=(0,o.tokenizeChord)(u),d=f[0],g=f[1];if(!l[g])return[];var b=l[g].map(function(E){return E.split(" ")}),S=e.Range.chromatic(p);return b.reduce(function(E,F){var $=F.map(function(U){return e.Interval.substract(U,F[0])}),k=e.Note.transpose(d,F[0]),B=S.filter(function(U){return e.Note.chroma(U)===e.Note.chroma(k)}).filter(function(U){return e.Note.midi(e.Note.transpose(U,$[$.length-1]))<=e.Note.midi(p[1])}).map(function(U){return e.Note.enharmonic(U,k)}),V=B.map(function(U){return $.map(function(ee){return e.Note.transpose(U,ee)})});return E.concat(V)},[])}return voicingsInRange.voicingsInRange=a,voicingsInRange}var hasRequiredDictionaryVoicing;function requireDictionaryVoicing(){return hasRequiredDictionaryVoicing||(hasRequiredDictionaryVoicing=1,(function(e){var t=dictionaryVoicing$1&&dictionaryVoicing$1.__assign||function(){return t=Object.assign||function(f){for(var d,g=1,b=arguments.length;g<b;g++){d=arguments[g];for(var S in d)Object.prototype.hasOwnProperty.call(d,S)&&(f[S]=d[S])}return f},t.apply(this,arguments)},o=dictionaryVoicing$1&&dictionaryVoicing$1.__rest||function(f,d){var g={};for(var b in f)Object.prototype.hasOwnProperty.call(f,b)&&d.indexOf(b)<0&&(g[b]=f[b]);if(f!=null&&typeof Object.getOwnPropertySymbols=="function")for(var S=0,b=Object.getOwnPropertySymbols(f);S<b.length;S++)d.indexOf(b[S])<0&&Object.prototype.propertyIsEnumerable.call(f,b[S])&&(g[b[S]]=f[b[S]]);return g};e.__esModule=!0,e.dictionaryVoicing=e.dictionaryVoicingFinder=e.triads=e.guidetones=e.lefthand=void 0;var a=requireGetBestVoicing(),u=requireVoicingsInRange();e.lefthand={m7:["3m 5P 7m 9M","7m 9M 10m 12P"],7:["3M 6M 7m 9M","7m 9M 10M 13M"],"^7":["3M 5P 7M 9M","7M 9M 10M 12P"],69:["3M 5P 6A 9M"],m7b5:["3m 5d 7m 8P","7m 8P 10m 12d"],"7b9":["3M 6m 7m 9m","7m 9m 10M 13m"],"7b13":["3M 6m 7m 9m","7m 9m 10M 13m"],o7:["1P 3m 5d 6M","5d 6M 8P 10m"],"7#11":["7m 9M 11A 13A"],"7#9":["3M 7m 9A"],mM7:["3m 5P 7M 9M","7M 9M 10m 12P"],m6:["3m 5P 6M 9M","6M 9M 10m 12P"]},e.guidetones={m7:["3m 7m","7m 10m"],m9:["3m 7m","7m 10m"],7:["3M 7m","7m 10M"],"^7":["3M 7M","7M 10M"],"^9":["3M 7M","7M 10M"],69:["3M 6M"],6:["3M 6M","6M 10M"],m7b5:["3m 7m","7m 10m"],"7b9":["3M 7m","7m 10M"],"7b13":["3M 7m","7m 10M"],o7:["3m 6M","6M 10m"],"7#11":["3M 7m","7m 10M"],"7#9":["3M 7m","7m 10M"],mM7:["3m 7M","7M 10m"],m6:["3m 6M","6M 10m"]},e.triads={M:["1P 3M 5P","3M 5P 8P","5P 8P 10M"],m:["1P 3m 5P","3m 5P 8P","5P 8P 10m"],o:["1P 3m 5d","3m 5d 8P","5d 8P 10m"],aug:["1P 3m 5A","3m 5A 8P","5A 8P 10m"]};var l=function(f){return function(d,g){return(0,u.voicingsInRange)(d,f,g)}};e.dictionaryVoicingFinder=l;var p=function(f){var d=f.dictionary,g=f.range,b=o(f,["dictionary","range"]);return(0,a.getBestVoicing)(t(t({},b),{range:g,finder:(0,e.dictionaryVoicingFinder)(d)}))};e.dictionaryVoicing=p})(dictionaryVoicing$1)),dictionaryVoicing$1}var minTopNoteDiff$1={},hasRequiredMinTopNoteDiff;function requireMinTopNoteDiff(){if(hasRequiredMinTopNoteDiff)return minTopNoteDiff$1;hasRequiredMinTopNoteDiff=1,minTopNoteDiff$1.__esModule=!0,minTopNoteDiff$1.minTopNoteDiff=void 0;var e=require$$0;function t(o,a){if(!a)return o[0];var u=function(l){return Math.abs(e.Note.midi(a[a.length-1])-e.Note.midi(l[l.length-1]))};return o.reduce(function(l,p){return u(p)<u(l)?p:l},o[0])}return minTopNoteDiff$1.minTopNoteDiff=t,minTopNoteDiff$1}var hasRequiredDist;function requireDist(){return hasRequiredDist||(hasRequiredDist=1,(function(e){e.__esModule=!0;var t=requireDictionaryVoicing(),o=requireMinTopNoteDiff(),a=requireGetBestVoicing(),u=requireTokenizeChord();e.default={tokenizeChord:u.tokenizeChord,getBestVoicing:a.getBestVoicing,dictionaryVoicing:t.dictionaryVoicing,dictionaryVoicingFinder:t.dictionaryVoicingFinder,lefthand:t.lefthand,guidetones:t.guidetones,triads:t.triads,minTopNoteDiff:o.minTopNoteDiff}})(dist)),dist}var distExports=requireDist();const _voicings=getDefaultExportFromCjs(distExports),simple={2:["1P 5P 8P 9M","1P 5P 8P 9M 12P","5P 8P 9M 12P"],5:["1P 5P 8P 12P","5P 8P 12P 15P"],6:["1P 5P 6M 8P 10M","1P 5P 8P 10M 13M","3M 5P 8P 10M 13M","5P 8P 10M 12P 13M"],7:["1P 5P 7m 8P 10M","1P 7m 8P 10M 12P","3M 7m 8P 10M 12P","3M 7m 8P 10M 14m","3M 7m 10M 12P 15P","7m 10M 12P 14m 15P","7m 10M 12P 15P 17M"],9:["1P 5P 7m 9M 10M","1P 7m 9M 10M 12P","3M 7m 8P 9M 12P","7m 9M 10M 14m 15P","3M 7m 8P 12P 16M","7m 10M 12P 15P 16M"],11:["1P 5P 7m 9M 11P","5P 7m 8P 9M 11P","7m 8P 9M 11P 12P","7m 8P 11P 12P 16M"],13:["1P 6M 7m 9M 10M","1P 7m 9M 10M 13M","3M 7m 8P 9M 13M","7m 8P 9M 10M 13M","7m 9M 10M 13M 15P"],69:["1P 5P 6M 9M 10M","1P 5P 9M 10M 13M","3M 5P 8P 9M 13M","5P 8P 9M 10M 13M"],add9:["1P 5P 8P 9M 10M","1P 5P 9M 10M 12P","3M 8P 9M 10M 12P","3M 8P 9M 12P 15P","5P 8P 9M 12P 17M"],"+":["1P 3M 6m 8P 10M","1P 6m 8P 10M 13m","3M 6m 8P 10M 13m","3M 8P 10M 13m 15P","6m 8P 10M 13m 15P","6m 10M 13m 15P 17M"],o:["1P 5d 8P 10m 12d","3m 8P 10m 12d 15P","5d 8P 10m 12d 15P"],h:["3m 5d 7m 8P 10m","1P 5d 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 7m 8P 10m 14m","5d 8P 10m 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],sus:["1P 4P 5P 8P","1P 4P 5P 8P 11P","5P 8P 11P 12P","5P 8P 11P 12P 15P"],"^":["1P 5P 8P 10M","1P 5P 8P 10M 12P","3M 5P 8P 10M 12P","3M 8P 10M 12P 15P","5P 8P 10M 12P 15P"],"-":["1P 3m 5P 8P 10m","1P 5P 8P 10m 12P","3m 5P 8P 10m 12P","5P 8P 10m 12P 15P"],"^7":["1P 5P 7M 10M 12P","1P 10M 12P 14M","3M 8P 10M 12P 14M","5P 8P 10M 12P 14M","5P 8P 10M 14M 17M"],"-7":["1P 3m 5P 7m 10m","1P 5P 7m 10m 12P","3m 7m 8P 10m 12P","3m 7m 8P 10m 14m","5P 7m 8P 10m 14m","7m 10m 12P 14m 15P","5P 8P 10m 14m 17m","7m 10m 12P 15P 17m"],"7sus":["1P 5P 7m 8P 11P","5P 8P 11P 12P 14m","7m 8P 11P 12P 14m","7m 11P 12P 14m 18P"],h7:["3m 5d 7m 8P 10m","1P 5d 7m 10m 12d","1P 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 7m 8P 10m 14m","5d 8P 10m 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],o7:["1P 6M 8P 10m 12d","1P 6M 10m 12d 13M","3m 8P 10m 12d 13M","3m 8P 12d 13M 15P","5d 10m 12d 13M 15P","5d 10m 13M 15P 17m","6M 12d 13M 15P 17m","6M 12d 15P 17m 19d"],"^9":["1P 5P 7M 9M 10M","1P 7M 9M 10M 12P","3M 7M 8P 9M 12P","3M 7M 8P 12P 16M","5P 8P 10M 14M 16M","7M 8P 10M 12P 16M"],"^13":["1P 6M 7M 9M 10M","1P 7M 9M 10M 13M","3M 7M 8P 9M 13M","3M 7M 8P 13M 16M","7M 8P 10M 13M 16M"],"^7#11":["1P 5P 7M 10M 12d","3M 7M 8P 10M 12d","1P 7M 10M 12d 14M","3M 7M 8P 12d 14M","5P 8P 10M 12d 14M"],"^9#11":["1P 3M 5d 7M 9M","1P 7M 9M 10M 12d","3M 7M 8P 9M 12d","3M 8P 9M 12d 14M"],"^7#5":["1P 6m 7M 10M 13m","3M 7M 8P 10M 13m","6m 7M 8P 10M 13m"],"-6":["1P 3m 5P 6M 8P","1P 5P 6M 8P 10m","3m 5P 6M 8P 10m","1P 5P 8P 10m 13M","3m 5P 8P 10m 13M","5P 8P 10m 12P 13M","5P 8P 10m 13M 15P"],"-69":["1P 3m 5P 6M 9M","3m 5P 6M 8P 9M","3m 6M 9M 10m 12P","1P 5P 9M 10m 13M","3m 5P 8P 9M 13M","5P 8P 9M 10m 13M","5P 8P 10m 13M 16M"],"-^7":["1P 3m 5P 7M 10m","1P 5P 7M 10m 12P","3m 7M 8P 10m 12P","5P 7M 8P 10m 14M","5P 8P 10m 14M 17m"],"-^9":["1P 3m 5P 7M 9M","1P 7M 9M 10m 12P","3m 7M 8P 9M 12P","5P 8P 9M 10m 14M"],"-9":["1P 3m 5P 7m 9M","3m 5P 7m 8P 9M","3m 7m 8P 9M 12P","5P 8P 9M 10m 14m","3m 7m 9M 12P 15P","7m 10m 12P 15P 16M"],"-add9":["1P 2M 3m 5P 8P","1P 3m 5P 9M","3m 5P 8P 9M 12P","5P 8P 9M 10m 12P"],"-11":["1P 3m 7m 9M 11P","3m 7m 8P 9M 11P","1P 4P 7m 10m 12P","5P 8P 11P 14m","3m 7m 9M 11P 15P","5P 8P 11P 14m 16M","7m 10m 12P 15P 18P"],"-7b5":["3m 5d 7m 8P 10m","1P 7m 10m 12d","1P 5d 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 7m 8P 10m 14m","5d 8P 10m 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],h9:["1P 7m 9M 10m 12d","3m 7m 8P 9M 12d","5d 8P 9M 10m 14m","7m 10m 12d 15P 16M"],"-b6":["1P 5P 6m 8P 10m","1P 5P 8P 10m 13m","3m 5P 8P 10m 13m","5P 8P 10m 13m","5P 8P 10m 13m 15P"],"-#5":["1P 6m 8P 10m 13m","3m 6m 8P 10m 13m","6m 8P 10m 13m 15P"],"7b9":["1P 3M 7m 9m 10M","3M 7m 8P 9m 10M","3M 7m 8P 9m 14m","7m 9m 10M 14m 15P"],"7#9":["1P 3M 7m 10m","3M 7m 8P 10m 14m","7m 10m 10M 14m 15P"],"7#11":["1P 3M 7m 10M 12d","3M 7m 8P 10M 12d","7m 10M 12d 14m 15P"],"7b5":["1P 3M 7m 10M 12d","3M 7m 8P 10M 12d","7m 10M 12d 14m 15P"],"7#5":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P"],"9#11":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9b5":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9#5":["1P 7m 9M 10M 13m","3M 7m 9M 10M 13m","3M 7m 9M 13m 14m","7m 10M 13m 14m 16M","7m 10M 13m 16M 17M"],"7b13":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P"],"7#9#5":["1P 3M 7m 10m 13m","3M 7m 10m 13m 15P","7m 10M 13m 15P 17m"],"7#9b5":["1P 3M 7m 10m 12d","3M 7m 10m 12d 15P","7m 10M 12d 15P 17m"],"7#9#11":["1P 3M 7m 10m 12d","3M 7m 10m 12d 15P","7m 10M 12d 15P 17m"],"7b9#11":["1P 7m 9m 10M 12d","3M 7m 8P 9m 12d","7m 8P 10M 12d 16m"],"7b9b5":["1P 7m 9m 10M 12d","3M 7m 8P 9m 12d","7m 8P 10M 12d 16m"],"7b9#5":["1P 7m 9m 10M 13m","3M 7m 8P 9m 13m","7m 9m 10M 13m 15P"],"7b9#9":["1P 3M 7m 9m 10m","3M 7m 8P 9m 10m","7m 8P 10M 16m 17m"],"7b9b13":["1P 7m 9m 10M 13m","3M 7m 8P 9m 13m","7m 9m 10M 13m 15P"],"7alt":["3M 7m 8P 9m 12d","1P 7m 10m 10M 13m","3M 7m 8P 10m 13m","3M 7m 9m 12d 15P","3M 7m 10m 13m 15P","7m 10M 12d 15P 17m","7m 10M 13m 15P 17m"],"13#11":["1P 6M 7m 10M 12d","3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"13b9":["1P 3M 6M 7m 9m","1P 6M 7m 9m 10M","3M 7m 9m 10M 13M","3M 7m 10M 13M 16m","7m 10M 13M 16m 17M"],"13#9":["1P 3M 6M 7m 10m","3M 7m 8P 10m 13M","7m 10M 13M 14m 17m"],"7b9sus":["1P 5P 7m 9m 11P","5P 7m 8P 9m 11P","7m 8P 11P 14m 16m"],"7susadd3":["1P 4P 5P 7m 10M","5P 8P 10M 11P 14m","7m 11P 12P 15P 17M"],"9sus":["1P 5P 7m 9M 11P","5P 7m 8P 9M 11P","7m 8P 9M 11P 12P","7m 8P 11P 12P 16M"],"13sus":["1P 4P 6M 7m 9M","1P 7m 9M 11P 13M","5P 7m 9M 11P 13M","7m 9M 11P 13M 15P"],"7b13sus":["1P 5P 7m 11P 13m","5P 7m 8P 11P 13m","7m 11P 13m 14m 15P"]},complex={2:["1P 5P 6M 8P 9M","1P 5P 8P 9M 12P","5P 8P 9M 12P 13M","5P 8P 9M 12P 15P"],5:["1P 5P 8P 12P","1P 5P 8P 9M 12P","5P 8P 12P 15P","5P 8P 12P 15P 16M"],6:["1P 5P 6M 9M 10M","1P 5P 9M 10M 13M","3M 5P 9M 10M 13M","5P 8P 9M 10M 13M","3M 6M 9M 12P 15P"],7:["1P 5P 7m 8P 10M","1P 7m 8P 10M 12P","3M 7m 8P 10M 12P","3M 7m 8P 10M 14m","3M 7m 10M 12P 15P","7m 10M 12P 14m 15P","7m 10M 12P 15P 17M","7m 10M 14m 17M 19P"],9:["1P 6M 7m 9M 10M","3M 7m 9M 10M 12P","1P 7m 9M 10M 13M","3M 7m 9M 10M 13M","3M 7m 9M 12P 15P","7m 10M 12P 13M 16M","7m 10M 13M 16M 17M","7m 10M 13M 16M 19P"],11:["1P 4P 6M 7m 9M","1P 5P 7m 9M 11P","4P 6M 7m 9M 11P","5P 8P 9M 11P 14m","7m 9M 11P 13M 15P","7m 11P 12P 14m 18P"],13:["3M 7m 9M 10M 13M","3M 7m 9M 13M 15P","3M 7m 10M 13M 16M","7m 10M 12P 13M 16M","7m 10M 13M 16M 17M","7m 10M 13M 16M 19P"],69:["1P 5P 6M 9M 10M","1P 5P 9M 10M 13M","3M 5P 9M 10M 13M","5P 8P 9M 10M 13M","3M 6M 9M 12P 15P"],add9:["1P 5P 8P 9M 10M","1P 5P 9M 10M 12P","3M 8P 9M 10M 12P","3M 8P 9M 12P 15P","5P 8P 9M 10M 15P","5P 8P 9M 12P 17M"],"+":["1P 6m 8P 9M 10M","1P 6m 8P 10M 13m","3M 8P 9M 10M 13m","3M 8P 10M 13m 15P","6m 10M 13m 15P 16M","6m 10M 13m 15P 17M"],o:["1P 6M 8P 10m 12d","1P 6M 10m 12d 13M","3m 8P 10m 12d 13M","3m 8P 12d 13M 15P","5d 10m 12d 13M 15P","5d 10m 13M 15P 17m","6M 12d 13M 15P 17m","6M 12d 15P 17m 19d"],h:["1P 5d 7m 10m 11P","3m 5d 7m 8P 11P","5d 7m 8P 10m 11P","1P 7m 10m 12d","3m 7m 8P 12d 14m","5d 8P 10m 11P 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],sus:["1P 4P 5P 8P 9M","1P 4P 5P 8P 11P","1P 5P 8P 9M 11P","5P 8P 9M 11P 12P","5P 8P 11P 12P 13M","5P 8P 11P 13M 15P"],"^":["1P 3M 5P 6M 9M","1P 5P 8P 10M 12P","3M 5P 9M 10M 12P","1P 5P 8P 10M 13M","3M 8P 10M 13M 15P","5P 9M 10M 12P 15P"],"-":["1P 3m 5P 8P 10m","1P 3m 5P 9M 11P","3m 5P 8P 9M 11P","5P 8P 9M 10m 11P","1P 5P 9M 10m 12P","3m 5P 8P 10m 12P","5P 8P 10m 12P 15P"],"^7":["1P 6M 7M 9M 10M","3M 7M 9M 10M 12P","1P 7M 9M 10M 13M","3M 7M 9M 10M 13M","3M 7M 9M 12P 13M","3M 7M 9M 13M 14M","3M 7M 10M 13M 16M","7M 10M 13M 14M 16M","7M 10M 13M 16M 17M","7M 10M 13M 16M 19P"],"-7":["1P 3m 5P 7m 9M","1P 3m 5P 7m 10m","1P 5P 7m 10m 11P","3m 7m 8P 10m 11P","1P 5P 7m 10m 12P","3m 7m 9M 10m 12P","3m 7m 8P 10m 14m","5P 7m 9M 10m 14m","7m 10m 11P 14m 15P","7m 10m 12P 15P 16M","5P 8P 11P 14m 17m","7m 10m 12P 15P 17m"],"7sus":["1P 4P 6M 7m 9M","1P 5P 7m 9M 11P","4P 6M 7m 9M 11P","5P 8P 9M 11P 14m","7m 9M 11P 13M 15P","7m 11P 12P 14m 18P"],h7:["1P 5d 7m 10m 11P","3m 5d 7m 8P 11P","5d 7m 8P 10m 11P","1P 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 8P 10m 11P 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],o7:["1P 6M 8P 10m 12d","1P 6M 10m 12d 13M","3m 8P 10m 12d 13M","3m 8P 12d 13M 15P","5d 10m 12d 13M 15P","5d 10m 13M 15P 17m","6M 12d 13M 15P 17m","6M 12d 15P 17m 19d"],"^9":["1P 6M 7M 9M 10M","1P 7M 9M 10M 13M","3M 7M 9M 10M 13M","3M 7M 9M 12P 13M","3M 7M 8P 9M 13M","3M 7M 9M 13M 14M","3M 7M 10M 13M 16M","7M 10M 13M 14M 16M","7M 10M 13M 16M 17M","7M 10M 13M 16M 19P"],"^13":["1P 6M 7M 9M 10M","1P 7M 9M 10M 13M","3M 7M 9M 12P 13M","3M 7M 9M 10M 13M","3M 7M 8P 9M 13M","3M 7M 9M 13M 14M","3M 7M 10M 13M 16M","7M 10M 13M 14M 16M","7M 10M 13M 16M 17M","7M 10M 13M 16M 19P"],"^7#11":["1P 3M 5d 7M 9M","1P 7M 9M 10M 12d","3M 7M 9M 10M 12d","3M 7M 9M 12d 13M","3M 7M 10M 12d 14M","7M 10M 12d 13M 14M","7M 10M 12d 13M 16M","7M 10M 12d 14M 17M"],"^9#11":["1P 3M 5d 7M 9M","1P 7M 9M 10M 12d","3M 7M 9M 10M 12d","3M 7M 9M 12d 13M","3M 7M 9M 12d 14M","7M 10M 12d 14M 16M","7M 10M 12d 13M 16M"],"^7#5":["1P 6m 7M 10M 13m","3M 7M 9M 10M 13m","3M 7M 10M 13m 14M","7M 10M 13m 14M 16M","7M 10M 13m 14M 17M"],"-6":["1P 3m 5P 6M 9M","3m 5P 6M 8P 9M","1P 5P 6M 10m 11P","3m 5P 6M 8P 11P","1P 5P 9M 10m 13M","3m 5P 8P 9M 13M","5P 8P 10m 11P 13M","5P 8P 10m 13M 16M"],"-69":["1P 3m 5P 6M 9M","3m 5P 6M 8P 9M","3m 6M 9M 10m 12P","1P 5P 9M 10m 13M","3m 5P 8P 9M 13M","5P 8P 9M 10m 13M","5P 8P 10m 13M 16M"],"-^7":["1P 3m 5P 7M 9M","1P 5P 7M 10m 11P","3m 7M 9M 10m 11P","3m 7M 9M 10m 12P","3m 7M 9M 12P 14M","7M 10m 11P 12P 14M","7M 10m 12P 14M 16M"],"-^9":["1P 3m 5P 7M 9M","1P 5P 7M 10m 11P","3m 7M 9M 10m 11P","3m 7M 9M 10m 12P","3m 7M 9M 12P 14M","7M 10m 11P 12P 14M","7M 10m 12P 14M 16M"],"-9":["1P 3m 5P 7m 9M","1P 3m 7m 9M 11P","3m 7m 9M 10m 11P","3m 7m 9M 10m 12P","3m 7m 9M 10m 14m","3m 7m 9M 12P 15P","7m 10m 11P 14m 16M","7m 10m 12P 16M 18P"],"-add9":["1P 2M 3m 5P 8P","1P 3m 5P 9M","3m 5P 8P 9M 12P","5P 8P 9M 10m 12P"],"-11":["3m 5P 7m 9M 11P","7m 9M 10m 11P","1P 4P 7m 10m 12P","3m 7m 9M 11P 12P","7m 9M 10m 11P 12P","3m 7m 9M 11P 14m","4P 10m 12P 14m","5P 8P 11P 14m","5P 8P 11P 14m 16M","7m 10m 12P 16M 18P","7m 10m 11P 16M 21m"],"-7b5":["1P 5d 7m 10m 11P","3m 5d 7m 8P 11P","5d 7m 8P 10m 11P","1P 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 8P 10m 11P 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],h9:["3m 5d 7m 9M 11P","1P 7m 9M 10m 12d","3m 7m 9M 12d 14m","5d 8P 9M 10m 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 16M"],"-b6":["1P 3m 5P 6m 8P","3m 5P 8P 11P 13m","5P 8P 10m 11P 13m"],"-#5":["1P 6m 8P 10m 13m","3m 6m 8P 11P 13m","6m 8P 10m 13m 15P"],"7b9":["1P 3M 7m 9m 10M","3M 7m 8P 9m 10M","3M 7m 8P 9m 14m","7m 9m 10M 14m 15P"],"7#9":["1P 3M 7m 10m","3M 7m 10m 10M 12P","3M 7m 10m 12P 14m","7m 10M 12P 14m 17m"],"7#11":["1P 3M 7m 9M 12d","3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"7b5":["1P 3M 7m 9M 12d","3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"7#5":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P","7m 10M 13m 14m 17M"],"9#11":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9b5":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9#5":["1P 7m 9M 10M 13m","3M 7m 9M 10M 13m","3M 7m 9M 13m 14m","7m 10M 13m 14m 16M","7m 10M 13m 16M 17M"],"7b13":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P","7m 10M 13m 14m 17M"],"7#9#5":["3M 7m 10m 10M 13m","3M 7m 10m 13m 14m","7m 10M 13m 14m 17m"],"7#9b5":["3M 7m 10m 10M 12d","3M 7m 10m 12d 14m","7m 10M 12d 14m 17m"],"7#9#11":["3M 7m 10m 10M 12d","3M 7m 10m 12d 14m","7m 10M 12d 14m 17m"],"7b9#11":["3M 7m 9m 10M 12d","3M 7m 9m 12d 14m","7m 8P 10M 12d 16m","7m 10M 12d 14m 16m"],"7b9b5":["3M 7m 9m 10M 12d","3M 7m 9m 12d 14m","7m 8P 10M 12d 16m","7m 10M 12d 14m 16m"],"7b9#5":["1P 7m 9m 10M 13m","3M 7m 9m 10M 13m","3M 7m 10M 13m 16m","7m 10M 13m 14m 16m","7m 10M 13m 16m 17M"],"7b9#9":["1P 3M 7m 9m 10m","3M 7m 10m 13m 16m","7m 10M 13m 16m 17m"],"7b9b13":["1P 7m 9m 10M 13m","3M 7m 9m 10M 13m","3M 7m 10M 13m 16m","7m 10M 13m 14m 16m","7m 10M 13m 16m 17M"],"7alt":["3M 7m 8P 10m 13m","3M 7m 9m 12d 13m","3M 7m 9m 10m 13m","3M 7m 10m 13m 14m","3M 7m 9m 12d 14m","3M 7m 10m 13m 15P","3M 7m 10m 13m 16m","7m 10M 12d 14m 16m","7m 10M 12d 13m 16m","7m 10M 13m 15P 17m","7m 10M 13m 16m 17m","7m 10M 13m 16m 19d"],"13#11":["3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"13b9":["3M 7m 9m 10M 13M","3M 7m 10M 13M 16m","7m 10M 13M 16m 17M"],"13#9":["3M 7m 10m 10M 13M","7m 10M 13M 14m 17m"],"7b9sus":["1P 5P 7m 9m 11P","5P 7m 8P 9m 11P","7m 8P 11P 14m 16m"],"7susadd3":["1P 4P 5P 7m 10M","5P 8P 10M 11P 14m","7m 11P 12P 15P 17M"],"9sus":["1P 4P 6M 7m 9M","1P 5P 7m 9M 11P","4P 6M 7m 9M 11P","5P 8P 9M 11P 14m","7m 9M 11P 13M 15P","7m 11P 12P 14m 18P"],"13sus":["1P 4P 6M 7m 9M","1P 7m 9M 11P 13M","4P 7m 9M 11P 13M","7m 9M 11P 13M 15P","7m 11P 13M 14m 16M","7m 11P 13M 16M 18P"],"7b13sus":["1P 5P 7m 11P 13m","5P 7m 8P 11P 13m","7m 11P 13m 14m 15P"]},{dictionaryVoicing,minTopNoteDiff}=_voicings.default||_voicings,lefthand={m7:["3m 5P 7m 9M","7m 9M 10m 12P"],7:["3M 6M 7m 9M","7m 9M 10M 13M"],"^7":["3M 5P 7M 9M","7M 9M 10M 12P"],69:["3M 5P 6A 9M"],m7b5:["3m 5d 7m 8P","7m 8P 10m 12d"],"7b9":["3M 6m 7m 9m","7m 9m 10M 13m"],"7b13":["3M 6m 7m 9m","7m 9m 10M 13m"],o7:["1P 3m 5d 6M","5d 6M 8P 10m"],"7#11":["7m 9M 11A 13A"],"7#9":["3M 7m 9A"],mM7:["3m 5P 7M 9M","7M 9M 10m 12P"],m6:["3m 5P 6M 9M","6M 9M 10m 12P"]},guidetones={m7:["3m 7m","7m 10m"],m9:["3m 7m","7m 10m"],7:["3M 7m","7m 10M"],"^7":["3M 7M","7M 10M"],"^9":["3M 7M","7M 10M"],69:["3M 6M"],6:["3M 6M","6M 10M"],m7b5:["3m 7m","7m 10m"],"7b9":["3M 7m","7m 10M"],"7b13":["3M 7m","7m 10M"],o7:["3m 6M","6M 10m"],"7#11":["3M 7m","7m 10M"],"7#9":["3M 7m","7m 10M"],mM7:["3m 7M","7M 10m"],m6:["3m 6M","6M 10m"]},triads={"":["1P 3M 5P","3M 5P 8P","5P 8P 10M"],M:["1P 3M 5P","3M 5P 8P","5P 8P 10M"],m:["1P 3m 5P","3m 5P 8P","5P 8P 10m"],o:["1P 3m 5d","3m 5d 8P","5d 8P 10m"],aug:["1P 3m 5A","3m 5A 8P","5A 8P 10m"]},defaultDictionary={"":["1P 3M 5P","3M 5P 8P","5P 8P 10M"],M:["1P 3M 5P","3M 5P 8P","5P 8P 10M"],m:["1P 3m 5P","3m 5P 8P","5P 8P 10m"],o:["1P 3m 5d","3m 5d 8P","5d 8P 10m"],aug:["1P 3m 5A","3m 5A 8P","5A 8P 10m"],m7:["3m 5P 7m 9M","7m 9M 10m 12P"],7:["3M 6M 7m 9M","7m 9M 10M 13M"],"^7":["3M 5P 7M 9M","7M 9M 10M 12P"],69:["3M 5P 6A 9M"],m7b5:["3m 5d 7m 8P","7m 8P 10m 12d"],"7b9":["3M 6m 7m 9m","7m 9m 10M 13m"],"7b13":["3M 6m 7m 9m","7m 9m 10M 13m"],o7:["1P 3m 5d 6M","5d 6M 8P 10m"],"7#11":["7m 9M 11A 13A"],"7#9":["3M 7m 9A"],mM7:["3m 5P 7M 9M","7M 9M 10m 12P"],m6:["3m 5P 6M 9M","6M 9M 10m 12P"]},voicingRegistry={lefthand:{dictionary:lefthand,range:["F3","A4"],mode:"below",anchor:"a4"},triads:{dictionary:triads,mode:"below",anchor:"a4"},guidetones:{dictionary:guidetones,mode:"above",anchor:"a4"},legacy:{dictionary:defaultDictionary,mode:"below",anchor:"a4"}};let defaultDict="ireal";const setDefaultVoicings=e=>defaultDict=e,setVoicingRange=(e,t)=>addVoicings(e,voicingRegistry[e].dictionary,t),addVoicings=(e,t,o=["F3","A4"])=>{Object.assign(voicingRegistry,{[e]:{dictionary:t,range:o}})},registerVoicings=(e,t,o={})=>{Object.assign(voicingRegistry,{[e]:{dictionary:t,...o}})},getVoicing=(e,t,o)=>{const{dictionary:a,range:u}=voicingRegistry[t];return dictionaryVoicing({chord:e,dictionary:a,range:u,picker:minTopNoteDiff,lastVoicing:o})};let lastVoicing;const voicings=register("voicings",function(e,t){return t.fmap(o=>(lastVoicing=getVoicing(o,e,lastVoicing),stack(...lastVoicing))).outerJoin()}),rootNotes=register("rootNotes",function(e,t){return t.fmap(o=>{const l=(o.chord||o).match(/^([a-gA-G][b#]?).*$/)[1]+e;return o.chord?{note:l}:l})}),voicing=register("voicing",function(e){return e.fmap(t=>{t=typeof t=="string"?{chord:t}:t;let{dictionary:o=defaultDict,chord:a,anchor:u,offset:l,mode:p,n:f,octaves:d,...g}=t;o=typeof o=="string"?voicingRegistry[o]:{dictionary:o,mode:"below",anchor:"c5"};try{let b=renderVoicing({...o,chord:a,anchor:u,offset:l,mode:p,n:f,octaves:d});return stack(...b).note().set(g)}catch{return logger$2(`[voicing]: unknown chord "${a}"`),silence}}).outerJoin()});function voicingAlias(e,t,o){o=Array.isArray(o)?o:[o],o.forEach(a=>{a[t]=a[e]})}voicingAlias("^","",[simple,complex]),Object.keys(simple).forEach(e=>{if(e.includes("-")){let t=e.replace("-","m");voicingAlias(e,t,[complex,simple])}if(e.includes("^")){let t=e.replace("^","M");voicingAlias(e,t,[complex,simple])}if(e.includes("+")){let t=e.replace("+","aug");voicingAlias(e,t,[complex,simple])}}),registerVoicings("ireal",simple),registerVoicings("ireal-ext",complex);function resetVoicings(){lastVoicing=void 0,setDefaultVoicings("ireal")}const packageName="@strudel/tonal",strudelTonal=Object.freeze(Object.defineProperty({__proto__:null,addVoicings,complex,packageName,registerVoicings,resetVoicings,rootNotes,scale,scaleTrans,scaleTranspose,setDefaultVoicings,setVoicingRange,simple,strans,trans,transpose,voicing,voicingAlias,voicingRegistry,voicings},Symbol.toStringTag,{value:"Module"})),{evalScope}=strudelCore,resolveSharedApp=()=>typeof globalThis!="object"?{}:(globalThis.App||(globalThis.App={}),globalThis.App),App$1=resolveSharedApp();App$1.scope_container_el=void 0,App$1.scope_canvas_el=void 0,App$1.scope_canvas_ctx=void 0,App$1.scope_analyser=void 0,App$1.scope_waveform=void 0,App$1.scope_animation_id=void 0,App$1.scope_connected=!1,App$1.scope_pixel_ratio=1,App$1.scope_enabled=!0,App$1.scope_color="rgba(204, 198, 239, 1)",App$1.scope_border_color="#444",App$1.scope_sine_time=0,App$1.get_scope_container=()=>(App$1.scope_container_el||(App$1.scope_container_el=DOM.el("#scope-visualizer")),App$1.scope_container_el),App$1.get_scope_canvas=()=>(App$1.scope_canvas_el||(App$1.scope_canvas_el=DOM.el("#scope-canvas")),App$1.scope_canvas_el),App$1.get_scope_dimensions=()=>{if(!App$1.scope_canvas_el)return{width:0,height:0};let e=App$1.scope_canvas_el.clientWidth,t=App$1.scope_canvas_el.clientHeight;return e||(e=App$1.scope_canvas_el.width/App$1.scope_pixel_ratio),t||(t=App$1.scope_canvas_el.height/App$1.scope_pixel_ratio),{width:Math.max(0,e||0),height:Math.max(0,t||0)}},App$1.setup_scope_canvas=()=>{let e=App$1.get_scope_canvas();if(e){if(!App$1.scope_canvas_ctx){let t=e.getContext("2d");if(!t){console.warn("Scope canvas context unavailable");return}App$1.scope_canvas_ctx=t}return App$1.resize_scope_canvas(),e}},App$1.resize_scope_canvas=()=>{if(!App$1.scope_canvas_el||!App$1.scope_canvas_ctx)return;let e=1;typeof window<"u"&&(e=window.devicePixelRatio||1),App$1.scope_pixel_ratio=e;let t=App$1.scope_canvas_el.clientWidth||App$1.scope_canvas_el.width/e||320,o=App$1.scope_canvas_el.clientHeight||App$1.scope_canvas_el.height/e||80,a=Math.max(1,Math.round(t*e)),u=Math.max(1,Math.round(o*e));(App$1.scope_canvas_el.width!==a||App$1.scope_canvas_el.height!==u)&&(App$1.scope_canvas_el.width=a,App$1.scope_canvas_el.height=u),App$1.scope_canvas_ctx.setTransform(1,0,0,1,0,0),App$1.scope_canvas_ctx.scale(e,e),App$1.clear_scope_canvas()},App$1.clear_scope_canvas=()=>{if(!App$1.scope_canvas_ctx)return;let{width:e,height:t}=App$1.get_scope_dimensions();!e||!t||(App$1.scope_canvas_ctx.fillStyle="rgba(21, 21, 21, 0.75)",App$1.scope_canvas_ctx.fillRect(0,0,e,t))},App$1.ensure_scope_waveform=()=>{if(App$1.scope_analyser)return(!App$1.scope_waveform||App$1.scope_waveform.length!==App$1.scope_analyser.fftSize)&&(App$1.scope_waveform=new Uint8Array(App$1.scope_analyser.fftSize)),App$1.scope_waveform},App$1.ensure_scope_analyser=()=>{if(App$1.scope_analyser)return App$1.scope_analyser;try{let t=getAudioContext().createAnalyser();t.fftSize=2048,t.minDecibels=-90,t.maxDecibels=-10,t.smoothingTimeConstant=.85,App$1.scope_analyser=t,App$1.ensure_scope_waveform()}catch(e){console.error("Failed to create scope analyser",e),App$1.scope_analyser=void 0,App$1.scope_waveform=void 0}return App$1.scope_analyser},App$1.connect_scope_analyser=()=>{if(App$1.scope_connected)return!0;let e=App$1.ensure_scope_analyser();if(!e)return!1;try{let o=getSuperdoughAudioController()?.output?.destinationGain;return o?(o.connect(e),App$1.scope_connected=!0,!0):(console.warn("Scope destination missing"),!1)}catch(t){return console.warn("Failed to connect scope analyser",t),!1}},App$1.stop_scope_loop=()=>{App$1.scope_animation_id&&(cancelAnimationFrame(App$1.scope_animation_id),App$1.scope_animation_id=void 0)},App$1.draw_scope_frame=()=>{if(!App$1.scope_enabled){App$1.stop_scope_loop();return}if(!App$1.scope_canvas_ctx){App$1.stop_scope_loop();return}let{width:e,height:t}=App$1.get_scope_dimensions();if(!e||!t){App$1.scope_animation_id=requestAnimationFrame(App$1.draw_scope_frame);return}App$1.scope_canvas_ctx.fillStyle="rgba(21, 21, 21, 0.33)",App$1.scope_canvas_ctx.fillRect(0,0,e,t),App$1.scope_canvas_ctx.strokeStyle=App$1.scope_color,App$1.scope_canvas_ctx.lineWidth=2,App$1.scope_canvas_ctx.beginPath();let o=App$1.scope_analyser,a=App$1.ensure_scope_waveform();if(App$1.is_playing&&o&&a){o.getByteTimeDomainData(a);let u=e/a.length,l=0;for(let p=0;p<a.length;p+=1){let d=a[p]/128-1,g=t/2+d*(t/2);p===0?App$1.scope_canvas_ctx.moveTo(l,g):App$1.scope_canvas_ctx.lineTo(l,g),l+=u}}else{App$1.scope_sine_time+=.012;let u=a?a.length:2048,l=e/u,p=0;for(let f=0;f<u;f+=1){let d=f/u*(Math.PI*2)*6,b=Math.sin(d+App$1.scope_sine_time)*.3,S=t/2+b*(t/2);f===0?App$1.scope_canvas_ctx.moveTo(p,S):App$1.scope_canvas_ctx.lineTo(p,S),p+=l}}App$1.scope_canvas_ctx.stroke(),App$1.scope_animation_id=requestAnimationFrame(App$1.draw_scope_frame)},App$1.start_scope_loop=()=>{App$1.scope_animation_id||(App$1.scope_animation_id=requestAnimationFrame(App$1.draw_scope_frame))},App$1.set_scope_visibility=e=>{let t=App$1.get_scope_container();t&&(e?t.classList.add("active"):t.classList.remove("active"))},App$1.stop_scope_visualizer=()=>{App$1.stop_scope_loop(),App$1.set_scope_visibility(!1),App$1.clear_scope_canvas()},App$1.try_start_scope_visualizer=()=>{!App$1.scope_enabled||!App$1.audio_started||!App$1.setup_scope_canvas()||App$1.ensure_scope_analyser()&&(!App$1.scope_connected&&!App$1.connect_scope_analyser()||(App$1.clear_scope_canvas(),App$1.start_scope_loop()))},App$1.enable_scope_visualizer=()=>{App$1.scope_enabled=!0,App$1.set_scope_visibility(!0),App$1.handle_scope_resize(),App$1.setup_scope_canvas()&&!App$1.scope_animation_id&&App$1.start_scope_loop(),App$1.try_start_scope_visualizer()},App$1.disable_scope_visualizer=()=>{App$1.scope_enabled=!1,App$1.stop_scope_visualizer()},App$1.handle_scope_resize=()=>{App$1.scope_canvas_el&&(App$1.resize_scope_canvas(),App$1.scope_enabled||App$1.clear_scope_canvas())},App$1.init_scope_checkbox=()=>{let e=DOM.el("#scope-checkbox");e&&(e.checked=App$1.scope_enabled,App$1.scope_enabled?App$1.enable_scope_visualizer():App$1.set_scope_visibility(!1),DOM.ev(e,"change",t=>{t.target.checked?App$1.enable_scope_visualizer():App$1.disable_scope_visualizer()}))},App$1.ensure_scope=()=>(App$1.scope_promise||(App$1.scope_promise=evalScope(strudelCore,strudelMini,strudelWebAudio,strudelTonal).catch(e=>{throw App$1.scope_promise=void 0,console.error("Strudel scope failed to load",e),e})),App$1.scope_promise),App.cached_songs=App.cached_songs||[],App.fetch_songs_list=async()=>{try{let e=await fetch("/songs/list");if(!e.ok)throw new Error("Failed to fetch songs list");let t=await e.json();return Array.isArray(t)?t:(console.error("Songs list payload was not an array"),[])}catch(e){return console.error("Error fetching songs",e),[]}},App.fetch_song_content=async e=>{try{let t=await fetch(`/songs/${e}.js`);if(!t.ok)throw new Error(`Failed to fetch song ${e}`);return await t.text()}catch(t){throw console.error("Error fetching song content",t),t}},App.open_songs_modal=async()=>{let e=DOM.el("#songs-modal"),t=DOM.el("#songs-list"),o=DOM.el("#songs-filter");e.classList.add("active"),t.innerHTML='<div class="loading">Loading songs...</div>',o&&(o.value="",o.disabled=!0,o.oninput=null,o.onkeydown=null);let a=await App.fetch_songs_list();if(App.cached_songs=a,!a.length){t.innerHTML='<div class="loading">No songs found</div>';return}let u=p=>{if(t.innerHTML="",!p.length){t.innerHTML='<div class="loading">No matching songs</div>';return}for(let f of p){let d=DOM.create("div");d.className="song-item",d.textContent=App.underspace(f),DOM.ev(d,"click",()=>App.load_song(f)),t.appendChild(d)}};if(u(App.cached_songs),!o)return;let l=()=>{let p=o.value.trim().toLowerCase();if(!p){u(App.cached_songs);return}let f=App.cached_songs.filter(d=>d.toLowerCase().includes(p));u(f)};o.disabled=!1,o.focus(),o.oninput=l,o.onkeydown=p=>{if(p.key!=="Enter")return;p.preventDefault();let f=DOM.els(".song-item",t);f&&f.click()}},App.close_songs_modal=()=>{DOM.el("#songs-modal").classList.remove("active")},App.load_song=async e=>{App.close_songs_modal();try{App.set_status(`Loading ${e}...`);let t=await App.fetch_song_content(e);App.stop_status_watch(),App.stop_color_cycle(),App.clear_draw_context(),App.last_code=null,App.code_scroll_active&&App.defer_code_scroll(App.code_scroll_song_pause_ms),await App.play_action(t),App.set_song_context(e),App.set_status(`Playing: ${App.underspace(e)}`)}catch(t){App.set_status(`Failed to load song: ${t.message}`),console.error("Failed to load song:",t)}};const startAppEvents=()=>{window?.App?.start_events&&window.App.start_events()};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{startAppEvents()},{once:!0}):startAppEvents()})();
