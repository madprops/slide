(function(){"use strict";const App$1={};window.App=App$1;const DOM$1={};DOM$1.dataset_obj={},DOM$1.dataset_id=0,DOM$1.el=(e,o=document)=>(typeof o=="string"&&(o=DOM$1.el(o)),o.querySelector(e)),DOM$1.els=(e,o=document)=>(typeof o=="string"&&(o=DOM$1.el(o)),Array.from(o.querySelectorAll(e))),DOM$1.el_or_self=(e,o=document)=>{o=DOM$1.element(o);let l=o.querySelector(e);return l||o.classList.contains(DOM$1.clean_dot(e))&&(l=o),l},DOM$1.els_or_self=(e,o=document)=>{o=DOM$1.element(o);let l=Array.from(o.querySelectorAll(e));return l.length===0&&o.classList.contains(DOM$1.clean_dot(e))&&(l=[o]),l},DOM$1.clone=e=>(e=DOM$1.element(e),e.cloneNode(!0)),DOM$1.clone_children=e=>{e=DOM$1.element(e);let o=Array.from(e.children),l=[];for(let d of o)l.push(DOM$1.clone(d));return l},DOM$1.dataset=(e,o,l)=>{if(e=DOM$1.element(e),!e)return;let d=e.dataset.dataset_id;if(d||(d=DOM$1.dataset_id,DOM$1.dataset_id+=1,e.dataset.dataset_id=d,DOM$1.dataset_obj[d]={}),l!==void 0)DOM$1.dataset_obj[d][o]=l;else return DOM$1.dataset_obj[d][o]},DOM$1.create=(e,o="",l="")=>{let d=document.createElement(e);if(o){let O=o.split(" ").filter(A=>A!=="");for(let A of O)d.classList.add(A)}return l&&(d.id=l),d},DOM$1.ev=(e,o,l,d)=>{e=DOM$1.element(e),e.addEventListener(o,l,d)},DOM$1.evs=(e,o,l,d)=>{e=DOM$1.element(e);for(let O of o)e.addEventListener(O,l,d)},DOM$1.index=e=>(e=DOM$1.element(e),Array.from(e.parentNode.children).indexOf(e)),DOM$1.class=(e,o)=>{e=DOM$1.element(e);for(let l of o)if(e.classList.contains(DOM$1.clean_dot(l)))return!0;return!1},DOM$1.parent=(e,o)=>{e=DOM$1.element(e);for(let l of o){let d=e.closest(l);if(d)return d}},DOM$1.clean_dot=e=>e.replace(".",""),DOM$1.show=(e,o=1)=>{e=DOM$1.element(e),e.classList.remove(DOM$1.hidden(o))},DOM$1.hide=(e,o=1)=>{e=DOM$1.element(e),e.classList.add(DOM$1.hidden(o))},DOM$1.hidden=(e=1)=>{let o="hidden";return e>1&&(o+=`_${e}`),o},DOM$1.is_hidden=(e,o=1)=>e.classList.contains(DOM$1.hidden(o)),DOM$1.element=e=>typeof e=="string"?DOM$1.el(e):e,typeof window<"u"&&(window.DOM=DOM$1);const NeedContext$1={};NeedContext$1.created=!1,NeedContext$1.after_show=()=>{},NeedContext$1.after_hide=()=>{},NeedContext$1.min_width="25px",NeedContext$1.min_height="25px",NeedContext$1.back_icon="⬅️",NeedContext$1.back_text="Back",NeedContext$1.clear_text="Clear",NeedContext$1.item_sep="4px",NeedContext$1.layers={},NeedContext$1.level=0,NeedContext$1.gap="0.5rem",NeedContext$1.side_padding="0.5rem",NeedContext$1.compact_padding="0.3rem",NeedContext$1.center_top=20,NeedContext$1.dragging=!1,NeedContext$1.autohide_delay=500,NeedContext$1.autoclick_delay=500,NeedContext$1.autohide_threshold=5,NeedContext$1.set_defaults=()=>{NeedContext$1.open=!1,NeedContext$1.mousedown=!1,NeedContext$1.first_mousedown=!1,NeedContext$1.keydown=!1,NeedContext$1.filtered=!1,NeedContext$1.last_x=0,NeedContext$1.last_y=0,NeedContext$1.layers={},NeedContext$1.mouse_activity={},NeedContext$1.autohide_enabled=!1,NeedContext$1.reset_debouncers()},NeedContext$1.clear_filter=()=>{NeedContext$1.filter.value="",NeedContext$1.do_filter(),NeedContext$1.filter.focus()},NeedContext$1.do_filter=()=>{let e=NeedContext$1.filter.value,o=NeedContext$1.remove_spaces_2(e).toLowerCase(),l=o.includes(":"),d=!1;for(let S of document.querySelectorAll(".needcontext-separator"))o?S.classList.add("needcontext-hidden"):S.classList.remove("needcontext-hidden");for(let S of document.querySelectorAll(".needcontext-text")){let $=S.closest(".needcontext-item"),F=S.textContent.toLowerCase();F=NeedContext$1.remove_spaces(F),l||(F=F.replace(/:/g,"")),F.includes(o)?($.classList.remove("needcontext-hidden"),d||(NeedContext$1.select_item(parseInt($.dataset.index)),d=!0)):$.classList.add("needcontext-hidden")}let O=document.querySelector("#needcontext-back"),A=document.querySelector("#needcontext-clear");if(NeedContext$1.filtered=o!=="",NeedContext$1.filtered){let S=document.querySelector("#needcontext-clear-text");S.textContent=e.trim(),A.classList.remove("needcontext-hidden"),O&&O.classList.add("needcontext-hidden")}else A.classList.add("needcontext-hidden"),O&&O.classList.remove("needcontext-hidden");NeedContext$1.scroll_to_selected()},NeedContext$1.def_args=(e,o)=>{for(let l in e)o[l]===void 0&&e[l]!==void 0&&(o[l]=e[l])},NeedContext$1.show=(e={})=>{let o={root:!0,expand:!1,picker_mode:!1,margin:0,compact:!1,autohide:!1,autoclick:!1};if(NeedContext$1.def_args(o,e),!e.items.length)return;if(NeedContext$1.reset_debouncers(),NeedContext$1.created||NeedContext$1.create(),e.e&&e.e.clientX!==void 0&&e.e.clientY!==void 0)e.x=e.e.clientX,e.y=e.e.clientY;else if(e.element){let E=e.element.getBoundingClientRect();e.x=E.left,e.y=E.top+e.margin}e.root&&(NeedContext$1.level=0);let l=e.x===void 0||e.y===void 0;if(e.items=e.items.slice(0),e.index===void 0){let E=e.items.filter(L=>!L.separator);for(let[L,N]of E.entries())if(N.selected){e.index=L;break}}e.index===void 0&&(e.index=0),e.index>=e.items.length&&(e.index=e.items.length-1);let d,O=NeedContext$1.get_layer();O?d=O.last_index:d=e.index,d=d||0;for(let[E,L]of e.items.entries())E===d?L.selected=!0:L.selected=!1;let A=0,S=NeedContext$1.container;if(S.innerHTML="",S.style.left="unset",S.style.top="unset",S.style.transform="unset",S.style.minWidth="unset",S.style.minHeight="unset",e.title&&!e.compact){let E=document.createElement("div");E.id="needcontext-title",e.title_icon&&(document.createElement("div").classList.add("needcontext-title-icon"),E.append(e.title_icon));let L=document.createElement("div");if(L.textContent=e.title.trim(),E.append(L),S.append(E),e.title_number){let N=document.createElement("div");N.classList.add("needcontext-title-number"),E.append(N)}S.classList.add("with_title"),S.classList.remove("without_title")}else S.classList.remove("with_title"),S.classList.add("without_title");e.root||S.append(NeedContext$1.back_button()),S.append(NeedContext$1.clear_button());let $=[];e.compact?S.classList.add("needcontext-compact"):S.classList.remove("needcontext-compact");for(let E of e.items){if(e.compact&&!E.icon)continue;let L=document.createElement("div");if(L.classList.add("needcontext-item"),E.separator)L.classList.add("needcontext-separator");else{if(L.classList.add("needcontext-normal"),E.highlight&&L.classList.add("needcontext-highlight"),E.image){let N=document.createElement("img");N.loading="lazy",N.addEventListener("error",V=>{V.target.classList.add("needcontext-hidden")}),N.classList.add("needcontext-image"),N.src=E.image,L.append(N)}if(E.icon){let N=document.createElement("div");N.classList.add("needcontext-icon"),E.icon_action&&N.addEventListener("click",V=>{E.icon_action(V,N)}),N.append(E.icon),L.append(N)}if(E.text){let N=document.createElement("div");N.classList.add("needcontext-text"),N.textContent=E.text.trim(),L.append(N)}if(e.compact){if(e.compact){let N=[E.text,E.info].filter(Boolean);L.title=N.join(" - ")}}else E.info&&(L.title=E.info.trim());E.bold&&L.classList.add("needcontext-bold"),E.direct_action&&L.addEventListener("click",()=>{E.direct_action(),NeedContext$1.hide()}),L.dataset.index=A,E.index=A,L.addEventListener("mousemove",()=>{let N=parseInt(L.dataset.index);NeedContext$1.index!==N&&NeedContext$1.select_item(N)}),A+=1,$.push(E)}e.on_drag&&(L.draggable=!0),E.element=L,E.picked=!1,S.append(L)}NeedContext$1.layers[NeedContext$1.level]={root:e.root,items:e.items,normal_items:$,last_index:d,x:e.x,y:e.y},NeedContext$1.main.classList.remove("needcontext-hidden"),NeedContext$1.update_title(),l&&(S.style.left="50%",S.style.transform="translateX(-50%)",e.y=NeedContext$1.center_top),e.y<5&&(e.y=5),e.x<5&&(e.x=5);let F=5;if(e.y+S.offsetHeight+5>window.innerHeight){let E=Math.abs(e.y+S.offsetHeight-window.innerHeight);e.y-=E+F}if(e.x+S.offsetWidth+5>window.innerWidth){let E=Math.abs(e.x+S.offsetWidth-window.innerWidth);e.x-=E+F}NeedContext$1.last_x=e.x,NeedContext$1.last_y=e.y,e.x=Math.max(e.x,0),e.y=Math.max(e.y,0),S.style.top=`${e.y}px`,l||(S.style.left=`${e.x}px`,S.style.transform="unset"),NeedContext$1.filter.value="",NeedContext$1.filter.focus(),e.expand&&e.element?S.style.minWidth=`${e.element.clientWidth}px`:S.style.minWidth=NeedContext$1.min_width,S.style.minHeight=NeedContext$1.min_height,NeedContext$1.filter.value="",NeedContext$1.filtered=!1,NeedContext$1.select_item(d),NeedContext$1.scroll_to_selected(),NeedContext$1.open=!0,NeedContext$1.after_show(),e.root&&(NeedContext$1.args=e)},NeedContext$1.hide=e=>{NeedContext$1.open&&(NeedContext$1.main.classList.add("needcontext-hidden"),NeedContext$1.set_defaults(),NeedContext$1.after_hide(),NeedContext$1.args.after_hide&&NeedContext$1.args.after_hide(e))},NeedContext$1.select_item=e=>{let o=Array.from(document.querySelectorAll(".needcontext-normal"));for(let l of o)parseInt(l.dataset.index)===e?l.classList.add("needcontext-item-selected"):l.classList.remove("needcontext-item-selected");NeedContext$1.index=e},NeedContext$1.scroll_to_selected=(e="center")=>{let o=document.querySelector(".needcontext-item-selected");o&&o.scrollIntoView({block:e})},NeedContext$1.select_next=(e="down",o=!1)=>{let l=!1,d,O=NeedContext$1.get_layer().normal_items.slice(0);O=O.filter(A=>!A.removed),e==="up"&&O.reverse();for(let A of O)if(NeedContext$1.is_visible(A.element)){if(d===void 0&&(d=A.index),l){NeedContext$1.select_item(A.index),NeedContext$1.scroll_to_selected("nearest");return}A.index===NeedContext$1.index&&(l=!0)}if(!o)return NeedContext$1.select_item(d),NeedContext$1.scroll_to_selected("nearest"),!0;NeedContext$1.select_next("up")},NeedContext$1.select_action=(e,o=NeedContext$1.index,l="mouse")=>{if(l==="mouse"&&!e.target.closest(".needcontext-normal"))return;let d=NeedContext$1.get_layer().normal_items[o];if(!d)return;let O=NeedContext$1.last_x,A=NeedContext$1.last_y,S=E=>{NeedContext$1.get_layer().last_index=o,NeedContext$1.level+=1,e.clientY&&(A=e.clientY),NeedContext$1.show({x:O,y:A,items:E,root:!1})},$=E=>{E.length===1&&E[0].direct?NeedContext$1.action(E[0],e):S(E)};async function F(){if(d.action){e.shiftKey?d.shift_action&&NeedContext$1.shift_action(d,e):e.ctrlKey?d.ctrl_action&&NeedContext$1.ctrl_action(d,e):e.altKey?d.alt_action&&NeedContext$1.alt_action(d,e):NeedContext$1.action(d,e);return}else if(d.items)$(d.items);else if(d.get_items){let E=await d.get_items();$(E)}}if(l==="keyboard"){F();return}e.button===0?e.shiftKey?d.shift_action&&NeedContext$1.shift_action(d,e):e.ctrlKey?d.ctrl_action&&NeedContext$1.ctrl_action(d,e):e.altKey?d.alt_action&&NeedContext$1.alt_action(d,e):F():e.button===1?d.middle_action&&NeedContext$1.middle_action(d,e):e.button===2&&d.context_action&&NeedContext$1.context_action(d,e)},NeedContext$1.is_visible=e=>!e.classList.contains("needcontext-hidden"),NeedContext$1.remove_spaces=e=>e.replace(/[\s-]+/g,""),NeedContext$1.remove_spaces_2=e=>e.replace(/\s+/g,""),NeedContext$1.init=()=>{let e=document.createElement("style"),o=`
    #needcontext-main {
      position: fixed;
      z-index: 999999999;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
    }

    .needcontext-hidden {
      display: none !important;
    }

    #needcontext-container {
      z-index: 2;
      position: absolute;
      background-color: white;
      color: black;
      font-size: 16px;
      font-family: sans-serif;
      display: flex;
      flex-direction: column;
      user-select: none;
      border: 1px solid #2B2F39;
      border-radius: 5px;
      padding-bottom: 5px;
      max-height: 80vh;
      overflow-y: auto;
      overflow-x: hidden;
      text-align: left;
      max-width: 98%;
    }

    #needcontext-container.needcontext-compact {
      flex-direction: row;
      flex-wrap: wrap;
      padding-left: ${NeedContext$1.compact_padding};
      padding-right: ${NeedContext$1.compact_padding};
    }

    .needcontext-compact .needcontext-text {
      display: none;
    }

    .needcontext-compact .needcontext-separator {
      display: none;
    }

    #needcontext-container.without_title {
      padding-top: 5px;
    }

    #needcontext-title {
      font-weight: bold;
      padding-left: ${NeedContext$1.side_padding};
      padding-right: ${NeedContext$1.side_padding};
      background-color: rgba(67, 220, 255, 0.47);
      padding-top: 4px;
      padding-bottom: 4px;
      margin-bottom: 2px;
      display: flex;
      flex-direction: row;
      gap: ${NeedContext$1.gap};
      align-items: center;
      justify-content: flex-start;
    }

    #needcontext-filter {
      opacity: 0;
    }

    .needcontext-item {
      white-space: nowrap;
      display: flex;
      flex-direction: row;
      align-items: center;
      gap: ${NeedContext$1.gap};
    }

    .needcontext-normal {
      padding-left: ${NeedContext$1.side_padding};
      padding-right: ${NeedContext$1.side_padding};
      padding-top: ${NeedContext$1.item_sep};
      padding-bottom: ${NeedContext$1.item_sep};
      cursor: pointer;
    }

    .needcontext-highlight {
      border: 1px solid currentColor !important;
      border-radius: 10px;
    }

    .needcontext-picked .needcontext-text {
      text-decoration: line-through;
      opacity: 0.7;
    }

    .needcontext-button {
      padding-left: ${NeedContext$1.side_padding};
      padding-right: ${NeedContext$1.side_padding};
      padding-top: ${NeedContext$1.item_sep};
      padding-bottom: ${NeedContext$1.item_sep};
      display: flex;
      flex-direction: row;
      align-items: center;
      gap: ${NeedContext$1.gap};
      cursor: pointer;
    }

    .needcontext-button:hover {
      text-shadow: 0 0 1rem currentColor;
    }

    .needcontext-separator {
      border-top: 1px solid currentColor;
      margin-left: ${NeedContext$1.side_padding};
      margin-right: ${NeedContext$1.side_padding};
      margin-top: ${NeedContext$1.item_sep};
      margin-bottom: ${NeedContext$1.item_sep};
      opacity: 0.7;
    }

    .needcontext-item-selected {
      background-color: rgba(0, 0, 0, 0.18);
    }

    .needcontext-icon {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .needcontext-image {
      width: 1.11rem;
      height: 1.11rem;
      object-fit: contain;
      margin-right: 0.1rem;
    }

    .needcontext-bold {
      font-weight: bold;
    }
  `;e.innerText=o,document.head.appendChild(e),document.addEventListener("mousedown",l=>{!NeedContext$1.open||!l.target||(NeedContext$1.first_mousedown=!0,l.target.closest("#needcontext-container")&&(NeedContext$1.mousedown=!0))}),document.addEventListener("mouseup",l=>{!NeedContext$1.open||!l.target||(l.target.closest("#needcontext-container")?l.target.closest(".needcontext-back")?l.button===0&&NeedContext$1.go_back():l.target.closest(".needcontext-clear")?l.button===0&&NeedContext$1.clear_filter():NeedContext$1.mousedown&&NeedContext$1.select_action(l):NeedContext$1.first_mousedown&&NeedContext$1.dismiss(l),NeedContext$1.mousedown=!1)}),document.addEventListener("mousemove",l=>{!NeedContext$1.open||!l.target||(NeedContext$1.check_mouse_range(l),NeedContext$1.check_auto_funcs(l))}),document.addEventListener("mouseover",l=>{!NeedContext$1.open||!l.target||(NeedContext$1.check_mouse_range(l),NeedContext$1.check_auto_funcs(l))}),document.documentElement.addEventListener("mouseleave",l=>{NeedContext$1.open&&NeedContext$1.args.autohide&&NeedContext$1.autohide_debouncer.call_2(l)}),document.addEventListener("keydown",l=>{NeedContext$1.open&&(NeedContext$1.keydown=!0,["ArrowUp","ArrowLeft"].includes(l.key)?(NeedContext$1.select_next("up"),l.preventDefault()):["ArrowDown","ArrowRight"].includes(l.key)?(NeedContext$1.select_next(),l.preventDefault()):l.key==="Backspace"&&(NeedContext$1.filtered||(NeedContext$1.go_back(),l.preventDefault())))}),document.addEventListener("keyup",l=>{NeedContext$1.open&&NeedContext$1.keydown&&(NeedContext$1.keydown=!1,l.key==="Escape"?(NeedContext$1.dismiss(l),l.preventDefault()):l.key==="Enter"&&(NeedContext$1.select_action(l,void 0,"keyboard"),l.preventDefault()))}),NeedContext$1.start_autohide(),NeedContext$1.start_autoclick(),NeedContext$1.set_defaults()},NeedContext$1.create=()=>{NeedContext$1.main=document.createElement("div"),NeedContext$1.main.id="needcontext-main",NeedContext$1.main.classList.add("needcontext-hidden"),NeedContext$1.container=document.createElement("div"),NeedContext$1.container.id="needcontext-container",NeedContext$1.filter=document.createElement("input"),NeedContext$1.filter.id="needcontext-filter",NeedContext$1.filter.type="text",NeedContext$1.filter.autocomplete="off",NeedContext$1.filter.spellcheck=!1,NeedContext$1.filter.placeholder="Filter",NeedContext$1.filter.addEventListener("input",e=>{NeedContext$1.do_filter()}),NeedContext$1.main.addEventListener("contextmenu",e=>{e.preventDefault()}),NeedContext$1.container.addEventListener("dragstart",e=>{NeedContext$1.dragging=!0,NeedContext$1.dragstart_action(e)}),NeedContext$1.container.addEventListener("dragenter",e=>{NeedContext$1.dragenter_action(e)}),NeedContext$1.container.addEventListener("dragend",e=>{NeedContext$1.dragging=!1,NeedContext$1.dragend_action(e)}),NeedContext$1.main.append(NeedContext$1.filter),NeedContext$1.main.append(NeedContext$1.container),document.body.appendChild(NeedContext$1.main),NeedContext$1.created=!0},NeedContext$1.dragstart_action=e=>{NeedContext$1.dragged_item=e.target;let o=NeedContext$1.container,l=Array.from(o.querySelectorAll(".needcontext-item"));NeedContext$1.dragged_index=l.indexOf(e.target)},NeedContext$1.dragenter_action=e=>{let o=NeedContext$1.dragged_item;if(o===e.target)return;let l=NeedContext$1.container,d=Array.from(l.querySelectorAll(".needcontext-item")),O=d.indexOf(o),A=d.indexOf(e.target);if(O<0||A<0)return;O<A?l.insertBefore(o,e.target.nextSibling):l.insertBefore(o,e.target),d=Array.from(l.querySelectorAll(".needcontext-item"));let S=d.indexOf(o),$=d.indexOf(e.target);o.dataset.index=S,e.target.dataset.index=$,NeedContext$1.select_item(S)},NeedContext$1.dragend_action=e=>{let o=NeedContext$1.container,l=NeedContext$1.dragged_item,O=Array.from(o.querySelectorAll(".needcontext-item")).indexOf(l);NeedContext$1.hide(e),NeedContext$1.args.on_drag(NeedContext$1.dragged_index,O)},NeedContext$1.get_layer=()=>NeedContext$1.layers[NeedContext$1.level],NeedContext$1.prev_layer=()=>NeedContext$1.layers[NeedContext$1.level-1],NeedContext$1.go_back=()=>{if(NeedContext$1.level===0)return;let e=NeedContext$1.prev_layer();NeedContext$1.level-=1;let o={x:e.x,y:e.y,items:e.items,root:e.root};o.compact=NeedContext$1.args.compact,o.autohide=NeedContext$1.args.autohide,o.autoclick=NeedContext$1.args.autoclick,NeedContext$1.show(o)},NeedContext$1.back_button=()=>{let e=document.createElement("div");e.id="needcontext-back",e.classList.add("needcontext-back"),e.classList.add("needcontext-button");let o=document.createElement("div");o.append(NeedContext$1.back_icon);let l=document.createElement("div");return l.textContent=NeedContext$1.back_text.trim(),e.append(o),e.append(l),e.title="Shortcut: Backspace",e},NeedContext$1.clear_button=()=>{let e=document.createElement("div");e.id="needcontext-clear",e.classList.add("needcontext-clear"),e.classList.add("needcontext-button"),e.classList.add("needcontext-hidden");let o=document.createElement("div");o.append(NeedContext$1.back_icon);let l=document.createElement("div");return l.id="needcontext-clear-text",l.textContent=NeedContext$1.clear_text.trim(),e.append(o),e.append(l),e.title="Type to filter. Click to clear",e},NeedContext$1.action=(e,o)=>{if(e.element&&(!NeedContext$1.is_visible(e.element)||o.target.closest(".needcontext-icon")&&e.icon_action))return;let l=NeedContext$1.args,d=NeedContext$1.args.after_action;if(l.picker_mode){e.element.classList.add("needcontext-picked"),NeedContext$1.filter.focus(),e.picked=!0;let O=!0;for(let A of l.items)if(!A.picked){O=!1;break}O&&NeedContext$1.hide(o)}else NeedContext$1.hide(o);e.action(o),d&&d(o)},NeedContext$1.dismiss=e=>{NeedContext$1.args.after_dismiss&&NeedContext$1.args.after_dismiss(e),NeedContext$1.hide(e)},NeedContext$1.shift_action=(e,o)=>{e.element&&!NeedContext$1.is_visible(e.element)||(NeedContext$1.args.after_shift_action&&NeedContext$1.args.after_shift_action(o),NeedContext$1.hide(o),e.shift_action(o))},NeedContext$1.ctrl_action=(e,o)=>{e.element&&!NeedContext$1.is_visible(e.element)||(NeedContext$1.args.after_ctrl_action&&NeedContext$1.args.after_ctrl_action(o),NeedContext$1.hide(o),e.ctrl_action(o))},NeedContext$1.alt_action=(e,o)=>{e.element&&!NeedContext$1.is_visible(e.element)||(NeedContext$1.args.after_alt_action&&NeedContext$1.args.after_alt_action(o),NeedContext$1.hide(o),e.alt_action(o))},NeedContext$1.middle_action=(e,o)=>{e.element&&!NeedContext$1.is_visible(e.element)||(NeedContext$1.args.after_middle_action&&NeedContext$1.args.after_middle_action(o),NeedContext$1.args.middle_action_remove?NeedContext$1.remove_item(e):NeedContext$1.hide(o),e.middle_action(o))},NeedContext$1.context_action=(e,o)=>{e.element&&!NeedContext$1.is_visible(e.element)||(NeedContext$1.args.after_context_action&&NeedContext$1.args.after_context_action(o),NeedContext$1.hide(o),e.context_action(o))},NeedContext$1.remove_item=e=>{NeedContext$1.select_next("down",!0),e.removed=!0,e.element.remove(),NeedContext$1.update_title()},NeedContext$1.update_title=()=>{let e=document.querySelector("#needcontext-title");if(!e)return;let o=e.querySelector(".needcontext-title-number");if(!o)return;let l=NeedContext$1.count_items();o.textContent=`(${l})`},NeedContext$1.count_items=()=>{let e=NeedContext$1.get_layer().normal_items;return e=e.filter(o=>!o.removed),e=e.filter(o=>!o.fake),e.length},NeedContext$1.create_debouncer=(e,o)=>{let l,d={};function O(){clearTimeout(l),l=void 0}function A(...S){e(...S)}return d.call=(...S)=>{O(),l=setTimeout(()=>{A(...S)},o)},d.call_2=(...S)=>{l||d.call(S)},d.now=(...S)=>{O(),A(...S)},d.cancel=()=>{O()},d},NeedContext$1.reset_debouncers=()=>{NeedContext$1.autohide_debouncer.cancel(),NeedContext$1.autoclick_debouncer.cancel()},NeedContext$1.check_auto_funcs=e=>{if(!NeedContext$1.open||!e.target)return;let o=e.target.id==="needcontext-main";if(o||NeedContext$1.reset_debouncers(),NeedContext$1.args.autohide&&o&&NeedContext$1.autohide_enabled&&NeedContext$1.autohide_debouncer.call_2(e),NeedContext$1.args.autoclick){let l=e.target.closest(".needcontext-item");l||(l=e.target.closest(".needcontext-back")),l&&NeedContext$1.autoclick_debouncer.call(l,e)}},NeedContext$1.check_mouse_range=e=>{if(NeedContext$1.autohide_enabled||e.target.id!=="needcontext-main")return;let o=e.clientX,l=e.clientY;if(NeedContext$1.mouse_activity.initial_x===void 0){NeedContext$1.mouse_activity.initial_x=o,NeedContext$1.mouse_activity.initial_y=l;return}let d=NeedContext$1.container.getBoundingClientRect();function O(A){let S=A>NeedContext$1.autohide_threshold;return S&&(NeedContext$1.autohide_enabled=!0),S}if(l<d.top&&l<NeedContext$1.mouse_activity.initial_y&&l<d.top){let A=d.top-l;if(O(A))return}if(l>d.bottom&&l>NeedContext$1.mouse_activity.initial_y&&l>d.bottom){let A=l-d.bottom;if(O(A))return}if(o<d.left&&o<NeedContext$1.mouse_activity.initial_x&&o<d.left){let A=d.left-o;if(O(A))return}if(o>d.right&&o>NeedContext$1.mouse_activity.initial_x&&o>d.right){let A=o-d.right;if(O(A))return}},NeedContext$1.start_autohide=e=>{NeedContext$1.autohide_debouncer=NeedContext$1.create_debouncer(o=>{NeedContext$1.hide(o)},e||NeedContext$1.autohide_delay)},NeedContext$1.start_autoclick=e=>{NeedContext$1.autoclick_debouncer=NeedContext$1.create_debouncer((o,l)=>{o.closest(".needcontext-item")?NeedContext$1.select_action(l):o.closest(".needcontext-back")&&NeedContext$1.go_back()},e||NeedContext$1.autoclick_delay)},typeof window<"u"&&(window.NeedContext=NeedContext$1),(function(e,o){var l=o(e);typeof module<"u"&&"exports"in module?module.exports=l:typeof define=="function"&&define.amd?define([],function(){return l}):e.jdenticon=l})(typeof self<"u"?self:void 0,function(e){function o(Ae,xe,ye){return parseInt(Ae.substr(xe,ye),16)}function l(Ae){return Ae|=0,Ae<0?"00":Ae<16?"0"+Ae.toString(16):Ae<256?Ae.toString(16):"ff"}function d(Ae,xe,ye){return ye=ye<0?ye+6:ye>6?ye-6:ye,l(255*(ye<1?Ae+(xe-Ae)*ye:ye<3?xe:ye<4?Ae+(xe-Ae)*(4-ye):Ae))}function O(Ae){if(/^#[0-9a-f]{3,8}$/i.test(Ae)){var xe,ye=Ae.length;if(ye<6){var ke=Ae[1],Qe=Ae[2],Ue=Ae[3],Xe=Ae[4]||"";xe="#"+ke+ke+Qe+Qe+Ue+Ue+Xe+Xe}return(ye==7||ye>8)&&(xe=Ae),xe}}function A(Ae){var xe=o(Ae,7,2),ye;if(isNaN(xe))ye=Ae;else{var ke=o(Ae,1,2),Qe=o(Ae,3,2),Ue=o(Ae,5,2);ye="rgba("+ke+","+Qe+","+Ue+","+(xe/255).toFixed(2)+")"}return ye}function S(Ae,xe,ye){var ke;if(xe==0){var Qe=l(ye*255);ke=Qe+Qe+Qe}else{var Ue=ye<=.5?ye*(xe+1):ye+xe-ye*xe,Xe=ye*2-Ue;ke=d(Xe,Ue,Ae*6+2)+d(Xe,Ue,Ae*6)+d(Xe,Ue,Ae*6-2)}return"#"+ke}function $(Ae,xe,ye){var ke=[.55,.5,.5,.46,.6,.55,.55],Qe=ke[Ae*6+.5|0];return ye=ye<.5?ye*Qe*2:Qe+(ye-.5)*(1-Qe)*2,S(Ae,xe,ye)}var F=e,E={G:"jdenticon_config",n:"config"},L={};function N(Ae){L=Ae}function V(Ae){return arguments.length&&(L[E.n]=Ae),L[E.n]}function B(Ae,xe){var ye=typeof Ae=="object"&&Ae||L[E.n]||F[E.G]||{},ke=ye.lightness||{},Qe=ye.saturation||{},Ue="color"in Qe?Qe.color:Qe,Xe=Qe.grayscale,ut=ye.backColor,Ie=ye.padding;function at(Vt,Wt){var Pt=ke[Vt];return Pt&&Pt.length>1||(Pt=Wt),function(kt){return kt=Pt[0]+kt*(Pt[1]-Pt[0]),kt<0?0:kt>1?1:kt}}function ft(Vt){var Wt=ye.hues,Pt;return Wt&&Wt.length>0&&(Pt=Wt[0|.999*Vt*Wt.length]),typeof Pt=="number"?(Pt/360%1+1)%1:Vt}return{X:ft,p:typeof Ue=="number"?Ue:.5,H:typeof Xe=="number"?Xe:0,q:at("color",[.4,.8]),I:at("grayscale",[.3,.9]),J:O(ut),Y:typeof Ae=="number"?Ae:typeof Ie=="number"?Ie:xe}}var U=1,q=2,ee={t:"data-jdenticon-hash",o:"data-jdenticon-value"},le="["+ee.t+"],["+ee.o+"]",ue=typeof document<"u"&&document.querySelectorAll.bind(document);function _e(Ae){if(Ae){var xe=Ae.tagName;if(/^svg$/i.test(xe))return U;if(/^canvas$/i.test(xe)&&"getContext"in Ae)return q}}function ie(Ae){if(typeof MutationObserver<"u"){var xe=new MutationObserver(function(ke){for(var Qe=0;Qe<ke.length;Qe++){for(var Ue=ke[Qe],Xe=Ue.addedNodes,ut=0;Xe&&ut<Xe.length;ut++){var Ie=Xe[ut];if(Ie.nodeType==1)if(_e(Ie))Ae(Ie);else for(var at=Ie.querySelectorAll(le),ft=0;ft<at.length;ft++)Ae(at[ft])}Ue.type=="attributes"&&_e(Ue.target)&&Ae(Ue.target)}});xe.observe(document.body,{childList:!0,attributes:!0,attributeFilter:[ee.o,ee.t,"width","height"],subtree:!0})}}function ae(Ae,xe){this.x=Ae,this.y=xe}function fe(Ae,xe,ye,ke){this.u=Ae,this.v=xe,this.K=ye,this.Z=ke}fe.prototype.L=function(xe,ye,ke,Qe){var Ue=this.u+this.K,Xe=this.v+this.K,ut=this.Z;return ut===1?new ae(Ue-ye-(Qe||0),this.v+xe):ut===2?new ae(Ue-xe-(ke||0),Xe-ye-(Qe||0)):ut===3?new ae(this.u+ye,Xe-xe-(ke||0)):new ae(this.u+xe,this.v+ye)};var Oe=new fe(0,0,0,0);function ve(Ae){this.M=Ae,this.A=Oe}var Re=ve.prototype;Re.g=function(xe,ye){for(var ke=this,Qe=ye?-2:2,Ue=[],Xe=ye?xe.length-2:0;Xe<xe.length&&Xe>=0;Xe+=Qe)Ue.push(ke.A.L(xe[Xe],xe[Xe+1]));this.M.g(Ue)},Re.h=function(xe,ye,ke,Qe){var Ue=this.A.L(xe,ye,ke,ke);this.M.h(Ue,ke,Qe)},Re.i=function(xe,ye,ke,Qe,Ue){this.g([xe,ye,xe+ke,ye,xe+ke,ye+Qe,xe,ye+Qe],Ue)},Re.j=function(xe,ye,ke,Qe,Ue,Xe){var ut=[xe+ke,ye,xe+ke,ye+Qe,xe,ye+Qe,xe,ye];ut.splice((Ue||0)%4*2,2),this.g(ut,Xe)},Re.N=function(xe,ye,ke,Qe,Ue){this.g([xe+ke/2,ye,xe+ke,ye+Qe/2,xe+ke/2,ye+Qe,xe,ye+Qe/2],Ue)};function Me(Ae,xe,ye,ke){Ae=Ae%14;var Qe,Ue,Xe,ut,Ie,at;Ae?Ae==1?(Xe=0|ye*.5,ut=0|ye*.8,xe.j(ye-Xe,0,Xe,ut,2)):Ae==2?(Xe=0|ye/3,xe.i(Xe,Xe,ye-Xe,ye-Xe)):Ae==3?(Ie=ye*.1,at=ye<6?1:ye<8?2:0|ye*.25,Ie=Ie>1?0|Ie:Ie>.5?1:Ie,xe.i(at,at,ye-Ie-at,ye-Ie-at)):Ae==4?(Ue=0|ye*.15,Xe=0|ye*.5,xe.h(ye-Xe-Ue,ye-Xe-Ue,Xe)):Ae==5?(Ie=ye*.1,at=Ie*4,at>3&&(at=0|at),xe.i(0,0,ye,ye),xe.g([at,at,ye-Ie,at,at+(ye-at-Ie)/2,ye-Ie],!0)):Ae==6?xe.g([0,0,ye,0,ye,ye*.7,ye*.4,ye*.4,ye*.7,ye,0,ye]):Ae==7?xe.j(ye/2,ye/2,ye/2,ye/2,3):Ae==8?(xe.i(0,0,ye,ye/2),xe.i(0,ye/2,ye/2,ye/2),xe.j(ye/2,ye/2,ye/2,ye/2,1)):Ae==9?(Ie=ye*.14,at=ye<4?1:ye<6?2:0|ye*.35,Ie=ye<8?Ie:0|Ie,xe.i(0,0,ye,ye),xe.i(at,at,ye-at-Ie,ye-at-Ie,!0)):Ae==10?(Ie=ye*.12,at=Ie*3,xe.i(0,0,ye,ye),xe.h(at,at,ye-Ie-at,!0)):Ae==11?xe.j(ye/2,ye/2,ye/2,ye/2,3):Ae==12?(Ue=ye*.25,xe.i(0,0,ye,ye),xe.N(Ue,Ue,ye-Ue,ye-Ue,!0)):!ke&&(Ue=ye*.4,Xe=ye*1.2,xe.h(Ue,Ue,Xe)):(Qe=ye*.42,xe.g([0,0,ye,0,ye,ye-Qe*2,ye-Qe,ye,0,ye]))}function Ye(Ae,xe,ye){Ae=Ae%4;var ke;Ae?Ae==1?xe.j(0,ye/2,ye,ye/2,0):Ae==2?xe.N(0,0,ye,ye):(ke=ye/6,xe.h(ke,ke,ye-2*ke)):xe.j(0,0,ye,ye,0)}function Te(Ae,xe){return Ae=xe.X(Ae),[$(Ae,xe.H,xe.I(0)),$(Ae,xe.p,xe.q(.5)),$(Ae,xe.H,xe.I(1)),$(Ae,xe.p,xe.q(1)),$(Ae,xe.p,xe.q(0))]}function Ge(Ae,xe,ye){var ke=B(ye,.08);ke.J&&Ae.m(ke.J);var Qe=Ae.k,Ue=.5+Qe*ke.Y|0;Qe-=Ue*2;var Xe=new ve(Ae),ut=0|Qe/4,Ie=0|Ue+Qe/2-ut*2,at=0|Ue+Qe/2-ut*2;function ft(Ft,hn,ct,At,Nt){var zt=o(xe,ct,1),fn=At?o(xe,At,1):0;Ae.O(Wt[Pt[Ft]]);for(var Cn=0;Cn<Nt.length;Cn++)Xe.A=new fe(Ie+Nt[Cn][0]*ut,at+Nt[Cn][1]*ut,ut,fn++%4),hn(zt,Xe,ut,Cn);Ae.P()}var Vt=o(xe,-7)/268435455,Wt=Te(Vt,ke),Pt=[],kt;function an(Ft){if(Ft.indexOf(kt)>=0){for(var hn=0;hn<Ft.length;hn++)if(Pt.indexOf(Ft[hn])>=0)return!0}}for(var Be=0;Be<3;Be++)kt=o(xe,8+Be,1)%Wt.length,(an([0,4])||an([2,3]))&&(kt=1),Pt.push(kt);ft(0,Ye,2,3,[[1,0],[2,0],[2,3],[1,3],[0,1],[3,1],[3,2],[0,2]]),ft(1,Ye,4,5,[[0,0],[3,0],[3,3],[0,3]]),ft(2,Me,1,null,[[1,1],[2,1],[2,2],[1,2]]),Ae.finish()}function Ne(Ae){var xe=40,ye=16,ke=0,Qe=0,Ue=encodeURI(Ae)+"%80",Xe=[],ut,Ie=[],at=1732584193,ft=4023233417,Vt=~at,Wt=~ft,Pt=3285377520,kt=[at,ft,Vt,Wt,Pt],an=0,Be="";function Ft(hn,ct){return hn<<ct|hn>>>32-ct}for(;ke<Ue.length;Qe++)Xe[Qe>>2]=Xe[Qe>>2]|(Ue[ke]=="%"?parseInt(Ue.substring(ke+1,ke+=3),16):Ue.charCodeAt(ke++))<<(3-(Qe&3))*8;for(ut=((Qe+7>>6)+1)*ye,Xe[ut-1]=Qe*8-8;an<ut;an+=ye){for(ke=0;ke<80;ke++)Qe=Ft(at,5)+Pt+(ke<20?(ft&Vt^~ft&Wt)+1518500249:ke<40?(ft^Vt^Wt)+1859775393:ke<60?(ft&Vt^ft&Wt^Vt&Wt)+2400959708:(ft^Vt^Wt)+3395469782)+(Ie[ke]=ke<ye?Xe[an+ke]|0:Ft(Ie[ke-3]^Ie[ke-8]^Ie[ke-14]^Ie[ke-16],1)),Pt=Wt,Wt=Vt,Vt=Ft(ft,30),ft=at,at=Qe;kt[0]=at=kt[0]+at|0,kt[1]=ft=kt[1]+ft|0,kt[2]=Vt=kt[2]+Vt|0,kt[3]=Wt=kt[3]+Wt|0,kt[4]=Pt=kt[4]+Pt|0}for(ke=0;ke<xe;ke++)Be+=(kt[ke>>3]>>>(7-(ke&7))*4&15).toString(16);return Be}function Je(Ae){return/^[0-9a-f]{11,}$/i.test(Ae)&&Ae}function je(Ae){return Ne(Ae==null?"":""+Ae)}function qe(Ae,xe){var ye=Ae.canvas,ke=ye.width,Qe=ye.height;Ae.save(),xe||(xe=Math.min(ke,Qe),Ae.translate((ke-xe)/2|0,(Qe-xe)/2|0)),this.l=Ae,this.k=xe,Ae.clearRect(0,0,xe,xe)}var et=qe.prototype;et.m=function(xe){var ye=this.l,ke=this.k;ye.fillStyle=A(xe),ye.fillRect(0,0,ke,ke)},et.O=function(xe){var ye=this.l;ye.fillStyle=A(xe),ye.beginPath()},et.P=function(){this.l.fill()},et.g=function(xe){var ye=this.l;ye.moveTo(xe[0].x,xe[0].y);for(var ke=1;ke<xe.length;ke++)ye.lineTo(xe[ke].x,xe[ke].y);ye.closePath()},et.h=function(xe,ye,ke){var Qe=this.l,Ue=ye/2;Qe.moveTo(xe.x+Ue,xe.y+Ue),Qe.arc(xe.x+Ue,xe.y+Ue,Ue,0,Math.PI*2,ke),Qe.closePath()},et.finish=function(){this.l.restore()};function Tt(Ae,xe,ye,ke){if(!Ae)throw new Error("No canvas specified.");Ge(new qe(Ae,ye),Je(xe)||je(xe),ke)}function Rt(Ae){return(Ae*10+.5|0)/10}function Qt(){this.B=""}var Fe=Qt.prototype;Fe.g=function(xe){for(var ye="",ke=0;ke<xe.length;ke++)ye+=(ke?"L":"M")+Rt(xe[ke].x)+" "+Rt(xe[ke].y);this.B+=ye+"Z"},Fe.h=function(xe,ye,ke){var Qe=ke?0:1,Ue=Rt(ye/2),Xe=Rt(ye),ut="a"+Ue+","+Ue+" 0 1,"+Qe+" ";this.B+="M"+Rt(xe.x)+" "+Rt(xe.y+ye/2)+ut+Xe+",0"+ut+-Xe+",0"};function pt(Ae){this.C,this.D={},this.R=Ae,this.k=Ae.k}var we=pt.prototype;we.m=function(xe){var ye=/^(#......)(..)?/.exec(xe),ke=ye[2]?o(ye[2],0)/255:1;this.R.m(ye[1],ke)},we.O=function(xe){this.C=this.D[xe]||(this.D[xe]=new Qt)},we.P=function(){},we.g=function(xe){this.C.g(xe)},we.h=function(xe,ye,ke){this.C.h(xe,ye,ke)},we.finish=function(){var xe=this,ye=this.D;for(var ke in ye)ye.hasOwnProperty(ke)&&xe.R.S(ke,ye[ke].B)};var xt={T:"http://www.w3.org/2000/svg",U:"width",V:"height"};function Ct(Ae){this.k=Ae,this.F='<svg xmlns="'+xt.T+'" width="'+Ae+'" height="'+Ae+'" viewBox="0 0 '+Ae+" "+Ae+'">'}var Ze=Ct.prototype;Ze.m=function(xe,ye){ye&&(this.F+='<rect width="100%" height="100%" fill="'+xe+'" opacity="'+ye.toFixed(2)+'"/>')},Ze.S=function(xe,ye){this.F+='<path fill="'+xe+'" d="'+ye+'"/>'},Ze.toString=function(){return this.F+"</svg>"};function St(Ae,xe,ye){var ke=new Ct(xe);return Ge(new pt(ke),Je(Ae)||je(Ae),ye),ke.toString()}function Lt(Ae,xe){for(var ye=[],ke=arguments.length-2;ke-- >0;)ye[ke]=arguments[ke+2];for(var Qe=document.createElementNS(xt.T,xe),Ue=0;Ue+1<ye.length;Ue+=2)Qe.setAttribute(ye[Ue],ye[Ue+1]);Ae.appendChild(Qe)}function cn(Ae){var xe=this.k=Math.min(Number(Ae.getAttribute(xt.U))||100,Number(Ae.getAttribute(xt.V))||100);for(this.W=Ae;Ae.firstChild;)Ae.removeChild(Ae.firstChild);Ae.setAttribute("viewBox","0 0 "+xe+" "+xe),Ae.setAttribute("preserveAspectRatio","xMidYMid meet")}var sn=cn.prototype;sn.m=function(xe,ye){ye&&Lt(this.W,"rect",xt.U,"100%",xt.V,"100%","fill",xe,"opacity",ye)},sn.S=function(xe,ye){Lt(this.W,"path","fill",xe,"d",ye)};function Xt(){ue&&on(le)}function on(Ae,xe,ye){bt(Ae,xe,ye,function(ke,Qe){if(Qe)return Qe==U?new pt(new cn(ke)):new qe(ke.getContext("2d"))})}function bt(Ae,xe,ye,ke){if(typeof Ae=="string"){if(ue)for(var Qe=ue(Ae),Ue=0;Ue<Qe.length;Ue++)bt(Qe[Ue],xe,ye,ke);return}var Xe=Je(xe)||xe!=null&&je(xe)||Je(Ae.getAttribute(ee.t))||Ae.hasAttribute(ee.o)&&je(Ae.getAttribute(ee.o));if(Xe){var ut=ke(Ae,_e(Ae));ut&&Ge(ut,Xe,ye)}}function un(Ae,xe){return this.each(function(ye,ke){on(ke,Ae,xe)}),this}var jt=Xt;N(jt),jt.configure=V,jt.drawIcon=Tt,jt.toSvg=St,jt.update=on,jt.updateCanvas=on,jt.updateSvg=on,jt.version="3.1.1",jt.bundle="browser-umd";var rn=F.jQuery;rn&&(rn.fn.jdenticon=un);function $n(){var Ae=(jt[E.n]||F[E.G]||{}).replaceMode;Ae!="never"&&(Xt(),Ae=="observe"&&ie(on))}return typeof setTimeout=="function"&&setTimeout($n,0),jt});const m$2=(function(){const e=String.fromCharCode,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",d={};function O(S,$){if(!d[S]){d[S]={};for(let F=0;F<S.length;F++)d[S][S.charAt(F)]=F}return d[S][$]}const A={compressToBase64:function(S){if(S==null)return"";const $=A._compress(S,6,function(F){return o.charAt(F)});switch($.length%4){default:case 0:return $;case 1:return $+"===";case 2:return $+"==";case 3:return $+"="}},decompressFromBase64:function(S){return S==null?"":S==""?null:A._decompress(S.length,32,function($){return O(o,S.charAt($))})},compressToUTF16:function(S){return S==null?"":A._compress(S,15,function($){return e($+32)})+" "},decompressFromUTF16:function(S){return S==null?"":S==""?null:A._decompress(S.length,16384,function($){return S.charCodeAt($)-32})},compressToUint8Array:function(S){const $=A.compress(S),F=new Uint8Array($.length*2);for(let E=0,L=$.length;E<L;E++){const N=$.charCodeAt(E);F[E*2]=N>>>8,F[E*2+1]=N%256}return F},decompressFromUint8Array:function(S){if(S==null)return A.decompress(S);{const $=new Array(S.length/2);for(let E=0,L=$.length;E<L;E++)$[E]=S[E*2]*256+S[E*2+1];const F=[];return $.forEach(function(E){F.push(e(E))}),A.decompress(F.join(""))}},compressToEncodedURIComponent:function(S){return S==null?"":A._compress(S,6,function($){return l.charAt($)})},decompressFromEncodedURIComponent:function(S){return S==null?"":S==""?null:(S=S.replace(/ /g,"+"),A._decompress(S.length,32,function($){return O(l,S.charAt($))}))},compress:function(S){return A._compress(S,16,function($){return e($)})},_compress:function(S,$,F){if(S==null)return"";let E,L;const N={},V={};let B="",U="",q="",ee=2,le=3,ue=2;const _e=[];let ie=0,ae=0,fe;for(fe=0;fe<S.length;fe+=1)if(B=S.charAt(fe),Object.prototype.hasOwnProperty.call(N,B)||(N[B]=le++,V[B]=!0),U=q+B,Object.prototype.hasOwnProperty.call(N,U))q=U;else{if(Object.prototype.hasOwnProperty.call(V,q)){if(q.charCodeAt(0)<256){for(E=0;E<ue;E++)ie=ie<<1,ae==$-1?(ae=0,_e.push(F(ie)),ie=0):ae++;for(L=q.charCodeAt(0),E=0;E<8;E++)ie=ie<<1|L&1,ae==$-1?(ae=0,_e.push(F(ie)),ie=0):ae++,L=L>>1}else{for(L=1,E=0;E<ue;E++)ie=ie<<1|L,ae==$-1?(ae=0,_e.push(F(ie)),ie=0):ae++,L=0;for(L=q.charCodeAt(0),E=0;E<16;E++)ie=ie<<1|L&1,ae==$-1?(ae=0,_e.push(F(ie)),ie=0):ae++,L=L>>1}ee--,ee==0&&(ee=Math.pow(2,ue),ue++),delete V[q]}else for(L=N[q],E=0;E<ue;E++)ie=ie<<1|L&1,ae==$-1?(ae=0,_e.push(F(ie)),ie=0):ae++,L=L>>1;ee--,ee==0&&(ee=Math.pow(2,ue),ue++),N[U]=le++,q=String(B)}if(q!==""){if(Object.prototype.hasOwnProperty.call(V,q)){if(q.charCodeAt(0)<256){for(E=0;E<ue;E++)ie=ie<<1,ae==$-1?(ae=0,_e.push(F(ie)),ie=0):ae++;for(L=q.charCodeAt(0),E=0;E<8;E++)ie=ie<<1|L&1,ae==$-1?(ae=0,_e.push(F(ie)),ie=0):ae++,L=L>>1}else{for(L=1,E=0;E<ue;E++)ie=ie<<1|L,ae==$-1?(ae=0,_e.push(F(ie)),ie=0):ae++,L=0;for(L=q.charCodeAt(0),E=0;E<16;E++)ie=ie<<1|L&1,ae==$-1?(ae=0,_e.push(F(ie)),ie=0):ae++,L=L>>1}ee--,ee==0&&(ee=Math.pow(2,ue),ue++),delete V[q]}else for(L=N[q],E=0;E<ue;E++)ie=ie<<1|L&1,ae==$-1?(ae=0,_e.push(F(ie)),ie=0):ae++,L=L>>1;ee--,ee==0&&(ee=Math.pow(2,ue),ue++)}for(L=2,E=0;E<ue;E++)ie=ie<<1|L&1,ae==$-1?(ae=0,_e.push(F(ie)),ie=0):ae++,L=L>>1;for(;;)if(ie=ie<<1,ae==$-1){_e.push(F(ie));break}else ae++;return _e.join("")},decompress:function(S){return S==null?"":S==""?null:A._decompress(S.length,32768,function($){return S.charCodeAt($)})},_decompress:function(S,$,F){const E=[];let L=4,N=4,V=3,B="";const U=[];let q,ee,le,ue,_e,ie,ae;const fe={val:F(0),position:$,index:1};for(q=0;q<3;q+=1)E[q]=String(q);for(le=0,_e=Math.pow(2,2),ie=1;ie!=_e;)ue=fe.val&fe.position,fe.position>>=1,fe.position==0&&(fe.position=$,fe.val=F(fe.index++)),le|=(ue>0?1:0)*ie,ie<<=1;switch(le){case 0:for(le=0,_e=Math.pow(2,8),ie=1;ie!=_e;)ue=fe.val&fe.position,fe.position>>=1,fe.position==0&&(fe.position=$,fe.val=F(fe.index++)),le|=(ue>0?1:0)*ie,ie<<=1;ae=e(le);break;case 1:for(le=0,_e=Math.pow(2,16),ie=1;ie!=_e;)ue=fe.val&fe.position,fe.position>>=1,fe.position==0&&(fe.position=$,fe.val=F(fe.index++)),le|=(ue>0?1:0)*ie,ie<<=1;ae=e(le);break;case 2:return""}for(E[3]=String(ae),ee=String(ae),U.push(String(ae));;){if(fe.index>S)return"";for(le=0,_e=Math.pow(2,V),ie=1;ie!=_e;)ue=fe.val&fe.position,fe.position>>=1,fe.position==0&&(fe.position=$,fe.val=F(fe.index++)),le|=(ue>0?1:0)*ie,ie<<=1;switch(ae=le){case 0:for(le=0,_e=Math.pow(2,8),ie=1;ie!=_e;)ue=fe.val&fe.position,fe.position>>=1,fe.position==0&&(fe.position=$,fe.val=F(fe.index++)),le|=(ue>0?1:0)*ie,ie<<=1;E[N++]=e(le),ae=N-1,L--;break;case 1:for(le=0,_e=Math.pow(2,16),ie=1;ie!=_e;)ue=fe.val&fe.position,fe.position>>=1,fe.position==0&&(fe.position=$,fe.val=F(fe.index++)),le|=(ue>0?1:0)*ie,ie<<=1;E[N++]=e(le),ae=N-1,L--;break;case 2:return U.join("")}if(L==0&&(L=Math.pow(2,V),V++),E[ae])B=String(E[ae]);else if(ae===N)B=ee+ee.charAt(0);else return null;U.push(B),E[N++]=ee+B.charAt(0),L--,ee=B,L==0&&(L=Math.pow(2,V),V++)}}};return A})();(function(){let e=[],o=[];(()=>{let f="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(t=>t?parseInt(t,36):1);for(let t=0,a=0;t<f.length;t++)(t%2?o:e).push(a=a+f[t])})();function l(f){if(f<768)return!1;for(let t=0,a=e.length;;){let u=t+a>>1;if(f<e[u])a=u;else if(f>=o[u])t=u+1;else return!0;if(t==a)return!1}}function d(f){return f>=127462&&f<=127487}const O=8205;function A(f,t,a=!0,u=!0){return(a?S:$)(f,t,u)}function S(f,t,a){if(t==f.length)return t;t&&E(f.charCodeAt(t))&&L(f.charCodeAt(t-1))&&t--;let u=F(f,t);for(t+=N(u);t<f.length;){let p=F(f,t);if(u==O||p==O||a&&l(p))t+=N(p),u=p;else if(d(p)){let g=0,b=t-2;for(;b>=0&&d(F(f,b));)g++,b-=2;if(g%2==0)break;t+=2}else break}return t}function $(f,t,a){for(;t>0;){let u=S(f,t-2,a);if(u<t)return u;t--}return 0}function F(f,t){let a=f.charCodeAt(t);if(!L(a)||t+1==f.length)return a;let u=f.charCodeAt(t+1);return E(u)?(a-55296<<10)+(u-56320)+65536:a}function E(f){return f>=56320&&f<57344}function L(f){return f>=55296&&f<56320}function N(f){return f<65536?1:2}class V{lineAt(t){if(t<0||t>this.length)throw new RangeError(`Invalid position ${t} in document of length ${this.length}`);return this.lineInner(t,!1,1,0)}line(t){if(t<1||t>this.lines)throw new RangeError(`Invalid line number ${t} in ${this.lines}-line document`);return this.lineInner(t,!0,1,0)}replace(t,a,u){[t,a]=fe(this,t,a);let p=[];return this.decompose(0,t,p,2),u.length&&u.decompose(0,u.length,p,3),this.decompose(a,this.length,p,1),U.from(p,this.length-(a-t)+u.length)}append(t){return this.replace(this.length,this.length,t)}slice(t,a=this.length){[t,a]=fe(this,t,a);let u=[];return this.decompose(t,a,u,0),U.from(u,a-t)}eq(t){if(t==this)return!0;if(t.length!=this.length||t.lines!=this.lines)return!1;let a=this.scanIdentical(t,1),u=this.length-this.scanIdentical(t,-1),p=new ue(this),g=new ue(t);for(let b=a,M=a;;){if(p.next(b),g.next(b),b=0,p.lineBreak!=g.lineBreak||p.done!=g.done||p.value!=g.value)return!1;if(M+=p.value.length,p.done||M>=u)return!0}}iter(t=1){return new ue(this,t)}iterRange(t,a=this.length){return new _e(this,t,a)}iterLines(t,a){let u;if(t==null)u=this.iter();else{a==null&&(a=this.lines+1);let p=this.line(t).from;u=this.iterRange(p,Math.max(p,a==this.lines+1?this.length:a<=1?0:this.line(a-1).to))}return new ie(u)}toString(){return this.sliceString(0)}toJSON(){let t=[];return this.flatten(t),t}constructor(){}static of(t){if(t.length==0)throw new RangeError("A document must have at least one line");return t.length==1&&!t[0]?V.empty:t.length<=32?new B(t):U.from(B.split(t,[]))}}class B extends V{constructor(t,a=q(t)){super(),this.text=t,this.length=a}get lines(){return this.text.length}get children(){return null}lineInner(t,a,u,p){for(let g=0;;g++){let b=this.text[g],M=p+b.length;if((a?u:M)>=t)return new ae(p,M,u,b);p=M+1,u++}}decompose(t,a,u,p){let g=t<=0&&a>=this.length?this:new B(le(this.text,t,a),Math.min(a,this.length)-Math.max(0,t));if(p&1){let b=u.pop(),M=ee(g.text,b.text.slice(),0,g.length);if(M.length<=32)u.push(new B(M,b.length+g.length));else{let k=M.length>>1;u.push(new B(M.slice(0,k)),new B(M.slice(k)))}}else u.push(g)}replace(t,a,u){if(!(u instanceof B))return super.replace(t,a,u);[t,a]=fe(this,t,a);let p=ee(this.text,ee(u.text,le(this.text,0,t)),a),g=this.length+u.length-(a-t);return p.length<=32?new B(p,g):U.from(B.split(p,[]),g)}sliceString(t,a=this.length,u=`
`){[t,a]=fe(this,t,a);let p="";for(let g=0,b=0;g<=a&&b<this.text.length;b++){let M=this.text[b],k=g+M.length;g>t&&b&&(p+=u),t<k&&a>g&&(p+=M.slice(Math.max(0,t-g),a-g)),g=k+1}return p}flatten(t){for(let a of this.text)t.push(a)}scanIdentical(){return 0}static split(t,a){let u=[],p=-1;for(let g of t)u.push(g),p+=g.length+1,u.length==32&&(a.push(new B(u,p)),u=[],p=-1);return p>-1&&a.push(new B(u,p)),a}}class U extends V{constructor(t,a){super(),this.children=t,this.length=a,this.lines=0;for(let u of t)this.lines+=u.lines}lineInner(t,a,u,p){for(let g=0;;g++){let b=this.children[g],M=p+b.length,k=u+b.lines-1;if((a?k:M)>=t)return b.lineInner(t,a,u,p);p=M+1,u=k+1}}decompose(t,a,u,p){for(let g=0,b=0;b<=a&&g<this.children.length;g++){let M=this.children[g],k=b+M.length;if(t<=k&&a>=b){let R=p&((b<=t?1:0)|(k>=a?2:0));b>=t&&k<=a&&!R?u.push(M):M.decompose(t-b,a-b,u,R)}b=k+1}}replace(t,a,u){if([t,a]=fe(this,t,a),u.lines<this.lines)for(let p=0,g=0;p<this.children.length;p++){let b=this.children[p],M=g+b.length;if(t>=g&&a<=M){let k=b.replace(t-g,a-g,u),R=this.lines-b.lines+k.lines;if(k.lines<R>>4&&k.lines>R>>6){let Z=this.children.slice();return Z[p]=k,new U(Z,this.length-(a-t)+u.length)}return super.replace(g,M,k)}g=M+1}return super.replace(t,a,u)}sliceString(t,a=this.length,u=`
`){[t,a]=fe(this,t,a);let p="";for(let g=0,b=0;g<this.children.length&&b<=a;g++){let M=this.children[g],k=b+M.length;b>t&&g&&(p+=u),t<k&&a>b&&(p+=M.sliceString(t-b,a-b,u)),b=k+1}return p}flatten(t){for(let a of this.children)a.flatten(t)}scanIdentical(t,a){if(!(t instanceof U))return 0;let u=0,[p,g,b,M]=a>0?[0,0,this.children.length,t.children.length]:[this.children.length-1,t.children.length-1,-1,-1];for(;;p+=a,g+=a){if(p==b||g==M)return u;let k=this.children[p],R=t.children[g];if(k!=R)return u+k.scanIdentical(R,a);u+=k.length+1}}static from(t,a=t.reduce((u,p)=>u+p.length+1,-1)){let u=0;for(let oe of t)u+=oe.lines;if(u<32){let oe=[];for(let de of t)de.flatten(oe);return new B(oe,a)}let p=Math.max(32,u>>5),g=p<<1,b=p>>1,M=[],k=0,R=-1,Z=[];function j(oe){let de;if(oe.lines>g&&oe instanceof U)for(let be of oe.children)j(be);else oe.lines>b&&(k>b||!k)?(K(),M.push(oe)):oe instanceof B&&k&&(de=Z[Z.length-1])instanceof B&&oe.lines+de.lines<=32?(k+=oe.lines,R+=oe.length+1,Z[Z.length-1]=new B(de.text.concat(oe.text),de.length+1+oe.length)):(k+oe.lines>p&&K(),k+=oe.lines,R+=oe.length+1,Z.push(oe))}function K(){k!=0&&(M.push(Z.length==1?Z[0]:U.from(Z,R)),R=-1,k=Z.length=0)}for(let oe of t)j(oe);return K(),M.length==1?M[0]:new U(M,a)}}V.empty=new B([""],0);function q(f){let t=-1;for(let a of f)t+=a.length+1;return t}function ee(f,t,a=0,u=1e9){for(let p=0,g=0,b=!0;g<f.length&&p<=u;g++){let M=f[g],k=p+M.length;k>=a&&(k>u&&(M=M.slice(0,u-p)),p<a&&(M=M.slice(a-p)),b?(t[t.length-1]+=M,b=!1):t.push(M)),p=k+1}return t}function le(f,t,a){return ee(f,[""],t,a)}class ue{constructor(t,a=1){this.dir=a,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[t],this.offsets=[a>0?1:(t instanceof B?t.text.length:t.children.length)<<1]}nextInner(t,a){for(this.done=this.lineBreak=!1;;){let u=this.nodes.length-1,p=this.nodes[u],g=this.offsets[u],b=g>>1,M=p instanceof B?p.text.length:p.children.length;if(b==(a>0?M:0)){if(u==0)return this.done=!0,this.value="",this;a>0&&this.offsets[u-1]++,this.nodes.pop(),this.offsets.pop()}else if((g&1)==(a>0?0:1)){if(this.offsets[u]+=a,t==0)return this.lineBreak=!0,this.value=`
`,this;t--}else if(p instanceof B){let k=p.text[b+(a<0?-1:0)];if(this.offsets[u]+=a,k.length>Math.max(0,t))return this.value=t==0?k:a>0?k.slice(t):k.slice(0,k.length-t),this;t-=k.length}else{let k=p.children[b+(a<0?-1:0)];t>k.length?(t-=k.length,this.offsets[u]+=a):(a<0&&this.offsets[u]--,this.nodes.push(k),this.offsets.push(a>0?1:(k instanceof B?k.text.length:k.children.length)<<1))}}}next(t=0){return t<0&&(this.nextInner(-t,-this.dir),t=this.value.length),this.nextInner(t,this.dir)}}class _e{constructor(t,a,u){this.value="",this.done=!1,this.cursor=new ue(t,a>u?-1:1),this.pos=a>u?t.length:0,this.from=Math.min(a,u),this.to=Math.max(a,u)}nextInner(t,a){if(a<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;t+=Math.max(0,a<0?this.pos-this.to:this.from-this.pos);let u=a<0?this.pos-this.from:this.to-this.pos;t>u&&(t=u),u-=t;let{value:p}=this.cursor.next(t);return this.pos+=(p.length+t)*a,this.value=p.length<=u?p:a<0?p.slice(p.length-u):p.slice(0,u),this.done=!this.value,this}next(t=0){return t<0?t=Math.max(t,this.from-this.pos):t>0&&(t=Math.min(t,this.to-this.pos)),this.nextInner(t,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class ie{constructor(t){this.inner=t,this.afterBreak=!0,this.value="",this.done=!1}next(t=0){let{done:a,lineBreak:u,value:p}=this.inner.next(t);return a&&this.afterBreak?(this.value="",this.afterBreak=!1):a?(this.done=!0,this.value=""):u?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=p,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(V.prototype[Symbol.iterator]=function(){return this.iter()},ue.prototype[Symbol.iterator]=_e.prototype[Symbol.iterator]=ie.prototype[Symbol.iterator]=function(){return this});class ae{constructor(t,a,u,p){this.from=t,this.to=a,this.number=u,this.text=p}get length(){return this.to-this.from}}function fe(f,t,a){return t=Math.max(0,Math.min(f.length,t)),[t,Math.max(t,Math.min(f.length,a))]}function Oe(f,t,a=!0,u=!0){return A(f,t,a,u)}function ve(f){return f>=56320&&f<57344}function Re(f){return f>=55296&&f<56320}function Me(f,t){let a=f.charCodeAt(t);if(!Re(a)||t+1==f.length)return a;let u=f.charCodeAt(t+1);return ve(u)?(a-55296<<10)+(u-56320)+65536:a}function Ye(f){return f<=65535?String.fromCharCode(f):(f-=65536,String.fromCharCode((f>>10)+55296,(f&1023)+56320))}function Te(f){return f<65536?1:2}const Ge=/\r\n?|\n/;var Ne=(function(f){return f[f.Simple=0]="Simple",f[f.TrackDel=1]="TrackDel",f[f.TrackBefore=2]="TrackBefore",f[f.TrackAfter=3]="TrackAfter",f})(Ne||(Ne={}));class Je{constructor(t){this.sections=t}get length(){let t=0;for(let a=0;a<this.sections.length;a+=2)t+=this.sections[a];return t}get newLength(){let t=0;for(let a=0;a<this.sections.length;a+=2){let u=this.sections[a+1];t+=u<0?this.sections[a]:u}return t}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(t){for(let a=0,u=0,p=0;a<this.sections.length;){let g=this.sections[a++],b=this.sections[a++];b<0?(t(u,p,g),p+=g):p+=b,u+=g}}iterChangedRanges(t,a=!1){Tt(this,t,a)}get invertedDesc(){let t=[];for(let a=0;a<this.sections.length;){let u=this.sections[a++],p=this.sections[a++];p<0?t.push(u,p):t.push(p,u)}return new Je(t)}composeDesc(t){return this.empty?t:t.empty?this:Qt(this,t)}mapDesc(t,a=!1){return t.empty?this:Rt(this,t,a)}mapPos(t,a=-1,u=Ne.Simple){let p=0,g=0;for(let b=0;b<this.sections.length;){let M=this.sections[b++],k=this.sections[b++],R=p+M;if(k<0){if(R>t)return g+(t-p);g+=M}else{if(u!=Ne.Simple&&R>=t&&(u==Ne.TrackDel&&p<t&&R>t||u==Ne.TrackBefore&&p<t||u==Ne.TrackAfter&&R>t))return null;if(R>t||R==t&&a<0&&!M)return t==p||a<0?g:g+k;g+=k}p=R}if(t>p)throw new RangeError(`Position ${t} is out of range for changeset of length ${p}`);return g}touchesRange(t,a=t){for(let u=0,p=0;u<this.sections.length&&p<=a;){let g=this.sections[u++],b=this.sections[u++],M=p+g;if(b>=0&&p<=a&&M>=t)return p<t&&M>a?"cover":!0;p=M}return!1}toString(){let t="";for(let a=0;a<this.sections.length;){let u=this.sections[a++],p=this.sections[a++];t+=(t?" ":"")+u+(p>=0?":"+p:"")}return t}toJSON(){return this.sections}static fromJSON(t){if(!Array.isArray(t)||t.length%2||t.some(a=>typeof a!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Je(t)}static create(t){return new Je(t)}}class je extends Je{constructor(t,a){super(t),this.inserted=a}apply(t){if(this.length!=t.length)throw new RangeError("Applying change set to a document with the wrong length");return Tt(this,(a,u,p,g,b)=>t=t.replace(p,p+(u-a),b),!1),t}mapDesc(t,a=!1){return Rt(this,t,a,!0)}invert(t){let a=this.sections.slice(),u=[];for(let p=0,g=0;p<a.length;p+=2){let b=a[p],M=a[p+1];if(M>=0){a[p]=M,a[p+1]=b;let k=p>>1;for(;u.length<k;)u.push(V.empty);u.push(b?t.slice(g,g+b):V.empty)}g+=b}return new je(a,u)}compose(t){return this.empty?t:t.empty?this:Qt(this,t,!0)}map(t,a=!1){return t.empty?this:Rt(this,t,a,!0)}iterChanges(t,a=!1){Tt(this,t,a)}get desc(){return Je.create(this.sections)}filter(t){let a=[],u=[],p=[],g=new Fe(this);e:for(let b=0,M=0;;){let k=b==t.length?1e9:t[b++];for(;M<k||M==k&&g.len==0;){if(g.done)break e;let Z=Math.min(g.len,k-M);qe(p,Z,-1);let j=g.ins==-1?-1:g.off==0?g.ins:0;qe(a,Z,j),j>0&&et(u,a,g.text),g.forward(Z),M+=Z}let R=t[b++];for(;M<R;){if(g.done)break e;let Z=Math.min(g.len,R-M);qe(a,Z,-1),qe(p,Z,g.ins==-1?-1:g.off==0?g.ins:0),g.forward(Z),M+=Z}}return{changes:new je(a,u),filtered:Je.create(p)}}toJSON(){let t=[];for(let a=0;a<this.sections.length;a+=2){let u=this.sections[a],p=this.sections[a+1];p<0?t.push(u):p==0?t.push([u]):t.push([u].concat(this.inserted[a>>1].toJSON()))}return t}static of(t,a,u){let p=[],g=[],b=0,M=null;function k(Z=!1){if(!Z&&!p.length)return;b<a&&qe(p,a-b,-1);let j=new je(p,g);M=M?M.compose(j.map(M)):j,p=[],g=[],b=0}function R(Z){if(Array.isArray(Z))for(let j of Z)R(j);else if(Z instanceof je){if(Z.length!=a)throw new RangeError(`Mismatched change set length (got ${Z.length}, expected ${a})`);k(),M=M?M.compose(Z.map(M)):Z}else{let{from:j,to:K=j,insert:oe}=Z;if(j>K||j<0||K>a)throw new RangeError(`Invalid change range ${j} to ${K} (in doc of length ${a})`);let de=oe?typeof oe=="string"?V.of(oe.split(u||Ge)):oe:V.empty,be=de.length;if(j==K&&be==0)return;j<b&&k(),j>b&&qe(p,j-b,-1),qe(p,K-j,be),et(g,p,de),b=K}}return R(t),k(!M),M}static empty(t){return new je(t?[t,-1]:[],[])}static fromJSON(t){if(!Array.isArray(t))throw new RangeError("Invalid JSON representation of ChangeSet");let a=[],u=[];for(let p=0;p<t.length;p++){let g=t[p];if(typeof g=="number")a.push(g,-1);else{if(!Array.isArray(g)||typeof g[0]!="number"||g.some((b,M)=>M&&typeof b!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(g.length==1)a.push(g[0],0);else{for(;u.length<p;)u.push(V.empty);u[p]=V.of(g.slice(1)),a.push(g[0],u[p].length)}}}return new je(a,u)}static createSet(t,a){return new je(t,a)}}function qe(f,t,a,u=!1){if(t==0&&a<=0)return;let p=f.length-2;p>=0&&a<=0&&a==f[p+1]?f[p]+=t:p>=0&&t==0&&f[p]==0?f[p+1]+=a:u?(f[p]+=t,f[p+1]+=a):f.push(t,a)}function et(f,t,a){if(a.length==0)return;let u=t.length-2>>1;if(u<f.length)f[f.length-1]=f[f.length-1].append(a);else{for(;f.length<u;)f.push(V.empty);f.push(a)}}function Tt(f,t,a){let u=f.inserted;for(let p=0,g=0,b=0;b<f.sections.length;){let M=f.sections[b++],k=f.sections[b++];if(k<0)p+=M,g+=M;else{let R=p,Z=g,j=V.empty;for(;R+=M,Z+=k,k&&u&&(j=j.append(u[b-2>>1])),!(a||b==f.sections.length||f.sections[b+1]<0);)M=f.sections[b++],k=f.sections[b++];t(p,R,g,Z,j),p=R,g=Z}}}function Rt(f,t,a,u=!1){let p=[],g=u?[]:null,b=new Fe(f),M=new Fe(t);for(let k=-1;;){if(b.done&&M.len||M.done&&b.len)throw new Error("Mismatched change set lengths");if(b.ins==-1&&M.ins==-1){let R=Math.min(b.len,M.len);qe(p,R,-1),b.forward(R),M.forward(R)}else if(M.ins>=0&&(b.ins<0||k==b.i||b.off==0&&(M.len<b.len||M.len==b.len&&!a))){let R=M.len;for(qe(p,M.ins,-1);R;){let Z=Math.min(b.len,R);b.ins>=0&&k<b.i&&b.len<=Z&&(qe(p,0,b.ins),g&&et(g,p,b.text),k=b.i),b.forward(Z),R-=Z}M.next()}else if(b.ins>=0){let R=0,Z=b.len;for(;Z;)if(M.ins==-1){let j=Math.min(Z,M.len);R+=j,Z-=j,M.forward(j)}else if(M.ins==0&&M.len<Z)Z-=M.len,M.next();else break;qe(p,R,k<b.i?b.ins:0),g&&k<b.i&&et(g,p,b.text),k=b.i,b.forward(b.len-Z)}else{if(b.done&&M.done)return g?je.createSet(p,g):Je.create(p);throw new Error("Mismatched change set lengths")}}}function Qt(f,t,a=!1){let u=[],p=a?[]:null,g=new Fe(f),b=new Fe(t);for(let M=!1;;){if(g.done&&b.done)return p?je.createSet(u,p):Je.create(u);if(g.ins==0)qe(u,g.len,0,M),g.next();else if(b.len==0&&!b.done)qe(u,0,b.ins,M),p&&et(p,u,b.text),b.next();else{if(g.done||b.done)throw new Error("Mismatched change set lengths");{let k=Math.min(g.len2,b.len),R=u.length;if(g.ins==-1){let Z=b.ins==-1?-1:b.off?0:b.ins;qe(u,k,Z,M),p&&Z&&et(p,u,b.text)}else b.ins==-1?(qe(u,g.off?0:g.len,k,M),p&&et(p,u,g.textBit(k))):(qe(u,g.off?0:g.len,b.off?0:b.ins,M),p&&!b.off&&et(p,u,b.text));M=(g.ins>k||b.ins>=0&&b.len>k)&&(M||u.length>R),g.forward2(k),b.forward(k)}}}}class Fe{constructor(t){this.set=t,this.i=0,this.next()}next(){let{sections:t}=this.set;this.i<t.length?(this.len=t[this.i++],this.ins=t[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:t}=this.set,a=this.i-2>>1;return a>=t.length?V.empty:t[a]}textBit(t){let{inserted:a}=this.set,u=this.i-2>>1;return u>=a.length&&!t?V.empty:a[u].slice(this.off,t==null?void 0:this.off+t)}forward(t){t==this.len?this.next():(this.len-=t,this.off+=t)}forward2(t){this.ins==-1?this.forward(t):t==this.ins?this.next():(this.ins-=t,this.off+=t)}}class pt{constructor(t,a,u){this.from=t,this.to=a,this.flags=u}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let t=this.flags&7;return t==7?null:t}get goalColumn(){let t=this.flags>>6;return t==16777215?void 0:t}map(t,a=-1){let u,p;return this.empty?u=p=t.mapPos(this.from,a):(u=t.mapPos(this.from,1),p=t.mapPos(this.to,-1)),u==this.from&&p==this.to?this:new pt(u,p,this.flags)}extend(t,a=t){if(t<=this.anchor&&a>=this.anchor)return we.range(t,a);let u=Math.abs(t-this.anchor)>Math.abs(a-this.anchor)?t:a;return we.range(this.anchor,u)}eq(t,a=!1){return this.anchor==t.anchor&&this.head==t.head&&(!a||!this.empty||this.assoc==t.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(t){if(!t||typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return we.range(t.anchor,t.head)}static create(t,a,u){return new pt(t,a,u)}}class we{constructor(t,a){this.ranges=t,this.mainIndex=a}map(t,a=-1){return t.empty?this:we.create(this.ranges.map(u=>u.map(t,a)),this.mainIndex)}eq(t,a=!1){if(this.ranges.length!=t.ranges.length||this.mainIndex!=t.mainIndex)return!1;for(let u=0;u<this.ranges.length;u++)if(!this.ranges[u].eq(t.ranges[u],a))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new we([this.main],0)}addRange(t,a=!0){return we.create([t].concat(this.ranges),a?0:this.mainIndex+1)}replaceRange(t,a=this.mainIndex){let u=this.ranges.slice();return u[a]=t,we.create(u,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(t=>t.toJSON()),main:this.mainIndex}}static fromJSON(t){if(!t||!Array.isArray(t.ranges)||typeof t.main!="number"||t.main>=t.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new we(t.ranges.map(a=>pt.fromJSON(a)),t.main)}static single(t,a=t){return new we([we.range(t,a)],0)}static create(t,a=0){if(t.length==0)throw new RangeError("A selection needs at least one range");for(let u=0,p=0;p<t.length;p++){let g=t[p];if(g.empty?g.from<=u:g.from<u)return we.normalized(t.slice(),a);u=g.to}return new we(t,a)}static cursor(t,a=0,u,p){return pt.create(t,t,(a==0?0:a<0?8:16)|(u==null?7:Math.min(6,u))|(p??16777215)<<6)}static range(t,a,u,p){let g=(u??16777215)<<6|(p==null?7:Math.min(6,p));return a<t?pt.create(a,t,48|g):pt.create(t,a,(a>t?8:0)|g)}static normalized(t,a=0){let u=t[a];t.sort((p,g)=>p.from-g.from),a=t.indexOf(u);for(let p=1;p<t.length;p++){let g=t[p],b=t[p-1];if(g.empty?g.from<=b.to:g.from<b.to){let M=b.from,k=Math.max(g.to,b.to);p<=a&&a--,t.splice(--p,2,g.anchor>g.head?we.range(k,M):we.range(M,k))}}return new we(t,a)}}function xt(f,t){for(let a of f.ranges)if(a.to>t)throw new RangeError("Selection points outside of document")}let Ct=0;class Ze{constructor(t,a,u,p,g){this.combine=t,this.compareInput=a,this.compare=u,this.isStatic=p,this.id=Ct++,this.default=t([]),this.extensions=typeof g=="function"?g(this):g}get reader(){return this}static define(t={}){return new Ze(t.combine||(a=>a),t.compareInput||((a,u)=>a===u),t.compare||(t.combine?(a,u)=>a===u:St),!!t.static,t.enables)}of(t){return new Lt([],this,0,t)}compute(t,a){if(this.isStatic)throw new Error("Can't compute a static facet");return new Lt(t,this,1,a)}computeN(t,a){if(this.isStatic)throw new Error("Can't compute a static facet");return new Lt(t,this,2,a)}from(t,a){return a||(a=u=>u),this.compute([t],u=>a(u.field(t)))}}function St(f,t){return f==t||f.length==t.length&&f.every((a,u)=>a===t[u])}class Lt{constructor(t,a,u,p){this.dependencies=t,this.facet=a,this.type=u,this.value=p,this.id=Ct++}dynamicSlot(t){var a;let u=this.value,p=this.facet.compareInput,g=this.id,b=t[g]>>1,M=this.type==2,k=!1,R=!1,Z=[];for(let j of this.dependencies)j=="doc"?k=!0:j=="selection"?R=!0:(((a=t[j.id])!==null&&a!==void 0?a:1)&1)==0&&Z.push(t[j.id]);return{create(j){return j.values[b]=u(j),1},update(j,K){if(k&&K.docChanged||R&&(K.docChanged||K.selection)||sn(j,Z)){let oe=u(j);if(M?!cn(oe,j.values[b],p):!p(oe,j.values[b]))return j.values[b]=oe,1}return 0},reconfigure:(j,K)=>{let oe,de=K.config.address[g];if(de!=null){let be=Ue(K,de);if(this.dependencies.every(Se=>Se instanceof Ze?K.facet(Se)===j.facet(Se):Se instanceof bt?K.field(Se,!1)==j.field(Se,!1):!0)||(M?cn(oe=u(j),be,p):p(oe=u(j),be)))return j.values[b]=be,0}else oe=u(j);return j.values[b]=oe,1}}}}function cn(f,t,a){if(f.length!=t.length)return!1;for(let u=0;u<f.length;u++)if(!a(f[u],t[u]))return!1;return!0}function sn(f,t){let a=!1;for(let u of t)Qe(f,u)&1&&(a=!0);return a}function Xt(f,t,a){let u=a.map(k=>f[k.id]),p=a.map(k=>k.type),g=u.filter(k=>!(k&1)),b=f[t.id]>>1;function M(k){let R=[];for(let Z=0;Z<u.length;Z++){let j=Ue(k,u[Z]);if(p[Z]==2)for(let K of j)R.push(K);else R.push(j)}return t.combine(R)}return{create(k){for(let R of u)Qe(k,R);return k.values[b]=M(k),1},update(k,R){if(!sn(k,g))return 0;let Z=M(k);return t.compare(Z,k.values[b])?0:(k.values[b]=Z,1)},reconfigure(k,R){let Z=sn(k,u),j=R.config.facets[t.id],K=R.facet(t);if(j&&!Z&&St(a,j))return k.values[b]=K,0;let oe=M(k);return t.compare(oe,K)?(k.values[b]=K,0):(k.values[b]=oe,1)}}}const on=Ze.define({static:!0});class bt{constructor(t,a,u,p,g){this.id=t,this.createF=a,this.updateF=u,this.compareF=p,this.spec=g,this.provides=void 0}static define(t){let a=new bt(Ct++,t.create,t.update,t.compare||((u,p)=>u===p),t);return t.provide&&(a.provides=t.provide(a)),a}create(t){let a=t.facet(on).find(u=>u.field==this);return(a?.create||this.createF)(t)}slot(t){let a=t[this.id]>>1;return{create:u=>(u.values[a]=this.create(u),1),update:(u,p)=>{let g=u.values[a],b=this.updateF(g,p);return this.compareF(g,b)?0:(u.values[a]=b,1)},reconfigure:(u,p)=>{let g=u.facet(on),b=p.facet(on),M;return(M=g.find(k=>k.field==this))&&M!=b.find(k=>k.field==this)?(u.values[a]=M.create(u),1):p.config.address[this.id]!=null?(u.values[a]=p.field(this),0):(u.values[a]=this.create(u),1)}}}init(t){return[this,on.of({field:this,create:t})]}get extension(){return this}}const un={lowest:4,low:3,default:2,high:1,highest:0};function jt(f){return t=>new $n(t,f)}const rn={highest:jt(un.highest),high:jt(un.high),default:jt(un.default),low:jt(un.low),lowest:jt(un.lowest)};class $n{constructor(t,a){this.inner=t,this.prec=a}}class Ae{of(t){return new xe(this,t)}reconfigure(t){return Ae.reconfigure.of({compartment:this,extension:t})}get(t){return t.config.compartments.get(this)}}class xe{constructor(t,a){this.compartment=t,this.inner=a}}class ye{constructor(t,a,u,p,g,b){for(this.base=t,this.compartments=a,this.dynamicSlots=u,this.address=p,this.staticValues=g,this.facets=b,this.statusTemplate=[];this.statusTemplate.length<u.length;)this.statusTemplate.push(0)}staticFacet(t){let a=this.address[t.id];return a==null?t.default:this.staticValues[a>>1]}static resolve(t,a,u){let p=[],g=Object.create(null),b=new Map;for(let K of ke(t,a,b))K instanceof bt?p.push(K):(g[K.facet.id]||(g[K.facet.id]=[])).push(K);let M=Object.create(null),k=[],R=[];for(let K of p)M[K.id]=R.length<<1,R.push(oe=>K.slot(oe));let Z=u?.config.facets;for(let K in g){let oe=g[K],de=oe[0].facet,be=Z&&Z[K]||[];if(oe.every(Se=>Se.type==0))if(M[de.id]=k.length<<1|1,St(be,oe))k.push(u.facet(de));else{let Se=de.combine(oe.map(Ee=>Ee.value));k.push(u&&de.compare(Se,u.facet(de))?u.facet(de):Se)}else{for(let Se of oe)Se.type==0?(M[Se.id]=k.length<<1|1,k.push(Se.value)):(M[Se.id]=R.length<<1,R.push(Ee=>Se.dynamicSlot(Ee)));M[de.id]=R.length<<1,R.push(Se=>Xt(Se,de,oe))}}let j=R.map(K=>K(M));return new ye(t,b,j,M,k,g)}}function ke(f,t,a){let u=[[],[],[],[],[]],p=new Map;function g(b,M){let k=p.get(b);if(k!=null){if(k<=M)return;let R=u[k].indexOf(b);R>-1&&u[k].splice(R,1),b instanceof xe&&a.delete(b.compartment)}if(p.set(b,M),Array.isArray(b))for(let R of b)g(R,M);else if(b instanceof xe){if(a.has(b.compartment))throw new RangeError("Duplicate use of compartment in extensions");let R=t.get(b.compartment)||b.inner;a.set(b.compartment,R),g(R,M)}else if(b instanceof $n)g(b.inner,b.prec);else if(b instanceof bt)u[M].push(b),b.provides&&g(b.provides,M);else if(b instanceof Lt)u[M].push(b),b.facet.extensions&&g(b.facet.extensions,un.default);else{let R=b.extension;if(!R)throw new Error(`Unrecognized extension value in extension set (${b}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);g(R,M)}}return g(f,un.default),u.reduce((b,M)=>b.concat(M))}function Qe(f,t){if(t&1)return 2;let a=t>>1,u=f.status[a];if(u==4)throw new Error("Cyclic dependency between fields and/or facets");if(u&2)return u;f.status[a]=4;let p=f.computeSlot(f,f.config.dynamicSlots[a]);return f.status[a]=2|p}function Ue(f,t){return t&1?f.config.staticValues[t>>1]:f.values[t>>1]}const Xe=Ze.define(),ut=Ze.define({combine:f=>f.some(t=>t),static:!0}),Ie=Ze.define({combine:f=>f.length?f[0]:void 0,static:!0}),at=Ze.define(),ft=Ze.define(),Vt=Ze.define(),Wt=Ze.define({combine:f=>f.length?f[0]:!1});class Pt{constructor(t,a){this.type=t,this.value=a}static define(){return new kt}}class kt{of(t){return new Pt(this,t)}}class an{constructor(t){this.map=t}of(t){return new Be(this,t)}}class Be{constructor(t,a){this.type=t,this.value=a}map(t){let a=this.type.map(this.value,t);return a===void 0?void 0:a==this.value?this:new Be(this.type,a)}is(t){return this.type==t}static define(t={}){return new an(t.map||(a=>a))}static mapEffects(t,a){if(!t.length)return t;let u=[];for(let p of t){let g=p.map(a);g&&u.push(g)}return u}}Be.reconfigure=Be.define(),Be.appendConfig=Be.define();class Ft{constructor(t,a,u,p,g,b){this.startState=t,this.changes=a,this.selection=u,this.effects=p,this.annotations=g,this.scrollIntoView=b,this._doc=null,this._state=null,u&&xt(u,a.newLength),g.some(M=>M.type==Ft.time)||(this.annotations=g.concat(Ft.time.of(Date.now())))}static create(t,a,u,p,g,b){return new Ft(t,a,u,p,g,b)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(t){for(let a of this.annotations)if(a.type==t)return a.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(t){let a=this.annotation(Ft.userEvent);return!!(a&&(a==t||a.length>t.length&&a.slice(0,t.length)==t&&a[t.length]=="."))}}Ft.time=Pt.define(),Ft.userEvent=Pt.define(),Ft.addToHistory=Pt.define(),Ft.remote=Pt.define();function hn(f,t){let a=[];for(let u=0,p=0;;){let g,b;if(u<f.length&&(p==t.length||t[p]>=f[u]))g=f[u++],b=f[u++];else if(p<t.length)g=t[p++],b=t[p++];else return a;!a.length||a[a.length-1]<g?a.push(g,b):a[a.length-1]<b&&(a[a.length-1]=b)}}function ct(f,t,a){var u;let p,g,b;return a?(p=t.changes,g=je.empty(t.changes.length),b=f.changes.compose(t.changes)):(p=t.changes.map(f.changes),g=f.changes.mapDesc(t.changes,!0),b=f.changes.compose(p)),{changes:b,selection:t.selection?t.selection.map(g):(u=f.selection)===null||u===void 0?void 0:u.map(p),effects:Be.mapEffects(f.effects,p).concat(Be.mapEffects(t.effects,g)),annotations:f.annotations.length?f.annotations.concat(t.annotations):t.annotations,scrollIntoView:f.scrollIntoView||t.scrollIntoView}}function At(f,t,a){let u=t.selection,p=dn(t.annotations);return t.userEvent&&(p=p.concat(Ft.userEvent.of(t.userEvent))),{changes:t.changes instanceof je?t.changes:je.of(t.changes||[],a,f.facet(Ie)),selection:u&&(u instanceof we?u:we.single(u.anchor,u.head)),effects:dn(t.effects),annotations:p,scrollIntoView:!!t.scrollIntoView}}function Nt(f,t,a){let u=At(f,t.length?t[0]:{},f.doc.length);t.length&&t[0].filter===!1&&(a=!1);for(let g=1;g<t.length;g++){t[g].filter===!1&&(a=!1);let b=!!t[g].sequential;u=ct(u,At(f,t[g],b?u.changes.newLength:f.doc.length),b)}let p=Ft.create(f,u.changes,u.selection,u.effects,u.annotations,u.scrollIntoView);return fn(a?zt(p):p)}function zt(f){let t=f.startState,a=!0;for(let p of t.facet(at)){let g=p(f);if(g===!1){a=!1;break}Array.isArray(g)&&(a=a===!0?g:hn(a,g))}if(a!==!0){let p,g;if(a===!1)g=f.changes.invertedDesc,p=je.empty(t.doc.length);else{let b=f.changes.filter(a);p=b.changes,g=b.filtered.mapDesc(b.changes).invertedDesc}f=Ft.create(t,p,f.selection&&f.selection.map(g),Be.mapEffects(f.effects,g),f.annotations,f.scrollIntoView)}let u=t.facet(ft);for(let p=u.length-1;p>=0;p--){let g=u[p](f);g instanceof Ft?f=g:Array.isArray(g)&&g.length==1&&g[0]instanceof Ft?f=g[0]:f=Nt(t,dn(g),!1)}return f}function fn(f){let t=f.startState,a=t.facet(Vt),u=f;for(let p=a.length-1;p>=0;p--){let g=a[p](f);g&&Object.keys(g).length&&(u=ct(u,At(t,g,f.changes.newLength),!0))}return u==f?f:Ft.create(t,f.changes,f.selection,u.effects,u.annotations,u.scrollIntoView)}const Cn=[];function dn(f){return f==null?Cn:Array.isArray(f)?f:[f]}var I=(function(f){return f[f.Word=0]="Word",f[f.Space=1]="Space",f[f.Other=2]="Other",f})(I||(I={}));const re=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let te;try{te=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function se(f){if(te)return te.test(f);for(let t=0;t<f.length;t++){let a=f[t];if(/\w/.test(a)||a>""&&(a.toUpperCase()!=a.toLowerCase()||re.test(a)))return!0}return!1}function pe(f){return t=>{if(!/\S/.test(t))return I.Space;if(se(t))return I.Word;for(let a=0;a<f.length;a++)if(t.indexOf(f[a])>-1)return I.Word;return I.Other}}class Pe{constructor(t,a,u,p,g,b){this.config=t,this.doc=a,this.selection=u,this.values=p,this.status=t.statusTemplate.slice(),this.computeSlot=g,b&&(b._state=this);for(let M=0;M<this.config.dynamicSlots.length;M++)Qe(this,M<<1);this.computeSlot=null}field(t,a=!0){let u=this.config.address[t.id];if(u==null){if(a)throw new RangeError("Field is not present in this state");return}return Qe(this,u),Ue(this,u)}update(...t){return Nt(this,t,!0)}applyTransaction(t){let a=this.config,{base:u,compartments:p}=a;for(let M of t.effects)M.is(Ae.reconfigure)?(a&&(p=new Map,a.compartments.forEach((k,R)=>p.set(R,k)),a=null),p.set(M.value.compartment,M.value.extension)):M.is(Be.reconfigure)?(a=null,u=M.value):M.is(Be.appendConfig)&&(a=null,u=dn(u).concat(M.value));let g;a?g=t.startState.values.slice():(a=ye.resolve(u,p,this),g=new Pe(a,this.doc,this.selection,a.dynamicSlots.map(()=>null),(k,R)=>R.reconfigure(k,this),null).values);let b=t.startState.facet(ut)?t.newSelection:t.newSelection.asSingle();new Pe(a,t.newDoc,b,g,(M,k)=>k.update(M,t),t)}replaceSelection(t){return typeof t=="string"&&(t=this.toText(t)),this.changeByRange(a=>({changes:{from:a.from,to:a.to,insert:t},range:we.cursor(a.from+t.length)}))}changeByRange(t){let a=this.selection,u=t(a.ranges[0]),p=this.changes(u.changes),g=[u.range],b=dn(u.effects);for(let M=1;M<a.ranges.length;M++){let k=t(a.ranges[M]),R=this.changes(k.changes),Z=R.map(p);for(let K=0;K<M;K++)g[K]=g[K].map(Z);let j=p.mapDesc(R,!0);g.push(k.range.map(j)),p=p.compose(Z),b=Be.mapEffects(b,Z).concat(Be.mapEffects(dn(k.effects),j))}return{changes:p,selection:we.create(g,a.mainIndex),effects:b}}changes(t=[]){return t instanceof je?t:je.of(t,this.doc.length,this.facet(Pe.lineSeparator))}toText(t){return V.of(t.split(this.facet(Pe.lineSeparator)||Ge))}sliceDoc(t=0,a=this.doc.length){return this.doc.sliceString(t,a,this.lineBreak)}facet(t){let a=this.config.address[t.id];return a==null?t.default:(Qe(this,a),Ue(this,a))}toJSON(t){let a={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(t)for(let u in t){let p=t[u];p instanceof bt&&this.config.address[p.id]!=null&&(a[u]=p.spec.toJSON(this.field(t[u]),this))}return a}static fromJSON(t,a={},u){if(!t||typeof t.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let p=[];if(u){for(let g in u)if(Object.prototype.hasOwnProperty.call(t,g)){let b=u[g],M=t[g];p.push(b.init(k=>b.spec.fromJSON(M,k)))}}return Pe.create({doc:t.doc,selection:we.fromJSON(t.selection),extensions:a.extensions?p.concat([a.extensions]):p})}static create(t={}){let a=ye.resolve(t.extensions||[],new Map),u=t.doc instanceof V?t.doc:V.of((t.doc||"").split(a.staticFacet(Pe.lineSeparator)||Ge)),p=t.selection?t.selection instanceof we?t.selection:we.single(t.selection.anchor,t.selection.head):we.single(0);return xt(p,u.length),a.staticFacet(ut)||(p=p.asSingle()),new Pe(a,u,p,a.dynamicSlots.map(()=>null),(g,b)=>b.create(g),null)}get tabSize(){return this.facet(Pe.tabSize)}get lineBreak(){return this.facet(Pe.lineSeparator)||`
`}get readOnly(){return this.facet(Wt)}phrase(t,...a){for(let u of this.facet(Pe.phrases))if(Object.prototype.hasOwnProperty.call(u,t)){t=u[t];break}return a.length&&(t=t.replace(/\$(\$|\d*)/g,(u,p)=>{if(p=="$")return"$";let g=+(p||1);return!g||g>a.length?u:a[g-1]})),t}languageDataAt(t,a,u=-1){let p=[];for(let g of this.facet(Xe))for(let b of g(this,a,u))Object.prototype.hasOwnProperty.call(b,t)&&p.push(b[t]);return p}charCategorizer(t){return pe(this.languageDataAt("wordChars",t).join(""))}wordAt(t){let{text:a,from:u,length:p}=this.doc.lineAt(t),g=this.charCategorizer(t),b=t-u,M=t-u;for(;b>0;){let k=Oe(a,b,!1);if(g(a.slice(k,b))!=I.Word)break;b=k}for(;M<p;){let k=Oe(a,M);if(g(a.slice(M,k))!=I.Word)break;M=k}return b==M?null:we.range(b+u,M+u)}}Pe.allowMultipleSelections=ut,Pe.tabSize=Ze.define({combine:f=>f.length?f[0]:4}),Pe.lineSeparator=Ie,Pe.readOnly=Wt,Pe.phrases=Ze.define({compare(f,t){let a=Object.keys(f),u=Object.keys(t);return a.length==u.length&&a.every(p=>f[p]==t[p])}}),Pe.languageData=Xe,Pe.changeFilter=at,Pe.transactionFilter=ft,Pe.transactionExtender=Vt,Ae.reconfigure=Be.define();function $e(f,t,a={}){let u={};for(let p of f)for(let g of Object.keys(p)){let b=p[g],M=u[g];if(M===void 0)u[g]=b;else if(!(M===b||b===void 0))if(Object.hasOwnProperty.call(a,g))u[g]=a[g](M,b);else throw new Error("Config merge conflict for field "+g)}for(let p in t)u[p]===void 0&&(u[p]=t[p]);return u}class Le{eq(t){return this==t}range(t,a=t){return it.create(t,a,this)}}Le.prototype.startSide=Le.prototype.endSide=0,Le.prototype.point=!1,Le.prototype.mapMode=Ne.TrackDel;let it=class md{constructor(t,a,u){this.from=t,this.to=a,this.value=u}static create(t,a,u){return new md(t,a,u)}};function Dt(f,t){return f.from-t.from||f.value.startSide-t.value.startSide}class en{constructor(t,a,u,p){this.from=t,this.to=a,this.value=u,this.maxPoint=p}get length(){return this.to[this.to.length-1]}findIndex(t,a,u,p=0){let g=u?this.to:this.from;for(let b=p,M=g.length;;){if(b==M)return b;let k=b+M>>1,R=g[k]-t||(u?this.value[k].endSide:this.value[k].startSide)-a;if(k==b)return R>=0?b:M;R>=0?M=k:b=k+1}}between(t,a,u,p){for(let g=this.findIndex(a,-1e9,!0),b=this.findIndex(u,1e9,!1,g);g<b;g++)if(p(this.from[g]+t,this.to[g]+t,this.value[g])===!1)return!1}map(t,a){let u=[],p=[],g=[],b=-1,M=-1;for(let k=0;k<this.value.length;k++){let R=this.value[k],Z=this.from[k]+t,j=this.to[k]+t,K,oe;if(Z==j){let de=a.mapPos(Z,R.startSide,R.mapMode);if(de==null||(K=oe=de,R.startSide!=R.endSide&&(oe=a.mapPos(Z,R.endSide),oe<K)))continue}else if(K=a.mapPos(Z,R.startSide),oe=a.mapPos(j,R.endSide),K>oe||K==oe&&R.startSide>0&&R.endSide<=0)continue;(oe-K||R.endSide-R.startSide)<0||(b<0&&(b=K),R.point&&(M=Math.max(M,oe-K)),u.push(R),p.push(K-b),g.push(oe-b))}return{mapped:u.length?new en(p,g,u,M):null,pos:b}}}class vt{constructor(t,a,u,p){this.chunkPos=t,this.chunk=a,this.nextLayer=u,this.maxPoint=p}static create(t,a,u,p){return new vt(t,a,u,p)}get length(){let t=this.chunk.length-1;return t<0?0:Math.max(this.chunkEnd(t),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let t=this.nextLayer.size;for(let a of this.chunk)t+=a.value.length;return t}chunkEnd(t){return this.chunkPos[t]+this.chunk[t].length}update(t){let{add:a=[],sort:u=!1,filterFrom:p=0,filterTo:g=this.length}=t,b=t.filter;if(a.length==0&&!b)return this;if(u&&(a=a.slice().sort(Dt)),this.isEmpty)return a.length?vt.of(a):this;let M=new Dn(this,null,-1).goto(0),k=0,R=[],Z=new Xn;for(;M.value||k<a.length;)if(k<a.length&&(M.from-a[k].from||M.startSide-a[k].value.startSide)>=0){let j=a[k++];Z.addInner(j.from,j.to,j.value)||R.push(j)}else M.rangeIndex==1&&M.chunkIndex<this.chunk.length&&(k==a.length||this.chunkEnd(M.chunkIndex)<a[k].from)&&(!b||p>this.chunkEnd(M.chunkIndex)||g<this.chunkPos[M.chunkIndex])&&Z.addChunk(this.chunkPos[M.chunkIndex],this.chunk[M.chunkIndex])?M.nextChunk():((!b||p>M.to||g<M.from||b(M.from,M.to,M.value))&&(Z.addInner(M.from,M.to,M.value)||R.push(it.create(M.from,M.to,M.value))),M.next());return Z.finishInner(this.nextLayer.isEmpty&&!R.length?vt.empty:this.nextLayer.update({add:R,filter:b,filterFrom:p,filterTo:g}))}map(t){if(t.empty||this.isEmpty)return this;let a=[],u=[],p=-1;for(let b=0;b<this.chunk.length;b++){let M=this.chunkPos[b],k=this.chunk[b],R=t.touchesRange(M,M+k.length);if(R===!1)p=Math.max(p,k.maxPoint),a.push(k),u.push(t.mapPos(M));else if(R===!0){let{mapped:Z,pos:j}=k.map(M,t);Z&&(p=Math.max(p,Z.maxPoint),a.push(Z),u.push(j))}}let g=this.nextLayer.map(t);return a.length==0?g:new vt(u,a,g||vt.empty,p)}between(t,a,u){if(!this.isEmpty){for(let p=0;p<this.chunk.length;p++){let g=this.chunkPos[p],b=this.chunk[p];if(a>=g&&t<=g+b.length&&b.between(g,t-g,a-g,u)===!1)return}this.nextLayer.between(t,a,u)}}iter(t=0){return Ji.from([this]).goto(t)}get isEmpty(){return this.nextLayer==this}static iter(t,a=0){return Ji.from(t).goto(a)}static compare(t,a,u,p,g=-1){let b=t.filter(j=>j.maxPoint>0||!j.isEmpty&&j.maxPoint>=g),M=a.filter(j=>j.maxPoint>0||!j.isEmpty&&j.maxPoint>=g),k=Ki(b,M,u),R=new er(b,k,g),Z=new er(M,k,g);u.iterGaps((j,K,oe)=>ro(R,j,Z,K,oe,p)),u.empty&&u.length==0&&ro(R,0,Z,0,0,p)}static eq(t,a,u=0,p){p==null&&(p=999999999);let g=t.filter(Z=>!Z.isEmpty&&a.indexOf(Z)<0),b=a.filter(Z=>!Z.isEmpty&&t.indexOf(Z)<0);if(g.length!=b.length)return!1;if(!g.length)return!0;let M=Ki(g,b),k=new er(g,M,0).goto(u),R=new er(b,M,0).goto(u);for(;;){if(k.to!=R.to||!ts(k.active,R.active)||k.point&&(!R.point||!k.point.eq(R.point)))return!1;if(k.to>p)return!0;k.next(),R.next()}}static spans(t,a,u,p,g=-1){let b=new er(t,null,g).goto(a),M=a,k=b.openStart;for(;;){let R=Math.min(b.to,u);if(b.point){let Z=b.activeForPoint(b.to),j=b.pointFrom<a?Z.length+1:b.point.startSide<0?Z.length:Math.min(Z.length,k);p.point(M,R,b.point,Z,j,b.pointRank),k=Math.min(b.openEnd(R),Z.length)}else R>M&&(p.span(M,R,b.active,k),k=b.openEnd(R));if(b.to>u)return k+(b.point&&b.to>u?1:0);M=b.to,b.next()}}static of(t,a=!1){let u=new Xn;for(let p of t instanceof it?[t]:a?mi(t):t)u.add(p.from,p.to,p.value);return u.finish()}static join(t){if(!t.length)return vt.empty;let a=t[t.length-1];for(let u=t.length-2;u>=0;u--)for(let p=t[u];p!=vt.empty;p=p.nextLayer)a=new vt(p.chunkPos,p.chunk,a,Math.max(p.maxPoint,a.maxPoint));return a}}vt.empty=new vt([],[],null,-1);function mi(f){if(f.length>1)for(let t=f[0],a=1;a<f.length;a++){let u=f[a];if(Dt(t,u)>0)return f.slice().sort(Dt);t=u}return f}vt.empty.nextLayer=vt.empty;class Xn{finishChunk(t){this.chunks.push(new en(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,t&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(t,a,u){this.addInner(t,a,u)||(this.nextLayer||(this.nextLayer=new Xn)).add(t,a,u)}addInner(t,a,u){let p=t-this.lastTo||u.startSide-this.last.endSide;if(p<=0&&(t-this.lastFrom||u.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return p<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=t),this.from.push(t-this.chunkStart),this.to.push(a-this.chunkStart),this.last=u,this.lastFrom=t,this.lastTo=a,this.value.push(u),u.point&&(this.maxPoint=Math.max(this.maxPoint,a-t)),!0)}addChunk(t,a){if((t-this.lastTo||a.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,a.maxPoint),this.chunks.push(a),this.chunkPos.push(t);let u=a.value.length-1;return this.last=a.value[u],this.lastFrom=a.from[u]+t,this.lastTo=a.to[u]+t,!0}finish(){return this.finishInner(vt.empty)}finishInner(t){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return t;let a=vt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(t):t,this.setMaxPoint);return this.from=null,a}}function Ki(f,t,a){let u=new Map;for(let g of f)for(let b=0;b<g.chunk.length;b++)g.chunk[b].maxPoint<=0&&u.set(g.chunk[b],g.chunkPos[b]);let p=new Set;for(let g of t)for(let b=0;b<g.chunk.length;b++){let M=u.get(g.chunk[b]);M!=null&&(a?a.mapPos(M):M)==g.chunkPos[b]&&!a?.touchesRange(M,M+g.chunk[b].length)&&p.add(g.chunk[b])}return p}class Dn{constructor(t,a,u,p=0){this.layer=t,this.skip=a,this.minPoint=u,this.rank=p}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(t,a=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(t,a,!1),this}gotoInner(t,a,u){for(;this.chunkIndex<this.layer.chunk.length;){let p=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(p)||this.layer.chunkEnd(this.chunkIndex)<t||p.maxPoint<this.minPoint))break;this.chunkIndex++,u=!1}if(this.chunkIndex<this.layer.chunk.length){let p=this.layer.chunk[this.chunkIndex].findIndex(t-this.layer.chunkPos[this.chunkIndex],a,!0);(!u||this.rangeIndex<p)&&this.setRangeIndex(p)}this.next()}forward(t,a){(this.to-t||this.endSide-a)<0&&this.gotoInner(t,a,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let t=this.layer.chunkPos[this.chunkIndex],a=this.layer.chunk[this.chunkIndex],u=t+a.from[this.rangeIndex];if(this.from=u,this.to=t+a.to[this.rangeIndex],this.value=a.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(t){if(t==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=t}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(t){return this.from-t.from||this.startSide-t.startSide||this.rank-t.rank||this.to-t.to||this.endSide-t.endSide}}class Ji{constructor(t){this.heap=t}static from(t,a=null,u=-1){let p=[];for(let g=0;g<t.length;g++)for(let b=t[g];!b.isEmpty;b=b.nextLayer)b.maxPoint>=u&&p.push(new Dn(b,a,u,g));return p.length==1?p[0]:new Ji(p)}get startSide(){return this.value?this.value.startSide:0}goto(t,a=-1e9){for(let u of this.heap)u.goto(t,a);for(let u=this.heap.length>>1;u>=0;u--)es(this.heap,u);return this.next(),this}forward(t,a){for(let u of this.heap)u.forward(t,a);for(let u=this.heap.length>>1;u>=0;u--)es(this.heap,u);(this.to-t||this.value.endSide-a)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let t=this.heap[0];this.from=t.from,this.to=t.to,this.value=t.value,this.rank=t.rank,t.value&&t.next(),es(this.heap,0)}}}function es(f,t){for(let a=f[t];;){let u=(t<<1)+1;if(u>=f.length)break;let p=f[u];if(u+1<f.length&&p.compare(f[u+1])>=0&&(p=f[u+1],u++),a.compare(p)<0)break;f[u]=a,f[t]=p,t=u}}class er{constructor(t,a,u){this.minPoint=u,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Ji.from(t,a,u)}goto(t,a=-1e9){return this.cursor.goto(t,a),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=t,this.endSide=a,this.openStart=-1,this.next(),this}forward(t,a){for(;this.minActive>-1&&(this.activeTo[this.minActive]-t||this.active[this.minActive].endSide-a)<0;)this.removeActive(this.minActive);this.cursor.forward(t,a)}removeActive(t){xr(this.active,t),xr(this.activeTo,t),xr(this.activeRank,t),this.minActive=so(this.active,this.activeTo)}addActive(t){let a=0,{value:u,to:p,rank:g}=this.cursor;for(;a<this.activeRank.length&&(g-this.activeRank[a]||p-this.activeTo[a])>0;)a++;Cr(this.active,a,u),Cr(this.activeTo,a,p),Cr(this.activeRank,a,g),t&&Cr(t,a,this.cursor.from),this.minActive=so(this.active,this.activeTo)}next(){let t=this.to,a=this.point;this.point=null;let u=this.openStart<0?[]:null;for(;;){let p=this.minActive;if(p>-1&&(this.activeTo[p]-this.cursor.from||this.active[p].endSide-this.cursor.startSide)<0){if(this.activeTo[p]>t){this.to=this.activeTo[p],this.endSide=this.active[p].endSide;break}this.removeActive(p),u&&xr(u,p)}else if(this.cursor.value)if(this.cursor.from>t){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let g=this.cursor.value;if(!g.point)this.addActive(u),this.cursor.next();else if(a&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=g,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=g.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(u){this.openStart=0;for(let p=u.length-1;p>=0&&u[p]<t;p--)this.openStart++}}activeForPoint(t){if(!this.active.length)return this.active;let a=[];for(let u=this.active.length-1;u>=0&&!(this.activeRank[u]<this.pointRank);u--)(this.activeTo[u]>t||this.activeTo[u]==t&&this.active[u].endSide>=this.point.endSide)&&a.push(this.active[u]);return a.reverse()}openEnd(t){let a=0;for(let u=this.activeTo.length-1;u>=0&&this.activeTo[u]>t;u--)a++;return a}}function ro(f,t,a,u,p,g){f.goto(t),a.goto(u);let b=u+p,M=u,k=u-t;for(;;){let R=f.to+k-a.to,Z=R||f.endSide-a.endSide,j=Z<0?f.to+k:a.to,K=Math.min(j,b);if(f.point||a.point?f.point&&a.point&&(f.point==a.point||f.point.eq(a.point))&&ts(f.activeForPoint(f.to),a.activeForPoint(a.to))||g.comparePoint(M,K,f.point,a.point):K>M&&!ts(f.active,a.active)&&g.compareRange(M,K,f.active,a.active),j>b)break;(R||f.openEnd!=a.openEnd)&&g.boundChange&&g.boundChange(j),M=j,Z<=0&&f.next(),Z>=0&&a.next()}}function ts(f,t){if(f.length!=t.length)return!1;for(let a=0;a<f.length;a++)if(f[a]!=t[a]&&!f[a].eq(t[a]))return!1;return!0}function xr(f,t){for(let a=t,u=f.length-1;a<u;a++)f[a]=f[a+1];f.pop()}function Cr(f,t,a){for(let u=f.length-1;u>=t;u--)f[u+1]=f[u];f[t]=a}function so(f,t){let a=-1,u=1e9;for(let p=0;p<t.length;p++)(t[p]-u||f[p].endSide-f[a].endSide)<0&&(a=p,u=t[p]);return a}function nr(f,t,a=f.length){let u=0;for(let p=0;p<a&&p<f.length;)f.charCodeAt(p)==9?(u+=t-u%t,p++):(u++,p=Oe(f,p));return u}function ns(f,t,a,u){for(let p=0,g=0;;){if(g>=t)return p;if(p==f.length)break;g+=f.charCodeAt(p)==9?a-g%a:1,p=Oe(f,p)}return u===!0?-1:f.length}const is="ͼ",oo=typeof Symbol>"u"?"__"+is:Symbol.for(is),rs=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),ao=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class gi{constructor(t,a){this.rules=[];let{finish:u}=a||{};function p(b){return/^@/.test(b)?[b]:b.split(/,\s*/)}function g(b,M,k,R){let Z=[],j=/^@(\w+)\b/.exec(b[0]),K=j&&j[1]=="keyframes";if(j&&M==null)return k.push(b[0]+";");for(let oe in M){let de=M[oe];if(/&/.test(oe))g(oe.split(/,\s*/).map(be=>b.map(Se=>be.replace(/&/,Se))).reduce((be,Se)=>be.concat(Se)),de,k);else if(de&&typeof de=="object"){if(!j)throw new RangeError("The value of a property ("+oe+") should be a primitive value.");g(p(oe),de,Z,K)}else de!=null&&Z.push(oe.replace(/_.*/,"").replace(/[A-Z]/g,be=>"-"+be.toLowerCase())+": "+de+";")}(Z.length||K)&&k.push((u&&!j&&!R?b.map(u):b).join(", ")+" {"+Z.join(" ")+"}")}for(let b in t)g(p(b),t[b],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let t=ao[oo]||1;return ao[oo]=t+1,is+t.toString(36)}static mount(t,a,u){let p=t[rs],g=u&&u.nonce;p?g&&p.setNonce(g):p=new ll(t,g),p.mount(Array.isArray(a)?a:[a],t)}}let lo=new Map;class ll{constructor(t,a){let u=t.ownerDocument||t,p=u.defaultView;if(!t.head&&t.adoptedStyleSheets&&p.CSSStyleSheet){let g=lo.get(u);if(g)return t[rs]=g;this.sheet=new p.CSSStyleSheet,lo.set(u,this)}else this.styleTag=u.createElement("style"),a&&this.styleTag.setAttribute("nonce",a);this.modules=[],t[rs]=this}mount(t,a){let u=this.sheet,p=0,g=0;for(let b=0;b<t.length;b++){let M=t[b],k=this.modules.indexOf(M);if(k<g&&k>-1&&(this.modules.splice(k,1),g--,k=-1),k==-1){if(this.modules.splice(g++,0,M),u)for(let R=0;R<M.rules.length;R++)u.insertRule(M.rules[R],p++)}else{for(;g<k;)p+=this.modules[g++].rules.length;p+=M.rules.length,g++}}if(u)a.adoptedStyleSheets.indexOf(this.sheet)<0&&(a.adoptedStyleSheets=[this.sheet,...a.adoptedStyleSheets]);else{let b="";for(let k=0;k<this.modules.length;k++)b+=this.modules[k].getRules()+`
`;this.styleTag.textContent=b;let M=a.head||a;this.styleTag.parentNode!=M&&M.insertBefore(this.styleTag,M.firstChild)}}setNonce(t){this.styleTag&&this.styleTag.getAttribute("nonce")!=t&&this.styleTag.setAttribute("nonce",t)}}for(var _i={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},rr={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},ul=typeof navigator<"u"&&/Mac/.test(navigator.platform),cl=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),mn=0;mn<10;mn++)_i[48+mn]=_i[96+mn]=String(mn);for(var mn=1;mn<=24;mn++)_i[mn+111]="F"+mn;for(var mn=65;mn<=90;mn++)_i[mn]=String.fromCharCode(mn+32),rr[mn]=String.fromCharCode(mn);for(var ss in _i)rr.hasOwnProperty(ss)||(rr[ss]=_i[ss]);function hl(f){var t=ul&&f.metaKey&&f.shiftKey&&!f.ctrlKey&&!f.altKey||cl&&f.shiftKey&&f.key&&f.key.length==1||f.key=="Unidentified",a=!t&&f.key||(f.shiftKey?rr:_i)[f.keyCode]||f.key||"Unidentified";return a=="Esc"&&(a="Escape"),a=="Del"&&(a="Delete"),a=="Left"&&(a="ArrowLeft"),a=="Up"&&(a="ArrowUp"),a=="Right"&&(a="ArrowRight"),a=="Down"&&(a="ArrowDown"),a}function Ut(){var f=arguments[0];typeof f=="string"&&(f=document.createElement(f));var t=1,a=arguments[1];if(a&&typeof a=="object"&&a.nodeType==null&&!Array.isArray(a)){for(var u in a)if(Object.prototype.hasOwnProperty.call(a,u)){var p=a[u];typeof p=="string"?f.setAttribute(u,p):p!=null&&(f[u]=p)}t++}for(;t<arguments.length;t++)uo(f,arguments[t]);return f}function uo(f,t){if(typeof t=="string")f.appendChild(document.createTextNode(t));else if(t!=null)if(t.nodeType!=null)f.appendChild(t);else if(Array.isArray(t))for(var a=0;a<t.length;a++)uo(f,t[a]);else throw new RangeError("Unsupported child node: "+t)}let Sn=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},os=typeof document<"u"?document:{documentElement:{style:{}}};const ls=/Edge\/(\d+)/.exec(Sn.userAgent),co=/MSIE \d/.test(Sn.userAgent),us=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Sn.userAgent),sr=!!(co||us||ls),ho=!sr&&/gecko\/(\d+)/i.test(Sn.userAgent),cs=!sr&&/Chrome\/(\d+)/.exec(Sn.userAgent),fl="webkitFontSmoothing"in os.documentElement.style,hs=!sr&&/Apple Computer/.test(Sn.vendor),fo=hs&&(/Mobile\/\w+/.test(Sn.userAgent)||Sn.maxTouchPoints>2);var rt={mac:fo||/Mac/.test(Sn.platform),windows:/Win/.test(Sn.platform),linux:/Linux|X11/.test(Sn.platform),ie:sr,ie_version:co?os.documentMode||6:us?+us[1]:ls?+ls[1]:0,gecko:ho,gecko_version:ho?+(/Firefox\/(\d+)/.exec(Sn.userAgent)||[0,0])[1]:0,chrome:!!cs,chrome_version:cs?+cs[1]:0,ios:fo,android:/Android\b/.test(Sn.userAgent),webkit_version:fl?+(/\bAppleWebKit\/(\d+)/.exec(Sn.userAgent)||[0,0])[1]:0,safari:hs,safari_version:hs?+(/\bVersion\/(\d+(\.\d+)?)/.exec(Sn.userAgent)||[0,0])[1]:0,tabSize:os.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function fs(f,t){for(let a in f)a=="class"&&t.class?t.class+=" "+f.class:a=="style"&&t.style?t.style+=";"+f.style:t[a]=f[a];return t}const Sr=Object.create(null);function me(f,t,a){if(f==t)return!0;f||(f=Sr),t||(t=Sr);let u=Object.keys(f),p=Object.keys(t);if(u.length-0!=p.length-0)return!1;for(let g of u)if(g!=a&&(p.indexOf(g)==-1||f[g]!==t[g]))return!1;return!0}function Mt(f,t){for(let a=f.attributes.length-1;a>=0;a--){let u=f.attributes[a].name;t[u]==null&&f.removeAttribute(u)}for(let a in t){let u=t[a];a=="style"?f.style.cssText=u:f.getAttribute(a)!=u&&f.setAttribute(a,u)}}function Di(f,t,a){let u=!1;if(t)for(let p in t)a&&p in a||(u=!0,p=="style"?f.style.cssText="":f.removeAttribute(p));if(a)for(let p in a)t&&t[p]==a[p]||(u=!0,p=="style"?f.style.cssText=a[p]:f.setAttribute(p,a[p]));return u}function In(f){let t=Object.create(null);for(let a=0;a<f.attributes.length;a++){let u=f.attributes[a];t[u.name]=u.value}return t}class Vn{eq(t){return!1}updateDOM(t,a){return!1}compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(t){return!0}coordsAt(t,a,u){return null}get isHidden(){return!1}get editable(){return!1}destroy(t){}}var tt=(function(f){return f[f.Text=0]="Text",f[f.WidgetBefore=1]="WidgetBefore",f[f.WidgetAfter=2]="WidgetAfter",f[f.WidgetRange=3]="WidgetRange",f})(tt||(tt={}));class _t extends Le{constructor(t,a,u,p){super(),this.startSide=t,this.endSide=a,this.widget=u,this.spec=p}get heightRelevant(){return!1}static mark(t){return new lr(t)}static widget(t){let a=Math.max(-1e4,Math.min(1e4,t.side||0)),u=!!t.block;return a+=u&&!t.inlineOrder?a>0?3e8:-4e8:a>0?1e8:-1e8,new $t(t,a,a,u,t.widget||null,!1)}static replace(t){let a=!!t.block,u,p;if(t.isBlockGap)u=-5e8,p=4e8;else{let{start:g,end:b}=qn(t,a);u=(g?a?-3e8:-1:5e8)-1,p=(b?a?2e8:1:-6e8)+1}return new $t(t,u,p,a,t.widget||null,!0)}static line(t){return new Ni(t)}static set(t,a=!1){return vt.of(t,a)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}_t.none=vt.empty;class lr extends _t{constructor(t){let{start:a,end:u}=qn(t);super(a?-1:5e8,u?1:-6e8,null,t),this.tagName=t.tagName||"span",this.attrs=t.class&&t.attributes?fs(t.attributes,{class:t.class}):t.class?{class:t.class}:t.attributes||Sr}eq(t){return this==t||t instanceof lr&&this.tagName==t.tagName&&me(this.attrs,t.attrs)}range(t,a=t){if(t>=a)throw new RangeError("Mark decorations may not be empty");return super.range(t,a)}}lr.prototype.point=!1;class Ni extends _t{constructor(t){super(-2e8,-2e8,null,t)}eq(t){return t instanceof Ni&&this.spec.class==t.spec.class&&me(this.spec.attributes,t.spec.attributes)}range(t,a=t){if(a!=t)throw new RangeError("Line decoration ranges must be zero-length");return super.range(t,a)}}Ni.prototype.mapMode=Ne.TrackBefore,Ni.prototype.point=!0;class $t extends _t{constructor(t,a,u,p,g,b){super(a,u,g,t),this.block=p,this.isReplace=b,this.mapMode=p?a<=0?Ne.TrackBefore:Ne.TrackAfter:Ne.TrackDel}get type(){return this.startSide!=this.endSide?tt.WidgetRange:this.startSide<=0?tt.WidgetBefore:tt.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(t){return t instanceof $t&&pl(this.widget,t.widget)&&this.block==t.block&&this.startSide==t.startSide&&this.endSide==t.endSide}range(t,a=t){if(this.isReplace&&(t>a||t==a&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&a!=t)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(t,a)}}$t.prototype.point=!0;function qn(f,t=!1){let{inclusiveStart:a,inclusiveEnd:u}=f;return a==null&&(a=f.inclusive),u==null&&(u=f.inclusive),{start:a??t,end:u??t}}function pl(f,t){return f==t||!!(f&&t&&f.compare(t))}function yi(f,t,a,u=0){let p=a.length-1;p>=0&&a[p]+u>=f?a[p]=Math.max(a[p],t):a.push(f,t)}class Bi extends Le{constructor(t,a){super(),this.tagName=t,this.attributes=a}eq(t){return t==this||t instanceof Bi&&this.tagName==t.tagName&&me(this.attributes,t.attributes)}static create(t){return new Bi(t.tagName,t.attributes||Sr)}static set(t,a=!1){return vt.of(t,a)}}Bi.prototype.startSide=Bi.prototype.endSide=-1;function Ei(f){let t;return f.nodeType==11?t=f.getSelection?f:f.ownerDocument:t=f,t.getSelection()}function mt(f,t){return t?f==t||f.contains(t.nodeType!=1?t.parentNode:t):!1}function Pr(f,t){if(!t.anchorNode)return!1;try{return mt(f,t.anchorNode)}catch{return!1}}function ur(f){return f.nodeType==3?Hn(f,0,f.nodeValue.length).getClientRects():f.nodeType==1?f.getClientRects():[]}function En(f,t,a,u){return a?po(f,t,a,u,-1)||po(f,t,a,u,1):!1}function Oi(f){for(var t=0;;t++)if(f=f.previousSibling,!f)return t}function Mr(f){return f.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(f.nodeName)}function po(f,t,a,u,p){for(;;){if(f==a&&t==u)return!0;if(t==(p<0?0:ai(f))){if(f.nodeName=="DIV")return!1;let g=f.parentNode;if(!g||g.nodeType!=1)return!1;t=Oi(f)+(p<0?0:1),f=g}else if(f.nodeType==1){if(f=f.childNodes[t+(p<0?-1:0)],f.nodeType==1&&f.contentEditable=="false")return!1;t=p<0?ai(f):0}else return!1}}function ai(f){return f.nodeType==3?f.nodeValue.length:f.childNodes.length}function wr(f,t){let a=t?f.left:f.right;return{left:a,right:a,top:f.top,bottom:f.bottom}}function kr(f){let t=f.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:f.innerWidth,top:0,bottom:f.innerHeight}}function mo(f,t){let a=t.width/f.offsetWidth,u=t.height/f.offsetHeight;return(a>.995&&a<1.005||!isFinite(a)||Math.abs(t.width-f.offsetWidth)<1)&&(a=1),(u>.995&&u<1.005||!isFinite(u)||Math.abs(t.height-f.offsetHeight)<1)&&(u=1),{scaleX:a,scaleY:u}}function dl(f,t,a,u,p,g,b,M){let k=f.ownerDocument,R=k.defaultView||window;for(let Z=f,j=!1;Z&&!j;)if(Z.nodeType==1){let K,oe=Z==k.body,de=1,be=1;if(oe)K=kr(R);else{if(/^(fixed|sticky)$/.test(getComputedStyle(Z).position)&&(j=!0),Z.scrollHeight<=Z.clientHeight&&Z.scrollWidth<=Z.clientWidth){Z=Z.assignedSlot||Z.parentNode;continue}let ze=Z.getBoundingClientRect();({scaleX:de,scaleY:be}=mo(Z,ze)),K={left:ze.left,right:ze.left+Z.clientWidth*de,top:ze.top,bottom:ze.top+Z.clientHeight*be}}let Se=0,Ee=0;if(p=="nearest")t.top<K.top?(Ee=t.top-(K.top+b),a>0&&t.bottom>K.bottom+Ee&&(Ee=t.bottom-K.bottom+b)):t.bottom>K.bottom&&(Ee=t.bottom-K.bottom+b,a<0&&t.top-Ee<K.top&&(Ee=t.top-(K.top+b)));else{let ze=t.bottom-t.top,We=K.bottom-K.top;Ee=(p=="center"&&ze<=We?t.top+ze/2-We/2:p=="start"||p=="center"&&a<0?t.top-b:t.bottom-We+b)-K.top}if(u=="nearest"?t.left<K.left?(Se=t.left-(K.left+g),a>0&&t.right>K.right+Se&&(Se=t.right-K.right+g)):t.right>K.right&&(Se=t.right-K.right+g,a<0&&t.left<K.left+Se&&(Se=t.left-(K.left+g))):Se=(u=="center"?t.left+(t.right-t.left)/2-(K.right-K.left)/2:u=="start"==M?t.left-g:t.right-(K.right-K.left)+g)-K.left,Se||Ee)if(oe)R.scrollBy(Se,Ee);else{let ze=0,We=0;if(Ee){let ot=Z.scrollTop;Z.scrollTop+=Ee/be,We=(Z.scrollTop-ot)*be}if(Se){let ot=Z.scrollLeft;Z.scrollLeft+=Se/de,ze=(Z.scrollLeft-ot)*de}t={left:t.left-ze,top:t.top-We,right:t.right-ze,bottom:t.bottom-We},ze&&Math.abs(ze-Se)<1&&(u="nearest"),We&&Math.abs(We-Ee)<1&&(p="nearest")}if(oe)break;(t.top<K.top||t.bottom>K.bottom||t.left<K.left||t.right>K.right)&&(t={left:Math.max(t.left,K.left),right:Math.min(t.right,K.right),top:Math.max(t.top,K.top),bottom:Math.min(t.bottom,K.bottom)}),Z=Z.assignedSlot||Z.parentNode}else if(Z.nodeType==11)Z=Z.host;else break}function Qi(f){let t=f.ownerDocument,a,u;for(let p=f.parentNode;p&&!(p==t.body||a&&u);)if(p.nodeType==1)!u&&p.scrollHeight>p.clientHeight&&(u=p),!a&&p.scrollWidth>p.clientWidth&&(a=p),p=p.assignedSlot||p.parentNode;else if(p.nodeType==11)p=p.host;else break;return{x:a,y:u}}class yt{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(t){return this.anchorNode==t.anchorNode&&this.anchorOffset==t.anchorOffset&&this.focusNode==t.focusNode&&this.focusOffset==t.focusOffset}setRange(t){let{anchorNode:a,focusNode:u}=t;this.set(a,Math.min(t.anchorOffset,a?ai(a):0),u,Math.min(t.focusOffset,u?ai(u):0))}set(t,a,u,p){this.anchorNode=t,this.anchorOffset=a,this.focusNode=u,this.focusOffset=p}}let Rn=null;rt.safari&&rt.safari_version>=26&&(Rn=!1);function ps(f){if(f.setActive)return f.setActive();if(Rn)return f.focus(Rn);let t=[];for(let a=f;a&&(t.push(a,a.scrollTop,a.scrollLeft),a!=a.ownerDocument);a=a.parentNode);if(f.focus(Rn==null?{get preventScroll(){return Rn={preventScroll:!0},!0}}:void 0),!Rn){Rn=!1;for(let a=0;a<t.length;){let u=t[a++],p=t[a++],g=t[a++];u.scrollTop!=p&&(u.scrollTop=p),u.scrollLeft!=g&&(u.scrollLeft=g)}}}let ms;function Hn(f,t,a=t){let u=ms||(ms=document.createRange());return u.setEnd(f,a),u.setStart(f,t),u}function li(f,t,a,u){let p={key:t,code:t,keyCode:a,which:a,cancelable:!0};u&&({altKey:p.altKey,ctrlKey:p.ctrlKey,shiftKey:p.shiftKey,metaKey:p.metaKey}=u);let g=new KeyboardEvent("keydown",p);g.synthetic=!0,f.dispatchEvent(g);let b=new KeyboardEvent("keyup",p);return b.synthetic=!0,f.dispatchEvent(b),g.defaultPrevented||b.defaultPrevented}function go(f){for(;f;){if(f&&(f.nodeType==9||f.nodeType==11&&f.host))return f;f=f.assignedSlot||f.parentNode}return null}function ml(f,t){let a=t.focusNode,u=t.focusOffset;if(!a||t.anchorNode!=a||t.anchorOffset!=u)return!1;for(u=Math.min(u,ai(a));;)if(u){if(a.nodeType!=1)return!1;let p=a.childNodes[u-1];p.contentEditable=="false"?u--:(a=p,u=ai(a))}else{if(a==f)return!0;u=Oi(a),a=a.parentNode}}function _o(f){return f.scrollTop>Math.max(1,f.scrollHeight-f.clientHeight-4)}function yo(f,t){for(let a=f,u=t;;){if(a.nodeType==3&&u>0)return{node:a,offset:u};if(a.nodeType==1&&u>0){if(a.contentEditable=="false")return null;a=a.childNodes[u-1],u=ai(a)}else if(a.parentNode&&!Mr(a))u=Oi(a),a=a.parentNode;else return null}}function Oo(f,t){for(let a=f,u=t;;){if(a.nodeType==3&&u<a.nodeValue.length)return{node:a,offset:u};if(a.nodeType==1&&u<a.childNodes.length){if(a.contentEditable=="false")return null;a=a.childNodes[u],u=0}else if(a.parentNode&&!Mr(a))u=Oi(a)+1,a=a.parentNode;else return null}}class bn{constructor(t,a,u=!0){this.node=t,this.offset=a,this.precise=u}static before(t,a){return new bn(t.parentNode,Oi(t),a)}static after(t,a){return new bn(t.parentNode,Oi(t)+1,a)}}var Yt=(function(f){return f[f.LTR=0]="LTR",f[f.RTL=1]="RTL",f})(Yt||(Yt={}));const Fi=Yt.LTR,gs=Yt.RTL;function bo(f){let t=[];for(let a=0;a<f.length;a++)t.push(1<<+f[a]);return t}const gl=bo("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),_l=bo("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),_s=Object.create(null),Kn=[];for(let f of["()","[]","{}"]){let t=f.charCodeAt(0),a=f.charCodeAt(1);_s[t]=a,_s[a]=-t}function Ao(f){return f<=247?gl[f]:1424<=f&&f<=1524?2:1536<=f&&f<=1785?_l[f-1536]:1774<=f&&f<=2220?4:8192<=f&&f<=8204?256:64336<=f&&f<=65023?4:1}const cr=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class An{get dir(){return this.level%2?gs:Fi}constructor(t,a,u){this.from=t,this.to=a,this.level=u}side(t,a){return this.dir==a==t?this.to:this.from}forward(t,a){return t==(this.dir==a)}static find(t,a,u,p){let g=-1;for(let b=0;b<t.length;b++){let M=t[b];if(M.from<=a&&M.to>=a){if(M.level==u)return b;(g<0||(p!=0?p<0?M.from<a:M.to>a:t[g].level>M.level))&&(g=b)}}if(g<0)throw new RangeError("Index out of range");return g}}function ys(f,t){if(f.length!=t.length)return!1;for(let a=0;a<f.length;a++){let u=f[a],p=t[a];if(u.from!=p.from||u.to!=p.to||u.direction!=p.direction||!ys(u.inner,p.inner))return!1}return!0}const qt=[];function yl(f,t,a,u,p){for(let g=0;g<=u.length;g++){let b=g?u[g-1].to:t,M=g<u.length?u[g].from:a,k=g?256:p;for(let R=b,Z=k,j=k;R<M;R++){let K=Ao(f.charCodeAt(R));K==512?K=Z:K==8&&j==4&&(K=16),qt[R]=K==4?2:K,K&7&&(j=K),Z=K}for(let R=b,Z=k,j=k;R<M;R++){let K=qt[R];if(K==128)R<M-1&&Z==qt[R+1]&&Z&24?K=qt[R]=Z:qt[R]=256;else if(K==64){let oe=R+1;for(;oe<M&&qt[oe]==64;)oe++;let de=R&&Z==8||oe<a&&qt[oe]==8?j==1?1:8:256;for(let be=R;be<oe;be++)qt[be]=de;R=oe-1}else K==8&&j==1&&(qt[R]=1);Z=K,K&7&&(j=K)}}}function vo(f,t,a,u,p){let g=p==1?2:1;for(let b=0,M=0,k=0;b<=u.length;b++){let R=b?u[b-1].to:t,Z=b<u.length?u[b].from:a;for(let j=R,K,oe,de;j<Z;j++)if(oe=_s[K=f.charCodeAt(j)])if(oe<0){for(let be=M-3;be>=0;be-=3)if(Kn[be+1]==-oe){let Se=Kn[be+2],Ee=Se&2?p:Se&4?Se&1?g:p:0;Ee&&(qt[j]=qt[Kn[be]]=Ee),M=be;break}}else{if(Kn.length==189)break;Kn[M++]=j,Kn[M++]=K,Kn[M++]=k}else if((de=qt[j])==2||de==1){let be=de==p;k=be?0:1;for(let Se=M-3;Se>=0;Se-=3){let Ee=Kn[Se+2];if(Ee&2)break;if(be)Kn[Se+2]|=2;else{if(Ee&4)break;Kn[Se+2]|=4}}}}}function xo(f,t,a,u){for(let p=0,g=u;p<=a.length;p++){let b=p?a[p-1].to:f,M=p<a.length?a[p].from:t;for(let k=b;k<M;){let R=qt[k];if(R==256){let Z=k+1;for(;;)if(Z==M){if(p==a.length)break;Z=a[p++].to,M=p<a.length?a[p].from:t}else if(qt[Z]==256)Z++;else break;let j=g==1,K=(Z<t?qt[Z]:u)==1,oe=j==K?j?1:2:u;for(let de=Z,be=p,Se=be?a[be-1].to:f;de>k;)de==Se&&(de=a[--be].from,Se=be?a[be-1].to:f),qt[--de]=oe;k=Z}else g=R,k++}}}function Os(f,t,a,u,p,g,b){let M=u%2?2:1;if(u%2==p%2)for(let k=t,R=0;k<a;){let Z=!0,j=!1;if(R==g.length||k<g[R].from){let be=qt[k];be!=M&&(Z=!1,j=be==16)}let K=!Z&&M==1?[]:null,oe=Z?u:u+1,de=k;e:for(;;)if(R<g.length&&de==g[R].from){if(j)break e;let be=g[R];if(!Z)for(let Se=be.to,Ee=R+1;;){if(Se==a)break e;if(Ee<g.length&&g[Ee].from==Se)Se=g[Ee++].to;else{if(qt[Se]==M)break e;break}}if(R++,K)K.push(be);else{be.from>k&&b.push(new An(k,be.from,oe));let Se=be.direction==Fi!=!(oe%2);bs(f,Se?u+1:u,p,be.inner,be.from,be.to,b),k=be.to}de=be.to}else{if(de==a||(Z?qt[de]!=M:qt[de]==M))break;de++}K?Os(f,k,de,u+1,p,K,b):k<de&&b.push(new An(k,de,oe)),k=de}else for(let k=a,R=g.length;k>t;){let Z=!0,j=!1;if(!R||k>g[R-1].to){let be=qt[k-1];be!=M&&(Z=!1,j=be==16)}let K=!Z&&M==1?[]:null,oe=Z?u:u+1,de=k;e:for(;;)if(R&&de==g[R-1].to){if(j)break e;let be=g[--R];if(!Z)for(let Se=be.from,Ee=R;;){if(Se==t)break e;if(Ee&&g[Ee-1].to==Se)Se=g[--Ee].from;else{if(qt[Se-1]==M)break e;break}}if(K)K.push(be);else{be.to<k&&b.push(new An(be.to,k,oe));let Se=be.direction==Fi!=!(oe%2);bs(f,Se?u+1:u,p,be.inner,be.from,be.to,b),k=be.from}de=be.from}else{if(de==t||(Z?qt[de-1]!=M:qt[de-1]==M))break;de--}K?Os(f,de,k,u+1,p,K,b):de<k&&b.push(new An(de,k,oe)),k=de}}function bs(f,t,a,u,p,g,b){let M=t%2?2:1;yl(f,p,g,u,M),vo(f,p,g,u,M),xo(p,g,u,M),Os(f,p,g,t,a,u,b)}function Ol(f,t,a){if(!f)return[new An(0,0,t==gs?1:0)];if(t==Fi&&!a.length&&!cr.test(f))return Co(f.length);if(a.length)for(;f.length>qt.length;)qt[qt.length]=256;let u=[],p=t==Fi?0:1;return bs(f,p,p,a,0,f.length,u),u}function Co(f){return[new An(0,f,0)]}let So="";function bl(f,t,a,u,p){var g;let b=u.head-f.from,M=An.find(t,b,(g=u.bidiLevel)!==null&&g!==void 0?g:-1,u.assoc),k=t[M],R=k.side(p,a);if(b==R){let K=M+=p?1:-1;if(K<0||K>=t.length)return null;k=t[M=K],b=k.side(!p,a),R=k.side(p,a)}let Z=Oe(f.text,b,k.forward(p,a));(Z<k.from||Z>k.to)&&(Z=R),So=f.text.slice(Math.min(b,Z),Math.max(b,Z));let j=M==(p?t.length-1:0)?null:t[M+(p?1:-1)];return j&&Z==R&&j.level+(p?0:1)<k.level?we.cursor(j.side(!p,a)+f.from,j.forward(p,a)?1:-1,j.level):we.cursor(Z+f.from,k.forward(p,a)?-1:1,k.level)}function Al(f,t,a){for(let u=t;u<a;u++){let p=Ao(f.charCodeAt(u));if(p==1)return Fi;if(p==2||p==4)return gs}return Fi}const Po=Ze.define(),Mo=Ze.define(),wo=Ze.define(),$r=Ze.define(),As=Ze.define(),ko=Ze.define(),Ti=Ze.define(),vs=Ze.define(),xs=Ze.define(),$o=Ze.define({combine:f=>f.some(t=>t)}),Do=Ze.define({combine:f=>f.some(t=>t)}),Eo=Ze.define();class Xi{constructor(t,a="nearest",u="nearest",p=5,g=5,b=!1){this.range=t,this.y=a,this.x=u,this.yMargin=p,this.xMargin=g,this.isSnapshot=b}map(t){return t.empty?this:new Xi(this.range.map(t),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(t){return this.range.to<=t.doc.length?this:new Xi(we.cursor(t.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Dr=Be.define({map:(f,t)=>f.map(t)}),Fo=Be.define();function gn(f,t,a){let u=f.facet($r);u.length?u[0](t):window.onerror&&window.onerror(String(t),a,void 0,void 0,t)||(a?console.error(a+":",t):console.error(t))}const ui=Ze.define({combine:f=>f.length?f[0]:!0});let vl=0;const bi=Ze.define({combine(f){return f.filter((t,a)=>{for(let u=0;u<a;u++)if(f[u].plugin==t.plugin)return!1;return!0})}});class ln{constructor(t,a,u,p,g){this.id=t,this.create=a,this.domEventHandlers=u,this.domEventObservers=p,this.baseExtensions=g(this),this.extension=this.baseExtensions.concat(bi.of({plugin:this,arg:void 0}))}of(t){return this.baseExtensions.concat(bi.of({plugin:this,arg:t}))}static define(t,a){const{eventHandlers:u,eventObservers:p,provide:g,decorations:b}=a||{};return new ln(vl++,t,u,p,M=>{let k=[];return b&&k.push(De.of(R=>{let Z=R.plugin(M);return Z?b(Z):_t.none})),g&&k.push(g(M)),k})}static fromClass(t,a){return ln.define((u,p)=>new t(u,p),a)}}class z{constructor(t){this.spec=t,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(t){if(this.value){if(this.mustUpdate){let a=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(a)}catch(u){if(gn(a.state,u,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(t,this.spec.arg)}catch(a){gn(t.state,a,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(t){var a;if(!((a=this.value)===null||a===void 0)&&a.destroy)try{this.value.destroy()}catch(u){gn(t.state,u,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const he=Ze.define(),ge=Ze.define(),De=Ze.define(),ht=Ze.define(),Kt=Ze.define(),Pn=Ze.define(),Ri=Ze.define();function lc(f,t){let a=f.state.facet(Ri);if(!a.length)return a;let u=a.map(g=>g instanceof Function?g(f):g),p=[];return vt.spans(u,t.from,t.to,{point(){},span(g,b,M,k){let R=g-t.from,Z=b-t.from,j=p;for(let K=M.length-1;K>=0;K--,k--){let oe=M[K].spec.bidiIsolate,de;if(oe==null&&(oe=Al(t.text,R,Z)),k>0&&j.length&&(de=j[j.length-1]).to==R&&de.direction==oe)de.to=Z,j=de.inner;else{let be={from:R,to:Z,direction:oe,inner:[]};j.push(be),j=be.inner}}}}),p}const uc=Ze.define();function xl(f){let t=0,a=0,u=0,p=0;for(let g of f.state.facet(uc)){let b=g(f);b&&(b.left!=null&&(t=Math.max(t,b.left)),b.right!=null&&(a=Math.max(a,b.right)),b.top!=null&&(u=Math.max(u,b.top)),b.bottom!=null&&(p=Math.max(p,b.bottom)))}return{left:t,right:a,top:u,bottom:p}}const Cs=Ze.define();class Jn{constructor(t,a,u,p){this.fromA=t,this.toA=a,this.fromB=u,this.toB=p}join(t){return new Jn(Math.min(this.fromA,t.fromA),Math.max(this.toA,t.toA),Math.min(this.fromB,t.fromB),Math.max(this.toB,t.toB))}addToSet(t){let a=t.length,u=this;for(;a>0;a--){let p=t[a-1];if(!(p.fromA>u.toA)){if(p.toA<u.fromA)break;u=u.join(p),t.splice(a-1,1)}}return t.splice(a,0,u),t}static extendWithRanges(t,a){if(a.length==0)return t;let u=[];for(let p=0,g=0,b=0;;){let M=p<t.length?t[p].fromB:1e9,k=g<a.length?a[g]:1e9,R=Math.min(M,k);if(R==1e9)break;let Z=R+b,j=R,K=Z;for(;;)if(g<a.length&&a[g]<=j){let oe=a[g+1];g+=2,j=Math.max(j,oe);for(let de=p;de<t.length&&t[de].fromB<=j;de++)b=t[de].toA-t[de].toB;K=Math.max(K,oe+b)}else if(p<t.length&&t[p].fromB<=j){let oe=t[p++];j=Math.max(j,oe.toB),K=Math.max(K,oe.toA),b=oe.toA-oe.toB}else break;u.push(new Jn(Z,K,R,j))}return u}}class To{constructor(t,a,u){this.view=t,this.state=a,this.transactions=u,this.flags=0,this.startState=t.state,this.changes=je.empty(this.startState.doc.length);for(let g of u)this.changes=this.changes.compose(g.changes);let p=[];this.changes.iterChangedRanges((g,b,M,k)=>p.push(new Jn(g,b,M,k))),this.changedRanges=p}static create(t,a,u){return new To(t,a,u)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(t=>t.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}const gd=[];class _n{constructor(t,a,u=0){this.dom=t,this.length=a,this.flags=u,this.parent=null,t.cmTile=this}get breakAfter(){return this.flags&1}get children(){return gd}isWidget(){return!1}get isHidden(){return!1}isComposite(){return!1}isLine(){return!1}isText(){return!1}isBlock(){return!1}get domAttrs(){return null}sync(t){if(this.flags|=2,this.flags&4){this.flags&=-5;let a=this.domAttrs;a&&Mt(this.dom,a)}}toString(){return this.constructor.name+(this.children.length?`(${this.children})`:"")+(this.breakAfter?"#":"")}destroy(){this.parent=null}setDOM(t){this.dom=t,t.cmTile=this}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(t,a=this.posAtStart){let u=a;for(let p of this.children){if(p==t)return u;u+=p.length+p.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(t){return this.posBefore(t)+t.length}covers(t){return!0}coordsIn(t,a){return null}domPosFor(t,a){let u=Oi(this.dom),p=this.length?t>0:a>0;return new bn(this.parent.dom,u+(p?1:0),t==0||t==this.length)}markDirty(t){this.flags&=-3,t&&(this.flags|=4),this.parent&&this.parent.flags&2&&this.parent.markDirty(!1)}get overrideDOMText(){return null}get root(){for(let t=this;t;t=t.parent)if(t instanceof Go)return t;return null}static get(t){return t.cmTile}}class Ro extends _n{constructor(t){super(t,0),this._children=[]}isComposite(){return!0}get children(){return this._children}get lastChild(){return this.children.length?this.children[this.children.length-1]:null}append(t){this.children.push(t),t.parent=this}sync(t){if(this.flags&2)return;super.sync(t);let a=this.dom,u=null,p,g=t?.node==a?t:null,b=0;for(let M of this.children){if(M.sync(t),b+=M.length+M.breakAfter,p=u?u.nextSibling:a.firstChild,g&&p!=M.dom&&(g.written=!0),M.dom.parentNode==a)for(;p&&p!=M.dom;)p=cc(p);else a.insertBefore(M.dom,p);u=M.dom}for(p=u?u.nextSibling:a.firstChild,g&&p&&(g.written=!0);p;)p=cc(p);this.length=b}}function cc(f){let t=f.nextSibling;return f.parentNode.removeChild(f),t}class Go extends Ro{constructor(t,a){super(a),this.view=t}owns(t){for(;t;t=t.parent)if(t==this)return!0;return!1}isBlock(){return!0}nearest(t){for(;;){if(!t)return null;let a=_n.get(t);if(a&&this.owns(a))return a;t=t.parentNode}}blockTiles(t){for(let a=[],u=this,p=0,g=0;;)if(p==u.children.length){if(!a.length)return;u=u.parent,u.breakAfter&&g++,p=a.pop()}else{let b=u.children[p++];if(b instanceof Ii)a.push(p),u=b,p=0;else{let M=g+b.length,k=t(b,g);if(k!==void 0)return k;g=M+b.breakAfter}}}resolveBlock(t,a){let u,p=-1,g,b=-1;if(this.blockTiles((M,k)=>{let R=k+M.length;if(t>=k&&t<=R){if(M.isWidget()&&a>=-1&&a<=1){if(M.flags&32)return!0;M.flags&16&&(u=void 0)}(k<t||t==R&&(a<-1?M.length:M.covers(1)))&&(!u||!M.isWidget()&&u.isWidget())&&(u=M,p=t-k),(R>t||t==k&&(a>1?M.length:M.covers(-1)))&&(!g||!M.isWidget()&&g.isWidget())&&(g=M,b=t-k)}}),!u&&!g)throw new Error("No tile at position "+t);return u&&a<0||!g?{tile:u,offset:p}:{tile:g,offset:b}}}class Ii extends Ro{constructor(t,a){super(t),this.wrapper=a}isBlock(){return!0}covers(t){return this.children.length?t<0?this.children[0].covers(-1):this.lastChild.covers(1):!1}get domAttrs(){return this.wrapper.attributes}static of(t,a){let u=new Ii(a||document.createElement(t.tagName),t);return a||(u.flags|=4),u}}class Er extends Ro{constructor(t,a){super(t),this.attrs=a}isLine(){return!0}static start(t,a,u){let p=new Er(a||document.createElement("div"),t);return(!a||!u)&&(p.flags|=4),p}get domAttrs(){return this.attrs}resolveInline(t,a,u){let p=null,g=-1,b=null,M=-1;function k(Z,j){for(let K=0,oe=0;K<Z.children.length&&oe<=j;K++){let de=Z.children[K],be=oe+de.length;be>=j&&(de.isComposite()?k(de,j-oe):(!b||b.isHidden&&(a>0||u&&yd(b,de)))&&(be>j||de.flags&32)?(b=de,M=j-oe):(oe<j||de.flags&16&&!de.isHidden)&&(p=de,g=j-oe)),oe=be}}k(this,t);let R=(a<0?p:b)||p||b;return R?{tile:R,offset:R==p?g:M}:null}coordsIn(t,a){let u=this.resolveInline(t,a,!0);return u?u.tile.coordsIn(Math.max(0,u.offset),a):_d(this)}domIn(t,a){let u=this.resolveInline(t,a);if(u){let{tile:p,offset:g}=u;if(this.dom.contains(p.dom))return p.isText()?new bn(p.dom,Math.min(p.dom.nodeValue.length,g)):p.domPosFor(g,p.flags&16?1:p.flags&32?-1:a);let b=u.tile.parent,M=!1;for(let k of b.children){if(M)return new bn(k.dom,0);k==u.tile&&(M=!0)}}return new bn(this.dom,0)}}function _d(f){let t=f.dom.lastChild;if(!t)return f.dom.getBoundingClientRect();let a=ur(t);return a[a.length-1]||null}function yd(f,t){let a=f.coordsIn(0,1),u=t.coordsIn(0,1);return a&&u&&u.top<a.bottom}class Gn extends Ro{constructor(t,a){super(t),this.mark=a}get domAttrs(){return this.mark.attrs}static of(t,a){let u=new Gn(a||document.createElement(t.tagName),t);return a||(u.flags|=4),u}}class hr extends _n{constructor(t,a){super(t,a.length),this.text=a}sync(t){this.flags&2||(super.sync(t),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text))}isText(){return!0}toString(){return JSON.stringify(this.text)}coordsIn(t,a){let u=this.dom.nodeValue.length;t>u&&(t=u);let p=t,g=t,b=0;t==0&&a<0||t==u&&a>=0?rt.chrome||rt.gecko||(t?(p--,b=1):g<u&&(g++,b=-1)):a<0?p--:g<u&&g++;let M=Hn(this.dom,p,g).getClientRects();if(!M.length)return null;let k=M[(b?b<0:a>=0)?0:M.length-1];return rt.safari&&!b&&k.width==0&&(k=Array.prototype.find.call(M,R=>R.width)||k),b?wr(k,b<0):k||null}static of(t,a){let u=new hr(a||document.createTextNode(t),t);return a||(u.flags|=2),u}}class Fr extends _n{constructor(t,a,u,p){super(t,a,p),this.widget=u}isWidget(){return!0}get isHidden(){return this.widget.isHidden}covers(t){return this.flags&48?!1:(this.flags&(t<0?64:128))>0}coordsIn(t,a){return this.coordsInWidget(t,a,!1)}coordsInWidget(t,a,u){let p=this.widget.coordsAt(this.dom,t,a);if(p)return p;if(u)return wr(this.dom.getBoundingClientRect(),this.length?t==0:a<=0);{let g=this.dom.getClientRects(),b=null;if(!g.length)return null;let M=this.flags&16?!0:this.flags&32?!1:t>0;for(let k=M?g.length-1:0;b=g[k],!(t>0?k==0:k==g.length-1||b.top<b.bottom);k+=M?-1:1);return wr(b,!M)}}get overrideDOMText(){if(!this.length)return V.empty;let{root:t}=this;if(!t)return V.empty;let a=this.posAtStart;return t.view.state.doc.slice(a,a+this.length)}destroy(){super.destroy(),this.widget.destroy(this.dom)}static of(t,a,u,p,g){return g||(g=t.toDOM(a),t.editable||(g.contentEditable="false")),new Fr(g,u,t,p)}}class Lo extends _n{constructor(t){let a=document.createElement("img");a.className="cm-widgetBuffer",a.setAttribute("aria-hidden","true"),super(a,0,t)}get isHidden(){return!1}get overrideDOMText(){return V.empty}coordsIn(t){return this.dom.getBoundingClientRect()}}class Od{constructor(t){this.index=0,this.beforeBreak=!1,this.parents=[],this.tile=t}advance(t,a,u){let{tile:p,index:g,beforeBreak:b,parents:M}=this;for(;t||a>0;)if(p.isComposite())if(b){if(!t)break;u&&u.break(),t--,b=!1}else if(g==p.children.length){if(!t&&!M.length)break;u&&u.leave(p),b=!!p.breakAfter,{tile:p,index:g}=M.pop(),g++}else{let k=p.children[g],R=k.breakAfter;(a>0?k.length<=t:k.length<t)&&(!u||u.skip(k,0,k.length)!==!1||!k.isComposite)?(b=!!R,g++,t-=k.length):(M.push({tile:p,index:g}),p=k,g=0,u&&k.isComposite()&&u.enter(k))}else if(g==p.length)b=!!p.breakAfter,{tile:p,index:g}=M.pop(),g++;else if(t){let k=Math.min(t,p.length-g);u&&u.skip(p,g,g+k),t-=k,g+=k}else break;return this.tile=p,this.index=g,this.beforeBreak=b,this}get root(){return this.parents.length?this.parents[0].tile:this.tile}}class bd{constructor(t,a,u,p){this.from=t,this.to=a,this.wrapper=u,this.rank=p}}class Ad{constructor(t,a,u){this.cache=t,this.root=a,this.blockWrappers=u,this.curLine=null,this.lastBlock=null,this.afterWidget=null,this.pos=0,this.wrappers=[],this.wrapperPos=0}addText(t,a,u,p){var g;this.flushBuffer();let b=this.ensureMarks(a,u),M=b.lastChild;if(M&&M.isText()&&!(M.flags&8)){this.cache.reused.set(M,2);let k=b.children[b.children.length-1]=new hr(M.dom,M.text+t);k.parent=b}else b.append(p||hr.of(t,(g=this.cache.find(hr))===null||g===void 0?void 0:g.dom));this.pos+=t.length,this.afterWidget=null}addComposition(t,a){let u=this.curLine;u.dom!=a.line.dom&&(u.setDOM(this.cache.reused.has(a.line)?Cl(a.line.dom):a.line.dom),this.cache.reused.set(a.line,2));let p=u;for(let b=a.marks.length-1;b>=0;b--){let M=a.marks[b],k=p.lastChild;if(k instanceof Gn&&k.mark.eq(M.mark))k.dom!=M.dom&&k.setDOM(Cl(M.dom)),p=k;else{if(this.cache.reused.get(M)){let Z=_n.get(M.dom);Z&&Z.setDOM(Cl(M.dom))}let R=Gn.of(M.mark,M.dom);p.append(R),p=R}this.cache.reused.set(M,2)}let g=new hr(t.text,t.text.nodeValue);g.flags|=8,p.append(g)}addInlineWidget(t,a,u){let p=this.afterWidget&&t.flags&48&&(this.afterWidget.flags&48)==(t.flags&48);p||this.flushBuffer();let g=this.ensureMarks(a,u);!p&&!(t.flags&16)&&g.append(this.getBuffer(1)),g.append(t),this.pos+=t.length,this.afterWidget=t}addMark(t,a,u){this.flushBuffer(),this.ensureMarks(a,u).append(t),this.pos+=t.length,this.afterWidget=null}addBlockWidget(t){this.getBlockPos().append(t),this.pos+=t.length,this.lastBlock=t,this.endLine()}continueWidget(t){let a=this.afterWidget||this.lastBlock;a.length+=t,this.pos+=t}addLineStart(t,a){var u;t||(t=fc);let p=Er.start(t,a||((u=this.cache.find(Er))===null||u===void 0?void 0:u.dom),!!a);this.getBlockPos().append(this.lastBlock=this.curLine=p)}addLine(t){this.getBlockPos().append(t),this.pos+=t.length,this.lastBlock=t,this.endLine()}addBreak(){this.lastBlock.flags|=1,this.endLine(),this.pos++}addLineStartIfNotCovered(t){this.blockPosCovered()||this.addLineStart(t)}ensureLine(t){this.curLine||this.addLineStart(t)}ensureMarks(t,a){var u;let p=this.curLine;for(let g=t.length-1;g>=0;g--){let b=t[g],M;if(a>0&&(M=p.lastChild)&&M instanceof Gn&&M.mark.eq(b))p=M,a--;else{let k=Gn.of(b,(u=this.cache.find(Gn,R=>R.mark.eq(b)))===null||u===void 0?void 0:u.dom);p.append(k),p=k,a=0}}return p}endLine(){if(this.curLine){this.flushBuffer();let t=this.curLine.lastChild;(!t||!hc(this.curLine,!1)||t.dom.nodeName!="BR"&&t.isWidget()&&!(rt.ios&&hc(this.curLine,!0)))&&this.curLine.append(this.cache.findWidget(Sl,0,32)||new Fr(Sl.toDOM(),0,Sl,32)),this.curLine=this.afterWidget=null}}updateBlockWrappers(){this.wrapperPos>this.pos+1e4&&(this.blockWrappers.goto(this.pos),this.wrappers.length=0);for(let t=this.wrappers.length-1;t>=0;t--)this.wrappers[t].to<this.pos&&this.wrappers.splice(t,1);for(let t=this.blockWrappers;t.value&&t.from<=this.pos;t.next())if(t.to>=this.pos){let a=new bd(t.from,t.to,t.value,t.rank),u=this.wrappers.length;for(;u>0&&(this.wrappers[u-1].rank-a.rank||this.wrappers[u-1].to-a.to)<0;)u--;this.wrappers.splice(u,0,a)}this.wrapperPos=this.pos}getBlockPos(){var t;this.updateBlockWrappers();let a=this.root;for(let u of this.wrappers){let p=a.lastChild;if(u.from<this.pos&&p instanceof Ii&&p.wrapper.eq(u.wrapper))a=p;else{let g=Ii.of(u.wrapper,(t=this.cache.find(Ii,b=>b.wrapper.eq(u.wrapper)))===null||t===void 0?void 0:t.dom);a.append(g),a=g}}return a}blockPosCovered(){let t=this.lastBlock;return t!=null&&!t.breakAfter&&(!t.isWidget()||(t.flags&160)>0)}getBuffer(t){let a=2|(t<0?16:32),u=this.cache.find(Lo,void 0,1);return u&&(u.flags=a),u||new Lo(a)}flushBuffer(){this.afterWidget&&!(this.afterWidget.flags&32)&&(this.afterWidget.parent.append(this.getBuffer(-1)),this.afterWidget=null)}}class vd{constructor(t){this.skipCount=0,this.text="",this.textOff=0,this.cursor=t.iter()}skip(t){this.textOff+t<=this.text.length?this.textOff+=t:(this.skipCount+=t-(this.text.length-this.textOff),this.text="",this.textOff=0)}next(t){if(this.textOff==this.text.length){let{value:p,lineBreak:g,done:b}=this.cursor.next(this.skipCount);if(this.skipCount=0,b)throw new Error("Ran out of text content when drawing inline views");this.text=p;let M=this.textOff=Math.min(t,p.length);return g?null:p.slice(0,M)}let a=Math.min(this.text.length,this.textOff+t),u=this.text.slice(this.textOff,a);return this.textOff=a,u}}const Zo=[Fr,Er,hr,Gn,Lo,Ii,Go];for(let f=0;f<Zo.length;f++)Zo[f].bucket=f;class xd{constructor(t){this.view=t,this.buckets=Zo.map(()=>[]),this.index=Zo.map(()=>0),this.reused=new Map}add(t){let a=t.constructor.bucket,u=this.buckets[a];u.length<6?u.push(t):u[this.index[a]=(this.index[a]+1)%6]=t}find(t,a,u=2){let p=t.bucket,g=this.buckets[p],b=this.index[p];for(let M=g.length-1;M>=0;M--){let k=(M+b)%g.length,R=g[k];if((!a||a(R))&&!this.reused.has(R))return g.splice(k,1),k<b&&this.index[p]--,this.reused.set(R,u),R}return null}findWidget(t,a,u){let p=this.buckets[0];if(p.length)for(let g=0,b=0;;g++){if(g==p.length){if(b)return null;b=1,g=0}let M=p[g];if(!this.reused.has(M)&&(b==0?M.widget.compare(t):M.widget.constructor==t.constructor&&t.updateDOM(M.dom,this.view)))return p.splice(g,1),g<this.index[0]&&this.index[0]--,this.reused.set(M,1),M.length=a,M.flags=M.flags&-498|u,M}}reuse(t){return this.reused.set(t,1),t}maybeReuse(t,a=2){if(!this.reused.has(t))return this.reused.set(t,a),t.dom}}class Cd{constructor(t,a,u,p,g){this.view=t,this.decorations=p,this.disallowBlockEffectsFor=g,this.openWidget=!1,this.openMarks=0,this.cache=new xd(t),this.text=new vd(t.state.doc),this.builder=new Ad(this.cache,new Go(t,t.contentDOM),vt.iter(u)),this.cache.reused.set(a,2),this.old=new Od(a)}run(t,a){let u=a&&this.getCompositionContext(a.text);for(let p=0,g=0,b=0;;){let M=b<t.length?t[b++]:null,k=M?M.fromA:this.old.root.length;if(k>p){let R=k-p;this.preserve(R,!b,!M),p=k,g+=R}if(!M)break;this.forward(M.fromA,M.toA),a&&M.fromA<=a.range.fromA&&M.toA>=a.range.toA?(this.emit(g,a.range.fromB),this.builder.addComposition(a,u),this.emit(a.range.toB,M.toB)):this.emit(g,M.toB),g=M.toB,p=M.toA}return this.builder.curLine&&this.builder.endLine(),this.builder.root}preserve(t,a,u){let p=Md(this.old),g=this.openMarks;this.old.advance(t,u?1:-1,{skip:(b,M,k)=>{if(b.isWidget())if(this.openWidget)this.builder.continueWidget(k-M);else{let R=k>0||M<b.length?Fr.of(b.widget,this.view,k-M,b.flags&496,this.cache.maybeReuse(b)):this.cache.reuse(b);R.flags&256?(R.flags&=-2,this.builder.addBlockWidget(R)):(this.builder.ensureLine(null),this.builder.addInlineWidget(R,p,g),g=p.length)}else if(b.isText())this.builder.ensureLine(null),!M&&k==b.length?this.builder.addText(b.text,p,g,this.cache.reuse(b)):(this.cache.add(b),this.builder.addText(b.text.slice(M,k),p,g)),g=p.length;else if(b.isLine())b.flags&=-2,this.cache.reused.set(b,1),this.builder.addLine(b);else if(b instanceof Lo)this.cache.add(b);else if(b instanceof Gn)this.builder.ensureLine(null),this.builder.addMark(b,p,g),this.cache.reused.set(b,1),g=p.length;else return!1;this.openWidget=!1},enter:b=>{b.isLine()?this.builder.addLineStart(b.attrs,this.cache.maybeReuse(b)):(this.cache.add(b),b instanceof Gn&&p.unshift(b.mark)),this.openWidget=!1},leave:b=>{b.isLine()?p.length&&(p.length=g=0):b instanceof Gn&&(p.shift(),g=Math.min(g,p.length))},break:()=>{this.builder.addBreak(),this.openWidget=!1}}),this.text.skip(t)}emit(t,a){let u=null,p=this.builder,g=0,b=vt.spans(this.decorations,t,a,{point:(M,k,R,Z,j,K)=>{if(R instanceof $t){if(this.disallowBlockEffectsFor[K]){if(R.block)throw new RangeError("Block decorations may not be specified via plugins");if(k>this.view.state.doc.lineAt(M).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}if(g=Z.length,j>Z.length)p.continueWidget(k-M);else{let oe=R.widget||(R.block?Tr.block:Tr.inline),de=Sd(R),be=this.cache.findWidget(oe,k-M,de)||Fr.of(oe,this.view,k-M,de);R.block?(R.startSide>0&&p.addLineStartIfNotCovered(u),p.addBlockWidget(be)):(p.ensureLine(u),p.addInlineWidget(be,Z,j))}u=null}else u=Pd(u,R);k>M&&this.text.skip(k-M)},span:(M,k,R,Z)=>{for(let j=M;j<k;){let K=this.text.next(Math.min(512,k-j));K==null?(p.addLineStartIfNotCovered(u),p.addBreak(),j++):(p.ensureLine(u),p.addText(K,R,Z),j+=K.length),u=null}}});p.addLineStartIfNotCovered(u),this.openWidget=b>g,this.openMarks=b}forward(t,a){this.old.advance(a-t,1,{skip:(u,p,g)=>{(u.isText()||g==u.length)&&this.cache.add(u)},enter:u=>this.cache.add(u),leave:()=>{},break:()=>{}})}getCompositionContext(t){let a=[],u=null;for(let p=t.parentNode;;p=p.parentNode){let g=_n.get(p);if(p==this.view.contentDOM)break;g instanceof Gn?a.push(g):g?.isLine()?u=g:p.nodeName=="DIV"&&!u&&p!=this.view.contentDOM?u=new Er(p,fc):a.push(Gn.of(new lr({tagName:p.nodeName.toLowerCase(),attributes:In(p)}),p))}return{line:u,marks:a}}}function hc(f,t){let a=u=>{for(let p of u.children)if((t?p.isText():p.length)||a(p))return!0;return!1};return a(f)}function Sd(f){let t=f.isReplace?(f.startSide<0?64:0)|(f.endSide>0?128:0):f.startSide>0?32:16;return f.block&&(t|=256),t}const fc={class:"cm-line"};function Pd(f,t){let a=t.spec.attributes,u=t.spec.class;return!a&&!u||(f||(f={class:"cm-line"}),a&&fs(a,f),u&&(f.class+=" "+u)),f}function Md(f){let t=[];for(let a=f.parents.length;a>1;a--){let u=a==f.parents.length?f.tile:f.parents[a].tile;u instanceof Gn&&t.push(u.mark)}return t}function Cl(f){let t=_n.get(f);return t&&t.setDOM(f.cloneNode()),f}class Tr extends Vn{constructor(t){super(),this.tag=t}eq(t){return t.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(t){return t.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Tr.inline=new Tr("span"),Tr.block=new Tr("div");const Sl=new class extends Vn{toDOM(){return document.createElement("br")}get isHidden(){return!0}get editable(){return!0}};class pc{constructor(t){this.view=t,this.decorations=[],this.blockWrappers=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.editContextFormatting=_t.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.updateDeco(),this.tile=new Go(t,t.contentDOM),this.updateInner([new Jn(0,0,0,t.state.doc.length)],null)}update(t){var a;let u=t.changedRanges;this.minWidth>0&&u.length&&(u.every(({fromA:Z,toA:j})=>j<this.minWidthFrom||Z>this.minWidthTo)?(this.minWidthFrom=t.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=t.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(t);let p=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((a=this.domChanged)===null||a===void 0)&&a.newSel?p=this.domChanged.newSel.head:!Gd(t.changes,this.hasComposition)&&!t.selectionSet&&(p=t.state.selection.main.head));let g=p>-1?kd(this.view,t.changes,p):null;if(this.domChanged=null,this.hasComposition){let{from:Z,to:j}=this.hasComposition;u=new Jn(Z,j,t.changes.mapPos(Z,-1),t.changes.mapPos(j,1)).addToSet(u.slice())}this.hasComposition=g?{from:g.range.fromB,to:g.range.toB}:null,(rt.ie||rt.chrome)&&!g&&t&&t.state.doc.lines!=t.startState.doc.lines&&(this.forceSelection=!0);let b=this.decorations,M=this.blockWrappers;this.updateDeco();let k=Ed(b,this.decorations,t.changes);k.length&&(u=Jn.extendWithRanges(u,k));let R=Td(M,this.blockWrappers,t.changes);return R.length&&(u=Jn.extendWithRanges(u,R)),g&&!u.some(Z=>Z.fromA<=g.range.fromA&&Z.toA>=g.range.toA)&&(u=g.range.addToSet(u.slice())),this.tile.flags&2&&u.length==0?!1:(this.updateInner(u,g),t.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(t,a){this.view.viewState.mustMeasureContent=!0;let{observer:u}=this.view;u.ignore(()=>{if(a||t.length){let b=this.tile,M=new Cd(this.view,b,this.blockWrappers,this.decorations,this.dynamicDecorationMap);this.tile=M.run(t,a),Pl(b,M.cache.reused)}this.tile.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.tile.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let g=rt.chrome||rt.ios?{node:u.selectionRange.focusNode,written:!1}:void 0;this.tile.sync(g),g&&(g.written||u.selectionRange.focusNode!=g.node||!this.tile.dom.contains(g.node))&&(this.forceSelection=!0),this.tile.dom.style.height=""});let p=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let g of this.tile.children)g.isWidget()&&g.widget instanceof Ml&&p.push(g.dom);u.updateGaps(p)}updateEditContextFormatting(t){this.editContextFormatting=this.editContextFormatting.map(t.changes);for(let a of t.transactions)for(let u of a.effects)u.is(Fo)&&(this.editContextFormatting=u.value)}updateSelection(t=!1,a=!1){(t||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let{dom:u}=this.tile,p=this.view.root.activeElement,g=p==u,b=!g&&!(this.view.state.facet(ui)||u.tabIndex>-1)&&Pr(u,this.view.observer.selectionRange)&&!(p&&u.contains(p));if(!(g||a||b))return;let M=this.forceSelection;this.forceSelection=!1;let k=this.view.state.selection.main,R,Z;if(k.empty?Z=R=this.inlineDOMNearPos(k.anchor,k.assoc||1):(Z=this.inlineDOMNearPos(k.head,k.head==k.from?1:-1),R=this.inlineDOMNearPos(k.anchor,k.anchor==k.from?1:-1)),rt.gecko&&k.empty&&!this.hasComposition&&wd(R)){let K=document.createTextNode("");this.view.observer.ignore(()=>R.node.insertBefore(K,R.node.childNodes[R.offset]||null)),R=Z=new bn(K,0),M=!0}let j=this.view.observer.selectionRange;(M||!j.focusNode||(!En(R.node,R.offset,j.anchorNode,j.anchorOffset)||!En(Z.node,Z.offset,j.focusNode,j.focusOffset))&&!this.suppressWidgetCursorChange(j,k))&&(this.view.observer.ignore(()=>{rt.android&&rt.chrome&&u.contains(j.focusNode)&&Rd(j.focusNode,u)&&(u.blur(),u.focus({preventScroll:!0}));let K=Ei(this.view.root);if(K)if(k.empty){if(rt.gecko){let oe=$d(R.node,R.offset);if(oe&&oe!=3){let de=(oe==1?yo:Oo)(R.node,R.offset);de&&(R=new bn(de.node,de.offset))}}K.collapse(R.node,R.offset),k.bidiLevel!=null&&K.caretBidiLevel!==void 0&&(K.caretBidiLevel=k.bidiLevel)}else if(K.extend){K.collapse(R.node,R.offset);try{K.extend(Z.node,Z.offset)}catch{}}else{let oe=document.createRange();k.anchor>k.head&&([R,Z]=[Z,R]),oe.setEnd(Z.node,Z.offset),oe.setStart(R.node,R.offset),K.removeAllRanges(),K.addRange(oe)}b&&this.view.root.activeElement==u&&(u.blur(),p&&p.focus())}),this.view.observer.setSelectionRange(R,Z)),this.impreciseAnchor=R.precise?null:new bn(j.anchorNode,j.anchorOffset),this.impreciseHead=Z.precise?null:new bn(j.focusNode,j.focusOffset)}suppressWidgetCursorChange(t,a){return this.hasComposition&&a.empty&&En(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)&&this.posFromDOM(t.focusNode,t.focusOffset)==a.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:t}=this,a=t.state.selection.main,u=Ei(t.root),{anchorNode:p,anchorOffset:g}=t.observer.selectionRange;if(!u||!a.empty||!a.assoc||!u.modify)return;let b=this.lineAt(a.head,a.assoc);if(!b)return;let M=b.posAtStart;if(a.head==M||a.head==M+b.length)return;let k=this.coordsAt(a.head,-1),R=this.coordsAt(a.head,1);if(!k||!R||k.bottom>R.top)return;let Z=this.domAtPos(a.head+a.assoc,a.assoc);u.collapse(Z.node,Z.offset),u.modify("move",a.assoc<0?"forward":"backward","lineboundary"),t.observer.readSelectionRange();let j=t.observer.selectionRange;t.docView.posFromDOM(j.anchorNode,j.anchorOffset)!=a.from&&u.collapse(p,g)}posFromDOM(t,a){let u=this.tile.nearest(t);if(!u)return this.tile.dom.compareDocumentPosition(t)&2?0:this.view.state.doc.length;let p=u.posAtStart;if(u.isComposite()){let g;if(t==u.dom)g=u.dom.childNodes[a];else{let b=ai(t)==0?0:a==0?-1:1;for(;;){let M=t.parentNode;if(M==u.dom)break;b==0&&M.firstChild!=M.lastChild&&(t==M.firstChild?b=-1:b=1),t=M}b<0?g=t:g=t.nextSibling}if(g==u.dom.firstChild)return p;for(;g&&!_n.get(g);)g=g.nextSibling;if(!g)return p+u.length;for(let b=0,M=p;;b++){let k=u.children[b];if(k.dom==g)return M;M+=k.length+k.breakAfter}}else return u.isText()?t==u.dom?p+a:p+(a?u.length:0):p}domAtPos(t,a){let{tile:u,offset:p}=this.tile.resolveBlock(t,a);return u.isWidget()?u.domPosFor(t,a):u.domIn(p,a)}inlineDOMNearPos(t,a){let u,p=-1,g=!1,b,M=-1,k=!1;return this.tile.blockTiles((R,Z)=>{if(R.isWidget()){if(R.flags&32&&Z>=t)return!0;R.flags&16&&(g=!0)}else{let j=Z+R.length;if(Z<=t&&(u=R,p=t-Z,g=j<t),j>=t&&!b&&(b=R,M=t-Z,k=Z>t),Z>t&&b)return!0}}),!u&&!b?this.domAtPos(t,a):(g&&b?u=null:k&&u&&(b=null),u&&a<0||!b?u.domIn(p,a):b.domIn(M,a))}coordsAt(t,a){let{tile:u,offset:p}=this.tile.resolveBlock(t,a);return u.isWidget()?u.widget instanceof Ml?null:u.coordsInWidget(p,a,!0):u.coordsIn(p,a)}lineAt(t,a){let{tile:u}=this.tile.resolveBlock(t,a);return u.isLine()?u:null}coordsForChar(t){let{tile:a,offset:u}=this.tile.resolveBlock(t,1);if(!a.isLine())return null;function p(g,b){if(g.isComposite())for(let M of g.children){if(M.length>=b){let k=p(M,b);if(k)return k}if(b-=M.length,b<0)break}else if(g.isText()&&b<g.length){let M=Oe(g.text,b);if(M==b)return null;let k=Hn(g.dom,b,M).getClientRects();for(let R=0;R<k.length;R++){let Z=k[R];if(R==k.length-1||Z.top<Z.bottom&&Z.left<Z.right)return Z}}return null}return p(a,u)}measureVisibleLineHeights(t){let a=[],{from:u,to:p}=t,g=this.view.contentDOM.clientWidth,b=g>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,M=-1,k=this.view.textDirection==Yt.LTR,R=0,Z=(j,K,oe)=>{for(let de=0;de<j.children.length&&!(K>p);de++){let be=j.children[de],Se=K+be.length,Ee=be.dom.getBoundingClientRect(),{height:ze}=Ee;if(oe&&!de&&(R+=Ee.top-oe.top),be instanceof Ii)Se>u&&Z(be,K,Ee);else if(K>=u&&(R>0&&a.push(-R),a.push(ze+R),R=0,b)){let We=be.dom.lastChild,ot=We?ur(We):[];if(ot.length){let Ve=ot[ot.length-1],nt=k?Ve.right-Ee.left:Ee.right-Ve.left;nt>M&&(M=nt,this.minWidth=g,this.minWidthFrom=K,this.minWidthTo=Se)}}oe&&de==j.children.length-1&&(R+=oe.bottom-Ee.bottom),K=Se+be.breakAfter}};return Z(this.tile,0,null),a}textDirectionAt(t){let{tile:a}=this.tile.resolveBlock(t,1);return getComputedStyle(a.dom).direction=="rtl"?Yt.RTL:Yt.LTR}measureTextSize(){let t=this.tile.blockTiles(b=>{if(b.isLine()&&b.children.length&&b.length<=20){let M=0,k;for(let R of b.children){if(!R.isText()||/[^ -~]/.test(R.text))return;let Z=ur(R.dom);if(Z.length!=1)return;M+=Z[0].width,k=Z[0].height}if(M)return{lineHeight:b.dom.getBoundingClientRect().height,charWidth:M/b.length,textHeight:k}}});if(t)return t;let a=document.createElement("div"),u,p,g;return a.className="cm-line",a.style.width="99999px",a.style.position="absolute",a.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.tile.dom.appendChild(a);let b=ur(a.firstChild)[0];u=a.getBoundingClientRect().height,p=b&&b.width?b.width/27:7,g=b&&b.height?b.height:u,a.remove()}),{lineHeight:u,charWidth:p,textHeight:g}}computeBlockGapDeco(){let t=[],a=this.view.viewState;for(let u=0,p=0;;p++){let g=p==a.viewports.length?null:a.viewports[p],b=g?g.from-1:this.view.state.doc.length;if(b>u){let M=(a.lineBlockAt(b).bottom-a.lineBlockAt(u).top)/this.view.scaleY;t.push(_t.replace({widget:new Ml(M),block:!0,inclusive:!0,isBlockGap:!0}).range(u,b))}if(!g)break;u=g.to+1}return _t.set(t)}updateDeco(){let t=1,a=this.view.state.facet(De).map(g=>(this.dynamicDecorationMap[t++]=typeof g=="function")?g(this.view):g),u=!1,p=this.view.state.facet(Kt).map((g,b)=>{let M=typeof g=="function";return M&&(u=!0),M?g(this.view):g});for(p.length&&(this.dynamicDecorationMap[t++]=u,a.push(vt.join(p))),this.decorations=[this.editContextFormatting,...a,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];t<this.decorations.length;)this.dynamicDecorationMap[t++]=!1;this.blockWrappers=this.view.state.facet(ht).map(g=>typeof g=="function"?g(this.view):g)}scrollIntoView(t){if(t.isSnapshot){let R=this.view.viewState.lineBlockAt(t.range.head);this.view.scrollDOM.scrollTop=R.top-t.yMargin,this.view.scrollDOM.scrollLeft=t.xMargin;return}for(let R of this.view.state.facet(Eo))try{if(R(this.view,t.range,t))return!0}catch(Z){gn(this.view.state,Z,"scroll handler")}let{range:a}=t,u=this.coordsAt(a.head,a.empty?a.assoc:a.head>a.anchor?-1:1),p;if(!u)return;!a.empty&&(p=this.coordsAt(a.anchor,a.anchor>a.head?-1:1))&&(u={left:Math.min(u.left,p.left),top:Math.min(u.top,p.top),right:Math.max(u.right,p.right),bottom:Math.max(u.bottom,p.bottom)});let g=xl(this.view),b={left:u.left-g.left,top:u.top-g.top,right:u.right+g.right,bottom:u.bottom+g.bottom},{offsetWidth:M,offsetHeight:k}=this.view.scrollDOM;dl(this.view.scrollDOM,b,a.head<a.anchor?-1:1,t.x,t.y,Math.max(Math.min(t.xMargin,M),-M),Math.max(Math.min(t.yMargin,k),-k),this.view.textDirection==Yt.LTR)}lineHasWidget(t){let a=u=>u.isWidget()||u.children.some(a);return a(this.tile.resolveBlock(t,1).tile)}destroy(){Pl(this.tile)}}function Pl(f,t){let a=t?.get(f);if(a!=1){a==null&&f.destroy();for(let u of f.children)Pl(u,t)}}function wd(f){return f.node.nodeType==1&&f.node.firstChild&&(f.offset==0||f.node.childNodes[f.offset-1].contentEditable=="false")&&(f.offset==f.node.childNodes.length||f.node.childNodes[f.offset].contentEditable=="false")}function dc(f,t){let a=f.observer.selectionRange;if(!a.focusNode)return null;let u=yo(a.focusNode,a.focusOffset),p=Oo(a.focusNode,a.focusOffset),g=u||p;if(p&&u&&p.node!=u.node){let M=_n.get(p.node);if(!M||M.isText()&&M.text!=p.node.nodeValue)g=p;else if(f.docView.lastCompositionAfterCursor){let k=_n.get(u.node);!k||k.isText()&&k.text!=u.node.nodeValue||(g=p)}}if(f.docView.lastCompositionAfterCursor=g!=u,!g)return null;let b=t-g.offset;return{from:b,to:b+g.node.nodeValue.length,node:g.node}}function kd(f,t,a){let u=dc(f,a);if(!u)return null;let{node:p,from:g,to:b}=u,M=p.nodeValue;if(/[\n\r]/.test(M)||f.state.doc.sliceString(u.from,u.to)!=M)return null;let k=t.invertedDesc;return{range:new Jn(k.mapPos(g),k.mapPos(b),g,b),text:p}}function $d(f,t){return f.nodeType!=1?0:(t&&f.childNodes[t-1].contentEditable=="false"?1:0)|(t<f.childNodes.length&&f.childNodes[t].contentEditable=="false"?2:0)}let Dd=class{constructor(){this.changes=[]}compareRange(t,a){yi(t,a,this.changes)}comparePoint(t,a){yi(t,a,this.changes)}boundChange(t){yi(t,t,this.changes)}};function Ed(f,t,a){let u=new Dd;return vt.compare(f,t,a,u),u.changes}class Fd{constructor(){this.changes=[]}compareRange(t,a){yi(t,a,this.changes)}comparePoint(){}boundChange(t){yi(t,t,this.changes)}}function Td(f,t,a){let u=new Fd;return vt.compare(f,t,a,u),u.changes}function Rd(f,t){for(let a=f;a&&a!=t;a=a.assignedSlot||a.parentNode)if(a.nodeType==1&&a.contentEditable=="false")return!0;return!1}function Gd(f,t){let a=!1;return t&&f.iterChangedRanges((u,p)=>{u<t.to&&p>t.from&&(a=!0)}),a}class Ml extends Vn{constructor(t){super(),this.height=t}toDOM(){let t=document.createElement("div");return t.className="cm-gap",this.updateDOM(t),t}eq(t){return t.height==this.height}updateDOM(t){return t.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function Ld(f,t,a=1){let u=f.charCategorizer(t),p=f.doc.lineAt(t),g=t-p.from;if(p.length==0)return we.cursor(t);g==0?a=1:g==p.length&&(a=-1);let b=g,M=g;a<0?b=Oe(p.text,g,!1):M=Oe(p.text,g);let k=u(p.text.slice(b,M));for(;b>0;){let R=Oe(p.text,b,!1);if(u(p.text.slice(R,b))!=k)break;b=R}for(;M<p.length;){let R=Oe(p.text,M);if(u(p.text.slice(M,R))!=k)break;M=R}return we.range(b+p.from,M+p.from)}function Zd(f,t,a,u,p){let g=Math.round((u-t.left)*f.defaultCharacterWidth);if(f.lineWrapping&&a.height>f.defaultLineHeight*1.5){let M=f.viewState.heightOracle.textHeight,k=Math.floor((p-a.top-(f.defaultLineHeight-M)*.5)/M);g+=k*f.viewState.heightOracle.lineLength}let b=f.state.sliceDoc(a.from,a.to);return a.from+ns(b,g,f.state.tabSize)}function wl(f,t,a){let u=f.lineBlockAt(t);if(Array.isArray(u.type)){let p;for(let g of u.type){if(g.from>t)break;if(!(g.to<t)){if(g.from<t&&g.to>t)return g;(!p||g.type==tt.Text&&(p.type!=g.type||(a<0?g.from<t:g.to>t)))&&(p=g)}}return p||u}return u}function Nd(f,t,a,u){let p=wl(f,t.head,t.assoc||-1),g=!u||p.type!=tt.Text||!(f.lineWrapping||p.widgetLineBreaks)?null:f.coordsAtPos(t.assoc<0&&t.head>p.from?t.head-1:t.head);if(g){let b=f.dom.getBoundingClientRect(),M=f.textDirectionAt(p.from),k=f.posAtCoords({x:a==(M==Yt.LTR)?b.right-1:b.left+1,y:(g.top+g.bottom)/2});if(k!=null)return we.cursor(k,a?-1:1)}return we.cursor(a?p.to:p.from,a?-1:1)}function mc(f,t,a,u){let p=f.state.doc.lineAt(t.head),g=f.bidiSpans(p),b=f.textDirectionAt(p.from);for(let M=t,k=null;;){let R=bl(p,g,b,M,a),Z=So;if(!R){if(p.number==(a?f.state.doc.lines:1))return M;Z=`
`,p=f.state.doc.line(p.number+(a?1:-1)),g=f.bidiSpans(p),R=f.visualLineSide(p,!a)}if(k){if(!k(Z))return M}else{if(!u)return R;k=u(Z)}M=R}}function Bd(f,t,a){let u=f.state.charCategorizer(t),p=u(a);return g=>{let b=u(g);return p==I.Space&&(p=b),p==b}}function Qd(f,t,a,u){let p=t.head,g=a?1:-1;if(p==(a?f.state.doc.length:0))return we.cursor(p,t.assoc);let b=t.goalColumn,M,k=f.contentDOM.getBoundingClientRect(),R=f.coordsAtPos(p,t.assoc||-1),Z=f.documentTop;if(R)b==null&&(b=R.left-k.left),M=g<0?R.top:R.bottom;else{let oe=f.viewState.lineBlockAt(p);b==null&&(b=Math.min(k.right-k.left,f.defaultCharacterWidth*(p-oe.from))),M=(g<0?oe.top:oe.bottom)+Z}let j=k.left+b,K=u??f.viewState.heightOracle.textHeight>>1;for(let oe=0;;oe+=10){let de=M+(K+oe)*g,be=$l(f,{x:j,y:de},!1,g);return we.cursor(be.pos,be.assoc,void 0,b)}}function Ss(f,t,a){for(;;){let u=0;for(let p of f)p.between(t-1,t+1,(g,b,M)=>{if(t>g&&t<b){let k=u||a||(t-g<b-t?-1:1);t=k<0?g:b,u=k}});if(!u)return t}}function gc(f,t){let a=null;for(let u=0;u<t.ranges.length;u++){let p=t.ranges[u],g=null;if(p.empty){let b=Ss(f,p.from,0);b!=p.from&&(g=we.cursor(b,-1))}else{let b=Ss(f,p.from,-1),M=Ss(f,p.to,1);(b!=p.from||M!=p.to)&&(g=we.range(p.from==p.anchor?b:M,p.from==p.head?b:M))}g&&(a||(a=t.ranges.slice()),a[u]=g)}return a?we.create(a,t.mainIndex):t}function kl(f,t,a){let u=Ss(f.state.facet(Pn).map(p=>p(f)),a.from,t.head>a.from?-1:1);return u==a.from?a:we.cursor(u,u<a.from?1:-1)}class Ai{constructor(t,a){this.pos=t,this.assoc=a}}function $l(f,t,a,u){let p=f.contentDOM.getBoundingClientRect(),g=p.top+f.viewState.paddingTop,{x:b,y:M}=t,k=M-g,R;for(;;){if(k<0)return new Ai(0,1);if(k>f.viewState.docHeight)return new Ai(f.state.doc.length,-1);if(R=f.elementAtHeight(k),u==null)break;if(R.type==tt.Text){let K=f.docView.coordsAt(u<0?R.from:R.to,u);if(K&&(u<0?K.top<=k+g:K.bottom>=k+g))break}let j=f.viewState.heightOracle.textHeight/2;k=u>0?R.bottom+j:R.top-j}if(f.viewport.from>=R.to||f.viewport.to<=R.from){if(a)return null;if(R.type==tt.Text){let j=Zd(f,p,R,b,M);return new Ai(j,j==R.from?1:-1)}}if(R.type!=tt.Text)return k<(R.top+R.bottom)/2?new Ai(R.from,1):new Ai(R.to,-1);let Z=f.docView.lineAt(R.from,2);return(!Z||Z.length!=R.length)&&(Z=f.docView.lineAt(R.from,-2)),_c(f,Z,R.from,b,M)}function _c(f,t,a,u,p){let g=-1,b=null,M=1e9,k=1e9,R=p,Z=p,j=(K,oe)=>{for(let de=0;de<K.length;de++){let be=K[de];if(be.top==be.bottom)continue;let Se=be.left>u?be.left-u:be.right<u?u-be.right:0,Ee=be.top>p?be.top-p:be.bottom<p?p-be.bottom:0;be.top<=Z&&be.bottom>=R&&(R=Math.min(be.top,R),Z=Math.max(be.bottom,Z),Ee=0),(g<0||(Ee-k||Se-M)<0)&&(g>=0&&k&&M<Se&&b.top<=Z-2&&b.bottom>=R+2?k=0:(g=oe,M=Se,k=Ee,b=be))}};if(t.isText()){for(let oe=0;oe<t.length;){let de=Oe(t.text,oe);if(j(Hn(t.dom,oe,de).getClientRects(),oe),!M&&!k)break;oe=de}return u>(b.left+b.right)/2==(yc(f,g+a)==Yt.LTR)?new Ai(a+Oe(t.text,g),-1):new Ai(a+g,1)}else{if(!t.length)return new Ai(a,1);for(let be=0;be<t.children.length;be++){let Se=t.children[be];if(Se.flags&48)continue;let Ee=(Se.dom.nodeType==1?Se.dom:Hn(Se.dom,0,Se.length)).getClientRects();if(j(Ee,be),!M&&!k)break}let K=t.children[g],oe=t.posBefore(K,a);return K.isComposite()||K.isText()?_c(f,K,oe,Math.max(b.left,Math.min(b.right,u)),p):u>(b.left+b.right)/2==(yc(f,g+a)==Yt.LTR)?new Ai(oe+K.length,-1):new Ai(oe,1)}}function yc(f,t){let a=f.state.doc.lineAt(t);return f.bidiSpans(a)[An.find(f.bidiSpans(a),t-a.from,-1,1)].dir}const Ps="￿";class Xd{constructor(t,a){this.points=t,this.text="",this.lineSeparator=a.facet(Pe.lineSeparator)}append(t){this.text+=t}lineBreak(){this.text+=Ps}readRange(t,a){if(!t)return this;let u=t.parentNode;for(let p=t;;){this.findPointBefore(u,p);let g=this.text.length;this.readNode(p);let b=_n.get(p),M=p.nextSibling;if(M==a){b?.breakAfter&&!M&&this.lineBreak();break}let k=_n.get(M);(b&&k?b.breakAfter:(b?b.breakAfter:Mr(p))||Mr(M)&&(p.nodeName!="BR"||b?.isWidget())&&this.text.length>g)&&!Vd(M,a)&&this.lineBreak(),p=M}return this.findPointBefore(u,a),this}readTextNode(t){let a=t.nodeValue;for(let u of this.points)u.node==t&&(u.pos=this.text.length+Math.min(u.offset,a.length));for(let u=0,p=this.lineSeparator?null:/\r\n?|\n/g;;){let g=-1,b=1,M;if(this.lineSeparator?(g=a.indexOf(this.lineSeparator,u),b=this.lineSeparator.length):(M=p.exec(a))&&(g=M.index,b=M[0].length),this.append(a.slice(u,g<0?a.length:g)),g<0)break;if(this.lineBreak(),b>1)for(let k of this.points)k.node==t&&k.pos>this.text.length&&(k.pos-=b-1);u=g+b}}readNode(t){let a=_n.get(t),u=a&&a.overrideDOMText;if(u!=null){this.findPointInside(t,u.length);for(let p=u.iter();!p.next().done;)p.lineBreak?this.lineBreak():this.append(p.value)}else t.nodeType==3?this.readTextNode(t):t.nodeName=="BR"?t.nextSibling&&this.lineBreak():t.nodeType==1&&this.readRange(t.firstChild,null)}findPointBefore(t,a){for(let u of this.points)u.node==t&&t.childNodes[u.offset]==a&&(u.pos=this.text.length)}findPointInside(t,a){for(let u of this.points)(t.nodeType==3?u.node==t:t.contains(u.node))&&(u.pos=this.text.length+(Id(t,u.node,u.offset)?a:0))}}function Id(f,t,a){for(;;){if(!t||a<ai(t))return!1;if(t==f)return!0;a=Oi(t)+1,t=t.parentNode}}function Vd(f,t){let a;for(;!(f==t||!f);f=f.nextSibling){let u=_n.get(f);if(!u?.isWidget())return!1;u&&(a||(a=[])).push(u)}if(a)for(let u of a){let p=u.overrideDOMText;if(p?.length)return!1}return!0}class Oc{constructor(t,a){this.node=t,this.offset=a,this.pos=-1}}class Wd{constructor(t,a,u,p){this.typeOver=p,this.bounds=null,this.text="",this.domChanged=a>-1;let{impreciseHead:g,impreciseAnchor:b}=t.docView;if(t.state.readOnly&&a>-1)this.newSel=null;else if(a>-1&&(this.bounds=bc(t.docView.tile,a,u,0))){let M=g||b?[]:Yd(t),k=new Xd(M,t.state);k.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=k.text,this.newSel=jd(M,this.bounds.from)}else{let M=t.observer.selectionRange,k=g&&g.node==M.focusNode&&g.offset==M.focusOffset||!mt(t.contentDOM,M.focusNode)?t.state.selection.main.head:t.docView.posFromDOM(M.focusNode,M.focusOffset),R=b&&b.node==M.anchorNode&&b.offset==M.anchorOffset||!mt(t.contentDOM,M.anchorNode)?t.state.selection.main.anchor:t.docView.posFromDOM(M.anchorNode,M.anchorOffset),Z=t.viewport;if((rt.ios||rt.chrome)&&t.state.selection.main.empty&&k!=R&&(Z.from>0||Z.to<t.state.doc.length)){let j=Math.min(k,R),K=Math.max(k,R),oe=Z.from-j,de=Z.to-K;(oe==0||oe==1||j==0)&&(de==0||de==-1||K==t.state.doc.length)&&(k=0,R=t.state.doc.length)}t.inputState.composing>-1&&t.state.selection.ranges.length>1?this.newSel=t.state.selection.replaceRange(we.range(R,k)):this.newSel=we.single(R,k)}}}function bc(f,t,a,u){if(f.isComposite()){let p=-1,g=-1,b=-1,M=-1;for(let k=0,R=u,Z=u;k<f.children.length;k++){let j=f.children[k],K=R+j.length;if(R<t&&K>a)return bc(j,t,a,R);if(K>=t&&p==-1&&(p=k,g=R),R>a&&j.dom.parentNode==f.dom){b=k,M=Z;break}Z=K,R=K+j.breakAfter}return{from:g,to:M<0?u+f.length:M,startDOM:(p?f.children[p-1].dom.nextSibling:null)||f.dom.firstChild,endDOM:b<f.children.length&&b>=0?f.children[b].dom:null}}else return f.isText()?{from:u,to:u+f.length,startDOM:f.dom,endDOM:f.dom.nextSibling}:null}function Ac(f,t){let a,{newSel:u}=t,p=f.state.selection.main,g=f.inputState.lastKeyTime>Date.now()-100?f.inputState.lastKeyCode:-1;if(t.bounds){let{from:b,to:M}=t.bounds,k=p.from,R=null;(g===8||rt.android&&t.text.length<M-b)&&(k=p.to,R="end");let Z=vc(f.state.doc.sliceString(b,M,Ps),t.text,k-b,R);Z&&(rt.chrome&&g==13&&Z.toB==Z.from+2&&t.text.slice(Z.from,Z.toB)==Ps+Ps&&Z.toB--,a={from:b+Z.from,to:b+Z.toA,insert:V.of(t.text.slice(Z.from,Z.toB).split(Ps))})}else u&&(!f.hasFocus&&f.state.facet(ui)||u.main.eq(p))&&(u=null);if(!a&&!u)return!1;if(!a&&t.typeOver&&!p.empty&&u&&u.main.empty?a={from:p.from,to:p.to,insert:f.state.doc.slice(p.from,p.to)}:(rt.mac||rt.android)&&a&&a.from==a.to&&a.from==p.head-1&&/^\. ?$/.test(a.insert.toString())&&f.contentDOM.getAttribute("autocorrect")=="off"?(u&&a.insert.length==2&&(u=we.single(u.main.anchor-1,u.main.head-1)),a={from:a.from,to:a.to,insert:V.of([a.insert.toString().replace("."," ")])}):a&&a.from>=p.from&&a.to<=p.to&&(a.from!=p.from||a.to!=p.to)&&p.to-p.from-(a.to-a.from)<=4?a={from:p.from,to:p.to,insert:f.state.doc.slice(p.from,a.from).append(a.insert).append(f.state.doc.slice(a.to,p.to))}:f.state.doc.lineAt(p.from).to<p.to&&f.docView.lineHasWidget(p.to)&&f.inputState.insertingTextAt>Date.now()-50?a={from:p.from,to:p.to,insert:f.state.toText(f.inputState.insertingText)}:rt.chrome&&a&&a.from==a.to&&a.from==p.head&&a.insert.toString()==`
 `&&f.lineWrapping&&(u&&(u=we.single(u.main.anchor-1,u.main.head-1)),a={from:p.from,to:p.to,insert:V.of([" "])}),a)return Dl(f,a,u,g);if(u&&!u.main.eq(p)){let b=!1,M="select";return f.inputState.lastSelectionTime>Date.now()-50&&(f.inputState.lastSelectionOrigin=="select"&&(b=!0),M=f.inputState.lastSelectionOrigin,M=="select.pointer"&&(u=gc(f.state.facet(Pn).map(k=>k(f)),u))),f.dispatch({selection:u,scrollIntoView:b,userEvent:M}),!0}else return!1}function Dl(f,t,a,u=-1){if(rt.ios&&f.inputState.flushIOSKey(t))return!0;let p=f.state.selection.main;if(rt.android&&(t.to==p.to&&(t.from==p.from||t.from==p.from-1&&f.state.sliceDoc(t.from,p.from)==" ")&&t.insert.length==1&&t.insert.lines==2&&li(f.contentDOM,"Enter",13)||(t.from==p.from-1&&t.to==p.to&&t.insert.length==0||u==8&&t.insert.length<t.to-t.from&&t.to>p.head)&&li(f.contentDOM,"Backspace",8)||t.from==p.from&&t.to==p.to+1&&t.insert.length==0&&li(f.contentDOM,"Delete",46)))return!0;let g=t.insert.toString();f.inputState.composing>=0&&f.inputState.composing++;let b,M=()=>b||(b=zd(f,t,a));return f.state.facet(ko).some(k=>k(f,t.from,t.to,g,M))||f.dispatch(M()),!0}function zd(f,t,a){let u,p=f.state,g=p.selection.main,b=-1;if(t.from==t.to&&t.from<g.from||t.from>g.to){let k=t.from<g.from?-1:1,R=k<0?g.from:g.to,Z=Ss(p.facet(Pn).map(j=>j(f)),R,k);t.from==Z&&(b=Z)}if(b>-1)u={changes:t,selection:we.cursor(t.from+t.insert.length,-1)};else if(t.from>=g.from&&t.to<=g.to&&t.to-t.from>=(g.to-g.from)/3&&(!a||a.main.empty&&a.main.from==t.from+t.insert.length)&&f.inputState.composing<0){let k=g.from<t.from?p.sliceDoc(g.from,t.from):"",R=g.to>t.to?p.sliceDoc(t.to,g.to):"";u=p.replaceSelection(f.state.toText(k+t.insert.sliceString(0,void 0,f.state.lineBreak)+R))}else{let k=p.changes(t),R=a&&a.main.to<=k.newLength?a.main:void 0;if(p.selection.ranges.length>1&&(f.inputState.composing>=0||f.inputState.compositionPendingChange)&&t.to<=g.to+10&&t.to>=g.to-10){let Z=f.state.sliceDoc(t.from,t.to),j,K=a&&dc(f,a.main.head);if(K){let de=t.insert.length-(t.to-t.from);j={from:K.from,to:K.to-de}}else j=f.state.doc.lineAt(g.head);let oe=g.to-t.to;u=p.changeByRange(de=>{if(de.from==g.from&&de.to==g.to)return{changes:k,range:R||de.map(k)};let be=de.to-oe,Se=be-Z.length;if(f.state.sliceDoc(Se,be)!=Z||be>=j.from&&Se<=j.to)return{range:de};let Ee=p.changes({from:Se,to:be,insert:t.insert}),ze=de.to-g.to;return{changes:Ee,range:R?we.range(Math.max(0,R.anchor+ze),Math.max(0,R.head+ze)):de.map(Ee)}})}else u={changes:k,selection:R&&p.selection.replaceRange(R)}}let M="input.type";return(f.composing||f.inputState.compositionPendingChange&&f.inputState.compositionEndedAt>Date.now()-50)&&(f.inputState.compositionPendingChange=!1,M+=".compose",f.inputState.compositionFirstChange&&(M+=".start",f.inputState.compositionFirstChange=!1)),p.update(u,{userEvent:M,scrollIntoView:!0})}function vc(f,t,a,u){let p=Math.min(f.length,t.length),g=0;for(;g<p&&f.charCodeAt(g)==t.charCodeAt(g);)g++;if(g==p&&f.length==t.length)return null;let b=f.length,M=t.length;for(;b>0&&M>0&&f.charCodeAt(b-1)==t.charCodeAt(M-1);)b--,M--;if(u=="end"){let k=Math.max(0,g-Math.min(b,M));a-=b+k-g}if(b<g&&f.length<t.length){let k=a<=g&&a>=b?g-a:0;g-=k,M=g+(M-b),b=g}else if(M<g){let k=a<=g&&a>=M?g-a:0;g-=k,b=g+(b-M),M=g}return{from:g,toA:b,toB:M}}function Yd(f){let t=[];if(f.root.activeElement!=f.contentDOM)return t;let{anchorNode:a,anchorOffset:u,focusNode:p,focusOffset:g}=f.observer.selectionRange;return a&&(t.push(new Oc(a,u)),(p!=a||g!=u)&&t.push(new Oc(p,g))),t}function jd(f,t){if(f.length==0)return null;let a=f[0].pos,u=f.length==2?f[1].pos:a;return a>-1&&u>-1?we.single(a+t,u+t):null}class Ud{setSelectionOrigin(t){this.lastSelectionOrigin=t,this.lastSelectionTime=Date.now()}constructor(t){this.view=t,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=t.hasFocus,rt.safari&&t.contentDOM.addEventListener("input",()=>null),rt.gecko&&cm(t.contentDOM.ownerDocument)}handleEvent(t){!im(this.view,t)||this.ignoreDuringComposition(t)||t.type=="keydown"&&this.keydown(t)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(t.type,t)):this.runHandlers(t.type,t))}runHandlers(t,a){let u=this.handlers[t];if(u){for(let p of u.observers)p(this.view,a);for(let p of u.handlers){if(a.defaultPrevented)break;if(p(this.view,a)){a.preventDefault();break}}}}ensureHandlers(t){let a=qd(t),u=this.handlers,p=this.view.contentDOM;for(let g in a)if(g!="scroll"){let b=!a[g].handlers.length,M=u[g];M&&b!=!M.handlers.length&&(p.removeEventListener(g,this.handleEvent),M=null),M||p.addEventListener(g,this.handleEvent,{passive:b})}for(let g in u)g!="scroll"&&!a[g]&&p.removeEventListener(g,this.handleEvent);this.handlers=a}keydown(t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),t.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&t.keyCode!=27&&Sc.indexOf(t.keyCode)<0&&(this.tabFocusMode=-1),rt.android&&rt.chrome&&!t.synthetic&&(t.keyCode==13||t.keyCode==8))return this.view.observer.delayAndroidKey(t.key,t.keyCode),!0;let a;return rt.ios&&!t.synthetic&&!t.altKey&&!t.metaKey&&((a=Cc.find(u=>u.keyCode==t.keyCode))&&!t.ctrlKey||Hd.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey)?(this.pendingIOSKey=a||t,setTimeout(()=>this.flushIOSKey(),250),!0):(t.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(t){let a=this.pendingIOSKey;return!a||a.key=="Enter"&&t&&t.from<t.to&&/^\S+$/.test(t.insert.toString())?!1:(this.pendingIOSKey=void 0,li(this.view.contentDOM,a.key,a.keyCode,a instanceof KeyboardEvent?a:void 0))}ignoreDuringComposition(t){return!/^key/.test(t.type)||t.synthetic?!1:this.composing>0?!0:rt.safari&&!rt.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(t){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=t}update(t){this.view.observer.update(t),this.mouseSelection&&this.mouseSelection.update(t),this.draggedContent&&t.docChanged&&(this.draggedContent=this.draggedContent.map(t.changes)),t.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function xc(f,t){return(a,u)=>{try{return t.call(f,u,a)}catch(p){gn(a.state,p)}}}function qd(f){let t=Object.create(null);function a(u){return t[u]||(t[u]={observers:[],handlers:[]})}for(let u of f){let p=u.spec,g=p&&p.plugin.domEventHandlers,b=p&&p.plugin.domEventObservers;if(g)for(let M in g){let k=g[M];k&&a(M).handlers.push(xc(u.value,k))}if(b)for(let M in b){let k=b[M];k&&a(M).observers.push(xc(u.value,k))}}for(let u in ci)a(u).handlers.push(ci[u]);for(let u in ei)a(u).observers.push(ei[u]);return t}const Cc=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Hd="dthko",Sc=[16,17,18,20,91,92,224,225],No=6;function Bo(f){return Math.max(0,f)*.7+8}function Kd(f,t){return Math.max(Math.abs(f.clientX-t.clientX),Math.abs(f.clientY-t.clientY))}class Jd{constructor(t,a,u,p){this.view=t,this.startEvent=a,this.style=u,this.mustSelect=p,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=a,this.scrollParents=Qi(t.contentDOM),this.atoms=t.state.facet(Pn).map(b=>b(t));let g=t.contentDOM.ownerDocument;g.addEventListener("mousemove",this.move=this.move.bind(this)),g.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=a.shiftKey,this.multiple=t.state.facet(Pe.allowMultipleSelections)&&em(t,a),this.dragging=nm(t,a)&&Ec(a)==1?null:!1}start(t){this.dragging===!1&&this.select(t)}move(t){if(t.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&Kd(this.startEvent,t)<10)return;this.select(this.lastEvent=t);let a=0,u=0,p=0,g=0,b=this.view.win.innerWidth,M=this.view.win.innerHeight;this.scrollParents.x&&({left:p,right:b}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:g,bottom:M}=this.scrollParents.y.getBoundingClientRect());let k=xl(this.view);t.clientX-k.left<=p+No?a=-Bo(p-t.clientX):t.clientX+k.right>=b-No&&(a=Bo(t.clientX-b)),t.clientY-k.top<=g+No?u=-Bo(g-t.clientY):t.clientY+k.bottom>=M-No&&(u=Bo(t.clientY-M)),this.setScrollSpeed(a,u)}up(t){this.dragging==null&&this.select(this.lastEvent),this.dragging||t.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let t=this.view.contentDOM.ownerDocument;t.removeEventListener("mousemove",this.move),t.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(t,a){this.scrollSpeed={x:t,y:a},t||a?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:t,y:a}=this.scrollSpeed;t&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=t,t=0),a&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=a,a=0),(t||a)&&this.view.win.scrollBy(t,a),this.dragging===!1&&this.select(this.lastEvent)}select(t){let{view:a}=this,u=gc(this.atoms,this.style.get(t,this.extend,this.multiple));(this.mustSelect||!u.eq(a.state.selection,this.dragging===!1))&&this.view.dispatch({selection:u,userEvent:"select.pointer"}),this.mustSelect=!1}update(t){t.transactions.some(a=>a.isUserEvent("input.type"))?this.destroy():this.style.update(t)&&setTimeout(()=>this.select(this.lastEvent),20)}}function em(f,t){let a=f.state.facet(Po);return a.length?a[0](t):rt.mac?t.metaKey:t.ctrlKey}function tm(f,t){let a=f.state.facet(Mo);return a.length?a[0](t):rt.mac?!t.altKey:!t.ctrlKey}function nm(f,t){let{main:a}=f.state.selection;if(a.empty)return!1;let u=Ei(f.root);if(!u||u.rangeCount==0)return!0;let p=u.getRangeAt(0).getClientRects();for(let g=0;g<p.length;g++){let b=p[g];if(b.left<=t.clientX&&b.right>=t.clientX&&b.top<=t.clientY&&b.bottom>=t.clientY)return!0}return!1}function im(f,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let a=t.target,u;a!=f.contentDOM;a=a.parentNode)if(!a||a.nodeType==11||(u=_n.get(a))&&u.isWidget()&&!u.isHidden&&u.widget.ignoreEvent(t))return!1;return!0}const ci=Object.create(null),ei=Object.create(null),Pc=rt.ie&&rt.ie_version<15||rt.ios&&rt.webkit_version<604;function rm(f){let t=f.dom.parentNode;if(!t)return;let a=t.appendChild(document.createElement("textarea"));a.style.cssText="position: fixed; left: -10000px; top: 10px",a.focus(),setTimeout(()=>{f.focus(),a.remove(),Mc(f,a.value)},50)}function Qo(f,t,a){for(let u of f.facet(t))a=u(a,f);return a}function Mc(f,t){t=Qo(f.state,vs,t);let{state:a}=f,u,p=1,g=a.toText(t),b=g.lines==a.selection.ranges.length;if(El!=null&&a.selection.ranges.every(k=>k.empty)&&El==g.toString()){let k=-1;u=a.changeByRange(R=>{let Z=a.doc.lineAt(R.from);if(Z.from==k)return{range:R};k=Z.from;let j=a.toText((b?g.line(p++).text:t)+a.lineBreak);return{changes:{from:Z.from,insert:j},range:we.cursor(R.from+j.length)}})}else b?u=a.changeByRange(k=>{let R=g.line(p++);return{changes:{from:k.from,to:k.to,insert:R.text},range:we.cursor(k.from+R.length)}}):u=a.replaceSelection(g);f.dispatch(u,{userEvent:"input.paste",scrollIntoView:!0})}ei.scroll=f=>{f.inputState.lastScrollTop=f.scrollDOM.scrollTop,f.inputState.lastScrollLeft=f.scrollDOM.scrollLeft},ci.keydown=(f,t)=>(f.inputState.setSelectionOrigin("select"),t.keyCode==27&&f.inputState.tabFocusMode!=0&&(f.inputState.tabFocusMode=Date.now()+2e3),!1),ei.touchstart=(f,t)=>{f.inputState.lastTouchTime=Date.now(),f.inputState.setSelectionOrigin("select.pointer")},ei.touchmove=f=>{f.inputState.setSelectionOrigin("select.pointer")},ci.mousedown=(f,t)=>{if(f.observer.flush(),f.inputState.lastTouchTime>Date.now()-2e3)return!1;let a=null;for(let u of f.state.facet(wo))if(a=u(f,t),a)break;if(!a&&t.button==0&&(a=om(f,t)),a){let u=!f.hasFocus;f.inputState.startMouseSelection(new Jd(f,t,a,u)),u&&f.observer.ignore(()=>{ps(f.contentDOM);let g=f.root.activeElement;g&&!g.contains(f.contentDOM)&&g.blur()});let p=f.inputState.mouseSelection;if(p)return p.start(t),p.dragging===!1}else f.inputState.setSelectionOrigin("select.pointer");return!1};function wc(f,t,a,u){if(u==1)return we.cursor(t,a);if(u==2)return Ld(f.state,t,a);{let p=f.docView.lineAt(t,a),g=f.state.doc.lineAt(p?p.posAtEnd:t),b=p?p.posAtStart:g.from,M=p?p.posAtEnd:g.to;return M<f.state.doc.length&&M==g.to&&M++,we.range(b,M)}}const sm=rt.ie&&rt.ie_version<=11;let kc=null,$c=0,Dc=0;function Ec(f){if(!sm)return f.detail;let t=kc,a=Dc;return kc=f,Dc=Date.now(),$c=!t||a>Date.now()-400&&Math.abs(t.clientX-f.clientX)<2&&Math.abs(t.clientY-f.clientY)<2?($c+1)%3:1}function om(f,t){let a=f.posAndSideAtCoords({x:t.clientX,y:t.clientY},!1),u=Ec(t),p=f.state.selection;return{update(g){g.docChanged&&(a.pos=g.changes.mapPos(a.pos),p=p.map(g.changes))},get(g,b,M){let k=f.posAndSideAtCoords({x:g.clientX,y:g.clientY},!1),R,Z=wc(f,k.pos,k.assoc,u);if(a.pos!=k.pos&&!b){let j=wc(f,a.pos,a.assoc,u),K=Math.min(j.from,Z.from),oe=Math.max(j.to,Z.to);Z=K<Z.from?we.range(K,oe):we.range(oe,K)}return b?p.replaceRange(p.main.extend(Z.from,Z.to)):M&&u==1&&p.ranges.length>1&&(R=am(p,k.pos))?R:M?p.addRange(Z):we.create([Z])}}}function am(f,t){for(let a=0;a<f.ranges.length;a++){let{from:u,to:p}=f.ranges[a];if(u<=t&&p>=t)return we.create(f.ranges.slice(0,a).concat(f.ranges.slice(a+1)),f.mainIndex==a?0:f.mainIndex-(f.mainIndex>a?1:0))}return null}ci.dragstart=(f,t)=>{let{selection:{main:a}}=f.state;if(t.target.draggable){let p=f.docView.tile.nearest(t.target);if(p&&p.isWidget()){let g=p.posAtStart,b=g+p.length;(g>=a.to||b<=a.from)&&(a=we.range(g,b))}}let{inputState:u}=f;return u.mouseSelection&&(u.mouseSelection.dragging=!0),u.draggedContent=a,t.dataTransfer&&(t.dataTransfer.setData("Text",Qo(f.state,xs,f.state.sliceDoc(a.from,a.to))),t.dataTransfer.effectAllowed="copyMove"),!1},ci.dragend=f=>(f.inputState.draggedContent=null,!1);function Fc(f,t,a,u){if(a=Qo(f.state,vs,a),!a)return;let p=f.posAtCoords({x:t.clientX,y:t.clientY},!1),{draggedContent:g}=f.inputState,b=u&&g&&tm(f,t)?{from:g.from,to:g.to}:null,M={from:p,insert:a},k=f.state.changes(b?[b,M]:M);f.focus(),f.dispatch({changes:k,selection:{anchor:k.mapPos(p,-1),head:k.mapPos(p,1)},userEvent:b?"move.drop":"input.drop"}),f.inputState.draggedContent=null}ci.drop=(f,t)=>{if(!t.dataTransfer)return!1;if(f.state.readOnly)return!0;let a=t.dataTransfer.files;if(a&&a.length){let u=Array(a.length),p=0,g=()=>{++p==a.length&&Fc(f,t,u.filter(b=>b!=null).join(f.state.lineBreak),!1)};for(let b=0;b<a.length;b++){let M=new FileReader;M.onerror=g,M.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(M.result)||(u[b]=M.result),g()},M.readAsText(a[b])}return!0}else{let u=t.dataTransfer.getData("Text");if(u)return Fc(f,t,u,!0),!0}return!1},ci.paste=(f,t)=>{if(f.state.readOnly)return!0;f.observer.flush();let a=Pc?null:t.clipboardData;return a?(Mc(f,a.getData("text/plain")||a.getData("text/uri-list")),!0):(rm(f),!1)};function lm(f,t){let a=f.dom.parentNode;if(!a)return;let u=a.appendChild(document.createElement("textarea"));u.style.cssText="position: fixed; left: -10000px; top: 10px",u.value=t,u.focus(),u.selectionEnd=t.length,u.selectionStart=0,setTimeout(()=>{u.remove(),f.focus()},50)}function um(f){let t=[],a=[],u=!1;for(let p of f.selection.ranges)p.empty||(t.push(f.sliceDoc(p.from,p.to)),a.push(p));if(!t.length){let p=-1;for(let{from:g}of f.selection.ranges){let b=f.doc.lineAt(g);b.number>p&&(t.push(b.text),a.push({from:b.from,to:Math.min(f.doc.length,b.to+1)})),p=b.number}u=!0}return{text:Qo(f,xs,t.join(f.lineBreak)),ranges:a,linewise:u}}let El=null;ci.copy=ci.cut=(f,t)=>{let{text:a,ranges:u,linewise:p}=um(f.state);if(!a&&!p)return!1;El=p?a:null,t.type=="cut"&&!f.state.readOnly&&f.dispatch({changes:u,scrollIntoView:!0,userEvent:"delete.cut"});let g=Pc?null:t.clipboardData;return g?(g.clearData(),g.setData("text/plain",a),!0):(lm(f,a),!1)};const Tc=Pt.define();function Rc(f,t){let a=[];for(let u of f.facet(Ti)){let p=u(f,t);p&&a.push(p)}return a.length?f.update({effects:a,annotations:Tc.of(!0)}):null}function Gc(f){setTimeout(()=>{let t=f.hasFocus;if(t!=f.inputState.notifiedFocused){let a=Rc(f.state,t);a?f.dispatch(a):f.update([])}},10)}ei.focus=f=>{f.inputState.lastFocusTime=Date.now(),!f.scrollDOM.scrollTop&&(f.inputState.lastScrollTop||f.inputState.lastScrollLeft)&&(f.scrollDOM.scrollTop=f.inputState.lastScrollTop,f.scrollDOM.scrollLeft=f.inputState.lastScrollLeft),Gc(f)},ei.blur=f=>{f.observer.clearSelectionRange(),Gc(f)},ei.compositionstart=ei.compositionupdate=f=>{f.observer.editContext||(f.inputState.compositionFirstChange==null&&(f.inputState.compositionFirstChange=!0),f.inputState.composing<0&&(f.inputState.composing=0))},ei.compositionend=f=>{f.observer.editContext||(f.inputState.composing=-1,f.inputState.compositionEndedAt=Date.now(),f.inputState.compositionPendingKey=!0,f.inputState.compositionPendingChange=f.observer.pendingRecords().length>0,f.inputState.compositionFirstChange=null,rt.chrome&&rt.android?f.observer.flushSoon():f.inputState.compositionPendingChange?Promise.resolve().then(()=>f.observer.flush()):setTimeout(()=>{f.inputState.composing<0&&f.docView.hasComposition&&f.update([])},50))},ei.contextmenu=f=>{f.inputState.lastContextMenu=Date.now()},ci.beforeinput=(f,t)=>{var a,u;if((t.inputType=="insertText"||t.inputType=="insertCompositionText")&&(f.inputState.insertingText=t.data,f.inputState.insertingTextAt=Date.now()),t.inputType=="insertReplacementText"&&f.observer.editContext){let g=(a=t.dataTransfer)===null||a===void 0?void 0:a.getData("text/plain"),b=t.getTargetRanges();if(g&&b.length){let M=b[0],k=f.posAtDOM(M.startContainer,M.startOffset),R=f.posAtDOM(M.endContainer,M.endOffset);return Dl(f,{from:k,to:R,insert:f.state.toText(g)},null),!0}}let p;if(rt.chrome&&rt.android&&(p=Cc.find(g=>g.inputType==t.inputType))&&(f.observer.delayAndroidKey(p.key,p.keyCode),p.key=="Backspace"||p.key=="Delete")){let g=((u=window.visualViewport)===null||u===void 0?void 0:u.height)||0;setTimeout(()=>{var b;(((b=window.visualViewport)===null||b===void 0?void 0:b.height)||0)>g+10&&f.hasFocus&&(f.contentDOM.blur(),f.focus())},100)}return rt.ios&&t.inputType=="deleteContentForward"&&f.observer.flushSoon(),rt.safari&&t.inputType=="insertText"&&f.inputState.composing>=0&&setTimeout(()=>ei.compositionend(f,t),20),!1};const Lc=new Set;function cm(f){Lc.has(f)||(Lc.add(f),f.addEventListener("copy",()=>{}),f.addEventListener("cut",()=>{}))}const Zc=["pre-wrap","normal","pre-line","break-spaces"];let Rr=!1;function Nc(){Rr=!1}class hm{constructor(t){this.lineWrapping=t,this.doc=V.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(t,a){let u=this.doc.lineAt(a).number-this.doc.lineAt(t).number+1;return this.lineWrapping&&(u+=Math.max(0,Math.ceil((a-t-u*this.lineLength*.5)/this.lineLength))),this.lineHeight*u}heightForLine(t){return this.lineWrapping?(1+Math.max(0,Math.ceil((t-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(t){return this.doc=t,this}mustRefreshForWrapping(t){return Zc.indexOf(t)>-1!=this.lineWrapping}mustRefreshForHeights(t){let a=!1;for(let u=0;u<t.length;u++){let p=t[u];p<0?u++:this.heightSamples[Math.floor(p*10)]||(a=!0,this.heightSamples[Math.floor(p*10)]=!0)}return a}refresh(t,a,u,p,g,b){let M=Zc.indexOf(t)>-1,k=Math.round(a)!=Math.round(this.lineHeight)||this.lineWrapping!=M;if(this.lineWrapping=M,this.lineHeight=a,this.charWidth=u,this.textHeight=p,this.lineLength=g,k){this.heightSamples={};for(let R=0;R<b.length;R++){let Z=b[R];Z<0?R++:this.heightSamples[Math.floor(Z*10)]=!0}}return k}}class dm{constructor(t,a){this.from=t,this.heights=a,this.index=0}get more(){return this.index<this.heights.length}}class hi{constructor(t,a,u,p,g){this.from=t,this.length=a,this.top=u,this.height=p,this._content=g}get type(){return typeof this._content=="number"?tt.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof $t?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(t){let a=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(t._content)?t._content:[t]);return new hi(this.from,this.length+t.length,this.top,this.height+t.height,a)}}var tn=(function(f){return f[f.ByPos=0]="ByPos",f[f.ByHeight=1]="ByHeight",f[f.ByPosNoHeight=2]="ByPosNoHeight",f})(tn||(tn={}));const Xo=.001;class Fn{constructor(t,a,u=2){this.length=t,this.height=a,this.flags=u}get outdated(){return(this.flags&2)>0}set outdated(t){this.flags=(t?2:0)|this.flags&-3}setHeight(t){this.height!=t&&(Math.abs(this.height-t)>Xo&&(Rr=!0),this.height=t)}replace(t,a,u){return Fn.of(u)}decomposeLeft(t,a){a.push(this)}decomposeRight(t,a){a.push(this)}applyChanges(t,a,u,p){let g=this,b=u.doc;for(let M=p.length-1;M>=0;M--){let{fromA:k,toA:R,fromB:Z,toB:j}=p[M],K=g.lineAt(k,tn.ByPosNoHeight,u.setDoc(a),0,0),oe=K.to>=R?K:g.lineAt(R,tn.ByPosNoHeight,u,0,0);for(j+=oe.to-R,R=oe.to;M>0&&K.from<=p[M-1].toA;)k=p[M-1].fromA,Z=p[M-1].fromB,M--,k<K.from&&(K=g.lineAt(k,tn.ByPosNoHeight,u,0,0));Z+=K.from-k,k=K.from;let de=Fl.build(u.setDoc(b),t,Z,j);g=Io(g,g.replace(k,R,de))}return g.updateHeight(u,0)}static empty(){return new Wn(0,0,0)}static of(t){if(t.length==1)return t[0];let a=0,u=t.length,p=0,g=0;for(;;)if(a==u)if(p>g*2){let M=t[a-1];M.break?t.splice(--a,1,M.left,null,M.right):t.splice(--a,1,M.left,M.right),u+=1+M.break,p-=M.size}else if(g>p*2){let M=t[u];M.break?t.splice(u,1,M.left,null,M.right):t.splice(u,1,M.left,M.right),u+=2+M.break,g-=M.size}else break;else if(p<g){let M=t[a++];M&&(p+=M.size)}else{let M=t[--u];M&&(g+=M.size)}let b=0;return t[a-1]==null?(b=1,a--):t[a]==null&&(b=1,u++),new _m(Fn.of(t.slice(0,a)),b,Fn.of(t.slice(u)))}}function Io(f,t){return f==t?f:(f.constructor!=t.constructor&&(Rr=!0),t)}Fn.prototype.size=1;const mm=_t.replace({});class Bc extends Fn{constructor(t,a,u){super(t,a),this.deco=u,this.spaceAbove=0}mainBlock(t,a){return new hi(a,this.length,t+this.spaceAbove,this.height-this.spaceAbove,this.deco||0)}blockAt(t,a,u,p){return this.spaceAbove&&t<u+this.spaceAbove?new hi(p,0,u,this.spaceAbove,mm):this.mainBlock(u,p)}lineAt(t,a,u,p,g){let b=this.mainBlock(p,g);return this.spaceAbove?this.blockAt(0,u,p,g).join(b):b}forEachLine(t,a,u,p,g,b){t<=g+this.length&&a>=g&&b(this.lineAt(0,tn.ByPos,u,p,g))}setMeasuredHeight(t){let a=t.heights[t.index++];a<0?(this.spaceAbove=-a,a=t.heights[t.index++]):this.spaceAbove=0,this.setHeight(a)}updateHeight(t,a=0,u=!1,p){return p&&p.from<=a&&p.more&&this.setMeasuredHeight(p),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Wn extends Bc{constructor(t,a,u){super(t,a,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0,this.spaceAbove=u}mainBlock(t,a){return new hi(a,this.length,t+this.spaceAbove,this.height-this.spaceAbove,this.breaks)}replace(t,a,u){let p=u[0];return u.length==1&&(p instanceof Wn||p instanceof Mn&&p.flags&4)&&Math.abs(this.length-p.length)<10?(p instanceof Mn?p=new Wn(p.length,this.height,this.spaceAbove):p.height=this.height,this.outdated||(p.outdated=!1),p):Fn.of(u)}updateHeight(t,a=0,u=!1,p){return p&&p.from<=a&&p.more?this.setMeasuredHeight(p):(u||this.outdated)&&(this.spaceAbove=0,this.setHeight(Math.max(this.widgetHeight,t.heightForLine(this.length-this.collapsed))+this.breaks*t.lineHeight)),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Mn extends Fn{constructor(t){super(t,0)}heightMetrics(t,a){let u=t.doc.lineAt(a).number,p=t.doc.lineAt(a+this.length).number,g=p-u+1,b,M=0;if(t.lineWrapping){let k=Math.min(this.height,t.lineHeight*g);b=k/g,this.length>g+1&&(M=(this.height-k)/(this.length-g-1))}else b=this.height/g;return{firstLine:u,lastLine:p,perLine:b,perChar:M}}blockAt(t,a,u,p){let{firstLine:g,lastLine:b,perLine:M,perChar:k}=this.heightMetrics(a,p);if(a.lineWrapping){let R=p+(t<a.lineHeight?0:Math.round(Math.max(0,Math.min(1,(t-u)/this.height))*this.length)),Z=a.doc.lineAt(R),j=M+Z.length*k,K=Math.max(u,t-j/2);return new hi(Z.from,Z.length,K,j,0)}else{let R=Math.max(0,Math.min(b-g,Math.floor((t-u)/M))),{from:Z,length:j}=a.doc.line(g+R);return new hi(Z,j,u+M*R,M,0)}}lineAt(t,a,u,p,g){if(a==tn.ByHeight)return this.blockAt(t,u,p,g);if(a==tn.ByPosNoHeight){let{from:oe,to:de}=u.doc.lineAt(t);return new hi(oe,de-oe,0,0,0)}let{firstLine:b,perLine:M,perChar:k}=this.heightMetrics(u,g),R=u.doc.lineAt(t),Z=M+R.length*k,j=R.number-b,K=p+M*j+k*(R.from-g-j);return new hi(R.from,R.length,Math.max(p,Math.min(K,p+this.height-Z)),Z,0)}forEachLine(t,a,u,p,g,b){t=Math.max(t,g),a=Math.min(a,g+this.length);let{firstLine:M,perLine:k,perChar:R}=this.heightMetrics(u,g);for(let Z=t,j=p;Z<=a;){let K=u.doc.lineAt(Z);if(Z==t){let de=K.number-M;j+=k*de+R*(t-g-de)}let oe=k+R*K.length;b(new hi(K.from,K.length,j,oe,0)),j+=oe,Z=K.to+1}}replace(t,a,u){let p=this.length-a;if(p>0){let g=u[u.length-1];g instanceof Mn?u[u.length-1]=new Mn(g.length+p):u.push(null,new Mn(p-1))}if(t>0){let g=u[0];g instanceof Mn?u[0]=new Mn(t+g.length):u.unshift(new Mn(t-1),null)}return Fn.of(u)}decomposeLeft(t,a){a.push(new Mn(t-1),null)}decomposeRight(t,a){a.push(null,new Mn(this.length-t-1))}updateHeight(t,a=0,u=!1,p){let g=a+this.length;if(p&&p.from<=a+this.length&&p.more){let b=[],M=Math.max(a,p.from),k=-1;for(p.from>a&&b.push(new Mn(p.from-a-1).updateHeight(t,a));M<=g&&p.more;){let Z=t.doc.lineAt(M).length;b.length&&b.push(null);let j=p.heights[p.index++],K=0;j<0&&(K=-j,j=p.heights[p.index++]),k==-1?k=j:Math.abs(j-k)>=Xo&&(k=-2);let oe=new Wn(Z,j,K);oe.outdated=!1,b.push(oe),M+=Z+1}M<=g&&b.push(null,new Mn(g-M).updateHeight(t,M));let R=Fn.of(b);return(k<0||Math.abs(R.height-this.height)>=Xo||Math.abs(k-this.heightMetrics(t,a).perLine)>=Xo)&&(Rr=!0),Io(this,R)}else(u||this.outdated)&&(this.setHeight(t.heightForGap(a,a+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class _m extends Fn{constructor(t,a,u){super(t.length+a+u.length,t.height+u.height,a|(t.outdated||u.outdated?2:0)),this.left=t,this.right=u,this.size=t.size+u.size}get break(){return this.flags&1}blockAt(t,a,u,p){let g=u+this.left.height;return t<g?this.left.blockAt(t,a,u,p):this.right.blockAt(t,a,g,p+this.left.length+this.break)}lineAt(t,a,u,p,g){let b=p+this.left.height,M=g+this.left.length+this.break,k=a==tn.ByHeight?t<b:t<M,R=k?this.left.lineAt(t,a,u,p,g):this.right.lineAt(t,a,u,b,M);if(this.break||(k?R.to<M:R.from>M))return R;let Z=a==tn.ByPosNoHeight?tn.ByPosNoHeight:tn.ByPos;return k?R.join(this.right.lineAt(M,Z,u,b,M)):this.left.lineAt(M,Z,u,p,g).join(R)}forEachLine(t,a,u,p,g,b){let M=p+this.left.height,k=g+this.left.length+this.break;if(this.break)t<k&&this.left.forEachLine(t,a,u,p,g,b),a>=k&&this.right.forEachLine(t,a,u,M,k,b);else{let R=this.lineAt(k,tn.ByPos,u,p,g);t<R.from&&this.left.forEachLine(t,R.from-1,u,p,g,b),R.to>=t&&R.from<=a&&b(R),a>R.to&&this.right.forEachLine(R.to+1,a,u,M,k,b)}}replace(t,a,u){let p=this.left.length+this.break;if(a<p)return this.balanced(this.left.replace(t,a,u),this.right);if(t>this.left.length)return this.balanced(this.left,this.right.replace(t-p,a-p,u));let g=[];t>0&&this.decomposeLeft(t,g);let b=g.length;for(let M of u)g.push(M);if(t>0&&Qc(g,b-1),a<this.length){let M=g.length;this.decomposeRight(a,g),Qc(g,M)}return Fn.of(g)}decomposeLeft(t,a){let u=this.left.length;if(t<=u)return this.left.decomposeLeft(t,a);a.push(this.left),this.break&&(u++,t>=u&&a.push(null)),t>u&&this.right.decomposeLeft(t-u,a)}decomposeRight(t,a){let u=this.left.length,p=u+this.break;if(t>=p)return this.right.decomposeRight(t-p,a);t<u&&this.left.decomposeRight(t,a),this.break&&t<p&&a.push(null),a.push(this.right)}balanced(t,a){return t.size>2*a.size||a.size>2*t.size?Fn.of(this.break?[t,null,a]:[t,a]):(this.left=Io(this.left,t),this.right=Io(this.right,a),this.setHeight(t.height+a.height),this.outdated=t.outdated||a.outdated,this.size=t.size+a.size,this.length=t.length+this.break+a.length,this)}updateHeight(t,a=0,u=!1,p){let{left:g,right:b}=this,M=a+g.length+this.break,k=null;return p&&p.from<=a+g.length&&p.more?k=g=g.updateHeight(t,a,u,p):g.updateHeight(t,a,u),p&&p.from<=M+b.length&&p.more?k=b=b.updateHeight(t,M,u,p):b.updateHeight(t,M,u),k?this.balanced(g,b):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Qc(f,t){let a,u;f[t]==null&&(a=f[t-1])instanceof Mn&&(u=f[t+1])instanceof Mn&&f.splice(t-1,3,new Mn(a.length+1+u.length))}const ym=5;class Fl{constructor(t,a){this.pos=t,this.oracle=a,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=t}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(t,a){if(this.lineStart>-1){let u=Math.min(a,this.lineEnd),p=this.nodes[this.nodes.length-1];p instanceof Wn?p.length+=u-this.pos:(u>this.pos||!this.isCovered)&&this.nodes.push(new Wn(u-this.pos,-1,0)),this.writtenTo=u,a>u&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=a}point(t,a,u){if(t<a||u.heightRelevant){let p=u.widget?u.widget.estimatedHeight:0,g=u.widget?u.widget.lineBreaks:0;p<0&&(p=this.oracle.lineHeight);let b=a-t;u.block?this.addBlock(new Bc(b,p,u)):(b||g||p>=ym)&&this.addLineDeco(p,g,b)}else a>t&&this.span(t,a);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:t,to:a}=this.oracle.doc.lineAt(this.pos);this.lineStart=t,this.lineEnd=a,this.writtenTo<t&&((this.writtenTo<t-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,t-1)),this.nodes.push(null)),this.pos>t&&this.nodes.push(new Wn(this.pos-t,-1,0)),this.writtenTo=this.pos}blankContent(t,a){let u=new Mn(a-t);return this.oracle.doc.lineAt(t).to==a&&(u.flags|=4),u}ensureLine(){this.enterLine();let t=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(t instanceof Wn)return t;let a=new Wn(0,-1,0);return this.nodes.push(a),a}addBlock(t){this.enterLine();let a=t.deco;a&&a.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(t),this.writtenTo=this.pos=this.pos+t.length,a&&a.endSide>0&&(this.covering=t)}addLineDeco(t,a,u){let p=this.ensureLine();p.length+=u,p.collapsed+=u,p.widgetHeight=Math.max(p.widgetHeight,t),p.breaks+=a,this.writtenTo=this.pos=this.pos+u}finish(t){let a=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(a instanceof Wn)&&!this.isCovered?this.nodes.push(new Wn(0,-1,0)):(this.writtenTo<this.pos||a==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let u=t;for(let p of this.nodes)p instanceof Wn&&p.updateHeight(this.oracle,u),u+=p?p.length:1;return this.nodes}static build(t,a,u,p){let g=new Fl(u,t);return vt.spans(a,u,p,g,0),g.finish(u)}}function Om(f,t,a){let u=new bm;return vt.compare(f,t,a,u,0),u.changes}class bm{constructor(){this.changes=[]}compareRange(){}comparePoint(t,a,u,p){(t<a||u&&u.heightRelevant||p&&p.heightRelevant)&&yi(t,a,this.changes,5)}}function Am(f,t){let a=f.getBoundingClientRect(),u=f.ownerDocument,p=u.defaultView||window,g=Math.max(0,a.left),b=Math.min(p.innerWidth,a.right),M=Math.max(0,a.top),k=Math.min(p.innerHeight,a.bottom);for(let R=f.parentNode;R&&R!=u.body;)if(R.nodeType==1){let Z=R,j=window.getComputedStyle(Z);if((Z.scrollHeight>Z.clientHeight||Z.scrollWidth>Z.clientWidth)&&j.overflow!="visible"){let K=Z.getBoundingClientRect();g=Math.max(g,K.left),b=Math.min(b,K.right),M=Math.max(M,K.top),k=Math.min(R==f.parentNode?p.innerHeight:k,K.bottom)}R=j.position=="absolute"||j.position=="fixed"?Z.offsetParent:Z.parentNode}else if(R.nodeType==11)R=R.host;else break;return{left:g-a.left,right:Math.max(g,b)-a.left,top:M-(a.top+t),bottom:Math.max(M,k)-(a.top+t)}}function vm(f){let t=f.getBoundingClientRect(),a=f.ownerDocument.defaultView||window;return t.left<a.innerWidth&&t.right>0&&t.top<a.innerHeight&&t.bottom>0}function xm(f,t){let a=f.getBoundingClientRect();return{left:0,right:a.right-a.left,top:t,bottom:a.bottom-(a.top+t)}}class Tl{constructor(t,a,u,p){this.from=t,this.to=a,this.size=u,this.displaySize=p}static same(t,a){if(t.length!=a.length)return!1;for(let u=0;u<t.length;u++){let p=t[u],g=a[u];if(p.from!=g.from||p.to!=g.to||p.size!=g.size)return!1}return!0}draw(t,a){return _t.replace({widget:new Cm(this.displaySize*(a?t.scaleY:t.scaleX),a)}).range(this.from,this.to)}}class Cm extends Vn{constructor(t,a){super(),this.size=t,this.vertical=a}eq(t){return t.size==this.size&&t.vertical==this.vertical}toDOM(){let t=document.createElement("div");return this.vertical?t.style.height=this.size+"px":(t.style.width=this.size+"px",t.style.height="2px",t.style.display="inline-block"),t}get estimatedHeight(){return this.vertical?this.size:-1}}class Xc{constructor(t){this.state=t,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Ic,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Yt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let a=t.facet(ge).some(u=>typeof u!="function"&&u.class=="cm-lineWrapping");this.heightOracle=new hm(a),this.stateDeco=t.facet(De).filter(u=>typeof u!="function"),this.heightMap=Fn.empty().applyChanges(this.stateDeco,V.empty,this.heightOracle.setDoc(t.doc),[new Jn(0,0,0,t.doc.length)]);for(let u=0;u<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());u++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=_t.set(this.lineGaps.map(u=>u.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let t=[this.viewport],{main:a}=this.state.selection;for(let u=0;u<=1;u++){let p=u?a.head:a.anchor;if(!t.some(({from:g,to:b})=>p>=g&&p<=b)){let{from:g,to:b}=this.lineBlockAt(p);t.push(new Vo(g,b))}}return this.viewports=t.sort((u,p)=>u.from-p.from),this.updateScaler()}updateScaler(){let t=this.scaler;return this.scaler=this.heightMap.height<=7e6?Ic:new Rl(this.heightOracle,this.heightMap,this.viewports),t.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,t=>{this.viewportLines.push(Ms(t,this.scaler))})}update(t,a=null){this.state=t.state;let u=this.stateDeco;this.stateDeco=this.state.facet(De).filter(Z=>typeof Z!="function");let p=t.changedRanges,g=Jn.extendWithRanges(p,Om(u,this.stateDeco,t?t.changes:je.empty(this.state.doc.length))),b=this.heightMap.height,M=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);Nc(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,t.startState.doc,this.heightOracle.setDoc(this.state.doc),g),(this.heightMap.height!=b||Rr)&&(t.flags|=2),M?(this.scrollAnchorPos=t.changes.mapPos(M.from,-1),this.scrollAnchorHeight=M.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=b);let k=g.length?this.mapViewport(this.viewport,t.changes):this.viewport;(a&&(a.range.head<k.from||a.range.head>k.to)||!this.viewportIsAppropriate(k))&&(k=this.getViewport(0,a));let R=k.from!=this.viewport.from||k.to!=this.viewport.to;this.viewport=k,t.flags|=this.updateForViewport(),(R||!t.changes.empty||t.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,t.changes))),t.flags|=this.computeVisibleRanges(t.changes),a&&(this.scrollTarget=a),!this.mustEnforceCursorAssoc&&t.selectionSet&&t.view.lineWrapping&&t.state.selection.main.empty&&t.state.selection.main.assoc&&!t.state.facet(Do)&&(this.mustEnforceCursorAssoc=!0)}measure(t){let a=t.contentDOM,u=window.getComputedStyle(a),p=this.heightOracle,g=u.whiteSpace;this.defaultTextDirection=u.direction=="rtl"?Yt.RTL:Yt.LTR;let b=this.heightOracle.mustRefreshForWrapping(g),M=a.getBoundingClientRect(),k=b||this.mustMeasureContent||this.contentDOMHeight!=M.height;this.contentDOMHeight=M.height,this.mustMeasureContent=!1;let R=0,Z=0;if(M.width&&M.height){let{scaleX:ot,scaleY:Ve}=mo(a,M);(ot>.005&&Math.abs(this.scaleX-ot)>.005||Ve>.005&&Math.abs(this.scaleY-Ve)>.005)&&(this.scaleX=ot,this.scaleY=Ve,R|=16,b=k=!0)}let j=(parseInt(u.paddingTop)||0)*this.scaleY,K=(parseInt(u.paddingBottom)||0)*this.scaleY;(this.paddingTop!=j||this.paddingBottom!=K)&&(this.paddingTop=j,this.paddingBottom=K,R|=18),this.editorWidth!=t.scrollDOM.clientWidth&&(p.lineWrapping&&(k=!0),this.editorWidth=t.scrollDOM.clientWidth,R|=16);let oe=t.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=oe&&(this.scrollAnchorHeight=-1,this.scrollTop=oe),this.scrolledToBottom=_o(t.scrollDOM);let de=(this.printing?xm:Am)(a,this.paddingTop),be=de.top-this.pixelViewport.top,Se=de.bottom-this.pixelViewport.bottom;this.pixelViewport=de;let Ee=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(Ee!=this.inView&&(this.inView=Ee,Ee&&(k=!0)),!this.inView&&!this.scrollTarget&&!vm(t.dom))return 0;let ze=M.width;if((this.contentDOMWidth!=ze||this.editorHeight!=t.scrollDOM.clientHeight)&&(this.contentDOMWidth=M.width,this.editorHeight=t.scrollDOM.clientHeight,R|=16),k){let ot=t.docView.measureVisibleLineHeights(this.viewport);if(p.mustRefreshForHeights(ot)&&(b=!0),b||p.lineWrapping&&Math.abs(ze-this.contentDOMWidth)>p.charWidth){let{lineHeight:Ve,charWidth:nt,textHeight:Ke}=t.docView.measureTextSize();b=Ve>0&&p.refresh(g,Ve,nt,Ke,Math.max(5,ze/nt),ot),b&&(t.docView.minWidth=0,R|=16)}be>0&&Se>0?Z=Math.max(be,Se):be<0&&Se<0&&(Z=Math.min(be,Se)),Nc();for(let Ve of this.viewports){let nt=Ve.from==this.viewport.from?ot:t.docView.measureVisibleLineHeights(Ve);this.heightMap=(b?Fn.empty().applyChanges(this.stateDeco,V.empty,this.heightOracle,[new Jn(0,0,0,t.state.doc.length)]):this.heightMap).updateHeight(p,0,b,new dm(Ve.from,nt))}Rr&&(R|=2)}let We=!this.viewportIsAppropriate(this.viewport,Z)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return We&&(R&2&&(R|=this.updateScaler()),this.viewport=this.getViewport(Z,this.scrollTarget),R|=this.updateForViewport()),(R&2||We)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(b?[]:this.lineGaps,t)),R|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,t.docView.enforceCursorAssoc()),R}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(t,a){let u=.5-Math.max(-.5,Math.min(.5,t/1e3/2)),p=this.heightMap,g=this.heightOracle,{visibleTop:b,visibleBottom:M}=this,k=new Vo(p.lineAt(b-u*1e3,tn.ByHeight,g,0,0).from,p.lineAt(M+(1-u)*1e3,tn.ByHeight,g,0,0).to);if(a){let{head:R}=a.range;if(R<k.from||R>k.to){let Z=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),j=p.lineAt(R,tn.ByPos,g,0,0),K;a.y=="center"?K=(j.top+j.bottom)/2-Z/2:a.y=="start"||a.y=="nearest"&&R<k.from?K=j.top:K=j.bottom-Z,k=new Vo(p.lineAt(K-1e3/2,tn.ByHeight,g,0,0).from,p.lineAt(K+Z+1e3/2,tn.ByHeight,g,0,0).to)}}return k}mapViewport(t,a){let u=a.mapPos(t.from,-1),p=a.mapPos(t.to,1);return new Vo(this.heightMap.lineAt(u,tn.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(p,tn.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:t,to:a},u=0){if(!this.inView)return!0;let{top:p}=this.heightMap.lineAt(t,tn.ByPos,this.heightOracle,0,0),{bottom:g}=this.heightMap.lineAt(a,tn.ByPos,this.heightOracle,0,0),{visibleTop:b,visibleBottom:M}=this;return(t==0||p<=b-Math.max(10,Math.min(-u,250)))&&(a==this.state.doc.length||g>=M+Math.max(10,Math.min(u,250)))&&p>b-2*1e3&&g<M+2*1e3}mapLineGaps(t,a){if(!t.length||a.empty)return t;let u=[];for(let p of t)a.touchesRange(p.from,p.to)||u.push(new Tl(a.mapPos(p.from),a.mapPos(p.to),p.size,p.displaySize));return u}ensureLineGaps(t,a){let u=this.heightOracle.lineWrapping,p=u?1e4:2e3,g=p>>1,b=p<<1;if(this.defaultTextDirection!=Yt.LTR&&!u)return[];let M=[],k=(Z,j,K,oe)=>{if(j-Z<g)return;let de=this.state.selection.main,be=[de.from];de.empty||be.push(de.to);for(let Ee of be)if(Ee>Z&&Ee<j){k(Z,Ee-10,K,oe),k(Ee+10,j,K,oe);return}let Se=Pm(t,Ee=>Ee.from>=K.from&&Ee.to<=K.to&&Math.abs(Ee.from-Z)<g&&Math.abs(Ee.to-j)<g&&!be.some(ze=>Ee.from<ze&&Ee.to>ze));if(!Se){if(j<K.to&&a&&u&&a.visibleRanges.some(We=>We.from<=j&&We.to>=j)){let We=a.moveToLineBoundary(we.cursor(j),!1,!0).head;We>Z&&(j=We)}let Ee=this.gapSize(K,Z,j,oe),ze=u||Ee<2e6?Ee:2e6;Se=new Tl(Z,j,Ee,ze)}M.push(Se)},R=Z=>{if(Z.length<b||Z.type!=tt.Text)return;let j=Sm(Z.from,Z.to,this.stateDeco);if(j.total<b)return;let K=this.scrollTarget?this.scrollTarget.range.head:null,oe,de;if(u){let be=p/this.heightOracle.lineLength*this.heightOracle.lineHeight,Se,Ee;if(K!=null){let ze=zo(j,K),We=((this.visibleBottom-this.visibleTop)/2+be)/Z.height;Se=ze-We,Ee=ze+We}else Se=(this.visibleTop-Z.top-be)/Z.height,Ee=(this.visibleBottom-Z.top+be)/Z.height;oe=Wo(j,Se),de=Wo(j,Ee)}else{let be=j.total*this.heightOracle.charWidth,Se=p*this.heightOracle.charWidth,Ee=0;if(be>2e6)for(let nt of t)nt.from>=Z.from&&nt.from<Z.to&&nt.size!=nt.displaySize&&nt.from*this.heightOracle.charWidth+Ee<this.pixelViewport.left&&(Ee=nt.size-nt.displaySize);let ze=this.pixelViewport.left+Ee,We=this.pixelViewport.right+Ee,ot,Ve;if(K!=null){let nt=zo(j,K),Ke=((We-ze)/2+Se)/be;ot=nt-Ke,Ve=nt+Ke}else ot=(ze-Se)/be,Ve=(We+Se)/be;oe=Wo(j,ot),de=Wo(j,Ve)}oe>Z.from&&k(Z.from,oe,Z,j),de<Z.to&&k(de,Z.to,Z,j)};for(let Z of this.viewportLines)Array.isArray(Z.type)?Z.type.forEach(R):R(Z);return M}gapSize(t,a,u,p){let g=zo(p,u)-zo(p,a);return this.heightOracle.lineWrapping?t.height*g:p.total*this.heightOracle.charWidth*g}updateLineGaps(t){Tl.same(t,this.lineGaps)||(this.lineGaps=t,this.lineGapDeco=_t.set(t.map(a=>a.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(t){let a=this.stateDeco;this.lineGaps.length&&(a=a.concat(this.lineGapDeco));let u=[];vt.spans(a,this.viewport.from,this.viewport.to,{span(g,b){u.push({from:g,to:b})},point(){}},20);let p=0;if(u.length!=this.visibleRanges.length)p=12;else for(let g=0;g<u.length&&!(p&8);g++){let b=this.visibleRanges[g],M=u[g];(b.from!=M.from||b.to!=M.to)&&(p|=4,t&&t.mapPos(b.from,-1)==M.from&&t.mapPos(b.to,1)==M.to||(p|=8))}return this.visibleRanges=u,p}lineBlockAt(t){return t>=this.viewport.from&&t<=this.viewport.to&&this.viewportLines.find(a=>a.from<=t&&a.to>=t)||Ms(this.heightMap.lineAt(t,tn.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(t){return t>=this.viewportLines[0].top&&t<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(a=>a.top<=t&&a.bottom>=t)||Ms(this.heightMap.lineAt(this.scaler.fromDOM(t),tn.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(t){let a=this.lineBlockAtHeight(t+8);return a.from>=this.viewport.from||this.viewportLines[0].top-t>200?a:this.viewportLines[0]}elementAtHeight(t){return Ms(this.heightMap.blockAt(this.scaler.fromDOM(t),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Vo{constructor(t,a){this.from=t,this.to=a}}function Sm(f,t,a){let u=[],p=f,g=0;return vt.spans(a,f,t,{span(){},point(b,M){b>p&&(u.push({from:p,to:b}),g+=b-p),p=M}},20),p<t&&(u.push({from:p,to:t}),g+=t-p),{total:g,ranges:u}}function Wo({total:f,ranges:t},a){if(a<=0)return t[0].from;if(a>=1)return t[t.length-1].to;let u=Math.floor(f*a);for(let p=0;;p++){let{from:g,to:b}=t[p],M=b-g;if(u<=M)return g+u;u-=M}}function zo(f,t){let a=0;for(let{from:u,to:p}of f.ranges){if(t<=p){a+=t-u;break}a+=p-u}return a/f.total}function Pm(f,t){for(let a of f)if(t(a))return a}const Ic={toDOM(f){return f},fromDOM(f){return f},scale:1,eq(f){return f==this}};class Rl{constructor(t,a,u){let p=0,g=0,b=0;this.viewports=u.map(({from:M,to:k})=>{let R=a.lineAt(M,tn.ByPos,t,0,0).top,Z=a.lineAt(k,tn.ByPos,t,0,0).bottom;return p+=Z-R,{from:M,to:k,top:R,bottom:Z,domTop:0,domBottom:0}}),this.scale=(7e6-p)/(a.height-p);for(let M of this.viewports)M.domTop=b+(M.top-g)*this.scale,b=M.domBottom=M.domTop+(M.bottom-M.top),g=M.bottom}toDOM(t){for(let a=0,u=0,p=0;;a++){let g=a<this.viewports.length?this.viewports[a]:null;if(!g||t<g.top)return p+(t-u)*this.scale;if(t<=g.bottom)return g.domTop+(t-g.top);u=g.bottom,p=g.domBottom}}fromDOM(t){for(let a=0,u=0,p=0;;a++){let g=a<this.viewports.length?this.viewports[a]:null;if(!g||t<g.domTop)return u+(t-p)/this.scale;if(t<=g.domBottom)return g.top+(t-g.domTop);u=g.bottom,p=g.domBottom}}eq(t){return t instanceof Rl?this.scale==t.scale&&this.viewports.length==t.viewports.length&&this.viewports.every((a,u)=>a.from==t.viewports[u].from&&a.to==t.viewports[u].to):!1}}function Ms(f,t){if(t.scale==1)return f;let a=t.toDOM(f.top),u=t.toDOM(f.bottom);return new hi(f.from,f.length,a,u-a,Array.isArray(f._content)?f._content.map(p=>Ms(p,t)):f._content)}const Yo=Ze.define({combine:f=>f.join(" ")}),Gl=Ze.define({combine:f=>f.indexOf(!0)>-1}),Ll=gi.newName(),Vc=gi.newName(),Wc=gi.newName(),zc={"&light":"."+Vc,"&dark":"."+Wc};function Zl(f,t,a){return new gi(t,{finish(u){return/&/.test(u)?u.replace(/&\w*/,p=>{if(p=="&")return f;if(!a||!a[p])throw new RangeError(`Unsupported selector: ${p}`);return a[p]}):f+" "+u}})}const Mm=Zl("."+Ll,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},zc),wm={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Nl=rt.ie&&rt.ie_version<=11;class km{constructor(t){this.view=t,this.active=!1,this.editContext=null,this.selectionRange=new yt,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=t.contentDOM,this.observer=new MutationObserver(a=>{for(let u of a)this.queue.push(u);(rt.ie&&rt.ie_version<=11||rt.ios&&t.composing)&&a.some(u=>u.type=="childList"&&u.removedNodes.length||u.type=="characterData"&&u.oldValue.length>u.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&rt.android&&t.constructor.EDIT_CONTEXT!==!1&&!(rt.chrome&&rt.chrome_version<126)&&(this.editContext=new Dm(t),t.state.facet(ui)&&(t.contentDOM.editContext=this.editContext.editContext)),Nl&&(this.onCharData=a=>{this.queue.push({target:a.target,type:"characterData",oldValue:a.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var a;((a=this.view.docView)===null||a===void 0?void 0:a.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(t.scrollDOM)),this.addWindowListeners(this.win=t.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(a=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),a.length>0&&a[a.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(a=>{a.length>0&&a[a.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(t){this.view.inputState.runHandlers("scroll",t),this.intersecting&&this.view.measure()}onScroll(t){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(t)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(t){(t.type=="change"||!t.type)&&!t.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(t){if(this.gapIntersection&&(t.length!=this.gaps.length||this.gaps.some((a,u)=>a!=t[u]))){this.gapIntersection.disconnect();for(let a of t)this.gapIntersection.observe(a);this.gaps=t}}onSelectionChange(t){let a=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:u}=this,p=this.selectionRange;if(u.state.facet(ui)?u.root.activeElement!=this.dom:!Pr(this.dom,p))return;let g=p.anchorNode&&u.docView.tile.nearest(p.anchorNode);if(g&&g.isWidget()&&g.widget.ignoreEvent(t)){a||(this.selectionChanged=!1);return}(rt.ie&&rt.ie_version<=11||rt.android&&rt.chrome)&&!u.state.selection.main.empty&&p.focusNode&&En(p.focusNode,p.focusOffset,p.anchorNode,p.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:t}=this,a=Ei(t.root);if(!a)return!1;let u=rt.safari&&t.root.nodeType==11&&t.root.activeElement==this.dom&&$m(this.view,a)||a;if(!u||this.selectionRange.eq(u))return!1;let p=Pr(this.dom,u);return p&&!this.selectionChanged&&t.inputState.lastFocusTime>Date.now()-200&&t.inputState.lastTouchTime<Date.now()-300&&ml(this.dom,u)?(this.view.inputState.lastFocusTime=0,t.docView.updateSelection(),!1):(this.selectionRange.setRange(u),p&&(this.selectionChanged=!0),!0)}setSelectionRange(t,a){this.selectionRange.set(t.node,t.offset,a.node,a.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let t=0,a=null;for(let u=this.dom;u;)if(u.nodeType==1)!a&&t<this.scrollTargets.length&&this.scrollTargets[t]==u?t++:a||(a=this.scrollTargets.slice(0,t)),a&&a.push(u),u=u.assignedSlot||u.parentNode;else if(u.nodeType==11)u=u.host;else break;if(t<this.scrollTargets.length&&!a&&(a=this.scrollTargets.slice(0,t)),a){for(let u of this.scrollTargets)u.removeEventListener("scroll",this.onScroll);for(let u of this.scrollTargets=a)u.addEventListener("scroll",this.onScroll)}}ignore(t){if(!this.active)return t();try{return this.stop(),t()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,wm),Nl&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Nl&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(t,a){var u;if(!this.delayedAndroidKey){let p=()=>{let g=this.delayedAndroidKey;g&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=g.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&g.force&&li(this.dom,g.key,g.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(p)}(!this.delayedAndroidKey||t=="Enter")&&(this.delayedAndroidKey={key:t,keyCode:a,force:this.lastChange<Date.now()-50||!!(!((u=this.delayedAndroidKey)===null||u===void 0)&&u.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}processRecords(){let t=this.pendingRecords();t.length&&(this.queue=[]);let a=-1,u=-1,p=!1;for(let g of t){let b=this.readMutation(g);b&&(b.typeOver&&(p=!0),a==-1?{from:a,to:u}=b:(a=Math.min(b.from,a),u=Math.max(b.to,u)))}return{from:a,to:u,typeOver:p}}readChange(){let{from:t,to:a,typeOver:u}=this.processRecords(),p=this.selectionChanged&&Pr(this.dom,this.selectionRange);if(t<0&&!p)return null;t>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let g=new Wd(this.view,t,a,u);return this.view.docView.domChanged={newSel:g.newSel?g.newSel.main:null},g}flush(t=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;t&&this.readSelectionRange();let a=this.readChange();if(!a)return this.view.requestMeasure(),!1;let u=this.view.state,p=Ac(this.view,a);return this.view.state==u&&(a.domChanged||a.newSel&&!a.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),p}readMutation(t){let a=this.view.docView.tile.nearest(t.target);if(!a||a.isWidget())return null;if(a.markDirty(t.type=="attributes"),t.type=="childList"){let u=Yc(a,t.previousSibling||t.target.previousSibling,-1),p=Yc(a,t.nextSibling||t.target.nextSibling,1);return{from:u?a.posAfter(u):a.posAtStart,to:p?a.posBefore(p):a.posAtEnd,typeOver:!1}}else return t.type=="characterData"?{from:a.posAtStart,to:a.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}:null}setWindow(t){t!=this.win&&(this.removeWindowListeners(this.win),this.win=t,this.addWindowListeners(this.win))}addWindowListeners(t){t.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):t.addEventListener("beforeprint",this.onPrint),t.addEventListener("scroll",this.onScroll),t.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(t){t.removeEventListener("scroll",this.onScroll),t.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):t.removeEventListener("beforeprint",this.onPrint),t.document.removeEventListener("selectionchange",this.onSelectionChange)}update(t){this.editContext&&(this.editContext.update(t),t.startState.facet(ui)!=t.state.facet(ui)&&(t.view.contentDOM.editContext=t.state.facet(ui)?this.editContext.editContext:null))}destroy(){var t,a,u;this.stop(),(t=this.intersection)===null||t===void 0||t.disconnect(),(a=this.gapIntersection)===null||a===void 0||a.disconnect(),(u=this.resizeScroll)===null||u===void 0||u.disconnect();for(let p of this.scrollTargets)p.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function Yc(f,t,a){for(;t;){let u=_n.get(t);if(u&&u.parent==f)return u;let p=t.parentNode;t=p!=f.dom?p:a>0?t.nextSibling:t.previousSibling}return null}function jc(f,t){let a=t.startContainer,u=t.startOffset,p=t.endContainer,g=t.endOffset,b=f.docView.domAtPos(f.state.selection.main.anchor,1);return En(b.node,b.offset,p,g)&&([a,u,p,g]=[p,g,a,u]),{anchorNode:a,anchorOffset:u,focusNode:p,focusOffset:g}}function $m(f,t){if(t.getComposedRanges){let p=t.getComposedRanges(f.root)[0];if(p)return jc(f,p)}let a=null;function u(p){p.preventDefault(),p.stopImmediatePropagation(),a=p.getTargetRanges()[0]}return f.contentDOM.addEventListener("beforeinput",u,!0),f.dom.ownerDocument.execCommand("indent"),f.contentDOM.removeEventListener("beforeinput",u,!0),a?jc(f,a):null}class Dm{constructor(t){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(t.state);let a=this.editContext=new window.EditContext({text:t.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,t.state.selection.main.anchor))),selectionEnd:this.toContextPos(t.state.selection.main.head)});this.handlers.textupdate=u=>{let p=t.state.selection.main,{anchor:g,head:b}=p,M=this.toEditorPos(u.updateRangeStart),k=this.toEditorPos(u.updateRangeEnd);t.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:u.updateRangeStart,editorBase:M,drifted:!1});let R=k-M>u.text.length;M==this.from&&g<this.from?M=g:k==this.to&&g>this.to&&(k=g);let Z=vc(t.state.sliceDoc(M,k),u.text,(R?p.from:p.to)-M,R?"end":null);if(!Z){let K=we.single(this.toEditorPos(u.selectionStart),this.toEditorPos(u.selectionEnd));K.main.eq(p)||t.dispatch({selection:K,userEvent:"select"});return}let j={from:Z.from+M,to:Z.toA+M,insert:V.of(u.text.slice(Z.from,Z.toB).split(`
`))};if((rt.mac||rt.android)&&j.from==b-1&&/^\. ?$/.test(u.text)&&t.contentDOM.getAttribute("autocorrect")=="off"&&(j={from:M,to:k,insert:V.of([u.text.replace("."," ")])}),this.pendingContextChange=j,!t.state.readOnly){let K=this.to-this.from+(j.to-j.from+j.insert.length);Dl(t,j,we.single(this.toEditorPos(u.selectionStart,K),this.toEditorPos(u.selectionEnd,K)))}this.pendingContextChange&&(this.revertPending(t.state),this.setSelection(t.state)),j.from<j.to&&!j.insert.length&&t.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(a.text.slice(Math.max(0,u.updateRangeStart-1),Math.min(a.text.length,u.updateRangeStart+1)))&&this.handlers.compositionend(u)},this.handlers.characterboundsupdate=u=>{let p=[],g=null;for(let b=this.toEditorPos(u.rangeStart),M=this.toEditorPos(u.rangeEnd);b<M;b++){let k=t.coordsForChar(b);g=k&&new DOMRect(k.left,k.top,k.right-k.left,k.bottom-k.top)||g||new DOMRect,p.push(g)}a.updateCharacterBounds(u.rangeStart,p)},this.handlers.textformatupdate=u=>{let p=[];for(let g of u.getTextFormats()){let b=g.underlineStyle,M=g.underlineThickness;if(!/none/i.test(b)&&!/none/i.test(M)){let k=this.toEditorPos(g.rangeStart),R=this.toEditorPos(g.rangeEnd);if(k<R){let Z=`text-decoration: underline ${/^[a-z]/.test(b)?b+" ":b=="Dashed"?"dashed ":b=="Squiggle"?"wavy ":""}${/thin/i.test(M)?1:2}px`;p.push(_t.mark({attributes:{style:Z}}).range(k,R))}}}t.dispatch({effects:Fo.of(_t.set(p))})},this.handlers.compositionstart=()=>{t.inputState.composing<0&&(t.inputState.composing=0,t.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(t.inputState.composing=-1,t.inputState.compositionFirstChange=null,this.composing){let{drifted:u}=this.composing;this.composing=null,u&&this.reset(t.state)}};for(let u in this.handlers)a.addEventListener(u,this.handlers[u]);this.measureReq={read:u=>{this.editContext.updateControlBounds(u.contentDOM.getBoundingClientRect());let p=Ei(u.root);p&&p.rangeCount&&this.editContext.updateSelectionBounds(p.getRangeAt(0).getBoundingClientRect())}}}applyEdits(t){let a=0,u=!1,p=this.pendingContextChange;return t.changes.iterChanges((g,b,M,k,R)=>{if(u)return;let Z=R.length-(b-g);if(p&&b>=p.to)if(p.from==g&&p.to==b&&p.insert.eq(R)){p=this.pendingContextChange=null,a+=Z,this.to+=Z;return}else p=null,this.revertPending(t.state);if(g+=a,b+=a,b<=this.from)this.from+=Z,this.to+=Z;else if(g<this.to){if(g<this.from||b>this.to||this.to-this.from+R.length>3e4){u=!0;return}this.editContext.updateText(this.toContextPos(g),this.toContextPos(b),R.toString()),this.to+=Z}a+=Z}),p&&!u&&this.revertPending(t.state),!u}update(t){let a=this.pendingContextChange,u=t.startState.selection.main;this.composing&&(this.composing.drifted||!t.changes.touchesRange(u.from,u.to)&&t.transactions.some(p=>!p.isUserEvent("input.type")&&p.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=t.changes.mapPos(this.composing.editorBase)):!this.applyEdits(t)||!this.rangeIsValid(t.state)?(this.pendingContextChange=null,this.reset(t.state)):(t.docChanged||t.selectionSet||a)&&this.setSelection(t.state),(t.geometryChanged||t.docChanged||t.selectionSet)&&t.view.requestMeasure(this.measureReq)}resetRange(t){let{head:a}=t.selection.main;this.from=Math.max(0,a-1e4),this.to=Math.min(t.doc.length,a+1e4)}reset(t){this.resetRange(t),this.editContext.updateText(0,this.editContext.text.length,t.doc.sliceString(this.from,this.to)),this.setSelection(t)}revertPending(t){let a=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(a.from),this.toContextPos(a.from+a.insert.length),t.doc.sliceString(a.from,a.to))}setSelection(t){let{main:a}=t.selection,u=this.toContextPos(Math.max(this.from,Math.min(this.to,a.anchor))),p=this.toContextPos(a.head);(this.editContext.selectionStart!=u||this.editContext.selectionEnd!=p)&&this.editContext.updateSelection(u,p)}rangeIsValid(t){let{head:a}=t.selection.main;return!(this.from>0&&a-this.from<500||this.to<t.doc.length&&this.to-a<500||this.to-this.from>1e4*3)}toEditorPos(t,a=this.to-this.from){t=Math.min(t,a);let u=this.composing;return u&&u.drifted?u.editorBase+(t-u.contextBase):t+this.from}toContextPos(t){let a=this.composing;return a&&a.drifted?a.contextBase+(t-a.editorBase):t-this.from}destroy(){for(let t in this.handlers)this.editContext.removeEventListener(t,this.handlers[t])}}class st{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(t={}){var a;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),t.parent&&t.parent.appendChild(this.dom);let{dispatch:u}=t;this.dispatchTransactions=t.dispatchTransactions||u&&(p=>p.forEach(g=>u(g,this)))||(p=>this.update(p)),this.dispatch=this.dispatch.bind(this),this._root=t.root||go(t.parent)||document,this.viewState=new Xc(t.state||Pe.create(t)),t.scrollTo&&t.scrollTo.is(Dr)&&(this.viewState.scrollTarget=t.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(bi).map(p=>new z(p));for(let p of this.plugins)p.update(this);this.observer=new km(this),this.inputState=new Ud(this),this.inputState.ensureHandlers(this.plugins),this.docView=new pc(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((a=document.fonts)===null||a===void 0)&&a.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...t){let a=t.length==1&&t[0]instanceof Ft?t:t.length==1&&Array.isArray(t[0])?t[0]:[this.state.update(...t)];this.dispatchTransactions(a,this)}update(t){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let a=!1,u=!1,p,g=this.state;for(let K of t){if(K.startState!=g)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");g=K.state}if(this.destroyed){this.viewState.state=g;return}let b=this.hasFocus,M=0,k=null;t.some(K=>K.annotation(Tc))?(this.inputState.notifiedFocused=b,M=1):b!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=b,k=Rc(g,b),k||(M=1));let R=this.observer.delayedAndroidKey,Z=null;if(R?(this.observer.clearDelayedAndroidKey(),Z=this.observer.readChange(),(Z&&!this.state.doc.eq(g.doc)||!this.state.selection.eq(g.selection))&&(Z=null)):this.observer.clear(),g.facet(Pe.phrases)!=this.state.facet(Pe.phrases))return this.setState(g);p=To.create(this,g,t),p.flags|=M;let j=this.viewState.scrollTarget;try{this.updateState=2;for(let K of t){if(j&&(j=j.map(K.changes)),K.scrollIntoView){let{main:oe}=K.state.selection;j=new Xi(oe.empty?oe:we.cursor(oe.head,oe.head>oe.anchor?-1:1))}for(let oe of K.effects)oe.is(Dr)&&(j=oe.value.clip(this.state))}this.viewState.update(p,j),this.bidiCache=jo.update(this.bidiCache,p.changes),p.empty||(this.updatePlugins(p),this.inputState.update(p)),a=this.docView.update(p),this.state.facet(Cs)!=this.styleModules&&this.mountStyles(),u=this.updateAttrs(),this.showAnnouncements(t),this.docView.updateSelection(a,t.some(K=>K.isUserEvent("select.pointer")))}finally{this.updateState=0}if(p.startState.facet(Yo)!=p.state.facet(Yo)&&(this.viewState.mustMeasureContent=!0),(a||u||j||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),a&&this.docViewUpdate(),!p.empty)for(let K of this.state.facet(As))try{K(p)}catch(oe){gn(this.state,oe,"update listener")}(k||Z)&&Promise.resolve().then(()=>{k&&this.state==k.startState&&this.dispatch(k),Z&&!Ac(this,Z)&&R.force&&li(this.contentDOM,R.key,R.keyCode)})}setState(t){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=t;return}this.updateState=2;let a=this.hasFocus;try{for(let u of this.plugins)u.destroy(this);this.viewState=new Xc(t),this.plugins=t.facet(bi).map(u=>new z(u)),this.pluginMap.clear();for(let u of this.plugins)u.update(this);this.docView.destroy(),this.docView=new pc(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}a&&this.focus(),this.requestMeasure()}updatePlugins(t){let a=t.startState.facet(bi),u=t.state.facet(bi);if(a!=u){let p=[];for(let g of u){let b=a.indexOf(g);if(b<0)p.push(new z(g));else{let M=this.plugins[b];M.mustUpdate=t,p.push(M)}}for(let g of this.plugins)g.mustUpdate!=t&&g.destroy(this);this.plugins=p,this.pluginMap.clear()}else for(let p of this.plugins)p.mustUpdate=t;for(let p=0;p<this.plugins.length;p++)this.plugins[p].update(this);a!=u&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let t of this.plugins){let a=t.value;if(a&&a.docViewUpdate)try{a.docViewUpdate(this)}catch(u){gn(this.state,u,"doc view update listener")}}}measure(t=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,t&&this.observer.forceFlush();let a=null,u=this.scrollDOM,p=u.scrollTop*this.scaleY,{scrollAnchorPos:g,scrollAnchorHeight:b}=this.viewState;Math.abs(p-this.viewState.scrollTop)>1&&(b=-1),this.viewState.scrollAnchorHeight=-1;try{for(let M=0;;M++){if(b<0)if(_o(u))g=-1,b=this.viewState.heightMap.height;else{let oe=this.viewState.scrollAnchorAt(p);g=oe.from,b=oe.top}this.updateState=1;let k=this.viewState.measure(this);if(!k&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(M>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let R=[];k&4||([this.measureRequests,R]=[R,this.measureRequests]);let Z=R.map(oe=>{try{return oe.read(this)}catch(de){return gn(this.state,de),Uc}}),j=To.create(this,this.state,[]),K=!1;j.flags|=k,a?a.flags|=k:a=j,this.updateState=2,j.empty||(this.updatePlugins(j),this.inputState.update(j),this.updateAttrs(),K=this.docView.update(j),K&&this.docViewUpdate());for(let oe=0;oe<R.length;oe++)if(Z[oe]!=Uc)try{let de=R[oe];de.write&&de.write(Z[oe],this)}catch(de){gn(this.state,de)}if(K&&this.docView.updateSelection(!0),!j.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,b=-1;continue}else{let de=(g<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(g).top)-b;if(de>1||de<-1){p=p+de,u.scrollTop=p/this.scaleY,b=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(a&&!a.empty)for(let M of this.state.facet(As))M(a)}get themeClasses(){return Ll+" "+(this.state.facet(Gl)?Wc:Vc)+" "+this.state.facet(Yo)}updateAttrs(){let t=qc(this,he,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),a={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(ui)?"true":"false",class:"cm-content",style:`${rt.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(a["aria-readonly"]="true"),qc(this,ge,a);let u=this.observer.ignore(()=>{let p=Di(this.contentDOM,this.contentAttrs,a),g=Di(this.dom,this.editorAttrs,t);return p||g});return this.editorAttrs=t,this.contentAttrs=a,u}showAnnouncements(t){let a=!0;for(let u of t)for(let p of u.effects)if(p.is(st.announce)){a&&(this.announceDOM.textContent=""),a=!1;let g=this.announceDOM.appendChild(document.createElement("div"));g.textContent=p.value}}mountStyles(){this.styleModules=this.state.facet(Cs);let t=this.state.facet(st.cspNonce);gi.mount(this.root,this.styleModules.concat(Mm).reverse(),t?{nonce:t}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(t){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),t){if(this.measureRequests.indexOf(t)>-1)return;if(t.key!=null){for(let a=0;a<this.measureRequests.length;a++)if(this.measureRequests[a].key===t.key){this.measureRequests[a]=t;return}}this.measureRequests.push(t)}}plugin(t){let a=this.pluginMap.get(t);return(a===void 0||a&&a.plugin!=t)&&this.pluginMap.set(t,a=this.plugins.find(u=>u.plugin==t)||null),a&&a.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(t){return this.readMeasured(),this.viewState.elementAtHeight(t)}lineBlockAtHeight(t){return this.readMeasured(),this.viewState.lineBlockAtHeight(t)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(t){return this.viewState.lineBlockAt(t)}get contentHeight(){return this.viewState.contentHeight}moveByChar(t,a,u){return kl(this,t,mc(this,t,a,u))}moveByGroup(t,a){return kl(this,t,mc(this,t,a,u=>Bd(this,t.head,u)))}visualLineSide(t,a){let u=this.bidiSpans(t),p=this.textDirectionAt(t.from),g=u[a?u.length-1:0];return we.cursor(g.side(a,p)+t.from,g.forward(!a,p)?1:-1)}moveToLineBoundary(t,a,u=!0){return Nd(this,t,a,u)}moveVertically(t,a,u){return kl(this,t,Qd(this,t,a,u))}domAtPos(t,a=1){return this.docView.domAtPos(t,a)}posAtDOM(t,a=0){return this.docView.posFromDOM(t,a)}posAtCoords(t,a=!0){this.readMeasured();let u=$l(this,t,a);return u&&u.pos}posAndSideAtCoords(t,a=!0){return this.readMeasured(),$l(this,t,a)}coordsAtPos(t,a=1){this.readMeasured();let u=this.docView.coordsAt(t,a);if(!u||u.left==u.right)return u;let p=this.state.doc.lineAt(t),g=this.bidiSpans(p),b=g[An.find(g,t-p.from,-1,a)];return wr(u,b.dir==Yt.LTR==a>0)}coordsForChar(t){return this.readMeasured(),this.docView.coordsForChar(t)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(t){return!this.state.facet($o)||t<this.viewport.from||t>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(t))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(t){if(t.length>Em)return Co(t.length);let a=this.textDirectionAt(t.from),u;for(let g of this.bidiCache)if(g.from==t.from&&g.dir==a&&(g.fresh||ys(g.isolates,u=lc(this,t))))return g.order;u||(u=lc(this,t));let p=Ol(t.text,a,u);return this.bidiCache.push(new jo(t.from,t.to,a,u,!0,p)),p}get hasFocus(){var t;return(this.dom.ownerDocument.hasFocus()||rt.safari&&((t=this.inputState)===null||t===void 0?void 0:t.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{ps(this.contentDOM),this.docView.updateSelection()})}setRoot(t){this._root!=t&&(this._root=t,this.observer.setWindow((t.nodeType==9?t:t.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let t of this.plugins)t.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(t,a={}){return Dr.of(new Xi(typeof t=="number"?we.cursor(t):t,a.y,a.x,a.yMargin,a.xMargin))}scrollSnapshot(){let{scrollTop:t,scrollLeft:a}=this.scrollDOM,u=this.viewState.scrollAnchorAt(t);return Dr.of(new Xi(we.cursor(u.from),"start","start",u.top-t,a,!0))}setTabFocusMode(t){t==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof t=="boolean"?this.inputState.tabFocusMode=t?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+t)}static domEventHandlers(t){return ln.define(()=>({}),{eventHandlers:t})}static domEventObservers(t){return ln.define(()=>({}),{eventObservers:t})}static theme(t,a){let u=gi.newName(),p=[Yo.of(u),Cs.of(Zl(`.${u}`,t))];return a&&a.dark&&p.push(Gl.of(!0)),p}static baseTheme(t){return rn.lowest(Cs.of(Zl("."+Ll,t,zc)))}static findFromDOM(t){var a;let u=t.querySelector(".cm-content"),p=u&&_n.get(u)||_n.get(t);return((a=p?.root)===null||a===void 0?void 0:a.view)||null}}st.styleModule=Cs,st.inputHandler=ko,st.clipboardInputFilter=vs,st.clipboardOutputFilter=xs,st.scrollHandler=Eo,st.focusChangeEffect=Ti,st.perLineTextDirection=$o,st.exceptionSink=$r,st.updateListener=As,st.editable=ui,st.mouseSelectionStyle=wo,st.dragMovesSelection=Mo,st.clickAddsSelectionRange=Po,st.decorations=De,st.blockWrappers=ht,st.outerDecorations=Kt,st.atomicRanges=Pn,st.bidiIsolatedRanges=Ri,st.scrollMargins=uc,st.darkTheme=Gl,st.cspNonce=Ze.define({combine:f=>f.length?f[0]:""}),st.contentAttributes=ge,st.editorAttributes=he,st.lineWrapping=st.contentAttributes.of({class:"cm-lineWrapping"}),st.announce=Be.define();const Em=4096,Uc={};class jo{constructor(t,a,u,p,g,b){this.from=t,this.to=a,this.dir=u,this.isolates=p,this.fresh=g,this.order=b}static update(t,a){if(a.empty&&!t.some(g=>g.fresh))return t;let u=[],p=t.length?t[t.length-1].dir:Yt.LTR;for(let g=Math.max(0,t.length-10);g<t.length;g++){let b=t[g];b.dir==p&&!a.touchesRange(b.from,b.to)&&u.push(new jo(a.mapPos(b.from,1),a.mapPos(b.to,-1),b.dir,b.isolates,!1,b.order))}return u}}function qc(f,t,a){for(let u=f.state.facet(t),p=u.length-1;p>=0;p--){let g=u[p],b=typeof g=="function"?g(f):g;b&&fs(b,a)}return a}const Fm=rt.mac?"mac":rt.windows?"win":rt.linux?"linux":"key";function Tm(f,t){const a=f.split(/-(?!$)/);let u=a[a.length-1];u=="Space"&&(u=" ");let p,g,b,M;for(let k=0;k<a.length-1;++k){const R=a[k];if(/^(cmd|meta|m)$/i.test(R))M=!0;else if(/^a(lt)?$/i.test(R))p=!0;else if(/^(c|ctrl|control)$/i.test(R))g=!0;else if(/^s(hift)?$/i.test(R))b=!0;else if(/^mod$/i.test(R))t=="mac"?M=!0:g=!0;else throw new Error("Unrecognized modifier name: "+R)}return p&&(u="Alt-"+u),g&&(u="Ctrl-"+u),M&&(u="Meta-"+u),b&&(u="Shift-"+u),u}function Uo(f,t,a){return t.altKey&&(f="Alt-"+f),t.ctrlKey&&(f="Ctrl-"+f),t.metaKey&&(f="Meta-"+f),a!==!1&&t.shiftKey&&(f="Shift-"+f),f}const Rm=rn.default(st.domEventHandlers({keydown(f,t){return Jc(Kc(t.state),f,t,"editor")}})),qo=Ze.define({enables:Rm}),Hc=new WeakMap;function Kc(f){let t=f.facet(qo),a=Hc.get(t);return a||Hc.set(t,a=Zm(t.reduce((u,p)=>u.concat(p),[]))),a}function Gm(f,t,a){return Jc(Kc(f.state),t,f,a)}let Vi=null;const Lm=4e3;function Zm(f,t=Fm){let a=Object.create(null),u=Object.create(null),p=(b,M)=>{let k=u[b];if(k==null)u[b]=M;else if(k!=M)throw new Error("Key binding "+b+" is used both as a regular binding and as a multi-stroke prefix")},g=(b,M,k,R,Z)=>{var j,K;let oe=a[b]||(a[b]=Object.create(null)),de=M.split(/ (?!$)/).map(Ee=>Tm(Ee,t));for(let Ee=1;Ee<de.length;Ee++){let ze=de.slice(0,Ee).join(" ");p(ze,!0),oe[ze]||(oe[ze]={preventDefault:!0,stopPropagation:!1,run:[We=>{let ot=Vi={view:We,prefix:ze,scope:b};return setTimeout(()=>{Vi==ot&&(Vi=null)},Lm),!0}]})}let be=de.join(" ");p(be,!1);let Se=oe[be]||(oe[be]={preventDefault:!1,stopPropagation:!1,run:((K=(j=oe._any)===null||j===void 0?void 0:j.run)===null||K===void 0?void 0:K.slice())||[]});k&&Se.run.push(k),R&&(Se.preventDefault=!0),Z&&(Se.stopPropagation=!0)};for(let b of f){let M=b.scope?b.scope.split(" "):["editor"];if(b.any)for(let R of M){let Z=a[R]||(a[R]=Object.create(null));Z._any||(Z._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:j}=b;for(let K in Z)Z[K].run.push(oe=>j(oe,Bl))}let k=b[t]||b.key;if(k)for(let R of M)g(R,k,b.run,b.preventDefault,b.stopPropagation),b.shift&&g(R,"Shift-"+k,b.shift,b.preventDefault,b.stopPropagation)}return a}let Bl=null;function Jc(f,t,a,u){Bl=t;let p=hl(t),g=Me(p,0),b=Te(g)==p.length&&p!=" ",M="",k=!1,R=!1,Z=!1;Vi&&Vi.view==a&&Vi.scope==u&&(M=Vi.prefix+" ",Sc.indexOf(t.keyCode)<0&&(R=!0,Vi=null));let j=new Set,K=Se=>{if(Se){for(let Ee of Se.run)if(!j.has(Ee)&&(j.add(Ee),Ee(a)))return Se.stopPropagation&&(Z=!0),!0;Se.preventDefault&&(Se.stopPropagation&&(Z=!0),R=!0)}return!1},oe=f[u],de,be;return oe&&(K(oe[M+Uo(p,t,!b)])?k=!0:b&&(t.altKey||t.metaKey||t.ctrlKey)&&!(rt.windows&&t.ctrlKey&&t.altKey)&&!(rt.mac&&t.altKey&&!(t.ctrlKey||t.metaKey))&&(de=_i[t.keyCode])&&de!=p?(K(oe[M+Uo(de,t,!0)])||t.shiftKey&&(be=rr[t.keyCode])!=p&&be!=de&&K(oe[M+Uo(be,t,!1)]))&&(k=!0):b&&t.shiftKey&&K(oe[M+Uo(p,t,!0)])&&(k=!0),!k&&K(oe._any)&&(k=!0)),R&&(k=!0),k&&Z&&t.stopPropagation(),Bl=null,k}class ws{constructor(t,a,u,p,g){this.className=t,this.left=a,this.top=u,this.width=p,this.height=g}draw(){let t=document.createElement("div");return t.className=this.className,this.adjust(t),t}update(t,a){return a.className!=this.className?!1:(this.adjust(t),!0)}adjust(t){t.style.left=this.left+"px",t.style.top=this.top+"px",this.width!=null&&(t.style.width=this.width+"px"),t.style.height=this.height+"px"}eq(t){return this.left==t.left&&this.top==t.top&&this.width==t.width&&this.height==t.height&&this.className==t.className}static forRange(t,a,u){if(u.empty){let p=t.coordsAtPos(u.head,u.assoc||1);if(!p)return[];let g=eh(t);return[new ws(a,p.left-g.left,p.top-g.top,null,p.bottom-p.top)]}else return Nm(t,a,u)}}function eh(f){let t=f.scrollDOM.getBoundingClientRect();return{left:(f.textDirection==Yt.LTR?t.left:t.right-f.scrollDOM.clientWidth*f.scaleX)-f.scrollDOM.scrollLeft*f.scaleX,top:t.top-f.scrollDOM.scrollTop*f.scaleY}}function th(f,t,a,u){let p=f.coordsAtPos(t,a*2);if(!p)return u;let g=f.dom.getBoundingClientRect(),b=(p.top+p.bottom)/2,M=f.posAtCoords({x:g.left+1,y:b}),k=f.posAtCoords({x:g.right-1,y:b});return M==null||k==null?u:{from:Math.max(u.from,Math.min(M,k)),to:Math.min(u.to,Math.max(M,k))}}function Nm(f,t,a){if(a.to<=f.viewport.from||a.from>=f.viewport.to)return[];let u=Math.max(a.from,f.viewport.from),p=Math.min(a.to,f.viewport.to),g=f.textDirection==Yt.LTR,b=f.contentDOM,M=b.getBoundingClientRect(),k=eh(f),R=b.querySelector(".cm-line"),Z=R&&window.getComputedStyle(R),j=M.left+(Z?parseInt(Z.paddingLeft)+Math.min(0,parseInt(Z.textIndent)):0),K=M.right-(Z?parseInt(Z.paddingRight):0),oe=wl(f,u,1),de=wl(f,p,-1),be=oe.type==tt.Text?oe:null,Se=de.type==tt.Text?de:null;if(be&&(f.lineWrapping||oe.widgetLineBreaks)&&(be=th(f,u,1,be)),Se&&(f.lineWrapping||de.widgetLineBreaks)&&(Se=th(f,p,-1,Se)),be&&Se&&be.from==Se.from&&be.to==Se.to)return ze(We(a.from,a.to,be));{let Ve=be?We(a.from,null,be):ot(oe,!1),nt=Se?We(null,a.to,Se):ot(de,!0),Ke=[];return(be||oe).to<(Se||de).from-(be&&Se?1:0)||oe.widgetLineBreaks>1&&Ve.bottom+f.defaultLineHeight/2<nt.top?Ke.push(Ee(j,Ve.bottom,K,nt.top)):Ve.bottom<nt.top&&f.elementAtHeight((Ve.bottom+nt.top)/2).type==tt.Text&&(Ve.bottom=nt.top=(Ve.bottom+nt.top)/2),ze(Ve).concat(Ke).concat(ze(nt))}function Ee(Ve,nt,Ke,Et){return new ws(t,Ve-k.left,nt-k.top,Ke-Ve,Et-nt)}function ze({top:Ve,bottom:nt,horizontal:Ke}){let Et=[];for(let Bt=0;Bt<Ke.length;Bt+=2)Et.push(Ee(Ke[Bt],Ve,Ke[Bt+1],nt));return Et}function We(Ve,nt,Ke){let Et=1e9,Bt=-1e9,Jt=[];function Zt(It,nn,Tn,Un,ki){let wn=f.coordsAtPos(It,It==Ke.to?-2:2),si=f.coordsAtPos(Tn,Tn==Ke.from?2:-2);!wn||!si||(Et=Math.min(wn.top,si.top,Et),Bt=Math.max(wn.bottom,si.bottom,Bt),ki==Yt.LTR?Jt.push(g&&nn?j:wn.left,g&&Un?K:si.right):Jt.push(!g&&Un?j:si.left,!g&&nn?K:wn.right))}let Ot=Ve??Ke.from,Ht=nt??Ke.to;for(let It of f.visibleRanges)if(It.to>Ot&&It.from<Ht)for(let nn=Math.max(It.from,Ot),Tn=Math.min(It.to,Ht);;){let Un=f.state.doc.lineAt(nn);for(let ki of f.bidiSpans(Un)){let wn=ki.from+Un.from,si=ki.to+Un.from;if(wn>=Tn)break;si>nn&&Zt(Math.max(wn,nn),Ve==null&&wn<=Ot,Math.min(si,Tn),nt==null&&si>=Ht,ki.dir)}if(nn=Un.to+1,nn>=Tn)break}return Jt.length==0&&Zt(Ot,Ve==null,Ht,nt==null,f.textDirection),{top:Et,bottom:Bt,horizontal:Jt}}function ot(Ve,nt){let Ke=M.top+(nt?Ve.top:Ve.bottom);return{top:Ke,bottom:Ke,horizontal:[]}}}function Bm(f,t){return f.constructor==t.constructor&&f.eq(t)}class Qm{constructor(t,a){this.view=t,this.layer=a,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=t.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),a.above&&this.dom.classList.add("cm-layer-above"),a.class&&this.dom.classList.add(a.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(t.state),t.requestMeasure(this.measureReq),a.mount&&a.mount(this.dom,t)}update(t){t.startState.facet(Ho)!=t.state.facet(Ho)&&this.setOrder(t.state),(this.layer.update(t,this.dom)||t.geometryChanged)&&(this.scale(),t.view.requestMeasure(this.measureReq))}docViewUpdate(t){this.layer.updateOnDocViewUpdate!==!1&&t.requestMeasure(this.measureReq)}setOrder(t){let a=0,u=t.facet(Ho);for(;a<u.length&&u[a]!=this.layer;)a++;this.dom.style.zIndex=String((this.layer.above?150:-1)-a)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:t,scaleY:a}=this.view;(t!=this.scaleX||a!=this.scaleY)&&(this.scaleX=t,this.scaleY=a,this.dom.style.transform=`scale(${1/t}, ${1/a})`)}draw(t){if(t.length!=this.drawn.length||t.some((a,u)=>!Bm(a,this.drawn[u]))){let a=this.dom.firstChild,u=0;for(let p of t)p.update&&a&&p.constructor&&this.drawn[u].constructor&&p.update(a,this.drawn[u])?(a=a.nextSibling,u++):this.dom.insertBefore(p.draw(),a);for(;a;){let p=a.nextSibling;a.remove(),a=p}this.drawn=t,rt.safari&&rt.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Ho=Ze.define();function nh(f){return[ln.define(t=>new Qm(t,f)),Ho.of(f)]}const ks=Ze.define({combine(f){return $e(f,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(t,a)=>Math.min(t,a),drawRangeCursor:(t,a)=>t||a})}});function Xm(f={}){return[ks.of(f),Im,Vm,Wm,Do.of(!0)]}function ih(f){return f.startState.facet(ks)!=f.state.facet(ks)}const Im=nh({above:!0,markers(f){let{state:t}=f,a=t.facet(ks),u=[];for(let p of t.selection.ranges){let g=p==t.selection.main;if(p.empty||a.drawRangeCursor){let b=g?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",M=p.empty?p:we.cursor(p.head,p.head>p.anchor?-1:1);for(let k of ws.forRange(f,b,M))u.push(k)}}return u},update(f,t){f.transactions.some(u=>u.selection)&&(t.style.animationName=t.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let a=ih(f);return a&&rh(f.state,t),f.docChanged||f.selectionSet||a},mount(f,t){rh(t.state,f)},class:"cm-cursorLayer"});function rh(f,t){t.style.animationDuration=f.facet(ks).cursorBlinkRate+"ms"}const Vm=nh({above:!1,markers(f){return f.state.selection.ranges.map(t=>t.empty?[]:ws.forRange(f,"cm-selectionBackground",t)).reduce((t,a)=>t.concat(a))},update(f,t){return f.docChanged||f.selectionSet||f.viewportChanged||ih(f)},class:"cm-selectionLayer"}),Wm=rn.highest(st.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),sh=Be.define({map(f,t){return f==null?null:t.mapPos(f)}}),$s=bt.define({create(){return null},update(f,t){return f!=null&&(f=t.changes.mapPos(f)),t.effects.reduce((a,u)=>u.is(sh)?u.value:a,f)}}),zm=ln.fromClass(class{constructor(f){this.view=f,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(f){var t;let a=f.state.field($s);a==null?this.cursor!=null&&((t=this.cursor)===null||t===void 0||t.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(f.startState.field($s)!=a||f.docChanged||f.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:f}=this,t=f.state.field($s),a=t!=null&&f.coordsAtPos(t);if(!a)return null;let u=f.scrollDOM.getBoundingClientRect();return{left:a.left-u.left+f.scrollDOM.scrollLeft*f.scaleX,top:a.top-u.top+f.scrollDOM.scrollTop*f.scaleY,height:a.bottom-a.top}}drawCursor(f){if(this.cursor){let{scaleX:t,scaleY:a}=this.view;f?(this.cursor.style.left=f.left/t+"px",this.cursor.style.top=f.top/a+"px",this.cursor.style.height=f.height/a+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(f){this.view.state.field($s)!=f&&this.view.dispatch({effects:sh.of(f)})}},{eventObservers:{dragover(f){this.setDropPos(this.view.posAtCoords({x:f.clientX,y:f.clientY}))},dragleave(f){(f.target==this.view.contentDOM||!this.view.contentDOM.contains(f.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function Ym(){return[$s,zm]}const Ql=2e3;function jm(f,t,a){let u=Math.min(t.line,a.line),p=Math.max(t.line,a.line),g=[];if(t.off>Ql||a.off>Ql||t.col<0||a.col<0){let b=Math.min(t.off,a.off),M=Math.max(t.off,a.off);for(let k=u;k<=p;k++){let R=f.doc.line(k);R.length<=M&&g.push(we.range(R.from+b,R.to+M))}}else{let b=Math.min(t.col,a.col),M=Math.max(t.col,a.col);for(let k=u;k<=p;k++){let R=f.doc.line(k),Z=ns(R.text,b,f.tabSize,!0);if(Z<0)g.push(we.cursor(R.to));else{let j=ns(R.text,M,f.tabSize);g.push(we.range(R.from+Z,R.from+j))}}}return g}function Um(f,t){let a=f.coordsAtPos(f.viewport.from);return a?Math.round(Math.abs((a.left-t)/f.defaultCharacterWidth)):-1}function oh(f,t){let a=f.posAtCoords({x:t.clientX,y:t.clientY},!1),u=f.state.doc.lineAt(a),p=a-u.from,g=p>Ql?-1:p==u.length?Um(f,t.clientX):nr(u.text,f.state.tabSize,a-u.from);return{line:u.number,col:g,off:p}}function qm(f,t){let a=oh(f,t),u=f.state.selection;return a?{update(p){if(p.docChanged){let g=p.changes.mapPos(p.startState.doc.line(a.line).from),b=p.state.doc.lineAt(g);a={line:b.number,col:a.col,off:Math.min(a.off,b.length)},u=u.map(p.changes)}},get(p,g,b){let M=oh(f,p);if(!M)return u;let k=jm(f.state,a,M);return k.length?b?we.create(k.concat(u.ranges)):we.create(k):u}}:null}function Hm(f){let t=f?.eventFilter||(a=>a.altKey&&a.button==0);return st.mouseSelectionStyle.of((a,u)=>t(u)?qm(a,u):null)}const Km={Alt:[18,f=>!!f.altKey],Control:[17,f=>!!f.ctrlKey],Shift:[16,f=>!!f.shiftKey],Meta:[91,f=>!!f.metaKey]},Jm={style:"cursor: crosshair"};function e0(f={}){let[t,a]=Km[f.key||"Alt"],u=ln.fromClass(class{constructor(p){this.view=p,this.isDown=!1}set(p){this.isDown!=p&&(this.isDown=p,this.view.update([]))}},{eventObservers:{keydown(p){this.set(p.keyCode==t||a(p))},keyup(p){(p.keyCode==t||!a(p))&&this.set(!1)},mousemove(p){this.set(a(p))}}});return[u,st.contentAttributes.of(p=>{var g;return!((g=p.plugin(u))===null||g===void 0)&&g.isDown?Jm:null})]}const Ko="-10000px";class ah{constructor(t,a,u,p){this.facet=a,this.createTooltipView=u,this.removeTooltipView=p,this.input=t.state.facet(a),this.tooltips=this.input.filter(b=>b);let g=null;this.tooltipViews=this.tooltips.map(b=>g=u(b,g))}update(t,a){var u;let p=t.state.facet(this.facet),g=p.filter(k=>k);if(p===this.input){for(let k of this.tooltipViews)k.update&&k.update(t);return!1}let b=[],M=a?[]:null;for(let k=0;k<g.length;k++){let R=g[k],Z=-1;if(R){for(let j=0;j<this.tooltips.length;j++){let K=this.tooltips[j];K&&K.create==R.create&&(Z=j)}if(Z<0)b[k]=this.createTooltipView(R,k?b[k-1]:null),M&&(M[k]=!!R.above);else{let j=b[k]=this.tooltipViews[Z];M&&(M[k]=a[Z]),j.update&&j.update(t)}}}for(let k of this.tooltipViews)b.indexOf(k)<0&&(this.removeTooltipView(k),(u=k.destroy)===null||u===void 0||u.call(k));return a&&(M.forEach((k,R)=>a[R]=k),a.length=M.length),this.input=p,this.tooltips=g,this.tooltipViews=b,!0}}function t0(f){let t=f.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:t.clientHeight,right:t.clientWidth}}const Xl=Ze.define({combine:f=>{var t,a,u;return{position:rt.ios?"absolute":((t=f.find(p=>p.position))===null||t===void 0?void 0:t.position)||"fixed",parent:((a=f.find(p=>p.parent))===null||a===void 0?void 0:a.parent)||null,tooltipSpace:((u=f.find(p=>p.tooltipSpace))===null||u===void 0?void 0:u.tooltipSpace)||t0}}}),lh=new WeakMap,Il=ln.fromClass(class{constructor(f){this.view=f,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let t=f.state.facet(Xl);this.position=t.position,this.parent=t.parent,this.classes=f.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new ah(f,Vl,(a,u)=>this.createTooltip(a,u),a=>{this.resizeObserver&&this.resizeObserver.unobserve(a.dom),a.dom.remove()}),this.above=this.manager.tooltips.map(a=>!!a.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(a=>{Date.now()>this.lastTransaction-50&&a.length>0&&a[a.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),f.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let f of this.manager.tooltipViews)this.intersectionObserver.observe(f.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(f){f.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(f,this.above);t&&this.observeIntersection();let a=t||f.geometryChanged,u=f.state.facet(Xl);if(u.position!=this.position&&!this.madeAbsolute){this.position=u.position;for(let p of this.manager.tooltipViews)p.dom.style.position=this.position;a=!0}if(u.parent!=this.parent){this.parent&&this.container.remove(),this.parent=u.parent,this.createContainer();for(let p of this.manager.tooltipViews)this.container.appendChild(p.dom);a=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);a&&this.maybeMeasure()}createTooltip(f,t){let a=f.create(this.view),u=t?t.dom:null;if(a.dom.classList.add("cm-tooltip"),f.arrow&&!a.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let p=document.createElement("div");p.className="cm-tooltip-arrow",a.dom.appendChild(p)}return a.dom.style.position=this.position,a.dom.style.top=Ko,a.dom.style.left="0px",this.container.insertBefore(a.dom,u),a.mount&&a.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(a.dom),a}destroy(){var f,t,a;this.view.win.removeEventListener("resize",this.measureSoon);for(let u of this.manager.tooltipViews)u.dom.remove(),(f=u.destroy)===null||f===void 0||f.call(u);this.parent&&this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect(),(a=this.intersectionObserver)===null||a===void 0||a.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let f=1,t=1,a=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:g}=this.manager.tooltipViews[0];if(rt.safari){let b=g.getBoundingClientRect();a=Math.abs(b.top+1e4)>1||Math.abs(b.left)>1}else a=!!g.offsetParent&&g.offsetParent!=this.container.ownerDocument.body}if(a||this.position=="absolute")if(this.parent){let g=this.parent.getBoundingClientRect();g.width&&g.height&&(f=g.width/this.parent.offsetWidth,t=g.height/this.parent.offsetHeight)}else({scaleX:f,scaleY:t}=this.view.viewState);let u=this.view.scrollDOM.getBoundingClientRect(),p=xl(this.view);return{visible:{left:u.left+p.left,top:u.top+p.top,right:u.right-p.right,bottom:u.bottom-p.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((g,b)=>{let M=this.manager.tooltipViews[b];return M.getCoords?M.getCoords(g.pos):this.view.coordsAtPos(g.pos)}),size:this.manager.tooltipViews.map(({dom:g})=>g.getBoundingClientRect()),space:this.view.state.facet(Xl).tooltipSpace(this.view),scaleX:f,scaleY:t,makeAbsolute:a}}writeMeasure(f){var t;if(f.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let M of this.manager.tooltipViews)M.dom.style.position="absolute"}let{visible:a,space:u,scaleX:p,scaleY:g}=f,b=[];for(let M=0;M<this.manager.tooltips.length;M++){let k=this.manager.tooltips[M],R=this.manager.tooltipViews[M],{dom:Z}=R,j=f.pos[M],K=f.size[M];if(!j||k.clip!==!1&&(j.bottom<=Math.max(a.top,u.top)||j.top>=Math.min(a.bottom,u.bottom)||j.right<Math.max(a.left,u.left)-.1||j.left>Math.min(a.right,u.right)+.1)){Z.style.top=Ko;continue}let oe=k.arrow?R.dom.querySelector(".cm-tooltip-arrow"):null,de=oe?7:0,be=K.right-K.left,Se=(t=lh.get(R))!==null&&t!==void 0?t:K.bottom-K.top,Ee=R.offset||i0,ze=this.view.textDirection==Yt.LTR,We=K.width>u.right-u.left?ze?u.left:u.right-K.width:ze?Math.max(u.left,Math.min(j.left-(oe?14:0)+Ee.x,u.right-be)):Math.min(Math.max(u.left,j.left-be+(oe?14:0)-Ee.x),u.right-be),ot=this.above[M];!k.strictSide&&(ot?j.top-Se-de-Ee.y<u.top:j.bottom+Se+de+Ee.y>u.bottom)&&ot==u.bottom-j.bottom>j.top-u.top&&(ot=this.above[M]=!ot);let Ve=(ot?j.top-u.top:u.bottom-j.bottom)-de;if(Ve<Se&&R.resize!==!1){if(Ve<this.view.defaultLineHeight){Z.style.top=Ko;continue}lh.set(R,Se),Z.style.height=(Se=Ve)/g+"px"}else Z.style.height&&(Z.style.height="");let nt=ot?j.top-Se-de-Ee.y:j.bottom+de+Ee.y,Ke=We+be;if(R.overlap!==!0)for(let Et of b)Et.left<Ke&&Et.right>We&&Et.top<nt+Se&&Et.bottom>nt&&(nt=ot?Et.top-Se-2-de:Et.bottom+de+2);if(this.position=="absolute"?(Z.style.top=(nt-f.parent.top)/g+"px",uh(Z,(We-f.parent.left)/p)):(Z.style.top=nt/g+"px",uh(Z,We/p)),oe){let Et=j.left+(ze?Ee.x:-Ee.x)-(We+14-7);oe.style.left=Et/p+"px"}R.overlap!==!0&&b.push({left:We,top:nt,right:Ke,bottom:nt+Se}),Z.classList.toggle("cm-tooltip-above",ot),Z.classList.toggle("cm-tooltip-below",!ot),R.positioned&&R.positioned(f.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let f of this.manager.tooltipViews)f.dom.style.top=Ko}},{eventObservers:{scroll(){this.maybeMeasure()}}});function uh(f,t){let a=parseInt(f.style.left,10);(isNaN(a)||Math.abs(t-a)>1)&&(f.style.left=t+"px")}const n0=st.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),i0={x:0,y:0},Vl=Ze.define({enables:[Il,n0]}),Jo=Ze.define({combine:f=>f.reduce((t,a)=>t.concat(a),[])});class ea{static create(t){return new ea(t)}constructor(t){this.view=t,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new ah(t,Jo,(a,u)=>this.createHostedView(a,u),a=>a.dom.remove())}createHostedView(t,a){let u=t.create(this.view);return u.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(u.dom,a?a.dom.nextSibling:this.dom.firstChild),this.mounted&&u.mount&&u.mount(this.view),u}mount(t){for(let a of this.manager.tooltipViews)a.mount&&a.mount(t);this.mounted=!0}positioned(t){for(let a of this.manager.tooltipViews)a.positioned&&a.positioned(t)}update(t){this.manager.update(t)}destroy(){var t;for(let a of this.manager.tooltipViews)(t=a.destroy)===null||t===void 0||t.call(a)}passProp(t){let a;for(let u of this.manager.tooltipViews){let p=u[t];if(p!==void 0){if(a===void 0)a=p;else if(a!==p)return}}return a}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const r0=Vl.compute([Jo],f=>{let t=f.facet(Jo);return t.length===0?null:{pos:Math.min(...t.map(a=>a.pos)),end:Math.max(...t.map(a=>{var u;return(u=a.end)!==null&&u!==void 0?u:a.pos})),create:ea.create,above:t[0].above,arrow:t.some(a=>a.arrow)}});class s0{constructor(t,a,u,p,g){this.view=t,this.source=a,this.field=u,this.setHover=p,this.hoverTime=g,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:t.dom,time:0},this.checkHover=this.checkHover.bind(this),t.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),t.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let t=Date.now()-this.lastMove.time;t<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-t):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:t,lastMove:a}=this,u=t.docView.tile.nearest(a.target);if(!u)return;let p,g=1;if(u.isWidget())p=u.posAtStart;else{if(p=t.posAtCoords(a),p==null)return;let M=t.coordsAtPos(p);if(!M||a.y<M.top||a.y>M.bottom||a.x<M.left-t.defaultCharacterWidth||a.x>M.right+t.defaultCharacterWidth)return;let k=t.bidiSpans(t.state.doc.lineAt(p)).find(Z=>Z.from<=p&&Z.to>=p),R=k&&k.dir==Yt.RTL?-1:1;g=a.x<M.left?-R:R}let b=this.source(t,p,g);if(b?.then){let M=this.pending={pos:p};b.then(k=>{this.pending==M&&(this.pending=null,k&&!(Array.isArray(k)&&!k.length)&&t.dispatch({effects:this.setHover.of(Array.isArray(k)?k:[k])}))},k=>gn(t.state,k,"hover tooltip"))}else b&&!(Array.isArray(b)&&!b.length)&&t.dispatch({effects:this.setHover.of(Array.isArray(b)?b:[b])})}get tooltip(){let t=this.view.plugin(Il),a=t?t.manager.tooltips.findIndex(u=>u.create==ea.create):-1;return a>-1?t.manager.tooltipViews[a]:null}mousemove(t){var a,u;this.lastMove={x:t.clientX,y:t.clientY,target:t.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:p,tooltip:g}=this;if(p.length&&g&&!o0(g.dom,t)||this.pending){let{pos:b}=p[0]||this.pending,M=(u=(a=p[0])===null||a===void 0?void 0:a.end)!==null&&u!==void 0?u:b;(b==M?this.view.posAtCoords(this.lastMove)!=b:!a0(this.view,b,M,t.clientX,t.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(t){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:a}=this;if(a.length){let{tooltip:u}=this;u&&u.dom.contains(t.relatedTarget)?this.watchTooltipLeave(u.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(t){let a=u=>{t.removeEventListener("mouseleave",a),this.active.length&&!this.view.dom.contains(u.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};t.addEventListener("mouseleave",a)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const ta=4;function o0(f,t){let{left:a,right:u,top:p,bottom:g}=f.getBoundingClientRect(),b;if(b=f.querySelector(".cm-tooltip-arrow")){let M=b.getBoundingClientRect();p=Math.min(M.top,p),g=Math.max(M.bottom,g)}return t.clientX>=a-ta&&t.clientX<=u+ta&&t.clientY>=p-ta&&t.clientY<=g+ta}function a0(f,t,a,u,p,g){let b=f.scrollDOM.getBoundingClientRect(),M=f.documentTop+f.documentPadding.top+f.contentHeight;if(b.left>u||b.right<u||b.top>p||Math.min(b.bottom,M)<p)return!1;let k=f.posAtCoords({x:u,y:p},!1);return k>=t&&k<=a}function l0(f,t={}){let a=Be.define(),u=bt.define({create(){return[]},update(p,g){if(p.length&&(t.hideOnChange&&(g.docChanged||g.selection)?p=[]:t.hideOn&&(p=p.filter(b=>!t.hideOn(g,b))),g.docChanged)){let b=[];for(let M of p){let k=g.changes.mapPos(M.pos,-1,Ne.TrackDel);if(k!=null){let R=Object.assign(Object.create(null),M);R.pos=k,R.end!=null&&(R.end=g.changes.mapPos(R.end)),b.push(R)}}p=b}for(let b of g.effects)b.is(a)&&(p=b.value),b.is(u0)&&(p=[]);return p},provide:p=>Jo.from(p)});return{active:u,extension:[u,ln.define(p=>new s0(p,f,u,a,t.hoverTime||300)),r0]}}function hh(f,t){let a=f.plugin(Il);if(!a)return null;let u=a.manager.tooltips.indexOf(t);return u<0?null:a.manager.tooltipViews[u]}const u0=Be.define(),fh=Ze.define({combine(f){let t,a;for(let u of f)t=t||u.topContainer,a=a||u.bottomContainer;return{topContainer:t,bottomContainer:a}}});function Ds(f,t){let a=f.plugin(dh),u=a?a.specs.indexOf(t):-1;return u>-1?a.panels[u]:null}const dh=ln.fromClass(class{constructor(f){this.input=f.state.facet(Es),this.specs=this.input.filter(a=>a),this.panels=this.specs.map(a=>a(f));let t=f.state.facet(fh);this.top=new na(f,!0,t.topContainer),this.bottom=new na(f,!1,t.bottomContainer),this.top.sync(this.panels.filter(a=>a.top)),this.bottom.sync(this.panels.filter(a=>!a.top));for(let a of this.panels)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}update(f){let t=f.state.facet(fh);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new na(f.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new na(f.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let a=f.state.facet(Es);if(a!=this.input){let u=a.filter(k=>k),p=[],g=[],b=[],M=[];for(let k of u){let R=this.specs.indexOf(k),Z;R<0?(Z=k(f.view),M.push(Z)):(Z=this.panels[R],Z.update&&Z.update(f)),p.push(Z),(Z.top?g:b).push(Z)}this.specs=u,this.panels=p,this.top.sync(g),this.bottom.sync(b);for(let k of M)k.dom.classList.add("cm-panel"),k.mount&&k.mount()}else for(let u of this.panels)u.update&&u.update(f)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:f=>st.scrollMargins.of(t=>{let a=t.plugin(f);return a&&{top:a.top.scrollMargin(),bottom:a.bottom.scrollMargin()}})});class na{constructor(t,a,u){this.view=t,this.top=a,this.container=u,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(t){for(let a of this.panels)a.destroy&&t.indexOf(a)<0&&a.destroy();this.panels=t,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let a=this.container||this.view.dom;a.insertBefore(this.dom,this.top?a.firstChild:null)}let t=this.dom.firstChild;for(let a of this.panels)if(a.dom.parentNode==this.dom){for(;t!=a.dom;)t=mh(t);t=t.nextSibling}else this.dom.insertBefore(a.dom,t);for(;t;)t=mh(t)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let t of this.classes.split(" "))t&&this.container.classList.remove(t);for(let t of(this.classes=this.view.themeClasses).split(" "))t&&this.container.classList.add(t)}}}function mh(f){let t=f.nextSibling;return f.remove(),t}const Es=Ze.define({enables:dh});class Gi extends Le{compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}eq(t){return!1}destroy(t){}}Gi.prototype.elementClass="",Gi.prototype.toDOM=void 0,Gi.prototype.mapMode=Ne.TrackBefore,Gi.prototype.startSide=Gi.prototype.endSide=-1,Gi.prototype.point=!0;const ia=Ze.define(),c0=Ze.define(),h0={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>vt.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},Fs=Ze.define();function f0(f){return[_h(),Fs.of({...h0,...f})]}const gh=Ze.define({combine:f=>f.some(t=>t)});function _h(f){return[p0]}const p0=ln.fromClass(class{constructor(f){this.view=f,this.domAfter=null,this.prevViewport=f.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=f.state.facet(Fs).map(t=>new Oh(f,t)),this.fixed=!f.state.facet(gh);for(let t of this.gutters)t.config.side=="after"?this.getDOMAfter().appendChild(t.dom):this.dom.appendChild(t.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),f.scrollDOM.insertBefore(this.dom,f.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(f){if(this.updateGutters(f)){let t=this.prevViewport,a=f.view.viewport,u=Math.min(t.to,a.to)-Math.max(t.from,a.from);this.syncGutters(u<(a.to-a.from)*.8)}if(f.geometryChanged){let t=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=t,this.domAfter&&(this.domAfter.style.minHeight=t)}this.view.state.facet(gh)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=f.view.viewport}syncGutters(f){let t=this.dom.nextSibling;f&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let a=vt.iter(this.view.state.facet(ia),this.view.viewport.from),u=[],p=this.gutters.map(g=>new d0(g,this.view.viewport,-this.view.documentPadding.top));for(let g of this.view.viewportLineBlocks)if(u.length&&(u=[]),Array.isArray(g.type)){let b=!0;for(let M of g.type)if(M.type==tt.Text&&b){Wl(a,u,M.from);for(let k of p)k.line(this.view,M,u);b=!1}else if(M.widget)for(let k of p)k.widget(this.view,M)}else if(g.type==tt.Text){Wl(a,u,g.from);for(let b of p)b.line(this.view,g,u)}else if(g.widget)for(let b of p)b.widget(this.view,g);for(let g of p)g.finish();f&&(this.view.scrollDOM.insertBefore(this.dom,t),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(f){let t=f.startState.facet(Fs),a=f.state.facet(Fs),u=f.docChanged||f.heightChanged||f.viewportChanged||!vt.eq(f.startState.facet(ia),f.state.facet(ia),f.view.viewport.from,f.view.viewport.to);if(t==a)for(let p of this.gutters)p.update(f)&&(u=!0);else{u=!0;let p=[];for(let g of a){let b=t.indexOf(g);b<0?p.push(new Oh(this.view,g)):(this.gutters[b].update(f),p.push(this.gutters[b]))}for(let g of this.gutters)g.dom.remove(),p.indexOf(g)<0&&g.destroy();for(let g of p)g.config.side=="after"?this.getDOMAfter().appendChild(g.dom):this.dom.appendChild(g.dom);this.gutters=p}return u}destroy(){for(let f of this.gutters)f.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:f=>st.scrollMargins.of(t=>{let a=t.plugin(f);if(!a||a.gutters.length==0||!a.fixed)return null;let u=a.dom.offsetWidth*t.scaleX,p=a.domAfter?a.domAfter.offsetWidth*t.scaleX:0;return t.textDirection==Yt.LTR?{left:u,right:p}:{right:u,left:p}})});function yh(f){return Array.isArray(f)?f:[f]}function Wl(f,t,a){for(;f.value&&f.from<=a;)f.from==a&&t.push(f.value),f.next()}class d0{constructor(t,a,u){this.gutter=t,this.height=u,this.i=0,this.cursor=vt.iter(t.markers,a.from)}addElement(t,a,u){let{gutter:p}=this,g=(a.top-this.height)/t.scaleY,b=a.height/t.scaleY;if(this.i==p.elements.length){let M=new bh(t,b,g,u);p.elements.push(M),p.dom.appendChild(M.dom)}else p.elements[this.i].update(t,b,g,u);this.height=a.bottom,this.i++}line(t,a,u){let p=[];Wl(this.cursor,p,a.from),u.length&&(p=p.concat(u));let g=this.gutter.config.lineMarker(t,a,p);g&&p.unshift(g);let b=this.gutter;p.length==0&&!b.config.renderEmptyElements||this.addElement(t,a,p)}widget(t,a){let u=this.gutter.config.widgetMarker(t,a.widget,a),p=u?[u]:null;for(let g of t.state.facet(c0)){let b=g(t,a.widget,a);b&&(p||(p=[])).push(b)}p&&this.addElement(t,a,p)}finish(){let t=this.gutter;for(;t.elements.length>this.i;){let a=t.elements.pop();t.dom.removeChild(a.dom),a.destroy()}}}class Oh{constructor(t,a){this.view=t,this.config=a,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let u in a.domEventHandlers)this.dom.addEventListener(u,p=>{let g=p.target,b;if(g!=this.dom&&this.dom.contains(g)){for(;g.parentNode!=this.dom;)g=g.parentNode;let k=g.getBoundingClientRect();b=(k.top+k.bottom)/2}else b=p.clientY;let M=t.lineBlockAtHeight(b-t.documentTop);a.domEventHandlers[u](t,M,p)&&p.preventDefault()});this.markers=yh(a.markers(t)),a.initialSpacer&&(this.spacer=new bh(t,0,0,[a.initialSpacer(t)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(t){let a=this.markers;if(this.markers=yh(this.config.markers(t.view)),this.spacer&&this.config.updateSpacer){let p=this.config.updateSpacer(this.spacer.markers[0],t);p!=this.spacer.markers[0]&&this.spacer.update(t.view,0,0,[p])}let u=t.view.viewport;return!vt.eq(this.markers,a,u.from,u.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(t):!1)}destroy(){for(let t of this.elements)t.destroy()}}class bh{constructor(t,a,u,p){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(t,a,u,p)}update(t,a,u,p){this.height!=a&&(this.height=a,this.dom.style.height=a+"px"),this.above!=u&&(this.dom.style.marginTop=(this.above=u)?u+"px":""),m0(this.markers,p)||this.setMarkers(t,p)}setMarkers(t,a){let u="cm-gutterElement",p=this.dom.firstChild;for(let g=0,b=0;;){let M=b,k=g<a.length?a[g++]:null,R=!1;if(k){let Z=k.elementClass;Z&&(u+=" "+Z);for(let j=b;j<this.markers.length;j++)if(this.markers[j].compare(k)){M=j,R=!0;break}}else M=this.markers.length;for(;b<M;){let Z=this.markers[b++];if(Z.toDOM){Z.destroy(p);let j=p.nextSibling;p.remove(),p=j}}if(!k)break;k.toDOM&&(R?p=p.nextSibling:this.dom.insertBefore(k.toDOM(t),p)),R&&b++}this.dom.className=u,this.markers=a}destroy(){this.setMarkers(null,[])}}function m0(f,t){if(f.length!=t.length)return!1;for(let a=0;a<f.length;a++)if(!f[a].compare(t[a]))return!1;return!0}const g0=Ze.define(),_0=Ze.define(),Gr=Ze.define({combine(f){return $e(f,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(t,a){let u=Object.assign({},t);for(let p in a){let g=u[p],b=a[p];u[p]=g?(M,k,R)=>g(M,k,R)||b(M,k,R):b}return u}})}});class zl extends Gi{constructor(t){super(),this.number=t}eq(t){return this.number==t.number}toDOM(){return document.createTextNode(this.number)}}function Yl(f,t){return f.state.facet(Gr).formatNumber(t,f.state)}const y0=Fs.compute([Gr],f=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(t){return t.state.facet(g0)},lineMarker(t,a,u){return u.some(p=>p.toDOM)?null:new zl(Yl(t,t.state.doc.lineAt(a.from).number))},widgetMarker:(t,a,u)=>{for(let p of t.state.facet(_0)){let g=p(t,a,u);if(g)return g}return null},lineMarkerChange:t=>t.startState.facet(Gr)!=t.state.facet(Gr),initialSpacer(t){return new zl(Yl(t,Ah(t.state.doc.lines)))},updateSpacer(t,a){let u=Yl(a.view,Ah(a.view.state.doc.lines));return u==t.number?t:new zl(u)},domEventHandlers:f.facet(Gr).domEventHandlers,side:"before"}));function O0(f={}){return[Gr.of(f),_h(),y0]}function Ah(f){let t=9;for(;t<f;)t=t*10+9;return t}const b0=new class extends Gi{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},A0=ia.compute(["selection"],f=>{let t=[],a=-1;for(let u of f.selection.ranges){let p=f.doc.lineAt(u.head).from;p>a&&(a=p,t.push(b0.range(p)))}return vt.of(t)});function v0(){return A0}const vh=1024;let x0=0;class jl{constructor(t,a){this.from=t,this.to=a}}class Gt{constructor(t={}){this.id=x0++,this.perNode=!!t.perNode,this.deserialize=t.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=t.combine||null}add(t){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof t!="function"&&(t=Ln.match(t)),a=>{let u=t(a);return u===void 0?null:[this,u]}}}Gt.closedBy=new Gt({deserialize:f=>f.split(" ")}),Gt.openedBy=new Gt({deserialize:f=>f.split(" ")}),Gt.group=new Gt({deserialize:f=>f.split(" ")}),Gt.isolate=new Gt({deserialize:f=>{if(f&&f!="rtl"&&f!="ltr"&&f!="auto")throw new RangeError("Invalid value for isolate: "+f);return f||"auto"}}),Gt.contextHash=new Gt({perNode:!0}),Gt.lookAhead=new Gt({perNode:!0}),Gt.mounted=new Gt({perNode:!0});class ra{constructor(t,a,u){this.tree=t,this.overlay=a,this.parser=u}static get(t){return t&&t.props&&t.props[Gt.mounted.id]}}const C0=Object.create(null);class Ln{constructor(t,a,u,p=0){this.name=t,this.props=a,this.id=u,this.flags=p}static define(t){let a=t.props&&t.props.length?Object.create(null):C0,u=(t.top?1:0)|(t.skipped?2:0)|(t.error?4:0)|(t.name==null?8:0),p=new Ln(t.name||"",a,t.id,u);if(t.props){for(let g of t.props)if(Array.isArray(g)||(g=g(p)),g){if(g[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");a[g[0].id]=g[1]}}return p}prop(t){return this.props[t.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(t){if(typeof t=="string"){if(this.name==t)return!0;let a=this.prop(Gt.group);return a?a.indexOf(t)>-1:!1}return this.id==t}static match(t){let a=Object.create(null);for(let u in t)for(let p of u.split(" "))a[p]=t[u];return u=>{for(let p=u.prop(Gt.group),g=-1;g<(p?p.length:0);g++){let b=a[g<0?u.name:p[g]];if(b)return b}}}}Ln.none=new Ln("",Object.create(null),0,8);class Ul{constructor(t){this.types=t;for(let a=0;a<t.length;a++)if(t[a].id!=a)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...t){let a=[];for(let u of this.types){let p=null;for(let g of t){let b=g(u);if(b){p||(p=Object.assign({},u.props));let M=b[1],k=b[0];k.combine&&k.id in p&&(M=k.combine(p[k.id],M)),p[k.id]=M}}a.push(p?new Ln(u.name,p,u.id,u.flags):u)}return new Ul(a)}}const sa=new WeakMap,xh=new WeakMap;var yn;(function(f){f[f.ExcludeBuffers=1]="ExcludeBuffers",f[f.IncludeAnonymous=2]="IncludeAnonymous",f[f.IgnoreMounts=4]="IgnoreMounts",f[f.IgnoreOverlays=8]="IgnoreOverlays"})(yn||(yn={}));class pn{constructor(t,a,u,p,g){if(this.type=t,this.children=a,this.positions=u,this.length=p,this.props=null,g&&g.length){this.props=Object.create(null);for(let[b,M]of g)this.props[typeof b=="number"?b:b.id]=M}}toString(){let t=ra.get(this);if(t&&!t.overlay)return t.tree.toString();let a="";for(let u of this.children){let p=u.toString();p&&(a&&(a+=","),a+=p)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(a.length?"("+a+")":""):a}cursor(t=0){return new Kl(this.topNode,t)}cursorAt(t,a=0,u=0){let p=sa.get(this)||this.topNode,g=new Kl(p);return g.moveTo(t,a),sa.set(this,g._tree),g}get topNode(){return new Zn(this,0,0,null)}resolve(t,a=0){let u=Ts(sa.get(this)||this.topNode,t,a,!1);return sa.set(this,u),u}resolveInner(t,a=0){let u=Ts(xh.get(this)||this.topNode,t,a,!0);return xh.set(this,u),u}resolveStack(t,a=0){return M0(this,t,a)}iterate(t){let{enter:a,leave:u,from:p=0,to:g=this.length}=t,b=t.mode||0,M=(b&yn.IncludeAnonymous)>0;for(let k=this.cursor(b|yn.IncludeAnonymous);;){let R=!1;if(k.from<=g&&k.to>=p&&(!M&&k.type.isAnonymous||a(k)!==!1)){if(k.firstChild())continue;R=!0}for(;R&&u&&(M||!k.type.isAnonymous)&&u(k),!k.nextSibling();){if(!k.parent())return;R=!0}}}prop(t){return t.perNode?this.props?this.props[t.id]:void 0:this.type.prop(t)}get propValues(){let t=[];if(this.props)for(let a in this.props)t.push([+a,this.props[a]]);return t}balance(t={}){return this.children.length<=8?this:eu(Ln.none,this.children,this.positions,0,this.children.length,0,this.length,(a,u,p)=>new pn(this.type,a,u,p,this.propValues),t.makeTree||((a,u,p)=>new pn(Ln.none,a,u,p)))}static build(t){return w0(t)}}pn.empty=new pn(Ln.none,[],[],0);class ql{constructor(t,a){this.buffer=t,this.index=a}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new ql(this.buffer,this.index)}}class Wi{constructor(t,a,u){this.buffer=t,this.length=a,this.set=u}get type(){return Ln.none}toString(){let t=[];for(let a=0;a<this.buffer.length;)t.push(this.childString(a)),a=this.buffer[a+3];return t.join(",")}childString(t){let a=this.buffer[t],u=this.buffer[t+3],p=this.set.types[a],g=p.name;if(/\W/.test(g)&&!p.isError&&(g=JSON.stringify(g)),t+=4,u==t)return g;let b=[];for(;t<u;)b.push(this.childString(t)),t=this.buffer[t+3];return g+"("+b.join(",")+")"}findChild(t,a,u,p,g){let{buffer:b}=this,M=-1;for(let k=t;k!=a&&!(Ch(g,p,b[k+1],b[k+2])&&(M=k,u>0));k=b[k+3]);return M}slice(t,a,u){let p=this.buffer,g=new Uint16Array(a-t),b=0;for(let M=t,k=0;M<a;){g[k++]=p[M++],g[k++]=p[M++]-u;let R=g[k++]=p[M++]-u;g[k++]=p[M++]-t,b=Math.max(b,R)}return new Wi(g,b,this.set)}}function Ch(f,t,a,u){switch(f){case-2:return a<t;case-1:return u>=t&&a<t;case 0:return a<t&&u>t;case 1:return a<=t&&u>t;case 2:return u>t;case 4:return!0}}function Ts(f,t,a,u){for(var p;f.from==f.to||(a<1?f.from>=t:f.from>t)||(a>-1?f.to<=t:f.to<t);){let b=!u&&f instanceof Zn&&f.index<0?null:f.parent;if(!b)return f;f=b}let g=u?0:yn.IgnoreOverlays;if(u)for(let b=f,M=b.parent;M;b=M,M=b.parent)b instanceof Zn&&b.index<0&&((p=M.enter(t,a,g))===null||p===void 0?void 0:p.from)!=b.from&&(f=M);for(;;){let b=f.enter(t,a,g);if(!b)return f;f=b}}class Sh{cursor(t=0){return new Kl(this,t)}getChild(t,a=null,u=null){let p=Ph(this,t,a,u);return p.length?p[0]:null}getChildren(t,a=null,u=null){return Ph(this,t,a,u)}resolve(t,a=0){return Ts(this,t,a,!1)}resolveInner(t,a=0){return Ts(this,t,a,!0)}matchContext(t){return Hl(this.parent,t)}enterUnfinishedNodesBefore(t){let a=this.childBefore(t),u=this;for(;a;){let p=a.lastChild;if(!p||p.to!=a.to)break;p.type.isError&&p.from==p.to?(u=a,a=p.prevSibling):a=p}return u}get node(){return this}get next(){return this.parent}}class Zn extends Sh{constructor(t,a,u,p){super(),this._tree=t,this.from=a,this.index=u,this._parent=p}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(t,a,u,p,g=0){for(let b=this;;){for(let{children:M,positions:k}=b._tree,R=a>0?M.length:-1;t!=R;t+=a){let Z=M[t],j=k[t]+b.from;if(Ch(p,u,j,j+Z.length)){if(Z instanceof Wi){if(g&yn.ExcludeBuffers)continue;let K=Z.findChild(0,Z.buffer.length,a,u-j,p);if(K>-1)return new vi(new S0(b,Z,t,j),null,K)}else if(g&yn.IncludeAnonymous||!Z.type.isAnonymous||Jl(Z)){let K;if(!(g&yn.IgnoreMounts)&&(K=ra.get(Z))&&!K.overlay)return new Zn(K.tree,j,t,b);let oe=new Zn(Z,j,t,b);return g&yn.IncludeAnonymous||!oe.type.isAnonymous?oe:oe.nextChild(a<0?Z.children.length-1:0,a,u,p)}}}if(g&yn.IncludeAnonymous||!b.type.isAnonymous||(b.index>=0?t=b.index+a:t=a<0?-1:b._parent._tree.children.length,b=b._parent,!b))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(t){return this.nextChild(0,1,t,2)}childBefore(t){return this.nextChild(this._tree.children.length-1,-1,t,-2)}prop(t){return this._tree.prop(t)}enter(t,a,u=0){let p;if(!(u&yn.IgnoreOverlays)&&(p=ra.get(this._tree))&&p.overlay){let g=t-this.from;for(let{from:b,to:M}of p.overlay)if((a>0?b<=g:b<g)&&(a<0?M>=g:M>g))return new Zn(p.tree,p.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,t,a,u)}nextSignificantParent(){let t=this;for(;t.type.isAnonymous&&t._parent;)t=t._parent;return t}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function Ph(f,t,a,u){let p=f.cursor(),g=[];if(!p.firstChild())return g;if(a!=null){for(let b=!1;!b;)if(b=p.type.is(a),!p.nextSibling())return g}for(;;){if(u!=null&&p.type.is(u))return g;if(p.type.is(t)&&g.push(p.node),!p.nextSibling())return u==null?g:[]}}function Hl(f,t,a=t.length-1){for(let u=f;a>=0;u=u.parent){if(!u)return!1;if(!u.type.isAnonymous){if(t[a]&&t[a]!=u.name)return!1;a--}}return!0}class S0{constructor(t,a,u,p){this.parent=t,this.buffer=a,this.index=u,this.start=p}}class vi extends Sh{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(t,a,u){super(),this.context=t,this._parent=a,this.index=u,this.type=t.buffer.set.types[t.buffer.buffer[u]]}child(t,a,u){let{buffer:p}=this.context,g=p.findChild(this.index+4,p.buffer[this.index+3],t,a-this.context.start,u);return g<0?null:new vi(this.context,this,g)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(t){return this.child(1,t,2)}childBefore(t){return this.child(-1,t,-2)}prop(t){return this.type.prop(t)}enter(t,a,u=0){if(u&yn.ExcludeBuffers)return null;let{buffer:p}=this.context,g=p.findChild(this.index+4,p.buffer[this.index+3],a>0?1:-1,t-this.context.start,a);return g<0?null:new vi(this.context,this,g)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(t){return this._parent?null:this.context.parent.nextChild(this.context.index+t,t,0,4)}get nextSibling(){let{buffer:t}=this.context,a=t.buffer[this.index+3];return a<(this._parent?t.buffer[this._parent.index+3]:t.buffer.length)?new vi(this.context,this._parent,a):this.externalSibling(1)}get prevSibling(){let{buffer:t}=this.context,a=this._parent?this._parent.index+4:0;return this.index==a?this.externalSibling(-1):new vi(this.context,this._parent,t.findChild(a,this.index,-1,0,4))}get tree(){return null}toTree(){let t=[],a=[],{buffer:u}=this.context,p=this.index+4,g=u.buffer[this.index+3];if(g>p){let b=u.buffer[this.index+1];t.push(u.slice(p,g,b)),a.push(0)}return new pn(this.type,t,a,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Mh(f){if(!f.length)return null;let t=0,a=f[0];for(let g=1;g<f.length;g++){let b=f[g];(b.from>a.from||b.to<a.to)&&(a=b,t=g)}let u=a instanceof Zn&&a.index<0?null:a.parent,p=f.slice();return u?p[t]=u:p.splice(t,1),new P0(p,a)}class P0{constructor(t,a){this.heads=t,this.node=a}get next(){return Mh(this.heads)}}function M0(f,t,a){let u=f.resolveInner(t,a),p=null;for(let g=u instanceof Zn?u:u.context.parent;g;g=g.parent)if(g.index<0){let b=g.parent;(p||(p=[u])).push(b.resolve(t,a)),g=b}else{let b=ra.get(g.tree);if(b&&b.overlay&&b.overlay[0].from<=t&&b.overlay[b.overlay.length-1].to>=t){let M=new Zn(b.tree,b.overlay[0].from+g.from,-1,g);(p||(p=[u])).push(Ts(M,t,a,!1))}}return p?Mh(p):u}class Kl{get name(){return this.type.name}constructor(t,a=0){if(this.mode=a,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,t instanceof Zn)this.yieldNode(t);else{this._tree=t.context.parent,this.buffer=t.context;for(let u=t._parent;u;u=u._parent)this.stack.unshift(u.index);this.bufferNode=t,this.yieldBuf(t.index)}}yieldNode(t){return t?(this._tree=t,this.type=t.type,this.from=t.from,this.to=t.to,!0):!1}yieldBuf(t,a){this.index=t;let{start:u,buffer:p}=this.buffer;return this.type=a||p.set.types[p.buffer[t]],this.from=u+p.buffer[t+1],this.to=u+p.buffer[t+2],!0}yield(t){return t?t instanceof Zn?(this.buffer=null,this.yieldNode(t)):(this.buffer=t.context,this.yieldBuf(t.index,t.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(t,a,u){if(!this.buffer)return this.yield(this._tree.nextChild(t<0?this._tree._tree.children.length-1:0,t,a,u,this.mode));let{buffer:p}=this.buffer,g=p.findChild(this.index+4,p.buffer[this.index+3],t,a-this.buffer.start,u);return g<0?!1:(this.stack.push(this.index),this.yieldBuf(g))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(t){return this.enterChild(1,t,2)}childBefore(t){return this.enterChild(-1,t,-2)}enter(t,a,u=this.mode){return this.buffer?u&yn.ExcludeBuffers?!1:this.enterChild(1,t,a):this.yield(this._tree.enter(t,a,u))}parent(){if(!this.buffer)return this.yieldNode(this.mode&yn.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let t=this.mode&yn.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(t)}sibling(t){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+t,t,0,4,this.mode)):!1;let{buffer:a}=this.buffer,u=this.stack.length-1;if(t<0){let p=u<0?0:this.stack[u]+4;if(this.index!=p)return this.yieldBuf(a.findChild(p,this.index,-1,0,4))}else{let p=a.buffer[this.index+3];if(p<(u<0?a.buffer.length:a.buffer[this.stack[u]+3]))return this.yieldBuf(p)}return u<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+t,t,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(t){let a,u,{buffer:p}=this;if(p){if(t>0){if(this.index<p.buffer.buffer.length)return!1}else for(let g=0;g<this.index;g++)if(p.buffer.buffer[g+3]<this.index)return!1;({index:a,parent:u}=p)}else({index:a,_parent:u}=this._tree);for(;u;{index:a,_parent:u}=u)if(a>-1)for(let g=a+t,b=t<0?-1:u._tree.children.length;g!=b;g+=t){let M=u._tree.children[g];if(this.mode&yn.IncludeAnonymous||M instanceof Wi||!M.type.isAnonymous||Jl(M))return!1}return!0}move(t,a){if(a&&this.enterChild(t,0,4))return!0;for(;;){if(this.sibling(t))return!0;if(this.atLastNode(t)||!this.parent())return!1}}next(t=!0){return this.move(1,t)}prev(t=!0){return this.move(-1,t)}moveTo(t,a=0){for(;(this.from==this.to||(a<1?this.from>=t:this.from>t)||(a>-1?this.to<=t:this.to<t))&&this.parent(););for(;this.enterChild(1,t,a););return this}get node(){if(!this.buffer)return this._tree;let t=this.bufferNode,a=null,u=0;if(t&&t.context==this.buffer)e:for(let p=this.index,g=this.stack.length;g>=0;){for(let b=t;b;b=b._parent)if(b.index==p){if(p==this.index)return b;a=b,u=g+1;break e}p=this.stack[--g]}for(let p=u;p<this.stack.length;p++)a=new vi(this.buffer,a,this.stack[p]);return this.bufferNode=new vi(this.buffer,a,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(t,a){for(let u=0;;){let p=!1;if(this.type.isAnonymous||t(this)!==!1){if(this.firstChild()){u++;continue}this.type.isAnonymous||(p=!0)}for(;;){if(p&&a&&a(this),p=this.type.isAnonymous,!u)return;if(this.nextSibling())break;this.parent(),u--,p=!0}}}matchContext(t){if(!this.buffer)return Hl(this.node.parent,t);let{buffer:a}=this.buffer,{types:u}=a.set;for(let p=t.length-1,g=this.stack.length-1;p>=0;g--){if(g<0)return Hl(this._tree,t,p);let b=u[a.buffer[this.stack[g]]];if(!b.isAnonymous){if(t[p]&&t[p]!=b.name)return!1;p--}}return!0}}function Jl(f){return f.children.some(t=>t instanceof Wi||!t.type.isAnonymous||Jl(t))}function w0(f){var t;let{buffer:a,nodeSet:u,maxBufferLength:p=vh,reused:g=[],minRepeatType:b=u.types.length}=f,M=Array.isArray(a)?new ql(a,a.length):a,k=u.types,R=0,Z=0;function j(Ve,nt,Ke,Et,Bt,Jt){let{id:Zt,start:Ot,end:Ht,size:It}=M,nn=Z,Tn=R;if(It<0)if(M.next(),It==-1){let Zi=g[Zt];Ke.push(Zi),Et.push(Ot-Ve);return}else if(It==-3){R=Zt;return}else if(It==-4){Z=Zt;return}else throw new RangeError(`Unrecognized record size: ${It}`);let Un=k[Zt],ki,wn,si=Ot-Ve;if(Ht-Ot<=p&&(wn=Se(M.pos-nt,Bt))){let Zi=new Uint16Array(wn.size-wn.skip),oi=M.pos-wn.size,$i=Zi.length;for(;M.pos>oi;)$i=Ee(wn.start,Zi,$i);ki=new Wi(Zi,Ht-wn.start,u),si=wn.start-Ve}else{let Zi=M.pos-It;M.next();let oi=[],$i=[],vr=Zt>=b?Zt:-1,Jr=0,al=Ht;for(;M.pos>Zi;)vr>=0&&M.id==vr&&M.size>=0?(M.end<=al-p&&(de(oi,$i,Ot,Jr,M.end,al,vr,nn,Tn),Jr=oi.length,al=M.end),M.next()):Jt>2500?K(Ot,Zi,oi,$i):j(Ot,Zi,oi,$i,vr,Jt+1);if(vr>=0&&Jr>0&&Jr<oi.length&&de(oi,$i,Ot,Jr,Ot,al,vr,nn,Tn),oi.reverse(),$i.reverse(),vr>-1&&Jr>0){let dd=oe(Un,Tn);ki=eu(Un,oi,$i,0,oi.length,0,Ht-Ot,dd,dd)}else ki=be(Un,oi,$i,Ht-Ot,nn-Ht,Tn)}Ke.push(ki),Et.push(si)}function K(Ve,nt,Ke,Et){let Bt=[],Jt=0,Zt=-1;for(;M.pos>nt;){let{id:Ot,start:Ht,end:It,size:nn}=M;if(nn>4)M.next();else{if(Zt>-1&&Ht<Zt)break;Zt<0&&(Zt=It-p),Bt.push(Ot,Ht,It),Jt++,M.next()}}if(Jt){let Ot=new Uint16Array(Jt*4),Ht=Bt[Bt.length-2];for(let It=Bt.length-3,nn=0;It>=0;It-=3)Ot[nn++]=Bt[It],Ot[nn++]=Bt[It+1]-Ht,Ot[nn++]=Bt[It+2]-Ht,Ot[nn++]=nn;Ke.push(new Wi(Ot,Bt[2]-Ht,u)),Et.push(Ht-Ve)}}function oe(Ve,nt){return(Ke,Et,Bt)=>{let Jt=0,Zt=Ke.length-1,Ot,Ht;if(Zt>=0&&(Ot=Ke[Zt])instanceof pn){if(!Zt&&Ot.type==Ve&&Ot.length==Bt)return Ot;(Ht=Ot.prop(Gt.lookAhead))&&(Jt=Et[Zt]+Ot.length+Ht)}return be(Ve,Ke,Et,Bt,Jt,nt)}}function de(Ve,nt,Ke,Et,Bt,Jt,Zt,Ot,Ht){let It=[],nn=[];for(;Ve.length>Et;)It.push(Ve.pop()),nn.push(nt.pop()+Ke-Bt);Ve.push(be(u.types[Zt],It,nn,Jt-Bt,Ot-Jt,Ht)),nt.push(Bt-Ke)}function be(Ve,nt,Ke,Et,Bt,Jt,Zt){if(Jt){let Ot=[Gt.contextHash,Jt];Zt=Zt?[Ot].concat(Zt):[Ot]}if(Bt>25){let Ot=[Gt.lookAhead,Bt];Zt=Zt?[Ot].concat(Zt):[Ot]}return new pn(Ve,nt,Ke,Et,Zt)}function Se(Ve,nt){let Ke=M.fork(),Et=0,Bt=0,Jt=0,Zt=Ke.end-p,Ot={size:0,start:0,skip:0};e:for(let Ht=Ke.pos-Ve;Ke.pos>Ht;){let It=Ke.size;if(Ke.id==nt&&It>=0){Ot.size=Et,Ot.start=Bt,Ot.skip=Jt,Jt+=4,Et+=4,Ke.next();continue}let nn=Ke.pos-It;if(It<0||nn<Ht||Ke.start<Zt)break;let Tn=Ke.id>=b?4:0,Un=Ke.start;for(Ke.next();Ke.pos>nn;){if(Ke.size<0)if(Ke.size==-3||Ke.size==-4)Tn+=4;else break e;else Ke.id>=b&&(Tn+=4);Ke.next()}Bt=Un,Et+=It,Jt+=Tn}return(nt<0||Et==Ve)&&(Ot.size=Et,Ot.start=Bt,Ot.skip=Jt),Ot.size>4?Ot:void 0}function Ee(Ve,nt,Ke){let{id:Et,start:Bt,end:Jt,size:Zt}=M;if(M.next(),Zt>=0&&Et<b){let Ot=Ke;if(Zt>4){let Ht=M.pos-(Zt-4);for(;M.pos>Ht;)Ke=Ee(Ve,nt,Ke)}nt[--Ke]=Ot,nt[--Ke]=Jt-Ve,nt[--Ke]=Bt-Ve,nt[--Ke]=Et}else Zt==-3?R=Et:Zt==-4&&(Z=Et);return Ke}let ze=[],We=[];for(;M.pos>0;)j(f.start||0,f.bufferStart||0,ze,We,-1,0);let ot=(t=f.length)!==null&&t!==void 0?t:ze.length?We[0]+ze[0].length:0;return new pn(k[f.topID],ze.reverse(),We.reverse(),ot)}const wh=new WeakMap;function oa(f,t){if(!f.isAnonymous||t instanceof Wi||t.type!=f)return 1;let a=wh.get(t);if(a==null){a=1;for(let u of t.children){if(u.type!=f||!(u instanceof pn)){a=1;break}a+=oa(f,u)}wh.set(t,a)}return a}function eu(f,t,a,u,p,g,b,M,k){let R=0;for(let de=u;de<p;de++)R+=oa(f,t[de]);let Z=Math.ceil(R*1.5/8),j=[],K=[];function oe(de,be,Se,Ee,ze){for(let We=Se;We<Ee;){let ot=We,Ve=be[We],nt=oa(f,de[We]);for(We++;We<Ee;We++){let Ke=oa(f,de[We]);if(nt+Ke>=Z)break;nt+=Ke}if(We==ot+1){if(nt>Z){let Ke=de[ot];oe(Ke.children,Ke.positions,0,Ke.children.length,be[ot]+ze);continue}j.push(de[ot])}else{let Ke=be[We-1]+de[We-1].length-Ve;j.push(eu(f,de,be,ot,We,Ve,Ke,null,k))}K.push(Ve+ze-g)}}return oe(t,a,u,p,0),(M||k)(j,K,b)}class k0{constructor(){this.map=new WeakMap}setBuffer(t,a,u){let p=this.map.get(t);p||this.map.set(t,p=new Map),p.set(a,u)}getBuffer(t,a){let u=this.map.get(t);return u&&u.get(a)}set(t,a){t instanceof vi?this.setBuffer(t.context.buffer,t.index,a):t instanceof Zn&&this.map.set(t.tree,a)}get(t){return t instanceof vi?this.getBuffer(t.context.buffer,t.index):t instanceof Zn?this.map.get(t.tree):void 0}cursorSet(t,a){t.buffer?this.setBuffer(t.buffer.buffer,t.index,a):this.map.set(t.tree,a)}cursorGet(t){return t.buffer?this.getBuffer(t.buffer.buffer,t.index):this.map.get(t.tree)}}class fr{constructor(t,a,u,p,g=!1,b=!1){this.from=t,this.to=a,this.tree=u,this.offset=p,this.open=(g?1:0)|(b?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(t,a=[],u=!1){let p=[new fr(0,t.length,t,0,!1,u)];for(let g of a)g.to>t.length&&p.push(g);return p}static applyChanges(t,a,u=128){if(!a.length)return t;let p=[],g=1,b=t.length?t[0]:null;for(let M=0,k=0,R=0;;M++){let Z=M<a.length?a[M]:null,j=Z?Z.fromA:1e9;if(j-k>=u)for(;b&&b.from<j;){let K=b;if(k>=K.from||j<=K.to||R){let oe=Math.max(K.from,k)-R,de=Math.min(K.to,j)-R;K=oe>=de?null:new fr(oe,de,K.tree,K.offset+R,M>0,!!Z)}if(K&&p.push(K),b.to>j)break;b=g<t.length?t[g++]:null}if(!Z)break;k=Z.toA,R=Z.toA-Z.toB}return p}}class kh{startParse(t,a,u){return typeof t=="string"&&(t=new $0(t)),u=u?u.length?u.map(p=>new jl(p.from,p.to)):[new jl(0,0)]:[new jl(0,t.length)],this.createParse(t,a||[],u)}parse(t,a,u){let p=this.startParse(t,a,u);for(;;){let g=p.advance();if(g)return g}}}class $0{constructor(t){this.string=t}get length(){return this.string.length}chunk(t){return this.string.slice(t)}get lineChunks(){return!1}read(t,a){return this.string.slice(t,a)}}new Gt({perNode:!0});let D0=0;class ti{constructor(t,a,u,p){this.name=t,this.set=a,this.base=u,this.modified=p,this.id=D0++}toString(){let{name:t}=this;for(let a of this.modified)a.name&&(t=`${a.name}(${t})`);return t}static define(t,a){let u=typeof t=="string"?t:"?";if(t instanceof ti&&(a=t),a?.base)throw new Error("Can not derive from a modified tag");let p=new ti(u,[],null,[]);if(p.set.push(p),a)for(let g of a.set)p.set.push(g);return p}static defineModifier(t){let a=new aa(t);return u=>u.modified.indexOf(a)>-1?u:aa.get(u.base||u,u.modified.concat(a).sort((p,g)=>p.id-g.id))}}let E0=0;class aa{constructor(t){this.name=t,this.instances=[],this.id=E0++}static get(t,a){if(!a.length)return t;let u=a[0].instances.find(M=>M.base==t&&F0(a,M.modified));if(u)return u;let p=[],g=new ti(t.name,p,t,a);for(let M of a)M.instances.push(g);let b=T0(a);for(let M of t.set)if(!M.modified.length)for(let k of b)p.push(aa.get(M,k));return g}}function F0(f,t){return f.length==t.length&&f.every((a,u)=>a==t[u])}function T0(f){let t=[[]];for(let a=0;a<f.length;a++)for(let u=0,p=t.length;u<p;u++)t.push(t[u].concat(f[a]));return t.sort((a,u)=>u.length-a.length)}function $h(f){let t=Object.create(null);for(let a in f){let u=f[a];Array.isArray(u)||(u=[u]);for(let p of a.split(" "))if(p){let g=[],b=2,M=p;for(let j=0;;){if(M=="..."&&j>0&&j+3==p.length){b=1;break}let K=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(M);if(!K)throw new RangeError("Invalid path: "+p);if(g.push(K[0]=="*"?"":K[0][0]=='"'?JSON.parse(K[0]):K[0]),j+=K[0].length,j==p.length)break;let oe=p[j++];if(j==p.length&&oe=="!"){b=0;break}if(oe!="/")throw new RangeError("Invalid path: "+p);M=p.slice(j)}let k=g.length-1,R=g[k];if(!R)throw new RangeError("Invalid path: "+p);let Z=new Rs(u,b,k>0?g.slice(0,k):null);t[R]=Z.sort(t[R])}}return Dh.add(t)}const Dh=new Gt({combine(f,t){let a,u,p;for(;f||t;){if(!f||t&&f.depth>=t.depth?(p=t,t=t.next):(p=f,f=f.next),a&&a.mode==p.mode&&!p.context&&!a.context)continue;let g=new Rs(p.tags,p.mode,p.context);a?a.next=g:u=g,a=g}return u}});class Rs{constructor(t,a,u,p){this.tags=t,this.mode=a,this.context=u,this.next=p}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(t){return!t||t.depth<this.depth?(this.next=t,this):(t.next=this.sort(t.next),t)}get depth(){return this.context?this.context.length:0}}Rs.empty=new Rs([],2,null);function Eh(f,t){let a=Object.create(null);for(let g of f)if(!Array.isArray(g.tag))a[g.tag.id]=g.class;else for(let b of g.tag)a[b.id]=g.class;let{scope:u,all:p=null}=t||{};return{style:g=>{let b=p;for(let M of g)for(let k of M.set){let R=a[k.id];if(R){b=b?b+" "+R:R;break}}return b},scope:u}}function R0(f,t){let a=null;for(let u of f){let p=u.style(t);p&&(a=a?a+" "+p:p)}return a}function G0(f,t,a,u=0,p=f.length){let g=new L0(u,Array.isArray(t)?t:[t],a);g.highlightRange(f.cursor(),u,p,"",g.highlighters),g.flush(p)}class L0{constructor(t,a,u){this.at=t,this.highlighters=a,this.span=u,this.class=""}startSpan(t,a){a!=this.class&&(this.flush(t),t>this.at&&(this.at=t),this.class=a)}flush(t){t>this.at&&this.class&&this.span(this.at,t,this.class)}highlightRange(t,a,u,p,g){let{type:b,from:M,to:k}=t;if(M>=u||k<=a)return;b.isTop&&(g=this.highlighters.filter(oe=>!oe.scope||oe.scope(b)));let R=p,Z=Z0(t)||Rs.empty,j=R0(g,Z.tags);if(j&&(R&&(R+=" "),R+=j,Z.mode==1&&(p+=(p?" ":"")+j)),this.startSpan(Math.max(a,M),R),Z.opaque)return;let K=t.tree&&t.tree.prop(Gt.mounted);if(K&&K.overlay){let oe=t.node.enter(K.overlay[0].from+M,1),de=this.highlighters.filter(Se=>!Se.scope||Se.scope(K.tree.type)),be=t.firstChild();for(let Se=0,Ee=M;;Se++){let ze=Se<K.overlay.length?K.overlay[Se]:null,We=ze?ze.from+M:k,ot=Math.max(a,Ee),Ve=Math.min(u,We);if(ot<Ve&&be)for(;t.from<Ve&&(this.highlightRange(t,ot,Ve,p,g),this.startSpan(Math.min(Ve,t.to),R),!(t.to>=We||!t.nextSibling())););if(!ze||We>u)break;Ee=ze.to+M,Ee>a&&(this.highlightRange(oe.cursor(),Math.max(a,ze.from+M),Math.min(u,Ee),"",de),this.startSpan(Math.min(u,Ee),R))}be&&t.parent()}else if(t.firstChild()){K&&(p="");do if(!(t.to<=a)){if(t.from>=u)break;this.highlightRange(t,a,u,p,g),this.startSpan(Math.min(u,t.to),R)}while(t.nextSibling());t.parent()}}}function Z0(f){let t=f.type.prop(Dh);for(;t&&t.context&&!f.matchContext(t.context);)t=t.next;return t||null}const He=ti.define,la=He(),zi=He(),Fh=He(zi),Th=He(zi),Yi=He(),ua=He(Yi),tu=He(Yi),xi=He(),dr=He(xi),Ci=He(),Si=He(),nu=He(),Gs=He(nu),ca=He(),Ce={comment:la,lineComment:He(la),blockComment:He(la),docComment:He(la),name:zi,variableName:He(zi),typeName:Fh,tagName:He(Fh),propertyName:Th,attributeName:He(Th),className:He(zi),labelName:He(zi),namespace:He(zi),macroName:He(zi),literal:Yi,string:ua,docString:He(ua),character:He(ua),attributeValue:He(ua),number:tu,integer:He(tu),float:He(tu),bool:He(Yi),regexp:He(Yi),escape:He(Yi),color:He(Yi),url:He(Yi),keyword:Ci,self:He(Ci),null:He(Ci),atom:He(Ci),unit:He(Ci),modifier:He(Ci),operatorKeyword:He(Ci),controlKeyword:He(Ci),definitionKeyword:He(Ci),moduleKeyword:He(Ci),operator:Si,derefOperator:He(Si),arithmeticOperator:He(Si),logicOperator:He(Si),bitwiseOperator:He(Si),compareOperator:He(Si),updateOperator:He(Si),definitionOperator:He(Si),typeOperator:He(Si),controlOperator:He(Si),punctuation:nu,separator:He(nu),bracket:Gs,angleBracket:He(Gs),squareBracket:He(Gs),paren:He(Gs),brace:He(Gs),content:xi,heading:dr,heading1:He(dr),heading2:He(dr),heading3:He(dr),heading4:He(dr),heading5:He(dr),heading6:He(dr),contentSeparator:He(xi),list:He(xi),quote:He(xi),emphasis:He(xi),strong:He(xi),link:He(xi),monospace:He(xi),strikethrough:He(xi),inserted:He(),deleted:He(),changed:He(),invalid:He(),meta:ca,documentMeta:He(ca),annotation:He(ca),processingInstruction:He(ca),definition:ti.defineModifier("definition"),constant:ti.defineModifier("constant"),function:ti.defineModifier("function"),standard:ti.defineModifier("standard"),local:ti.defineModifier("local"),special:ti.defineModifier("special")};for(let f in Ce){let t=Ce[f];t instanceof ti&&(t.name=f)}Eh([{tag:Ce.link,class:"tok-link"},{tag:Ce.heading,class:"tok-heading"},{tag:Ce.emphasis,class:"tok-emphasis"},{tag:Ce.strong,class:"tok-strong"},{tag:Ce.keyword,class:"tok-keyword"},{tag:Ce.atom,class:"tok-atom"},{tag:Ce.bool,class:"tok-bool"},{tag:Ce.url,class:"tok-url"},{tag:Ce.labelName,class:"tok-labelName"},{tag:Ce.inserted,class:"tok-inserted"},{tag:Ce.deleted,class:"tok-deleted"},{tag:Ce.literal,class:"tok-literal"},{tag:Ce.string,class:"tok-string"},{tag:Ce.number,class:"tok-number"},{tag:[Ce.regexp,Ce.escape,Ce.special(Ce.string)],class:"tok-string2"},{tag:Ce.variableName,class:"tok-variableName"},{tag:Ce.local(Ce.variableName),class:"tok-variableName tok-local"},{tag:Ce.definition(Ce.variableName),class:"tok-variableName tok-definition"},{tag:Ce.special(Ce.variableName),class:"tok-variableName2"},{tag:Ce.definition(Ce.propertyName),class:"tok-propertyName tok-definition"},{tag:Ce.typeName,class:"tok-typeName"},{tag:Ce.namespace,class:"tok-namespace"},{tag:Ce.className,class:"tok-className"},{tag:Ce.macroName,class:"tok-macroName"},{tag:Ce.propertyName,class:"tok-propertyName"},{tag:Ce.operator,class:"tok-operator"},{tag:Ce.comment,class:"tok-comment"},{tag:Ce.meta,class:"tok-meta"},{tag:Ce.invalid,class:"tok-invalid"},{tag:Ce.punctuation,class:"tok-punctuation"}]);var iu;const Lr=new Gt;function Rh(f){return Ze.define({combine:f?t=>t.concat(f):void 0})}const ru=new Gt;class fi{constructor(t,a,u=[],p=""){this.data=t,this.name=p,Pe.prototype.hasOwnProperty("tree")||Object.defineProperty(Pe.prototype,"tree",{get(){return On(this)}}),this.parser=a,this.extension=[ji.of(this),Pe.languageData.of((g,b,M)=>{let k=Gh(g,b,M),R=k.type.prop(Lr);if(!R)return[];let Z=g.facet(R),j=k.type.prop(ru);if(j){let K=k.resolve(b-k.from,M);for(let oe of j)if(oe.test(K,g)){let de=g.facet(oe.facet);return oe.type=="replace"?de:de.concat(Z)}}return Z})].concat(u)}isActiveAt(t,a,u=-1){return Gh(t,a,u).type.prop(Lr)==this.data}findRegions(t){let a=t.facet(ji);if(a?.data==this.data)return[{from:0,to:t.doc.length}];if(!a||!a.allowsNesting)return[];let u=[],p=(g,b)=>{if(g.prop(Lr)==this.data){u.push({from:b,to:b+g.length});return}let M=g.prop(Gt.mounted);if(M){if(M.tree.prop(Lr)==this.data){if(M.overlay)for(let k of M.overlay)u.push({from:k.from+b,to:k.to+b});else u.push({from:b,to:b+g.length});return}else if(M.overlay){let k=u.length;if(p(M.tree,M.overlay[0].from+b),u.length>k)return}}for(let k=0;k<g.children.length;k++){let R=g.children[k];R instanceof pn&&p(R,g.positions[k]+b)}};return p(On(t),0),u}get allowsNesting(){return!0}}fi.setState=Be.define();function Gh(f,t,a){let u=f.facet(ji),p=On(f).topNode;if(!u||u.allowsNesting)for(let g=p;g;g=g.enter(t,a,yn.ExcludeBuffers))g.type.isTop&&(p=g);return p}class ha extends fi{constructor(t,a,u){super(t,a,[],u),this.parser=a}static define(t){let a=Rh(t.languageData);return new ha(a,t.parser.configure({props:[Lr.add(u=>u.isTop?a:void 0)]}),t.name)}configure(t,a){return new ha(this.data,this.parser.configure(t),a||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function On(f){let t=f.field(fi.state,!1);return t?t.tree:pn.empty}class N0{constructor(t){this.doc=t,this.cursorPos=0,this.string="",this.cursor=t.iter()}get length(){return this.doc.length}syncTo(t){return this.string=this.cursor.next(t-this.cursorPos).value,this.cursorPos=t+this.string.length,this.cursorPos-this.string.length}chunk(t){return this.syncTo(t),this.string}get lineChunks(){return!0}read(t,a){let u=this.cursorPos-this.string.length;return t<u||a>=this.cursorPos?this.doc.sliceString(t,a):this.string.slice(t-u,a-u)}}let Ls=null;class fa{constructor(t,a,u=[],p,g,b,M,k){this.parser=t,this.state=a,this.fragments=u,this.tree=p,this.treeLen=g,this.viewport=b,this.skipped=M,this.scheduleOn=k,this.parse=null,this.tempSkipped=[]}static create(t,a,u){return new fa(t,a,[],pn.empty,0,u,[],null)}startParse(){return this.parser.startParse(new N0(this.state.doc),this.fragments)}work(t,a){return a!=null&&a>=this.state.doc.length&&(a=void 0),this.tree!=pn.empty&&this.isDone(a??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var u;if(typeof t=="number"){let p=Date.now()+t;t=()=>Date.now()>p}for(this.parse||(this.parse=this.startParse()),a!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>a)&&a<this.state.doc.length&&this.parse.stopAt(a);;){let p=this.parse.advance();if(p)if(this.fragments=this.withoutTempSkipped(fr.addTree(p,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(u=this.parse.stoppedAt)!==null&&u!==void 0?u:this.state.doc.length,this.tree=p,this.parse=null,this.treeLen<(a??this.state.doc.length))this.parse=this.startParse();else return!0;if(t())return!1}})}takeTree(){let t,a;this.parse&&(t=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&this.parse.stopAt(t),this.withContext(()=>{for(;!(a=this.parse.advance()););}),this.treeLen=t,this.tree=a,this.fragments=this.withoutTempSkipped(fr.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(t){let a=Ls;Ls=this;try{return t()}finally{Ls=a}}withoutTempSkipped(t){for(let a;a=this.tempSkipped.pop();)t=Lh(t,a.from,a.to);return t}changes(t,a){let{fragments:u,tree:p,treeLen:g,viewport:b,skipped:M}=this;if(this.takeTree(),!t.empty){let k=[];if(t.iterChangedRanges((R,Z,j,K)=>k.push({fromA:R,toA:Z,fromB:j,toB:K})),u=fr.applyChanges(u,k),p=pn.empty,g=0,b={from:t.mapPos(b.from,-1),to:t.mapPos(b.to,1)},this.skipped.length){M=[];for(let R of this.skipped){let Z=t.mapPos(R.from,1),j=t.mapPos(R.to,-1);Z<j&&M.push({from:Z,to:j})}}}return new fa(this.parser,a,u,p,g,b,M,this.scheduleOn)}updateViewport(t){if(this.viewport.from==t.from&&this.viewport.to==t.to)return!1;this.viewport=t;let a=this.skipped.length;for(let u=0;u<this.skipped.length;u++){let{from:p,to:g}=this.skipped[u];p<t.to&&g>t.from&&(this.fragments=Lh(this.fragments,p,g),this.skipped.splice(u--,1))}return this.skipped.length>=a?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(t,a){this.skipped.push({from:t,to:a})}static getSkippingParser(t){return new class extends kh{createParse(a,u,p){let g=p[0].from,b=p[p.length-1].to;return{parsedPos:g,advance(){let k=Ls;if(k){for(let R of p)k.tempSkipped.push(R);t&&(k.scheduleOn=k.scheduleOn?Promise.all([k.scheduleOn,t]):t)}return this.parsedPos=b,new pn(Ln.none,[],[],b-g)},stoppedAt:null,stopAt(){}}}}}isDone(t){t=Math.min(t,this.state.doc.length);let a=this.fragments;return this.treeLen>=t&&a.length&&a[0].from==0&&a[0].to>=t}static get(){return Ls}}function Lh(f,t,a){return fr.applyChanges(f,[{fromA:t,toA:a,fromB:t,toB:a}])}class Zr{constructor(t){this.context=t,this.tree=t.tree}apply(t){if(!t.docChanged&&this.tree==this.context.tree)return this;let a=this.context.changes(t.changes,t.state),u=this.context.treeLen==t.startState.doc.length?void 0:Math.max(t.changes.mapPos(this.context.treeLen),a.viewport.to);return a.work(20,u)||a.takeTree(),new Zr(a)}static init(t){let a=Math.min(3e3,t.doc.length),u=fa.create(t.facet(ji).parser,t,{from:0,to:a});return u.work(20,a)||u.takeTree(),new Zr(u)}}fi.state=bt.define({create:Zr.init,update(f,t){for(let a of t.effects)if(a.is(fi.setState))return a.value;return t.startState.facet(ji)!=t.state.facet(ji)?Zr.init(t.state):f.apply(t)}});let Zh=f=>{let t=setTimeout(()=>f(),500);return()=>clearTimeout(t)};typeof requestIdleCallback<"u"&&(Zh=f=>{let t=-1,a=setTimeout(()=>{t=requestIdleCallback(f,{timeout:400})},100);return()=>t<0?clearTimeout(a):cancelIdleCallback(t)});const su=typeof navigator<"u"&&(!((iu=navigator.scheduling)===null||iu===void 0)&&iu.isInputPending)?()=>navigator.scheduling.isInputPending():null,B0=ln.fromClass(class{constructor(t){this.view=t,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(t){let a=this.view.state.field(fi.state).context;(a.updateViewport(t.view.viewport)||this.view.viewport.to>a.treeLen)&&this.scheduleWork(),(t.docChanged||t.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(a)}scheduleWork(){if(this.working)return;let{state:t}=this.view,a=t.field(fi.state);(a.tree!=a.context.tree||!a.context.isDone(t.doc.length))&&(this.working=Zh(this.work))}work(t){this.working=null;let a=Date.now();if(this.chunkEnd<a&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=a+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:u,viewport:{to:p}}=this.view,g=u.field(fi.state);if(g.tree==g.context.tree&&g.context.isDone(p+1e5))return;let b=Date.now()+Math.min(this.chunkBudget,100,t&&!su?Math.max(25,t.timeRemaining()-5):1e9),M=g.context.treeLen<p&&u.doc.length>p+1e3,k=g.context.work(()=>su&&su()||Date.now()>b,p+(M?0:1e5));this.chunkBudget-=Date.now()-a,(k||this.chunkBudget<=0)&&(g.context.takeTree(),this.view.dispatch({effects:fi.setState.of(new Zr(g.context))})),this.chunkBudget>0&&!(k&&!M)&&this.scheduleWork(),this.checkAsyncSchedule(g.context)}checkAsyncSchedule(t){t.scheduleOn&&(this.workScheduled++,t.scheduleOn.then(()=>this.scheduleWork()).catch(a=>gn(this.view.state,a)).then(()=>this.workScheduled--),t.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),ji=Ze.define({combine(f){return f.length?f[0]:null},enables:f=>[fi.state,B0,st.contentAttributes.compute([f],t=>{let a=t.facet(f);return a&&a.name?{"data-language":a.name}:{}})]});class Q0{constructor(t,a=[]){this.language=t,this.support=a,this.extension=[t,a]}}const X0=Ze.define(),Zs=Ze.define({combine:f=>{if(!f.length)return"  ";let t=f[0];if(!t||/\S/.test(t)||Array.from(t).some(a=>a!=t[0]))throw new Error("Invalid indent unit: "+JSON.stringify(f[0]));return t}});function pa(f){let t=f.facet(Zs);return t.charCodeAt(0)==9?f.tabSize*t.length:t.length}function Ns(f,t){let a="",u=f.tabSize,p=f.facet(Zs)[0];if(p=="	"){for(;t>=u;)a+="	",t-=u;p=" "}for(let g=0;g<t;g++)a+=p;return a}function ou(f,t){f instanceof Pe&&(f=new da(f));for(let u of f.state.facet(X0)){let p=u(f,t);if(p!==void 0)return p}let a=On(f.state);return a.length>=t?I0(f,a,t):null}class da{constructor(t,a={}){this.state=t,this.options=a,this.unit=pa(t)}lineAt(t,a=1){let u=this.state.doc.lineAt(t),{simulateBreak:p,simulateDoubleBreak:g}=this.options;return p!=null&&p>=u.from&&p<=u.to?g&&p==t?{text:"",from:t}:(a<0?p<t:p<=t)?{text:u.text.slice(p-u.from),from:p}:{text:u.text.slice(0,p-u.from),from:u.from}:u}textAfterPos(t,a=1){if(this.options.simulateDoubleBreak&&t==this.options.simulateBreak)return"";let{text:u,from:p}=this.lineAt(t,a);return u.slice(t-p,Math.min(u.length,t+100-p))}column(t,a=1){let{text:u,from:p}=this.lineAt(t,a),g=this.countColumn(u,t-p),b=this.options.overrideIndentation?this.options.overrideIndentation(p):-1;return b>-1&&(g+=b-this.countColumn(u,u.search(/\S|$/))),g}countColumn(t,a=t.length){return nr(t,this.state.tabSize,a)}lineIndent(t,a=1){let{text:u,from:p}=this.lineAt(t,a),g=this.options.overrideIndentation;if(g){let b=g(p);if(b>-1)return b}return this.countColumn(u,u.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Nh=new Gt;function I0(f,t,a){let u=t.resolveStack(a),p=t.resolveInner(a,-1).resolve(a,0).enterUnfinishedNodesBefore(a);if(p!=u.node){let g=[];for(let b=p;b&&!(b.from<u.node.from||b.to>u.node.to||b.from==u.node.from&&b.type==u.node.type);b=b.parent)g.push(b);for(let b=g.length-1;b>=0;b--)u={node:g[b],next:u}}return Bh(u,f,a)}function Bh(f,t,a){for(let u=f;u;u=u.next){let p=W0(u.node);if(p)return p(au.create(t,a,u))}return 0}function V0(f){return f.pos==f.options.simulateBreak&&f.options.simulateDoubleBreak}function W0(f){let t=f.type.prop(Nh);if(t)return t;let a=f.firstChild,u;if(a&&(u=a.type.prop(Gt.closedBy))){let p=f.lastChild,g=p&&u.indexOf(p.name)>-1;return b=>Qh(b,!0,1,void 0,g&&!V0(b)?p.from:void 0)}return f.parent==null?z0:null}function z0(){return 0}class au extends da{constructor(t,a,u){super(t.state,t.options),this.base=t,this.pos=a,this.context=u}get node(){return this.context.node}static create(t,a,u){return new au(t,a,u)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(t){let a=this.state.doc.lineAt(t.from);for(;;){let u=t.resolve(a.from);for(;u.parent&&u.parent.from==u.from;)u=u.parent;if(Y0(u,t))break;a=this.state.doc.lineAt(u.from)}return this.lineIndent(a.from)}continue(){return Bh(this.context.next,this.base,this.pos)}}function Y0(f,t){for(let a=t;a;a=a.parent)if(f==a)return!0;return!1}function j0(f){let t=f.node,a=t.childAfter(t.from),u=t.lastChild;if(!a)return null;let p=f.options.simulateBreak,g=f.state.doc.lineAt(a.from),b=p==null||p<=g.from?g.to:Math.min(g.to,p);for(let M=a.to;;){let k=t.childAfter(M);if(!k||k==u)return null;if(!k.type.isSkipped){if(k.from>=b)return null;let R=/^ */.exec(g.text.slice(a.to-g.from))[0].length;return{from:a.from,to:a.to+R}}M=k.to}}function U0({closing:f,align:t=!0,units:a=1}){return u=>Qh(u,t,a,f)}function Qh(f,t,a,u,p){let g=f.textAfter,b=g.match(/^\s*/)[0].length,M=u&&g.slice(b,b+u.length)==u||p==f.pos+b,k=t?j0(f):null;return k?M?f.column(k.from):f.column(k.to):f.baseIndent+(M?0:f.unit*a)}const q0=f=>f.baseIndent;function lu({except:f,units:t=1}={}){return a=>{let u=f&&f.test(a.textAfter);return a.baseIndent+(u?0:t*a.unit)}}const H0=200;function K0(){return Pe.transactionFilter.of(f=>{if(!f.docChanged||!f.isUserEvent("input.type")&&!f.isUserEvent("input.complete"))return f;let t=f.startState.languageDataAt("indentOnInput",f.startState.selection.main.head);if(!t.length)return f;let a=f.newDoc,{head:u}=f.newSelection.main,p=a.lineAt(u);if(u>p.from+H0)return f;let g=a.sliceString(p.from,u);if(!t.some(R=>R.test(g)))return f;let{state:b}=f,M=-1,k=[];for(let{head:R}of b.selection.ranges){let Z=b.doc.lineAt(R);if(Z.from==M)continue;M=Z.from;let j=ou(b,Z.from);if(j==null)continue;let K=/^\s*/.exec(Z.text)[0],oe=Ns(b,j);K!=oe&&k.push({from:Z.from,to:Z.from+K.length,insert:oe})}return k.length?[f,{changes:k,sequential:!0}]:f})}const J0=Ze.define(),Xh=new Gt;function e1(f){let t=f.firstChild,a=f.lastChild;return t&&t.to<a.from?{from:t.to,to:a.type.isError?f.to:a.from}:null}function t1(f,t,a){let u=On(f);if(u.length<a)return null;let p=u.resolveStack(a,1),g=null;for(let b=p;b;b=b.next){let M=b.node;if(M.to<=a||M.from>a)continue;if(g&&M.from<t)break;let k=M.type.prop(Xh);if(k&&(M.to<u.length-50||u.length==f.doc.length||!n1(M))){let R=k(M,f);R&&R.from<=a&&R.from>=t&&R.to>a&&(g=R)}}return g}function n1(f){let t=f.lastChild;return t&&t.to==f.to&&t.type.isError}function ma(f,t,a){for(let u of f.facet(J0)){let p=u(f,t,a);if(p)return p}return t1(f,t,a)}function Ih(f,t){let a=t.mapPos(f.from,1),u=t.mapPos(f.to,-1);return a>=u?void 0:{from:a,to:u}}const ga=Be.define({map:Ih}),Bs=Be.define({map:Ih});function Vh(f){let t=[];for(let{head:a}of f.state.selection.ranges)t.some(u=>u.from<=a&&u.to>=a)||t.push(f.lineBlockAt(a));return t}const mr=bt.define({create(){return _t.none},update(f,t){t.isUserEvent("delete")&&t.changes.iterChangedRanges((a,u)=>f=Wh(f,a,u)),f=f.map(t.changes);for(let a of t.effects)if(a.is(ga)&&!i1(f,a.value.from,a.value.to)){let{preparePlaceholder:u}=t.state.facet(jh),p=u?_t.replace({widget:new u1(u(t.state,a.value))}):Hh;f=f.update({add:[p.range(a.value.from,a.value.to)]})}else a.is(Bs)&&(f=f.update({filter:(u,p)=>a.value.from!=u||a.value.to!=p,filterFrom:a.value.from,filterTo:a.value.to}));return t.selection&&(f=Wh(f,t.selection.main.head)),f},provide:f=>st.decorations.from(f),toJSON(f,t){let a=[];return f.between(0,t.doc.length,(u,p)=>{a.push(u,p)}),a},fromJSON(f){if(!Array.isArray(f)||f.length%2)throw new RangeError("Invalid JSON for fold state");let t=[];for(let a=0;a<f.length;){let u=f[a++],p=f[a++];if(typeof u!="number"||typeof p!="number")throw new RangeError("Invalid JSON for fold state");t.push(Hh.range(u,p))}return _t.set(t,!0)}});function Wh(f,t,a=t){let u=!1;return f.between(t,a,(p,g)=>{p<a&&g>t&&(u=!0)}),u?f.update({filterFrom:t,filterTo:a,filter:(p,g)=>p>=a||g<=t}):f}function _a(f,t,a){var u;let p=null;return(u=f.field(mr,!1))===null||u===void 0||u.between(t,a,(g,b)=>{(!p||p.from>g)&&(p={from:g,to:b})}),p}function i1(f,t,a){let u=!1;return f.between(t,t,(p,g)=>{p==t&&g==a&&(u=!0)}),u}function zh(f,t){return f.field(mr,!1)?t:t.concat(Be.appendConfig.of(Uh()))}const r1=f=>{for(let t of Vh(f)){let a=ma(f.state,t.from,t.to);if(a)return f.dispatch({effects:zh(f.state,[ga.of(a),Yh(f,a)])}),!0}return!1},s1=f=>{if(!f.state.field(mr,!1))return!1;let t=[];for(let a of Vh(f)){let u=_a(f.state,a.from,a.to);u&&t.push(Bs.of(u),Yh(f,u,!1))}return t.length&&f.dispatch({effects:t}),t.length>0};function Yh(f,t,a=!0){let u=f.state.doc.lineAt(t.from).number,p=f.state.doc.lineAt(t.to).number;return st.announce.of(`${f.state.phrase(a?"Folded lines":"Unfolded lines")} ${u} ${f.state.phrase("to")} ${p}.`)}const o1=f=>{let{state:t}=f,a=[];for(let u=0;u<t.doc.length;){let p=f.lineBlockAt(u),g=ma(t,p.from,p.to);g&&a.push(ga.of(g)),u=(g?f.lineBlockAt(g.to):p).to+1}return a.length&&f.dispatch({effects:zh(f.state,a)}),!!a.length},a1=f=>{let t=f.state.field(mr,!1);if(!t||!t.size)return!1;let a=[];return t.between(0,f.state.doc.length,(u,p)=>{a.push(Bs.of({from:u,to:p}))}),f.dispatch({effects:a}),!0},l1={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},jh=Ze.define({combine(f){return $e(f,l1)}});function Uh(f){return[mr,f1]}function qh(f,t){let{state:a}=f,u=a.facet(jh),p=b=>{let M=f.lineBlockAt(f.posAtDOM(b.target)),k=_a(f.state,M.from,M.to);k&&f.dispatch({effects:Bs.of(k)}),b.preventDefault()};if(u.placeholderDOM)return u.placeholderDOM(f,p,t);let g=document.createElement("span");return g.textContent=u.placeholderText,g.setAttribute("aria-label",a.phrase("folded code")),g.title=a.phrase("unfold"),g.className="cm-foldPlaceholder",g.onclick=p,g}const Hh=_t.replace({widget:new class extends Vn{toDOM(f){return qh(f,null)}}});class u1 extends Vn{constructor(t){super(),this.value=t}eq(t){return this.value==t.value}toDOM(t){return qh(t,this.value)}}const c1={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class uu extends Gi{constructor(t,a){super(),this.config=t,this.open=a}eq(t){return this.config==t.config&&this.open==t.open}toDOM(t){if(this.config.markerDOM)return this.config.markerDOM(this.open);let a=document.createElement("span");return a.textContent=this.open?this.config.openText:this.config.closedText,a.title=t.state.phrase(this.open?"Fold line":"Unfold line"),a}}function h1(f={}){let t={...c1,...f},a=new uu(t,!0),u=new uu(t,!1),p=ln.fromClass(class{constructor(b){this.from=b.viewport.from,this.markers=this.buildMarkers(b)}update(b){(b.docChanged||b.viewportChanged||b.startState.facet(ji)!=b.state.facet(ji)||b.startState.field(mr,!1)!=b.state.field(mr,!1)||On(b.startState)!=On(b.state)||t.foldingChanged(b))&&(this.markers=this.buildMarkers(b.view))}buildMarkers(b){let M=new Xn;for(let k of b.viewportLineBlocks){let R=_a(b.state,k.from,k.to)?u:ma(b.state,k.from,k.to)?a:null;R&&M.add(k.from,k.from,R)}return M.finish()}}),{domEventHandlers:g}=t;return[p,f0({class:"cm-foldGutter",markers(b){var M;return((M=b.plugin(p))===null||M===void 0?void 0:M.markers)||vt.empty},initialSpacer(){return new uu(t,!1)},domEventHandlers:{...g,click:(b,M,k)=>{if(g.click&&g.click(b,M,k))return!0;let R=_a(b.state,M.from,M.to);if(R)return b.dispatch({effects:Bs.of(R)}),!0;let Z=ma(b.state,M.from,M.to);return Z?(b.dispatch({effects:ga.of(Z)}),!0):!1}}}),Uh()]}const f1=st.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class ya{constructor(t,a){this.specs=t;let u;function p(M){let k=gi.newName();return(u||(u=Object.create(null)))["."+k]=M,k}const g=typeof a.all=="string"?a.all:a.all?p(a.all):void 0,b=a.scope;this.scope=b instanceof fi?M=>M.prop(Lr)==b.data:b?M=>M==b:void 0,this.style=Eh(t.map(M=>({tag:M.tag,class:M.class||p(Object.assign({},M,{tag:null}))})),{all:g}).style,this.module=u?new gi(u):null,this.themeType=a.themeType}static define(t,a){return new ya(t,a||{})}}const cu=Ze.define(),p1=Ze.define({combine(f){return f.length?[f[0]]:null}});function hu(f){let t=f.facet(cu);return t.length?t:f.facet(p1)}function d1(f,t){let a=[g1],u;return f instanceof ya&&(f.module&&a.push(st.styleModule.of(f.module)),u=f.themeType),u?a.push(cu.computeN([st.darkTheme],p=>p.facet(st.darkTheme)==(u=="dark")?[f]:[])):a.push(cu.of(f)),a}class m1{constructor(t){this.markCache=Object.create(null),this.tree=On(t.state),this.decorations=this.buildDeco(t,hu(t.state)),this.decoratedTo=t.viewport.to}update(t){let a=On(t.state),u=hu(t.state),p=u!=hu(t.startState),{viewport:g}=t.view,b=t.changes.mapPos(this.decoratedTo,1);a.length<g.to&&!p&&a.type==this.tree.type&&b>=g.to?(this.decorations=this.decorations.map(t.changes),this.decoratedTo=b):(a!=this.tree||t.viewportChanged||p)&&(this.tree=a,this.decorations=this.buildDeco(t.view,u),this.decoratedTo=g.to)}buildDeco(t,a){if(!a||!this.tree.length)return _t.none;let u=new Xn;for(let{from:p,to:g}of t.visibleRanges)G0(this.tree,a,(b,M,k)=>{u.add(b,M,this.markCache[k]||(this.markCache[k]=_t.mark({class:k})))},p,g);return u.finish()}}const g1=rn.high(ln.fromClass(m1,{decorations:f=>f.decorations})),_1=st.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Kh=1e4,Jh="()[]{}",ef=Ze.define({combine(f){return $e(f,{afterCursor:!0,brackets:Jh,maxScanDistance:Kh,renderMatch:b1})}}),y1=_t.mark({class:"cm-matchingBracket"}),O1=_t.mark({class:"cm-nonmatchingBracket"});function b1(f){let t=[],a=f.matched?y1:O1;return t.push(a.range(f.start.from,f.start.to)),f.end&&t.push(a.range(f.end.from,f.end.to)),t}const A1=[bt.define({create(){return _t.none},update(f,t){if(!t.docChanged&&!t.selection)return f;let a=[],u=t.state.facet(ef);for(let p of t.state.selection.ranges){if(!p.empty)continue;let g=Pi(t.state,p.head,-1,u)||p.head>0&&Pi(t.state,p.head-1,1,u)||u.afterCursor&&(Pi(t.state,p.head,1,u)||p.head<t.state.doc.length&&Pi(t.state,p.head+1,-1,u));g&&(a=a.concat(u.renderMatch(g,t.state)))}return _t.set(a,!0)},provide:f=>st.decorations.from(f)}),_1];function v1(f={}){return[ef.of(f),A1]}const x1=new Gt;function fu(f,t,a){let u=f.prop(t<0?Gt.openedBy:Gt.closedBy);if(u)return u;if(f.name.length==1){let p=a.indexOf(f.name);if(p>-1&&p%2==(t<0?1:0))return[a[p+t]]}return null}function pu(f){let t=f.type.prop(x1);return t?t(f.node):f}function Pi(f,t,a,u={}){let p=u.maxScanDistance||Kh,g=u.brackets||Jh,b=On(f),M=b.resolveInner(t,a);for(let k=M;k;k=k.parent){let R=fu(k.type,a,g);if(R&&k.from<k.to){let Z=pu(k);if(Z&&(a>0?t>=Z.from&&t<Z.to:t>Z.from&&t<=Z.to))return C1(f,t,a,k,Z,R,g)}}return S1(f,t,a,b,M.type,p,g)}function C1(f,t,a,u,p,g,b){let M=u.parent,k={from:p.from,to:p.to},R=0,Z=M?.cursor();if(Z&&(a<0?Z.childBefore(u.from):Z.childAfter(u.to)))do if(a<0?Z.to<=u.from:Z.from>=u.to){if(R==0&&g.indexOf(Z.type.name)>-1&&Z.from<Z.to){let j=pu(Z);return{start:k,end:j?{from:j.from,to:j.to}:void 0,matched:!0}}else if(fu(Z.type,a,b))R++;else if(fu(Z.type,-a,b)){if(R==0){let j=pu(Z);return{start:k,end:j&&j.from<j.to?{from:j.from,to:j.to}:void 0,matched:!1}}R--}}while(a<0?Z.prevSibling():Z.nextSibling());return{start:k,matched:!1}}function S1(f,t,a,u,p,g,b){let M=a<0?f.sliceDoc(t-1,t):f.sliceDoc(t,t+1),k=b.indexOf(M);if(k<0||k%2==0!=a>0)return null;let R={from:a<0?t-1:t,to:a>0?t+1:t},Z=f.doc.iterRange(t,a>0?f.doc.length:0),j=0;for(let K=0;!Z.next().done&&K<=g;){let oe=Z.value;a<0&&(K+=oe.length);let de=t+K*a;for(let be=a>0?0:oe.length-1,Se=a>0?oe.length:-1;be!=Se;be+=a){let Ee=b.indexOf(oe[be]);if(!(Ee<0||u.resolveInner(de+be,1).type!=p))if(Ee%2==0==a>0)j++;else{if(j==1)return{start:R,end:{from:de+be,to:de+be+1},matched:Ee>>1==k>>1};j--}}a>0&&(K+=oe.length)}return Z.done?{start:R,matched:!1}:null}const P1=Object.create(null),tf=[Ln.none],nf=[],rf=Object.create(null),M1=Object.create(null);for(let[f,t]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])M1[f]=w1(P1,t);function du(f,t){nf.indexOf(f)>-1||(nf.push(f),console.warn(t))}function w1(f,t){let a=[];for(let M of t.split(" ")){let k=[];for(let R of M.split(".")){let Z=f[R]||Ce[R];Z?typeof Z=="function"?k.length?k=k.map(Z):du(R,`Modifier ${R} used at start of tag`):k.length?du(R,`Tag ${R} used as modifier`):k=Array.isArray(Z)?Z:[Z]:du(R,`Unknown highlighting tag ${R}`)}for(let R of k)a.push(R)}if(!a.length)return 0;let u=t.replace(/ /g,"_"),p=u+" "+a.map(M=>M.id),g=rf[p];if(g)return g.id;let b=rf[p]=Ln.define({id:tf.length,name:u,props:[$h({[u]:a})]});return tf.push(b),b.id}Yt.RTL,Yt.LTR;const sf=f=>{let{state:t}=f,a=t.doc.lineAt(t.selection.main.from),u=mu(f.state,a.from);return u.line?k1(f):u.block?E1(f):!1};function Qs(f,t){return({state:a,dispatch:u})=>{if(a.readOnly)return!1;let p=f(t,a);return p?(u(a.update(p)),!0):!1}}const k1=Qs(gu,0),$1=Qs(gu,1),D1=Qs(gu,2),of=Qs(af,0),E1=Qs((f,t)=>af(f,t,T1(t)),0);function mu(f,t){let a=f.languageDataAt("commentTokens",t,1);return a.length?a[0]:{}}const Xs=50;function F1(f,{open:t,close:a},u,p){let g=f.sliceDoc(u-Xs,u),b=f.sliceDoc(p,p+Xs),M=/\s*$/.exec(g)[0].length,k=/^\s*/.exec(b)[0].length,R=g.length-M;if(g.slice(R-t.length,R)==t&&b.slice(k,k+a.length)==a)return{open:{pos:u-M,margin:M&&1},close:{pos:p+k,margin:k&&1}};let Z,j;p-u<=2*Xs?Z=j=f.sliceDoc(u,p):(Z=f.sliceDoc(u,u+Xs),j=f.sliceDoc(p-Xs,p));let K=/^\s*/.exec(Z)[0].length,oe=/\s*$/.exec(j)[0].length,de=j.length-oe-a.length;return Z.slice(K,K+t.length)==t&&j.slice(de,de+a.length)==a?{open:{pos:u+K+t.length,margin:/\s/.test(Z.charAt(K+t.length))?1:0},close:{pos:p-oe-a.length,margin:/\s/.test(j.charAt(de-1))?1:0}}:null}function T1(f){let t=[];for(let a of f.selection.ranges){let u=f.doc.lineAt(a.from),p=a.to<=u.to?u:f.doc.lineAt(a.to);p.from>u.from&&p.from==a.to&&(p=a.to==u.to+1?u:f.doc.lineAt(a.to-1));let g=t.length-1;g>=0&&t[g].to>u.from?t[g].to=p.to:t.push({from:u.from+/^\s*/.exec(u.text)[0].length,to:p.to})}return t}function af(f,t,a=t.selection.ranges){let u=a.map(g=>mu(t,g.from).block);if(!u.every(g=>g))return null;let p=a.map((g,b)=>F1(t,u[b],g.from,g.to));if(f!=2&&!p.every(g=>g))return{changes:t.changes(a.map((g,b)=>p[b]?[]:[{from:g.from,insert:u[b].open+" "},{from:g.to,insert:" "+u[b].close}]))};if(f!=1&&p.some(g=>g)){let g=[];for(let b=0,M;b<p.length;b++)if(M=p[b]){let k=u[b],{open:R,close:Z}=M;g.push({from:R.pos-k.open.length,to:R.pos+R.margin},{from:Z.pos-Z.margin,to:Z.pos+k.close.length})}return{changes:g}}return null}function gu(f,t,a=t.selection.ranges){let u=[],p=-1;for(let{from:g,to:b}of a){let M=u.length,k=1e9,R=mu(t,g).line;if(R){for(let Z=g;Z<=b;){let j=t.doc.lineAt(Z);if(j.from>p&&(g==b||b>j.from)){p=j.from;let K=/^\s*/.exec(j.text)[0].length,oe=K==j.length,de=j.text.slice(K,K+R.length)==R?K:-1;K<j.text.length&&K<k&&(k=K),u.push({line:j,comment:de,token:R,indent:K,empty:oe,single:!1})}Z=j.to+1}if(k<1e9)for(let Z=M;Z<u.length;Z++)u[Z].indent<u[Z].line.text.length&&(u[Z].indent=k);u.length==M+1&&(u[M].single=!0)}}if(f!=2&&u.some(g=>g.comment<0&&(!g.empty||g.single))){let g=[];for(let{line:M,token:k,indent:R,empty:Z,single:j}of u)(j||!Z)&&g.push({from:M.from+R,insert:k+" "});let b=t.changes(g);return{changes:b,selection:t.selection.map(b,1)}}else if(f!=1&&u.some(g=>g.comment>=0)){let g=[];for(let{line:b,comment:M,token:k}of u)if(M>=0){let R=b.from+M,Z=R+k.length;b.text[Z-b.from]==" "&&Z++,g.push({from:R,to:Z})}return{changes:g}}return null}const _u=Pt.define(),R1=Pt.define(),G1=Ze.define(),lf=Ze.define({combine(f){return $e(f,{minDepth:100,newGroupDelay:500,joinToEvent:(t,a)=>a},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(t,a)=>(u,p)=>t(u,p)||a(u,p)})}}),uf=bt.define({create(){return Mi.empty},update(f,t){let a=t.state.facet(lf),u=t.annotation(_u);if(u){let k=Nn.fromTransaction(t,u.selection),R=u.side,Z=R==0?f.undone:f.done;return k?Z=ba(Z,Z.length,a.minDepth,k):Z=ff(Z,t.startState.selection),new Mi(R==0?u.rest:Z,R==0?Z:u.rest)}let p=t.annotation(R1);if((p=="full"||p=="before")&&(f=f.isolate()),t.annotation(Ft.addToHistory)===!1)return t.changes.empty?f:f.addMapping(t.changes.desc);let g=Nn.fromTransaction(t),b=t.annotation(Ft.time),M=t.annotation(Ft.userEvent);return g?f=f.addChanges(g,b,M,a,t):t.selection&&(f=f.addSelection(t.startState.selection,b,M,a.newGroupDelay)),(p=="full"||p=="after")&&(f=f.isolate()),f},toJSON(f){return{done:f.done.map(t=>t.toJSON()),undone:f.undone.map(t=>t.toJSON())}},fromJSON(f){return new Mi(f.done.map(Nn.fromJSON),f.undone.map(Nn.fromJSON))}});function L1(f={}){return[uf,lf.of(f),st.domEventHandlers({beforeinput(t,a){let u=t.inputType=="historyUndo"?yu:t.inputType=="historyRedo"?Is:null;return u?(t.preventDefault(),u(a)):!1}})]}function Oa(f,t){return function({state:a,dispatch:u}){if(!t&&a.readOnly)return!1;let p=a.field(uf,!1);if(!p)return!1;let g=p.pop(f,a,t);return g?(u(g),!0):!1}}const yu=Oa(0,!1),Is=Oa(1,!1),cf=Oa(0,!0),Z1=Oa(1,!0);class Nn{constructor(t,a,u,p,g){this.changes=t,this.effects=a,this.mapped=u,this.startSelection=p,this.selectionsAfter=g}setSelAfter(t){return new Nn(this.changes,this.effects,this.mapped,this.startSelection,t)}toJSON(){var t,a,u;return{changes:(t=this.changes)===null||t===void 0?void 0:t.toJSON(),mapped:(a=this.mapped)===null||a===void 0?void 0:a.toJSON(),startSelection:(u=this.startSelection)===null||u===void 0?void 0:u.toJSON(),selectionsAfter:this.selectionsAfter.map(p=>p.toJSON())}}static fromJSON(t){return new Nn(t.changes&&je.fromJSON(t.changes),[],t.mapped&&Je.fromJSON(t.mapped),t.startSelection&&we.fromJSON(t.startSelection),t.selectionsAfter.map(we.fromJSON))}static fromTransaction(t,a){let u=ni;for(let p of t.startState.facet(G1)){let g=p(t);g.length&&(u=u.concat(g))}return!u.length&&t.changes.empty?null:new Nn(t.changes.invert(t.startState.doc),u,void 0,a||t.startState.selection,ni)}static selection(t){return new Nn(void 0,ni,void 0,void 0,t)}}function ba(f,t,a,u){let p=t+1>a+20?t-a-1:0,g=f.slice(p,t);return g.push(u),g}function N1(f,t){let a=[],u=!1;return f.iterChangedRanges((p,g)=>a.push(p,g)),t.iterChangedRanges((p,g,b,M)=>{for(let k=0;k<a.length;){let R=a[k++],Z=a[k++];M>=R&&b<=Z&&(u=!0)}}),u}function B1(f,t){return f.ranges.length==t.ranges.length&&f.ranges.filter((a,u)=>a.empty!=t.ranges[u].empty).length===0}function hf(f,t){return f.length?t.length?f.concat(t):f:t}const ni=[],Q1=200;function ff(f,t){if(f.length){let a=f[f.length-1],u=a.selectionsAfter.slice(Math.max(0,a.selectionsAfter.length-Q1));return u.length&&u[u.length-1].eq(t)?f:(u.push(t),ba(f,f.length-1,1e9,a.setSelAfter(u)))}else return[Nn.selection([t])]}function X1(f){let t=f[f.length-1],a=f.slice();return a[f.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),a}function Ou(f,t){if(!f.length)return f;let a=f.length,u=ni;for(;a;){let p=I1(f[a-1],t,u);if(p.changes&&!p.changes.empty||p.effects.length){let g=f.slice(0,a);return g[a-1]=p,g}else t=p.mapped,a--,u=p.selectionsAfter}return u.length?[Nn.selection(u)]:ni}function I1(f,t,a){let u=hf(f.selectionsAfter.length?f.selectionsAfter.map(M=>M.map(t)):ni,a);if(!f.changes)return Nn.selection(u);let p=f.changes.map(t),g=t.mapDesc(f.changes,!0),b=f.mapped?f.mapped.composeDesc(g):g;return new Nn(p,Be.mapEffects(f.effects,t),b,f.startSelection.map(g),u)}const V1=/^(input\.type|delete)($|\.)/;class Mi{constructor(t,a,u=0,p=void 0){this.done=t,this.undone=a,this.prevTime=u,this.prevUserEvent=p}isolate(){return this.prevTime?new Mi(this.done,this.undone):this}addChanges(t,a,u,p,g){let b=this.done,M=b[b.length-1];return M&&M.changes&&!M.changes.empty&&t.changes&&(!u||V1.test(u))&&(!M.selectionsAfter.length&&a-this.prevTime<p.newGroupDelay&&p.joinToEvent(g,N1(M.changes,t.changes))||u=="input.type.compose")?b=ba(b,b.length-1,p.minDepth,new Nn(t.changes.compose(M.changes),hf(Be.mapEffects(t.effects,M.changes),M.effects),M.mapped,M.startSelection,ni)):b=ba(b,b.length,p.minDepth,t),new Mi(b,ni,a,u)}addSelection(t,a,u,p){let g=this.done.length?this.done[this.done.length-1].selectionsAfter:ni;return g.length>0&&a-this.prevTime<p&&u==this.prevUserEvent&&u&&/^select($|\.)/.test(u)&&B1(g[g.length-1],t)?this:new Mi(ff(this.done,t),this.undone,a,u)}addMapping(t){return new Mi(Ou(this.done,t),Ou(this.undone,t),this.prevTime,this.prevUserEvent)}pop(t,a,u){let p=t==0?this.done:this.undone;if(p.length==0)return null;let g=p[p.length-1],b=g.selectionsAfter[0]||a.selection;if(u&&g.selectionsAfter.length)return a.update({selection:g.selectionsAfter[g.selectionsAfter.length-1],annotations:_u.of({side:t,rest:X1(p),selection:b}),userEvent:t==0?"select.undo":"select.redo",scrollIntoView:!0});if(g.changes){let M=p.length==1?ni:p.slice(0,p.length-1);return g.mapped&&(M=Ou(M,g.mapped)),a.update({changes:g.changes,selection:g.startSelection,effects:g.effects,annotations:_u.of({side:t,rest:M,selection:b}),filter:!1,userEvent:t==0?"undo":"redo",scrollIntoView:!0})}else return null}}Mi.empty=new Mi(ni,ni);const W1=[{key:"Mod-z",run:yu,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Is,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Is,preventDefault:!0},{key:"Mod-u",run:cf,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:Z1,preventDefault:!0}];function Nr(f,t){return we.create(f.ranges.map(t),f.mainIndex)}function pi(f,t){return f.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function di({state:f,dispatch:t},a){let u=Nr(f.selection,a);return u.eq(f.selection,!0)?!1:(t(pi(f,u)),!0)}function Aa(f,t){return we.cursor(t?f.to:f.from)}function pf(f,t){return di(f,a=>a.empty?f.moveByChar(a,t):Aa(a,t))}function kn(f){return f.textDirectionAt(f.state.selection.main.head)==Yt.LTR}const va=f=>pf(f,!kn(f)),xa=f=>pf(f,kn(f));function df(f,t){return di(f,a=>a.empty?f.moveByGroup(a,t):Aa(a,t))}const mf=f=>df(f,!kn(f)),gf=f=>df(f,kn(f));function z1(f,t,a){if(t.type.prop(a))return!0;let u=t.to-t.from;return u&&(u>2||/[^\s,.;:]/.test(f.sliceDoc(t.from,t.to)))||t.firstChild}function Ca(f,t,a){let u=On(f).resolveInner(t.head),p=a?Gt.closedBy:Gt.openedBy;for(let k=t.head;;){let R=a?u.childAfter(k):u.childBefore(k);if(!R)break;z1(f,R,p)?u=R:k=a?R.to:R.from}let g=u.type.prop(p),b,M;return g&&(b=a?Pi(f,u.from,1):Pi(f,u.to,-1))&&b.matched?M=a?b.end.to:b.end.from:M=a?u.to:u.from,we.cursor(M,a?-1:1)}const Y1=f=>di(f,t=>Ca(f.state,t,!kn(f))),j1=f=>di(f,t=>Ca(f.state,t,kn(f)));function _f(f,t){return di(f,a=>{if(!a.empty)return Aa(a,t);let u=f.moveVertically(a,t);return u.head!=a.head?u:f.moveToLineBoundary(a,t)})}const Sa=f=>_f(f,!1),Pa=f=>_f(f,!0);function yf(f){let t=f.scrollDOM.clientHeight<f.scrollDOM.scrollHeight-2,a=0,u=0,p;if(t){for(let g of f.state.facet(st.scrollMargins)){let b=g(f);b?.top&&(a=Math.max(b?.top,a)),b?.bottom&&(u=Math.max(b?.bottom,u))}p=f.scrollDOM.clientHeight-a-u}else p=(f.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:a,marginBottom:u,selfScroll:t,height:Math.max(f.defaultLineHeight,p-5)}}function Of(f,t){let a=yf(f),{state:u}=f,p=Nr(u.selection,b=>b.empty?f.moveVertically(b,t,a.height):Aa(b,t));if(p.eq(u.selection))return!1;let g;if(a.selfScroll){let b=f.coordsAtPos(u.selection.main.head),M=f.scrollDOM.getBoundingClientRect(),k=M.top+a.marginTop,R=M.bottom-a.marginBottom;b&&b.top>k&&b.bottom<R&&(g=st.scrollIntoView(p.main.head,{y:"start",yMargin:b.top-k}))}return f.dispatch(pi(u,p),{effects:g}),!0}const Vs=f=>Of(f,!1),Br=f=>Of(f,!0);function Ui(f,t,a){let u=f.lineBlockAt(t.head),p=f.moveToLineBoundary(t,a);if(p.head==t.head&&p.head!=(a?u.to:u.from)&&(p=f.moveToLineBoundary(t,a,!1)),!a&&p.head==u.from&&u.length){let g=/^\s*/.exec(f.state.sliceDoc(u.from,Math.min(u.from+100,u.to)))[0].length;g&&t.head!=u.from+g&&(p=we.cursor(u.from+g))}return p}const bu=f=>di(f,t=>Ui(f,t,!0)),Au=f=>di(f,t=>Ui(f,t,!1)),U1=f=>di(f,t=>Ui(f,t,!kn(f))),q1=f=>di(f,t=>Ui(f,t,kn(f))),bf=f=>di(f,t=>we.cursor(f.lineBlockAt(t.head).from,1)),Af=f=>di(f,t=>we.cursor(f.lineBlockAt(t.head).to,-1));function H1(f,t,a){let u=!1,p=Nr(f.selection,g=>{let b=Pi(f,g.head,-1)||Pi(f,g.head,1)||g.head>0&&Pi(f,g.head-1,1)||g.head<f.doc.length&&Pi(f,g.head+1,-1);if(!b||!b.end)return g;u=!0;let M=b.start.from==g.head?b.end.to:b.end.from;return we.cursor(M)});return u?(t(pi(f,p)),!0):!1}const vf=({state:f,dispatch:t})=>H1(f,t);function ii(f,t){let a=Nr(f.state.selection,u=>{let p=t(u);return we.range(u.anchor,p.head,p.goalColumn,p.bidiLevel||void 0)});return a.eq(f.state.selection)?!1:(f.dispatch(pi(f.state,a)),!0)}function xf(f,t){return ii(f,a=>f.moveByChar(a,t))}const Ma=f=>xf(f,!kn(f)),wa=f=>xf(f,kn(f));function Cf(f,t){return ii(f,a=>f.moveByGroup(a,t))}const Sf=f=>Cf(f,!kn(f)),Pf=f=>Cf(f,kn(f)),K1=f=>ii(f,t=>Ca(f.state,t,!kn(f))),J1=f=>ii(f,t=>Ca(f.state,t,kn(f)));function Mf(f,t){return ii(f,a=>f.moveVertically(a,t))}const ka=f=>Mf(f,!1),$a=f=>Mf(f,!0);function wf(f,t){return ii(f,a=>f.moveVertically(a,t,yf(f).height))}const Da=f=>wf(f,!1),Ea=f=>wf(f,!0),vu=f=>ii(f,t=>Ui(f,t,!0)),xu=f=>ii(f,t=>Ui(f,t,!1)),eg=f=>ii(f,t=>Ui(f,t,!kn(f))),tg=f=>ii(f,t=>Ui(f,t,kn(f))),kf=f=>ii(f,t=>we.cursor(f.lineBlockAt(t.head).from)),$f=f=>ii(f,t=>we.cursor(f.lineBlockAt(t.head).to)),Fa=({state:f,dispatch:t})=>(t(pi(f,{anchor:0})),!0),Ta=({state:f,dispatch:t})=>(t(pi(f,{anchor:f.doc.length})),!0),Ra=({state:f,dispatch:t})=>(t(pi(f,{anchor:f.selection.main.anchor,head:0})),!0),Ga=({state:f,dispatch:t})=>(t(pi(f,{anchor:f.selection.main.anchor,head:f.doc.length})),!0),Df=({state:f,dispatch:t})=>(t(f.update({selection:{anchor:0,head:f.doc.length},userEvent:"select"})),!0),Ef=({state:f,dispatch:t})=>{let a=Ba(f).map(({from:u,to:p})=>we.range(u,Math.min(p+1,f.doc.length)));return t(f.update({selection:we.create(a),userEvent:"select"})),!0},ng=({state:f,dispatch:t})=>{let a=Nr(f.selection,u=>{let p=On(f),g=p.resolveStack(u.from,1);if(u.empty){let b=p.resolveStack(u.from,-1);b.node.from>=g.node.from&&b.node.to<=g.node.to&&(g=b)}for(let b=g;b;b=b.next){let{node:M}=b;if((M.from<u.from&&M.to>=u.to||M.to>u.to&&M.from<=u.from)&&b.next)return we.range(M.to,M.from)}return u});return a.eq(f.selection)?!1:(t(pi(f,a)),!0)};function Ff(f,t){let{state:a}=f,u=a.selection,p=a.selection.ranges.slice();for(let g of a.selection.ranges){let b=a.doc.lineAt(g.head);if(t?b.to<f.state.doc.length:b.from>0)for(let M=g;;){let k=f.moveVertically(M,t);if(k.head<b.from||k.head>b.to){p.some(R=>R.head==k.head)||p.push(k);break}else{if(k.head==M.head)break;M=k}}}return p.length==u.ranges.length?!1:(f.dispatch(pi(a,we.create(p,p.length-1))),!0)}const ig=f=>Ff(f,!1),rg=f=>Ff(f,!0),sg=({state:f,dispatch:t})=>{let a=f.selection,u=null;return a.ranges.length>1?u=we.create([a.main]):a.main.empty||(u=we.create([we.cursor(a.main.head)])),u?(t(pi(f,u)),!0):!1};function Qr(f,t){if(f.state.readOnly)return!1;let a="delete.selection",{state:u}=f,p=u.changeByRange(g=>{let{from:b,to:M}=g;if(b==M){let k=t(g);k<b?(a="delete.backward",k=La(f,k,!1)):k>b&&(a="delete.forward",k=La(f,k,!0)),b=Math.min(b,k),M=Math.max(M,k)}else b=La(f,b,!1),M=La(f,M,!0);return b==M?{range:g}:{changes:{from:b,to:M},range:we.cursor(b,b<g.head?-1:1)}});return p.changes.empty?!1:(f.dispatch(u.update(p,{scrollIntoView:!0,userEvent:a,effects:a=="delete.selection"?st.announce.of(u.phrase("Selection deleted")):void 0})),!0)}function La(f,t,a){if(f instanceof st)for(let u of f.state.facet(st.atomicRanges).map(p=>p(f)))u.between(t,t,(p,g)=>{p<t&&g>t&&(t=a?g:p)});return t}const Tf=(f,t,a)=>Qr(f,u=>{let p=u.from,{state:g}=f,b=g.doc.lineAt(p),M,k;if(a&&!t&&p>b.from&&p<b.from+200&&!/[^ \t]/.test(M=b.text.slice(0,p-b.from))){if(M[M.length-1]=="	")return p-1;let R=nr(M,g.tabSize),Z=R%pa(g)||pa(g);for(let j=0;j<Z&&M[M.length-1-j]==" ";j++)p--;k=p}else k=Oe(b.text,p-b.from,t,t)+b.from,k==p&&b.number!=(t?g.doc.lines:1)?k+=t?1:-1:!t&&/[\ufe00-\ufe0f]/.test(b.text.slice(k-b.from,p-b.from))&&(k=Oe(b.text,k-b.from,!1,!1)+b.from);return k}),Xr=f=>Tf(f,!1,!0),Za=f=>Tf(f,!0,!1),Rf=(f,t)=>Qr(f,a=>{let u=a.head,{state:p}=f,g=p.doc.lineAt(u),b=p.charCategorizer(u);for(let M=null;;){if(u==(t?g.to:g.from)){u==a.head&&g.number!=(t?p.doc.lines:1)&&(u+=t?1:-1);break}let k=Oe(g.text,u-g.from,t)+g.from,R=g.text.slice(Math.min(u,k)-g.from,Math.max(u,k)-g.from),Z=b(R);if(M!=null&&Z!=M)break;(R!=" "||u!=a.head)&&(M=Z),u=k}return u}),Na=f=>Rf(f,!1),Gf=f=>Rf(f,!0),Cu=f=>Qr(f,t=>{let a=f.lineBlockAt(t.head).to;return t.head<a?a:Math.min(f.state.doc.length,t.head+1)}),og=f=>Qr(f,t=>{let a=f.lineBlockAt(t.head).from;return t.head>a?a:Math.max(0,t.head-1)}),ag=f=>Qr(f,t=>{let a=f.moveToLineBoundary(t,!1).head;return t.head>a?a:Math.max(0,t.head-1)}),lg=f=>Qr(f,t=>{let a=f.moveToLineBoundary(t,!0).head;return t.head<a?a:Math.min(f.state.doc.length,t.head+1)}),Lf=({state:f,dispatch:t})=>{if(f.readOnly)return!1;let a=f.changeByRange(u=>({changes:{from:u.from,to:u.to,insert:V.of(["",""])},range:we.cursor(u.from)}));return t(f.update(a,{scrollIntoView:!0,userEvent:"input"})),!0},Zf=({state:f,dispatch:t})=>{if(f.readOnly)return!1;let a=f.changeByRange(u=>{if(!u.empty||u.from==0||u.from==f.doc.length)return{range:u};let p=u.from,g=f.doc.lineAt(p),b=p==g.from?p-1:Oe(g.text,p-g.from,!1)+g.from,M=p==g.to?p+1:Oe(g.text,p-g.from,!0)+g.from;return{changes:{from:b,to:M,insert:f.doc.slice(p,M).append(f.doc.slice(b,p))},range:we.cursor(M)}});return a.changes.empty?!1:(t(f.update(a,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Ba(f){let t=[],a=-1;for(let u of f.selection.ranges){let p=f.doc.lineAt(u.from),g=f.doc.lineAt(u.to);if(!u.empty&&u.to==g.from&&(g=f.doc.lineAt(u.to-1)),a>=p.number){let b=t[t.length-1];b.to=g.to,b.ranges.push(u)}else t.push({from:p.from,to:g.to,ranges:[u]});a=g.number+1}return t}function Nf(f,t,a){if(f.readOnly)return!1;let u=[],p=[];for(let g of Ba(f)){if(a?g.to==f.doc.length:g.from==0)continue;let b=f.doc.lineAt(a?g.to+1:g.from-1),M=b.length+1;if(a){u.push({from:g.to,to:b.to},{from:g.from,insert:b.text+f.lineBreak});for(let k of g.ranges)p.push(we.range(Math.min(f.doc.length,k.anchor+M),Math.min(f.doc.length,k.head+M)))}else{u.push({from:b.from,to:g.from},{from:g.to,insert:f.lineBreak+b.text});for(let k of g.ranges)p.push(we.range(k.anchor-M,k.head-M))}}return u.length?(t(f.update({changes:u,scrollIntoView:!0,selection:we.create(p,f.selection.mainIndex),userEvent:"move.line"})),!0):!1}const Bf=({state:f,dispatch:t})=>Nf(f,t,!1),Qf=({state:f,dispatch:t})=>Nf(f,t,!0);function Xf(f,t,a){if(f.readOnly)return!1;let u=[];for(let p of Ba(f))a?u.push({from:p.from,insert:f.doc.slice(p.from,p.to)+f.lineBreak}):u.push({from:p.to,insert:f.lineBreak+f.doc.slice(p.from,p.to)});return t(f.update({changes:u,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Su=({state:f,dispatch:t})=>Xf(f,t,!1),Pu=({state:f,dispatch:t})=>Xf(f,t,!0),If=f=>{if(f.state.readOnly)return!1;let{state:t}=f,a=t.changes(Ba(t).map(({from:p,to:g})=>(p>0?p--:g<t.doc.length&&g++,{from:p,to:g}))),u=Nr(t.selection,p=>{let g;if(f.lineWrapping){let b=f.lineBlockAt(p.head),M=f.coordsAtPos(p.head,p.assoc||1);M&&(g=b.bottom+f.documentTop-M.bottom+f.defaultLineHeight/2)}return f.moveVertically(p,!0,g)}).map(a);return f.dispatch({changes:a,selection:u,scrollIntoView:!0,userEvent:"delete.line"}),!0};function ug(f,t){if(/\(\)|\[\]|\{\}/.test(f.sliceDoc(t-1,t+1)))return{from:t,to:t};let a=On(f).resolveInner(t),u=a.childBefore(t),p=a.childAfter(t),g;return u&&p&&u.to<=t&&p.from>=t&&(g=u.type.prop(Gt.closedBy))&&g.indexOf(p.name)>-1&&f.doc.lineAt(u.to).from==f.doc.lineAt(p.from).from&&!/\S/.test(f.sliceDoc(u.to,p.from))?{from:u.to,to:p.from}:null}const Qa=Vf(!1),cg=Vf(!0);function Vf(f){return({state:t,dispatch:a})=>{if(t.readOnly)return!1;let u=t.changeByRange(p=>{let{from:g,to:b}=p,M=t.doc.lineAt(g),k=!f&&g==b&&ug(t,g);f&&(g=b=(b<=M.to?M:t.doc.lineAt(b)).to);let R=new da(t,{simulateBreak:g,simulateDoubleBreak:!!k}),Z=ou(R,g);for(Z==null&&(Z=nr(/^\s*/.exec(t.doc.lineAt(g).text)[0],t.tabSize));b<M.to&&/\s/.test(M.text[b-M.from]);)b++;k?{from:g,to:b}=k:g>M.from&&g<M.from+100&&!/\S/.test(M.text.slice(0,g))&&(g=M.from);let j=["",Ns(t,Z)];return k&&j.push(Ns(t,R.lineIndent(M.from,-1))),{changes:{from:g,to:b,insert:V.of(j)},range:we.cursor(g+1+j[1].length)}});return a(t.update(u,{scrollIntoView:!0,userEvent:"input"})),!0}}function Mu(f,t){let a=-1;return f.changeByRange(u=>{let p=[];for(let b=u.from;b<=u.to;){let M=f.doc.lineAt(b);M.number>a&&(u.empty||u.to>M.from)&&(t(M,p,u),a=M.number),b=M.to+1}let g=f.changes(p);return{changes:p,range:we.range(g.mapPos(u.anchor,1),g.mapPos(u.head,1))}})}const hg=({state:f,dispatch:t})=>{if(f.readOnly)return!1;let a=Object.create(null),u=new da(f,{overrideIndentation:g=>{let b=a[g];return b??-1}}),p=Mu(f,(g,b,M)=>{let k=ou(u,g.from);if(k==null)return;/\S/.test(g.text)||(k=0);let R=/^\s*/.exec(g.text)[0],Z=Ns(f,k);(R!=Z||M.from<g.from+R.length)&&(a[g.from]=k,b.push({from:g.from,to:g.from+R.length,insert:Z}))});return p.changes.empty||t(f.update(p,{userEvent:"indent"})),!0},Xa=({state:f,dispatch:t})=>f.readOnly?!1:(t(f.update(Mu(f,(a,u)=>{u.push({from:a.from,insert:f.facet(Zs)})}),{userEvent:"input.indent"})),!0),Ia=({state:f,dispatch:t})=>f.readOnly?!1:(t(f.update(Mu(f,(a,u)=>{let p=/^\s*/.exec(a.text)[0];if(!p)return;let g=nr(p,f.tabSize),b=0,M=Ns(f,Math.max(0,g-pa(f)));for(;b<p.length&&b<M.length&&p.charCodeAt(b)==M.charCodeAt(b);)b++;u.push({from:a.from+b,to:a.from+p.length,insert:M.slice(b)})}),{userEvent:"delete.dedent"})),!0),fg=f=>(f.setTabFocusMode(),!0),pg=[{key:"Ctrl-b",run:va,shift:Ma,preventDefault:!0},{key:"Ctrl-f",run:xa,shift:wa},{key:"Ctrl-p",run:Sa,shift:ka},{key:"Ctrl-n",run:Pa,shift:$a},{key:"Ctrl-a",run:bf,shift:kf},{key:"Ctrl-e",run:Af,shift:$f},{key:"Ctrl-d",run:Za},{key:"Ctrl-h",run:Xr},{key:"Ctrl-k",run:Cu},{key:"Ctrl-Alt-h",run:Na},{key:"Ctrl-o",run:Lf},{key:"Ctrl-t",run:Zf},{key:"Ctrl-v",run:Br}],dg=[{key:"ArrowLeft",run:va,shift:Ma,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:mf,shift:Sf,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:U1,shift:eg,preventDefault:!0},{key:"ArrowRight",run:xa,shift:wa,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:gf,shift:Pf,preventDefault:!0},{mac:"Cmd-ArrowRight",run:q1,shift:tg,preventDefault:!0},{key:"ArrowUp",run:Sa,shift:ka,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Fa,shift:Ra},{mac:"Ctrl-ArrowUp",run:Vs,shift:Da},{key:"ArrowDown",run:Pa,shift:$a,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Ta,shift:Ga},{mac:"Ctrl-ArrowDown",run:Br,shift:Ea},{key:"PageUp",run:Vs,shift:Da},{key:"PageDown",run:Br,shift:Ea},{key:"Home",run:Au,shift:xu,preventDefault:!0},{key:"Mod-Home",run:Fa,shift:Ra},{key:"End",run:bu,shift:vu,preventDefault:!0},{key:"Mod-End",run:Ta,shift:Ga},{key:"Enter",run:Qa,shift:Qa},{key:"Mod-a",run:Df},{key:"Backspace",run:Xr,shift:Xr,preventDefault:!0},{key:"Delete",run:Za,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Na,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:Gf,preventDefault:!0},{mac:"Mod-Backspace",run:ag,preventDefault:!0},{mac:"Mod-Delete",run:lg,preventDefault:!0}].concat(pg.map(f=>({mac:f.key,run:f.run,shift:f.shift}))),mg=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:Y1,shift:K1},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:j1,shift:J1},{key:"Alt-ArrowUp",run:Bf},{key:"Shift-Alt-ArrowUp",run:Su},{key:"Alt-ArrowDown",run:Qf},{key:"Shift-Alt-ArrowDown",run:Pu},{key:"Mod-Alt-ArrowUp",run:ig},{key:"Mod-Alt-ArrowDown",run:rg},{key:"Escape",run:sg},{key:"Mod-Enter",run:cg},{key:"Alt-l",mac:"Ctrl-l",run:Ef},{key:"Mod-i",run:ng,preventDefault:!0},{key:"Mod-[",run:Ia},{key:"Mod-]",run:Xa},{key:"Mod-Alt-\\",run:hg},{key:"Shift-Mod-k",run:If},{key:"Shift-Mod-\\",run:vf},{key:"Mod-/",run:sf},{key:"Alt-A",run:of},{key:"Ctrl-m",mac:"Shift-Alt-m",run:fg}].concat(dg),gg={key:"Tab",run:Xa,shift:Ia},Wf=typeof String.prototype.normalize=="function"?f=>f.normalize("NFKD"):f=>f;class Ir{constructor(t,a,u=0,p=t.length,g,b){this.test=b,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=t.iterRange(u,p),this.bufferStart=u,this.normalize=g?M=>g(Wf(M)):Wf,this.query=this.normalize(a)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Me(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let t=this.peek();if(t<0)return this.done=!0,this;let a=Ye(t),u=this.bufferStart+this.bufferPos;this.bufferPos+=Te(t);let p=this.normalize(a);if(p.length)for(let g=0,b=u;;g++){let M=p.charCodeAt(g),k=this.match(M,b,this.bufferPos+this.bufferStart);if(g==p.length-1){if(k)return this.value=k,this;break}b==u&&g<a.length&&a.charCodeAt(g)==M&&b++}}}match(t,a,u){let p=null;for(let g=0;g<this.matches.length;g+=2){let b=this.matches[g],M=!1;this.query.charCodeAt(b)==t&&(b==this.query.length-1?p={from:this.matches[g+1],to:u}:(this.matches[g]++,M=!0)),M||(this.matches.splice(g,2),g-=2)}return this.query.charCodeAt(0)==t&&(this.query.length==1?p={from:a,to:u}:this.matches.push(1,a)),p&&this.test&&!this.test(p.from,p.to,this.buffer,this.bufferStart)&&(p=null),p}}typeof Symbol<"u"&&(Ir.prototype[Symbol.iterator]=function(){return this});const zf={from:-1,to:-1,match:/.*/.exec("")},wu="gm"+(/x/.unicode==null?"":"u");class Yf{constructor(t,a,u,p=0,g=t.length){if(this.text=t,this.to=g,this.curLine="",this.done=!1,this.value=zf,/\\[sWDnr]|\n|\r|\[\^/.test(a))return new jf(t,a,u,p,g);this.re=new RegExp(a,wu+(u?.ignoreCase?"i":"")),this.test=u?.test,this.iter=t.iter();let b=t.lineAt(p);this.curLineStart=b.from,this.matchPos=Va(t,p),this.getLine(this.curLineStart)}getLine(t){this.iter.next(t),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let t=this.matchPos-this.curLineStart;;){this.re.lastIndex=t;let a=this.matchPos<=this.to&&this.re.exec(this.curLine);if(a){let u=this.curLineStart+a.index,p=u+a[0].length;if(this.matchPos=Va(this.text,p+(u==p?1:0)),u==this.curLineStart+this.curLine.length&&this.nextLine(),(u<p||u>this.value.to)&&(!this.test||this.test(u,p,a)))return this.value={from:u,to:p,match:a},this;t=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),t=0;else return this.done=!0,this}}}const ku=new WeakMap;class Vr{constructor(t,a){this.from=t,this.text=a}get to(){return this.from+this.text.length}static get(t,a,u){let p=ku.get(t);if(!p||p.from>=u||p.to<=a){let M=new Vr(a,t.sliceString(a,u));return ku.set(t,M),M}if(p.from==a&&p.to==u)return p;let{text:g,from:b}=p;return b>a&&(g=t.sliceString(a,b)+g,b=a),p.to<u&&(g+=t.sliceString(p.to,u)),ku.set(t,new Vr(b,g)),new Vr(a,g.slice(a-b,u-b))}}class jf{constructor(t,a,u,p,g){this.text=t,this.to=g,this.done=!1,this.value=zf,this.matchPos=Va(t,p),this.re=new RegExp(a,wu+(u?.ignoreCase?"i":"")),this.test=u?.test,this.flat=Vr.get(t,p,this.chunkEnd(p+5e3))}chunkEnd(t){return t>=this.to?this.to:this.text.lineAt(t).to}next(){for(;;){let t=this.re.lastIndex=this.matchPos-this.flat.from,a=this.re.exec(this.flat.text);if(a&&!a[0]&&a.index==t&&(this.re.lastIndex=t+1,a=this.re.exec(this.flat.text)),a){let u=this.flat.from+a.index,p=u+a[0].length;if((this.flat.to>=this.to||a.index+a[0].length<=this.flat.text.length-10)&&(!this.test||this.test(u,p,a)))return this.value={from:u,to:p,match:a},this.matchPos=Va(this.text,p+(u==p?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Vr.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(Yf.prototype[Symbol.iterator]=jf.prototype[Symbol.iterator]=function(){return this});function _g(f){try{return new RegExp(f,wu),!0}catch{return!1}}function Va(f,t){if(t>=f.length)return t;let a=f.lineAt(t),u;for(;t<a.to&&(u=a.text.charCodeAt(t-a.from))>=56320&&u<57344;)t++;return t}function $u(f){let t=String(f.state.doc.lineAt(f.state.selection.main.head).number),a=Ut("input",{class:"cm-textfield",name:"line",value:t}),u=Ut("form",{class:"cm-gotoLine",onkeydown:g=>{g.keyCode==27?(g.preventDefault(),f.dispatch({effects:Ws.of(!1)}),f.focus()):g.keyCode==13&&(g.preventDefault(),p())},onsubmit:g=>{g.preventDefault(),p()}},Ut("label",f.state.phrase("Go to line"),": ",a)," ",Ut("button",{class:"cm-button",type:"submit"},f.state.phrase("go")),Ut("button",{name:"close",onclick:()=>{f.dispatch({effects:Ws.of(!1)}),f.focus()},"aria-label":f.state.phrase("close"),type:"button"},["×"]));function p(){let g=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(a.value);if(!g)return;let{state:b}=f,M=b.doc.lineAt(b.selection.main.head),[,k,R,Z,j]=g,K=Z?+Z.slice(1):0,oe=R?+R:M.number;if(R&&j){let Se=oe/100;k&&(Se=Se*(k=="-"?-1:1)+M.number/b.doc.lines),oe=Math.round(b.doc.lines*Se)}else R&&k&&(oe=oe*(k=="-"?-1:1)+M.number);let de=b.doc.line(Math.max(1,Math.min(b.doc.lines,oe))),be=we.cursor(de.from+Math.max(0,Math.min(K,de.length)));f.dispatch({effects:[Ws.of(!1),st.scrollIntoView(be.from,{y:"center"})],selection:be}),f.focus()}return{dom:u}}const Ws=Be.define(),Uf=bt.define({create(){return!0},update(f,t){for(let a of t.effects)a.is(Ws)&&(f=a.value);return f},provide:f=>Es.from(f,t=>t?$u:null)}),qf=f=>{let t=Ds(f,$u);if(!t){let a=[Ws.of(!0)];f.state.field(Uf,!1)==null&&a.push(Be.appendConfig.of([Uf,yg])),f.dispatch({effects:a}),t=Ds(f,$u)}return t&&t.dom.querySelector("input").select(),!0},yg=st.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),Og={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},Hf=Ze.define({combine(f){return $e(f,Og,{highlightWordAroundCursor:(t,a)=>t||a,minSelectionLength:Math.min,maxMatches:Math.min})}});function bg(f){let t=[Sg,Cg];return f&&t.push(Hf.of(f)),t}const Ag=_t.mark({class:"cm-selectionMatch"}),vg=_t.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function Kf(f,t,a,u){return(a==0||f(t.sliceDoc(a-1,a))!=I.Word)&&(u==t.doc.length||f(t.sliceDoc(u,u+1))!=I.Word)}function xg(f,t,a,u){return f(t.sliceDoc(a,a+1))==I.Word&&f(t.sliceDoc(u-1,u))==I.Word}const Cg=ln.fromClass(class{constructor(f){this.decorations=this.getDeco(f)}update(f){(f.selectionSet||f.docChanged||f.viewportChanged)&&(this.decorations=this.getDeco(f.view))}getDeco(f){let t=f.state.facet(Hf),{state:a}=f,u=a.selection;if(u.ranges.length>1)return _t.none;let p=u.main,g,b=null;if(p.empty){if(!t.highlightWordAroundCursor)return _t.none;let k=a.wordAt(p.head);if(!k)return _t.none;b=a.charCategorizer(p.head),g=a.sliceDoc(k.from,k.to)}else{let k=p.to-p.from;if(k<t.minSelectionLength||k>200)return _t.none;if(t.wholeWords){if(g=a.sliceDoc(p.from,p.to),b=a.charCategorizer(p.head),!(Kf(b,a,p.from,p.to)&&xg(b,a,p.from,p.to)))return _t.none}else if(g=a.sliceDoc(p.from,p.to),!g)return _t.none}let M=[];for(let k of f.visibleRanges){let R=new Ir(a.doc,g,k.from,k.to);for(;!R.next().done;){let{from:Z,to:j}=R.value;if((!b||Kf(b,a,Z,j))&&(p.empty&&Z<=p.from&&j>=p.to?M.push(vg.range(Z,j)):(Z>=p.to||j<=p.from)&&M.push(Ag.range(Z,j)),M.length>t.maxMatches))return _t.none}}return _t.set(M)}},{decorations:f=>f.decorations}),Sg=st.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),Pg=({state:f,dispatch:t})=>{let{selection:a}=f,u=we.create(a.ranges.map(p=>f.wordAt(p.head)||we.cursor(p.head)),a.mainIndex);return u.eq(a)?!1:(t(f.update({selection:u})),!0)};function Mg(f,t){let{main:a,ranges:u}=f.selection,p=f.wordAt(a.head),g=p&&p.from==a.from&&p.to==a.to;for(let b=!1,M=new Ir(f.doc,t,u[u.length-1].to);;)if(M.next(),M.done){if(b)return null;M=new Ir(f.doc,t,0,Math.max(0,u[u.length-1].from-1)),b=!0}else{if(b&&u.some(k=>k.from==M.value.from))continue;if(g){let k=f.wordAt(M.value.from);if(!k||k.from!=M.value.from||k.to!=M.value.to)continue}return M.value}}const Du=({state:f,dispatch:t})=>{let{ranges:a}=f.selection;if(a.some(g=>g.from===g.to))return Pg({state:f,dispatch:t});let u=f.sliceDoc(a[0].from,a[0].to);if(f.selection.ranges.some(g=>f.sliceDoc(g.from,g.to)!=u))return!1;let p=Mg(f,u);return p?(t(f.update({selection:f.selection.addRange(we.range(p.from,p.to),!1),effects:st.scrollIntoView(p.to)})),!0):!1},gr=Ze.define({combine(f){return $e(f,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:t=>new Lg(t),scrollToMatch:t=>st.scrollIntoView(t)})}});function wg(f){return f?[gr.of(f),Nu]:Nu}class Jf{constructor(t){this.search=t.search,this.caseSensitive=!!t.caseSensitive,this.literal=!!t.literal,this.regexp=!!t.regexp,this.replace=t.replace||"",this.valid=!!this.search&&(!this.regexp||_g(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!t.wholeWord}unquote(t){return this.literal?t:t.replace(/\\([nrt\\])/g,(a,u)=>u=="n"?`
`:u=="r"?"\r":u=="t"?"	":"\\")}eq(t){return this.search==t.search&&this.replace==t.replace&&this.caseSensitive==t.caseSensitive&&this.regexp==t.regexp&&this.wholeWord==t.wholeWord}create(){return this.regexp?new Eg(this):new $g(this)}getCursor(t,a=0,u){let p=t.doc?t:Pe.create({doc:t});return u==null&&(u=p.doc.length),this.regexp?zr(this,p,a,u):Wr(this,p,a,u)}}class ep{constructor(t){this.spec=t}}function Wr(f,t,a,u){return new Ir(t.doc,f.unquoted,a,u,f.caseSensitive?void 0:p=>p.toLowerCase(),f.wholeWord?kg(t.doc,t.charCategorizer(t.selection.main.head)):void 0)}function kg(f,t){return(a,u,p,g)=>((g>a||g+p.length<u)&&(g=Math.max(0,a-2),p=f.sliceString(g,Math.min(f.length,u+2))),(t(Wa(p,a-g))!=I.Word||t(za(p,a-g))!=I.Word)&&(t(za(p,u-g))!=I.Word||t(Wa(p,u-g))!=I.Word))}class $g extends ep{constructor(t){super(t)}nextMatch(t,a,u){let p=Wr(this.spec,t,u,t.doc.length).nextOverlapping();if(p.done){let g=Math.min(t.doc.length,a+this.spec.unquoted.length);p=Wr(this.spec,t,0,g).nextOverlapping()}return p.done||p.value.from==a&&p.value.to==u?null:p.value}prevMatchInRange(t,a,u){for(let p=u;;){let g=Math.max(a,p-1e4-this.spec.unquoted.length),b=Wr(this.spec,t,g,p),M=null;for(;!b.nextOverlapping().done;)M=b.value;if(M)return M;if(g==a)return null;p-=1e4}}prevMatch(t,a,u){let p=this.prevMatchInRange(t,0,a);return p||(p=this.prevMatchInRange(t,Math.max(0,u-this.spec.unquoted.length),t.doc.length)),p&&(p.from!=a||p.to!=u)?p:null}getReplacement(t){return this.spec.unquote(this.spec.replace)}matchAll(t,a){let u=Wr(this.spec,t,0,t.doc.length),p=[];for(;!u.next().done;){if(p.length>=a)return null;p.push(u.value)}return p}highlight(t,a,u,p){let g=Wr(this.spec,t,Math.max(0,a-this.spec.unquoted.length),Math.min(u+this.spec.unquoted.length,t.doc.length));for(;!g.next().done;)p(g.value.from,g.value.to)}}function zr(f,t,a,u){return new Yf(t.doc,f.search,{ignoreCase:!f.caseSensitive,test:f.wholeWord?Dg(t.charCategorizer(t.selection.main.head)):void 0},a,u)}function Wa(f,t){return f.slice(Oe(f,t,!1),t)}function za(f,t){return f.slice(t,Oe(f,t))}function Dg(f){return(t,a,u)=>!u[0].length||(f(Wa(u.input,u.index))!=I.Word||f(za(u.input,u.index))!=I.Word)&&(f(za(u.input,u.index+u[0].length))!=I.Word||f(Wa(u.input,u.index+u[0].length))!=I.Word)}class Eg extends ep{nextMatch(t,a,u){let p=zr(this.spec,t,u,t.doc.length).next();return p.done&&(p=zr(this.spec,t,0,a).next()),p.done?null:p.value}prevMatchInRange(t,a,u){for(let p=1;;p++){let g=Math.max(a,u-p*1e4),b=zr(this.spec,t,g,u),M=null;for(;!b.next().done;)M=b.value;if(M&&(g==a||M.from>g+10))return M;if(g==a)return null}}prevMatch(t,a,u){return this.prevMatchInRange(t,0,a)||this.prevMatchInRange(t,u,t.doc.length)}getReplacement(t){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(a,u)=>{if(u=="&")return t.match[0];if(u=="$")return"$";for(let p=u.length;p>0;p--){let g=+u.slice(0,p);if(g>0&&g<t.match.length)return t.match[g]+u.slice(p)}return a})}matchAll(t,a){let u=zr(this.spec,t,0,t.doc.length),p=[];for(;!u.next().done;){if(p.length>=a)return null;p.push(u.value)}return p}highlight(t,a,u,p){let g=zr(this.spec,t,Math.max(0,a-250),Math.min(u+250,t.doc.length));for(;!g.next().done;)p(g.value.from,g.value.to)}}const zs=Be.define(),Eu=Be.define(),qi=bt.define({create(f){return new Fu(Ru(f).create(),null)},update(f,t){for(let a of t.effects)a.is(zs)?f=new Fu(a.value.create(),f.panel):a.is(Eu)&&(f=new Fu(f.query,a.value?Tu:null));return f},provide:f=>Es.from(f,t=>t.panel)});class Fu{constructor(t,a){this.query=t,this.panel=a}}const Fg=_t.mark({class:"cm-searchMatch"}),Tg=_t.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Rg=ln.fromClass(class{constructor(f){this.view=f,this.decorations=this.highlight(f.state.field(qi))}update(f){let t=f.state.field(qi);(t!=f.startState.field(qi)||f.docChanged||f.selectionSet||f.viewportChanged)&&(this.decorations=this.highlight(t))}highlight({query:f,panel:t}){if(!t||!f.spec.valid)return _t.none;let{view:a}=this,u=new Xn;for(let p=0,g=a.visibleRanges,b=g.length;p<b;p++){let{from:M,to:k}=g[p];for(;p<b-1&&k>g[p+1].from-500;)k=g[++p].to;f.highlight(a.state,M,k,(R,Z)=>{let j=a.state.selection.ranges.some(K=>K.from==R&&K.to==Z);u.add(R,Z,j?Tg:Fg)})}return u.finish()}},{decorations:f=>f.decorations});function Ys(f){return t=>{let a=t.state.field(qi,!1);return a&&a.query.spec.valid?f(t,a):Gu(t)}}const Ya=Ys((f,{query:t})=>{let{to:a}=f.state.selection.main,u=t.nextMatch(f.state,a,a);if(!u)return!1;let p=we.single(u.from,u.to),g=f.state.facet(gr);return f.dispatch({selection:p,effects:[Zu(f,u),g.scrollToMatch(p.main,f)],userEvent:"select.search"}),op(f),!0}),ja=Ys((f,{query:t})=>{let{state:a}=f,{from:u}=a.selection.main,p=t.prevMatch(a,u,u);if(!p)return!1;let g=we.single(p.from,p.to),b=f.state.facet(gr);return f.dispatch({selection:g,effects:[Zu(f,p),b.scrollToMatch(g.main,f)],userEvent:"select.search"}),op(f),!0}),tp=Ys((f,{query:t})=>{let a=t.matchAll(f.state,1e3);return!a||!a.length?!1:(f.dispatch({selection:we.create(a.map(u=>we.range(u.from,u.to))),userEvent:"select.search.matches"}),!0)}),np=({state:f,dispatch:t})=>{let a=f.selection;if(a.ranges.length>1||a.main.empty)return!1;let{from:u,to:p}=a.main,g=[],b=0;for(let M=new Ir(f.doc,f.sliceDoc(u,p));!M.next().done;){if(g.length>1e3)return!1;M.value.from==u&&(b=g.length),g.push(we.range(M.value.from,M.value.to))}return t(f.update({selection:we.create(g,b),userEvent:"select.search.matches"})),!0},ip=Ys((f,{query:t})=>{let{state:a}=f,{from:u,to:p}=a.selection.main;if(a.readOnly)return!1;let g=t.nextMatch(a,u,u);if(!g)return!1;let b=g,M=[],k,R,Z=[];b.from==u&&b.to==p&&(R=a.toText(t.getReplacement(b)),M.push({from:b.from,to:b.to,insert:R}),b=t.nextMatch(a,b.from,b.to),Z.push(st.announce.of(a.phrase("replaced match on line $",a.doc.lineAt(u).number)+".")));let j=f.state.changes(M);return b&&(k=we.single(b.from,b.to).map(j),Z.push(Zu(f,b)),Z.push(a.facet(gr).scrollToMatch(k.main,f))),f.dispatch({changes:j,selection:k,effects:Z,userEvent:"input.replace"}),!0}),rp=Ys((f,{query:t})=>{if(f.state.readOnly)return!1;let a=t.matchAll(f.state,1e9).map(p=>{let{from:g,to:b}=p;return{from:g,to:b,insert:t.getReplacement(p)}});if(!a.length)return!1;let u=f.state.phrase("replaced $ matches",a.length)+".";return f.dispatch({changes:a,effects:st.announce.of(u),userEvent:"input.replace.all"}),!0});function Tu(f){return f.state.facet(gr).createPanel(f)}function Ru(f,t){var a,u,p,g,b;let M=f.selection.main,k=M.empty||M.to>M.from+100?"":f.sliceDoc(M.from,M.to);if(t&&!k)return t;let R=f.facet(gr);return new Jf({search:((a=t?.literal)!==null&&a!==void 0?a:R.literal)?k:k.replace(/\n/g,"\\n"),caseSensitive:(u=t?.caseSensitive)!==null&&u!==void 0?u:R.caseSensitive,literal:(p=t?.literal)!==null&&p!==void 0?p:R.literal,regexp:(g=t?.regexp)!==null&&g!==void 0?g:R.regexp,wholeWord:(b=t?.wholeWord)!==null&&b!==void 0?b:R.wholeWord})}function sp(f){let t=Ds(f,Tu);return t&&t.dom.querySelector("[main-field]")}function op(f){let t=sp(f);t&&t==f.root.activeElement&&t.select()}const Gu=f=>{let t=f.state.field(qi,!1);if(t&&t.panel){let a=sp(f);if(a&&a!=f.root.activeElement){let u=Ru(f.state,t.query.spec);u.valid&&f.dispatch({effects:zs.of(u)}),a.focus(),a.select()}}else f.dispatch({effects:[Eu.of(!0),t?zs.of(Ru(f.state,t.query.spec)):Be.appendConfig.of(Nu)]});return!0},Lu=f=>{let t=f.state.field(qi,!1);if(!t||!t.panel)return!1;let a=Ds(f,Tu);return a&&a.dom.contains(f.root.activeElement)&&f.focus(),f.dispatch({effects:Eu.of(!1)}),!0},Gg=[{key:"Mod-f",run:Gu,scope:"editor search-panel"},{key:"F3",run:Ya,shift:ja,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Ya,shift:ja,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Lu,scope:"editor search-panel"},{key:"Mod-Shift-l",run:np},{key:"Mod-Alt-g",run:qf},{key:"Mod-d",run:Du,preventDefault:!0}];class Lg{constructor(t){this.view=t;let a=this.query=t.state.field(qi).query.spec;this.commit=this.commit.bind(this),this.searchField=Ut("input",{value:a.search,placeholder:zn(t,"Find"),"aria-label":zn(t,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Ut("input",{value:a.replace,placeholder:zn(t,"Replace"),"aria-label":zn(t,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Ut("input",{type:"checkbox",name:"case",form:"",checked:a.caseSensitive,onchange:this.commit}),this.reField=Ut("input",{type:"checkbox",name:"re",form:"",checked:a.regexp,onchange:this.commit}),this.wordField=Ut("input",{type:"checkbox",name:"word",form:"",checked:a.wholeWord,onchange:this.commit});function u(p,g,b){return Ut("button",{class:"cm-button",name:p,onclick:g,type:"button"},b)}this.dom=Ut("div",{onkeydown:p=>this.keydown(p),class:"cm-search"},[this.searchField,u("next",()=>Ya(t),[zn(t,"next")]),u("prev",()=>ja(t),[zn(t,"previous")]),u("select",()=>tp(t),[zn(t,"all")]),Ut("label",null,[this.caseField,zn(t,"match case")]),Ut("label",null,[this.reField,zn(t,"regexp")]),Ut("label",null,[this.wordField,zn(t,"by word")]),...t.state.readOnly?[]:[Ut("br"),this.replaceField,u("replace",()=>ip(t),[zn(t,"replace")]),u("replaceAll",()=>rp(t),[zn(t,"replace all")])],Ut("button",{name:"close",onclick:()=>Lu(t),"aria-label":zn(t,"close"),type:"button"},["×"])])}commit(){let t=new Jf({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});t.eq(this.query)||(this.query=t,this.view.dispatch({effects:zs.of(t)}))}keydown(t){Gm(this.view,t,"search-panel")?t.preventDefault():t.keyCode==13&&t.target==this.searchField?(t.preventDefault(),(t.shiftKey?ja:Ya)(this.view)):t.keyCode==13&&t.target==this.replaceField&&(t.preventDefault(),ip(this.view))}update(t){for(let a of t.transactions)for(let u of a.effects)u.is(zs)&&!u.value.eq(this.query)&&this.setQuery(u.value)}setQuery(t){this.query=t,this.searchField.value=t.search,this.replaceField.value=t.replace,this.caseField.checked=t.caseSensitive,this.reField.checked=t.regexp,this.wordField.checked=t.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(gr).top}}function zn(f,t){return f.state.phrase(t)}const Ua=30,qa=/[\s\.,:;?!]/;function Zu(f,{from:t,to:a}){let u=f.state.doc.lineAt(t),p=f.state.doc.lineAt(a).to,g=Math.max(u.from,t-Ua),b=Math.min(p,a+Ua),M=f.state.sliceDoc(g,b);if(g!=u.from){for(let k=0;k<Ua;k++)if(!qa.test(M[k+1])&&qa.test(M[k])){M=M.slice(k);break}}if(b!=p){for(let k=M.length-1;k>M.length-Ua;k--)if(!qa.test(M[k-1])&&qa.test(M[k])){M=M.slice(0,k);break}}return st.announce.of(`${f.state.phrase("current match")}. ${M} ${f.state.phrase("on line")} ${u.number}.`)}const Zg=st.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Nu=[qi,rn.low(Rg),Zg];class ap{constructor(t,a,u,p){this.state=t,this.pos=a,this.explicit=u,this.view=p,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(t){let a=On(this.state).resolveInner(this.pos,-1);for(;a&&t.indexOf(a.name)<0;)a=a.parent;return a?{from:a.from,to:this.pos,text:this.state.sliceDoc(a.from,this.pos),type:a.type}:null}matchBefore(t){let a=this.state.doc.lineAt(this.pos),u=Math.max(a.from,this.pos-250),p=a.text.slice(u-a.from,this.pos-a.from),g=p.search(dp(t,!1));return g<0?null:{from:u+g,to:this.pos,text:p.slice(g)}}get aborted(){return this.abortListeners==null}addEventListener(t,a,u){t=="abort"&&this.abortListeners&&(this.abortListeners.push(a),u&&u.onDocChange&&(this.abortOnDocChange=!0))}}function up(f){let t=Object.keys(f).join(""),a=/\w/.test(t);return a&&(t=t.replace(/\w/g,"")),`[${a?"\\w":""}${t.replace(/[^\w\s]/g,"\\$&")}]`}function Ng(f){let t=Object.create(null),a=Object.create(null);for(let{label:p}of f){t[p[0]]=!0;for(let g=1;g<p.length;g++)a[p[g]]=!0}let u=up(t)+up(a)+"*$";return[new RegExp("^"+u),new RegExp(u)]}function cp(f){let t=f.map(p=>typeof p=="string"?{label:p}:p),[a,u]=t.every(p=>/^\w+$/.test(p.label))?[/\w*$/,/\w+$/]:Ng(t);return p=>{let g=p.matchBefore(u);return g||p.explicit?{from:g?g.from:p.pos,options:t,validFor:a}:null}}function Bg(f,t){return a=>{for(let u=On(a.state).resolveInner(a.pos,-1);u;u=u.parent){if(f.indexOf(u.name)>-1)return null;if(u.type.isTop)break}return t(a)}}class fp{constructor(t,a,u,p){this.completion=t,this.source=a,this.match=u,this.score=p}}function _r(f){return f.selection.main.from}function dp(f,t){var a;let{source:u}=f,p=t&&u[0]!="^",g=u[u.length-1]!="$";return!p&&!g?f:new RegExp(`${p?"^":""}(?:${u})${g?"$":""}`,(a=f.flags)!==null&&a!==void 0?a:f.ignoreCase?"i":"")}const Bu=Pt.define();function Qg(f,t,a,u){let{main:p}=f.selection,g=a-p.from,b=u-p.from;return{...f.changeByRange(M=>{if(M!=p&&a!=u&&f.sliceDoc(M.from+g,M.from+b)!=f.sliceDoc(a,u))return{range:M};let k=f.toText(t);return{changes:{from:M.from+g,to:u==p.from?M.to:M.from+b,insert:k},range:we.cursor(M.from+g+k.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const mp=new WeakMap;function Xg(f){if(!Array.isArray(f))return f;let t=mp.get(f);return t||mp.set(f,t=cp(f)),t}const Ha=Be.define(),js=Be.define();class Ig{constructor(t){this.pattern=t,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let a=0;a<t.length;){let u=Me(t,a),p=Te(u);this.chars.push(u);let g=t.slice(a,a+p),b=g.toUpperCase();this.folded.push(Me(b==g?g.toLowerCase():b,0)),a+=p}this.astral=t.length!=this.chars.length}ret(t,a){return this.score=t,this.matched=a,this}match(t){if(this.pattern.length==0)return this.ret(-100,[]);if(t.length<this.pattern.length)return null;let{chars:a,folded:u,any:p,precise:g,byWord:b}=this;if(a.length==1){let ze=Me(t,0),We=Te(ze),ot=We==t.length?0:-100;if(ze!=a[0])if(ze==u[0])ot+=-200;else return null;return this.ret(ot,[0,We])}let M=t.indexOf(this.pattern);if(M==0)return this.ret(t.length==this.pattern.length?0:-100,[0,this.pattern.length]);let k=a.length,R=0;if(M<0){for(let ze=0,We=Math.min(t.length,200);ze<We&&R<k;){let ot=Me(t,ze);(ot==a[R]||ot==u[R])&&(p[R++]=ze),ze+=Te(ot)}if(R<k)return null}let Z=0,j=0,K=!1,oe=0,de=-1,be=-1,Se=/[a-z]/.test(t),Ee=!0;for(let ze=0,We=Math.min(t.length,200),ot=0;ze<We&&j<k;){let Ve=Me(t,ze);M<0&&(Z<k&&Ve==a[Z]&&(g[Z++]=ze),oe<k&&(Ve==a[oe]||Ve==u[oe]?(oe==0&&(de=ze),be=ze+1,oe++):oe=0));let nt,Ke=Ve<255?Ve>=48&&Ve<=57||Ve>=97&&Ve<=122?2:Ve>=65&&Ve<=90?1:0:(nt=Ye(Ve))!=nt.toLowerCase()?1:nt!=nt.toUpperCase()?2:0;(!ze||Ke==1&&Se||ot==0&&Ke!=0)&&(a[j]==Ve||u[j]==Ve&&(K=!0)?b[j++]=ze:b.length&&(Ee=!1)),ot=Ke,ze+=Te(Ve)}return j==k&&b[0]==0&&Ee?this.result(-100+(K?-200:0),b,t):oe==k&&de==0?this.ret(-200-t.length+(be==t.length?0:-100),[0,be]):M>-1?this.ret(-700-t.length,[M,M+this.pattern.length]):oe==k?this.ret(-900-t.length,[de,be]):j==k?this.result(-100+(K?-200:0)+-700+(Ee?0:-1100),b,t):a.length==2?null:this.result((p[0]?-700:0)+-200+-1100,p,t)}result(t,a,u){let p=[],g=0;for(let b of a){let M=b+(this.astral?Te(Me(u,b)):1);g&&p[g-1]==b?p[g-1]=M:(p[g++]=b,p[g++]=M)}return this.ret(t-u.length,p)}}class Vg{constructor(t){this.pattern=t,this.matched=[],this.score=0,this.folded=t.toLowerCase()}match(t){if(t.length<this.pattern.length)return null;let a=t.slice(0,this.pattern.length),u=a==this.pattern?0:a.toLowerCase()==this.folded?-200:null;return u==null?null:(this.matched=[0,a.length],this.score=u+(t.length==this.pattern.length?0:-100),this)}}const vn=Ze.define({combine(f){return $e(f,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:Wg,filterStrict:!1,compareCompletions:(t,a)=>(t.sortText||t.label).localeCompare(a.sortText||a.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(t,a)=>t&&a,closeOnBlur:(t,a)=>t&&a,icons:(t,a)=>t&&a,tooltipClass:(t,a)=>u=>gp(t(u),a(u)),optionClass:(t,a)=>u=>gp(t(u),a(u)),addToOptions:(t,a)=>t.concat(a),filterStrict:(t,a)=>t||a})}});function gp(f,t){return f?t?f+" "+t:f:t}function Wg(f,t,a,u,p,g){let b=f.textDirection==Yt.RTL,M=b,k=!1,R="top",Z,j,K=t.left-p.left,oe=p.right-t.right,de=u.right-u.left,be=u.bottom-u.top;if(M&&K<Math.min(de,oe)?M=!1:!M&&oe<Math.min(de,K)&&(M=!0),de<=(M?K:oe))Z=Math.max(p.top,Math.min(a.top,p.bottom-be))-t.top,j=Math.min(400,M?K:oe);else{k=!0,j=Math.min(400,(b?t.right:p.right-t.left)-30);let ze=p.bottom-t.bottom;ze>=be||ze>t.top?Z=a.bottom-t.top:(R="bottom",Z=t.bottom-a.top)}let Se=(t.bottom-t.top)/g.offsetHeight,Ee=(t.right-t.left)/g.offsetWidth;return{style:`${R}: ${Z/Se}px; max-width: ${j/Ee}px`,class:"cm-completionInfo-"+(k?b?"left-narrow":"right-narrow":M?"left":"right")}}function zg(f){let t=f.addToOptions.slice();return f.icons&&t.push({render(a){let u=document.createElement("div");return u.classList.add("cm-completionIcon"),a.type&&u.classList.add(...a.type.split(/\s+/g).map(p=>"cm-completionIcon-"+p)),u.setAttribute("aria-hidden","true"),u},position:20}),t.push({render(a,u,p,g){let b=document.createElement("span");b.className="cm-completionLabel";let M=a.displayLabel||a.label,k=0;for(let R=0;R<g.length;){let Z=g[R++],j=g[R++];Z>k&&b.appendChild(document.createTextNode(M.slice(k,Z)));let K=b.appendChild(document.createElement("span"));K.appendChild(document.createTextNode(M.slice(Z,j))),K.className="cm-completionMatchedText",k=j}return k<M.length&&b.appendChild(document.createTextNode(M.slice(k))),b},position:50},{render(a){if(!a.detail)return null;let u=document.createElement("span");return u.className="cm-completionDetail",u.textContent=a.detail,u},position:80}),t.sort((a,u)=>a.position-u.position).map(a=>a.render)}function Qu(f,t,a){if(f<=a)return{from:0,to:f};if(t<0&&(t=0),t<=f>>1){let p=Math.floor(t/a);return{from:p*a,to:(p+1)*a}}let u=Math.floor((f-t)/a);return{from:f-(u+1)*a,to:f-u*a}}class Yg{constructor(t,a,u){this.view=t,this.stateField=a,this.applyCompletion=u,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:k=>this.placeInfo(k),key:this},this.space=null,this.currentClass="";let p=t.state.field(a),{options:g,selected:b}=p.open,M=t.state.facet(vn);this.optionContent=zg(M),this.optionClass=M.optionClass,this.tooltipClass=M.tooltipClass,this.range=Qu(g.length,b,M.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(t.state),this.dom.addEventListener("mousedown",k=>{let{options:R}=t.state.field(a).open;for(let Z=k.target,j;Z&&Z!=this.dom;Z=Z.parentNode)if(Z.nodeName=="LI"&&(j=/-(\d+)$/.exec(Z.id))&&+j[1]<R.length){this.applyCompletion(t,R[+j[1]]),k.preventDefault();return}}),this.dom.addEventListener("focusout",k=>{let R=t.state.field(this.stateField,!1);R&&R.tooltip&&t.state.facet(vn).closeOnBlur&&k.relatedTarget!=t.contentDOM&&t.dispatch({effects:js.of(null)})}),this.showOptions(g,p.id)}mount(){this.updateSel()}showOptions(t,a){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t,a,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(t){var a;let u=t.state.field(this.stateField),p=t.startState.field(this.stateField);if(this.updateTooltipClass(t.state),u!=p){let{options:g,selected:b,disabled:M}=u.open;(!p.open||p.open.options!=g)&&(this.range=Qu(g.length,b,t.state.facet(vn).maxRenderedOptions),this.showOptions(g,u.id)),this.updateSel(),M!=((a=p.open)===null||a===void 0?void 0:a.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!M)}}updateTooltipClass(t){let a=this.tooltipClass(t);if(a!=this.currentClass){for(let u of this.currentClass.split(" "))u&&this.dom.classList.remove(u);for(let u of a.split(" "))u&&this.dom.classList.add(u);this.currentClass=a}}positioned(t){this.space=t,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let t=this.view.state.field(this.stateField),a=t.open;(a.selected>-1&&a.selected<this.range.from||a.selected>=this.range.to)&&(this.range=Qu(a.options.length,a.selected,this.view.state.facet(vn).maxRenderedOptions),this.showOptions(a.options,t.id));let u=this.updateSelectedOption(a.selected);if(u){this.destroyInfo();let{completion:p}=a.options[a.selected],{info:g}=p;if(!g)return;let b=typeof g=="string"?document.createTextNode(g):g(p);if(!b)return;"then"in b?b.then(M=>{M&&this.view.state.field(this.stateField,!1)==t&&this.addInfoPane(M,p)}).catch(M=>gn(this.view.state,M,"completion info")):(this.addInfoPane(b,p),u.setAttribute("aria-describedby",this.info.id))}}addInfoPane(t,a){this.destroyInfo();let u=this.info=document.createElement("div");if(u.className="cm-tooltip cm-completionInfo",u.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),t.nodeType!=null)u.appendChild(t),this.infoDestroy=null;else{let{dom:p,destroy:g}=t;u.appendChild(p),this.infoDestroy=g||null}this.dom.appendChild(u),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(t){let a=null;for(let u=this.list.firstChild,p=this.range.from;u;u=u.nextSibling,p++)u.nodeName!="LI"||!u.id?p--:p==t?u.hasAttribute("aria-selected")||(u.setAttribute("aria-selected","true"),a=u):u.hasAttribute("aria-selected")&&(u.removeAttribute("aria-selected"),u.removeAttribute("aria-describedby"));return a&&Ug(this.list,a),a}measureInfo(){let t=this.dom.querySelector("[aria-selected]");if(!t||!this.info)return null;let a=this.dom.getBoundingClientRect(),u=this.info.getBoundingClientRect(),p=t.getBoundingClientRect(),g=this.space;if(!g){let b=this.dom.ownerDocument.documentElement;g={left:0,top:0,right:b.clientWidth,bottom:b.clientHeight}}return p.top>Math.min(g.bottom,a.bottom)-10||p.bottom<Math.max(g.top,a.top)+10?null:this.view.state.facet(vn).positionInfo(this.view,a,p,u,g,this.dom)}placeInfo(t){this.info&&(t?(t.style&&(this.info.style.cssText=t.style),this.info.className="cm-tooltip cm-completionInfo "+(t.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(t,a,u){const p=document.createElement("ul");p.id=a,p.setAttribute("role","listbox"),p.setAttribute("aria-expanded","true"),p.setAttribute("aria-label",this.view.state.phrase("Completions")),p.addEventListener("mousedown",b=>{b.target==p&&b.preventDefault()});let g=null;for(let b=u.from;b<u.to;b++){let{completion:M,match:k}=t[b],{section:R}=M;if(R){let K=typeof R=="string"?R:R.name;if(K!=g&&(b>u.from||u.from==0))if(g=K,typeof R!="string"&&R.header)p.appendChild(R.header(R));else{let oe=p.appendChild(document.createElement("completion-section"));oe.textContent=K}}const Z=p.appendChild(document.createElement("li"));Z.id=a+"-"+b,Z.setAttribute("role","option");let j=this.optionClass(M);j&&(Z.className=j);for(let K of this.optionContent){let oe=K(M,this.view.state,this.view,k);oe&&Z.appendChild(oe)}}return u.from&&p.classList.add("cm-completionListIncompleteTop"),u.to<t.length&&p.classList.add("cm-completionListIncompleteBottom"),p}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function jg(f,t){return a=>new Yg(a,f,t)}function Ug(f,t){let a=f.getBoundingClientRect(),u=t.getBoundingClientRect(),p=a.height/f.offsetHeight;u.top<a.top?f.scrollTop-=(a.top-u.top)/p:u.bottom>a.bottom&&(f.scrollTop+=(u.bottom-a.bottom)/p)}function _p(f){return(f.boost||0)*100+(f.apply?10:0)+(f.info?5:0)+(f.type?1:0)}function qg(f,t){let a=[],u=null,p=null,g=Z=>{a.push(Z);let{section:j}=Z.completion;if(j){u||(u=[]);let K=typeof j=="string"?j:j.name;u.some(oe=>oe.name==K)||u.push(typeof j=="string"?{name:K}:j)}},b=t.facet(vn);for(let Z of f)if(Z.hasResult()){let j=Z.result.getMatch;if(Z.result.filter===!1)for(let K of Z.result.options)g(new fp(K,Z.source,j?j(K):[],1e9-a.length));else{let K=t.sliceDoc(Z.from,Z.to),oe,de=b.filterStrict?new Vg(K):new Ig(K);for(let be of Z.result.options)if(oe=de.match(be.label)){let Se=be.displayLabel?j?j(be,oe.matched):[]:oe.matched,Ee=oe.score+(be.boost||0);if(g(new fp(be,Z.source,Se,Ee)),typeof be.section=="object"&&be.section.rank==="dynamic"){let{name:ze}=be.section;p||(p=Object.create(null)),p[ze]=Math.max(Ee,p[ze]||-1e9)}}}}if(u){let Z=Object.create(null),j=0,K=(oe,de)=>(oe.rank==="dynamic"&&de.rank==="dynamic"?p[de.name]-p[oe.name]:0)||(typeof oe.rank=="number"?oe.rank:1e9)-(typeof de.rank=="number"?de.rank:1e9)||(oe.name<de.name?-1:1);for(let oe of u.sort(K))j-=1e5,Z[oe.name]=j;for(let oe of a){let{section:de}=oe.completion;de&&(oe.score+=Z[typeof de=="string"?de:de.name])}}let M=[],k=null,R=b.compareCompletions;for(let Z of a.sort((j,K)=>K.score-j.score||R(j.completion,K.completion))){let j=Z.completion;!k||k.label!=j.label||k.detail!=j.detail||k.type!=null&&j.type!=null&&k.type!=j.type||k.apply!=j.apply||k.boost!=j.boost?M.push(Z):_p(Z.completion)>_p(k)&&(M[M.length-1]=Z),k=Z.completion}return M}class Yr{constructor(t,a,u,p,g,b){this.options=t,this.attrs=a,this.tooltip=u,this.timestamp=p,this.selected=g,this.disabled=b}setSelected(t,a){return t==this.selected||t>=this.options.length?this:new Yr(this.options,yp(a,t),this.tooltip,this.timestamp,t,this.disabled)}static build(t,a,u,p,g,b){if(p&&!b&&t.some(R=>R.isPending))return p.setDisabled();let M=qg(t,a);if(!M.length)return p&&t.some(R=>R.isPending)?p.setDisabled():null;let k=a.facet(vn).selectOnOpen?0:-1;if(p&&p.selected!=k&&p.selected!=-1){let R=p.options[p.selected].completion;for(let Z=0;Z<M.length;Z++)if(M[Z].completion==R){k=Z;break}}return new Yr(M,yp(u,k),{pos:t.reduce((R,Z)=>Z.hasResult()?Math.min(R,Z.from):R,1e8),create:n_,above:g.aboveCursor},p?p.timestamp:Date.now(),k,!1)}map(t){return new Yr(this.options,this.attrs,{...this.tooltip,pos:t.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new Yr(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class Ka{constructor(t,a,u){this.active=t,this.id=a,this.open=u}static start(){return new Ka(e_,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(t){let{state:a}=t,u=a.facet(vn),g=(u.override||a.languageDataAt("autocomplete",_r(a)).map(Xg)).map(k=>(this.active.find(Z=>Z.source==k)||new ri(k,this.active.some(Z=>Z.state!=0)?1:0)).update(t,u));g.length==this.active.length&&g.every((k,R)=>k==this.active[R])&&(g=this.active);let b=this.open,M=t.effects.some(k=>k.is(Xu));b&&t.docChanged&&(b=b.map(t.changes)),t.selection||g.some(k=>k.hasResult()&&t.changes.touchesRange(k.from,k.to))||!Hg(g,this.active)||M?b=Yr.build(g,a,this.id,b,u,M):b&&b.disabled&&!g.some(k=>k.isPending)&&(b=null),!b&&g.every(k=>!k.isPending)&&g.some(k=>k.hasResult())&&(g=g.map(k=>k.hasResult()?new ri(k.source,0):k));for(let k of t.effects)k.is(Ap)&&(b=b&&b.setSelected(k.value,this.id));return g==this.active&&b==this.open?this:new Ka(g,this.id,b)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?Kg:Jg}}function Hg(f,t){if(f==t)return!0;for(let a=0,u=0;;){for(;a<f.length&&!f[a].hasResult();)a++;for(;u<t.length&&!t[u].hasResult();)u++;let p=a==f.length,g=u==t.length;if(p||g)return p==g;if(f[a++].result!=t[u++].result)return!1}}const Kg={"aria-autocomplete":"list"},Jg={};function yp(f,t){let a={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":f};return t>-1&&(a["aria-activedescendant"]=f+"-"+t),a}const e_=[];function Op(f,t){if(f.isUserEvent("input.complete")){let u=f.annotation(Bu);if(u&&t.activateOnCompletion(u))return 12}let a=f.isUserEvent("input.type");return a&&t.activateOnTyping?5:a?1:f.isUserEvent("delete.backward")?2:f.selection?8:f.docChanged?16:0}class ri{constructor(t,a,u=!1){this.source=t,this.state=a,this.explicit=u}hasResult(){return!1}get isPending(){return this.state==1}update(t,a){let u=Op(t,a),p=this;(u&8||u&16&&this.touches(t))&&(p=new ri(p.source,0)),u&4&&p.state==0&&(p=new ri(this.source,1)),p=p.updateFor(t,u);for(let g of t.effects)if(g.is(Ha))p=new ri(p.source,1,g.value);else if(g.is(js))p=new ri(p.source,0);else if(g.is(Xu))for(let b of g.value)b.source==p.source&&(p=b);return p}updateFor(t,a){return this.map(t.changes)}map(t){return this}touches(t){return t.changes.touchesRange(_r(t.state))}}class jr extends ri{constructor(t,a,u,p,g,b){super(t,3,a),this.limit=u,this.result=p,this.from=g,this.to=b}hasResult(){return!0}updateFor(t,a){var u;if(!(a&3))return this.map(t.changes);let p=this.result;p.map&&!t.changes.empty&&(p=p.map(p,t.changes));let g=t.changes.mapPos(this.from),b=t.changes.mapPos(this.to,1),M=_r(t.state);if(M>b||!p||a&2&&(_r(t.startState)==this.from||M<this.limit))return new ri(this.source,a&4?1:0);let k=t.changes.mapPos(this.limit);return t_(p.validFor,t.state,g,b)?new jr(this.source,this.explicit,k,p,g,b):p.update&&(p=p.update(p,g,b,new ap(t.state,M,!1)))?new jr(this.source,this.explicit,k,p,p.from,(u=p.to)!==null&&u!==void 0?u:_r(t.state)):new ri(this.source,1,this.explicit)}map(t){return t.empty?this:(this.result.map?this.result.map(this.result,t):this.result)?new jr(this.source,this.explicit,t.mapPos(this.limit),this.result,t.mapPos(this.from),t.mapPos(this.to,1)):new ri(this.source,0)}touches(t){return t.changes.touchesRange(this.from,this.to)}}function t_(f,t,a,u){if(!f)return!1;let p=t.sliceDoc(a,u);return typeof f=="function"?f(p,a,u,t):dp(f,!0).test(p)}const Xu=Be.define({map(f,t){return f.map(a=>a.map(t))}}),Ap=Be.define(),Bn=bt.define({create(){return Ka.start()},update(f,t){return f.update(t)},provide:f=>[Vl.from(f,t=>t.tooltip),st.contentAttributes.from(f,t=>t.attrs)]});function Iu(f,t){const a=t.completion.apply||t.completion.label;let u=f.state.field(Bn).active.find(p=>p.source==t.source);return u instanceof jr?(typeof a=="string"?f.dispatch({...Qg(f.state,a,u.from,u.to),annotations:Bu.of(t.completion)}):a(f,t.completion,u.from,u.to),!0):!1}const n_=jg(Bn,Iu);function Hi(f,t="option"){return a=>{let u=a.state.field(Bn,!1);if(!u||!u.open||u.open.disabled||Date.now()-u.open.timestamp<a.state.facet(vn).interactionDelay)return!1;let p=1,g;t=="page"&&(g=hh(a,u.open.tooltip))&&(p=Math.max(2,Math.floor(g.dom.offsetHeight/g.dom.querySelector("li").offsetHeight)-1));let{length:b}=u.open.options,M=u.open.selected>-1?u.open.selected+p*(f?1:-1):f?0:b-1;return M<0?M=t=="page"?0:b-1:M>=b&&(M=t=="page"?b-1:0),a.dispatch({effects:Ap.of(M)}),!0}}const Vu=f=>{let t=f.state.field(Bn,!1);return f.state.readOnly||!t||!t.open||t.open.selected<0||t.open.disabled||Date.now()-t.open.timestamp<f.state.facet(vn).interactionDelay?!1:Iu(f,t.open.options[t.open.selected])},Ja=f=>f.state.field(Bn,!1)?(f.dispatch({effects:Ha.of(!0)}),!0):!1,vp=f=>{let t=f.state.field(Bn,!1);return!t||!t.active.some(a=>a.state!=0)?!1:(f.dispatch({effects:js.of(null)}),!0)};class i_{constructor(t,a){this.active=t,this.context=a,this.time=Date.now(),this.updates=[],this.done=void 0}}const r_=50,s_=1e3,o_=ln.fromClass(class{constructor(f){this.view=f,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let t of f.state.field(Bn).active)t.isPending&&this.startQuery(t)}update(f){let t=f.state.field(Bn),a=f.state.facet(vn);if(!f.selectionSet&&!f.docChanged&&f.startState.field(Bn)==t)return;let u=f.transactions.some(g=>{let b=Op(g,a);return b&8||(g.selection||g.docChanged)&&!(b&3)});for(let g=0;g<this.running.length;g++){let b=this.running[g];if(u||b.context.abortOnDocChange&&f.docChanged||b.updates.length+f.transactions.length>r_&&Date.now()-b.time>s_){for(let M of b.context.abortListeners)try{M()}catch(k){gn(this.view.state,k)}b.context.abortListeners=null,this.running.splice(g--,1)}else b.updates.push(...f.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),f.transactions.some(g=>g.effects.some(b=>b.is(Ha)))&&(this.pendingStart=!0);let p=this.pendingStart?50:a.activateOnTypingDelay;if(this.debounceUpdate=t.active.some(g=>g.isPending&&!this.running.some(b=>b.active.source==g.source))?setTimeout(()=>this.startUpdate(),p):-1,this.composing!=0)for(let g of f.transactions)g.isUserEvent("input.type")?this.composing=2:this.composing==2&&g.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:f}=this.view,t=f.field(Bn);for(let a of t.active)a.isPending&&!this.running.some(u=>u.active.source==a.source)&&this.startQuery(a);this.running.length&&t.open&&t.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(vn).updateSyncTime))}startQuery(f){let{state:t}=this.view,a=_r(t),u=new ap(t,a,f.explicit,this.view),p=new i_(f,u);this.running.push(p),Promise.resolve(f.source(u)).then(g=>{p.context.aborted||(p.done=g||null,this.scheduleAccept())},g=>{this.view.dispatch({effects:js.of(null)}),gn(this.view.state,g)})}scheduleAccept(){this.running.every(f=>f.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(vn).updateSyncTime))}accept(){var f;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let t=[],a=this.view.state.facet(vn),u=this.view.state.field(Bn);for(let p=0;p<this.running.length;p++){let g=this.running[p];if(g.done===void 0)continue;if(this.running.splice(p--,1),g.done){let M=_r(g.updates.length?g.updates[0].startState:this.view.state),k=Math.min(M,g.done.from+(g.active.explicit?0:1)),R=new jr(g.active.source,g.active.explicit,k,g.done,g.done.from,(f=g.done.to)!==null&&f!==void 0?f:M);for(let Z of g.updates)R=R.update(Z,a);if(R.hasResult()){t.push(R);continue}}let b=u.active.find(M=>M.source==g.active.source);if(b&&b.isPending)if(g.done==null){let M=new ri(g.active.source,0);for(let k of g.updates)M=M.update(k,a);M.isPending||t.push(M)}else this.startQuery(b)}(t.length||u.open&&u.open.disabled)&&this.view.dispatch({effects:Xu.of(t)})}},{eventHandlers:{blur(f){let t=this.view.state.field(Bn,!1);if(t&&t.tooltip&&this.view.state.facet(vn).closeOnBlur){let a=t.open&&hh(this.view,t.open.tooltip);(!a||!a.dom.contains(f.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:js.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Ha.of(!1)}),20),this.composing=0}}}),a_=typeof navigator=="object"&&/Win/.test(navigator.platform),l_=rn.highest(st.domEventHandlers({keydown(f,t){let a=t.state.field(Bn,!1);if(!a||!a.open||a.open.disabled||a.open.selected<0||f.key.length>1||f.ctrlKey&&!(a_&&f.altKey)||f.metaKey)return!1;let u=a.open.options[a.open.selected],p=a.active.find(b=>b.source==u.source),g=u.completion.commitCharacters||p.result.commitCharacters;return g&&g.indexOf(f.key)>-1&&Iu(t,u),!1}})),xp=st.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class u_{constructor(t,a,u,p){this.field=t,this.line=a,this.from=u,this.to=p}}class Wu{constructor(t,a,u){this.field=t,this.from=a,this.to=u}map(t){let a=t.mapPos(this.from,-1,Ne.TrackDel),u=t.mapPos(this.to,1,Ne.TrackDel);return a==null||u==null?null:new Wu(this.field,a,u)}}class zu{constructor(t,a){this.lines=t,this.fieldPositions=a}instantiate(t,a){let u=[],p=[a],g=t.doc.lineAt(a),b=/^\s*/.exec(g.text)[0];for(let k of this.lines){if(u.length){let R=b,Z=/^\t*/.exec(k)[0].length;for(let j=0;j<Z;j++)R+=t.facet(Zs);p.push(a+R.length-Z),k=R+k.slice(Z)}u.push(k),a+=k.length+1}let M=this.fieldPositions.map(k=>new Wu(k.field,p[k.line]+k.from,p[k.line]+k.to));return{text:u,ranges:M}}static parse(t){let a=[],u=[],p=[],g;for(let b of t.split(/\r\n?|\n/)){for(;g=/[#$]\{(?:(\d+)(?::([^{}]*))?|((?:\\[{}]|[^{}])*))\}/.exec(b);){let M=g[1]?+g[1]:null,k=g[2]||g[3]||"",R=-1,Z=k.replace(/\\[{}]/g,j=>j[1]);for(let j=0;j<a.length;j++)(M!=null?a[j].seq==M:Z&&a[j].name==Z)&&(R=j);if(R<0){let j=0;for(;j<a.length&&(M==null||a[j].seq!=null&&a[j].seq<M);)j++;a.splice(j,0,{seq:M,name:Z}),R=j;for(let K of p)K.field>=R&&K.field++}for(let j of p)if(j.line==u.length&&j.from>g.index){let K=g[2]?3+(g[1]||"").length:2;j.from-=K,j.to-=K}p.push(new u_(R,u.length,g.index,g.index+Z.length)),b=b.slice(0,g.index)+k+b.slice(g.index+g[0].length)}b=b.replace(/\\([{}])/g,(M,k,R)=>{for(let Z of p)Z.line==u.length&&Z.from>R&&(Z.from--,Z.to--);return k}),u.push(b)}return new zu(u,p)}}let c_=_t.widget({widget:new class extends Vn{toDOM(){let f=document.createElement("span");return f.className="cm-snippetFieldPosition",f}ignoreEvent(){return!1}}}),h_=_t.mark({class:"cm-snippetField"});class Ur{constructor(t,a){this.ranges=t,this.active=a,this.deco=_t.set(t.map(u=>(u.from==u.to?c_:h_).range(u.from,u.to)),!0)}map(t){let a=[];for(let u of this.ranges){let p=u.map(t);if(!p)return null;a.push(p)}return new Ur(a,this.active)}selectionInsideField(t){return t.ranges.every(a=>this.ranges.some(u=>u.field==this.active&&u.from<=a.from&&u.to>=a.to))}}const Us=Be.define({map(f,t){return f&&f.map(t)}}),f_=Be.define(),qs=bt.define({create(){return null},update(f,t){for(let a of t.effects){if(a.is(Us))return a.value;if(a.is(f_)&&f)return new Ur(f.ranges,a.value)}return f&&t.docChanged&&(f=f.map(t.changes)),f&&t.selection&&!f.selectionInsideField(t.selection)&&(f=null),f},provide:f=>st.decorations.from(f,t=>t?t.deco:_t.none)});function Yu(f,t){return we.create(f.filter(a=>a.field==t).map(a=>we.range(a.from,a.to)))}function p_(f){let t=zu.parse(f);return(a,u,p,g)=>{let{text:b,ranges:M}=t.instantiate(a.state,p),{main:k}=a.state.selection,R={changes:{from:p,to:g==k.from?k.to:g,insert:V.of(b)},scrollIntoView:!0,annotations:u?[Bu.of(u),Ft.userEvent.of("input.complete")]:void 0};if(M.length&&(R.selection=Yu(M,0)),M.some(Z=>Z.field>0)){let Z=new Ur(M,0),j=R.effects=[Us.of(Z)];a.state.field(qs,!1)===void 0&&j.push(Be.appendConfig.of([qs,m_,g_,xp]))}a.dispatch(a.state.update(R))}}function Cp(f){return({state:t,dispatch:a})=>{let u=t.field(qs,!1);if(!u||f<0&&u.active==0)return!1;let p=u.active+f,g=f>0&&!u.ranges.some(b=>b.field==p+f);return a(t.update({selection:Yu(u.ranges,p),effects:Us.of(g?null:new Ur(u.ranges,p)),scrollIntoView:!0})),!0}}const d_=[{key:"Tab",run:Cp(1),shift:Cp(-1)},{key:"Escape",run:({state:f,dispatch:t})=>f.field(qs,!1)?(t(f.update({effects:Us.of(null)})),!0):!1}],Sp=Ze.define({combine(f){return f.length?f[0]:d_}}),m_=rn.highest(qo.compute([Sp],f=>f.facet(Sp)));function Qn(f,t){return{...t,apply:p_(f)}}const g_=st.domEventHandlers({mousedown(f,t){let a=t.state.field(qs,!1),u;if(!a||(u=t.posAtCoords({x:f.clientX,y:f.clientY}))==null)return!1;let p=a.ranges.find(g=>g.from<=u&&g.to>=u);return!p||p.field==a.active?!1:(t.dispatch({selection:Yu(a.ranges,p.field),effects:Us.of(a.ranges.some(g=>g.field>p.field)?new Ur(a.ranges,p.field):null),scrollIntoView:!0}),!0)}}),Hs={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},yr=Be.define({map(f,t){let a=t.mapPos(f,-1,Ne.TrackAfter);return a??void 0}}),ju=new class extends Le{};ju.startSide=1,ju.endSide=-1;const Pp=bt.define({create(){return vt.empty},update(f,t){if(f=f.map(t.changes),t.selection){let a=t.state.doc.lineAt(t.selection.main.head);f=f.update({filter:u=>u>=a.from&&u<=a.to})}for(let a of t.effects)a.is(yr)&&(f=f.update({add:[ju.range(a.value,a.value+1)]}));return f}});function __(){return[O_,Pp]}const Uu="()[]{}<>«»»«［］｛｝";function Mp(f){for(let t=0;t<Uu.length;t+=2)if(Uu.charCodeAt(t)==f)return Uu.charAt(t+1);return Ye(f<128?f:f+1)}function wp(f,t){return f.languageDataAt("closeBrackets",t)[0]||Hs}const y_=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),O_=st.inputHandler.of((f,t,a,u)=>{if((y_?f.composing:f.compositionStarted)||f.state.readOnly)return!1;let p=f.state.selection.main;if(u.length>2||u.length==2&&Te(Me(u,0))==1||t!=p.from||a!=p.to)return!1;let g=A_(f.state,u);return g?(f.dispatch(g),!0):!1}),b_=({state:f,dispatch:t})=>{if(f.readOnly)return!1;let u=wp(f,f.selection.main.head).brackets||Hs.brackets,p=null,g=f.changeByRange(b=>{if(b.empty){let M=v_(f.doc,b.head);for(let k of u)if(k==M&&el(f.doc,b.head)==Mp(Me(k,0)))return{changes:{from:b.head-k.length,to:b.head+k.length},range:we.cursor(b.head-k.length)}}return{range:p=b}});return p||t(f.update(g,{scrollIntoView:!0,userEvent:"delete.backward"})),!p};function A_(f,t){let a=wp(f,f.selection.main.head),u=a.brackets||Hs.brackets;for(let p of u){let g=Mp(Me(p,0));if(t==p)return g==p?S_(f,p,u.indexOf(p+p+p)>-1,a):x_(f,p,g,a.before||Hs.before);if(t==g&&kp(f,f.selection.main.from))return C_(f,p,g)}return null}function kp(f,t){let a=!1;return f.field(Pp).between(0,f.doc.length,u=>{u==t&&(a=!0)}),a}function el(f,t){let a=f.sliceString(t,t+2);return a.slice(0,Te(Me(a,0)))}function v_(f,t){let a=f.sliceString(t-2,t);return Te(Me(a,0))==a.length?a:a.slice(1)}function x_(f,t,a,u){let p=null,g=f.changeByRange(b=>{if(!b.empty)return{changes:[{insert:t,from:b.from},{insert:a,from:b.to}],effects:yr.of(b.to+t.length),range:we.range(b.anchor+t.length,b.head+t.length)};let M=el(f.doc,b.head);return!M||/\s/.test(M)||u.indexOf(M)>-1?{changes:{insert:t+a,from:b.head},effects:yr.of(b.head+t.length),range:we.cursor(b.head+t.length)}:{range:p=b}});return p?null:f.update(g,{scrollIntoView:!0,userEvent:"input.type"})}function C_(f,t,a){let u=null,p=f.changeByRange(g=>g.empty&&el(f.doc,g.head)==a?{changes:{from:g.head,to:g.head+a.length,insert:a},range:we.cursor(g.head+a.length)}:u={range:g});return u?null:f.update(p,{scrollIntoView:!0,userEvent:"input.type"})}function S_(f,t,a,u){let p=u.stringPrefixes||Hs.stringPrefixes,g=null,b=f.changeByRange(M=>{if(!M.empty)return{changes:[{insert:t,from:M.from},{insert:t,from:M.to}],effects:yr.of(M.to+t.length),range:we.range(M.anchor+t.length,M.head+t.length)};let k=M.head,R=el(f.doc,k),Z;if(R==t){if($p(f,k))return{changes:{insert:t+t,from:k},effects:yr.of(k+t.length),range:we.cursor(k+t.length)};if(kp(f,k)){let K=a&&f.sliceDoc(k,k+t.length*3)==t+t+t?t+t+t:t;return{changes:{from:k,to:k+K.length,insert:K},range:we.cursor(k+K.length)}}}else{if(a&&f.sliceDoc(k-2*t.length,k)==t+t&&(Z=Dp(f,k-2*t.length,p))>-1&&$p(f,Z))return{changes:{insert:t+t+t+t,from:k},effects:yr.of(k+t.length),range:we.cursor(k+t.length)};if(f.charCategorizer(k)(R)!=I.Word&&Dp(f,k,p)>-1&&!P_(f,k,t,p))return{changes:{insert:t+t,from:k},effects:yr.of(k+t.length),range:we.cursor(k+t.length)}}return{range:g=M}});return g?null:f.update(b,{scrollIntoView:!0,userEvent:"input.type"})}function $p(f,t){let a=On(f).resolveInner(t+1);return a.parent&&a.from==t}function P_(f,t,a,u){let p=On(f).resolveInner(t,-1),g=u.reduce((b,M)=>Math.max(b,M.length),0);for(let b=0;b<5;b++){let M=f.sliceDoc(p.from,Math.min(p.to,p.from+a.length+g)),k=M.indexOf(a);if(!k||k>-1&&u.indexOf(M.slice(0,k))>-1){let Z=p.firstChild;for(;Z&&Z.from==p.from&&Z.to-Z.from>a.length+k;){if(f.sliceDoc(Z.to-a.length,Z.to)==a)return!1;Z=Z.firstChild}return!0}let R=p.to==t&&p.parent;if(!R)break;p=R}return!1}function Dp(f,t,a){let u=f.charCategorizer(t);if(u(f.sliceDoc(t-1,t))!=I.Word)return t;for(let p of a){let g=t-p.length;if(f.sliceDoc(g,t)==p&&u(f.sliceDoc(g-1,g))!=I.Word)return g}return-1}function M_(f={}){return[l_,Bn,vn.of(f),o_,k_,xp]}const w_=[{key:"Ctrl-Space",run:Ja},{mac:"Alt-`",run:Ja},{mac:"Alt-i",run:Ja},{key:"Escape",run:vp},{key:"ArrowDown",run:Hi(!0)},{key:"ArrowUp",run:Hi(!1)},{key:"PageDown",run:Hi(!0,"page")},{key:"PageUp",run:Hi(!1,"page")},{key:"Enter",run:Vu}],k_=rn.highest(qo.computeN([vn],f=>f.facet(vn).defaultKeymap?[w_]:[]));class Ep{constructor(t,a,u){this.from=t,this.to=a,this.diagnostic=u}}class Or{constructor(t,a,u){this.diagnostics=t,this.panel=a,this.selected=u}static init(t,a,u){let p=u.facet(Ks).markerFilter;p&&(t=p(t,u));let g=t.slice().sort((oe,de)=>oe.from-de.from||oe.to-de.to),b=new Xn,M=[],k=0,R=u.doc.iter(),Z=0,j=u.doc.length;for(let oe=0;;){let de=oe==g.length?null:g[oe];if(!de&&!M.length)break;let be,Se;if(M.length)be=k,Se=M.reduce((We,ot)=>Math.min(We,ot.to),de&&de.from>be?de.from:1e8);else{if(be=de.from,be>j)break;Se=de.to,M.push(de),oe++}for(;oe<g.length;){let We=g[oe];if(We.from==be&&(We.to>We.from||We.to==be))M.push(We),oe++,Se=Math.min(We.to,Se);else{Se=Math.min(We.from,Se);break}}Se=Math.min(Se,j);let Ee=!1;if(M.some(We=>We.from==be&&(We.to==Se||Se==j))&&(Ee=be==Se,!Ee&&Se-be<10)){let We=be-(Z+R.value.length);We>0&&(R.next(We),Z=be);for(let ot=be;;){if(ot>=Se){Ee=!0;break}if(!R.lineBreak&&Z+R.value.length>ot)break;ot=Z+R.value.length,Z+=R.value.length,R.next()}}let ze=Q_(M);if(Ee)b.add(be,be,_t.widget({widget:new L_(ze),diagnostics:M.slice()}));else{let We=M.reduce((ot,Ve)=>Ve.markClass?ot+" "+Ve.markClass:ot,"");b.add(be,Se,_t.mark({class:"cm-lintRange cm-lintRange-"+ze+We,diagnostics:M.slice(),inclusiveEnd:M.some(ot=>ot.to>Se)}))}if(k=Se,k==j)break;for(let We=0;We<M.length;We++)M[We].to<=k&&M.splice(We--,1)}let K=b.finish();return new Or(K,a,qr(K))}}function qr(f,t=null,a=0){let u=null;return f.between(a,1e9,(p,g,{spec:b})=>{if(!(t&&b.diagnostics.indexOf(t)<0))if(!u)u=new Ep(p,g,t||b.diagnostics[0]);else{if(b.diagnostics.indexOf(u.diagnostic)<0)return!1;u=new Ep(u.from,g,u.diagnostic)}}),u}function $_(f,t){let a=t.pos,u=t.end||a,p=f.state.facet(Ks).hideOn(f,a,u);if(p!=null)return p;let g=f.startState.doc.lineAt(t.pos);return!!(f.effects.some(b=>b.is(Fp))||f.changes.touchesRange(g.from,Math.max(g.to,u)))}function D_(f,t){return f.field(Yn,!1)?t:t.concat(Be.appendConfig.of(X_))}const Fp=Be.define(),qu=Be.define(),Tp=Be.define(),Yn=bt.define({create(){return new Or(_t.none,null,null)},update(f,t){if(t.docChanged&&f.diagnostics.size){let a=f.diagnostics.map(t.changes),u=null,p=f.panel;if(f.selected){let g=t.changes.mapPos(f.selected.from,1);u=qr(a,f.selected.diagnostic,g)||qr(a,null,g)}!a.size&&p&&t.state.facet(Ks).autoPanel&&(p=null),f=new Or(a,p,u)}for(let a of t.effects)if(a.is(Fp)){let u=t.state.facet(Ks).autoPanel?a.value.length?Js.open:null:f.panel;f=Or.init(a.value,u,t.state)}else a.is(qu)?f=new Or(f.diagnostics,a.value?Js.open:null,f.selected):a.is(Tp)&&(f=new Or(f.diagnostics,f.panel,a.value));return f},provide:f=>[Es.from(f,t=>t.panel),st.decorations.from(f,t=>t.diagnostics)]}),E_=_t.mark({class:"cm-lintRange cm-lintRange-active"});function F_(f,t,a){let{diagnostics:u}=f.state.field(Yn),p,g=-1,b=-1;u.between(t-(a<0?1:0),t+(a>0?1:0),(k,R,{spec:Z})=>{if(t>=k&&t<=R&&(k==R||(t>k||a>0)&&(t<R||a<0)))return p=Z.diagnostics,g=k,b=R,!1});let M=f.state.facet(Ks).tooltipFilter;return p&&M&&(p=M(p,f.state)),p?{pos:g,end:b,above:f.state.doc.lineAt(g).to<b,create(){return{dom:T_(f,p)}}}:null}function T_(f,t){return Ut("ul",{class:"cm-tooltip-lint"},t.map(a=>Zp(f,a,!1)))}const R_=f=>{let t=f.state.field(Yn,!1);(!t||!t.panel)&&f.dispatch({effects:D_(f.state,[qu.of(!0)])});let a=Ds(f,Js.open);return a&&a.dom.querySelector(".cm-panel-lint ul").focus(),!0},Rp=f=>{let t=f.state.field(Yn,!1);return!t||!t.panel?!1:(f.dispatch({effects:qu.of(!1)}),!0)},G_=f=>{let t=f.state.field(Yn,!1);if(!t)return!1;let a=f.state.selection.main,u=t.diagnostics.iter(a.to+1);return!u.value&&(u=t.diagnostics.iter(0),!u.value||u.from==a.from&&u.to==a.to)?!1:(f.dispatch({selection:{anchor:u.from,head:u.to},scrollIntoView:!0}),!0)},Ks=Ze.define({combine(f){return{sources:f.map(t=>t.source).filter(t=>t!=null),...$e(f.map(t=>t.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:Gp,tooltipFilter:Gp,needsRefresh:(t,a)=>t?a?u=>t(u)||a(u):t:a,hideOn:(t,a)=>t?a?(u,p,g)=>t(u,p,g)||a(u,p,g):t:a,autoPanel:(t,a)=>t||a})}}});function Gp(f,t){return f?t?(a,u)=>t(f(a,u),u):f:t}function Lp(f){let t=[];if(f)e:for(let{name:a}of f){for(let u=0;u<a.length;u++){let p=a[u];if(/[a-zA-Z]/.test(p)&&!t.some(g=>g.toLowerCase()==p.toLowerCase())){t.push(p);continue e}}t.push("")}return t}function Zp(f,t,a){var u;let p=a?Lp(t.actions):[];return Ut("li",{class:"cm-diagnostic cm-diagnostic-"+t.severity},Ut("span",{class:"cm-diagnosticText"},t.renderMessage?t.renderMessage(f):t.message),(u=t.actions)===null||u===void 0?void 0:u.map((g,b)=>{let M=!1,k=oe=>{if(oe.preventDefault(),M)return;M=!0;let de=qr(f.state.field(Yn).diagnostics,t);de&&g.apply(f,de.from,de.to)},{name:R}=g,Z=p[b]?R.indexOf(p[b]):-1,j=Z<0?R:[R.slice(0,Z),Ut("u",R.slice(Z,Z+1)),R.slice(Z+1)],K=g.markClass?" "+g.markClass:"";return Ut("button",{type:"button",class:"cm-diagnosticAction"+K,onclick:k,onmousedown:k,"aria-label":` Action: ${R}${Z<0?"":` (access key "${p[b]})"`}.`},j)}),t.source&&Ut("div",{class:"cm-diagnosticSource"},t.source))}class L_ extends Vn{constructor(t){super(),this.sev=t}eq(t){return t.sev==this.sev}toDOM(){return Ut("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class Np{constructor(t,a){this.diagnostic=a,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Zp(t,a,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Js{constructor(t){this.view=t,this.items=[];let a=p=>{if(p.keyCode==27)Rp(this.view),this.view.focus();else if(p.keyCode==38||p.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(p.keyCode==40||p.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(p.keyCode==36)this.moveSelection(0);else if(p.keyCode==35)this.moveSelection(this.items.length-1);else if(p.keyCode==13)this.view.focus();else if(p.keyCode>=65&&p.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:g}=this.items[this.selectedIndex],b=Lp(g.actions);for(let M=0;M<b.length;M++)if(b[M].toUpperCase().charCodeAt(0)==p.keyCode){let k=qr(this.view.state.field(Yn).diagnostics,g);k&&g.actions[M].apply(t,k.from,k.to)}}else return;p.preventDefault()},u=p=>{for(let g=0;g<this.items.length;g++)this.items[g].dom.contains(p.target)&&this.moveSelection(g)};this.list=Ut("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:a,onclick:u}),this.dom=Ut("div",{class:"cm-panel-lint"},this.list,Ut("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Rp(this.view)},"×")),this.update()}get selectedIndex(){let t=this.view.state.field(Yn).selected;if(!t)return-1;for(let a=0;a<this.items.length;a++)if(this.items[a].diagnostic==t.diagnostic)return a;return-1}update(){let{diagnostics:t,selected:a}=this.view.state.field(Yn),u=0,p=!1,g=null,b=new Set;for(t.between(0,this.view.state.doc.length,(M,k,{spec:R})=>{for(let Z of R.diagnostics){if(b.has(Z))continue;b.add(Z);let j=-1,K;for(let oe=u;oe<this.items.length;oe++)if(this.items[oe].diagnostic==Z){j=oe;break}j<0?(K=new Np(this.view,Z),this.items.splice(u,0,K),p=!0):(K=this.items[j],j>u&&(this.items.splice(u,j-u),p=!0)),a&&K.diagnostic==a.diagnostic?K.dom.hasAttribute("aria-selected")||(K.dom.setAttribute("aria-selected","true"),g=K):K.dom.hasAttribute("aria-selected")&&K.dom.removeAttribute("aria-selected"),u++}});u<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)p=!0,this.items.pop();this.items.length==0&&(this.items.push(new Np(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),p=!0),g?(this.list.setAttribute("aria-activedescendant",g.id),this.view.requestMeasure({key:this,read:()=>({sel:g.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:M,panel:k})=>{let R=k.height/this.list.offsetHeight;M.top<k.top?this.list.scrollTop-=(k.top-M.top)/R:M.bottom>k.bottom&&(this.list.scrollTop+=(M.bottom-k.bottom)/R)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),p&&this.sync()}sync(){let t=this.list.firstChild;function a(){let u=t;t=u.nextSibling,u.remove()}for(let u of this.items)if(u.dom.parentNode==this.list){for(;t!=u.dom;)a();t=u.dom.nextSibling}else this.list.insertBefore(u.dom,t);for(;t;)a()}moveSelection(t){if(this.selectedIndex<0)return;let a=this.view.state.field(Yn),u=qr(a.diagnostics,this.items[t].diagnostic);u&&this.view.dispatch({selection:{anchor:u.from,head:u.to},scrollIntoView:!0,effects:Tp.of(u)})}static open(t){return new Js(t)}}function Z_(f,t='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${t}>${encodeURIComponent(f)}</svg>')`}function tl(f){return Z_(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${f}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const N_=st.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:tl("#d11")},".cm-lintRange-warning":{backgroundImage:tl("orange")},".cm-lintRange-info":{backgroundImage:tl("#999")},".cm-lintRange-hint":{backgroundImage:tl("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function B_(f){return f=="error"?4:f=="warning"?3:f=="info"?2:1}function Q_(f){let t="hint",a=1;for(let u of f){let p=B_(u.severity);p>a&&(a=p,t=u.severity)}return t}const X_=[Yn,st.decorations.compute([Yn],f=>{let{selected:t,panel:a}=f.field(Yn);return!t||!a||t.from==t.to?_t.none:_t.set([E_.range(t.from,t.to)])}),l0(F_,{hideOn:$_}),N_];class nl{constructor(t,a,u,p,g,b,M,k,R,Z=0,j){this.p=t,this.stack=a,this.state=u,this.reducePos=p,this.pos=g,this.score=b,this.buffer=M,this.bufferBase=k,this.curContext=R,this.lookAhead=Z,this.parent=j}toString(){return`[${this.stack.filter((t,a)=>a%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(t,a,u=0){let p=t.parser.context;return new nl(t,[],a,u,u,0,[],0,p?new Bp(p,p.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(t,a){this.stack.push(this.state,a,this.bufferBase+this.buffer.length),this.state=t}reduce(t){var a;let u=t>>19,p=t&65535,{parser:g}=this.p,b=this.reducePos<this.pos-25&&this.setLookAhead(this.pos),M=g.dynamicPrecedence(p);if(M&&(this.score+=M),u==0){this.pushState(g.getGoto(this.state,p,!0),this.reducePos),p<g.minRepeatTerm&&this.storeNode(p,this.reducePos,this.reducePos,b?8:4,!0),this.reduceContext(p,this.reducePos);return}let k=this.stack.length-(u-1)*3-(t&262144?6:0),R=k?this.stack[k-2]:this.p.ranges[0].from,Z=this.reducePos-R;Z>=2e3&&!(!((a=this.p.parser.nodeSet.types[p])===null||a===void 0)&&a.isAnonymous)&&(R==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=Z):this.p.lastBigReductionSize<Z&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=R,this.p.lastBigReductionSize=Z));let j=k?this.stack[k-1]:0,K=this.bufferBase+this.buffer.length-j;if(p<g.minRepeatTerm||t&131072){let oe=g.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(p,R,oe,K+4,!0)}if(t&262144)this.state=this.stack[k];else{let oe=this.stack[k-3];this.state=g.getGoto(oe,p,!0)}for(;this.stack.length>k;)this.stack.pop();this.reduceContext(p,R)}storeNode(t,a,u,p=4,g=!1){if(t==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let b=this,M=this.buffer.length;if(M==0&&b.parent&&(M=b.bufferBase-b.parent.bufferBase,b=b.parent),M>0&&b.buffer[M-4]==0&&b.buffer[M-1]>-1){if(a==u)return;if(b.buffer[M-2]>=a){b.buffer[M-2]=u;return}}}if(!g||this.pos==u)this.buffer.push(t,a,u,p);else{let b=this.buffer.length;if(b>0&&(this.buffer[b-4]!=0||this.buffer[b-1]<0)){let M=!1;for(let k=b;k>0&&this.buffer[k-2]>u;k-=4)if(this.buffer[k-1]>=0){M=!0;break}if(M)for(;b>0&&this.buffer[b-2]>u;)this.buffer[b]=this.buffer[b-4],this.buffer[b+1]=this.buffer[b-3],this.buffer[b+2]=this.buffer[b-2],this.buffer[b+3]=this.buffer[b-1],b-=4,p>4&&(p-=4)}this.buffer[b]=t,this.buffer[b+1]=a,this.buffer[b+2]=u,this.buffer[b+3]=p}}shift(t,a,u,p){if(t&131072)this.pushState(t&65535,this.pos);else if((t&262144)==0){let g=t,{parser:b}=this.p;(p>this.pos||a<=b.maxNode)&&(this.pos=p,b.stateFlag(g,1)||(this.reducePos=p)),this.pushState(g,u),this.shiftContext(a,u),a<=b.maxNode&&this.buffer.push(a,u,p,4)}else this.pos=p,this.shiftContext(a,u),a<=this.p.parser.maxNode&&this.buffer.push(a,u,p,4)}apply(t,a,u,p){t&65536?this.reduce(t):this.shift(t,a,u,p)}useNode(t,a){let u=this.p.reused.length-1;(u<0||this.p.reused[u]!=t)&&(this.p.reused.push(t),u++);let p=this.pos;this.reducePos=this.pos=p+t.length,this.pushState(a,p),this.buffer.push(u,p,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,t,this,this.p.stream.reset(this.pos-t.length)))}split(){let t=this,a=t.buffer.length;for(;a>0&&t.buffer[a-2]>t.reducePos;)a-=4;let u=t.buffer.slice(a),p=t.bufferBase+a;for(;t&&p==t.bufferBase;)t=t.parent;return new nl(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,u,p,this.curContext,this.lookAhead,t)}recoverByDelete(t,a){let u=t<=this.p.parser.maxNode;u&&this.storeNode(t,this.pos,a,4),this.storeNode(0,this.pos,a,u?8:4),this.pos=this.reducePos=a,this.score-=190}canShift(t){for(let a=new I_(this);;){let u=this.p.parser.stateSlot(a.state,4)||this.p.parser.hasAction(a.state,t);if(u==0)return!1;if((u&65536)==0)return!0;a.reduce(u)}}recoverByInsert(t){if(this.stack.length>=300)return[];let a=this.p.parser.nextStates(this.state);if(a.length>8||this.stack.length>=120){let p=[];for(let g=0,b;g<a.length;g+=2)(b=a[g+1])!=this.state&&this.p.parser.hasAction(b,t)&&p.push(a[g],b);if(this.stack.length<120)for(let g=0;p.length<8&&g<a.length;g+=2){let b=a[g+1];p.some((M,k)=>k&1&&M==b)||p.push(a[g],b)}a=p}let u=[];for(let p=0;p<a.length&&u.length<4;p+=2){let g=a[p+1];if(g==this.state)continue;let b=this.split();b.pushState(g,this.pos),b.storeNode(0,b.pos,b.pos,4,!0),b.shiftContext(a[p],this.pos),b.reducePos=this.pos,b.score-=200,u.push(b)}return u}forceReduce(){let{parser:t}=this.p,a=t.stateSlot(this.state,5);if((a&65536)==0)return!1;if(!t.validAction(this.state,a)){let u=a>>19,p=a&65535,g=this.stack.length-u*3;if(g<0||t.getGoto(this.stack[g],p,!1)<0){let b=this.findForcedReduction();if(b==null)return!1;a=b}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(a),!0}findForcedReduction(){let{parser:t}=this.p,a=[],u=(p,g)=>{if(!a.includes(p))return a.push(p),t.allActions(p,b=>{if(!(b&393216))if(b&65536){let M=(b>>19)-g;if(M>1){let k=b&65535,R=this.stack.length-M*3;if(R>=0&&t.getGoto(this.stack[R],k,!1)>=0)return M<<19|65536|k}}else{let M=u(b,g+1);if(M!=null)return M}})};return u(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:t}=this.p;return t.data[t.stateSlot(this.state,1)]==65535&&!t.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(t){if(this.state!=t.state||this.stack.length!=t.stack.length)return!1;for(let a=0;a<this.stack.length;a+=3)if(this.stack[a]!=t.stack[a])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(t){return this.p.parser.dialect.flags[t]}shiftContext(t,a){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,t,this,this.p.stream.reset(a)))}reduceContext(t,a){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,t,this,this.p.stream.reset(a)))}emitContext(){let t=this.buffer.length-1;(t<0||this.buffer[t]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let t=this.buffer.length-1;(t<0||this.buffer[t]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(t){if(t!=this.curContext.context){let a=new Bp(this.curContext.tracker,t);a.hash!=this.curContext.hash&&this.emitContext(),this.curContext=a}}setLookAhead(t){return t<=this.lookAhead?!1:(this.emitLookAhead(),this.lookAhead=t,!0)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class Bp{constructor(t,a){this.tracker=t,this.context=a,this.hash=t.strict?t.hash(a):0}}class I_{constructor(t){this.start=t,this.state=t.state,this.stack=t.stack,this.base=this.stack.length}reduce(t){let a=t&65535,u=t>>19;u==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(u-1)*3;let p=this.start.p.parser.getGoto(this.stack[this.base-3],a,!0);this.state=p}}class il{constructor(t,a,u){this.stack=t,this.pos=a,this.index=u,this.buffer=t.buffer,this.index==0&&this.maybeNext()}static create(t,a=t.bufferBase+t.buffer.length){return new il(t,a,a-t.bufferBase)}maybeNext(){let t=this.stack.parent;t!=null&&(this.index=this.stack.bufferBase-t.bufferBase,this.stack=t,this.buffer=t.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new il(this.stack,this.pos,this.index)}}function eo(f,t=Uint16Array){if(typeof f!="string")return f;let a=null;for(let u=0,p=0;u<f.length;){let g=0;for(;;){let b=f.charCodeAt(u++),M=!1;if(b==126){g=65535;break}b>=92&&b--,b>=34&&b--;let k=b-32;if(k>=46&&(k-=46,M=!0),g+=k,M)break;g*=46}a?a[p++]=g:a=new t(g)}return a}class rl{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const Qp=new rl;class V_{constructor(t,a){this.input=t,this.ranges=a,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=Qp,this.rangeIndex=0,this.pos=this.chunkPos=a[0].from,this.range=a[0],this.end=a[a.length-1].to,this.readNext()}resolveOffset(t,a){let u=this.range,p=this.rangeIndex,g=this.pos+t;for(;g<u.from;){if(!p)return null;let b=this.ranges[--p];g-=u.from-b.to,u=b}for(;a<0?g>u.to:g>=u.to;){if(p==this.ranges.length-1)return null;let b=this.ranges[++p];g+=b.from-u.to,u=b}return g}clipPos(t){if(t>=this.range.from&&t<this.range.to)return t;for(let a of this.ranges)if(a.to>t)return Math.max(t,a.from);return this.end}peek(t){let a=this.chunkOff+t,u,p;if(a>=0&&a<this.chunk.length)u=this.pos+t,p=this.chunk.charCodeAt(a);else{let g=this.resolveOffset(t,1);if(g==null)return-1;if(u=g,u>=this.chunk2Pos&&u<this.chunk2Pos+this.chunk2.length)p=this.chunk2.charCodeAt(u-this.chunk2Pos);else{let b=this.rangeIndex,M=this.range;for(;M.to<=u;)M=this.ranges[++b];this.chunk2=this.input.chunk(this.chunk2Pos=u),u+this.chunk2.length>M.to&&(this.chunk2=this.chunk2.slice(0,M.to-u)),p=this.chunk2.charCodeAt(0)}}return u>=this.token.lookAhead&&(this.token.lookAhead=u+1),p}acceptToken(t,a=0){let u=a?this.resolveOffset(a,-1):this.pos;if(u==null||u<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=t,this.token.end=u}acceptTokenTo(t,a){this.token.value=t,this.token.end=a}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:t,chunkPos:a}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=t,this.chunk2Pos=a,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let t=this.input.chunk(this.pos),a=this.pos+t.length;this.chunk=a>this.range.to?t.slice(0,this.range.to-this.pos):t,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(t=1){for(this.chunkOff+=t;this.pos+t>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();t-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=t,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(t,a){if(a?(this.token=a,a.start=t,a.lookAhead=t+1,a.value=a.extended=-1):this.token=Qp,this.pos!=t){if(this.pos=t,t==this.end)return this.setDone(),this;for(;t<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;t>=this.range.to;)this.range=this.ranges[++this.rangeIndex];t>=this.chunkPos&&t<this.chunkPos+this.chunk.length?this.chunkOff=t-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(t,a){if(t>=this.chunkPos&&a<=this.chunkPos+this.chunk.length)return this.chunk.slice(t-this.chunkPos,a-this.chunkPos);if(t>=this.chunk2Pos&&a<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(t-this.chunk2Pos,a-this.chunk2Pos);if(t>=this.range.from&&a<=this.range.to)return this.input.read(t,a);let u="";for(let p of this.ranges){if(p.from>=a)break;p.to>t&&(u+=this.input.read(Math.max(p.from,t),Math.min(p.to,a)))}return u}}class Hr{constructor(t,a){this.data=t,this.id=a}token(t,a){let{parser:u}=a.p;Xp(this.data,t,a,this.id,u.data,u.tokenPrecTable)}}Hr.prototype.contextual=Hr.prototype.fallback=Hr.prototype.extend=!1;class Hu{constructor(t,a,u){this.precTable=a,this.elseToken=u,this.data=typeof t=="string"?eo(t):t}token(t,a){let u=t.pos,p=0;for(;;){let g=t.next<0,b=t.resolveOffset(1,1);if(Xp(this.data,t,a,0,this.data,this.precTable),t.token.value>-1)break;if(this.elseToken==null)return;if(g||p++,b==null)break;t.reset(b,t.token)}p&&(t.reset(u,t.token),t.acceptToken(this.elseToken,p))}}Hu.prototype.contextual=Hr.prototype.fallback=Hr.prototype.extend=!1;class to{constructor(t,a={}){this.token=t,this.contextual=!!a.contextual,this.fallback=!!a.fallback,this.extend=!!a.extend}}function Xp(f,t,a,u,p,g){let b=0,M=1<<u,{dialect:k}=a.p.parser;e:for(;(M&f[b])!=0;){let R=f[b+1];for(let oe=b+3;oe<R;oe+=2)if((f[oe+1]&M)>0){let de=f[oe];if(k.allows(de)&&(t.token.value==-1||t.token.value==de||W_(de,t.token.value,p,g))){t.acceptToken(de);break}}let Z=t.next,j=0,K=f[b+2];if(t.next<0&&K>j&&f[R+K*3-3]==65535){b=f[R+K*3-1];continue e}for(;j<K;){let oe=j+K>>1,de=R+oe+(oe<<1),be=f[de],Se=f[de+1]||65536;if(Z<be)K=oe;else if(Z>=Se)j=oe+1;else{b=f[de+2],t.advance();continue e}}break}}function Ip(f,t,a){for(let u=t,p;(p=f[u])!=65535;u++)if(p==a)return u-t;return-1}function W_(f,t,a,u){let p=Ip(a,u,t);return p<0||Ip(a,u,f)<p}const jn=typeof process<"u"&&process.env&&/\bparse\b/.test(process.env.LOG);let Ku=null;function Vp(f,t,a){let u=f.cursor(yn.IncludeAnonymous);for(u.moveTo(t);;)if(!(a<0?u.childBefore(t):u.childAfter(t)))for(;;){if((a<0?u.to<t:u.from>t)&&!u.type.isError)return a<0?Math.max(0,Math.min(u.to-1,t-25)):Math.min(f.length,Math.max(u.from+1,t+25));if(a<0?u.prevSibling():u.nextSibling())break;if(!u.parent())return a<0?0:f.length}}class z_{constructor(t,a){this.fragments=t,this.nodeSet=a,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let t=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(t){for(this.safeFrom=t.openStart?Vp(t.tree,t.from+t.offset,1)-t.offset:t.from,this.safeTo=t.openEnd?Vp(t.tree,t.to+t.offset,-1)-t.offset:t.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(t.tree),this.start.push(-t.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(t){if(t<this.nextStart)return null;for(;this.fragment&&this.safeTo<=t;)this.nextFragment();if(!this.fragment)return null;for(;;){let a=this.trees.length-1;if(a<0)return this.nextFragment(),null;let u=this.trees[a],p=this.index[a];if(p==u.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let g=u.children[p],b=this.start[a]+u.positions[p];if(b>t)return this.nextStart=b,null;if(g instanceof pn){if(b==t){if(b<this.safeFrom)return null;let M=b+g.length;if(M<=this.safeTo){let k=g.prop(Gt.lookAhead);if(!k||M+k<this.fragment.to)return g}}this.index[a]++,b+g.length>=Math.max(this.safeFrom,t)&&(this.trees.push(g),this.start.push(b),this.index.push(0))}else this.index[a]++,this.nextStart=b+g.length}}}class Y_{constructor(t,a){this.stream=a,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=t.tokenizers.map(u=>new rl)}getActions(t){let a=0,u=null,{parser:p}=t.p,{tokenizers:g}=p,b=p.stateSlot(t.state,3),M=t.curContext?t.curContext.hash:0,k=0;for(let R=0;R<g.length;R++){if((1<<R&b)==0)continue;let Z=g[R],j=this.tokens[R];if(!(u&&!Z.fallback)&&((Z.contextual||j.start!=t.pos||j.mask!=b||j.context!=M)&&(this.updateCachedToken(j,Z,t),j.mask=b,j.context=M),j.lookAhead>j.end+25&&(k=Math.max(j.lookAhead,k)),j.value!=0)){let K=a;if(j.extended>-1&&(a=this.addActions(t,j.extended,j.end,a)),a=this.addActions(t,j.value,j.end,a),!Z.extend&&(u=j,a>K))break}}for(;this.actions.length>a;)this.actions.pop();return k&&t.setLookAhead(k),!u&&t.pos==this.stream.end&&(u=new rl,u.value=t.p.parser.eofTerm,u.start=u.end=t.pos,a=this.addActions(t,u.value,u.end,a)),this.mainToken=u,this.actions}getMainToken(t){if(this.mainToken)return this.mainToken;let a=new rl,{pos:u,p}=t;return a.start=u,a.end=Math.min(u+1,p.stream.end),a.value=u==p.stream.end?p.parser.eofTerm:0,a}updateCachedToken(t,a,u){let p=this.stream.clipPos(u.pos);if(a.token(this.stream.reset(p,t),u),t.value>-1){let{parser:g}=u.p;for(let b=0;b<g.specialized.length;b++)if(g.specialized[b]==t.value){let M=g.specializers[b](this.stream.read(t.start,t.end),u);if(M>=0&&u.p.parser.dialect.allows(M>>1)){(M&1)==0?t.value=M>>1:t.extended=M>>1;break}}}else t.value=0,t.end=this.stream.clipPos(p+1)}putAction(t,a,u,p){for(let g=0;g<p;g+=3)if(this.actions[g]==t)return p;return this.actions[p++]=t,this.actions[p++]=a,this.actions[p++]=u,p}addActions(t,a,u,p){let{state:g}=t,{parser:b}=t.p,{data:M}=b;for(let k=0;k<2;k++)for(let R=b.stateSlot(g,k?2:1);;R+=3){if(M[R]==65535)if(M[R+1]==1)R=Li(M,R+2);else{p==0&&M[R+1]==2&&(p=this.putAction(Li(M,R+2),a,u,p));break}M[R]==a&&(p=this.putAction(Li(M,R+1),a,u,p))}return p}}class j_{constructor(t,a,u,p){this.parser=t,this.input=a,this.ranges=p,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new V_(a,p),this.tokens=new Y_(t,this.stream),this.topTerm=t.top[1];let{from:g}=p[0];this.stacks=[nl.start(this,t.top[0],g)],this.fragments=u.length&&this.stream.end-g>t.bufferLength*4?new z_(u,t.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let t=this.stacks,a=this.minStackPos,u=this.stacks=[],p,g;if(this.bigReductionCount>300&&t.length==1){let[b]=t;for(;b.forceReduce()&&b.stack.length&&b.stack[b.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let b=0;b<t.length;b++){let M=t[b];for(;;){if(this.tokens.mainToken=null,M.pos>a)u.push(M);else{if(this.advanceStack(M,u,t))continue;{p||(p=[],g=[]),p.push(M);let k=this.tokens.getMainToken(M);g.push(k.value,k.end)}}break}}if(!u.length){let b=p&&H_(p);if(b)return jn&&console.log("Finish with "+this.stackID(b)),this.stackToTree(b);if(this.parser.strict)throw jn&&p&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+a);this.recovering||(this.recovering=5)}if(this.recovering&&p){let b=this.stoppedAt!=null&&p[0].pos>this.stoppedAt?p[0]:this.runRecovery(p,g,u);if(b)return jn&&console.log("Force-finish "+this.stackID(b)),this.stackToTree(b.forceAll())}if(this.recovering){let b=this.recovering==1?1:this.recovering*3;if(u.length>b)for(u.sort((M,k)=>k.score-M.score);u.length>b;)u.pop();u.some(M=>M.reducePos>a)&&this.recovering--}else if(u.length>1){e:for(let b=0;b<u.length-1;b++){let M=u[b];for(let k=b+1;k<u.length;k++){let R=u[k];if(M.sameState(R)||M.buffer.length>500&&R.buffer.length>500)if((M.score-R.score||M.buffer.length-R.buffer.length)>0)u.splice(k--,1);else{u.splice(b--,1);continue e}}}u.length>12&&(u.sort((b,M)=>M.score-b.score),u.splice(12,u.length-12))}this.minStackPos=u[0].pos;for(let b=1;b<u.length;b++)u[b].pos<this.minStackPos&&(this.minStackPos=u[b].pos);return null}stopAt(t){if(this.stoppedAt!=null&&this.stoppedAt<t)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=t}advanceStack(t,a,u){let p=t.pos,{parser:g}=this,b=jn?this.stackID(t)+" -> ":"";if(this.stoppedAt!=null&&p>this.stoppedAt)return t.forceReduce()?t:null;if(this.fragments){let R=t.curContext&&t.curContext.tracker.strict,Z=R?t.curContext.hash:0;for(let j=this.fragments.nodeAt(p);j;){let K=this.parser.nodeSet.types[j.type.id]==j.type?g.getGoto(t.state,j.type.id):-1;if(K>-1&&j.length&&(!R||(j.prop(Gt.contextHash)||0)==Z))return t.useNode(j,K),jn&&console.log(b+this.stackID(t)+` (via reuse of ${g.getName(j.type.id)})`),!0;if(!(j instanceof pn)||j.children.length==0||j.positions[0]>0)break;let oe=j.children[0];if(oe instanceof pn&&j.positions[0]==0)j=oe;else break}}let M=g.stateSlot(t.state,4);if(M>0)return t.reduce(M),jn&&console.log(b+this.stackID(t)+` (via always-reduce ${g.getName(M&65535)})`),!0;if(t.stack.length>=8400)for(;t.stack.length>6e3&&t.forceReduce(););let k=this.tokens.getActions(t);for(let R=0;R<k.length;){let Z=k[R++],j=k[R++],K=k[R++],oe=R==k.length||!u,de=oe?t:t.split(),be=this.tokens.mainToken;if(de.apply(Z,j,be?be.start:de.pos,K),jn&&console.log(b+this.stackID(de)+` (via ${(Z&65536)==0?"shift":`reduce of ${g.getName(Z&65535)}`} for ${g.getName(j)} @ ${p}${de==t?"":", split"})`),oe)return!0;de.pos>p?a.push(de):u.push(de)}return!1}advanceFully(t,a){let u=t.pos;for(;;){if(!this.advanceStack(t,null,null))return!1;if(t.pos>u)return Wp(t,a),!0}}runRecovery(t,a,u){let p=null,g=!1;for(let b=0;b<t.length;b++){let M=t[b],k=a[b<<1],R=a[(b<<1)+1],Z=jn?this.stackID(M)+" -> ":"";if(M.deadEnd&&(g||(g=!0,M.restart(),jn&&console.log(Z+this.stackID(M)+" (restarted)"),this.advanceFully(M,u))))continue;let j=M.split(),K=Z;for(let oe=0;oe<10&&j.forceReduce()&&(jn&&console.log(K+this.stackID(j)+" (via force-reduce)"),!this.advanceFully(j,u));oe++)jn&&(K=this.stackID(j)+" -> ");for(let oe of M.recoverByInsert(k))jn&&console.log(Z+this.stackID(oe)+" (via recover-insert)"),this.advanceFully(oe,u);this.stream.end>M.pos?(R==M.pos&&(R++,k=0),M.recoverByDelete(k,R),jn&&console.log(Z+this.stackID(M)+` (via recover-delete ${this.parser.getName(k)})`),Wp(M,u)):(!p||p.score<M.score)&&(p=M)}return p}stackToTree(t){return t.close(),pn.build({buffer:il.create(t),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:t.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(t){let a=(Ku||(Ku=new WeakMap)).get(t);return a||Ku.set(t,a=String.fromCodePoint(this.nextStackID++)),a+t}}function Wp(f,t){for(let a=0;a<t.length;a++){let u=t[a];if(u.pos==f.pos&&u.sameState(f)){t[a].score<f.score&&(t[a]=f);return}}t.push(f)}class U_{constructor(t,a,u){this.source=t,this.flags=a,this.disabled=u}allows(t){return!this.disabled||this.disabled[t]==0}}const Ju=f=>f;class q_{constructor(t){this.start=t.start,this.shift=t.shift||Ju,this.reduce=t.reduce||Ju,this.reuse=t.reuse||Ju,this.hash=t.hash||(()=>0),this.strict=t.strict!==!1}}class sl extends kh{constructor(t){if(super(),this.wrappers=[],t.version!=14)throw new RangeError(`Parser version (${t.version}) doesn't match runtime version (14)`);let a=t.nodeNames.split(" ");this.minRepeatTerm=a.length;for(let M=0;M<t.repeatNodeCount;M++)a.push("");let u=Object.keys(t.topRules).map(M=>t.topRules[M][1]),p=[];for(let M=0;M<a.length;M++)p.push([]);function g(M,k,R){p[M].push([k,k.deserialize(String(R))])}if(t.nodeProps)for(let M of t.nodeProps){let k=M[0];typeof k=="string"&&(k=Gt[k]);for(let R=1;R<M.length;){let Z=M[R++];if(Z>=0)g(Z,k,M[R++]);else{let j=M[R+-Z];for(let K=-Z;K>0;K--)g(M[R++],k,j);R++}}}this.nodeSet=new Ul(a.map((M,k)=>Ln.define({name:k>=this.minRepeatTerm?void 0:M,id:k,props:p[k],top:u.indexOf(k)>-1,error:k==0,skipped:t.skippedNodes&&t.skippedNodes.indexOf(k)>-1}))),t.propSources&&(this.nodeSet=this.nodeSet.extend(...t.propSources)),this.strict=!1,this.bufferLength=vh;let b=eo(t.tokenData);this.context=t.context,this.specializerSpecs=t.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let M=0;M<this.specializerSpecs.length;M++)this.specialized[M]=this.specializerSpecs[M].term;this.specializers=this.specializerSpecs.map(zp),this.states=eo(t.states,Uint32Array),this.data=eo(t.stateData),this.goto=eo(t.goto),this.maxTerm=t.maxTerm,this.tokenizers=t.tokenizers.map(M=>typeof M=="number"?new Hr(b,M):M),this.topRules=t.topRules,this.dialects=t.dialects||{},this.dynamicPrecedences=t.dynamicPrecedences||null,this.tokenPrecTable=t.tokenPrec,this.termNames=t.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(t,a,u){let p=new j_(this,t,a,u);for(let g of this.wrappers)p=g(p,t,a,u);return p}getGoto(t,a,u=!1){let p=this.goto;if(a>=p[0])return-1;for(let g=p[a+1];;){let b=p[g++],M=b&1,k=p[g++];if(M&&u)return k;for(let R=g+(b>>1);g<R;g++)if(p[g]==t)return k;if(M)return-1}}hasAction(t,a){let u=this.data;for(let p=0;p<2;p++)for(let g=this.stateSlot(t,p?2:1),b;;g+=3){if((b=u[g])==65535)if(u[g+1]==1)b=u[g=Li(u,g+2)];else{if(u[g+1]==2)return Li(u,g+2);break}if(b==a||b==0)return Li(u,g+1)}return 0}stateSlot(t,a){return this.states[t*6+a]}stateFlag(t,a){return(this.stateSlot(t,0)&a)>0}validAction(t,a){return!!this.allActions(t,u=>u==a?!0:null)}allActions(t,a){let u=this.stateSlot(t,4),p=u?a(u):void 0;for(let g=this.stateSlot(t,1);p==null;g+=3){if(this.data[g]==65535)if(this.data[g+1]==1)g=Li(this.data,g+2);else break;p=a(Li(this.data,g+1))}return p}nextStates(t){let a=[];for(let u=this.stateSlot(t,1);;u+=3){if(this.data[u]==65535)if(this.data[u+1]==1)u=Li(this.data,u+2);else break;if((this.data[u+2]&1)==0){let p=this.data[u+1];a.some((g,b)=>b&1&&g==p)||a.push(this.data[u],p)}}return a}configure(t){let a=Object.assign(Object.create(sl.prototype),this);if(t.props&&(a.nodeSet=this.nodeSet.extend(...t.props)),t.top){let u=this.topRules[t.top];if(!u)throw new RangeError(`Invalid top rule name ${t.top}`);a.top=u}return t.tokenizers&&(a.tokenizers=this.tokenizers.map(u=>{let p=t.tokenizers.find(g=>g.from==u);return p?p.to:u})),t.specializers&&(a.specializers=this.specializers.slice(),a.specializerSpecs=this.specializerSpecs.map((u,p)=>{let g=t.specializers.find(M=>M.from==u.external);if(!g)return u;let b=Object.assign(Object.assign({},u),{external:g.to});return a.specializers[p]=zp(b),b})),t.contextTracker&&(a.context=t.contextTracker),t.dialect&&(a.dialect=this.parseDialect(t.dialect)),t.strict!=null&&(a.strict=t.strict),t.wrap&&(a.wrappers=a.wrappers.concat(t.wrap)),t.bufferLength!=null&&(a.bufferLength=t.bufferLength),a}hasWrappers(){return this.wrappers.length>0}getName(t){return this.termNames?this.termNames[t]:String(t<=this.maxNode&&this.nodeSet.types[t].name||t)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(t){let a=this.dynamicPrecedences;return a==null?0:a[t]||0}parseDialect(t){let a=Object.keys(this.dialects),u=a.map(()=>!1);if(t)for(let g of t.split(" ")){let b=a.indexOf(g);b>=0&&(u[b]=!0)}let p=null;for(let g=0;g<a.length;g++)if(!u[g])for(let b=this.dialects[a[g]],M;(M=this.data[b++])!=65535;)(p||(p=new Uint8Array(this.maxTerm+1)))[M]=1;return new U_(t,u,p)}static deserialize(t){return new sl(t)}}function Li(f,t){return f[t]|f[t+1]<<16}function H_(f){let t=null;for(let a of f){let u=a.p.stoppedAt;(a.pos==a.p.stream.end||u!=null&&a.pos>u)&&a.p.parser.stateFlag(a.state,2)&&(!t||t.score<a.score)&&(t=a)}return t}function zp(f){if(f.external){let t=f.extend?1:0;return(a,u)=>f.external(a,u)<<1|t}return f.get}const K_=316,J_=317,Yp=1,ey=2,ty=3,ny=4,iy=318,ry=320,sy=321,oy=5,ay=6,ly=0,ec=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],jp=125,uy=59,tc=47,cy=42,hy=43,fy=45,py=60,dy=44,my=63,gy=46,_y=91,yy=new q_({start:!1,shift(f,t){return t==oy||t==ay||t==ry?f:t==sy},strict:!1}),Oy=new to((f,t)=>{let{next:a}=f;(a==jp||a==-1||t.context)&&f.acceptToken(iy)},{contextual:!0,fallback:!0}),by=new to((f,t)=>{let{next:a}=f,u;ec.indexOf(a)>-1||a==tc&&((u=f.peek(1))==tc||u==cy)||a!=jp&&a!=uy&&a!=-1&&!t.context&&f.acceptToken(K_)},{contextual:!0}),Ay=new to((f,t)=>{f.next==_y&&!t.context&&f.acceptToken(J_)},{contextual:!0}),vy=new to((f,t)=>{let{next:a}=f;if(a==hy||a==fy){if(f.advance(),a==f.next){f.advance();let u=!t.context&&t.canShift(Yp);f.acceptToken(u?Yp:ey)}}else a==my&&f.peek(1)==gy&&(f.advance(),f.advance(),(f.next<48||f.next>57)&&f.acceptToken(ty))},{contextual:!0});function nc(f,t){return f>=65&&f<=90||f>=97&&f<=122||f==95||f>=192||!t&&f>=48&&f<=57}const xy=new to((f,t)=>{if(f.next!=py||!t.dialectEnabled(ly)||(f.advance(),f.next==tc))return;let a=0;for(;ec.indexOf(f.next)>-1;)f.advance(),a++;if(nc(f.next,!0)){for(f.advance(),a++;nc(f.next,!1);)f.advance(),a++;for(;ec.indexOf(f.next)>-1;)f.advance(),a++;if(f.next==dy)return;for(let u=0;;u++){if(u==7){if(!nc(f.next,!0))return;break}if(f.next!="extends".charCodeAt(u))break;f.advance(),a++}}f.acceptToken(ny,-a)}),Cy=$h({"get set async static":Ce.modifier,"for while do if else switch try catch finally return throw break continue default case defer":Ce.controlKeyword,"in of await yield void typeof delete instanceof as satisfies":Ce.operatorKeyword,"let var const using function class extends":Ce.definitionKeyword,"import export from":Ce.moduleKeyword,"with debugger new":Ce.keyword,TemplateString:Ce.special(Ce.string),super:Ce.atom,BooleanLiteral:Ce.bool,this:Ce.self,null:Ce.null,Star:Ce.modifier,VariableName:Ce.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":Ce.function(Ce.variableName),VariableDefinition:Ce.definition(Ce.variableName),Label:Ce.labelName,PropertyName:Ce.propertyName,PrivatePropertyName:Ce.special(Ce.propertyName),"CallExpression/MemberExpression/PropertyName":Ce.function(Ce.propertyName),"FunctionDeclaration/VariableDefinition":Ce.function(Ce.definition(Ce.variableName)),"ClassDeclaration/VariableDefinition":Ce.definition(Ce.className),"NewExpression/VariableName":Ce.className,PropertyDefinition:Ce.definition(Ce.propertyName),PrivatePropertyDefinition:Ce.definition(Ce.special(Ce.propertyName)),UpdateOp:Ce.updateOperator,"LineComment Hashbang":Ce.lineComment,BlockComment:Ce.blockComment,Number:Ce.number,String:Ce.string,Escape:Ce.escape,ArithOp:Ce.arithmeticOperator,LogicOp:Ce.logicOperator,BitOp:Ce.bitwiseOperator,CompareOp:Ce.compareOperator,RegExp:Ce.regexp,Equals:Ce.definitionOperator,Arrow:Ce.function(Ce.punctuation),": Spread":Ce.punctuation,"( )":Ce.paren,"[ ]":Ce.squareBracket,"{ }":Ce.brace,"InterpolationStart InterpolationEnd":Ce.special(Ce.brace),".":Ce.derefOperator,", ;":Ce.separator,"@":Ce.meta,TypeName:Ce.typeName,TypeDefinition:Ce.definition(Ce.typeName),"type enum interface implements namespace module declare":Ce.definitionKeyword,"abstract global Privacy readonly override":Ce.modifier,"is keyof unique infer asserts":Ce.operatorKeyword,JSXAttributeValue:Ce.attributeValue,JSXText:Ce.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":Ce.angleBracket,"JSXIdentifier JSXNameSpacedName":Ce.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":Ce.attributeName,"JSXBuiltin/JSXIdentifier":Ce.standard(Ce.tagName)}),Sy={__proto__:null,export:20,as:25,from:33,default:36,async:41,function:42,in:52,out:55,const:56,extends:60,this:64,true:72,false:72,null:84,void:88,typeof:92,super:108,new:142,delete:154,yield:163,await:167,class:172,public:235,private:235,protected:235,readonly:237,instanceof:256,satisfies:259,import:292,keyof:349,unique:353,infer:359,asserts:395,is:397,abstract:417,implements:419,type:421,let:424,var:426,using:429,interface:435,enum:439,namespace:445,module:447,declare:451,global:455,defer:471,for:476,of:485,while:488,with:492,do:496,if:500,else:502,switch:506,case:512,try:518,catch:522,finally:526,return:530,throw:534,break:538,continue:542,debugger:546},Py={__proto__:null,async:129,get:131,set:133,declare:195,public:197,private:197,protected:197,static:199,abstract:201,override:203,readonly:209,accessor:211,new:401},My={__proto__:null,"<":193},wy=sl.deserialize({version:14,states:"$F|Q%TQlOOO%[QlOOO'_QpOOP(lO`OOO*zQ!0MxO'#CiO+RO#tO'#CjO+aO&jO'#CjO+oO#@ItO'#DaO.QQlO'#DgO.bQlO'#DrO%[QlO'#DzO0fQlO'#ESOOQ!0Lf'#E['#E[O1PQ`O'#EXOOQO'#Ep'#EpOOQO'#Il'#IlO1XQ`O'#GsO1dQ`O'#EoO1iQ`O'#EoO3hQ!0MxO'#JrO6[Q!0MxO'#JsO6uQ`O'#F]O6zQ,UO'#FtOOQ!0Lf'#Ff'#FfO7VO7dO'#FfO9XQMhO'#F|O9`Q`O'#F{OOQ!0Lf'#Js'#JsOOQ!0Lb'#Jr'#JrO9eQ`O'#GwOOQ['#K_'#K_O9pQ`O'#IYO9uQ!0LrO'#IZOOQ['#J`'#J`OOQ['#I_'#I_Q`QlOOQ`QlOOO9}Q!L^O'#DvO:UQlO'#EOO:]QlO'#EQO9kQ`O'#GsO:dQMhO'#CoO:rQ`O'#EnO:}Q`O'#EyO;hQMhO'#FeO;xQ`O'#GsOOQO'#K`'#K`O;}Q`O'#K`O<]Q`O'#G{O<]Q`O'#G|O<]Q`O'#HOO9kQ`O'#HRO=SQ`O'#HUO>kQ`O'#CeO>{Q`O'#HcO?TQ`O'#HiO?TQ`O'#HkO`QlO'#HmO?TQ`O'#HoO?TQ`O'#HrO?YQ`O'#HxO?_Q!0LsO'#IOO%[QlO'#IQO?jQ!0LsO'#ISO?uQ!0LsO'#IUO9uQ!0LrO'#IWO@QQ!0MxO'#CiOASQpO'#DlQOQ`OOO%[QlO'#EQOAjQ`O'#ETO:dQMhO'#EnOAuQ`O'#EnOBQQ!bO'#FeOOQ['#Cg'#CgOOQ!0Lb'#Dq'#DqOOQ!0Lb'#Jv'#JvO%[QlO'#JvOOQO'#Jy'#JyOOQO'#Ih'#IhOCQQpO'#EgOOQ!0Lb'#Ef'#EfOOQ!0Lb'#J}'#J}OC|Q!0MSO'#EgODWQpO'#EWOOQO'#Jx'#JxODlQpO'#JyOEyQpO'#EWODWQpO'#EgPFWO&2DjO'#CbPOOO)CD})CD}OOOO'#I`'#I`OFcO#tO,59UOOQ!0Lh,59U,59UOOOO'#Ia'#IaOFqO&jO,59UOGPQ!L^O'#DcOOOO'#Ic'#IcOGWO#@ItO,59{OOQ!0Lf,59{,59{OGfQlO'#IdOGyQ`O'#JtOIxQ!fO'#JtO+}QlO'#JtOJPQ`O,5:ROJgQ`O'#EpOJtQ`O'#KTOKPQ`O'#KSOKPQ`O'#KSOKXQ`O,5;^OK^Q`O'#KROOQ!0Ln,5:^,5:^OKeQlO,5:^OMcQ!0MxO,5:fONSQ`O,5:nONmQ!0LrO'#KQONtQ`O'#KPO9eQ`O'#KPO! YQ`O'#KPO! bQ`O,5;]O! gQ`O'#KPO!#lQ!fO'#JsOOQ!0Lh'#Ci'#CiO%[QlO'#ESO!$[Q!fO,5:sOOQS'#Jz'#JzOOQO-E<j-E<jO9kQ`O,5=_O!$rQ`O,5=_O!$wQlO,5;ZO!&zQMhO'#EkO!(eQ`O,5;ZO!(jQlO'#DyO!(tQpO,5;dO!(|QpO,5;dO%[QlO,5;dOOQ['#FT'#FTOOQ['#FV'#FVO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eOOQ['#FZ'#FZO!)[QlO,5;tOOQ!0Lf,5;y,5;yOOQ!0Lf,5;z,5;zOOQ!0Lf,5;|,5;|O%[QlO'#IpO!+_Q!0LrO,5<iO%[QlO,5;eO!&zQMhO,5;eO!+|QMhO,5;eO!-nQMhO'#E^O%[QlO,5;wOOQ!0Lf,5;{,5;{O!-uQ,UO'#FjO!.rQ,UO'#KXO!.^Q,UO'#KXO!.yQ,UO'#KXOOQO'#KX'#KXO!/_Q,UO,5<SOOOW,5<`,5<`O!/pQlO'#FvOOOW'#Io'#IoO7VO7dO,5<QO!/wQ,UO'#FxOOQ!0Lf,5<Q,5<QO!0hQ$IUO'#CyOOQ!0Lh'#C}'#C}O!0{O#@ItO'#DRO!1iQMjO,5<eO!1pQ`O,5<hO!3YQ(CWO'#GXO!3jQ`O'#GYO!3oQ`O'#GYO!5_Q(CWO'#G^O!6dQpO'#GbOOQO'#Gn'#GnO!,TQMhO'#GmOOQO'#Gp'#GpO!,TQMhO'#GoO!7VQ$IUO'#JlOOQ!0Lh'#Jl'#JlO!7aQ`O'#JkO!7oQ`O'#JjO!7wQ`O'#CuOOQ!0Lh'#C{'#C{O!8YQ`O'#C}OOQ!0Lh'#DV'#DVOOQ!0Lh'#DX'#DXO!8_Q`O,5<eO1SQ`O'#DZO!,TQMhO'#GPO!,TQMhO'#GRO!8gQ`O'#GTO!8lQ`O'#GUO!3oQ`O'#G[O!,TQMhO'#GaO<]Q`O'#JkO!8qQ`O'#EqO!9`Q`O,5<gOOQ!0Lb'#Cr'#CrO!9hQ`O'#ErO!:bQpO'#EsOOQ!0Lb'#KR'#KRO!:iQ!0LrO'#KaO9uQ!0LrO,5=cO`QlO,5>tOOQ['#Jh'#JhOOQ[,5>u,5>uOOQ[-E<]-E<]O!<hQ!0MxO,5:bO!:]QpO,5:`O!?RQ!0MxO,5:jO%[QlO,5:jO!AiQ!0MxO,5:lOOQO,5@z,5@zO!BYQMhO,5=_O!BhQ!0LrO'#JiO9`Q`O'#JiO!ByQ!0LrO,59ZO!CUQpO,59ZO!C^QMhO,59ZO:dQMhO,59ZO!CiQ`O,5;ZO!CqQ`O'#HbO!DVQ`O'#KdO%[QlO,5;}O!:]QpO,5<PO!D_Q`O,5=zO!DdQ`O,5=zO!DiQ`O,5=zO!DwQ`O,5=zO9uQ!0LrO,5=zO<]Q`O,5=jOOQO'#Cy'#CyO!EOQpO,5=gO!EWQMhO,5=hO!EcQ`O,5=jO!EhQ!bO,5=mO!EpQ`O'#K`O?YQ`O'#HWO9kQ`O'#HYO!EuQ`O'#HYO:dQMhO'#H[O!EzQ`O'#H[OOQ[,5=p,5=pO!FPQ`O'#H]O!FbQ`O'#CoO!FgQ`O,59PO!FqQ`O,59PO!HvQlO,59POOQ[,59P,59PO!IWQ!0LrO,59PO%[QlO,59PO!KcQlO'#HeOOQ['#Hf'#HfOOQ['#Hg'#HgO`QlO,5=}O!KyQ`O,5=}O`QlO,5>TO`QlO,5>VO!LOQ`O,5>XO`QlO,5>ZO!LTQ`O,5>^O!LYQlO,5>dOOQ[,5>j,5>jO%[QlO,5>jO9uQ!0LrO,5>lOOQ[,5>n,5>nO#!dQ`O,5>nOOQ[,5>p,5>pO#!dQ`O,5>pOOQ[,5>r,5>rO##QQpO'#D_O%[QlO'#JvO##sQpO'#JvO##}QpO'#DmO#$`QpO'#DmO#&qQlO'#DmO#&xQ`O'#JuO#'QQ`O,5:WO#'VQ`O'#EtO#'eQ`O'#KUO#'mQ`O,5;_O#'rQpO'#DmO#(PQpO'#EVOOQ!0Lf,5:o,5:oO%[QlO,5:oO#(WQ`O,5:oO?YQ`O,5;YO!CUQpO,5;YO!C^QMhO,5;YO:dQMhO,5;YO#(`Q`O,5@bO#(eQ07dO,5:sOOQO-E<f-E<fO#)kQ!0MSO,5;RODWQpO,5:rO#)uQpO,5:rODWQpO,5;RO!ByQ!0LrO,5:rOOQ!0Lb'#Ej'#EjOOQO,5;R,5;RO%[QlO,5;RO#*SQ!0LrO,5;RO#*_Q!0LrO,5;RO!CUQpO,5:rOOQO,5;X,5;XO#*mQ!0LrO,5;RPOOO'#I^'#I^P#+RO&2DjO,58|POOO,58|,58|OOOO-E<^-E<^OOQ!0Lh1G.p1G.pOOOO-E<_-E<_OOOO,59},59}O#+^Q!bO,59}OOOO-E<a-E<aOOQ!0Lf1G/g1G/gO#+cQ!fO,5?OO+}QlO,5?OOOQO,5?U,5?UO#+mQlO'#IdOOQO-E<b-E<bO#+zQ`O,5@`O#,SQ!fO,5@`O#,ZQ`O,5@nOOQ!0Lf1G/m1G/mO%[QlO,5@oO#,cQ`O'#IjOOQO-E<h-E<hO#,ZQ`O,5@nOOQ!0Lb1G0x1G0xOOQ!0Ln1G/x1G/xOOQ!0Ln1G0Y1G0YO%[QlO,5@lO#,wQ!0LrO,5@lO#-YQ!0LrO,5@lO#-aQ`O,5@kO9eQ`O,5@kO#-iQ`O,5@kO#-wQ`O'#ImO#-aQ`O,5@kOOQ!0Lb1G0w1G0wO!(tQpO,5:uO!)PQpO,5:uOOQS,5:w,5:wO#.iQdO,5:wO#.qQMhO1G2yO9kQ`O1G2yOOQ!0Lf1G0u1G0uO#/PQ!0MxO1G0uO#0UQ!0MvO,5;VOOQ!0Lh'#GW'#GWO#0rQ!0MzO'#JlO!$wQlO1G0uO#2}Q!fO'#JwO%[QlO'#JwO#3XQ`O,5:eOOQ!0Lh'#D_'#D_OOQ!0Lf1G1O1G1OO%[QlO1G1OOOQ!0Lf1G1f1G1fO#3^Q`O1G1OO#5rQ!0MxO1G1PO#5yQ!0MxO1G1PO#8aQ!0MxO1G1PO#8hQ!0MxO1G1PO#;OQ!0MxO1G1PO#=fQ!0MxO1G1PO#=mQ!0MxO1G1PO#=tQ!0MxO1G1PO#@[Q!0MxO1G1PO#@cQ!0MxO1G1PO#BpQ?MtO'#CiO#DkQ?MtO1G1`O#DrQ?MtO'#JsO#EVQ!0MxO,5?[OOQ!0Lb-E<n-E<nO#GdQ!0MxO1G1PO#HaQ!0MzO1G1POOQ!0Lf1G1P1G1PO#IdQMjO'#J|O#InQ`O,5:xO#IsQ!0MxO1G1cO#JgQ,UO,5<WO#JoQ,UO,5<XO#JwQ,UO'#FoO#K`Q`O'#FnOOQO'#KY'#KYOOQO'#In'#InO#KeQ,UO1G1nOOQ!0Lf1G1n1G1nOOOW1G1y1G1yO#KvQ?MtO'#JrO#LQQ`O,5<bO!)[QlO,5<bOOOW-E<m-E<mOOQ!0Lf1G1l1G1lO#LVQpO'#KXOOQ!0Lf,5<d,5<dO#L_QpO,5<dO#LdQMhO'#DTOOOO'#Ib'#IbO#LkO#@ItO,59mOOQ!0Lh,59m,59mO%[QlO1G2PO!8lQ`O'#IrO#LvQ`O,5<zOOQ!0Lh,5<w,5<wO!,TQMhO'#IuO#MdQMjO,5=XO!,TQMhO'#IwO#NVQMjO,5=ZO!&zQMhO,5=]OOQO1G2S1G2SO#NaQ!dO'#CrO#NtQ(CWO'#ErO$ |QpO'#GbO$!dQ!dO,5<sO$!kQ`O'#K[O9eQ`O'#K[O$!yQ`O,5<uO$#aQ!dO'#C{O!,TQMhO,5<tO$#kQ`O'#GZO$$PQ`O,5<tO$$UQ!dO'#GWO$$cQ!dO'#K]O$$mQ`O'#K]O!&zQMhO'#K]O$$rQ`O,5<xO$$wQlO'#JvO$%RQpO'#GcO#$`QpO'#GcO$%dQ`O'#GgO!3oQ`O'#GkO$%iQ!0LrO'#ItO$%tQpO,5<|OOQ!0Lp,5<|,5<|O$%{QpO'#GcO$&YQpO'#GdO$&kQpO'#GdO$&pQMjO,5=XO$'QQMjO,5=ZOOQ!0Lh,5=^,5=^O!,TQMhO,5@VO!,TQMhO,5@VO$'bQ`O'#IyO$'vQ`O,5@UO$(OQ`O,59aOOQ!0Lh,59i,59iO$(TQ`O,5@VO$)TQ$IYO,59uOOQ!0Lh'#Jp'#JpO$)vQMjO,5<kO$*iQMjO,5<mO@zQ`O,5<oOOQ!0Lh,5<p,5<pO$*sQ`O,5<vO$*xQMjO,5<{O$+YQ`O'#KPO!$wQlO1G2RO$+_Q`O1G2RO9eQ`O'#KSO9eQ`O'#EtO%[QlO'#EtO9eQ`O'#I{O$+dQ!0LrO,5@{OOQ[1G2}1G2}OOQ[1G4`1G4`OOQ!0Lf1G/|1G/|OOQ!0Lf1G/z1G/zO$-fQ!0MxO1G0UOOQ[1G2y1G2yO!&zQMhO1G2yO%[QlO1G2yO#.tQ`O1G2yO$/jQMhO'#EkOOQ!0Lb,5@T,5@TO$/wQ!0LrO,5@TOOQ[1G.u1G.uO!ByQ!0LrO1G.uO!CUQpO1G.uO!C^QMhO1G.uO$0YQ`O1G0uO$0_Q`O'#CiO$0jQ`O'#KeO$0rQ`O,5=|O$0wQ`O'#KeO$0|Q`O'#KeO$1[Q`O'#JRO$1jQ`O,5AOO$1rQ!fO1G1iOOQ!0Lf1G1k1G1kO9kQ`O1G3fO@zQ`O1G3fO$1yQ`O1G3fO$2OQ`O1G3fO!DiQ`O1G3fO9uQ!0LrO1G3fOOQ[1G3f1G3fO!EcQ`O1G3UO!&zQMhO1G3RO$2TQ`O1G3ROOQ[1G3S1G3SO!&zQMhO1G3SO$2YQ`O1G3SO$2bQpO'#HQOOQ[1G3U1G3UO!6_QpO'#I}O!EhQ!bO1G3XOOQ[1G3X1G3XOOQ[,5=r,5=rO$2jQMhO,5=tO9kQ`O,5=tO$%dQ`O,5=vO9`Q`O,5=vO!CUQpO,5=vO!C^QMhO,5=vO:dQMhO,5=vO$2xQ`O'#KcO$3TQ`O,5=wOOQ[1G.k1G.kO$3YQ!0LrO1G.kO@zQ`O1G.kO$3eQ`O1G.kO9uQ!0LrO1G.kO$5mQ!fO,5AQO$5zQ`O,5AQO9eQ`O,5AQO$6VQlO,5>PO$6^Q`O,5>POOQ[1G3i1G3iO`QlO1G3iOOQ[1G3o1G3oOOQ[1G3q1G3qO?TQ`O1G3sO$6cQlO1G3uO$:gQlO'#HtOOQ[1G3x1G3xO$:tQ`O'#HzO?YQ`O'#H|OOQ[1G4O1G4OO$:|QlO1G4OO9uQ!0LrO1G4UOOQ[1G4W1G4WOOQ!0Lb'#G_'#G_O9uQ!0LrO1G4YO9uQ!0LrO1G4[O$?TQ`O,5@bO!)[QlO,5;`O9eQ`O,5;`O?YQ`O,5:XO!)[QlO,5:XO!CUQpO,5:XO$?YQ?MtO,5:XOOQO,5;`,5;`O$?dQpO'#IeO$?zQ`O,5@aOOQ!0Lf1G/r1G/rO$@SQpO'#IkO$@^Q`O,5@pOOQ!0Lb1G0y1G0yO#$`QpO,5:XOOQO'#Ig'#IgO$@fQpO,5:qOOQ!0Ln,5:q,5:qO#(ZQ`O1G0ZOOQ!0Lf1G0Z1G0ZO%[QlO1G0ZOOQ!0Lf1G0t1G0tO?YQ`O1G0tO!CUQpO1G0tO!C^QMhO1G0tOOQ!0Lb1G5|1G5|O!ByQ!0LrO1G0^OOQO1G0m1G0mO%[QlO1G0mO$@mQ!0LrO1G0mO$@xQ!0LrO1G0mO!CUQpO1G0^ODWQpO1G0^O$AWQ!0LrO1G0mOOQO1G0^1G0^O$AlQ!0MxO1G0mPOOO-E<[-E<[POOO1G.h1G.hOOOO1G/i1G/iO$AvQ!bO,5<iO$BOQ!fO1G4jOOQO1G4p1G4pO%[QlO,5?OO$BYQ`O1G5zO$BbQ`O1G6YO$BjQ!fO1G6ZO9eQ`O,5?UO$BtQ!0MxO1G6WO%[QlO1G6WO$CUQ!0LrO1G6WO$CgQ`O1G6VO$CgQ`O1G6VO9eQ`O1G6VO$CoQ`O,5?XO9eQ`O,5?XOOQO,5?X,5?XO$DTQ`O,5?XO$+YQ`O,5?XOOQO-E<k-E<kOOQS1G0a1G0aOOQS1G0c1G0cO#.lQ`O1G0cOOQ[7+(e7+(eO!&zQMhO7+(eO%[QlO7+(eO$DcQ`O7+(eO$DnQMhO7+(eO$D|Q!0MzO,5=XO$GXQ!0MzO,5=ZO$IdQ!0MzO,5=XO$KuQ!0MzO,5=ZO$NWQ!0MzO,59uO%!]Q!0MzO,5<kO%$hQ!0MzO,5<mO%&sQ!0MzO,5<{OOQ!0Lf7+&a7+&aO%)UQ!0MxO7+&aO%)xQlO'#IfO%*VQ`O,5@cO%*_Q!fO,5@cOOQ!0Lf1G0P1G0PO%*iQ`O7+&jOOQ!0Lf7+&j7+&jO%*nQ?MtO,5:fO%[QlO7+&zO%*xQ?MtO,5:bO%+VQ?MtO,5:jO%+aQ?MtO,5:lO%+kQMhO'#IiO%+uQ`O,5@hOOQ!0Lh1G0d1G0dOOQO1G1r1G1rOOQO1G1s1G1sO%+}Q!jO,5<ZO!)[QlO,5<YOOQO-E<l-E<lOOQ!0Lf7+'Y7+'YOOOW7+'e7+'eOOOW1G1|1G1|O%,YQ`O1G1|OOQ!0Lf1G2O1G2OOOOO,59o,59oO%,_Q!dO,59oOOOO-E<`-E<`OOQ!0Lh1G/X1G/XO%,fQ!0MxO7+'kOOQ!0Lh,5?^,5?^O%-YQMhO1G2fP%-aQ`O'#IrPOQ!0Lh-E<p-E<pO%-}QMjO,5?aOOQ!0Lh-E<s-E<sO%.pQMjO,5?cOOQ!0Lh-E<u-E<uO%.zQ!dO1G2wO%/RQ!dO'#CrO%/iQMhO'#KSO$$wQlO'#JvOOQ!0Lh1G2_1G2_O%/sQ`O'#IqO%0[Q`O,5@vO%0[Q`O,5@vO%0dQ`O,5@vO%0oQ`O,5@vOOQO1G2a1G2aO%0}QMjO1G2`O$+YQ`O'#K[O!,TQMhO1G2`O%1_Q(CWO'#IsO%1lQ`O,5@wO!&zQMhO,5@wO%1tQ!dO,5@wOOQ!0Lh1G2d1G2dO%4UQ!fO'#CiO%4`Q`O,5=POOQ!0Lb,5<},5<}O%4hQpO,5<}OOQ!0Lb,5=O,5=OOCwQ`O,5<}O%4sQpO,5<}OOQ!0Lb,5=R,5=RO$+YQ`O,5=VOOQO,5?`,5?`OOQO-E<r-E<rOOQ!0Lp1G2h1G2hO#$`QpO,5<}O$$wQlO,5=PO%5RQ`O,5=OO%5^QpO,5=OO!,TQMhO'#IuO%6WQMjO1G2sO!,TQMhO'#IwO%6yQMjO1G2uO%7TQMjO1G5qO%7_QMjO1G5qOOQO,5?e,5?eOOQO-E<w-E<wOOQO1G.{1G.{O!,TQMhO1G5qO!,TQMhO1G5qO!:]QpO,59wO%[QlO,59wOOQ!0Lh,5<j,5<jO%7lQ`O1G2ZO!,TQMhO1G2bO%7qQ!0MxO7+'mOOQ!0Lf7+'m7+'mO!$wQlO7+'mO%8eQ`O,5;`OOQ!0Lb,5?g,5?gOOQ!0Lb-E<y-E<yO%8jQ!dO'#K^O#(ZQ`O7+(eO4UQ!fO7+(eO$DfQ`O7+(eO%8tQ!0MvO'#CiO%9XQ!0MvO,5=SO%9lQ`O,5=SO%9tQ`O,5=SOOQ!0Lb1G5o1G5oOOQ[7+$a7+$aO!ByQ!0LrO7+$aO!CUQpO7+$aO!$wQlO7+&aO%9yQ`O'#JQO%:bQ`O,5APOOQO1G3h1G3hO9kQ`O,5APO%:bQ`O,5APO%:jQ`O,5APOOQO,5?m,5?mOOQO-E=P-E=POOQ!0Lf7+'T7+'TO%:oQ`O7+)QO9uQ!0LrO7+)QO9kQ`O7+)QO@zQ`O7+)QO%:tQ`O7+)QOOQ[7+)Q7+)QOOQ[7+(p7+(pO%:yQ!0MvO7+(mO!&zQMhO7+(mO!E^Q`O7+(nOOQ[7+(n7+(nO!&zQMhO7+(nO%;TQ`O'#KbO%;`Q`O,5=lOOQO,5?i,5?iOOQO-E<{-E<{OOQ[7+(s7+(sO%<rQpO'#HZOOQ[1G3`1G3`O!&zQMhO1G3`O%[QlO1G3`O%<yQ`O1G3`O%=UQMhO1G3`O9uQ!0LrO1G3bO$%dQ`O1G3bO9`Q`O1G3bO!CUQpO1G3bO!C^QMhO1G3bO%=dQ`O'#JPO%=xQ`O,5@}O%>QQpO,5@}OOQ!0Lb1G3c1G3cOOQ[7+$V7+$VO@zQ`O7+$VO9uQ!0LrO7+$VO%>]Q`O7+$VO%[QlO1G6lO%[QlO1G6mO%>bQ!0LrO1G6lO%>lQlO1G3kO%>sQ`O1G3kO%>xQlO1G3kOOQ[7+)T7+)TO9uQ!0LrO7+)_O`QlO7+)aOOQ['#Kh'#KhOOQ['#JS'#JSO%?PQlO,5>`OOQ[,5>`,5>`O%[QlO'#HuO%?^Q`O'#HwOOQ[,5>f,5>fO9eQ`O,5>fOOQ[,5>h,5>hOOQ[7+)j7+)jOOQ[7+)p7+)pOOQ[7+)t7+)tOOQ[7+)v7+)vO%?cQpO1G5|O%?}Q?MtO1G0zO%@XQ`O1G0zOOQO1G/s1G/sO%@dQ?MtO1G/sO?YQ`O1G/sO!)[QlO'#DmOOQO,5?P,5?POOQO-E<c-E<cOOQO,5?V,5?VOOQO-E<i-E<iO!CUQpO1G/sOOQO-E<e-E<eOOQ!0Ln1G0]1G0]OOQ!0Lf7+%u7+%uO#(ZQ`O7+%uOOQ!0Lf7+&`7+&`O?YQ`O7+&`O!CUQpO7+&`OOQO7+%x7+%xO$AlQ!0MxO7+&XOOQO7+&X7+&XO%[QlO7+&XO%@nQ!0LrO7+&XO!ByQ!0LrO7+%xO!CUQpO7+%xO%@yQ!0LrO7+&XO%AXQ!0MxO7++rO%[QlO7++rO%AiQ`O7++qO%AiQ`O7++qOOQO1G4s1G4sO9eQ`O1G4sO%AqQ`O1G4sOOQS7+%}7+%}O#(ZQ`O<<LPO4UQ!fO<<LPO%BPQ`O<<LPOOQ[<<LP<<LPO!&zQMhO<<LPO%[QlO<<LPO%BXQ`O<<LPO%BdQ!0MzO,5?aO%DoQ!0MzO,5?cO%FzQ!0MzO1G2`O%I]Q!0MzO1G2sO%KhQ!0MzO1G2uO%MsQ!fO,5?QO%[QlO,5?QOOQO-E<d-E<dO%M}Q`O1G5}OOQ!0Lf<<JU<<JUO%NVQ?MtO1G0uO&!^Q?MtO1G1PO&!eQ?MtO1G1PO&$fQ?MtO1G1PO&$mQ?MtO1G1PO&&nQ?MtO1G1PO&(oQ?MtO1G1PO&(vQ?MtO1G1PO&(}Q?MtO1G1PO&+OQ?MtO1G1PO&+VQ?MtO1G1PO&+^Q!0MxO<<JfO&-UQ?MtO1G1PO&.RQ?MvO1G1PO&/UQ?MvO'#JlO&1[Q?MtO1G1cO&1iQ?MtO1G0UO&1sQMjO,5?TOOQO-E<g-E<gO!)[QlO'#FqOOQO'#KZ'#KZOOQO1G1u1G1uO&1}Q`O1G1tO&2SQ?MtO,5?[OOOW7+'h7+'hOOOO1G/Z1G/ZO&2^Q!dO1G4xOOQ!0Lh7+(Q7+(QP!&zQMhO,5?^O!,TQMhO7+(cO&2eQ`O,5?]O9eQ`O,5?]O$+YQ`O,5?]OOQO-E<o-E<oO&2sQ`O1G6bO&2sQ`O1G6bO&2{Q`O1G6bO&3WQMjO7+'zO&3hQ!dO,5?_O&3rQ`O,5?_O!&zQMhO,5?_OOQO-E<q-E<qO&3wQ!dO1G6cO&4RQ`O1G6cO&4ZQ`O1G2kO!&zQMhO1G2kOOQ!0Lb1G2i1G2iOOQ!0Lb1G2j1G2jO%4hQpO1G2iO!CUQpO1G2iOCwQ`O1G2iOOQ!0Lb1G2q1G2qO&4`QpO1G2iO&4nQ`O1G2kO$+YQ`O1G2jOCwQ`O1G2jO$$wQlO1G2kO&4vQ`O1G2jO&5jQMjO,5?aOOQ!0Lh-E<t-E<tO&6]QMjO,5?cOOQ!0Lh-E<v-E<vO!,TQMhO7++]O&6gQMjO7++]O&6qQMjO7++]OOQ!0Lh1G/c1G/cO&7OQ`O1G/cOOQ!0Lh7+'u7+'uO&7TQMjO7+'|O&7eQ!0MxO<<KXOOQ!0Lf<<KX<<KXO&8XQ`O1G0zO!&zQMhO'#IzO&8^Q`O,5@xO&:`Q!fO<<LPO!&zQMhO1G2nO&:gQ!0LrO1G2nOOQ[<<G{<<G{O!ByQ!0LrO<<G{O&:xQ!0MxO<<I{OOQ!0Lf<<I{<<I{OOQO,5?l,5?lO&;lQ`O,5?lO&;qQ`O,5?lOOQO-E=O-E=OO&<PQ`O1G6kO&<PQ`O1G6kO9kQ`O1G6kO@zQ`O<<LlOOQ[<<Ll<<LlO&<XQ`O<<LlO9uQ!0LrO<<LlO9kQ`O<<LlOOQ[<<LX<<LXO%:yQ!0MvO<<LXOOQ[<<LY<<LYO!E^Q`O<<LYO&<^QpO'#I|O&<iQ`O,5@|O!)[QlO,5@|OOQ[1G3W1G3WOOQO'#JO'#JOO9uQ!0LrO'#JOO&<qQpO,5=uOOQ[,5=u,5=uO&<xQpO'#EgO&=PQpO'#GeO&=UQ`O7+(zO&=ZQ`O7+(zOOQ[7+(z7+(zO!&zQMhO7+(zO%[QlO7+(zO&=cQ`O7+(zOOQ[7+(|7+(|O9uQ!0LrO7+(|O$%dQ`O7+(|O9`Q`O7+(|O!CUQpO7+(|O&=nQ`O,5?kOOQO-E<}-E<}OOQO'#H^'#H^O&=yQ`O1G6iO9uQ!0LrO<<GqOOQ[<<Gq<<GqO@zQ`O<<GqO&>RQ`O7+,WO&>WQ`O7+,XO%[QlO7+,WO%[QlO7+,XOOQ[7+)V7+)VO&>]Q`O7+)VO&>bQlO7+)VO&>iQ`O7+)VOOQ[<<Ly<<LyOOQ[<<L{<<L{OOQ[-E=Q-E=QOOQ[1G3z1G3zO&>nQ`O,5>aOOQ[,5>c,5>cO&>sQ`O1G4QO9eQ`O7+&fO!)[QlO7+&fOOQO7+%_7+%_O&>xQ?MtO1G6ZO?YQ`O7+%_OOQ!0Lf<<Ia<<IaOOQ!0Lf<<Iz<<IzO?YQ`O<<IzOOQO<<Is<<IsO$AlQ!0MxO<<IsO%[QlO<<IsOOQO<<Id<<IdO!ByQ!0LrO<<IdO&?SQ!0LrO<<IsO&?_Q!0MxO<= ^O&?oQ`O<= ]OOQO7+*_7+*_O9eQ`O7+*_OOQ[ANAkANAkO&?wQ!fOANAkO!&zQMhOANAkO#(ZQ`OANAkO4UQ!fOANAkO&@OQ`OANAkO%[QlOANAkO&@WQ!0MzO7+'zO&BiQ!0MzO,5?aO&DtQ!0MzO,5?cO&GPQ!0MzO7+'|O&IbQ!fO1G4lO&IlQ?MtO7+&aO&KpQ?MvO,5=XO&MwQ?MvO,5=ZO&NXQ?MvO,5=XO&NiQ?MvO,5=ZO&NyQ?MvO,59uO'#PQ?MvO,5<kO'%SQ?MvO,5<mO''hQ?MvO,5<{O')^Q?MtO7+'kO')kQ?MtO7+'mO')xQ`O,5<]OOQO7+'`7+'`OOQ!0Lh7+*d7+*dO')}QMjO<<K}OOQO1G4w1G4wO'*UQ`O1G4wO'*aQ`O1G4wO'*oQ`O7++|O'*oQ`O7++|O!&zQMhO1G4yO'*wQ!dO1G4yO'+RQ`O7++}O'+ZQ`O7+(VO'+fQ!dO7+(VOOQ!0Lb7+(T7+(TOOQ!0Lb7+(U7+(UO!CUQpO7+(TOCwQ`O7+(TO'+pQ`O7+(VO!&zQMhO7+(VO$+YQ`O7+(UO'+uQ`O7+(VOCwQ`O7+(UO'+}QMjO<<NwO!,TQMhO<<NwOOQ!0Lh7+$}7+$}O',XQ!dO,5?fOOQO-E<x-E<xO',cQ!0MvO7+(YO!&zQMhO7+(YOOQ[AN=gAN=gO9kQ`O1G5WOOQO1G5W1G5WO',sQ`O1G5WO',xQ`O7+,VO',xQ`O7+,VO9uQ!0LrOANBWO@zQ`OANBWOOQ[ANBWANBWO'-QQ`OANBWOOQ[ANAsANAsOOQ[ANAtANAtO'-VQ`O,5?hOOQO-E<z-E<zO'-bQ?MtO1G6hOOQO,5?j,5?jOOQO-E<|-E<|OOQ[1G3a1G3aO'-lQ`O,5=POOQ[<<Lf<<LfO!&zQMhO<<LfO&=UQ`O<<LfO'-qQ`O<<LfO%[QlO<<LfOOQ[<<Lh<<LhO9uQ!0LrO<<LhO$%dQ`O<<LhO9`Q`O<<LhO'-yQpO1G5VO'.UQ`O7+,TOOQ[AN=]AN=]O9uQ!0LrOAN=]OOQ[<= r<= rOOQ[<= s<= sO'.^Q`O<= rO'.cQ`O<= sOOQ[<<Lq<<LqO'.hQ`O<<LqO'.mQlO<<LqOOQ[1G3{1G3{O?YQ`O7+)lO'.tQ`O<<JQO'/PQ?MtO<<JQOOQO<<Hy<<HyOOQ!0LfAN?fAN?fOOQOAN?_AN?_O$AlQ!0MxOAN?_OOQOAN?OAN?OO%[QlOAN?_OOQO<<My<<MyOOQ[G27VG27VO!&zQMhOG27VO#(ZQ`OG27VO'/ZQ!fOG27VO4UQ!fOG27VO'/bQ`OG27VO'/jQ?MtO<<JfO'/wQ?MvO1G2`O'1mQ?MvO,5?aO'3pQ?MvO,5?cO'5sQ?MvO1G2sO'7vQ?MvO1G2uO'9yQ?MtO<<KXO':WQ?MtO<<I{OOQO1G1w1G1wO!,TQMhOANAiOOQO7+*c7+*cO':eQ`O7+*cO':pQ`O<= hO':xQ!dO7+*eOOQ!0Lb<<Kq<<KqO$+YQ`O<<KqOCwQ`O<<KqO';SQ`O<<KqO!&zQMhO<<KqOOQ!0Lb<<Ko<<KoO!CUQpO<<KoO';_Q!dO<<KqOOQ!0Lb<<Kp<<KpO';iQ`O<<KqO!&zQMhO<<KqO$+YQ`O<<KpO';nQMjOANDcO';xQ!0MvO<<KtOOQO7+*r7+*rO9kQ`O7+*rO'<YQ`O<= qOOQ[G27rG27rO9uQ!0LrOG27rO@zQ`OG27rO!)[QlO1G5SO'<bQ`O7+,SO'<jQ`O1G2kO&=UQ`OANBQOOQ[ANBQANBQO!&zQMhOANBQO'<oQ`OANBQOOQ[ANBSANBSO9uQ!0LrOANBSO$%dQ`OANBSOOQO'#H_'#H_OOQO7+*q7+*qOOQ[G22wG22wOOQ[ANE^ANE^OOQ[ANE_ANE_OOQ[ANB]ANB]O'<wQ`OANB]OOQ[<<MW<<MWO!)[QlOAN?lOOQOG24yG24yO$AlQ!0MxOG24yO#(ZQ`OLD,qOOQ[LD,qLD,qO!&zQMhOLD,qO'<|Q!fOLD,qO'=TQ?MvO7+'zO'>yQ?MvO,5?aO'@|Q?MvO,5?cO'CPQ?MvO7+'|O'DuQMjOG27TOOQO<<M}<<M}OOQ!0LbANA]ANA]O$+YQ`OANA]OCwQ`OANA]O'EVQ!dOANA]OOQ!0LbANAZANAZO'E^Q`OANA]O!&zQMhOANA]O'EiQ!dOANA]OOQ!0LbANA[ANA[OOQO<<N^<<N^OOQ[LD-^LD-^O9uQ!0LrOLD-^O'EsQ?MtO7+*nOOQO'#Gf'#GfOOQ[G27lG27lO&=UQ`OG27lO!&zQMhOG27lOOQ[G27nG27nO9uQ!0LrOG27nOOQ[G27wG27wO'E}Q?MtOG25WOOQOLD*eLD*eOOQ[!$(!]!$(!]O#(ZQ`O!$(!]O!&zQMhO!$(!]O'FXQ!0MzOG27TOOQ!0LbG26wG26wO$+YQ`OG26wO'HjQ`OG26wOCwQ`OG26wO'HuQ!dOG26wO!&zQMhOG26wOOQ[!$(!x!$(!xOOQ[LD-WLD-WO&=UQ`OLD-WOOQ[LD-YLD-YOOQ[!)9Ew!)9EwO#(ZQ`O!)9EwOOQ!0LbLD,cLD,cO$+YQ`OLD,cOCwQ`OLD,cO'H|Q`OLD,cO'IXQ!dOLD,cOOQ[!$(!r!$(!rOOQ[!.K;c!.K;cO'I`Q?MvOG27TOOQ!0Lb!$( }!$( }O$+YQ`O!$( }OCwQ`O!$( }O'KUQ`O!$( }OOQ!0Lb!)9Ei!)9EiO$+YQ`O!)9EiOCwQ`O!)9EiOOQ!0Lb!.K;T!.K;TO$+YQ`O!.K;TOOQ!0Lb!4/0o!4/0oO!)[QlO'#DzO1PQ`O'#EXO'KaQ!fO'#JrO'KhQ!L^O'#DvO'KoQlO'#EOO'KvQ!fO'#CiO'N^Q!fO'#CiO!)[QlO'#EQO'NnQlO,5;ZO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO'#IpO(!qQ`O,5<iO!)[QlO,5;eO(!yQMhO,5;eO($dQMhO,5;eO!)[QlO,5;wO!&zQMhO'#GmO(!yQMhO'#GmO!&zQMhO'#GoO(!yQMhO'#GoO1SQ`O'#DZO1SQ`O'#DZO!&zQMhO'#GPO(!yQMhO'#GPO!&zQMhO'#GRO(!yQMhO'#GRO!&zQMhO'#GaO(!yQMhO'#GaO!)[QlO,5:jO($kQpO'#D_O($uQpO'#JvO!)[QlO,5@oO'NnQlO1G0uO(%PQ?MtO'#CiO!)[QlO1G2PO!&zQMhO'#IuO(!yQMhO'#IuO!&zQMhO'#IwO(!yQMhO'#IwO(%ZQ!dO'#CrO!&zQMhO,5<tO(!yQMhO,5<tO'NnQlO1G2RO!)[QlO7+&zO!&zQMhO1G2`O(!yQMhO1G2`O!&zQMhO'#IuO(!yQMhO'#IuO!&zQMhO'#IwO(!yQMhO'#IwO!&zQMhO1G2bO(!yQMhO1G2bO'NnQlO7+'mO'NnQlO7+&aO!&zQMhOANAiO(!yQMhOANAiO(%nQ`O'#EoO(%sQ`O'#EoO(%{Q`O'#F]O(&QQ`O'#EyO(&VQ`O'#KTO(&bQ`O'#KRO(&mQ`O,5;ZO(&rQMjO,5<eO(&yQ`O'#GYO('OQ`O'#GYO('TQ`O,5<eO(']Q`O,5<gO('eQ`O,5;ZO('mQ?MtO1G1`O('tQ`O,5<tO('yQ`O,5<tO((OQ`O,5<vO((TQ`O,5<vO((YQ`O1G2RO((_Q`O1G0uO((dQMjO<<K}O((kQMjO<<K}O((rQMhO'#F|O9`Q`O'#F{OAuQ`O'#EnO!)[QlO,5;tO!3oQ`O'#GYO!3oQ`O'#GYO!3oQ`O'#G[O!3oQ`O'#G[O!,TQMhO7+(cO!,TQMhO7+(cO%.zQ!dO1G2wO%.zQ!dO1G2wO!&zQMhO,5=]O!&zQMhO,5=]",stateData:"()x~O'|OS'}OSTOS(ORQ~OPYOQYOSfOY!VOaqOdzOeyOl!POpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!uwO!xxO!|]O$W|O$niO%h}O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO&W!WO&^!XO&`!YO&b!ZO&d![O&g!]O&m!^O&s!_O&u!`O&w!aO&y!bO&{!cO(TSO(VTO(YUO(aVO(o[O~OWtO~P`OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oa!wOs!nO!S!oO!b!yO!c!vO!d!vO!|<VO#T!pO#U!pO#V!xO#W!pO#X!pO#[!zO#]!zO(U!lO(VTO(YUO(e!mO(o!sO~O(O!{O~OP]XR]X[]Xa]Xj]Xr]X!Q]X!S]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X'z]X(a]X(r]X(y]X(z]X~O!g%RX~P(qO_!}O(V#PO(W!}O(X#PO~O_#QO(X#PO(Y#PO(Z#QO~Ox#SO!U#TO(b#TO(c#VO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T<ZO(VTO(YUO(aVO(o[O~O![#ZO!]#WO!Y(hP!Y(vP~P+}O!^#cO~P`OPYOQYOSfOd!jOe!iOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(VTO(YUO(aVO(o[O~Op#mO![#iO!|]O#i#lO#j#iO(T<[O!k(sP~P.iO!l#oO(T#nO~O!x#sO!|]O%h#tO~O#k#uO~O!g#vO#k#uO~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!]$_O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~Oa(fX'z(fX'w(fX!k(fX!Y(fX!_(fX%i(fX!g(fX~P1qO#S$dO#`$eO$Q$eOP(gXR(gX[(gXj(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX!_(gX%i(gX~Oa(gX'z(gX'w(gX!Y(gX!k(gXv(gX!g(gX~P4UO#`$eO~O$]$hO$_$gO$f$mO~OSfO!_$nO$i$oO$k$qO~Oh%VOj%dOk%dOp%WOr%XOs$tOt$tOz%YO|%ZO!O%]O!S${O!_$|O!i%bO!l$xO#j%cO$W%`O$t%^O$v%_O$y%aO(T$sO(VTO(YUO(a$uO(y$}O(z%POg(^P~Ol%[O~P7eO!l%eO~O!S%hO!_%iO(T%gO~O!g%mO~Oa%nO'z%nO~O!Q%rO~P%[O(U!lO~P%[O%n%vO~P%[Oh%VO!l%eO(T%gO(U!lO~Oe%}O!l%eO(T%gO~Oj$RO~O!_&PO(T%gO(U!lO(VTO(YUO`)WP~O!Q&SO!l&RO%j&VO&T&WO~P;SO!x#sO~O%s&YO!S)SX!_)SX(T)SX~O(T&ZO~Ol!PO!u&`O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO~Od&eOe&dO!x&bO%h&cO%{&aO~P<bOd&hOeyOl!PO!_&gO!u&`O!xxO!|]O%h}O%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO~Ob&kO#`&nO%j&iO(U!lO~P=gO!l&oO!u&sO~O!l#oO~O!_XO~Oa%nO'x&{O'z%nO~Oa%nO'x'OO'z%nO~Oa%nO'x'QO'z%nO~O'w]X!Y]Xv]X!k]X&[]X!_]X%i]X!g]X~P(qO!b'_O!c'WO!d'WO(U!lO(VTO(YUO~Os'UO!S'TO!['XO(e'SO!^(iP!^(xP~P@nOn'bO!_'`O(T%gO~Oe'gO!l%eO(T%gO~O!Q&SO!l&RO~Os!nO!S!oO!|<VO#T!pO#U!pO#W!pO#X!pO(U!lO(VTO(YUO(e!mO(o!sO~O!b'mO!c'lO!d'lO#V!pO#['nO#]'nO~PBYOa%nOh%VO!g#vO!l%eO'z%nO(r'pO~O!p'tO#`'rO~PChOs!nO!S!oO(VTO(YUO(e!mO(o!sO~O!_XOs(mX!S(mX!b(mX!c(mX!d(mX!|(mX#T(mX#U(mX#V(mX#W(mX#X(mX#[(mX#](mX(U(mX(V(mX(Y(mX(e(mX(o(mX~O!c'lO!d'lO(U!lO~PDWO(P'xO(Q'xO(R'zO~O_!}O(V'|O(W!}O(X'|O~O_#QO(X'|O(Y'|O(Z#QO~Ov(OO~P%[Ox#SO!U#TO(b#TO(c(RO~O![(TO!Y'WX!Y'^X!]'WX!]'^X~P+}O!](VO!Y(hX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!](VO!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~O!Y(hX~PHRO!Y([O~O!Y(uX!](uX!g(uX!k(uX(r(uX~O#`(uX#k#dX!^(uX~PJUO#`(]O!Y(wX!](wX~O!](^O!Y(vX~O!Y(aO~O#`$eO~PJUO!^(bO~P`OR#zO!Q#yO!S#{O!l#xO(aVOP!na[!naj!nar!na!]!na!p!na#R!na#n!na#o!na#p!na#q!na#r!na#s!na#t!na#u!na#v!na#x!na#z!na#{!na(r!na(y!na(z!na~Oa!na'z!na'w!na!Y!na!k!nav!na!_!na%i!na!g!na~PKlO!k(cO~O!g#vO#`(dO(r'pO!](tXa(tX'z(tX~O!k(tX~PNXO!S%hO!_%iO!|]O#i(iO#j(hO(T%gO~O!](jO!k(sX~O!k(lO~O!S%hO!_%iO#j(hO(T%gO~OP(gXR(gX[(gXj(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX~O!g#vO!k(gX~P! uOR(nO!Q(mO!l#xO#S$dO!|!{a!S!{a~O!x!{a%h!{a!_!{a#i!{a#j!{a(T!{a~P!#vO!x(rO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~O#k(xO~O![(zO!k(kP~P%[O(e(|O(o[O~O!S)OO!l#xO(e(|O(o[O~OP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_!eO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(T)]O(VTO(YUO(aVO(o[O~O!]$_Oa$qa'z$qa'w$qa!k$qa!Y$qa!_$qa%i$qa!g$qa~Ol)dO~P!&zOh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O%]O!S${O!_$|O!i%bO!l$xO#j%cO$W%`O$t%^O$v%_O$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~Og(pP~P!,TO!Q)iO!g)hO!_$^X$Z$^X$]$^X$_$^X$f$^X~O!g)hO!_({X$Z({X$]({X$_({X$f({X~O!Q)iO~P!.^O!Q)iO!_({X$Z({X$]({X$_({X$f({X~O!_)kO$Z)oO$])jO$_)jO$f)pO~O![)sO~P!)[O$]$hO$_$gO$f)wO~On$zX!Q$zX#S$zX'y$zX(y$zX(z$zX~OgmXg$zXnmX!]mX#`mX~P!0SOx)yO(b)zO(c)|O~On*VO!Q*OO'y*PO(y$}O(z%PO~Og)}O~P!1WOg*WO~Oh%VOr%XOs$tOt$tOz%YO|%ZO!O<sO!S*YO!_*ZO!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(VTO(YUO(a$uO(y$}O(z%PO~Op*`O![*^O(T*XO!k)OP~P!1uO#k*aO~O!l*bO~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(T*dO(VTO(YUO(a$uO(y$}O(z%PO~O![*gO!Y)PP~P!3tOr*sOs!nO!S*iO!b*qO!c*kO!d*kO!l*bO#[*rO%`*mO(U!lO(VTO(YUO(e!mO~O!^*pO~P!5iO#S$dOn(`X!Q(`X'y(`X(y(`X(z(`X!](`X#`(`X~Og(`X$O(`X~P!6kOn*xO#`*wOg(_X!](_X~O!]*yOg(^X~Oj%dOk%dOl%dO(T&ZOg(^P~Os*|O~Og)}O(T&ZO~O!l+SO~O(T(vO~Op+WO!S%hO![#iO!_%iO!|]O#i#lO#j#iO(T%gO!k(sP~O!g#vO#k+XO~O!S%hO![+ZO!](^O!_%iO(T%gO!Y(vP~Os'[O!S+]O![+[O(VTO(YUO(e(|O~O!^(xP~P!9|O!]+^Oa)TX'z)TX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~Oa!ja!]!ja'z!ja'w!ja!Y!ja!k!jav!ja!_!ja%i!ja!g!ja~P!:tOR#zO!Q#yO!S#{O!l#xO(aVOP!ra[!raj!rar!ra!]!ra!p!ra#R!ra#n!ra#o!ra#p!ra#q!ra#r!ra#s!ra#t!ra#u!ra#v!ra#x!ra#z!ra#{!ra(r!ra(y!ra(z!ra~Oa!ra'z!ra'w!ra!Y!ra!k!rav!ra!_!ra%i!ra!g!ra~P!=[OR#zO!Q#yO!S#{O!l#xO(aVOP!ta[!taj!tar!ta!]!ta!p!ta#R!ta#n!ta#o!ta#p!ta#q!ta#r!ta#s!ta#t!ta#u!ta#v!ta#x!ta#z!ta#{!ta(r!ta(y!ta(z!ta~Oa!ta'z!ta'w!ta!Y!ta!k!tav!ta!_!ta%i!ta!g!ta~P!?rOh%VOn+gO!_'`O%i+fO~O!g+iOa(]X!_(]X'z(]X!](]X~Oa%nO!_XO'z%nO~Oh%VO!l%eO~Oh%VO!l%eO(T%gO~O!g#vO#k(xO~Ob+tO%j+uO(T+qO(VTO(YUO!^)XP~O!]+vO`)WX~O[+zO~O`+{O~O!_&PO(T%gO(U!lO`)WP~O%j,OO~P;SOh%VO#`,SO~Oh%VOn,VO!_$|O~O!_,XO~O!Q,ZO!_XO~O%n%vO~O!x,`O~Oe,eO~Ob,fO(T#nO(VTO(YUO!^)VP~Oe%}O~O%j!QO(T&ZO~P=gO[,kO`,jO~OPYOQYOSfOdzOeyOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!iuO!lZO!oYO!pYO!qYO!svO!xxO!|]O$niO%h}O(VTO(YUO(aVO(o[O~O!_!eO!u!gO$W!kO(T!dO~P!FyO`,jOa%nO'z%nO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oa,pOl!OO!uwO%l!OO%m!OO%n!OO~P!IcO!l&oO~O&^,vO~O!_,xO~O&o,zO&q,{OP&laQ&laS&laY&laa&lad&lae&lal&lap&lar&las&lat&laz&la|&la!O&la!S&la!W&la!X&la!_&la!i&la!l&la!o&la!p&la!q&la!s&la!u&la!x&la!|&la$W&la$n&la%h&la%j&la%l&la%m&la%n&la%q&la%s&la%v&la%w&la%y&la&W&la&^&la&`&la&b&la&d&la&g&la&m&la&s&la&u&la&w&la&y&la&{&la'w&la(T&la(V&la(Y&la(a&la(o&la!^&la&e&lab&la&j&la~O(T-QO~Oh!eX!]!RX!^!RX!g!RX!g!eX!l!eX#`!RX~O!]!eX!^!eX~P#!iO!g-VO#`-UOh(jX!]#hX!^#hX!g(jX!l(jX~O!](jX!^(jX~P##[Oh%VO!g-XO!l%eO!]!aX!^!aX~Os!nO!S!oO(VTO(YUO(e!mO~OP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_!eO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(VTO(YUO(aVO(o[O~O(T=QO~P#$qO!]-]O!^(iX~O!^-_O~O!g-VO#`-UO!]#hX!^#hX~O!]-`O!^(xX~O!^-bO~O!c-cO!d-cO(U!lO~P#$`O!^-fO~P'_On-iO!_'`O~O!Y-nO~Os!{a!b!{a!c!{a!d!{a#T!{a#U!{a#V!{a#W!{a#X!{a#[!{a#]!{a(U!{a(V!{a(Y!{a(e!{a(o!{a~P!#vO!p-sO#`-qO~PChO!c-uO!d-uO(U!lO~PDWOa%nO#`-qO'z%nO~Oa%nO!g#vO#`-qO'z%nO~Oa%nO!g#vO!p-sO#`-qO'z%nO(r'pO~O(P'xO(Q'xO(R-zO~Ov-{O~O!Y'Wa!]'Wa~P!:tO![.PO!Y'WX!]'WX~P%[O!](VO!Y(ha~O!Y(ha~PHRO!](^O!Y(va~O!S%hO![.TO!_%iO(T%gO!Y'^X!]'^X~O#`.VO!](ta!k(taa(ta'z(ta~O!g#vO~P#,wO!](jO!k(sa~O!S%hO!_%iO#j.ZO(T%gO~Op.`O!S%hO![.]O!_%iO!|]O#i._O#j.]O(T%gO!]'aX!k'aX~OR.dO!l#xO~Oh%VOn.gO!_'`O%i.fO~Oa#ci!]#ci'z#ci'w#ci!Y#ci!k#civ#ci!_#ci%i#ci!g#ci~P!:tOn>]O!Q*OO'y*PO(y$}O(z%PO~O#k#_aa#_a#`#_a'z#_a!]#_a!k#_a!_#_a!Y#_a~P#/sO#k(`XP(`XR(`X[(`Xa(`Xj(`Xr(`X!S(`X!l(`X!p(`X#R(`X#n(`X#o(`X#p(`X#q(`X#r(`X#s(`X#t(`X#u(`X#v(`X#x(`X#z(`X#{(`X'z(`X(a(`X(r(`X!k(`X!Y(`X'w(`Xv(`X!_(`X%i(`X!g(`X~P!6kO!].tO!k(kX~P!:tO!k.wO~O!Y.yO~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(aVO[#mia#mij#mir#mi!]#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#n#mi~P#3cO#n$OO~P#3cOP$[OR#zOr$aO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(aVO[#mia#mij#mi!]#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#r#mi~P#6QO#r$QO~P#6QOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO(aVOa#mi!]#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#v#mi~P#8oOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO(aVO(z#}Oa#mi!]#mi#z#mi#{#mi'z#mi(r#mi(y#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#x$UO~P#;VO#x#mi~P#;VO#v$SO~P#8oOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO(aVO(y#|O(z#}Oa#mi!]#mi#{#mi'z#mi(r#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#z#mi~P#={O#z$WO~P#={OP]XR]X[]Xj]Xr]X!Q]X!S]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X!]]X!^]X~O$O]X~P#@jOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO#x<eO#z<gO#{<hO(aVO(r$YO(y#|O(z#}O~O$O.{O~P#BwO#S$dO#`<nO$Q<nO$O(gX!^(gX~P! uOa'da!]'da'z'da'w'da!k'da!Y'dav'da!_'da%i'da!g'da~P!:tO[#mia#mij#mir#mi!]#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(aVO(y#mi(z#mi~P#EyOn>]O!Q*OO'y*PO(y$}O(z%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(a#mi~P#EyO!]/POg(pX~P!1WOg/RO~Oa$Pi!]$Pi'z$Pi'w$Pi!Y$Pi!k$Piv$Pi!_$Pi%i$Pi!g$Pi~P!:tO$]/SO$_/SO~O$]/TO$_/TO~O!g)hO#`/UO!_$cX$Z$cX$]$cX$_$cX$f$cX~O![/VO~O!_)kO$Z/XO$])jO$_)jO$f/YO~O!]<iO!^(fX~P#BwO!^/ZO~O!g)hO$f({X~O$f/]O~Ov/^O~P!&zOx)yO(b)zO(c/aO~O!S/dO~O(y$}On%aa!Q%aa'y%aa(z%aa!]%aa#`%aa~Og%aa$O%aa~P#L{O(z%POn%ca!Q%ca'y%ca(y%ca!]%ca#`%ca~Og%ca$O%ca~P#MnO!]fX!gfX!kfX!k$zX(rfX~P!0SOp%WO![/mO!](^O(T/lO!Y(vP!Y)PP~P!1uOr*sO!b*qO!c*kO!d*kO!l*bO#[*rO%`*mO(U!lO(VTO(YUO~Os<}O!S/nO![+[O!^*pO(e<|O!^(xP~P$ [O!k/oO~P#/sO!]/pO!g#vO(r'pO!k)OX~O!k/uO~OnoX!QoX'yoX(yoX(zoX~O!g#vO!koX~P$#OOp/wO!S%hO![*^O!_%iO(T%gO!k)OP~O#k/xO~O!Y$zX!]$zX!g%RX~P!0SO!]/yO!Y)PX~P#/sO!g/{O~O!Y/}O~OpkO(T0OO~P.iOh%VOr0TO!g#vO!l%eO(r'pO~O!g+iO~Oa%nO!]0XO'z%nO~O!^0ZO~P!5iO!c0[O!d0[O(U!lO~P#$`Os!nO!S0]O(VTO(YUO(e!mO~O#[0_O~Og%aa!]%aa#`%aa$O%aa~P!1WOg%ca!]%ca#`%ca$O%ca~P!1WOj%dOk%dOl%dO(T&ZOg'mX!]'mX~O!]*yOg(^a~Og0hO~On0jO#`0iOg(_a!](_a~OR0kO!Q0kO!S0lO#S$dOn}a'y}a(y}a(z}a!]}a#`}a~Og}a$O}a~P$(cO!Q*OO'y*POn$sa(y$sa(z$sa!]$sa#`$sa~Og$sa$O$sa~P$)_O!Q*OO'y*POn$ua(y$ua(z$ua!]$ua#`$ua~Og$ua$O$ua~P$*QO#k0oO~Og%Ta!]%Ta#`%Ta$O%Ta~P!1WO!g#vO~O#k0rO~O!]+^Oa)Ta'z)Ta~OR#zO!Q#yO!S#{O!l#xO(aVOP!ri[!rij!rir!ri!]!ri!p!ri#R!ri#n!ri#o!ri#p!ri#q!ri#r!ri#s!ri#t!ri#u!ri#v!ri#x!ri#z!ri#{!ri(r!ri(y!ri(z!ri~Oa!ri'z!ri'w!ri!Y!ri!k!riv!ri!_!ri%i!ri!g!ri~P$+oOh%VOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(VTO(YUO(a$uO(y$}O(z%PO~Op0{O%]0|O(T0zO~P$.VO!g+iOa(]a!_(]a'z(]a!](]a~O#k1SO~O[]X!]fX!^fX~O!]1TO!^)XX~O!^1VO~O[1WO~Ob1YO(T+qO(VTO(YUO~O!_&PO(T%gO`'uX!]'uX~O!]+vO`)Wa~O!k1]O~P!:tO[1`O~O`1aO~O#`1fO~On1iO!_$|O~O(e(|O!^)UP~Oh%VOn1rO!_1oO%i1qO~O[1|O!]1zO!^)VX~O!^1}O~O`2POa%nO'z%nO~O(T#nO(VTO(YUO~O#S$dO#`$eO$Q$eOP(gXR(gX[(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX~Oj2SO&[2TOa(gX~P$3pOj2SO#`$eO&[2TO~Oa2VO~P%[Oa2XO~O&e2[OP&ciQ&ciS&ciY&cia&cid&cie&cil&cip&cir&cis&cit&ciz&ci|&ci!O&ci!S&ci!W&ci!X&ci!_&ci!i&ci!l&ci!o&ci!p&ci!q&ci!s&ci!u&ci!x&ci!|&ci$W&ci$n&ci%h&ci%j&ci%l&ci%m&ci%n&ci%q&ci%s&ci%v&ci%w&ci%y&ci&W&ci&^&ci&`&ci&b&ci&d&ci&g&ci&m&ci&s&ci&u&ci&w&ci&y&ci&{&ci'w&ci(T&ci(V&ci(Y&ci(a&ci(o&ci!^&cib&ci&j&ci~Ob2bO!^2`O&j2aO~P`O!_XO!l2dO~O&q,{OP&liQ&liS&liY&lia&lid&lie&lil&lip&lir&lis&lit&liz&li|&li!O&li!S&li!W&li!X&li!_&li!i&li!l&li!o&li!p&li!q&li!s&li!u&li!x&li!|&li$W&li$n&li%h&li%j&li%l&li%m&li%n&li%q&li%s&li%v&li%w&li%y&li&W&li&^&li&`&li&b&li&d&li&g&li&m&li&s&li&u&li&w&li&y&li&{&li'w&li(T&li(V&li(Y&li(a&li(o&li!^&li&e&lib&li&j&li~O!Y2jO~O!]!aa!^!aa~P#BwOs!nO!S!oO![2pO(e!mO!]'XX!^'XX~P@nO!]-]O!^(ia~O!]'_X!^'_X~P!9|O!]-`O!^(xa~O!^2wO~P'_Oa%nO#`3QO'z%nO~Oa%nO!g#vO#`3QO'z%nO~Oa%nO!g#vO!p3UO#`3QO'z%nO(r'pO~Oa%nO'z%nO~P!:tO!]$_Ov$qa~O!Y'Wi!]'Wi~P!:tO!](VO!Y(hi~O!](^O!Y(vi~O!Y(wi!](wi~P!:tO!](ti!k(tia(ti'z(ti~P!:tO#`3WO!](ti!k(tia(ti'z(ti~O!](jO!k(si~O!S%hO!_%iO!|]O#i3]O#j3[O(T%gO~O!S%hO!_%iO#j3[O(T%gO~On3dO!_'`O%i3cO~Oh%VOn3dO!_'`O%i3cO~O#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'z%aa(a%aa(r%aa!k%aa!Y%aa'w%aav%aa!_%aa%i%aa!g%aa~P#L{O#k%caP%caR%ca[%caa%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'z%ca(a%ca(r%ca!k%ca!Y%ca'w%cav%ca!_%ca%i%ca!g%ca~P#MnO#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!]%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'z%aa(a%aa(r%aa!k%aa!Y%aa'w%aa#`%aav%aa!_%aa%i%aa!g%aa~P#/sO#k%caP%caR%ca[%caa%caj%car%ca!S%ca!]%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'z%ca(a%ca(r%ca!k%ca!Y%ca'w%ca#`%cav%ca!_%ca%i%ca!g%ca~P#/sO#k}aP}a[}aa}aj}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a'z}a(a}a(r}a!k}a!Y}a'w}av}a!_}a%i}a!g}a~P$(cO#k$saP$saR$sa[$saa$saj$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa'z$sa(a$sa(r$sa!k$sa!Y$sa'w$sav$sa!_$sa%i$sa!g$sa~P$)_O#k$uaP$uaR$ua[$uaa$uaj$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua'z$ua(a$ua(r$ua!k$ua!Y$ua'w$uav$ua!_$ua%i$ua!g$ua~P$*QO#k%TaP%TaR%Ta[%Taa%Taj%Tar%Ta!S%Ta!]%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta'z%Ta(a%Ta(r%Ta!k%Ta!Y%Ta'w%Ta#`%Tav%Ta!_%Ta%i%Ta!g%Ta~P#/sOa#cq!]#cq'z#cq'w#cq!Y#cq!k#cqv#cq!_#cq%i#cq!g#cq~P!:tO![3lO!]'YX!k'YX~P%[O!].tO!k(ka~O!].tO!k(ka~P!:tO!Y3oO~O$O!na!^!na~PKlO$O!ja!]!ja!^!ja~P#BwO$O!ra!^!ra~P!=[O$O!ta!^!ta~P!?rOg']X!]']X~P!,TO!]/POg(pa~OSfO!_4TO$d4UO~O!^4YO~Ov4ZO~P#/sOa$mq!]$mq'z$mq'w$mq!Y$mq!k$mqv$mq!_$mq%i$mq!g$mq~P!:tO!Y4]O~P!&zO!S4^O~O!Q*OO'y*PO(z%POn'ia(y'ia!]'ia#`'ia~Og'ia$O'ia~P%-fO!Q*OO'y*POn'ka(y'ka(z'ka!]'ka#`'ka~Og'ka$O'ka~P%.XO(r$YO~P#/sO!YfX!Y$zX!]fX!]$zX!g%RX#`fX~P!0SOp%WO(T=WO~P!1uOp4bO!S%hO![4aO!_%iO(T%gO!]'eX!k'eX~O!]/pO!k)Oa~O!]/pO!g#vO!k)Oa~O!]/pO!g#vO(r'pO!k)Oa~Og$|i!]$|i#`$|i$O$|i~P!1WO![4jO!Y'gX!]'gX~P!3tO!]/yO!Y)Pa~O!]/yO!Y)Pa~P#/sOP]XR]X[]Xj]Xr]X!Q]X!S]X!Y]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X~Oj%YX!g%YX~P%2OOj4oO!g#vO~Oh%VO!g#vO!l%eO~Oh%VOr4tO!l%eO(r'pO~Or4yO!g#vO(r'pO~Os!nO!S4zO(VTO(YUO(e!mO~O(y$}On%ai!Q%ai'y%ai(z%ai!]%ai#`%ai~Og%ai$O%ai~P%5oO(z%POn%ci!Q%ci'y%ci(y%ci!]%ci#`%ci~Og%ci$O%ci~P%6bOg(_i!](_i~P!1WO#`5QOg(_i!](_i~P!1WO!k5VO~Oa$oq!]$oq'z$oq'w$oq!Y$oq!k$oqv$oq!_$oq%i$oq!g$oq~P!:tO!Y5ZO~O!]5[O!_)QX~P#/sOa$zX!_$zX%^]X'z$zX!]$zX~P!0SO%^5_OaoX!_oX'zoX!]oX~P$#OOp5`O(T#nO~O%^5_O~Ob5fO%j5gO(T+qO(VTO(YUO!]'tX!^'tX~O!]1TO!^)Xa~O[5kO~O`5lO~O[5pO~Oa%nO'z%nO~P#/sO!]5uO#`5wO!^)UX~O!^5xO~Or6OOs!nO!S*iO!b!yO!c!vO!d!vO!|<VO#T!pO#U!pO#V!pO#W!pO#X!pO#[5}O#]!zO(U!lO(VTO(YUO(e!mO(o!sO~O!^5|O~P%;eOn6TO!_1oO%i6SO~Oh%VOn6TO!_1oO%i6SO~Ob6[O(T#nO(VTO(YUO!]'sX!^'sX~O!]1zO!^)Va~O(VTO(YUO(e6^O~O`6bO~Oj6eO&[6fO~PNXO!k6gO~P%[Oa6iO~Oa6iO~P%[Ob2bO!^6nO&j2aO~P`O!g6pO~O!g6rOh(ji!](ji!^(ji!g(ji!l(jir(ji(r(ji~O!]#hi!^#hi~P#BwO#`6sO!]#hi!^#hi~O!]!ai!^!ai~P#BwOa%nO#`6|O'z%nO~Oa%nO!g#vO#`6|O'z%nO~O!](tq!k(tqa(tq'z(tq~P!:tO!](jO!k(sq~O!S%hO!_%iO#j7TO(T%gO~O!_'`O%i7WO~On7[O!_'`O%i7WO~O#k'iaP'iaR'ia['iaa'iaj'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia'z'ia(a'ia(r'ia!k'ia!Y'ia'w'iav'ia!_'ia%i'ia!g'ia~P%-fO#k'kaP'kaR'ka['kaa'kaj'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka'z'ka(a'ka(r'ka!k'ka!Y'ka'w'kav'ka!_'ka%i'ka!g'ka~P%.XO#k$|iP$|iR$|i[$|ia$|ij$|ir$|i!S$|i!]$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i'z$|i(a$|i(r$|i!k$|i!Y$|i'w$|i#`$|iv$|i!_$|i%i$|i!g$|i~P#/sO#k%aiP%aiR%ai[%aia%aij%air%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai'z%ai(a%ai(r%ai!k%ai!Y%ai'w%aiv%ai!_%ai%i%ai!g%ai~P%5oO#k%ciP%ciR%ci[%cia%cij%cir%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci'z%ci(a%ci(r%ci!k%ci!Y%ci'w%civ%ci!_%ci%i%ci!g%ci~P%6bO!]'Ya!k'Ya~P!:tO!].tO!k(ki~O$O#ci!]#ci!^#ci~P#BwOP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(aVO[#mij#mir#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#n#mi~P%NdO#n<_O~P%NdOP$[OR#zOr<kO!Q#yO!S#{O!l#xO!p$[O#n<_O#o<`O#p<`O#q<`O(aVO[#mij#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#r#mi~P&!lO#r<aO~P&!lOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO(aVO#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#v#mi~P&$tOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO(aVO(z#}O#z#mi#{#mi$O#mi(r#mi(y#mi!]#mi!^#mi~O#x<eO~P&&uO#x#mi~P&&uO#v<cO~P&$tOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO#x<eO(aVO(y#|O(z#}O#{#mi$O#mi(r#mi!]#mi!^#mi~O#z#mi~P&)UO#z<gO~P&)UOa#|y!]#|y'z#|y'w#|y!Y#|y!k#|yv#|y!_#|y%i#|y!g#|y~P!:tO[#mij#mir#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi!]#mi!^#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n<_O#o<`O#p<`O#q<`O(aVO(y#mi(z#mi~P&,QOn>^O!Q*OO'y*PO(y$}O(z%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(a#mi~P&,QO#S$dOP(`XR(`X[(`Xj(`Xn(`Xr(`X!Q(`X!S(`X!l(`X!p(`X#R(`X#n(`X#o(`X#p(`X#q(`X#r(`X#s(`X#t(`X#u(`X#v(`X#x(`X#z(`X#{(`X$O(`X'y(`X(a(`X(r(`X(y(`X(z(`X!](`X!^(`X~O$O$Pi!]$Pi!^$Pi~P#BwO$O!ri!^!ri~P$+oOg']a!]']a~P!1WO!^7nO~O!]'da!^'da~P#BwO!Y7oO~P#/sO!g#vO(r'pO!]'ea!k'ea~O!]/pO!k)Oi~O!]/pO!g#vO!k)Oi~Og$|q!]$|q#`$|q$O$|q~P!1WO!Y'ga!]'ga~P#/sO!g7vO~O!]/yO!Y)Pi~P#/sO!]/yO!Y)Pi~O!Y7yO~Oh%VOr8OO!l%eO(r'pO~Oj8QO!g#vO~Or8TO!g#vO(r'pO~O!Q*OO'y*PO(z%POn'ja(y'ja!]'ja#`'ja~Og'ja$O'ja~P&5RO!Q*OO'y*POn'la(y'la(z'la!]'la#`'la~Og'la$O'la~P&5tOg(_q!](_q~P!1WO#`8VOg(_q!](_q~P!1WO!Y8WO~Og%Oq!]%Oq#`%Oq$O%Oq~P!1WOa$oy!]$oy'z$oy'w$oy!Y$oy!k$oyv$oy!_$oy%i$oy!g$oy~P!:tO!g6rO~O!]5[O!_)Qa~O!_'`OP$TaR$Ta[$Taj$Tar$Ta!Q$Ta!S$Ta!]$Ta!l$Ta!p$Ta#R$Ta#n$Ta#o$Ta#p$Ta#q$Ta#r$Ta#s$Ta#t$Ta#u$Ta#v$Ta#x$Ta#z$Ta#{$Ta(a$Ta(r$Ta(y$Ta(z$Ta~O%i7WO~P&8fO%^8[Oa%[i!_%[i'z%[i!]%[i~Oa#cy!]#cy'z#cy'w#cy!Y#cy!k#cyv#cy!_#cy%i#cy!g#cy~P!:tO[8^O~Ob8`O(T+qO(VTO(YUO~O!]1TO!^)Xi~O`8dO~O(e(|O!]'pX!^'pX~O!]5uO!^)Ua~O!^8nO~P%;eO(o!sO~P$&YO#[8oO~O!_1oO~O!_1oO%i8qO~On8tO!_1oO%i8qO~O[8yO!]'sa!^'sa~O!]1zO!^)Vi~O!k8}O~O!k9OO~O!k9RO~O!k9RO~P%[Oa9TO~O!g9UO~O!k9VO~O!](wi!^(wi~P#BwOa%nO#`9_O'z%nO~O!](ty!k(tya(ty'z(ty~P!:tO!](jO!k(sy~O%i9bO~P&8fO!_'`O%i9bO~O#k$|qP$|qR$|q[$|qa$|qj$|qr$|q!S$|q!]$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q'z$|q(a$|q(r$|q!k$|q!Y$|q'w$|q#`$|qv$|q!_$|q%i$|q!g$|q~P#/sO#k'jaP'jaR'ja['jaa'jaj'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja'z'ja(a'ja(r'ja!k'ja!Y'ja'w'jav'ja!_'ja%i'ja!g'ja~P&5RO#k'laP'laR'la['laa'laj'lar'la!S'la!l'la!p'la#R'la#n'la#o'la#p'la#q'la#r'la#s'la#t'la#u'la#v'la#x'la#z'la#{'la'z'la(a'la(r'la!k'la!Y'la'w'lav'la!_'la%i'la!g'la~P&5tO#k%OqP%OqR%Oq[%Oqa%Oqj%Oqr%Oq!S%Oq!]%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq'z%Oq(a%Oq(r%Oq!k%Oq!Y%Oq'w%Oq#`%Oqv%Oq!_%Oq%i%Oq!g%Oq~P#/sO!]'Yi!k'Yi~P!:tO$O#cq!]#cq!^#cq~P#BwO(y$}OP%aaR%aa[%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa$O%aa(a%aa(r%aa!]%aa!^%aa~On%aa!Q%aa'y%aa(z%aa~P&IyO(z%POP%caR%ca[%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca$O%ca(a%ca(r%ca!]%ca!^%ca~On%ca!Q%ca'y%ca(y%ca~P&LQOn>^O!Q*OO'y*PO(z%PO~P&IyOn>^O!Q*OO'y*PO(y$}O~P&LQOR0kO!Q0kO!S0lO#S$dOP}a[}aj}an}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a$O}a'y}a(a}a(r}a(y}a(z}a!]}a!^}a~O!Q*OO'y*POP$saR$sa[$saj$san$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa$O$sa(a$sa(r$sa(y$sa(z$sa!]$sa!^$sa~O!Q*OO'y*POP$uaR$ua[$uaj$uan$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua$O$ua(a$ua(r$ua(y$ua(z$ua!]$ua!^$ua~On>^O!Q*OO'y*PO(y$}O(z%PO~OP%TaR%Ta[%Taj%Tar%Ta!S%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta$O%Ta(a%Ta(r%Ta!]%Ta!^%Ta~P''VO$O$mq!]$mq!^$mq~P#BwO$O$oq!]$oq!^$oq~P#BwO!^9oO~O$O9pO~P!1WO!g#vO!]'ei!k'ei~O!g#vO(r'pO!]'ei!k'ei~O!]/pO!k)Oq~O!Y'gi!]'gi~P#/sO!]/yO!Y)Pq~Or9wO!g#vO(r'pO~O[9yO!Y9xO~P#/sO!Y9xO~Oj:PO!g#vO~Og(_y!](_y~P!1WO!]'na!_'na~P#/sOa%[q!_%[q'z%[q!]%[q~P#/sO[:UO~O!]1TO!^)Xq~O`:YO~O#`:ZO!]'pa!^'pa~O!]5uO!^)Ui~P#BwO!S:]O~O!_1oO%i:`O~O(VTO(YUO(e:eO~O!]1zO!^)Vq~O!k:hO~O!k:iO~O!k:jO~O!k:jO~P%[O#`:mO!]#hy!^#hy~O!]#hy!^#hy~P#BwO%i:rO~P&8fO!_'`O%i:rO~O$O#|y!]#|y!^#|y~P#BwOP$|iR$|i[$|ij$|ir$|i!S$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i$O$|i(a$|i(r$|i!]$|i!^$|i~P''VO!Q*OO'y*PO(z%POP'iaR'ia['iaj'ian'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia$O'ia(a'ia(r'ia(y'ia!]'ia!^'ia~O!Q*OO'y*POP'kaR'ka['kaj'kan'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka$O'ka(a'ka(r'ka(y'ka(z'ka!]'ka!^'ka~O(y$}OP%aiR%ai[%aij%ain%air%ai!Q%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai$O%ai'y%ai(a%ai(r%ai(z%ai!]%ai!^%ai~O(z%POP%ciR%ci[%cij%cin%cir%ci!Q%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci$O%ci'y%ci(a%ci(r%ci(y%ci!]%ci!^%ci~O$O$oy!]$oy!^$oy~P#BwO$O#cy!]#cy!^#cy~P#BwO!g#vO!]'eq!k'eq~O!]/pO!k)Oy~O!Y'gq!]'gq~P#/sOr:|O!g#vO(r'pO~O[;QO!Y;PO~P#/sO!Y;PO~Og(_!R!](_!R~P!1WOa%[y!_%[y'z%[y!]%[y~P#/sO!]1TO!^)Xy~O!]5uO!^)Uq~O(T;XO~O!_1oO%i;[O~O!k;_O~O%i;dO~P&8fOP$|qR$|q[$|qj$|qr$|q!S$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q$O$|q(a$|q(r$|q!]$|q!^$|q~P''VO!Q*OO'y*PO(z%POP'jaR'ja['jaj'jan'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja$O'ja(a'ja(r'ja(y'ja!]'ja!^'ja~O!Q*OO'y*POP'laR'la['laj'lan'lar'la!S'la!l'la!p'la#R'la#n'la#o'la#p'la#q'la#r'la#s'la#t'la#u'la#v'la#x'la#z'la#{'la$O'la(a'la(r'la(y'la(z'la!]'la!^'la~OP%OqR%Oq[%Oqj%Oqr%Oq!S%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq$O%Oq(a%Oq(r%Oq!]%Oq!^%Oq~P''VOg%e!Z!]%e!Z#`%e!Z$O%e!Z~P!1WO!Y;hO~P#/sOr;iO!g#vO(r'pO~O[;kO!Y;hO~P#/sO!]'pq!^'pq~P#BwO!]#h!Z!^#h!Z~P#BwO#k%e!ZP%e!ZR%e!Z[%e!Za%e!Zj%e!Zr%e!Z!S%e!Z!]%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z'z%e!Z(a%e!Z(r%e!Z!k%e!Z!Y%e!Z'w%e!Z#`%e!Zv%e!Z!_%e!Z%i%e!Z!g%e!Z~P#/sOr;tO!g#vO(r'pO~O!Y;uO~P#/sOr;|O!g#vO(r'pO~O!Y;}O~P#/sOP%e!ZR%e!Z[%e!Zj%e!Zr%e!Z!S%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z$O%e!Z(a%e!Z(r%e!Z!]%e!Z!^%e!Z~P''VOr<QO!g#vO(r'pO~Ov(fX~P1qO!Q%rO~P!)[O(U!lO~P!)[O!YfX!]fX#`fX~P%2OOP]XR]X[]Xj]Xr]X!Q]X!S]X!]]X!]fX!l]X!p]X#R]X#S]X#`]X#`fX#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X~O!gfX!k]X!kfX(rfX~P'LTOP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_XO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(T)]O(VTO(YUO(aVO(o[O~O!]<iO!^$qa~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<tO!S${O!_$|O!i>WO!l$xO#j<zO$W%`O$t<vO$v<xO$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~Ol)dO~P(!yOr!eX(r!eX~P#!iOr(jX(r(jX~P##[O!^]X!^fX~P'LTO!YfX!Y$zX!]fX!]$zX#`fX~P!0SO#k<^O~O!g#vO#k<^O~O#`<nO~Oj<bO~O#`=OO!](wX!^(wX~O#`<nO!](uX!^(uX~O#k=PO~Og=RO~P!1WO#k=XO~O#k=YO~Og=RO(T&ZO~O!g#vO#k=ZO~O!g#vO#k=PO~O$O=[O~P#BwO#k=]O~O#k=^O~O#k=cO~O#k=dO~O#k=eO~O#k=fO~O$O=gO~P!1WO$O=hO~P!1WOl=sO~P7eOk#S#T#U#W#X#[#i#j#u$n$t$v$y%]%^%h%i%j%q%s%v%w%y%{~(OT#o!X'|(U#ps#n#qr!Q'}$]'}(T$_(e~",goto:"$9Y)]PPPPPP)^PP)aP)rP+W/]PPPP6mPP7TPP=QPPP@tPA^PA^PPPA^PCfPA^PA^PA^PCjPCoPD^PIWPPPI[PPPPI[L_PPPLeMVPI[PI[PP! eI[PPPI[PI[P!#lI[P!'S!(X!(bP!)U!)Y!)U!,gPPPPPPP!-W!(XPP!-h!/YP!2iI[I[!2n!5z!:h!:h!>gPPP!>oI[PPPPPPPPP!BOP!C]PPI[!DnPI[PI[I[I[I[I[PI[!FQP!I[P!LbP!Lf!Lp!Lt!LtP!IXP!Lx!LxP#!OP#!SI[PI[#!Y#%_CjA^PA^PA^A^P#&lA^A^#)OA^#+vA^#.SA^A^#.r#1W#1W#1]#1f#1W#1qPP#1WPA^#2ZA^#6YA^A^6mPPP#:_PPP#:x#:xP#:xP#;`#:xPP#;fP#;]P#;]#;y#;]#<e#<k#<n)aP#<q)aP#<z#<z#<zP)aP)aP)aP)aPP)aP#=Q#=TP#=T)aP#=XP#=[P)aP)aP)aP)aP)aP)a)aPP#=b#=h#=s#=y#>P#>V#>]#>k#>q#>{#?R#?]#?c#?s#?y#@k#@}#AT#AZ#Ai#BO#Cs#DR#DY#Et#FS#Gt#HS#HY#H`#Hf#Hp#Hv#H|#IW#Ij#IpPPPPPPPPPPP#IvPPPPPPP#Jk#Mx$ b$ i$ qPPP$']P$'f$*_$0x$0{$1O$1}$2Q$2X$2aP$2g$2jP$3W$3[$4S$5b$5g$5}PP$6S$6Y$6^$6a$6e$6i$7e$7|$8e$8i$8l$8o$8y$8|$9Q$9UR!|RoqOXst!Z#d%m&r&t&u&w,s,x2[2_Y!vQ'`-e1o5{Q%tvQ%|yQ&T|Q&j!VS'W!e-]Q'f!iS'l!r!yU*k$|*Z*oQ+o%}S+|&V&WQ,d&dQ-c'_Q-m'gQ-u'mQ0[*qQ1b,OQ1y,eR<{<Y%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+],p,s,x-i-q.P.V.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3l4z6T6e6f6i6|8t9T9_S#q]<V!r)_$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SU+P%]<s<tQ+t&PQ,f&gQ,m&oQ0x+gQ0}+iQ1Y+uQ2R,kQ3`.gQ5`0|Q5f1TQ6[1zQ7Y3dQ8`5gR9e7['QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S!S!nQ!r!v!y!z$|'W'_'`'l'm'n*k*o*q*r-]-c-e-u0[0_1o5{5}%[$ti#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^Q&X|Q'U!eS'[%i-`Q+t&PQ,P&WQ,f&gQ0n+SQ1Y+uQ1_+{Q2Q,jQ2R,kQ5f1TQ5o1aQ6[1zQ6_1|Q6`2PQ8`5gQ8c5lQ8|6bQ:X8dQ:f8yQ;V:YR<}*ZrnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_R,h&k&z^OPXYstuvwz!Z!`!g!j!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'b'r(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>R>S[#]WZ#W#Z'X(T!b%jm#h#i#l$x%e%h(^(h(i(j*Y*^*b+Z+[+^,o-V.T.Z.[.]._/m/p2d3[3]4a6r7TQ%wxQ%{yW&Q|&V&W,OQ&_!TQ'c!hQ'e!iQ(q#sS+n%|%}Q+r&PQ,_&bQ,c&dS-l'f'gQ.i(rQ1R+oQ1X+uQ1Z+vQ1^+zQ1t,`S1x,d,eQ2|-mQ5e1TQ5i1WQ5n1`Q6Z1yQ8_5gQ8b5kQ8f5pQ:T8^R;T:U!U$zi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y!^%yy!i!u%{%|%}'V'e'f'g'k'u*j+n+o-Y-l-m-t0R0U1R2u2|3T4r4s4v7}9{Q+h%wQ,T&[Q,W&]Q,b&dQ.h(qQ1s,_U1w,c,d,eQ3e.iQ6U1tS6Y1x1yQ8x6Z#f>T#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^o>U<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hW%Ti%V*y>PS&[!Q&iQ&]!RQ&^!SU*}%[%d=sR,R&Y%]%Si#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^T)z$u){V+P%]<s<tW'[!e%i*Z-`S(}#y#zQ+c%rQ+y&SS.b(m(nQ1j,XQ5T0kR8i5u'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S$i$^c#Y#e%q%s%u(S(Y(t(y)R)S)T)U)V)W)X)Y)Z)[)^)`)b)g)q+d+x-Z-x-}.S.U.s.v.z.|.}/O/b0p2k2n3O3V3k3p3q3r3s3t3u3v3w3x3y3z3{3|4P4Q4X5X5c6u6{7Q7a7b7k7l8k9X9]9g9m9n:o;W;`<W=vT#TV#U'RkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ'Y!eR2q-]!W!nQ!e!r!v!y!z$|'W'_'`'l'm'n*Z*k*o*q*r-]-c-e-u0[0_1o5{5}R1l,ZnqOXst!Z#d%m&r&t&u&w,s,x2[2_Q&y!^Q'v!xS(s#u<^Q+l%zQ,]&_Q,^&aQ-j'dQ-w'oS.r(x=PS0q+X=ZQ1P+mQ1n,[Q2c,zQ2e,{Q2m-WQ2z-kQ2}-oS5Y0r=eQ5a1QS5d1S=fQ6t2oQ6x2{Q6}3SQ8]5bQ9Y6vQ9Z6yQ9^7OR:l9V$d$]c#Y#e%s%u(S(Y(t(y)R)S)T)U)V)W)X)Y)Z)[)^)`)b)g)q+d+x-Z-x-}.S.U.s.v.z.}/O/b0p2k2n3O3V3k3p3q3r3s3t3u3v3w3x3y3z3{3|4P4Q4X5X5c6u6{7Q7a7b7k7l8k9X9]9g9m9n:o;W;`<W=vS(o#p'iQ)P#zS+b%q.|S.c(n(pR3^.d'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SS#q]<VQ&t!XQ&u!YQ&w![Q&x!]R2Z,vQ'a!hQ+e%wQ-h'cS.e(q+hQ2x-gW3b.h.i0w0yQ6w2yW7U3_3a3e5^U9a7V7X7ZU:q9c9d9fS;b:p:sQ;p;cR;x;qU!wQ'`-eT5y1o5{!Q_OXZ`st!V!Z#d#h%e%m&i&k&r&t&u&w(j,s,x.[2[2_]!pQ!r'`-e1o5{T#q]<V%^{OPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_S(}#y#zS.b(m(n!s=l$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SU$fd)_,mS(p#p'iU*v%R(w4OU0m+O.n7gQ5^0xQ7V3`Q9d7YR:s9em!tQ!r!v!y!z'`'l'm'n-e-u1o5{5}Q't!uS(f#g2US-s'k'wQ/s*]Q0R*jQ3U-vQ4f/tQ4r0TQ4s0UQ4x0^Q7r4`S7}4t4vS8R4y4{Q9r7sQ9v7yQ9{8OQ:Q8TS:{9w9xS;g:|;PS;s;h;iS;{;t;uS<P;|;}R<S<QQ#wbQ's!uS(e#g2US(g#m+WQ+Y%fQ+j%xQ+p&OU-r'k't'wQ.W(fU/r*]*`/wQ0S*jQ0V*lQ1O+kQ1u,aS3R-s-vQ3Z.`S4e/s/tQ4n0PS4q0R0^Q4u0WQ6W1vQ7P3US7q4`4bQ7u4fU7|4r4x4{Q8P4wQ8v6XS9q7r7sQ9u7yQ9}8RQ:O8SQ:c8wQ:y9rS:z9v9xQ;S:QQ;^:dS;f:{;PS;r;g;hS;z;s;uS<O;{;}Q<R<PQ<T<SQ=o=jQ={=tR=|=uV!wQ'`-e%^aOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_S#wz!j!r=i$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SR=o>R%^bOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_Q%fj!^%xy!i!u%{%|%}'V'e'f'g'k'u*j+n+o-Y-l-m-t0R0U1R2u2|3T4r4s4v7}9{S&Oz!jQ+k%yQ,a&dW1v,b,c,d,eU6X1w1x1yS8w6Y6ZQ:d8x!r=j$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ=t>QR=u>R%QeOPXYstuvw!Z!`!g!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_Y#bWZ#W#Z(T!b%jm#h#i#l$x%e%h(^(h(i(j*Y*^*b+Z+[+^,o-V.T.Z.[.]._/m/p2d3[3]4a6r7TQ,n&o!p=k$Z$n)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SR=n'XU']!e%i*ZR2s-`%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+],p,s,x-i-q.P.V.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3l4z6T6e6f6i6|8t9T9_!r)_$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ,m&oQ0x+gQ3`.gQ7Y3dR9e7[!b$Tc#Y%q(S(Y(t(y)Z)[)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<W!P<d)^)q-Z.|2k2n3p3y3z4P4X6u7b7k7l8k9X9g9m9n;W;`=v!f$Vc#Y%q(S(Y(t(y)W)X)Z)[)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<W!T<f)^)q-Z.|2k2n3p3v3w3y3z4P4X6u7b7k7l8k9X9g9m9n;W;`=v!^$Zc#Y%q(S(Y(t(y)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<WQ4_/kz>S)^)q-Z.|2k2n3p4P4X6u7b7k7l8k9X9g9m9n;W;`=vQ>X>ZR>Y>['QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SS$oh$pR4U/U'XgOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/U/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>ST$kf$qQ$ifS)j$l)nR)v$qT$jf$qT)l$l)n'XhOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/U/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>ST$oh$pQ$rhR)u$p%^jOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_!s>Q$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S#glOPXZst!Z!`!o#S#d#o#{$n%m&k&n&o&r&t&u&w&{'T'b)O)s*i+]+g,p,s,x-i.g/V/n0]0l1r2S2T2V2X2[2_2a3d4T4z6T6e6f6i7[8t9T!U%Ri$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y#f(w#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^Q+T%aQ/c*Oo4O<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!U$yi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>YQ*c$zU*l$|*Z*oQ+U%bQ0W*m#f=q#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n=r<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hQ=w>TQ=x>UQ=y>VR=z>W!U%Ri$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y#f(w#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^o4O<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hnoOXst!Z#d%m&r&t&u&w,s,x2[2_S*f${*YQ-R'OQ-S'QR4i/y%[%Si#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^Q,U&]Q1h,WQ5s1gR8h5tV*n$|*Z*oU*n$|*Z*oT5z1o5{S0P*i/nQ4w0]T8S4z:]Q+j%xQ0V*lQ1O+kQ1u,aQ6W1vQ8v6XQ:c8wR;^:d!U%Oi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Yx*R$v)e*S*u+V/v0d0e4R4g5R5S5W7p8U:R:x=p=}>OS0`*t0a#f<o#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n<p<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!d=S(u)c*[*e.j.m.q/_/k/|0v1e3h4[4h4l5r7]7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[`=T3}7c7f7j9h:t:w;yS=_.l3iT=`7e9k!U%Qi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y|*T$v)e*U*t+V/g/v0d0e4R4g4|5R5S5W7p8U:R:x=p=}>OS0b*u0c#f<q#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n<r<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!h=U(u)c*[*e.k.l.q/_/k/|0v1e3f3h4[4h4l5r7]7^7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[d=V3}7d7e7j9h9i:t:u:w;yS=a.m3jT=b7f9lrnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_Q&f!UR,p&ornOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_R&f!UQ,Y&^R1d,RsnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_Q1p,_S6R1s1tU8p6P6Q6US:_8r8sS;Y:^:aQ;m;ZR;w;nQ&m!VR,i&iR6_1|R:f8yW&Q|&V&W,OR1Z+vQ&r!WR,s&sR,y&xT2],x2_R,}&yQ,|&yR2f,}Q'y!{R-y'ySsOtQ#dXT%ps#dQ#OTR'{#OQ#RUR'}#RQ){$uR/`){Q#UVR(Q#UQ#XWU(W#X(X.QQ(X#YR.Q(YQ-^'YR2r-^Q.u(yS3m.u3nR3n.vQ-e'`R2v-eY!rQ'`-e1o5{R'j!rQ/Q)eR4S/QU#_W%h*YU(_#_(`.RQ(`#`R.R(ZQ-a']R2t-at`OXst!V!Z#d%m&i&k&r&t&u&w,s,x2[2_S#hZ%eU#r`#h.[R.[(jQ(k#jQ.X(gW.a(k.X3X7RQ3X.YR7R3YQ)n$lR/W)nQ$phR)t$pQ$`cU)a$`-|<jQ-|<WR<j)qQ/q*]W4c/q4d7t9sU4d/r/s/tS7t4e4fR9s7u$e*Q$v(u)c)e*[*e*t*u+Q+R+V.l.m.o.p.q/_/g/i/k/v/|0d0e0v1e3f3g3h3}4R4[4g4h4l4|5O5R5S5W5r7]7^7_7`7e7f7h7i7j7p7w7z8U8X8Z9h9i9j9t9|:R:S:t:u:v:w:x:};R;e;j;v;y=p=}>O>Z>[Q/z*eU4k/z4m7xQ4m/|R7x4lS*o$|*ZR0Y*ox*S$v)e*t*u+V/v0d0e4R4g5R5S5W7p8U:R:x=p=}>O!d.j(u)c*[*e.l.m.q/_/k/|0v1e3h4[4h4l5r7]7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[U/h*S.j7ca7c3}7e7f7j9h:t:w;yQ0a*tQ3i.lU4}0a3i9kR9k7e|*U$v)e*t*u+V/g/v0d0e4R4g4|5R5S5W7p8U:R:x=p=}>O!h.k(u)c*[*e.l.m.q/_/k/|0v1e3f3h4[4h4l5r7]7^7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[U/j*U.k7de7d3}7e7f7j9h9i:t:u:w;yQ0c*uQ3j.mU5P0c3j9lR9l7fQ*z%UR0g*zQ5]0vR8Y5]Q+_%kR0u+_Q5v1jS8j5v:[R:[8kQ,[&_R1m,[Q5{1oR8m5{Q1{,fS6]1{8zR8z6_Q1U+rW5h1U5j8a:VQ5j1XQ8a5iR:V8bQ+w&QR1[+wQ2_,xR6m2_YrOXst#dQ&v!ZQ+a%mQ,r&rQ,t&tQ,u&uQ,w&wQ2Y,sS2],x2_R6l2[Q%opQ&z!_Q&}!aQ'P!bQ'R!cQ'q!uQ+`%lQ+l%zQ,Q&XQ,h&mQ-P&|W-p'k's't'wQ-w'oQ0X*nQ1P+mQ1c,PS2O,i,lQ2g-OQ2h-RQ2i-SQ2}-oW3P-r-s-v-xQ5a1QQ5m1_Q5q1eQ6V1uQ6a2QQ6k2ZU6z3O3R3UQ6}3SQ8]5bQ8e5oQ8g5rQ8l5zQ8u6WQ8{6`S9[6{7PQ9^7OQ:W8cQ:b8vQ:g8|Q:n9]Q;U:XQ;]:cQ;a:oQ;l;VR;o;^Q%zyQ'd!iQ'o!uU+m%{%|%}Q-W'VU-k'e'f'gS-o'k'uQ0Q*jS1Q+n+oQ2o-YS2{-l-mQ3S-tS4p0R0UQ5b1RQ6v2uQ6y2|Q7O3TU7{4r4s4vQ9z7}R;O9{S$wi>PR*{%VU%Ui%V>PR0f*yQ$viS(u#v+iS)c$b$cQ)e$dQ*[$xS*e${*YQ*t%OQ*u%QQ+Q%^Q+R%_Q+V%cQ.l<oQ.m<qQ.o<uQ.p<wQ.q<yQ/_)yQ/g*RQ/i*TQ/k*VQ/v*aS/|*g/mQ0d*wQ0e*xl0v+f,V.f1i1q3c6S7W8q9b:`:r;[;dQ1e,SQ3f=SQ3g=UQ3h=XS3}<l<mQ4R/PS4[/d4^Q4g/xQ4h/yQ4l/{Q4|0`Q5O0bQ5R0iQ5S0jQ5W0oQ5r1fQ7]=]Q7^=_Q7_=aQ7`=cQ7e<pQ7f<rQ7h<vQ7i<xQ7j<zQ7p4_Q7w4jQ7z4oQ8U5QQ8X5[Q8Z5_Q9h=YQ9i=TQ9j=VQ9t7vQ9|8QQ:R8VQ:S8[Q:t=^Q:u=`Q:v=bQ:w=dQ:x9pQ:}9yQ;R:PQ;e=gQ;j;QQ;v;kQ;y=hQ=p>PQ=}>XQ>O>YQ>Z>]R>[>^Q+O%]Q.n<sR7g<tnpOXst!Z#d%m&r&t&u&w,s,x2[2_Q!fPS#fZ#oQ&|!`W'h!o*i0]4zQ(P#SQ)Q#{Q)r$nS,l&k&nQ,q&oQ-O&{S-T'T/nQ-g'bQ.x)OQ/[)sQ0s+]Q0y+gQ2W,pQ2y-iQ3a.gQ4W/VQ5U0lQ6Q1rQ6c2SQ6d2TQ6h2VQ6j2XQ6o2aQ7Z3dQ7m4TQ8s6TQ9P6eQ9Q6fQ9S6iQ9f7[Q:a8tR:k9T#[cOPXZst!Z!`!o#d#o#{%m&k&n&o&r&t&u&w&{'T'b)O*i+]+g,p,s,x-i.g/n0]0l1r2S2T2V2X2[2_2a3d4z6T6e6f6i7[8t9TQ#YWQ#eYQ%quQ%svS%uw!gS(S#W(VQ(Y#ZQ(t#uQ(y#xQ)R$OQ)S$PQ)T$QQ)U$RQ)V$SQ)W$TQ)X$UQ)Y$VQ)Z$WQ)[$XQ)^$ZQ)`$_Q)b$aQ)g$eW)q$n)s/V4TQ+d%tQ+x&RS-Z'X2pQ-x'rS-}(T.PQ.S(]Q.U(dQ.s(xQ.v(zQ.z<UQ.|<XQ.}<YQ/O<]Q/b)}Q0p+XQ2k-UQ2n-XQ3O-qQ3V.VQ3k.tQ3p<^Q3q<_Q3r<`Q3s<aQ3t<bQ3u<cQ3v<dQ3w<eQ3x<fQ3y<gQ3z<hQ3{.{Q3|<kQ4P<nQ4Q<{Q4X<iQ5X0rQ5c1SQ6u=OQ6{3QQ7Q3WQ7a3lQ7b=PQ7k=RQ7l=ZQ8k5wQ9X6sQ9]6|Q9g=[Q9m=eQ9n=fQ:o9_Q;W:ZQ;`:mQ<W#SR=v>SR#[WR'Z!el!tQ!r!v!y!z'`'l'm'n-e-u1o5{5}S'V!e-]U*j$|*Z*oS-Y'W'_S0U*k*qQ0^*rQ2u-cQ4v0[R4{0_R({#xQ!fQT-d'`-e]!qQ!r'`-e1o5{Q#p]R'i<VR)f$dY!uQ'`-e1o5{Q'k!rS'u!v!yS'w!z5}S-t'l'mQ-v'nR3T-uT#kZ%eS#jZ%eS%km,oU(g#h#i#lS.Y(h(iQ.^(jQ0t+^Q3Y.ZU3Z.[.]._S7S3[3]R9`7Td#^W#W#Z%h(T(^*Y+Z.T/mr#gZm#h#i#l%e(h(i(j+^.Z.[.]._3[3]7TS*]$x*bQ/t*^Q2U,oQ2l-VQ4`/pQ6q2dQ7s4aQ9W6rT=m'X+[V#aW%h*YU#`W%h*YS(U#W(^U(Z#Z+Z/mS-['X+[T.O(T.TV'^!e%i*ZQ$lfR)x$qT)m$l)nR4V/UT*_$x*bT*h${*YQ0w+fQ1g,VQ3_.fQ5t1iQ6P1qQ7X3cQ8r6SQ9c7WQ:^8qQ:p9bQ;Z:`Q;c:rQ;n;[R;q;dnqOXst!Z#d%m&r&t&u&w,s,x2[2_Q&l!VR,h&itmOXst!U!V!Z#d%m&i&r&t&u&w,s,x2[2_R,o&oT%lm,oR1k,XR,g&gQ&U|S+}&V&WR1^,OR+s&PT&p!W&sT&q!W&sT2^,x2_",nodeNames:"⚠ ArithOp ArithOp ?. JSXStartTag LineComment BlockComment Script Hashbang ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > < TypeParamList in out const TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . PropertyName [ TemplateString Escape Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewTarget new NewExpression ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression TypeArgList CompareOp < declare Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression InstantiationExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast < ArrowFunction TypeParamList SequenceExpression InstantiationExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate asserts is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var using TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration defer ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem",maxTerm:380,context:yy,nodeProps:[["isolate",-8,5,6,14,37,39,51,53,55,""],["group",-26,9,17,19,68,207,211,215,216,218,221,224,234,237,243,245,247,249,252,258,264,266,268,270,272,274,275,"Statement",-34,13,14,32,35,36,42,51,54,55,57,62,70,72,76,80,82,84,85,110,111,120,121,136,139,141,142,143,144,145,147,148,167,169,171,"Expression",-23,31,33,37,41,43,45,173,175,177,178,180,181,182,184,185,186,188,189,190,201,203,205,206,"Type",-3,88,103,109,"ClassItem"],["openedBy",23,"<",38,"InterpolationStart",56,"[",60,"{",73,"(",160,"JSXStartCloseTag"],["closedBy",-2,24,168,">",40,"InterpolationEnd",50,"]",61,"}",74,")",165,"JSXEndTag"]],propSources:[Cy],skippedNodes:[0,5,6,278],repeatNodeCount:37,tokenData:"$Fq07[R!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tuEruvJSvwLkwx! Yxy!'iyz!(sz{!)}{|!,q|}!.O}!O!,q!O!P!/Y!P!Q!9j!Q!R#:O!R![#<_![!]#I_!]!^#Jk!^!_#Ku!_!`$![!`!a$$v!a!b$*T!b!c$,r!c!}Er!}#O$-|#O#P$/W#P#Q$4o#Q#R$5y#R#SEr#S#T$7W#T#o$8b#o#p$<r#p#q$=h#q#r$>x#r#s$@U#s$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$I|Er$I|$I}$Dk$I}$JO$Dk$JO$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr(n%d_$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$i&j(Z!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU(Z!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$i&j(WpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU(WpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z07[+rq$i&j(Wp(Z!b'|0/lOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z07[.ST(X#S$i&j'}0/lO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c07[.n_$i&j(Wp(Z!b'}0/lOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)3p/x`$i&j!p),Q(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW1V`#v(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW2d_#v(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At3l_(V':f$i&j(Z!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k(^4r_$i&j(Z!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k&z5vX$i&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q&z6jT$d`$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c`6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y`7bO$d``7eP;=`<%l6y&z7kP;=`<%l5q(^7w]$d`$i&j(Z!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!r8uZ(Z!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p!r9oU$d`(Z!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!r:UP;=`<%l8p(^:[P;=`<%l4k%9[:hh$i&j(Wp(Z!bOY%ZYZ&cZq%Zqr<Srs&}st%ZtuCruw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr(r<__WS$i&j(Wp(Z!bOY<SYZ&cZr<Srs=^sw<Swx@nx!^<S!^!_Bm!_#O<S#O#P>`#P#o<S#o#pBm#p;'S<S;'S;=`Cl<%lO<S(Q=g]WS$i&j(Z!bOY=^YZ&cZw=^wx>`x!^=^!^!_?q!_#O=^#O#P>`#P#o=^#o#p?q#p;'S=^;'S;=`@h<%lO=^&n>gXWS$i&jOY>`YZ&cZ!^>`!^!_?S!_#o>`#o#p?S#p;'S>`;'S;=`?k<%lO>`S?XSWSOY?SZ;'S?S;'S;=`?e<%lO?SS?hP;=`<%l?S&n?nP;=`<%l>`!f?xWWS(Z!bOY?qZw?qwx?Sx#O?q#O#P?S#P;'S?q;'S;=`@b<%lO?q!f@eP;=`<%l?q(Q@kP;=`<%l=^'`@w]WS$i&j(WpOY@nYZ&cZr@nrs>`s!^@n!^!_Ap!_#O@n#O#P>`#P#o@n#o#pAp#p;'S@n;'S;=`Bg<%lO@ntAwWWS(WpOYApZrAprs?Ss#OAp#O#P?S#P;'SAp;'S;=`Ba<%lOAptBdP;=`<%lAp'`BjP;=`<%l@n#WBvYWS(Wp(Z!bOYBmZrBmrs?qswBmwxApx#OBm#O#P?S#P;'SBm;'S;=`Cf<%lOBm#WCiP;=`<%lBm(rCoP;=`<%l<S%9[C}i$i&j(o%1l(Wp(Z!bOY%ZYZ&cZr%Zrs&}st%ZtuCruw%Zwx(rx!Q%Z!Q![Cr![!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr%9[EoP;=`<%lCr07[FRk$i&j(Wp(Z!b$]#t(T,2j(e$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr+dHRk$i&j(Wp(Z!b$]#tOY%ZYZ&cZr%Zrs&}st%ZtuGvuw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Gv![!^%Z!^!_*g!_!c%Z!c!}Gv!}#O%Z#O#P&c#P#R%Z#R#SGv#S#T%Z#T#oGv#o#p*g#p$g%Z$g;'SGv;'S;=`Iv<%lOGv+dIyP;=`<%lGv07[JPP;=`<%lEr(KWJ_`$i&j(Wp(Z!b#p(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWKl_$i&j$Q(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,#xLva(z+JY$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sv%ZvwM{wx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWNW`$i&j#z(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At! c_(Y';W$i&j(WpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b'l!!i_$i&j(WpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b&z!#mX$i&jOw!#hwx6cx!^!#h!^!_!$Y!_#o!#h#o#p!$Y#p;'S!#h;'S;=`!$r<%lO!#h`!$]TOw!$Ywx7]x;'S!$Y;'S;=`!$l<%lO!$Y`!$oP;=`<%l!$Y&z!$uP;=`<%l!#h'l!%R]$d`$i&j(WpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r!Q!&PZ(WpOY!%zYZ!$YZr!%zrs!$Ysw!%zwx!&rx#O!%z#O#P!$Y#P;'S!%z;'S;=`!']<%lO!%z!Q!&yU$d`(WpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r!Q!'`P;=`<%l!%z'l!'fP;=`<%l!!b/5|!'t_!l/.^$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&U!)O_!k!Lf$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z-!n!*[b$i&j(Wp(Z!b(U%&f#q(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!+d{!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW!+o`$i&j(Wp(Z!b#n(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;x!,|`$i&j(Wp(Z!br+4YOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,$U!.Z_!]+Jf$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!/ec$i&j(Wp(Z!b!Q.2^OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!0p!P!Q%Z!Q![!3Y![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!0ya$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!2O!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!2Z_![!L^$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!3eg$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!3Y![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S!3Y#S#X%Z#X#Y!4|#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!5Vg$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!6n|}%Z}!O!6n!O!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!6wc$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!8_c$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!9uf$i&j(Wp(Z!b#o(ChOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcxz!;Zz{#-}{!P!;Z!P!Q#/d!Q!^!;Z!^!_#(i!_!`#7S!`!a#8i!a!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z?O!;fb$i&j(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z>^!<w`$i&j(Z!b!X7`OY!<nYZ&cZw!<nwx!=yx!P!<n!P!Q!Eq!Q!^!<n!^!_!Gr!_!}!<n!}#O!KS#O#P!Dy#P#o!<n#o#p!Gr#p;'S!<n;'S;=`!L]<%lO!<n<z!>Q^$i&j!X7`OY!=yYZ&cZ!P!=y!P!Q!>|!Q!^!=y!^!_!@c!_!}!=y!}#O!CW#O#P!Dy#P#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!?Td$i&j!X7`O!^&c!_#W&c#W#X!>|#X#Z&c#Z#[!>|#[#]&c#]#^!>|#^#a&c#a#b!>|#b#g&c#g#h!>|#h#i&c#i#j!>|#j#k!>|#k#m&c#m#n!>|#n#o&c#p;'S&c;'S;=`&w<%lO&c7`!@hX!X7`OY!@cZ!P!@c!P!Q!AT!Q!}!@c!}#O!Ar#O#P!Bq#P;'S!@c;'S;=`!CQ<%lO!@c7`!AYW!X7`#W#X!AT#Z#[!AT#]#^!AT#a#b!AT#g#h!AT#i#j!AT#j#k!AT#m#n!AT7`!AuVOY!ArZ#O!Ar#O#P!B[#P#Q!@c#Q;'S!Ar;'S;=`!Bk<%lO!Ar7`!B_SOY!ArZ;'S!Ar;'S;=`!Bk<%lO!Ar7`!BnP;=`<%l!Ar7`!BtSOY!@cZ;'S!@c;'S;=`!CQ<%lO!@c7`!CTP;=`<%l!@c<z!C][$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#O!CW#O#P!DR#P#Q!=y#Q#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DWX$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DvP;=`<%l!CW<z!EOX$i&jOY!=yYZ&cZ!^!=y!^!_!@c!_#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!EnP;=`<%l!=y>^!Ezl$i&j(Z!b!X7`OY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#W&}#W#X!Eq#X#Z&}#Z#[!Eq#[#]&}#]#^!Eq#^#a&}#a#b!Eq#b#g&}#g#h!Eq#h#i&}#i#j!Eq#j#k!Eq#k#m&}#m#n!Eq#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}8r!GyZ(Z!b!X7`OY!GrZw!Grwx!@cx!P!Gr!P!Q!Hl!Q!}!Gr!}#O!JU#O#P!Bq#P;'S!Gr;'S;=`!J|<%lO!Gr8r!Hse(Z!b!X7`OY'}Zw'}x#O'}#P#W'}#W#X!Hl#X#Z'}#Z#[!Hl#[#]'}#]#^!Hl#^#a'}#a#b!Hl#b#g'}#g#h!Hl#h#i'}#i#j!Hl#j#k!Hl#k#m'}#m#n!Hl#n;'S'};'S;=`(f<%lO'}8r!JZX(Z!bOY!JUZw!JUwx!Arx#O!JU#O#P!B[#P#Q!Gr#Q;'S!JU;'S;=`!Jv<%lO!JU8r!JyP;=`<%l!JU8r!KPP;=`<%l!Gr>^!KZ^$i&j(Z!bOY!KSYZ&cZw!KSwx!CWx!^!KS!^!_!JU!_#O!KS#O#P!DR#P#Q!<n#Q#o!KS#o#p!JU#p;'S!KS;'S;=`!LV<%lO!KS>^!LYP;=`<%l!KS>^!L`P;=`<%l!<n=l!Ll`$i&j(Wp!X7`OY!LcYZ&cZr!Lcrs!=ys!P!Lc!P!Q!Mn!Q!^!Lc!^!_# o!_!}!Lc!}#O#%P#O#P!Dy#P#o!Lc#o#p# o#p;'S!Lc;'S;=`#&Y<%lO!Lc=l!Mwl$i&j(Wp!X7`OY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#W(r#W#X!Mn#X#Z(r#Z#[!Mn#[#](r#]#^!Mn#^#a(r#a#b!Mn#b#g(r#g#h!Mn#h#i(r#i#j!Mn#j#k!Mn#k#m(r#m#n!Mn#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r8Q# vZ(Wp!X7`OY# oZr# ors!@cs!P# o!P!Q#!i!Q!}# o!}#O#$R#O#P!Bq#P;'S# o;'S;=`#$y<%lO# o8Q#!pe(Wp!X7`OY)rZr)rs#O)r#P#W)r#W#X#!i#X#Z)r#Z#[#!i#[#])r#]#^#!i#^#a)r#a#b#!i#b#g)r#g#h#!i#h#i)r#i#j#!i#j#k#!i#k#m)r#m#n#!i#n;'S)r;'S;=`*Z<%lO)r8Q#$WX(WpOY#$RZr#$Rrs!Ars#O#$R#O#P!B[#P#Q# o#Q;'S#$R;'S;=`#$s<%lO#$R8Q#$vP;=`<%l#$R8Q#$|P;=`<%l# o=l#%W^$i&j(WpOY#%PYZ&cZr#%Prs!CWs!^#%P!^!_#$R!_#O#%P#O#P!DR#P#Q!Lc#Q#o#%P#o#p#$R#p;'S#%P;'S;=`#&S<%lO#%P=l#&VP;=`<%l#%P=l#&]P;=`<%l!Lc?O#&kn$i&j(Wp(Z!b!X7`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#W%Z#W#X#&`#X#Z%Z#Z#[#&`#[#]%Z#]#^#&`#^#a%Z#a#b#&`#b#g%Z#g#h#&`#h#i%Z#i#j#&`#j#k#&`#k#m%Z#m#n#&`#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z9d#(r](Wp(Z!b!X7`OY#(iZr#(irs!Grsw#(iwx# ox!P#(i!P!Q#)k!Q!}#(i!}#O#+`#O#P!Bq#P;'S#(i;'S;=`#,`<%lO#(i9d#)th(Wp(Z!b!X7`OY*gZr*grs'}sw*gwx)rx#O*g#P#W*g#W#X#)k#X#Z*g#Z#[#)k#[#]*g#]#^#)k#^#a*g#a#b#)k#b#g*g#g#h#)k#h#i*g#i#j#)k#j#k#)k#k#m*g#m#n#)k#n;'S*g;'S;=`+Z<%lO*g9d#+gZ(Wp(Z!bOY#+`Zr#+`rs!JUsw#+`wx#$Rx#O#+`#O#P!B[#P#Q#(i#Q;'S#+`;'S;=`#,Y<%lO#+`9d#,]P;=`<%l#+`9d#,cP;=`<%l#(i?O#,o`$i&j(Wp(Z!bOY#,fYZ&cZr#,frs!KSsw#,fwx#%Px!^#,f!^!_#+`!_#O#,f#O#P!DR#P#Q!;Z#Q#o#,f#o#p#+`#p;'S#,f;'S;=`#-q<%lO#,f?O#-tP;=`<%l#,f?O#-zP;=`<%l!;Z07[#.[b$i&j(Wp(Z!b(O0/l!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z07[#/o_$i&j(Wp(Z!bT0/lOY#/dYZ&cZr#/drs#0nsw#/dwx#4Ox!^#/d!^!_#5}!_#O#/d#O#P#1p#P#o#/d#o#p#5}#p;'S#/d;'S;=`#6|<%lO#/d06j#0w]$i&j(Z!bT0/lOY#0nYZ&cZw#0nwx#1px!^#0n!^!_#3R!_#O#0n#O#P#1p#P#o#0n#o#p#3R#p;'S#0n;'S;=`#3x<%lO#0n05W#1wX$i&jT0/lOY#1pYZ&cZ!^#1p!^!_#2d!_#o#1p#o#p#2d#p;'S#1p;'S;=`#2{<%lO#1p0/l#2iST0/lOY#2dZ;'S#2d;'S;=`#2u<%lO#2d0/l#2xP;=`<%l#2d05W#3OP;=`<%l#1p01O#3YW(Z!bT0/lOY#3RZw#3Rwx#2dx#O#3R#O#P#2d#P;'S#3R;'S;=`#3r<%lO#3R01O#3uP;=`<%l#3R06j#3{P;=`<%l#0n05x#4X]$i&j(WpT0/lOY#4OYZ&cZr#4Ors#1ps!^#4O!^!_#5Q!_#O#4O#O#P#1p#P#o#4O#o#p#5Q#p;'S#4O;'S;=`#5w<%lO#4O00^#5XW(WpT0/lOY#5QZr#5Qrs#2ds#O#5Q#O#P#2d#P;'S#5Q;'S;=`#5q<%lO#5Q00^#5tP;=`<%l#5Q05x#5zP;=`<%l#4O01p#6WY(Wp(Z!bT0/lOY#5}Zr#5}rs#3Rsw#5}wx#5Qx#O#5}#O#P#2d#P;'S#5};'S;=`#6v<%lO#5}01p#6yP;=`<%l#5}07[#7PP;=`<%l#/d)3h#7ab$i&j$Q(Ch(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;ZAt#8vb$Z#t$i&j(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z'Ad#:Zp$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#U%Z#U#V#?i#V#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#d#Bq#d#l%Z#l#m#Es#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#<jk$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#>j_$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#?rd$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#A]f$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Bzc$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Dbe$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#E|g$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Gpi$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x#Il_!g$b$i&j$O)Lv(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#Jv_al$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f#LS^h#)`#R-<U(Wp(Z!b$n7`OY*gZr*grs'}sw*gwx)rx!P*g!P!Q#MO!Q!^*g!^!_#Mt!_!`$ f!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#MXX$k&j(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El#M}Z#r(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#Np!`#O*g#P;'S*g;'S;=`+Z<%lO*g(El#NyX$Q(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El$ oX#s(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g*)x$!ga#`*!Y$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a$#l!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(K[$#w_#k(Cl$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x$%Vag!*r#s(Ch$f#|$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`$&[!`!a$'f!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$&g_#s(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$'qa#r(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`!a$(v!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$)R`#r(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(Kd$*`a(r(Ct$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!a%Z!a!b$+e!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$+p`$i&j#{(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`$,}_!|$Ip$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f$.X_!S0,v$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$/]Z$i&jO!^$0O!^!_$0f!_#i$0O#i#j$0k#j#l$0O#l#m$2^#m#o$0O#o#p$0f#p;'S$0O;'S;=`$4i<%lO$0O(n$0VT_#S$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$0kO_#S(n$0p[$i&jO!Q&c!Q![$1f![!^&c!_!c&c!c!i$1f!i#T&c#T#Z$1f#Z#o&c#o#p$3|#p;'S&c;'S;=`&w<%lO&c(n$1kZ$i&jO!Q&c!Q![$2^![!^&c!_!c&c!c!i$2^!i#T&c#T#Z$2^#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$2cZ$i&jO!Q&c!Q![$3U![!^&c!_!c&c!c!i$3U!i#T&c#T#Z$3U#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$3ZZ$i&jO!Q&c!Q![$0O![!^&c!_!c&c!c!i$0O!i#T&c#T#Z$0O#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$4PR!Q![$4Y!c!i$4Y#T#Z$4Y#S$4]S!Q![$4Y!c!i$4Y#T#Z$4Y#q#r$0f(n$4lP;=`<%l$0O#1[$4z_!Y#)l$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$6U`#x(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;p$7c_$i&j(Wp(Z!b(a+4QOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$8qk$i&j(Wp(Z!b(T,2j$_#t(e$I[OY%ZYZ&cZr%Zrs&}st%Ztu$8buw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$8b![!^%Z!^!_*g!_!c%Z!c!}$8b!}#O%Z#O#P&c#P#R%Z#R#S$8b#S#T%Z#T#o$8b#o#p*g#p$g%Z$g;'S$8b;'S;=`$<l<%lO$8b+d$:qk$i&j(Wp(Z!b$_#tOY%ZYZ&cZr%Zrs&}st%Ztu$:fuw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$:f![!^%Z!^!_*g!_!c%Z!c!}$:f!}#O%Z#O#P&c#P#R%Z#R#S$:f#S#T%Z#T#o$:f#o#p*g#p$g%Z$g;'S$:f;'S;=`$<f<%lO$:f+d$<iP;=`<%l$:f07[$<oP;=`<%l$8b#Jf$<{X!_#Hb(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g,#x$=sa(y+JY$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$+e#q;'S%Z;'S;=`+a<%lO%Z)>v$?V_!^(CdvBr$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z?O$@a_!q7`$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$Aq|$i&j(Wp(Z!b'|0/l$]#t(T,2j(e$I[OX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr07[$D|k$i&j(Wp(Z!b'}0/l$]#t(T,2j(e$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr",tokenizers:[by,Ay,vy,xy,2,3,4,5,6,7,8,9,10,11,12,13,14,Oy,new Hu("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOx~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!U~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(c~~",141,340),new Hu("j~RQYZXz{^~^O(Q~~aP!P!Qd~iO(R~~",25,323)],topRules:{Script:[0,7],SingleExpression:[1,276],SingleClassItem:[2,277]},dialects:{jsx:0,ts:15175},dynamicPrecedences:{80:1,82:1,94:1,169:1,199:1},specialized:[{term:327,get:f=>Sy[f]||-1},{term:343,get:f=>Py[f]||-1},{term:95,get:f=>My[f]||-1}],tokenPrec:15201}),Up=[Qn("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),Qn("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),Qn("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),Qn("do {\n	${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),Qn("while (${}) {\n	${}\n}",{label:"while",detail:"loop",type:"keyword"}),Qn(`try {
	\${}
} catch (\${error}) {
	\${}
}`,{label:"try",detail:"/ catch block",type:"keyword"}),Qn("if (${}) {\n	${}\n}",{label:"if",detail:"block",type:"keyword"}),Qn(`if (\${}) {
	\${}
} else {
	\${}
}`,{label:"if",detail:"/ else block",type:"keyword"}),Qn(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`,{label:"class",detail:"definition",type:"keyword"}),Qn('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),Qn('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],ky=Up.concat([Qn("interface ${name} {\n	${}\n}",{label:"interface",detail:"definition",type:"keyword"}),Qn("type ${name} = ${type}",{label:"type",detail:"definition",type:"keyword"}),Qn("enum ${name} {\n	${}\n}",{label:"enum",detail:"definition",type:"keyword"})]),qp=new k0,Hp=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function no(f){return(t,a)=>{let u=t.node.getChild("VariableDefinition");return u&&a(u,f),!0}}const $y=["FunctionDeclaration"],Dy={FunctionDeclaration:no("function"),ClassDeclaration:no("class"),ClassExpression:()=>!0,EnumDeclaration:no("constant"),TypeAliasDeclaration:no("type"),NamespaceDeclaration:no("namespace"),VariableDefinition(f,t){f.matchContext($y)||t(f,"variable")},TypeDefinition(f,t){t(f,"type")},__proto__:null};function Kp(f,t){let a=qp.get(t);if(a)return a;let u=[],p=!0;function g(b,M){let k=f.sliceString(b.from,b.to);u.push({label:k,type:M})}return t.cursor(yn.IncludeAnonymous).iterate(b=>{if(p)p=!1;else if(b.name){let M=Dy[b.name];if(M&&M(b,g)||Hp.has(b.name))return!1}else if(b.to-b.from>8192){for(let M of Kp(f,b.node))u.push(M);return!1}}),qp.set(t,u),u}const Jp=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,ed=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName","JSXText","JSXAttributeValue","JSXOpenTag","JSXCloseTag","JSXSelfClosingTag",".","?."];function Ey(f){let t=On(f.state).resolveInner(f.pos,-1);if(ed.indexOf(t.name)>-1)return null;let a=t.name=="VariableName"||t.to-t.from<20&&Jp.test(f.state.sliceDoc(t.from,t.to));if(!a&&!f.explicit)return null;let u=[];for(let p=t;p;p=p.parent)Hp.has(p.name)&&(u=u.concat(Kp(f.state.doc,p)));return{options:u,from:a?t.from:f.pos,validFor:Jp}}const br=ha.define({name:"javascript",parser:wy.configure({props:[Nh.add({IfStatement:lu({except:/^\s*({|else\b)/}),TryStatement:lu({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:q0,SwitchBody:f=>{let t=f.textAfter,a=/^\s*\}/.test(t),u=/^\s*(case|default)\b/.test(t);return f.baseIndent+(a?0:u?1:2)*f.unit},Block:U0({closing:"}"}),ArrowFunction:f=>f.baseIndent+f.unit,"TemplateString BlockComment":()=>null,"Statement Property":lu({except:/^\s*{/}),JSXElement(f){let t=/^\s*<\//.test(f.textAfter);return f.lineIndent(f.node.from)+(t?0:f.unit)},JSXEscape(f){let t=/\s*\}/.test(f.textAfter);return f.lineIndent(f.node.from)+(t?0:f.unit)},"JSXOpenTag JSXSelfClosingTag"(f){return f.column(f.node.from)+f.unit}}),Xh.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":e1,BlockComment(f){return{from:f.from+2,to:f.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),td={test:f=>/^JSX/.test(f.name),facet:Rh({commentTokens:{block:{open:"{/*",close:"*/}"}}})},Fy=br.configure({dialect:"ts"},"typescript"),Ty=br.configure({dialect:"jsx",props:[ru.add(f=>f.isTop?[td]:void 0)]}),Ry=br.configure({dialect:"jsx ts",props:[ru.add(f=>f.isTop?[td]:void 0)]},"typescript");let nd=f=>({label:f,type:"keyword"});const rd="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(nd),Gy=rd.concat(["declare","implements","private","protected","public"].map(nd));function Ly(f={}){let t=f.jsx?f.typescript?Ry:Ty:f.typescript?Fy:br,a=f.typescript?ky.concat(Gy):Up.concat(rd);return new Q0(t,[br.data.of({autocomplete:Bg(ed,cp(a))}),br.data.of({autocomplete:Ey}),f.jsx?By:[]])}function Zy(f){for(;;){if(f.name=="JSXOpenTag"||f.name=="JSXSelfClosingTag"||f.name=="JSXFragmentTag")return f;if(f.name=="JSXEscape"||!f.parent)return null;f=f.parent}}function sd(f,t,a=f.length){for(let u=t?.firstChild;u;u=u.nextSibling)if(u.name=="JSXIdentifier"||u.name=="JSXBuiltin"||u.name=="JSXNamespacedName"||u.name=="JSXMemberExpression")return f.sliceString(u.from,Math.min(u.to,a));return""}const Ny=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),By=st.inputHandler.of((f,t,a,u,p)=>{if((Ny?f.composing:f.compositionStarted)||f.state.readOnly||t!=a||u!=">"&&u!="/"||!br.isActiveAt(f.state,t,-1))return!1;let g=p(),{state:b}=g,M=b.changeByRange(k=>{var R;let{head:Z}=k,j=On(b).resolveInner(Z-1,-1),K;if(j.name=="JSXStartTag"&&(j=j.parent),!(b.doc.sliceString(Z-1,Z)!=u||j.name=="JSXAttributeValue"&&j.to>Z)){if(u==">"&&j.name=="JSXFragmentTag")return{range:k,changes:{from:Z,insert:"</>"}};if(u=="/"&&j.name=="JSXStartCloseTag"){let oe=j.parent,de=oe.parent;if(de&&oe.from==Z-2&&((K=sd(b.doc,de.firstChild,Z))||((R=de.firstChild)===null||R===void 0?void 0:R.name)=="JSXFragmentTag")){let be=`${K}>`;return{range:we.cursor(Z+be.length,-1),changes:{from:Z,insert:be}}}}else if(u==">"){let oe=Zy(j);if(oe&&oe.name=="JSXOpenTag"&&!/^\/?>|^<\//.test(b.doc.sliceString(Z,Z+2))&&(K=sd(b.doc,oe,Z)))return{range:k,changes:{from:Z,insert:`</${K}>`}}}}return{range:k}});return M.changes.empty?!1:(f.dispatch([g,b.update(M,{userEvent:"input.complete",scrollIntoView:!0})]),!0)}),ic="#2e3440",od="#3b4252",ld="#434c5e",Kr="#4c566a",io="#d8dee9",Qy="#e5e9f0",Xy="#eceff4",Ar="#8fbcbb",ud="#88c0d0",Iy="#81a1c1",wi="#5e81ac",Vy="#bf616a",cd="#d08770",rc="#ebcb8b",ol="#a3be8c",sc="#b48ead",hd="#d30102",Wy="#252a33",oc=Kr,zy=ic,ac=od,Yy=Kr,fd=io,jy=st.theme({"&":{color:io,backgroundColor:zy},".cm-content":{caretColor:fd},".cm-cursor, .cm-dropCursor":{borderLeftColor:fd},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:Yy},".cm-panels":{backgroundColor:Wy,color:Kr},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"transparent",outline:`1px solid ${Ar}`},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:io,color:ic},".cm-activeLine":{backgroundColor:oc},".cm-selectionMatch":{backgroundColor:Qy,color:od},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{outline:`1px solid ${Ar}`},"&.cm-focused .cm-matchingBracket":{backgroundColor:Xy,color:ld},".cm-gutters":{backgroundColor:ic,color:Kr,border:"none"},".cm-activeLineGutter":{backgroundColor:oc,color:io},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:ac},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:ac,borderBottomColor:ac},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:oc,color:Kr}}},{dark:!0}),Uy=ya.define([{tag:Ce.keyword,color:wi},{tag:[Ce.name,Ce.deleted,Ce.character,Ce.propertyName,Ce.macroName],color:ud},{tag:[Ce.variableName],color:Ar},{tag:[Ce.function(Ce.variableName)],color:Ar},{tag:[Ce.labelName],color:Iy},{tag:[Ce.color,Ce.constant(Ce.name),Ce.standard(Ce.name)],color:wi},{tag:[Ce.definition(Ce.name),Ce.separator],color:ol},{tag:[Ce.brace],color:Ar},{tag:[Ce.annotation],color:hd},{tag:[Ce.number,Ce.changed,Ce.annotation,Ce.modifier,Ce.self,Ce.namespace],color:sc},{tag:[Ce.typeName,Ce.className],color:rc},{tag:[Ce.operator,Ce.operatorKeyword],color:ol},{tag:[Ce.tagName],color:sc},{tag:[Ce.squareBracket],color:Vy},{tag:[Ce.angleBracket],color:cd},{tag:[Ce.attributeName],color:rc},{tag:[Ce.regexp],color:wi},{tag:[Ce.quote],color:sc},{tag:[Ce.string],color:ol},{tag:Ce.link,color:ol,textDecoration:"underline",textUnderlinePosition:"under"},{tag:[Ce.url,Ce.escape,Ce.special(Ce.string)],color:Ar},{tag:[Ce.meta],color:ud},{tag:[Ce.monospace],color:io,fontStyle:"italic"},{tag:[Ce.comment],color:Kr,fontStyle:"italic"},{tag:Ce.strong,fontWeight:"bold",color:wi},{tag:Ce.emphasis,fontStyle:"italic",color:wi},{tag:Ce.strikethrough,textDecoration:"line-through"},{tag:Ce.heading,fontWeight:"bold",color:wi},{tag:Ce.special(Ce.heading1),fontWeight:"bold",color:wi},{tag:Ce.heading1,fontWeight:"bold",color:wi},{tag:[Ce.heading2,Ce.heading3,Ce.heading4],fontWeight:"bold",color:wi},{tag:[Ce.heading5,Ce.heading6],color:wi},{tag:[Ce.atom,Ce.bool,Ce.special(Ce.variableName)],color:cd},{tag:[Ce.processingInstruction,Ce.inserted],color:Ar},{tag:[Ce.contentSeparator],color:rc},{tag:Ce.invalid,color:ld,borderBottom:`1px dotted ${hd}`}]),qy=[jy,d1(Uy)],pd=f=>t=>{const a=f==="down";let u=t.state.selection;for(const p of u.ranges)u=u.addRange(t.moveVertically(p,a));return t.dispatch({selection:u}),!0},Hy=[{key:"Ctrl-Space",run:Ja},{key:"Escape",run:vp},{key:"ArrowDown",run:Hi(!0)},{key:"ArrowUp",run:Hi(!1)},{key:"PageDown",run:Hi(!0,"page")},{key:"PageUp",run:Hi(!1,"page")},{key:"Enter",run:Vu},{key:"Tab",run:Vu},{key:"Mod-f",run:Gu,scope:"editor search-panel"},{key:"Escape",run:Lu,scope:"editor search-panel"},{key:"Alt-Enter",run:tp,scope:"editor search-panel"},{key:"Mod-Alt-Enter",run:rp,scope:"editor search-panel"},{key:"Ctrl-g",run:qf},{key:"Mod-d",run:Du,preventDefault:!0},{key:"Shift-Mod-l",run:np},{key:"Enter",run:Qa,shift:Qa},{key:"ArrowLeft",run:va,shift:Ma,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:mf,shift:Sf},{key:"ArrowRight",run:xa,shift:wa,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:gf,shift:Pf},{key:"ArrowUp",run:Sa,shift:ka,preventDefault:!0},{key:"ArrowDown",run:Pa,shift:$a,preventDefault:!0},{key:"Home",run:Au,shift:xu},{mac:"Cmd-ArrowLeft",run:Au,shift:xu},{key:"Mod-Home",run:Fa,shift:Ra},{mac:"Cmd-ArrowUp",run:Fa,shift:Ra},{key:"PageUp",run:Vs,shift:Da},{mac:"Ctrl-ArrowUp",run:Vs,shift:Da},{key:"PageDown",run:Br,shift:Ea},{mac:"Ctrl-ArrowDown",run:Br,shift:Ea},{key:"End",run:bu,shift:vu},{mac:"Cmd-ArrowRight",run:bu,shift:vu},{key:"Mod-Alt-ArrowUp",linux:"Shift-Alt-ArrowUp",run:pd("up"),preventDefault:!0},{key:"Mod-Alt-ArrowDown",linux:"Shift-Alt-ArrowDown",run:pd("down"),preventDefault:!0},{key:"Shift-Alt-i",run:f=>{let t=null;for(const a of f.state.selection.ranges)if(!a.empty)for(let u=a.from;u<=a.to;){const p=f.state.doc.lineAt(u),g=Math.min(p.to,a.to);t?t=t.addRange(we.range(g,g)):t=we.single(g),u=p.to+1}return t?(f.dispatch({selection:t}),!0):!1}},{key:"Mod-End",run:Ta,shift:Ga},{mac:"Cmd-ArrowDown",run:Ta,shift:Ga},{key:"Mod-a",run:Df},{key:"Backspace",run:b_},{key:"Backspace",run:Xr,shift:Xr},{key:"Delete",run:Za},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Na},{key:"Mod-Delete",mac:"Alt-Delete",run:Gf},{mac:"Mod-Backspace",run:og},{mac:"Mod-Delete",run:Cu},{mac:"Ctrl-b",run:va,shift:Ma,preventDefault:!0},{mac:"Ctrl-f",run:xa,shift:wa},{mac:"Ctrl-p",run:Sa,shift:ka},{mac:"Ctrl-n",run:Pa,shift:$a},{mac:"Ctrl-a",run:bf,shift:kf},{mac:"Ctrl-e",run:Af,shift:$f},{mac:"Ctrl-d",run:Za},{mac:"Ctrl-h",run:Xr},{mac:"Ctrl-k",run:Cu},{mac:"Ctrl-Alt-h",run:Na},{mac:"Ctrl-o",run:Lf},{mac:"Ctrl-t",run:Zf},{mac:"Ctrl-v",run:Br},{mac:"Alt-v",run:Vs},{key:"Shift-Mod-k",run:If},{key:"Alt-ArrowDown",run:Qf},{key:"Alt-ArrowUp",run:Bf},{win:"Shift-Alt-ArrowDown",mac:"Shift-Alt-ArrowDown",run:Pu},{win:"Shift-Alt-ArrowUp",mac:"Shift-Alt-ArrowUp",run:Su},{key:"Mod-l",run:Ef,preventDefault:!0},{key:"Shift-Mod-\\",run:vf},{key:"Tab",run:Xa,shift:Ia,preventDefault:!0},{key:"Mod-[",run:Ia},{key:"Mod-]",run:Xa},{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:r1},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:s1},{key:"Mod-k Mod-0",run:o1},{key:"Mod-k Mod-j",run:a1},{key:"Mod-k Mod-c",run:$1},{key:"Mod-k Mod-u",run:D1},{key:"Mod-/",run:sf},{key:"Shift-Alt-a",run:of},{key:"Mod-z",run:yu,preventDefault:!0},{key:"Mod-y",run:Is,preventDefault:!0},{key:"Mod-Shift-z",run:Is,preventDefault:!0},{key:"Mod-u",run:cf,preventDefault:!0},{key:"Mod-Shift-m",run:R_},{key:"F8",run:G_}];window.CM={EditorView:st,EditorState:Pe,Compartment:Ae,Prec:rn,javascript:Ly,nord:qy,keymap:qo,vscodeKeymap:Hy,indentWithTab:gg,indentUnit:Zs,autocompletion:M_,lineNumbers:O0,history:L1,foldGutter:h1,highlightActiveLineGutter:v0,drawSelection:Xm,dropCursor:Ym,indentOnInput:K0,bracketMatching:v1,closeBrackets:__,rectangularSelection:Hm,crosshairCursor:e0,defaultKeymap:mg,historyKeymap:W1,highlightSelectionMatches:bg,searchKeymap:Gg,search:wg,selectNextOccurrence:Du,copyLineDown:Pu,copyLineUp:Su,StateField:bt,StateEffect:Be,Decoration:_t}})(),(function(){let e=window.AudioContext||window.webkitAudioContext;function o(d,O=3,A=2){let S=d.sampleRate,$=S*O,F=d.createBuffer(2,$,S),E=F.getChannelData(0),L=F.getChannelData(1);for(let N=0;N<$;N++){let V=N/$,B=Math.pow(1-V,A);E[N]=(Math.random()*2-1)*B,L[N]=(Math.random()*2-1)*B}return F}class l extends e{constructor(...O){super(...O);let A=this;const S=!window.master_fx;console.log(S?"Intercepted MAIN AudioContext (Seamless Reverb + LFO Mode + Metering)":"Intercepted SECONDARY AudioContext");let $=A.createBiquadFilter();$.type="lowshelf",$.frequency.value=320,$.gain.value=0;let F=A.createBiquadFilter();F.type="peaking",F.frequency.value=1e3,F.Q.value=1,F.gain.value=0;let E=A.createBiquadFilter();E.type="highshelf",E.frequency.value=4e3,E.gain.value=0,App.panning=A.createStereoPanner(),App.panning.pan.value=0;let L=A.createOscillator();L.type="sine",L.frequency.value=0;let N=A.createGain();N.gain.value=0,L.connect(N),N.connect(App.panning.pan),L.start();let V=A.createConvolver();V.buffer=o(A);let B=A.createGain();B.gain.value=0;let U=A.createGain();U.gain.value=1;let q=A.createAnalyser();q.fftSize=256;let ee=q.frequencyBinCount,le=new Uint8Array(ee);if($.connect(F),F.connect(E),E.connect(App.panning),App.panning.connect(U),U.connect(q),q.connect(super.destination),Object.defineProperty($,"maxChannelCount",{get:()=>super.destination.maxChannelCount}),Object.defineProperty(A,"destination",{get:()=>$,configurable:!0}),S){let ue={timer:null,is_connected:!1};window.master_fx={context:A,nodes:{eq_low:$,eq_mid:F,eq_high:E,panner:App.panning,reverb_gain:B,master_gain:U,lfo:L,lfo_gain:N,analyser:q},get_volume:()=>{q.getByteTimeDomainData(le);let _e=0;for(let ie=0;ie<ee;ie++){let ae=(le[ie]-128)/128;_e+=ae*ae}return Math.sqrt(_e/ee)},set_eq:(_e,ie,ae)=>{let fe=A.currentTime,Oe=.1;_e!==void 0&&$.gain.setTargetAtTime(_e,fe,Oe),ie!==void 0&&F.gain.setTargetAtTime(ie,fe,Oe),ae!==void 0&&E.gain.setTargetAtTime(ae,fe,Oe)},set_volume:_e=>{U.gain.setTargetAtTime(_e,A.currentTime,.1)},set_panning:_e=>{App.panning.pan.setTargetAtTime(_e,A.currentTime+.02,.1)},set_auto_pan:(_e,ie)=>{let ae=A.currentTime;L.frequency.setTargetAtTime(_e,ae,.1),N.gain.setTargetAtTime(ie,ae,.1)},splash_reverb:(_e=3)=>{let ie=A.currentTime,ae=.1,fe=.5,Oe=.5;ue.timer&&(clearTimeout(ue.timer),ue.timer=null),B.gain.cancelScheduledValues(ie),ue.is_connected||(App.panning.connect(V),V.connect(B),B.connect(U),B.gain.setValueAtTime(0,ie),ue.is_connected=!0),B.gain.linearRampToValueAtTime(Oe,ie+ae);let ve=ie+_e;B.gain.setValueAtTime(Oe,ve),B.gain.linearRampToValueAtTime(0,ve+fe),ue.timer=setTimeout(()=>{B.disconnect(),V.disconnect(),ue.is_connected=!1},(_e+fe)*1e3+100)}}}}}window.AudioContext=l,window.webkitAudioContext&&(window.webkitAudioContext=l)})(),typeof globalThis.process>"u"&&(globalThis.process={env:{}}),typeof globalThis.process.env>"u"&&(globalThis.process.env={}),typeof globalThis.process.env.NODE_ENV>"u"&&(globalThis.process.env.NODE_ENV="production");function peg$subclass(e,o){function l(){this.constructor=e}l.prototype=o.prototype,e.prototype=new l}function peg$SyntaxError(e,o,l,d){var O=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(O,peg$SyntaxError.prototype),O.expected=o,O.found=l,O.location=d,O.name="SyntaxError",O}peg$subclass(peg$SyntaxError,Error);function peg$padEnd(e,o,l){return l=l||" ",e.length>o?e:(o-=e.length,l+=l.repeat(o),e+l.slice(0,o))}peg$SyntaxError.prototype.format=function(e){var o="Error: "+this.message;if(this.location){var l=null,d;for(d=0;d<e.length;d++)if(e[d].source===this.location.source){l=e[d].text.split(/\r\n|\n|\r/g);break}var O=this.location.start,A=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(O):O,S=this.location.source+":"+A.line+":"+A.column;if(l){var $=this.location.end,F=peg$padEnd("",A.line.toString().length," "),E=l[O.line-1],L=O.line===$.line?$.column:E.length+1,N=L-O.column||1;o+=`
 --> `+S+`
`+F+` |
`+A.line+" | "+E+`
`+F+" | "+peg$padEnd("",O.column-1," ")+peg$padEnd("",N,"^")}else o+=`
 at `+S}return o},peg$SyntaxError.buildMessage=function(e,o){var l={literal:function(E){return'"'+O(E.text)+'"'},class:function(E){var L=E.parts.map(function(N){return Array.isArray(N)?A(N[0])+"-"+A(N[1]):A(N)});return"["+(E.inverted?"^":"")+L.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(E){return E.description}};function d(E){return E.charCodeAt(0).toString(16).toUpperCase()}function O(E){return E.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(L){return"\\x0"+d(L)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(L){return"\\x"+d(L)})}function A(E){return E.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(L){return"\\x0"+d(L)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(L){return"\\x"+d(L)})}function S(E){return l[E.type](E)}function $(E){var L=E.map(S),N,V;if(L.sort(),L.length>0){for(N=1,V=1;N<L.length;N++)L[N-1]!==L[N]&&(L[V]=L[N],V++);L.length=V}switch(L.length){case 1:return L[0];case 2:return L[0]+" or "+L[1];default:return L.slice(0,-1).join(", ")+", or "+L[L.length-1]}}function F(E){return E?'"'+O(E)+'"':"end of input"}return"Expected "+$(e)+" but "+F(o)+" found."};function peg$parse(e,o){o=o!==void 0?o:{};var l={},d=o.grammarSource,O={start:ur},A=ur,S=".",$="-",F="0",E=",",L="|",N="[",V="]",B="{",U="}",q="%",ee="<",le=">",ue="!",_e="(",ie=")",ae="/",fe="*",Oe="?",ve=":",Re="..",Me="^",Ye="struct",Te="target",Ge="euclid",Ne="slow",Je="rotL",je="rotR",qe="fast",et="scale",Tt="//",Rt="cat",Qt="$",Fe="setcps",pt="setbpm",we="hush",xt=/^[1-9]/,Ct=/^[eE]/,Ze=/^[+\-]/,St=/^[0-9]/,Lt=/^[ \n\r\t\xA0]/,cn=/^["']/,sn=/^[#\--.0-9A-Z\^-_a-z~\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376-\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E-\u066F\u0671-\u06D3\u06D5\u06E5-\u06E6\u06EE-\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4-\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC-\u09DD\u09DF-\u09E1\u09F0-\u09F1\u09FC\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33\u0A35-\u0A36\u0A38-\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2-\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0-\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F-\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32-\u0B33\u0B35-\u0B39\u0B3D\u0B5C-\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99-\u0B9A\u0B9C\u0B9E-\u0B9F\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60-\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0-\u0CE1\u0CF1-\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32-\u0E33\u0E40-\u0E46\u0E81-\u0E82\u0E84\u0E87-\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA-\u0EAB\u0EAD-\u0EB0\u0EB2-\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065-\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE-\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5-\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7B9\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD-\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5-\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,Xt=/^[@_]/,on=/^[^\n]/,bt=yi("number"),un=$t(".",!1),jt=qn([["1","9"]],!1,!1),rn=qn(["e","E"],!1,!1),$n=qn(["+","-"],!1,!1),Ae=$t("-",!1),xe=$t("0",!1),ye=qn([["0","9"]],!1,!1),ke=yi("whitespace"),Qe=qn([" ",`
`,"\r","	"," "],!1,!1),Ue=$t(",",!1),Xe=$t("|",!1),ut=qn(['"',"'"],!1,!1),Ie=yi('a letter, a number, "-", "#", ".", "^", "_"'),at=qn(["#",["-","."],["0","9"],["A","Z"],["^","_"],["a","z"],"~","ª","µ","º",["À","Ö"],["Ø","ö"],["ø","ˁ"],["ˆ","ˑ"],["ˠ","ˤ"],"ˬ","ˮ",["Ͱ","ʹ"],["Ͷ","ͷ"],["ͺ","ͽ"],"Ϳ","Ά",["Έ","Ί"],"Ό",["Ύ","Ρ"],["Σ","ϵ"],["Ϸ","ҁ"],["Ҋ","ԯ"],["Ա","Ֆ"],"ՙ",["ՠ","ֈ"],["א","ת"],["ׯ","ײ"],["ؠ","ي"],["ٮ","ٯ"],["ٱ","ۓ"],"ە",["ۥ","ۦ"],["ۮ","ۯ"],["ۺ","ۼ"],"ۿ","ܐ",["ܒ","ܯ"],["ݍ","ޥ"],"ޱ",["ߊ","ߪ"],["ߴ","ߵ"],"ߺ",["ࠀ","ࠕ"],"ࠚ","ࠤ","ࠨ",["ࡀ","ࡘ"],["ࡠ","ࡪ"],["ࢠ","ࢴ"],["ࢶ","ࢽ"],["ऄ","ह"],"ऽ","ॐ",["क़","ॡ"],["ॱ","ঀ"],["অ","ঌ"],["এ","ঐ"],["ও","ন"],["প","র"],"ল",["শ","হ"],"ঽ","ৎ",["ড়","ঢ়"],["য়","ৡ"],["ৰ","ৱ"],"ৼ",["ਅ","ਊ"],["ਏ","ਐ"],["ਓ","ਨ"],["ਪ","ਰ"],["ਲ","ਲ਼"],["ਵ","ਸ਼"],["ਸ","ਹ"],["ਖ਼","ੜ"],"ਫ਼",["ੲ","ੴ"],["અ","ઍ"],["એ","ઑ"],["ઓ","ન"],["પ","ર"],["લ","ળ"],["વ","હ"],"ઽ","ૐ",["ૠ","ૡ"],"ૹ",["ଅ","ଌ"],["ଏ","ଐ"],["ଓ","ନ"],["ପ","ର"],["ଲ","ଳ"],["ଵ","ହ"],"ଽ",["ଡ଼","ଢ଼"],["ୟ","ୡ"],"ୱ","ஃ",["அ","ஊ"],["எ","ஐ"],["ஒ","க"],["ங","ச"],"ஜ",["ஞ","ட"],["ண","த"],["ந","ப"],["ம","ஹ"],"ௐ",["అ","ఌ"],["ఎ","ఐ"],["ఒ","న"],["ప","హ"],"ఽ",["ౘ","ౚ"],["ౠ","ౡ"],"ಀ",["ಅ","ಌ"],["ಎ","ಐ"],["ಒ","ನ"],["ಪ","ಳ"],["ವ","ಹ"],"ಽ","ೞ",["ೠ","ೡ"],["ೱ","ೲ"],["അ","ഌ"],["എ","ഐ"],["ഒ","ഺ"],"ഽ","ൎ",["ൔ","ൖ"],["ൟ","ൡ"],["ൺ","ൿ"],["අ","ඖ"],["ක","න"],["ඳ","ර"],"ල",["ව","ෆ"],["ก","ะ"],["า","ำ"],["เ","ๆ"],["ກ","ຂ"],"ຄ",["ງ","ຈ"],"ຊ","ຍ",["ດ","ທ"],["ນ","ຟ"],["ມ","ຣ"],"ລ","ວ",["ສ","ຫ"],["ອ","ະ"],["າ","ຳ"],"ຽ",["ເ","ໄ"],"ໆ",["ໜ","ໟ"],"ༀ",["ཀ","ཇ"],["ཉ","ཬ"],["ྈ","ྌ"],["က","ဪ"],"ဿ",["ၐ","ၕ"],["ၚ","ၝ"],"ၡ",["ၥ","ၦ"],["ၮ","ၰ"],["ၵ","ႁ"],"ႎ",["Ⴀ","Ⴥ"],"Ⴧ","Ⴭ",["ა","ჺ"],["ჼ","ቈ"],["ቊ","ቍ"],["ቐ","ቖ"],"ቘ",["ቚ","ቝ"],["በ","ኈ"],["ኊ","ኍ"],["ነ","ኰ"],["ኲ","ኵ"],["ኸ","ኾ"],"ዀ",["ዂ","ዅ"],["ወ","ዖ"],["ዘ","ጐ"],["ጒ","ጕ"],["ጘ","ፚ"],["ᎀ","ᎏ"],["Ꭰ","Ᏽ"],["ᏸ","ᏽ"],["ᐁ","ᙬ"],["ᙯ","ᙿ"],["ᚁ","ᚚ"],["ᚠ","ᛪ"],["ᛮ","ᛸ"],["ᜀ","ᜌ"],["ᜎ","ᜑ"],["ᜠ","ᜱ"],["ᝀ","ᝑ"],["ᝠ","ᝬ"],["ᝮ","ᝰ"],["ក","ឳ"],"ៗ","ៜ",["ᠠ","ᡸ"],["ᢀ","ᢄ"],["ᢇ","ᢨ"],"ᢪ",["ᢰ","ᣵ"],["ᤀ","ᤞ"],["ᥐ","ᥭ"],["ᥰ","ᥴ"],["ᦀ","ᦫ"],["ᦰ","ᧉ"],["ᨀ","ᨖ"],["ᨠ","ᩔ"],"ᪧ",["ᬅ","ᬳ"],["ᭅ","ᭋ"],["ᮃ","ᮠ"],["ᮮ","ᮯ"],["ᮺ","ᯥ"],["ᰀ","ᰣ"],["ᱍ","ᱏ"],["ᱚ","ᱽ"],["ᲀ","ᲈ"],["Ა","Ჺ"],["Ჽ","Ჿ"],["ᳩ","ᳬ"],["ᳮ","ᳱ"],["ᳵ","ᳶ"],["ᴀ","ᶿ"],["Ḁ","ἕ"],["Ἐ","Ἕ"],["ἠ","ὅ"],["Ὀ","Ὅ"],["ὐ","ὗ"],"Ὑ","Ὓ","Ὕ",["Ὗ","ώ"],["ᾀ","ᾴ"],["ᾶ","ᾼ"],"ι",["ῂ","ῄ"],["ῆ","ῌ"],["ῐ","ΐ"],["ῖ","Ί"],["ῠ","Ῥ"],["ῲ","ῴ"],["ῶ","ῼ"],"ⁱ","ⁿ",["ₐ","ₜ"],"ℂ","ℇ",["ℊ","ℓ"],"ℕ",["ℙ","ℝ"],"ℤ","Ω","ℨ",["K","ℭ"],["ℯ","ℹ"],["ℼ","ℿ"],["ⅅ","ⅉ"],"ⅎ",["Ⅰ","ↈ"],["Ⰰ","Ⱞ"],["ⰰ","ⱞ"],["Ⱡ","ⳤ"],["Ⳬ","ⳮ"],["Ⳳ","ⳳ"],["ⴀ","ⴥ"],"ⴧ","ⴭ",["ⴰ","ⵧ"],"ⵯ",["ⶀ","ⶖ"],["ⶠ","ⶦ"],["ⶨ","ⶮ"],["ⶰ","ⶶ"],["ⶸ","ⶾ"],["ⷀ","ⷆ"],["ⷈ","ⷎ"],["ⷐ","ⷖ"],["ⷘ","ⷞ"],"ⸯ",["々","〇"],["〡","〩"],["〱","〵"],["〸","〼"],["ぁ","ゖ"],["ゝ","ゟ"],["ァ","ヺ"],["ー","ヿ"],["ㄅ","ㄯ"],["ㄱ","ㆎ"],["ㆠ","ㆺ"],["ㇰ","ㇿ"],["㐀","䶵"],["一","鿯"],["ꀀ","ꒌ"],["ꓐ","ꓽ"],["ꔀ","ꘌ"],["ꘐ","ꘟ"],["ꘪ","ꘫ"],["Ꙁ","ꙮ"],["ꙿ","ꚝ"],["ꚠ","ꛯ"],["ꜗ","ꜟ"],["Ꜣ","ꞈ"],["Ꞌ","ꞹ"],["ꟷ","ꠁ"],["ꠃ","ꠅ"],["ꠇ","ꠊ"],["ꠌ","ꠢ"],["ꡀ","ꡳ"],["ꢂ","ꢳ"],["ꣲ","ꣷ"],"ꣻ",["ꣽ","ꣾ"],["ꤊ","ꤥ"],["ꤰ","ꥆ"],["ꥠ","ꥼ"],["ꦄ","ꦲ"],"ꧏ",["ꧠ","ꧤ"],["ꧦ","ꧯ"],["ꧺ","ꧾ"],["ꨀ","ꨨ"],["ꩀ","ꩂ"],["ꩄ","ꩋ"],["ꩠ","ꩶ"],"ꩺ",["ꩾ","ꪯ"],"ꪱ",["ꪵ","ꪶ"],["ꪹ","ꪽ"],"ꫀ","ꫂ",["ꫛ","ꫝ"],["ꫠ","ꫪ"],["ꫲ","ꫴ"],["ꬁ","ꬆ"],["ꬉ","ꬎ"],["ꬑ","ꬖ"],["ꬠ","ꬦ"],["ꬨ","ꬮ"],["ꬰ","ꭚ"],["ꭜ","ꭥ"],["ꭰ","ꯢ"],["가","힣"],["ힰ","ퟆ"],["ퟋ","ퟻ"],["豈","舘"],["並","龎"],["ﬀ","ﬆ"],["ﬓ","ﬗ"],"יִ",["ײַ","ﬨ"],["שׁ","זּ"],["טּ","לּ"],"מּ",["נּ","סּ"],["ףּ","פּ"],["צּ","ﮱ"],["ﯓ","ﴽ"],["ﵐ","ﶏ"],["ﶒ","ﷇ"],["ﷰ","ﷻ"],["ﹰ","ﹴ"],["ﹶ","ﻼ"],["Ａ","Ｚ"],["ａ","ｚ"],["ｦ","ﾾ"],["ￂ","ￇ"],["ￊ","ￏ"],["ￒ","ￗ"],["ￚ","ￜ"]],!1,!1),ft=$t("[",!1),Vt=$t("]",!1),Wt=$t("{",!1),Pt=$t("}",!1),kt=$t("%",!1),an=$t("<",!1),Be=$t(">",!1),Ft=qn(["@","_"],!1,!1),hn=$t("!",!1),ct=$t("(",!1),At=$t(")",!1),Nt=$t("/",!1),zt=$t("*",!1),fn=$t("?",!1),Cn=$t(":",!1),dn=$t("..",!1),I=$t("^",!1),re=$t("struct",!1),te=$t("target",!1),se=$t("euclid",!1),pe=$t("slow",!1),Pe=$t("rotL",!1),$e=$t("rotR",!1),Le=$t("fast",!1),it=$t("scale",!1),Dt=$t("//",!1),en=qn([`
`],!0,!1),vt=$t("cat",!1),mi=$t("$",!1),Xn=$t("setcps",!1),Ki=$t("setbpm",!1),Dn=$t("hush",!1),Ji=function(){return parseFloat(lr())},es=function(z){const he=z.join("");return he==="."||he==="_"},er=function(z){return new Fo(z.join(""))},ro=function(z){return z},ts=function(z,he){return z.arguments_.stepsPerCycle=he,z},xr=function(z){return z},Cr=function(z){return z.arguments_.alignment="polymeter_slowcat",z},so=function(z){return he=>he.options_.weight=(he.options_.weight??1)+(z??2)-1},nr=function(z){return he=>{const ge=(he.options_.reps??1)+(z??2)-1;he.options_.reps=ge,he.options_.ops=he.options_.ops.filter(De=>De.type_!=="replicate"),he.options_.ops.push({type_:"replicate",arguments_:{amount:ge}}),he.options_.weight=ge}},ns=function(z,he,ge){return De=>De.options_.ops.push({type_:"bjorklund",arguments_:{pulse:z,step:he,rotation:ge}})},is=function(z){return he=>he.options_.ops.push({type_:"stretch",arguments_:{amount:z,type:"slow"}})},oo=function(z){return he=>he.options_.ops.push({type_:"stretch",arguments_:{amount:z,type:"fast"}})},rs=function(z){return he=>he.options_.ops.push({type_:"degradeBy",arguments_:{amount:z,seed:ln++}})},ao=function(z){return he=>he.options_.ops.push({type_:"tail",arguments_:{element:z}})},gi=function(z){return he=>he.options_.ops.push({type_:"range",arguments_:{element:z}})},lo=function(z,he){const ge=new vl(z,{ops:[],weight:1,reps:1});for(const De of he)De(ge);return ge},ll=function(z,he){return new gn(he,"fastcat",void 0,!!z)},_i=function(z){return{alignment:"stack",list:z}},rr=function(z){return{alignment:"rand",list:z,seed:ln++}},ul=function(z){return{alignment:"feet",list:z,seed:ln++}},cl=function(z,he){return he&&he.list.length>0?new gn([z,...he.list],he.alignment,he.seed):z},mn=function(z,he){return new gn(he?[z,...he.list]:[z],"polymeter")},ss=function(z){return z},hl=function(z){return{name:"struct",args:{mini:z}}},Ut=function(z){return{name:"target",args:{name:z}}},uo=function(z,he,ge){return{name:"bjorklund",args:{pulse:z,step:parseInt(he)}}},Sn=function(z){return{name:"stretch",args:{amount:z}}},os=function(z){return{name:"shift",args:{amount:"-"+z}}},ls=function(z){return{name:"shift",args:{amount:z}}},co=function(z){return{name:"stretch",args:{amount:"1/"+z}}},us=function(z){return{name:"scale",args:{scale:z.join("")}}},sr=function(z,he){return he},ho=function(z,he){return he.unshift(z),new gn(he,"slowcat")},cs=function(z){return z},fl=function(z,he){return new ui(z.name,z.args,he)},hs=function(z){return z},fo=function(z){return z},rt=function(z){return new bi("setcps",{value:z})},fs=function(z){return new bi("setcps",{value:z/120/2})},Sr=function(){return new bi("hush")},me=o.peg$currPos|0,Mt=me,Di=[{line:1,column:1}],In=me,Vn=o.peg$maxFailExpected||[],tt=o.peg$silentFails|0,_t;if(o.startRule){if(!(o.startRule in O))throw new Error(`Can't start parsing from rule "`+o.startRule+'".');A=O[o.startRule]}function lr(){return e.substring(Mt,me)}function Ni(){return Ei(Mt,me)}function $t(z,he){return{type:"literal",text:z,ignoreCase:he}}function qn(z,he,ge){return{type:"class",parts:z,inverted:he,ignoreCase:ge}}function pl(){return{type:"end"}}function yi(z){return{type:"other",description:z}}function Bi(z){var he=Di[z],ge;if(he)return he;if(z>=Di.length)ge=Di.length-1;else for(ge=z;!Di[--ge];);for(he=Di[ge],he={line:he.line,column:he.column};ge<z;)e.charCodeAt(ge)===10?(he.line++,he.column=1):he.column++,ge++;return Di[z]=he,he}function Ei(z,he,ge){var De=Bi(z),ht=Bi(he),Kt={source:d,start:{offset:z,line:De.line,column:De.column},end:{offset:he,line:ht.line,column:ht.column}};return Kt}function mt(z){me<In||(me>In&&(In=me,Vn=[]),Vn.push(z))}function Pr(z,he,ge){return new peg$SyntaxError(peg$SyntaxError.buildMessage(z,he),z,he,ge)}function ur(){var z;return z=Dr(),z}function En(){var z,he;return tt++,z=me,mo(),he=kr(),he!==l?(wr(),ai(),Mt=z,z=Ji()):(me=z,z=l),tt--,z===l&&tt===0&&mt(bt),z}function Oi(){var z;return e.charCodeAt(me)===46?(z=S,me++):(z=l,tt===0&&mt(un)),z}function Mr(){var z;return z=e.charAt(me),xt.test(z)?me++:(z=l,tt===0&&mt(jt)),z}function po(){var z;return z=e.charAt(me),Ct.test(z)?me++:(z=l,tt===0&&mt(rn)),z}function ai(){var z,he,ge,De,ht;if(z=me,he=po(),he!==l){if(ge=e.charAt(me),Ze.test(ge)?me++:(ge=l,tt===0&&mt($n)),ge===l&&(ge=null),De=[],ht=Qi(),ht!==l)for(;ht!==l;)De.push(ht),ht=Qi();else De=l;De!==l?(he=[he,ge,De],z=he):(me=z,z=l)}else me=z,z=l;return z}function wr(){var z,he,ge,De;if(z=me,he=Oi(),he!==l){if(ge=[],De=Qi(),De!==l)for(;De!==l;)ge.push(De),De=Qi();else ge=l;ge!==l?(he=[he,ge],z=he):(me=z,z=l)}else me=z,z=l;return z}function kr(){var z,he,ge,De;if(z=dl(),z===l)if(z=me,he=Mr(),he!==l){for(ge=[],De=Qi();De!==l;)ge.push(De),De=Qi();he=[he,ge],z=he}else me=z,z=l;return z}function mo(){var z;return e.charCodeAt(me)===45?(z=$,me++):(z=l,tt===0&&mt(Ae)),z}function dl(){var z;return e.charCodeAt(me)===48?(z=F,me++):(z=l,tt===0&&mt(xe)),z}function Qi(){var z;return z=e.charAt(me),St.test(z)?me++:(z=l,tt===0&&mt(ye)),z}function yt(){var z,he;for(tt++,z=[],he=e.charAt(me),Lt.test(he)?me++:(he=l,tt===0&&mt(Qe));he!==l;)z.push(he),he=e.charAt(me),Lt.test(he)?me++:(he=l,tt===0&&mt(Qe));return tt--,he=l,tt===0&&mt(ke),z}function Rn(){var z,he,ge,De;return z=me,he=yt(),e.charCodeAt(me)===44?(ge=E,me++):(ge=l,tt===0&&mt(Ue)),ge!==l?(De=yt(),he=[he,ge,De],z=he):(me=z,z=l),z}function ps(){var z,he,ge,De;return z=me,he=yt(),e.charCodeAt(me)===124?(ge=L,me++):(ge=l,tt===0&&mt(Xe)),ge!==l?(De=yt(),he=[he,ge,De],z=he):(me=z,z=l),z}function ms(){var z,he,ge,De;return z=me,he=yt(),e.charCodeAt(me)===46?(ge=S,me++):(ge=l,tt===0&&mt(un)),ge!==l?(De=yt(),he=[he,ge,De],z=he):(me=z,z=l),z}function Hn(){var z;return z=e.charAt(me),cn.test(z)?me++:(z=l,tt===0&&mt(ut)),z}function li(){var z;return tt++,z=e.charAt(me),sn.test(z)?me++:(z=l,tt===0&&mt(at)),tt--,z===l&&tt===0&&mt(Ie),z}function go(){var z,he,ge,De;if(z=me,yt(),he=[],ge=li(),ge!==l)for(;ge!==l;)he.push(ge),ge=li();else he=l;return he!==l?(ge=yt(),Mt=me,De=es(he),De?De=l:De=void 0,De!==l?(Mt=z,z=er(he)):(me=z,z=l)):(me=z,z=l),z}function ml(){var z,he,ge,De;return z=me,yt(),e.charCodeAt(me)===91?(he=N,me++):(he=l,tt===0&&mt(ft)),he!==l?(yt(),ge=vo(),ge!==l?(yt(),e.charCodeAt(me)===93?(De=V,me++):(De=l,tt===0&&mt(Vt)),De!==l?(yt(),Mt=z,z=ro(ge)):(me=z,z=l)):(me=z,z=l)):(me=z,z=l),z}function _o(){var z,he,ge,De,ht;return z=me,yt(),e.charCodeAt(me)===123?(he=B,me++):(he=l,tt===0&&mt(Wt)),he!==l?(yt(),ge=xo(),ge!==l?(yt(),e.charCodeAt(me)===125?(De=U,me++):(De=l,tt===0&&mt(Pt)),De!==l?(ht=yo(),ht===l&&(ht=null),yt(),Mt=z,z=ts(ge,ht)):(me=z,z=l)):(me=z,z=l)):(me=z,z=l),z}function yo(){var z,he,ge;return z=me,e.charCodeAt(me)===37?(he=q,me++):(he=l,tt===0&&mt(kt)),he!==l?(ge=bn(),ge!==l?(Mt=z,z=xr(ge)):(me=z,z=l)):(me=z,z=l),z}function Oo(){var z,he,ge,De;return z=me,yt(),e.charCodeAt(me)===60?(he=ee,me++):(he=l,tt===0&&mt(an)),he!==l?(yt(),ge=xo(),ge!==l?(yt(),e.charCodeAt(me)===62?(De=le,me++):(De=l,tt===0&&mt(Be)),De!==l?(yt(),Mt=z,z=Cr(ge)):(me=z,z=l)):(me=z,z=l)):(me=z,z=l),z}function bn(){var z;return z=go(),z===l&&(z=ml(),z===l&&(z=_o(),z===l&&(z=Oo()))),z}function Yt(){var z;return z=Fi(),z===l&&(z=bo(),z===l&&(z=gl(),z===l&&(z=_l(),z===l&&(z=gs(),z===l&&(z=_s(),z===l&&(z=Kn(),z===l&&(z=Ao()))))))),z}function Fi(){var z,he,ge;return z=me,yt(),he=e.charAt(me),Xt.test(he)?me++:(he=l,tt===0&&mt(Ft)),he!==l?(ge=En(),ge===l&&(ge=null),Mt=z,z=so(ge)):(me=z,z=l),z}function gs(){var z,he,ge;return z=me,yt(),e.charCodeAt(me)===33?(he=ue,me++):(he=l,tt===0&&mt(hn)),he!==l?(ge=En(),ge===l&&(ge=null),Mt=z,z=nr(ge)):(me=z,z=l),z}function bo(){var z,he,ge,De,ht,Kt,Pn;return z=me,e.charCodeAt(me)===40?(he=_e,me++):(he=l,tt===0&&mt(ct)),he!==l?(yt(),ge=cr(),ge!==l?(yt(),De=Rn(),De!==l?(yt(),ht=cr(),ht!==l?(yt(),Rn(),yt(),Kt=cr(),Kt===l&&(Kt=null),yt(),e.charCodeAt(me)===41?(Pn=ie,me++):(Pn=l,tt===0&&mt(At)),Pn!==l?(Mt=z,z=ns(ge,ht,Kt)):(me=z,z=l)):(me=z,z=l)):(me=z,z=l)):(me=z,z=l)):(me=z,z=l),z}function gl(){var z,he,ge;return z=me,e.charCodeAt(me)===47?(he=ae,me++):(he=l,tt===0&&mt(Nt)),he!==l?(ge=bn(),ge!==l?(Mt=z,z=is(ge)):(me=z,z=l)):(me=z,z=l),z}function _l(){var z,he,ge;return z=me,e.charCodeAt(me)===42?(he=fe,me++):(he=l,tt===0&&mt(zt)),he!==l?(ge=bn(),ge!==l?(Mt=z,z=oo(ge)):(me=z,z=l)):(me=z,z=l),z}function _s(){var z,he,ge;return z=me,e.charCodeAt(me)===63?(he=Oe,me++):(he=l,tt===0&&mt(fn)),he!==l?(ge=En(),ge===l&&(ge=null),Mt=z,z=rs(ge)):(me=z,z=l),z}function Kn(){var z,he,ge;return z=me,e.charCodeAt(me)===58?(he=ve,me++):(he=l,tt===0&&mt(Cn)),he!==l?(ge=bn(),ge!==l?(Mt=z,z=ao(ge)):(me=z,z=l)):(me=z,z=l),z}function Ao(){var z,he,ge;return z=me,e.substr(me,2)===Re?(he=Re,me+=2):(he=l,tt===0&&mt(dn)),he!==l?(ge=bn(),ge!==l?(Mt=z,z=gi(ge)):(me=z,z=l)):(me=z,z=l),z}function cr(){var z,he,ge,De;if(z=me,he=bn(),he!==l){for(ge=[],De=Yt();De!==l;)ge.push(De),De=Yt();Mt=z,z=lo(he,ge)}else me=z,z=l;return z}function An(){var z,he,ge,De;if(z=me,e.charCodeAt(me)===94?(he=Me,me++):(he=l,tt===0&&mt(I)),he===l&&(he=null),ge=[],De=cr(),De!==l)for(;De!==l;)ge.push(De),De=cr();else ge=l;return ge!==l?(Mt=z,z=ll(he,ge)):(me=z,z=l),z}function ys(){var z,he,ge,De,ht;if(z=me,he=[],ge=me,De=Rn(),De!==l?(ht=An(),ht!==l?ge=ht:(me=ge,ge=l)):(me=ge,ge=l),ge!==l)for(;ge!==l;)he.push(ge),ge=me,De=Rn(),De!==l?(ht=An(),ht!==l?ge=ht:(me=ge,ge=l)):(me=ge,ge=l);else he=l;return he!==l&&(Mt=z,he=_i(he)),z=he,z}function qt(){var z,he,ge,De,ht;if(z=me,he=[],ge=me,De=ps(),De!==l?(ht=An(),ht!==l?ge=ht:(me=ge,ge=l)):(me=ge,ge=l),ge!==l)for(;ge!==l;)he.push(ge),ge=me,De=ps(),De!==l?(ht=An(),ht!==l?ge=ht:(me=ge,ge=l)):(me=ge,ge=l);else he=l;return he!==l&&(Mt=z,he=rr(he)),z=he,z}function yl(){var z,he,ge,De,ht;if(z=me,he=[],ge=me,De=ms(),De!==l?(ht=An(),ht!==l?ge=ht:(me=ge,ge=l)):(me=ge,ge=l),ge!==l)for(;ge!==l;)he.push(ge),ge=me,De=ms(),De!==l?(ht=An(),ht!==l?ge=ht:(me=ge,ge=l)):(me=ge,ge=l);else he=l;return he!==l&&(Mt=z,he=ul(he)),z=he,z}function vo(){var z,he,ge;return z=me,he=An(),he!==l?(ge=ys(),ge===l&&(ge=qt(),ge===l&&(ge=yl())),ge===l&&(ge=null),Mt=z,z=cl(he,ge)):(me=z,z=l),z}function xo(){var z,he,ge;return z=me,he=An(),he!==l?(ge=ys(),ge===l&&(ge=null),Mt=z,z=mn(he,ge)):(me=z,z=l),z}function Os(){var z,he,ge,De;return z=me,yt(),he=Hn(),he!==l?(yt(),ge=vo(),ge!==l?(yt(),De=Hn(),De!==l?(Mt=z,z=ss(ge)):(me=z,z=l)):(me=z,z=l)):(me=z,z=l),z}function bs(){var z;return z=wo(),z===l&&(z=bl(),z===l&&(z=Mo(),z===l&&(z=Co(),z===l&&(z=So(),z===l&&(z=Ol(),z===l&&(z=Po(),z===l&&(z=Al()))))))),z}function Ol(){var z,he,ge;return z=me,e.substr(me,6)===Ye?(he=Ye,me+=6):(he=l,tt===0&&mt(re)),he!==l?(yt(),ge=Ti(),ge!==l?(Mt=z,z=hl(ge)):(me=z,z=l)):(me=z,z=l),z}function Co(){var z,he,ge,De,ht;return z=me,e.substr(me,6)===Te?(he=Te,me+=6):(he=l,tt===0&&mt(te)),he!==l?(yt(),ge=Hn(),ge!==l?(De=go(),De!==l?(ht=Hn(),ht!==l?(Mt=z,z=Ut(De)):(me=z,z=l)):(me=z,z=l)):(me=z,z=l)):(me=z,z=l),z}function So(){var z,he,ge,De;return z=me,e.substr(me,6)===Ge?(he=Ge,me+=6):(he=l,tt===0&&mt(se)),he!==l?(yt(),ge=kr(),ge!==l?(yt(),De=kr(),De!==l?(yt(),kr(),Mt=z,z=uo(ge,De)):(me=z,z=l)):(me=z,z=l)):(me=z,z=l),z}function bl(){var z,he,ge;return z=me,e.substr(me,4)===Ne?(he=Ne,me+=4):(he=l,tt===0&&mt(pe)),he!==l?(yt(),ge=En(),ge!==l?(Mt=z,z=Sn(ge)):(me=z,z=l)):(me=z,z=l),z}function Al(){var z,he,ge;return z=me,e.substr(me,4)===Je?(he=Je,me+=4):(he=l,tt===0&&mt(Pe)),he!==l?(yt(),ge=En(),ge!==l?(Mt=z,z=os(ge)):(me=z,z=l)):(me=z,z=l),z}function Po(){var z,he,ge;return z=me,e.substr(me,4)===je?(he=je,me+=4):(he=l,tt===0&&mt($e)),he!==l?(yt(),ge=En(),ge!==l?(Mt=z,z=ls(ge)):(me=z,z=l)):(me=z,z=l),z}function Mo(){var z,he,ge;return z=me,e.substr(me,4)===qe?(he=qe,me+=4):(he=l,tt===0&&mt(Le)),he!==l?(yt(),ge=En(),ge!==l?(Mt=z,z=co(ge)):(me=z,z=l)):(me=z,z=l),z}function wo(){var z,he,ge,De,ht;if(z=me,e.substr(me,5)===et?(he=et,me+=5):(he=l,tt===0&&mt(it)),he!==l)if(yt(),ge=Hn(),ge!==l){if(De=[],ht=li(),ht!==l)for(;ht!==l;)De.push(ht),ht=li();else De=l;De!==l?(ht=Hn(),ht!==l?(Mt=z,z=us(De)):(me=z,z=l)):(me=z,z=l)}else me=z,z=l;else me=z,z=l;return z}function $r(){var z,he,ge,De;if(z=me,e.substr(me,2)===Tt?(he=Tt,me+=2):(he=l,tt===0&&mt(Dt)),he!==l){for(ge=[],De=e.charAt(me),on.test(De)?me++:(De=l,tt===0&&mt(en));De!==l;)ge.push(De),De=e.charAt(me),on.test(De)?me++:(De=l,tt===0&&mt(en));he=[he,ge],z=he}else me=z,z=l;return z}function As(){var z,he,ge,De,ht,Kt,Pn,Ri;if(z=me,e.substr(me,3)===Rt?(he=Rt,me+=3):(he=l,tt===0&&mt(vt)),he!==l)if(yt(),e.charCodeAt(me)===91?(ge=N,me++):(ge=l,tt===0&&mt(ft)),ge!==l)if(yt(),De=Ti(),De!==l){for(ht=[],Kt=me,Pn=Rn(),Pn!==l?(Ri=Ti(),Ri!==l?(Mt=Kt,Kt=sr(De,Ri)):(me=Kt,Kt=l)):(me=Kt,Kt=l);Kt!==l;)ht.push(Kt),Kt=me,Pn=Rn(),Pn!==l?(Ri=Ti(),Ri!==l?(Mt=Kt,Kt=sr(De,Ri)):(me=Kt,Kt=l)):(me=Kt,Kt=l);Kt=yt(),e.charCodeAt(me)===93?(Pn=V,me++):(Pn=l,tt===0&&mt(Vt)),Pn!==l?(Mt=z,z=ho(De,ht)):(me=z,z=l)}else me=z,z=l;else me=z,z=l;else me=z,z=l;return z}function ko(){var z;return z=As(),z===l&&(z=Os()),z}function Ti(){var z,he,ge,De,ht;if(z=me,he=ko(),he!==l){for(yt(),ge=[],De=$r();De!==l;)ge.push(De),De=$r();Mt=z,z=cs(he)}else me=z,z=l;return z===l&&(z=me,he=bs(),he!==l?(yt(),e.charCodeAt(me)===36?(ge=Qt,me++):(ge=l,tt===0&&mt(mi)),ge!==l?(De=yt(),ht=Ti(),ht!==l?(Mt=z,z=fl(he,ht)):(me=z,z=l)):(me=z,z=l)):(me=z,z=l)),z}function vs(){var z,he;return z=me,he=Ti(),he!==l&&(Mt=z,he=hs(he)),z=he,z===l&&(z=$r()),z}function xs(){var z;return z=vs(),z}function $o(){var z,he;return z=me,yt(),he=Do(),he===l&&(he=Eo(),he===l&&(he=Xi())),he!==l?(yt(),Mt=z,z=fo(he)):(me=z,z=l),z}function Do(){var z,he,ge;return z=me,e.substr(me,6)===Fe?(he=Fe,me+=6):(he=l,tt===0&&mt(Xn)),he!==l?(yt(),ge=En(),ge!==l?(Mt=z,z=rt(ge)):(me=z,z=l)):(me=z,z=l),z}function Eo(){var z,he,ge;return z=me,e.substr(me,6)===pt?(he=pt,me+=6):(he=l,tt===0&&mt(Ki)),he!==l?(yt(),ge=En(),ge!==l?(Mt=z,z=fs(ge)):(me=z,z=l)):(me=z,z=l),z}function Xi(){var z,he;return z=me,e.substr(me,4)===we?(he=we,me+=4):(he=l,tt===0&&mt(Dn)),he!==l&&(Mt=z,he=Sr()),z=he,z}function Dr(){var z;return z=xs(),z===l&&(z=$o()),z}var Fo=function(z){this.type_="atom",this.source_=z,this.location_=Ni()},gn=function(z,he,ge,De){this.type_="pattern",this.arguments_={alignment:he,_steps:De},ge!==void 0&&(this.arguments_.seed=ge),this.source_=z},ui=function(z,he,ge){this.type_=z,this.arguments_=he,this.source_=ge},vl=function(z,he){this.type_="element",this.source_=z,this.options_=he,this.location_=Ni()},bi=function(z,he){this.type_="command",this.name_=z,this.options_=he},ln=0;if(_t=A(),o.peg$library)return{peg$result:_t,peg$currPos:me,peg$FAILED:l,peg$maxFailExpected:Vn,peg$maxFailPos:In};if(_t!==l&&me===e.length)return _t;throw _t!==l&&me<e.length&&mt(pl()),Pr(Vn,In<e.length?e.charAt(In):null,In<e.length?Ei(In,In+1):Ei(In,In))}const peg$allowedStartRules=["start"];typeof BigInt>"u"&&(BigInt=function(e){if(isNaN(e))throw new Error("");return e});const C_ZERO=BigInt(0),C_ONE=BigInt(1),C_TWO=BigInt(2),C_FIVE=BigInt(5),C_TEN=BigInt(10),MAX_CYCLE_LEN=2e3,P={s:C_ONE,n:C_ZERO,d:C_ONE};function assign(e,o){try{e=BigInt(e)}catch{throw InvalidParameter()}return e*o}function trunc(e){return typeof e=="bigint"?e:Math.floor(e)}function newFraction(e,o){if(o===C_ZERO)throw DivisionByZero();const l=Object.create(Fraction$1.prototype);l.s=e<C_ZERO?-C_ONE:C_ONE,e=e<C_ZERO?-e:e;const d=gcd$1(e,o);return l.n=e/d,l.d=o/d,l}function factorize(e){const o={};let l=e,d=C_TWO,O=C_FIVE-C_ONE;for(;O<=l;){for(;l%d===C_ZERO;)l/=d,o[d]=(o[d]||C_ZERO)+C_ONE;O+=C_ONE+C_TWO*d++}return l!==e?l>1&&(o[l]=(o[l]||C_ZERO)+C_ONE):o[e]=(o[e]||C_ZERO)+C_ONE,o}const parse$b=function(e,o){let l=C_ZERO,d=C_ONE,O=C_ONE;if(e!=null)if(o!==void 0){if(typeof e=="bigint")l=e;else{if(isNaN(e))throw InvalidParameter();if(e%1!==0)throw NonIntegerParameter();l=BigInt(e)}if(typeof o=="bigint")d=o;else{if(isNaN(o))throw InvalidParameter();if(o%1!==0)throw NonIntegerParameter();d=BigInt(o)}O=l*d}else if(typeof e=="object"){if("d"in e&&"n"in e)l=BigInt(e.n),d=BigInt(e.d),"s"in e&&(l*=BigInt(e.s));else if(0 in e)l=BigInt(e[0]),1 in e&&(d=BigInt(e[1]));else if(typeof e=="bigint")l=e;else throw InvalidParameter();O=l*d}else if(typeof e=="number"){if(isNaN(e))throw InvalidParameter();if(e<0&&(O=-C_ONE,e=-e),e%1===0)l=BigInt(e);else if(e>0){let A=1,S=0,$=1,F=1,E=1,L=1e7;for(e>=1&&(A=10**Math.floor(1+Math.log10(e)),e/=A);$<=L&&E<=L;){let N=(S+F)/($+E);if(e===N){$+E<=L?(l=S+F,d=$+E):E>$?(l=F,d=E):(l=S,d=$);break}else e>N?(S+=F,$+=E):(F+=S,E+=$),$>L?(l=F,d=E):(l=S,d=$)}l=BigInt(l)*BigInt(A),d=BigInt(d)}}else if(typeof e=="string"){let A=0,S=C_ZERO,$=C_ZERO,F=C_ZERO,E=C_ONE,L=C_ONE,N=e.replace(/_/g,"").match(/\d+|./g);if(N===null)throw InvalidParameter();if(N[A]==="-"?(O=-C_ONE,A++):N[A]==="+"&&A++,N.length===A+1?$=assign(N[A++],O):N[A+1]==="."||N[A]==="."?(N[A]!=="."&&(S=assign(N[A++],O)),A++,(A+1===N.length||N[A+1]==="("&&N[A+3]===")"||N[A+1]==="'"&&N[A+3]==="'")&&($=assign(N[A],O),E=C_TEN**BigInt(N[A].length),A++),(N[A]==="("&&N[A+2]===")"||N[A]==="'"&&N[A+2]==="'")&&(F=assign(N[A+1],O),L=C_TEN**BigInt(N[A+1].length)-C_ONE,A+=3)):N[A+1]==="/"||N[A+1]===":"?($=assign(N[A],O),E=assign(N[A+2],C_ONE),A+=3):N[A+3]==="/"&&N[A+1]===" "&&(S=assign(N[A],O),$=assign(N[A+2],O),E=assign(N[A+4],C_ONE),A+=5),N.length<=A)d=E*L,O=l=F+d*S+L*$;else throw InvalidParameter()}else if(typeof e=="bigint")l=e,O=e,d=C_ONE;else throw InvalidParameter();if(d===C_ZERO)throw DivisionByZero();P.s=O<C_ZERO?-C_ONE:C_ONE,P.n=l<C_ZERO?-l:l,P.d=d<C_ZERO?-d:d};function modpow(e,o,l){let d=C_ONE;for(;o>C_ZERO;e=e*e%l,o>>=C_ONE)o&C_ONE&&(d=d*e%l);return d}function cycleLen(e,o){for(;o%C_TWO===C_ZERO;o/=C_TWO);for(;o%C_FIVE===C_ZERO;o/=C_FIVE);if(o===C_ONE)return C_ZERO;let l=C_TEN%o,d=1;for(;l!==C_ONE;d++)if(l=l*C_TEN%o,d>MAX_CYCLE_LEN)return C_ZERO;return BigInt(d)}function cycleStart(e,o,l){let d=C_ONE,O=modpow(C_TEN,l,o);for(let A=0;A<300;A++){if(d===O)return BigInt(A);d=d*C_TEN%o,O=O*C_TEN%o}return 0}function gcd$1(e,o){if(!e)return o;if(!o)return e;for(;;){if(e%=o,!e)return o;if(o%=e,!o)return e}}function Fraction$1(e,o){if(parse$b(e,o),this instanceof Fraction$1)e=gcd$1(P.d,P.n),this.s=P.s,this.n=P.n/e,this.d=P.d/e;else return newFraction(P.s*P.n,P.d)}var DivisionByZero=function(){return new Error("Division by Zero")},InvalidParameter=function(){return new Error("Invalid argument")},NonIntegerParameter=function(){return new Error("Parameters must be integer")};Fraction$1.prototype={s:C_ONE,n:C_ZERO,d:C_ONE,abs:function(){return newFraction(this.n,this.d)},neg:function(){return newFraction(-this.s*this.n,this.d)},add:function(e,o){return parse$b(e,o),newFraction(this.s*this.n*P.d+P.s*this.d*P.n,this.d*P.d)},sub:function(e,o){return parse$b(e,o),newFraction(this.s*this.n*P.d-P.s*this.d*P.n,this.d*P.d)},mul:function(e,o){return parse$b(e,o),newFraction(this.s*P.s*this.n*P.n,this.d*P.d)},div:function(e,o){return parse$b(e,o),newFraction(this.s*P.s*this.n*P.d,this.d*P.n)},clone:function(){return newFraction(this.s*this.n,this.d)},mod:function(e,o){if(e===void 0)return newFraction(this.s*this.n%this.d,C_ONE);if(parse$b(e,o),C_ZERO===P.n*this.d)throw DivisionByZero();return newFraction(this.s*(P.d*this.n)%(P.n*this.d),P.d*this.d)},gcd:function(e,o){return parse$b(e,o),newFraction(gcd$1(P.n,this.n)*gcd$1(P.d,this.d),P.d*this.d)},lcm:function(e,o){return parse$b(e,o),P.n===C_ZERO&&this.n===C_ZERO?newFraction(C_ZERO,C_ONE):newFraction(P.n*this.n,gcd$1(P.n,this.n)*gcd$1(P.d,this.d))},inverse:function(){return newFraction(this.s*this.d,this.n)},pow:function(e,o){if(parse$b(e,o),P.d===C_ONE)return P.s<C_ZERO?newFraction((this.s*this.d)**P.n,this.n**P.n):newFraction((this.s*this.n)**P.n,this.d**P.n);if(this.s<C_ZERO)return null;let l=factorize(this.n),d=factorize(this.d),O=C_ONE,A=C_ONE;for(let S in l)if(S!=="1"){if(S==="0"){O=C_ZERO;break}if(l[S]*=P.n,l[S]%P.d===C_ZERO)l[S]/=P.d;else return null;O*=BigInt(S)**l[S]}for(let S in d)if(S!=="1"){if(d[S]*=P.n,d[S]%P.d===C_ZERO)d[S]/=P.d;else return null;A*=BigInt(S)**d[S]}return P.s<C_ZERO?newFraction(A,O):newFraction(O,A)},log:function(e,o){if(parse$b(e,o),this.s<=C_ZERO||P.s<=C_ZERO)return null;const l={},d=factorize(P.n),O=factorize(P.d),A=factorize(this.n),S=factorize(this.d);for(const E in O)d[E]=(d[E]||C_ZERO)-O[E];for(const E in S)A[E]=(A[E]||C_ZERO)-S[E];for(const E in d)E!=="1"&&(l[E]=!0);for(const E in A)E!=="1"&&(l[E]=!0);let $=null,F=null;for(const E in l){const L=d[E]||C_ZERO,N=A[E]||C_ZERO;if(L===C_ZERO){if(N!==C_ZERO)return null;continue}let V=N,B=L;const U=gcd$1(V,B);if(V/=U,B/=U,$===null&&F===null)$=V,F=B;else if(V*F!==$*B)return null}return $!==null&&F!==null?newFraction($,F):null},equals:function(e,o){return parse$b(e,o),this.s*this.n*P.d===P.s*P.n*this.d},lt:function(e,o){return parse$b(e,o),this.s*this.n*P.d<P.s*P.n*this.d},lte:function(e,o){return parse$b(e,o),this.s*this.n*P.d<=P.s*P.n*this.d},gt:function(e,o){return parse$b(e,o),this.s*this.n*P.d>P.s*P.n*this.d},gte:function(e,o){return parse$b(e,o),this.s*this.n*P.d>=P.s*P.n*this.d},compare:function(e,o){parse$b(e,o);let l=this.s*this.n*P.d-P.s*P.n*this.d;return(C_ZERO<l)-(l<C_ZERO)},ceil:function(e){return e=C_TEN**BigInt(e||0),newFraction(trunc(this.s*e*this.n/this.d)+(e*this.n%this.d>C_ZERO&&this.s>=C_ZERO?C_ONE:C_ZERO),e)},floor:function(e){return e=C_TEN**BigInt(e||0),newFraction(trunc(this.s*e*this.n/this.d)-(e*this.n%this.d>C_ZERO&&this.s<C_ZERO?C_ONE:C_ZERO),e)},round:function(e){return e=C_TEN**BigInt(e||0),newFraction(trunc(this.s*e*this.n/this.d)+this.s*((this.s>=C_ZERO?C_ONE:C_ZERO)+C_TWO*(e*this.n%this.d)>this.d?C_ONE:C_ZERO),e)},roundTo:function(e,o){parse$b(e,o);const l=this.n*P.d,d=this.d*P.n,O=l%d;let A=trunc(l/d);return O+O>=d&&A++,newFraction(this.s*A*P.n,P.d)},divisible:function(e,o){return parse$b(e,o),!(!(P.n*this.d)||this.n*P.d%(P.n*this.d))},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(e){let o=this.n,l=this.d;e=e||15;let d=cycleLen(o,l),O=cycleStart(o,l,d),A=this.s<C_ZERO?"-":"";if(A+=trunc(o/l),o%=l,o*=C_TEN,o&&(A+="."),d){for(let S=O;S--;)A+=trunc(o/l),o%=l,o*=C_TEN;A+="(";for(let S=d;S--;)A+=trunc(o/l),o%=l,o*=C_TEN;A+=")"}else for(let S=e;o&&S--;)A+=trunc(o/l),o%=l,o*=C_TEN;return A},toFraction:function(e){let o=this.n,l=this.d,d=this.s<C_ZERO?"-":"";if(l===C_ONE)d+=o;else{let O=trunc(o/l);e&&O>C_ZERO&&(d+=O,d+=" ",o%=l),d+=o,d+="/",d+=l}return d},toLatex:function(e){let o=this.n,l=this.d,d=this.s<C_ZERO?"-":"";if(l===C_ONE)d+=o;else{let O=trunc(o/l);e&&O>C_ZERO&&(d+=O,o%=l),d+="\\frac{",d+=o,d+="}{",d+=l,d+="}"}return d},toContinued:function(){let e=this.n,o=this.d,l=[];do{l.push(trunc(e/o));let d=e%o;e=o,o=d}while(e!==C_ONE);return l},simplify:function(e){const o=BigInt(1/(e||.001)|0),l=this.abs(),d=l.toContinued();for(let O=1;O<d.length;O++){let A=newFraction(d[O-1],C_ONE);for(let $=O-2;$>=0;$--)A=A.inverse().add(d[$]);let S=A.sub(l);if(S.n*o<S.d)return A.mul(this.s)}return this}};const logKey="strudel.log";let debounce=1e3,lastMessage,lastTime;function errorLogger$1(e,o="cyclist"){process.env.NODE_ENV==="development"&&console.error(e),logger$2(`[${o}] error: ${e.message}`)}function logger$2(e,o,l={}){let d=performance.now();lastMessage===e&&d-lastTime<debounce||(lastMessage=e,lastTime=d,console.log(`%c${e}`,"background-color: black;color:white;border-radius:15px"),typeof document<"u"&&typeof CustomEvent<"u"&&document.dispatchEvent(new CustomEvent(logKey,{detail:{message:e,type:o,data:l}})))}logger$2.key=logKey;const isNoteWithOctave=e=>/^[a-gA-G][#bsf]*[0-9]*$/.test(e),isNote=e=>/^[a-gA-G][#bsf]*-?[0-9]*$/.test(e),tokenizeNote$3=e=>{if(typeof e!="string")return[];const[o,l="",d]=e.match(/^([a-gA-G])([#bsf]*)(-?[0-9]*)$/)?.slice(1)||[];return o?[o,l,d?Number(d):void 0]:[]},chromas$2={c:0,d:2,e:4,f:5,g:7,a:9,b:11},accs$2={"#":1,b:-1,s:1,f:-1},getAccidentalsOffset$1=e=>e?.split("").reduce((o,l)=>o+accs$2[l],0)||0,noteToMidi$1=(e,o=3)=>{const[l,d,O=o]=tokenizeNote$3(e);if(!l)throw new Error('not a note: "'+e+'"');const A=chromas$2[l.toLowerCase()],S=getAccidentalsOffset$1(d);return(Number(O)+1)*12+A+S},midiToFreq$2=e=>Math.pow(2,(e-69)/12)*440,freqToMidi$2=e=>12*Math.log(e/440)/Math.LN2+69,valueToMidi$1=(e,o)=>{if(typeof e!="object")throw new Error("valueToMidi: expected object value");let{freq:l,note:d}=e;if(typeof l=="number")return freqToMidi$2(l);if(typeof d=="string")return noteToMidi$1(d);if(typeof d=="number")return d;if(!o)throw new Error("valueToMidi: expected freq or note to be set");return o},getEventOffsetMs=(e,o)=>(e-o)*1e3,getFreq=e=>midiToFreq$2(typeof e=="number"?e:noteToMidi$1(e)),pcs$1=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],midi2note$1=e=>{const o=Math.floor(e/12)-1;return pcs$1[e%12]+o},_mod$2=(e,o)=>(e%o+o)%o,averageArray=e=>e.reduce((o,l)=>o+l)/e.length;function nanFallback$1(e,o=0){return isNaN(Number(e))?(logger$2(`"${e}" is not a number, falling back to ${o}`,"warning"),o):e}const getSoundIndex$1=(e,o)=>_mod$2(Math.round(nanFallback$1(e??0,0)),o),getPlayableNoteValue=e=>{let{value:o,context:l}=e,d=o;if(typeof d=="object"&&!Array.isArray(d)&&(d=d.note||d.n||d.value,d===void 0))throw new Error(`cannot find a playable note for ${JSON.stringify(o)}`);if(typeof d=="number"&&l.type!=="frequency")d=midiToFreq$2(e.value);else if(typeof d=="number"&&l.type==="frequency")d=e.value;else if(typeof d!="string"||!isNote(d))throw new Error("not a note: "+JSON.stringify(d));return d},getFrequency=e=>{let{value:o,context:l}=e;if(typeof o=="object")return o.freq?o.freq:getFreq(o.note||o.n||o.value);if(typeof o=="number"&&l.type!=="frequency")o=midiToFreq$2(e.value);else if(typeof o=="string"&&isNote(o))o=midiToFreq$2(noteToMidi$1(e.value));else if(typeof o!="number")throw new Error("not a note or frequency: "+o);return o},rotate$2=(e,o)=>e.slice(o).concat(e.slice(0,o)),pipe=(...e)=>e.reduce((o,l)=>(...d)=>o(l(...d)),o=>o),compose=(...e)=>pipe(...e.reverse()),removeUndefineds=e=>e.filter(o=>o!=null),flatten=e=>[].concat(...e),id=e=>e,constant=(e,o)=>e,listRange=(e,o)=>Array.from({length:o-e+1},(l,d)=>d+e);function curry(e,o,l=e.length){const d=function O(...A){if(A.length>=l)return e.apply(this,A);{const S=function(...$){return O.apply(this,A.concat($))};return o&&o(S,A),S}};return o&&o(d,[]),d}function parseNumeral(e){const o=Number(e);if(!isNaN(o))return o;if(isNote(e))return noteToMidi$1(e);throw new Error(`cannot parse as numeral: "${e}"`)}function mapArgs(e,o){return(...l)=>e(...l.map(o))}function numeralArgs(e){return mapArgs(e,parseNumeral)}function parseFractional(e){const o=Number(e);if(!isNaN(o))return o;const l={pi:Math.PI,w:1,h:.5,q:.25,e:.125,s:.0625,t:1/3,f:.2,x:1/6}[e];if(typeof l<"u")return l;throw new Error(`cannot parse as fractional: "${e}"`)}const fractionalArgs=e=>mapArgs(e,parseFractional),splitAt=function(e,o){return[o.slice(0,e),o.slice(e)]},zipWith=(e,o,l)=>o.map((d,O)=>e(d,l[O])),pairs=function(e){const o=[];for(let l=0;l<e.length-1;++l)o.push([e[l],e[l+1]]);return o},clamp$1=(e,o,l)=>Math.min(Math.max(e,o),l),solfeggio=["Do","Reb","Re","Mib","Mi","Fa","Solb","Sol","Lab","La","Sib","Si"],indian=["Sa","Re","Ga","Ma","Pa","Dha","Ni"],german=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Hb","H"],byzantine=["Ni","Pab","Pa","Voub","Vou","Ga","Dib","Di","Keb","Ke","Zob","Zo"],japanese=["I","Ro","Ha","Ni","Ho","He","To"],english=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],sol2note=(e,o="letters")=>{const d=(o==="solfeggio"?solfeggio:o==="indian"?indian:o==="german"?german:o==="byzantine"?byzantine:o==="japanese"?japanese:english)[e%12],O=Math.floor(e/12)-1;return d+O};function uniq(e){var o={};return e.filter(function(l){return o.hasOwn(l)?!1:o[l]=!0})}function uniqsort(e){return e.sort().filter(function(o,l,d){return!l||o!=d[l-1]})}function uniqsortr(e){return e.sort((o,l)=>o.compare(l)).filter(function(o,l,d){return!l||o.ne(d[l-1])})}function unicodeToBase64(e){const o=new TextEncoder().encode(e);return btoa(String.fromCharCode(...o))}function base64ToUnicode(e){const o=new Uint8Array(atob(e).split("").map(d=>d.charCodeAt(0)));return new TextDecoder().decode(o)}function code2hash(e){return encodeURIComponent(unicodeToBase64(e))}function hash2code(e){return base64ToUnicode(decodeURIComponent(e))}function objectMap(e,o){return Array.isArray(e)?e.map(o):Object.fromEntries(Object.entries(e).map(([l,d],O)=>[l,o(d,l,O)]))}function cycleToSeconds$1(e,o){return e/o}class ClockCollator{constructor({getTargetClockTime:o=getUnixTimeSeconds,weight:l=16,offsetDelta:d=.005,checkAfterTime:O=2,resetAfterTime:A=8}){this.offsetTime,this.timeAtPrevOffsetSample,this.prevOffsetTimes=[],this.getTargetClockTime=o,this.weight=l,this.offsetDelta=d,this.checkAfterTime=O,this.resetAfterTime=A,this.reset=()=>{this.prevOffsetTimes=[],this.offsetTime=null,this.timeAtPrevOffsetSample=null}}calculateOffset(o){const l=this.getTargetClockTime(),d=l-this.timeAtPrevOffsetSample,O=l-o;if(d>this.resetAfterTime&&this.reset(),this.offsetTime==null&&(this.offsetTime=O),this.prevOffsetTimes.push(O),this.prevOffsetTimes.length>this.weight&&this.prevOffsetTimes.shift(),this.timeAtPrevOffsetSample==null||d>this.checkAfterTime){this.timeAtPrevOffsetSample=l;const A=averageArray(this.prevOffsetTimes);Math.abs(A-this.offsetTime)>this.offsetDelta&&(this.offsetTime=A)}return this.offsetTime}calculateTimestamp(o,l){return this.calculateOffset(o)+l}}function getPerformanceTimeSeconds(){return performance.now()*.001}function getUnixTimeSeconds(){return Date.now()*.001}const keyAlias=new Map([["control","Control"],["ctrl","Control"],["alt","Alt"],["shift","Shift"],["down","ArrowDown"],["up","ArrowUp"],["left","ArrowLeft"],["right","ArrowRight"]]);let keyState;function getCurrentKeyboardState(){if(keyState==null){if(typeof window>"u")return;keyState={},window.addEventListener("keydown",e=>{keyState[e.key]=!0}),window.addEventListener("keyup",e=>{keyState[e.key]=!1})}return{...keyState}}function stringifyValues(e,o=!1){return typeof e=="object"?o?JSON.stringify(e).slice(1,-1).replaceAll('"',"").replaceAll(","," "):JSON.stringify(e):e}Fraction$1.prototype.sam=function(){return this.floor()},Fraction$1.prototype.nextSam=function(){return this.sam().add(1)},Fraction$1.prototype.wholeCycle=function(){return new TimeSpan(this.sam(),this.nextSam())},Fraction$1.prototype.cyclePos=function(){return this.sub(this.sam())},Fraction$1.prototype.lt=function(e){return this.compare(e)<0},Fraction$1.prototype.gt=function(e){return this.compare(e)>0},Fraction$1.prototype.lte=function(e){return this.compare(e)<=0},Fraction$1.prototype.gte=function(e){return this.compare(e)>=0},Fraction$1.prototype.eq=function(e){return this.compare(e)==0},Fraction$1.prototype.ne=function(e){return this.compare(e)!=0},Fraction$1.prototype.max=function(e){return this.gt(e)?this:e},Fraction$1.prototype.maximum=function(...e){return e=e.map(o=>new Fraction$1(o)),e.reduce((o,l)=>l.max(o),this)},Fraction$1.prototype.min=function(e){return this.lt(e)?this:e},Fraction$1.prototype.mulmaybe=function(e){return e!==void 0?this.mul(e):void 0},Fraction$1.prototype.divmaybe=function(e){return e!==void 0?this.div(e):void 0},Fraction$1.prototype.addmaybe=function(e){return e!==void 0?this.add(e):void 0},Fraction$1.prototype.submaybe=function(e){return e!==void 0?this.sub(e):void 0},Fraction$1.prototype.show=function(){return this.s*this.n+"/"+this.d},Fraction$1.prototype.or=function(e){return this.eq(0)?e:this};const fraction$1=e=>Fraction$1(e),gcd=(...e)=>{if(e=removeUndefineds(e),e.length!==0)return e.reduce((o,l)=>o.gcd(l),fraction$1(1))},lcm=(...e)=>{if(e=removeUndefineds(e),e.length===0)return;const o=e.pop();return e.reduce((l,d)=>l===void 0||d===void 0?void 0:l.lcm(d),o)},isFraction=e=>e instanceof Fraction$1;fraction$1._original=Fraction$1;const Fraction=fraction$1;class TimeSpan{constructor(o,l){this.begin=Fraction(o),this.end=Fraction(l)}get spanCycles(){const o=[];var l=this.begin;const d=this.end,O=d.sam();if(l.equals(d))return[new TimeSpan(l,d)];for(;d.gt(l);){if(l.sam().equals(O)){o.push(new TimeSpan(l,this.end));break}const A=l.nextSam();o.push(new TimeSpan(l,A)),l=A}return o}get duration(){return this.end.sub(this.begin)}cycleArc(){const o=this.begin.cyclePos(),l=o.add(this.duration);return new TimeSpan(o,l)}withTime(o){return new TimeSpan(o(this.begin),o(this.end))}withEnd(o){return new TimeSpan(this.begin,o(this.end))}withCycle(o){const l=this.begin.sam(),d=l.add(o(this.begin.sub(l))),O=l.add(o(this.end.sub(l)));return new TimeSpan(d,O)}intersection(o){const l=this.begin.max(o.begin),d=this.end.min(o.end);if(!l.gt(d)&&!(l.equals(d)&&(l.equals(this.end)&&this.begin.lt(this.end)||l.equals(o.end)&&o.begin.lt(o.end))))return new TimeSpan(l,d)}intersection_e(o){const l=this.intersection(o);if(l==null)throw"TimeSpans do not intersect";return l}midpoint(){return this.begin.add(this.duration.div(Fraction(2)))}equals(o){return this.begin.equals(o.begin)&&this.end.equals(o.end)}show(){return this.begin.show()+" → "+this.end.show()}}class Hap{constructor(o,l,d,O={},A=!1){this.whole=o,this.part=l,this.value=d,this.context=O,this.stateful=A,A&&console.assert(typeof this.value=="function","Stateful values must be functions")}get duration(){let o;return typeof this.value?.duration=="number"?o=Fraction(this.value.duration):o=this.whole.end.sub(this.whole.begin),typeof this.value?.clip=="number"?o.mul(this.value.clip):o}get endClipped(){return this.whole.begin.add(this.duration)}isActive(o){return this.whole.begin<=o&&this.endClipped>=o}isInPast(o){return o>this.endClipped}isInNearPast(o,l){return l-o<=this.endClipped}isInFuture(o){return o<this.whole.begin}isInNearFuture(o,l){return l<this.whole.begin&&l>this.whole.begin-o}isWithinTime(o,l){return this.whole.begin<=l&&this.endClipped>=o}wholeOrPart(){return this.whole?this.whole:this.part}withSpan(o){const l=this.whole?o(this.whole):void 0;return new Hap(l,o(this.part),this.value,this.context)}withValue(o){return new Hap(this.whole,this.part,o(this.value),this.context)}hasOnset(){return this.whole!=null&&this.whole.begin.equals(this.part.begin)}hasTag(o){return this.context.tags?.includes(o)}resolveState(o){if(this.stateful&&this.hasOnset()){console.log("stateful");const l=this.value,[d,O]=l(o);return[d,new Hap(this.whole,this.part,O,this.context,!1)]}return[o,this]}spanEquals(o){return this.whole==null&&o.whole==null||this.whole.equals(o.whole)}equals(o){return this.spanEquals(o)&&this.part.equals(o.part)&&this.value===o.value}show(o=!1){const l=typeof this.value=="object"?o?JSON.stringify(this.value).slice(1,-1).replaceAll('"',"").replaceAll(","," "):JSON.stringify(this.value):this.value;var d="";if(this.whole==null)d="~"+this.part.show;else{var O=this.whole.begin.equals(this.part.begin)&&this.whole.end.equals(this.part.end);this.whole.begin.equals(this.part.begin)||(d=this.whole.begin.show()+" ⇜ "),O||(d+="("),d+=this.part.show(),O||(d+=")"),this.whole.end.equals(this.part.end)||(d+=" ⇝ "+this.whole.end.show())}return"[ "+d+" | "+l+" ]"}showWhole(o=!1){return`${this.whole==null?"~":this.whole.show()}: ${stringifyValues(this.value,o)}`}combineContext(o){const l=this;return{...l.context,...o.context,locations:(l.context.locations||[]).concat(o.context.locations||[])}}setContext(o){return new Hap(this.whole,this.part,this.value,o)}ensureObjectValue(){if(typeof this.value!="object")throw new Error(`expected hap.value to be an object, but got "${this.value}". Hint: append .note() or .s() to the end`,"error")}}class State{constructor(o,l={}){this.span=o,this.controls=l}setSpan(o){return new State(o,this.controls)}withSpan(o){return this.setSpan(o(this.span))}setControls(o){return new State(this.span,{...this.controls,...o})}}function unionWithObj(e,o,l){if(o?.value!==void 0&&Object.keys(o).length===1)return logger$2("[warn]: Can't do arithmetic on control pattern."),e;const d=Object.keys(e).filter(O=>Object.keys(o).includes(O));return Object.assign({},e,o,Object.fromEntries(d.map(O=>[O,l(e[O],o[O])])))}curry((e,o)=>e*o),curry((e,o)=>o.map(e));function drawLine(e,o=60){let l=0,d=Fraction(0),O=[""],A="";for(;O[0].length<o;){const S=e.queryArc(l,l+1),$=S.filter(L=>L.hasOnset()).map(L=>L.duration),F=gcd(...$),E=F.inverse();O=O.map(L=>L+"|"),A+="|";for(let L=0;L<E;L++){const[N,V]=[d,d.add(F)],B=S.filter(q=>q.whole.begin.lte(N)&&q.whole.end.gte(V)),U=B.length-O.length;U>0&&(O=O.concat(Array(U).fill(A))),O=O.map((q,ee)=>{const le=B[ee];if(le){const _e=le.whole.begin.eq(N)?""+le.value:"-";return q+_e}return q+"."}),A+=".",d=d.add(F)}l++}return O.join(`
`)}let stringParser,__steps=!0;const calculateSteps=function(e){__steps=!!e},setStringParser=e=>stringParser=e;let Pattern$1=class xn{constructor(o,l=void 0){this.query=o,this._Pattern=!0,this._steps=l}get _steps(){return this.__steps}set _steps(o){this.__steps=o===void 0?void 0:Fraction(o)}setSteps(o){return this._steps=o,this}withSteps(o){return __steps?new xn(this.query,this._steps===void 0?void 0:o(this._steps)):this}get hasSteps(){return this._steps!==void 0}withValue(o){const l=new xn(d=>this.query(d).map(O=>O.withValue(o)));return l._steps=this._steps,l}withState(o){return new xn(l=>this.query(o(l)))}fmap(o){return this.withValue(o)}appWhole(o,l){const d=this,O=function(A){const S=d.query(A),$=l.query(A),F=function(E,L){const N=E.part.intersection(L.part);if(N!=null)return new Hap(o(E.whole,L.whole),N,E.value(L.value),L.combineContext(E))};return flatten(S.map(E=>removeUndefineds($.map(L=>F(E,L)))))};return new xn(O)}appBoth(o){const l=this,d=function(A,S){if(!(A==null||S==null))return A.intersection_e(S)},O=l.appWhole(d,o);return __steps&&(O._steps=lcm(o._steps,l._steps)),O}appLeft(o){const l=this,d=function(A){const S=[];for(const $ of l.query(A)){const F=o.query(A.setSpan($.wholeOrPart()));for(const E of F){const L=$.whole,N=$.part.intersection(E.part);if(N){const V=$.value(E.value),B=E.combineContext($),U=new Hap(L,N,V,B);S.push(U)}}}return S},O=new xn(d);return O._steps=this._steps,O}appRight(o){const l=this,d=function(A){const S=[];for(const $ of o.query(A)){const F=l.query(A.setSpan($.wholeOrPart()));for(const E of F){const L=$.whole,N=E.part.intersection($.part);if(N){const V=E.value($.value),B=$.combineContext(E),U=new Hap(L,N,V,B);S.push(U)}}}return S},O=new xn(d);return O._steps=o._steps,O}bindWhole(o,l){const d=this,O=function(A){const S=function(F,E){return new Hap(o(F.whole,E.whole),E.part,E.value,Object.assign({},F.context,E.context,{locations:(F.context.locations||[]).concat(E.context.locations||[])}))},$=function(F){return l(F.value).query(A.setSpan(F.part)).map(E=>S(F,E))};return flatten(d.query(A).map(F=>$(F)))};return new xn(O)}bind(o){const l=function(d,O){if(!(d==null||O==null))return d.intersection_e(O)};return this.bindWhole(l,o)}join(){return this.bind(id)}outerBind(o){return this.bindWhole(l=>l,o).setSteps(this._steps)}outerJoin(){return this.outerBind(id)}innerBind(o){return this.bindWhole((l,d)=>d,o)}innerJoin(){return this.innerBind(id)}resetJoin(o=!1){const l=this;return new xn(d=>l.discreteOnly().query(d).map(O=>O.value.late(o?O.whole.begin:O.whole.begin.cyclePos()).query(d).map(A=>new Hap(A.whole?A.whole.intersection(O.whole):void 0,A.part.intersection(O.part),A.value).setContext(O.combineContext(A))).filter(A=>A.part)).flat())}restartJoin(){return this.resetJoin(!0)}squeezeJoin(){const o=this;function l(d){const O=o.discreteOnly().query(d);function A($){const E=$.value._focusSpan($.wholeOrPart()).query(d.setSpan($.part));function L(N,V){let B;if(V.whole&&N.whole&&(B=V.whole.intersection(N.whole),!B))return;const U=V.part.intersection(N.part);if(!U)return;const q=V.combineContext(N);return new Hap(B,U,V.value,q)}return E.map(N=>L($,N))}return flatten(O.map(A)).filter($=>$)}return new xn(l)}squeezeBind(o){return this.fmap(o).squeezeJoin()}polyJoin=function(){const o=this;return o.fmap(l=>l.extend(o._steps.div(l._steps))).outerJoin()};polyBind(o){return this.fmap(o).polyJoin()}queryArc(o,l,d={}){try{return this.query(new State(new TimeSpan(o,l),d))}catch(O){return errorLogger$1(O,"query"),[]}}splitQueries(){const o=this,l=d=>flatten(d.span.spanCycles.map(O=>o.query(d.setSpan(O))));return new xn(l)}withQuerySpan(o){return new xn(l=>this.query(l.withSpan(o)))}withQuerySpanMaybe(o){const l=this;return new xn(d=>{const O=d.withSpan(o);return O.span?l.query(O):[]})}withQueryTime(o){return new xn(l=>this.query(l.withSpan(d=>d.withTime(o))))}withHapSpan(o){return new xn(l=>this.query(l).map(d=>d.withSpan(o)))}withHapTime(o){return this.withHapSpan(l=>l.withTime(o))}withHaps(o){const l=new xn(d=>o(this.query(d),d));return l._steps=this._steps,l}withHap(o){return this.withHaps(l=>l.map(o))}setContext(o){return this.withHap(l=>l.setContext(o))}withContext(o){const l=this.withHap(d=>d.setContext(o(d.context)));return this.__pure!==void 0&&(l.__pure=this.__pure,l.__pure_loc=this.__pure_loc),l}stripContext(){return this.withHap(o=>o.setContext({}))}withLoc(o,l){const d={start:o,end:l},O=this.withContext(A=>{const S=(A.locations||[]).concat([d]);return{...A,locations:S}});return this.__pure&&(O.__pure=this.__pure,O.__pure_loc=d),O}filterHaps(o){return new xn(l=>this.query(l).filter(o))}filterValues(o){return new xn(l=>this.query(l).filter(d=>o(d.value))).setSteps(this._steps)}removeUndefineds(){return this.filterValues(o=>o!=null)}onsetsOnly(){return this.filterHaps(o=>o.hasOnset())}discreteOnly(){return this.filterHaps(o=>o.whole)}defragmentHaps(){return this.discreteOnly().withHaps(l=>{const d=[];for(var O=0;O<l.length;++O){for(var A=!0,S=l[O];A;){const E=JSON.stringify(l[O].value);for(var $=!1,F=O+1;F<l.length;F++){const L=l[F];if(S.whole.equals(L.whole)){if(S.part.begin.eq(L.part.end)){if(E===JSON.stringify(L.value)){S=new Hap(S.whole,new TimeSpan(L.part.begin,S.part.end),S.value),l.splice(F,1),$=!0;break}}else if(L.part.begin.eq(S.part.end)&&E==JSON.stringify(L.value)){S=new Hap(S.whole,new TimeSpan(S.part.begin,L.part.end),S.value),l.splice(F,1),$=!0;break}}}A=$}d.push(S)}return d})}firstCycle(o=!1){var l=this;return o||(l=l.stripContext()),l.query(new State(new TimeSpan(Fraction(0),Fraction(1))))}get firstCycleValues(){return this.firstCycle().map(o=>o.value)}get showFirstCycle(){return this.firstCycle().map(o=>`${o.value}: ${o.whole.begin.toFraction()} - ${o.whole.end.toFraction()}`)}sortHapsByPart(){return this.withHaps(o=>o.sort((l,d)=>l.part.begin.sub(d.part.begin).or(l.part.end.sub(d.part.end)).or(l.whole.begin.sub(d.whole.begin).or(l.whole.end.sub(d.whole.end)))))}asNumber(){return this.fmap(parseNumeral)}_opIn(o,l){return this.fmap(l).appLeft(reify(o))}_opOut(o,l){return this.fmap(l).appRight(reify(o))}_opMix(o,l){return this.fmap(l).appBoth(reify(o))}_opSqueeze(o,l){const d=reify(o);return this.fmap(O=>d.fmap(A=>l(O)(A))).squeezeJoin()}_opSqueezeOut(o,l){const d=this;return reify(o).fmap(A=>d.fmap(S=>l(S)(A))).squeezeJoin()}_opReset(o,l){return reify(o).fmap(O=>this.fmap(A=>l(A)(O))).resetJoin()}_opRestart(o,l){return reify(o).fmap(O=>this.fmap(A=>l(A)(O))).restartJoin()}_opPoly(o,l){const d=reify(o);return this.fmap(O=>d.fmap(A=>l(A)(O))).polyJoin()}layer(...o){return stack(...o.map(l=>l(this)))}superimpose(...o){return this.stack(...o.map(l=>l(this)))}stack(...o){return stack(this,...o)}sequence(...o){return sequence(this,...o)}seq(...o){return sequence(this,...o)}cat(...o){return cat(this,...o)}fastcat(...o){return fastcat(this,...o)}slowcat(...o){return slowcat(this,...o)}onTrigger(o,l=!0){return this.withHap(d=>d.setContext({...d.context,onTrigger:(...O)=>{d.context.onTrigger?.(...O),o(...O)},dominantTrigger:d.context.dominantTrigger||l}))}log(o=d=>`[hap] ${d.showWhole(!0)}`,l=d=>({hap:d})){return this.onTrigger((...d)=>{logger$2(o(...d),void 0,l(...d))},!1)}logValues(o=l=>`[hap] ${stringifyValues(l,!0)}`){return this.log(l=>o(l.value))}drawLine(){return console.log(drawLine(this)),this}unjoin(o,l=id){return o.withHap(d=>d.withValue(O=>O?l(this.ribbon(d.whole.begin,d.whole.duration)):this))}into(o,l){return this.unjoin(o,l).innerJoin()}};function groupHapsBy(e,o){let l=[];return o.forEach(d=>{const O=l.findIndex(([A])=>e(d,A));O===-1?l.push([d]):l[O].push(d)}),l}const congruent=(e,o)=>e.spanEquals(o);Pattern$1.prototype.collect=function(){return this.withHaps(e=>groupHapsBy(congruent,e).map(o=>new Hap(o[0].whole,o[0].part,o,{})))};const arpWith=register("arpWith",(e,o)=>o.collect().fmap(l=>reify(e(l))).innerJoin().withHap(l=>new Hap(l.whole,l.part,l.value.value,l.combineContext(l.value)))),arp=register("arp",(e,o)=>o.arpWith(l=>reify(e).fmap(d=>l[d%l.length])),!1);function _nonArrayObject(e){return!Array.isArray(e)&&typeof e=="object"&&!isFraction(e)}function _composeOp(e,o,l){return _nonArrayObject(e)||_nonArrayObject(o)?(_nonArrayObject(e)||(e={value:e}),_nonArrayObject(o)||(o={value:o}),unionWithObj(e,o,l)):l(e,o)}(function(){const e={set:[(l,d)=>d],keep:[l=>l],keepif:[(l,d)=>d?l:void 0],add:[numeralArgs((l,d)=>l+d)],sub:[numeralArgs((l,d)=>l-d)],mul:[numeralArgs((l,d)=>l*d)],div:[numeralArgs((l,d)=>l/d)],mod:[numeralArgs(_mod$2)],pow:[numeralArgs(Math.pow)],log2:[numeralArgs(Math.log2)],band:[numeralArgs((l,d)=>l&d)],bor:[numeralArgs((l,d)=>l|d)],bxor:[numeralArgs((l,d)=>l^d)],blshift:[numeralArgs((l,d)=>l<<d)],brshift:[numeralArgs((l,d)=>l>>d)],lt:[(l,d)=>l<d],gt:[(l,d)=>l>d],lte:[(l,d)=>l<=d],gte:[(l,d)=>l>=d],eq:[(l,d)=>l==d],eqt:[(l,d)=>l===d],ne:[(l,d)=>l!=d],net:[(l,d)=>l!==d],and:[(l,d)=>l&&d],or:[(l,d)=>l||d],func:[(l,d)=>d(l)]},o=["In","Out","Mix","Squeeze","SqueezeOut","Reset","Restart","Poly"];for(const[l,[d,O]]of Object.entries(e)){Pattern$1.prototype["_"+l]=function(A){return this.fmap(S=>d(S,A))},Object.defineProperty(Pattern$1.prototype,l,{get:function(){const A=this,S=(...$)=>A[l].in(...$);for(const $ of o)S[$.toLowerCase()]=function(...F){var E=A;F=sequence(F),O&&(E=O(E),F=O(F));var L;return l==="keepif"?(L=E["_op"+$](F,N=>V=>d(N,V)),L=L.removeUndefineds()):L=E["_op"+$](F,N=>V=>_composeOp(N,V,d)),L};return S.squeezein=S.squeeze,S}});for(const A of o)Pattern$1.prototype[A.toLowerCase()]=function(...S){return this.set[A.toLowerCase()](S)}}Pattern$1.prototype.struct=function(...l){return this.keepif.out(...l)},Pattern$1.prototype.structAll=function(...l){return this.keep.out(...l)},Pattern$1.prototype.mask=function(...l){return this.keepif.in(...l)},Pattern$1.prototype.maskAll=function(...l){return this.keep.in(...l)},Pattern$1.prototype.reset=function(...l){return this.keepif.reset(...l)},Pattern$1.prototype.resetAll=function(...l){return this.keep.reset(...l)},Pattern$1.prototype.restart=function(...l){return this.keepif.restart(...l)},Pattern$1.prototype.restartAll=function(...l){return this.keep.restart(...l)}})();const polyrhythm=stack,pr=stack,pm=polymeter,gap=e=>new Pattern$1(()=>[],e),silence=gap(1),nothing=gap(0);function pure(e){function o(d){return d.span.spanCycles.map(O=>new Hap(Fraction(O.begin).wholeCycle(),O,e))}const l=new Pattern$1(o,1);return l.__pure=e,l}function isPattern(e){return e instanceof Pattern$1||e?._Pattern}function reify(e){return isPattern(e)?e:stringParser&&typeof e=="string"?stringParser(e):pure(e)}function sequenceP(e){let o=pure([]);for(const l of e)o=o.bind(d=>l.fmap(O=>d.concat([O])));return o}function stack(...e){e=e.map(d=>Array.isArray(d)?sequence(...d):reify(d));const o=d=>flatten(e.map(O=>O.query(d))),l=new Pattern$1(o);return __steps&&(l._steps=lcm(...e.map(d=>d._steps))),l}function _stackWith(e,o){if(o=o.map(A=>Array.isArray(A)?sequence(...A):reify(A)),o.length===0)return silence;if(o.length===1)return o[0];const[l,...d]=o.map(A=>A._steps),O=__steps?l.maximum(...d):void 0;return stack(...e(O,o))}function stackLeft(...e){return _stackWith((o,l)=>l.map(d=>d._steps.eq(o)?d:stepcat(d,gap(o.sub(d._steps)))),e)}function stackRight(...e){return _stackWith((o,l)=>l.map(d=>d._steps.eq(o)?d:stepcat(gap(o.sub(d._steps)),d)),e)}function stackCentre(...e){return _stackWith((o,l)=>l.map(d=>{if(d._steps.eq(o))return d;const O=gap(o.sub(d._steps).div(2));return stepcat(O,d,O)}),e)}function stackBy(e,...o){const[l,...d]=o.map(S=>S._steps),O=l.maximum(...d),A={centre:stackCentre,left:stackLeft,right:stackRight,expand:stack,repeat:(...S)=>polymeter(...S).steps(O)};return e.inhabit(A).fmap(S=>S(...o)).innerJoin().setSteps(O)}function slowcat(...e){if(e=e.map(d=>Array.isArray(d)?fastcat(...d):reify(d)),e.length==1)return e[0];const o=function(d){const O=d.span,A=_mod$2(O.begin.sam(),e.length),S=e[A];if(!S)return[];const $=O.begin.floor().sub(O.begin.div(e.length).floor());return S.withHapTime(F=>F.add($)).query(d.setSpan(O.withTime(F=>F.sub($))))},l=__steps?lcm(...e.map(d=>d._steps)):void 0;return new Pattern$1(o).splitQueries().setSteps(l)}function slowcatPrime(...e){e=e.map(reify);const o=function(l){const d=Math.floor(l.span.begin)%e.length;return e[d]?.query(l)||[]};return new Pattern$1(o).splitQueries()}function cat(...e){return slowcat(...e)}function arrange(...e){const o=e.reduce((l,[d])=>l+d,0);return e=e.map(([l,d])=>[l,d.fast(l)]),stepcat(...e).slow(o)}function seqPLoop(...e){let o=Fraction(0);for(let l of e)l.length==2&&l.unshift(o),o=l[1];return stack(...e.map(([l,d,O])=>pure(reify(O)).compress(Fraction(l).div(o),Fraction(d).div(o)))).slow(o).innerJoin()}function fastcat(...e){let o=slowcat(...e);return e.length>1&&(o=o._fast(e.length),o._steps=e.length),e.length==1&&e[0].__steps_source&&(e._steps=e[0]._steps),o}function sequence(...e){return fastcat(...e)}function seq(...e){return fastcat(...e)}function _sequenceCount(e){return Array.isArray(e)?e.length==0?[silence,0]:e.length==1?_sequenceCount(e[0]):[fastcat(...e.map(o=>_sequenceCount(o)[0])),e.length]:[reify(e),1]}const mask=curry((e,o)=>reify(o).mask(e)),struct=curry((e,o)=>reify(o).struct(e)),superimpose=curry((e,o)=>reify(o).superimpose(...e)),withValue=curry((e,o)=>reify(o).withValue(e)),bind=curry((e,o)=>reify(o).bind(e)),innerBind=curry((e,o)=>reify(o).innerBind(e)),outerBind=curry((e,o)=>reify(o).outerBind(e)),squeezeBind=curry((e,o)=>reify(o).squeezeBind(e)),stepBind=curry((e,o)=>reify(o).stepBind(e)),polyBind=curry((e,o)=>reify(o).polyBind(e)),set=curry((e,o)=>reify(o).set(e)),keep=curry((e,o)=>reify(o).keep(e)),keepif=curry((e,o)=>reify(o).keepif(e)),add$7=curry((e,o)=>reify(o).add(e)),sub=curry((e,o)=>reify(o).sub(e)),mul=curry((e,o)=>reify(o).mul(e)),div=curry((e,o)=>reify(o).div(e)),mod$3=curry((e,o)=>reify(o).mod(e)),pow=curry((e,o)=>reify(o).pow(e)),band=curry((e,o)=>reify(o).band(e)),bor=curry((e,o)=>reify(o).bor(e)),bxor=curry((e,o)=>reify(o).bxor(e)),blshift=curry((e,o)=>reify(o).blshift(e)),brshift=curry((e,o)=>reify(o).brshift(e)),lt=curry((e,o)=>reify(o).lt(e)),gt=curry((e,o)=>reify(o).gt(e)),lte=curry((e,o)=>reify(o).lte(e)),gte=curry((e,o)=>reify(o).gte(e)),eq=curry((e,o)=>reify(o).eq(e)),eqt=curry((e,o)=>reify(o).eqt(e)),ne=curry((e,o)=>reify(o).ne(e)),net=curry((e,o)=>reify(o).net(e)),and=curry((e,o)=>reify(o).and(e)),or=curry((e,o)=>reify(o).or(e)),func=curry((e,o)=>reify(o).func(e));function register(e,o,l=!0,d=!1,O=A=>A.innerJoin()){if(Array.isArray(e)){const $={};for(const F of e)$[F]=register(F,o,l,d,O);return $}const A=o.length;var S;return l?S=function(...$){$=$.map(reify);const F=$[$.length-1];let E;if(A===1)E=o(F);else{const L=$.slice(0,-1);if(L.every(N=>N.__pure!=null)){const N=L.map(B=>B.__pure),V=L.filter(B=>B.__pure_loc).map(B=>B.__pure_loc);E=o(...N,F),E=E.withContext(B=>{const U=(B.locations||[]).concat(V);return{...B,locations:U}})}else{const[N,...V]=L;let B=(...U)=>o(...U,F);B=curry(B,null,A-1),E=O(V.reduce((U,q)=>U.appLeft(q),N.fmap(B)))}}return d&&(E._steps=F._steps),E}:S=function(...$){$=$.map(reify);const F=o(...$);return d&&(F._steps=$[$.length-1]._steps),F},Pattern$1.prototype[e]=function(...$){if(A===2&&$.length!==1)$=[sequence(...$)];else if(A!==$.length+1)throw new Error(`.${e}() expects ${A-1} inputs but got ${$.length}.`);return $=$.map(reify),S(...$,this)},A>1&&(Pattern$1.prototype["_"+e]=function(...$){const F=o(...$,this);return d&&F.setSteps(this._steps),F}),curry(S,null,A)}function stepRegister(e,o,l=!0,d=!1,O=A=>A.stepJoin()){return register(e,o,l,d,O)}const round=register("round",function(e){return e.asNumber().fmap(o=>Math.round(o))}),floor=register("floor",function(e){return e.asNumber().fmap(o=>Math.floor(o))}),ceil=register("ceil",function(e){return e.asNumber().fmap(o=>Math.ceil(o))}),toBipolar=register("toBipolar",function(e){return e.fmap(o=>o*2-1)}),fromBipolar=register("fromBipolar",function(e){return e.fmap(o=>(o+1)/2)}),range$2=register("range",function(e,o,l){return l.mul(o-e).add(e)}),rangex=register("rangex",function(e,o,l){return l._range(Math.log(e),Math.log(o)).fmap(Math.exp)}),range2=register("range2",function(e,o,l){return l.fromBipolar()._range(e,o)}),ratio=register("ratio",e=>e.fmap(o=>Array.isArray(o)?o.slice(1).reduce((l,d)=>l/d,o[0]):o)),compress=register("compress",function(e,o,l){return e=Fraction(e),o=Fraction(o),e.gt(o)||e.gt(1)||o.gt(1)||e.lt(0)||o.lt(0)?silence:l._fastGap(Fraction(1).div(o.sub(e)))._late(e)}),{compressSpan,compressspan}=register(["compressSpan","compressspan"],function(e,o){return o._compress(e.begin,e.end)}),{fastGap,fastgap}=register(["fastGap","fastgap"],function(e,o){const l=function(O){const A=O.begin.sam(),S=O.begin.sub(A).mul(e).min(1),$=O.end.sub(A).mul(e).min(1);if(!(S>=1))return new TimeSpan(A.add(S),A.add($))},d=function(O){const A=O.part.begin,S=O.part.end,$=A.sam(),F=A.sub($).div(e).min(1),E=S.sub($).div(e).min(1),L=new TimeSpan($.add(F),$.add(E)),N=O.whole?new TimeSpan(L.begin.sub(A.sub(O.whole.begin).div(e)),L.end.add(O.whole.end.sub(S).div(e))):void 0;return new Hap(N,L,O.value,O.context)};return o.withQuerySpanMaybe(l).withHap(d).splitQueries()}),focus=register("focus",function(e,o,l){return e=Fraction(e),o=Fraction(o),l._early(e.sam())._fast(Fraction(1).div(o.sub(e)))._late(e)}),{focusSpan,focusspan}=register(["focusSpan","focusspan"],function(e,o){return o._focus(e.begin,e.end)}),ply=register("ply",function(e,o){const l=o.fmap(d=>pure(d)._fast(e)).squeezeJoin();return __steps&&(l._steps=Fraction(e).mulmaybe(o._steps)),l}),{fast,density:density$1}=register(["fast","density"],function(e,o){return e===0?silence:(e=Fraction(e),o.withQueryTime(d=>d.mul(e)).withHapTime(d=>d.div(e)).setSteps(o._steps))},!0,!0),hurry=register("hurry",function(e,o){return o._fast(e).mul(pure({speed:e}))}),{slow,sparsity}=register(["slow","sparsity"],function(e,o){return e===0?silence:o._fast(Fraction(1).div(e))}),inside=register("inside",function(e,o,l){return o(l._slow(e))._fast(e)}),outside=register("outside",function(e,o,l){return o(l._fast(e))._slow(e)}),lastOf=register("lastOf",function(e,o,l){const d=Array(e-1).fill(l);return d.push(o(l)),slowcatPrime(...d)}),{firstOf,every}=register(["firstOf","every"],function(e,o,l){const d=Array(e-1).fill(l);return d.unshift(o(l)),slowcatPrime(...d)}),apply=register("apply",function(e,o){return e(o)}),cpm=register("cpm",function(e,o){return o._fast(e/60/1)}),early=register("early",function(e,o){return e=Fraction(e),o.withQueryTime(l=>l.add(e)).withHapTime(l=>l.sub(e))},!0,!0),late=register("late",function(e,o){return e=Fraction(e),o._early(Fraction(0).sub(e))},!0,!0),zoom=register("zoom",function(e,o,l){if(o=Fraction(o),e=Fraction(e),e.gte(o))return nothing;const d=o.sub(e),O=__steps?l._steps?.mulmaybe(d):void 0;return l.withQuerySpan(A=>A.withCycle(S=>S.mul(d).add(e))).withHapSpan(A=>A.withCycle(S=>S.sub(e).div(d))).splitQueries().setSteps(O)}),{zoomArc,zoomarc}=register(["zoomArc","zoomarc"],function(e,o){return o.zoom(e.begin,e.end)}),bite=register("bite",(e,o,l)=>o.fmap(d=>O=>{const A=Fraction(d).div(O).mod(1),S=A.add(Fraction(1).div(O));return l.zoom(A,S)}).appLeft(e).squeezeJoin(),!1),linger=register("linger",function(e,o){return e==0?silence:e<0?o._zoom(e.add(1),1)._slow(e):o._zoom(0,e)._slow(e)},!0,!0),{segment,seg}=register(["segment","seg"],function(e,o){return o.struct(pure(!0)._fast(e)).setSteps(e)}),swingBy=register("swingBy",(e,o,l)=>l.inside(o,late(seq(0,e/2)))),swing=register("swing",(e,o)=>o.swingBy(1/3,e)),{invert:invert$1,inv}=register(["invert","inv"],function(e){return e.fmap(o=>!o)},!0,!0),when=register("when",function(e,o,l){return e?o(l):l}),off=register("off",function(e,o,l){return stack(l,o(l.late(e)))}),brak=register("brak",function(e){return e.when(slowcat(!1,!0),o=>fastcat(o,silence)._late(.25))}),rev=register("rev",function(e){const o=function(l){const d=l.span,O=d.begin.sam(),A=d.begin.nextSam(),S=function(F){const E=F.withTime(N=>O.add(A.sub(N))),L=E.begin;return E.begin=E.end,E.end=L,E};return e.query(l.setSpan(S(d))).map(F=>F.withSpan(S))};return new Pattern$1(o).splitQueries()},!1,!0),revv=register("revv",function(e){const o=l=>new TimeSpan(Fraction(0).sub(l.end),Fraction(0).sub(l.begin));return e.withQuerySpan(o).withHapSpan(o)}),pressBy=register("pressBy",function(e,o){return o.fmap(l=>pure(l).compress(e,1)).squeezeJoin()}),press=register("press",function(e){return e._pressBy(.5)});Pattern$1.prototype.hush=function(){return silence};const palindrome=register("palindrome",function(e){return e.lastOf(2,rev)},!0,!0),{juxBy,juxby}=register(["juxBy","juxby"],function(e,o,l){e/=2;const d=function(S,$,F){return $ in S?S[$]:F},O=l.withValue(S=>Object.assign({},S,{pan:d(S,"pan",.5)-e})),A=o(l.withValue(S=>Object.assign({},S,{pan:d(S,"pan",.5)+e})));return stack(O,A).setSteps(__steps?lcm(O._steps,A._steps):void 0)}),jux=register("jux",function(e,o){return o._juxBy(1,e,o)}),{echoWith,echowith,stutWith,stutwith}=register(["echoWith","echowith","stutWith","stutwith"],function(e,o,l,d){return stack(...listRange(0,e-1).map(O=>l(d.late(Fraction(o).mul(O)),O)))}),echo=register("echo",function(e,o,l,d){return d._echoWith(e,o,(O,A)=>O.gain(Math.pow(l,A)))}),stut=register("stut",function(e,o,l,d){return d._echoWith(e,l,(O,A)=>O.gain(Math.pow(o,A)))}),applyN=register("applyN",function(e,o,l){let d=l;for(let O=0;O<e;O++)d=o(d);return d}),plyWith=register(["plyWith","plywith"],function(e,o,l){const d=l.fmap(O=>cat(...listRange(0,e-1).map(A=>applyN(A,o,O)))._fast(e)).squeezeJoin();return __steps&&(d._steps=Fraction(e).mulmaybe(l._steps)),d}),plyForEach=register(["plyForEach","plyforeach"],function(e,o,l){const d=l.fmap(O=>cat(cat(pure(O),...listRange(1,e-1).map(A=>o(pure(O),A))))._fast(e)).squeezeJoin();return __steps&&(d._steps=Fraction(e).mulmaybe(l._steps)),d}),_iter=function(e,o,l=!1){return e=Fraction(e),slowcat(...listRange(0,e.sub(1)).map(d=>l?o.late(Fraction(d).div(e)):o.early(Fraction(d).div(e))))},iter=register("iter",function(e,o){return _iter(e,o,!1)},!0,!0),{iterBack,iterback}=register(["iterBack","iterback"],function(e,o){return _iter(e,o,!0)},!0,!0),{repeatCycles}=register("repeatCycles",function(e,o){return new Pattern$1(function(l){const d=l.span.begin.sam(),O=d.div(e).sam(),A=d.sub(O);return l=l.withSpan(S=>S.withTime($=>$.sub(A))),o.query(l).map(S=>S.withSpan($=>$.withTime(F=>F.add(A))))}).splitQueries()},!0,!0),_chunk=function(e,o,l,d=!1,O=!1){const A=Array(e-1).fill(!1);A.unshift(!0);const S=_iter(e,sequence(...A),!d);return O||(l=l.repeatCycles(e)),l.when(S,o)},{chunk,slowchunk,slowChunk}=register(["chunk","slowchunk","slowChunk"],function(e,o,l){return _chunk(e,o,l,!1,!1)},!0,!0),{chunkBack,chunkback}=register(["chunkBack","chunkback"],function(e,o,l){return _chunk(e,o,l,!0)},!0,!0),{fastchunk,fastChunk}=register(["fastchunk","fastChunk"],function(e,o,l){return _chunk(e,o,l,!1,!0)},!0,!0),{chunkinto,chunkInto}=register(["chunkinto","chunkInto"],function(e,o,l){return l.into(fastcat(!0,...Array(e-1).fill(!1))._iterback(e),o)}),{chunkbackinto,chunkBackInto}=register(["chunkbackinto","chunkBackInto"],function(e,o,l){return l.into(fastcat(!0,...Array(e-1).fill(!1))._iter(e)._early(1),o)}),bypass=register("bypass",function(e,o){return e=!!parseInt(e),e?silence:o},!0,!0),{ribbon,rib}=register(["ribbon","rib"],(e,o,l)=>l.early(e).restart(pure(1).slow(o))),hsla=register("hsla",(e,o,l,d,O)=>O.color(`hsla(${e}turn,${o*100}%,${l*100}%,${d})`)),hsl=register("hsl",(e,o,l,d)=>d.color(`hsl(${e}turn,${o*100}%,${l*100}%)`));Pattern$1.prototype.tag=function(e){return this.withContext(o=>({...o,tags:(o.tags||[]).concat([e])}))};const filter$1=register("filter",(e,o)=>o.withHaps(l=>l.filter(e))),filterWhen=register("filterWhen",(e,o)=>o.filter(l=>e(l.whole.begin))),within=register("within",(e,o,l,d)=>stack(l(d.filterWhen(O=>O.cyclePos()>=e&&O.cyclePos()<=o)),d.filterWhen(O=>O.cyclePos()<e||O.cyclePos()>o)));Pattern$1.prototype.stepJoin=function(){const e=this,o=stepcat(..._retime(_slices(e.queryArc(0,1))))._steps,l=function(d){const A=e.early(d.span.begin.sam()).query(d.setSpan(new TimeSpan(Fraction(0),Fraction(1))));return stepcat(..._retime(_slices(A))).query(d)};return new Pattern$1(l,o)},Pattern$1.prototype.stepBind=function(e){return this.fmap(e).stepJoin()};function _retime(e){const o=e.filter((A,S)=>S.hasSteps).reduce((A,S)=>A.add(S),Fraction(0)),l=removeUndefineds(e.map((A,S)=>S._steps)).reduce((A,S)=>A.add(S),Fraction(0)),d=o.eq(0)?void 0:l.div(o);function O(A,S){return S._steps===void 0?[A.mulmaybe(d),S]:[S._steps,S]}return e.map(A=>O(...A))}function _slices(e){const o=flatten(e.map(O=>[O.part.begin,O.part.end])),l=uniqsortr([Fraction(0),Fraction(1),...o]);return pairs(l).map(O=>[O[1].sub(O[0]),stack(..._fitslice(new TimeSpan(...O),e).map(A=>A.value.withHap(S=>S.setContext(S.combineContext(A)))))])}function _fitslice(e,o){return removeUndefineds(o.map(l=>_match(e,l)))}function _match(e,o){const l=e.intersection(o.part);if(l!=null)return new Hap(o.whole,l,o.value,o.context)}const pace=register("pace",function(e,o){return o._steps===void 0?o:o._steps.eq(Fraction(0))?nothing:o._fast(Fraction(e).div(o._steps)).setSteps(e)});function _polymeterListSteps(e,...o){const l=o.map(O=>_sequenceCount(O));if(l.length==0)return silence;e==0&&(e=l[0][1]);const d=[];for(const O of l)O[1]!=0&&(e==O[1]?d.push(O[0]):d.push(O[0]._fast(Fraction(e).div(Fraction(O[1])))));return stack(...d)}function polymeter(...e){if(Array.isArray(e[0]))return _polymeterListSteps(0,...e);if(e=e.filter(d=>d.hasSteps),e.length==0)return silence;const o=lcm(...e.map(d=>d._steps));if(o.eq(Fraction(0)))return nothing;const l=stack(...e.map(d=>d.pace(o)));return l._steps=o,l}function stepcat(...e){if(e.length===0)return nothing;const o=S=>Array.isArray(S)?S:[S._steps??1,S];if(e=e.map(o),e.find(S=>S[0]===void 0)){const S=e.map(F=>F[0]).filter(F=>F!==void 0);if(S.length===0)return fastcat(...e.map(F=>F[1]));if(S.length===e.length)return nothing;const $=S.reduce((F,E)=>F.add(E),Fraction(0)).div(S.length);for(let F of e)F[0]===void 0&&(F[0]=$)}if(e.length==1)return reify(e[0][1]).withSteps($=>e[0][0]);const l=e.map(S=>S[0]).reduce((S,$)=>S.add($),Fraction(0));let d=Fraction(0);const O=[];for(const[S,$]of e){if(Fraction(S).eq(0))continue;const F=d.add(S);O.push(reify($)._compress(d.div(l),F.div(l))),d=F}const A=stack(...O);return A._steps=l,A}function stepalt(...e){e=e.map(O=>Array.isArray(O)?O.map(reify):[reify(O)]);const o=lcm(...e.map(O=>Fraction(O.length)));let l=[];for(let O=0;O<o;++O)l.push(...e.map(A=>A.length==0?silence:A[O%A.length]));l=l.filter(O=>O.hasSteps&&O._steps>0);const d=l.reduce((O,A)=>O.add(A._steps),Fraction(0));return l=stepcat(...l),l._steps=d,l}const take=stepRegister("take",function(e,o){if(!o.hasSteps||o._steps.lte(0)||(e=Fraction(e),e.eq(0)))return nothing;const l=e<0;l&&(e=e.abs());const d=e.div(o._steps);return d.lte(0)?nothing:d.gte(1)?o:l?o.zoom(Fraction(1).sub(d),1):o.zoom(0,d)}),drop=stepRegister("drop",function(e,o){return o.hasSteps?(e=Fraction(e),e.lt(0)?o.take(o._steps.add(e)):o.take(Fraction(0).sub(o._steps.sub(e)))):nothing}),extend=stepRegister("extend",function(e,o){return o.fast(e).expand(e)}),replicate=stepRegister("replicate",function(e,o){return o.repeatCycles(e).fast(e).expand(e)}),expand=stepRegister("expand",function(e,o){return o.withSteps(l=>l.mul(Fraction(e)))}),contract=stepRegister("contract",function(e,o){return o.withSteps(l=>l.div(Fraction(e)))});Pattern$1.prototype.shrinklist=function(e){const o=this;if(!o.hasSteps)return[o];let[l,d]=Array.isArray(e)?e:[e,o._steps];if(l=Fraction(l),d===0||l===0)return[o];const O=l>0,A=[];if(O){const S=Fraction(1).div(o._steps).mul(l);for(let $=0;$<d;++$){const F=S.mul($);if(F.gt(1))break;A.push([F,1])}}else{l=Fraction(0).sub(l);const S=Fraction(1).div(o._steps).mul(l);for(let $=0;$<d;++$){const F=Fraction(1).sub(S.mul($));if(F.lt(0))break;A.push([Fraction(0),F])}}return A.map(S=>o.zoom(...S))};const shrinklist=(e,o)=>o.shrinklist(e),shrink=register("shrink",function(e,o){if(!o.hasSteps)return nothing;const l=o.shrinklist(e),d=stepcat(...l);return d._steps=l.reduce((O,A)=>O.add(A._steps),Fraction(0)),d},!0,!1,e=>e.stepJoin()),grow=register("grow",function(e,o){if(!o.hasSteps)return nothing;const l=o.shrinklist(Fraction(0).sub(e));l.reverse();const d=stepcat(...l);return d._steps=l.reduce((O,A)=>O.add(A._steps),Fraction(0)),d},!0,!1,e=>e.stepJoin()),tour=function(e,...o){return e.tour(...o)};Pattern$1.prototype.tour=function(...e){return stepcat(...[].concat(...e.map((o,l)=>[...e.slice(0,e.length-l),this,...e.slice(e.length-l)]),this,...e))};const zip=function(...e){e=e.filter(d=>d.hasSteps);const o=slowcat(...e.map(d=>d._slow(d._steps))),l=lcm(...e.map(d=>d._steps));return o._fast(l).setSteps(l)},timecat=stepcat,timeCat=stepcat,s_cat=stepcat,s_alt=stepalt,s_polymeter=polymeter;Pattern$1.prototype.s_polymeter=Pattern$1.prototype.polymeter;const s_taper=shrink;Pattern$1.prototype.s_taper=Pattern$1.prototype.shrink;const s_taperlist=shrinklist;Pattern$1.prototype.s_taperlist=Pattern$1.prototype.shrinklist;const s_add=take;Pattern$1.prototype.s_add=Pattern$1.prototype.take;const s_sub=drop;Pattern$1.prototype.s_sub=Pattern$1.prototype.drop;const s_expand=expand;Pattern$1.prototype.s_expand=Pattern$1.prototype.expand;const s_extend=extend;Pattern$1.prototype.s_extend=Pattern$1.prototype.extend;const s_contract=contract;Pattern$1.prototype.s_contract=Pattern$1.prototype.contract;const s_tour=tour;Pattern$1.prototype.s_tour=Pattern$1.prototype.tour;const s_zip=zip;Pattern$1.prototype.s_zip=Pattern$1.prototype.zip;const steps$2=pace;Pattern$1.prototype.steps=Pattern$1.prototype.pace;const chop=register("chop",function(e,o){const d=Array.from({length:e},(S,$)=>$).map(S=>({begin:S/e,end:(S+1)/e})),O=function(S,$){if("begin"in S&&"end"in S&&S.begin!==void 0&&S.end!==void 0){const F=S.end-S.begin;$={begin:S.begin+$.begin*F,end:S.begin+$.end*F}}return Object.assign({},S,$)},A=function(S){return sequence(d.map($=>O(S,$)))};return o.squeezeBind(A).setSteps(__steps?Fraction(e).mulmaybe(o._steps):void 0)}),striate=register("striate",function(e,o){const d=Array.from({length:e},(A,S)=>S).map(A=>({begin:A/e,end:(A+1)/e})),O=slowcat(...d);return o.set(O)._fast(e).setSteps(__steps?Fraction(e).mulmaybe(o._steps):void 0)}),_loopAt=function(e,o,l=.5){return o.speed(1/e*l).unit("c").slow(e)},slice=register("slice",function(e,o,l){return e.innerBind(d=>o.outerBind(O=>l.outerBind(A=>{A=A instanceof Object?A:{s:A};const S=Array.isArray(d)?d[O]:O/d,$=Array.isArray(d)?d[O+1]:(O+1)/d;return pure({begin:S,end:$,_slices:d,...A})}))).setSteps(o._steps)},!1);Pattern$1.prototype.onTriggerTime=function(e){return this.onTrigger((o,l,d,O)=>{const A=O-l;window.setTimeout(()=>{e(o)},A*1e3)},!1)};const splice=register("splice",function(e,o,l){const d=slice(e,o,l);return new Pattern$1(O=>{const A=O.controls._cps||1;return d.query(O).map($=>$.withValue(F=>({speed:A/F._slices/$.whole.duration*(F.speed||1),unit:"c",...F})))}).setSteps(o._steps)},!1),{loopAt,loopat}=register(["loopAt","loopat"],function(e,o){const l=o._steps?o._steps.div(e):void 0;return new Pattern$1(d=>_loopAt(e,o,d.controls._cps).query(d),l)}),fit=register("fit",e=>e.withHaps((o,l)=>o.map(d=>d.withValue(O=>{const A=("end"in O?O.end:1)-("begin"in O?O.begin:0);return{...O,speed:(l.controls._cps||1)/d.whole.duration*A,unit:"c"}})))),{loopAtCps,loopatcps}=register(["loopAtCps","loopatcps"],function(e,o,l){return _loopAt(e,l,o)}),ref$1=e=>pure(1).withValue(()=>reify(e())).innerJoin();let fadeGain=e=>e<.5?1:1-(e-.5)/.5,xfade=(e,o,l)=>{o=reify(o),e=reify(e),l=reify(l);let d=o.fmap(A=>({gain:fadeGain(A)})),O=o.fmap(A=>({gain:fadeGain(1-A)}));return stack(e.mul(d),l.mul(O))};Pattern$1.prototype.xfade=function(e,o){return xfade(this,e,o)};const __beat=e=>(o,l,d)=>{o=Fraction(o).mod(l),l=Fraction(l);const O=o.div(l),A=o.add(1).div(l);return e(d.fmap(S=>pure(S)._compress(O,A)))},{beat}=register(["beat"],__beat(e=>e.innerJoin())),_morph=(e,o,l)=>{l=Fraction(l);const d=Fraction(1).div(e.length),O=$=>{const F=[];for(const[E,L]of $.entries())L&&F.push([Fraction(E).div($.length),L]);return F},A=zipWith(([$,F],[E,L])=>{const N=l.mul(E-$).add($),V=N.add(d);return new TimeSpan(N,V)},O(e),O(o));function S($){const F=$.span.begin.sam(),E=$.span.cycleArc(),L=[];for(const N of A){const V=N.intersection(E);V!==void 0&&L.push(new Hap(N.withTime(B=>B.add(F)),V.withTime(B=>B.add(F)),!0))}return L}return new Pattern$1(S).splitQueries()},morph=(e,o,l)=>(e=reify(e),o=reify(o),l=reify(l),e.innerBind(d=>o.innerBind(O=>l.innerBind(A=>_morph(d,O,A))))),distAlgoNames=["scurve","soft","hard","cubic","diode","asym","fold","sinefold","chebyshev"];for(const e of distAlgoNames)Pattern$1.prototype[e]=function(o){const l=reify(o).fmap(d=>Array.isArray(d)?[...d,e]:[d,1,e]);return this.distort(l)};const parray=e=>{let l=pure(curry((...d)=>d,null,e.length));for(const d of e)l=l.appBoth(reify(d));return l},_ensureListPattern=e=>Array.isArray(e)?parray(e):reify(e);Pattern$1.prototype.partials=function(e){return this.withValue(o=>l=>({...o,partials:l})).appLeft(_ensureListPattern(e))};const partials=e=>_ensureListPattern(e).as("partials");Pattern$1.prototype.phases=function(e){return this.withValue(o=>l=>({...o,phases:l})).appLeft(_ensureListPattern(e))};const phases=e=>_ensureListPattern(e).as("phases");function createParam(e){let o=Array.isArray(e);e=o?e:[e];const l=e[0],d=A=>{let S;if(typeof A=="object"&&A.value!==void 0&&(S={...A},A=A.value,delete S.value),o&&Array.isArray(A)){const $=S||{};return A.forEach((F,E)=>{E<e.length&&($[e[E]]=F)}),$}else return S?(S[l]=A,S):{[l]:A}},O=function(A,S){return S?typeof A>"u"?S.fmap(d):S.set(reify(A).withValue(d)):reify(A).withValue(d)};return Pattern$1.prototype[l]=function(A){return O(A,this)},O}const controlAlias=new Map;function isControlName(e){return controlAlias.has(e)}function registerControl(e,...o){const l=Array.isArray(e)?e[0]:e;let d={};return d[l]=createParam(e),controlAlias.set(l,l),o.forEach(O=>{d[O]=d[l],controlAlias.set(O,l),Pattern$1.prototype[O]=Pattern$1.prototype[l]}),d}const{s,sound}=registerControl(["s","n","gain"],"sound"),{wt,wavetablePosition}=registerControl("wt","wavetablePosition"),{wtenv}=registerControl("wtenv"),{wtattack,wtatt}=registerControl("wtattack","wtatt"),{wtdecay,wtdec}=registerControl("wtdecay","wtdec"),{wtsustain,wtsus}=registerControl("wtsustain","wtsus"),{wtrelease,wtrel}=registerControl("wtrelease","wtrel"),{wtrate}=registerControl("wtrate"),{wtsync}=registerControl("wtsync"),{wtdepth}=registerControl("wtdepth"),{wtshape}=registerControl("wtshape"),{wtdc}=registerControl("wtdc"),{wtskew}=registerControl("wtskew"),{warp,wavetableWarp}=registerControl("warp","wavetableWarp"),{warpattack,warpatt}=registerControl("warpattack","warpatt"),{warpdecay,warpdec}=registerControl("warpdecay","warpdec"),{warpsustain,warpsus}=registerControl("warpsustain","warpsus"),{warprelease,warprel}=registerControl("warprelease","warprel"),{warprate}=registerControl("warprate"),{warpdepth}=registerControl("warpdepth"),{warpshape}=registerControl("warpshape"),{warpdc}=registerControl("warpdc"),{warpskew}=registerControl("warpskew"),{warpmode,wavetableWarpMode}=registerControl("warpmode","wavetableWarpMode"),{wtphaserand,wavetablePhaseRand}=registerControl("wtphaserand","wavetablePhaseRand"),{warpenv}=registerControl("warpenv"),{warpsync}=registerControl("warpsync"),{source,src}=registerControl("source","src"),{n}=registerControl("n"),{note:note$2}=registerControl(["note","n"]),{accelerate}=registerControl("accelerate"),{velocity}=registerControl("velocity"),{gain}=registerControl("gain"),{postgain}=registerControl("postgain"),{amp}=registerControl("amp"),{attack,att}=registerControl("attack","att"),{fmh}=registerControl(["fmh","fmi"],"fmh"),{fmi,fm:fm$1}=registerControl(["fmi","fmh"],"fm"),{fmenv}=registerControl("fmenv"),{fmattack}=registerControl("fmattack"),{fmwave}=registerControl("fmwave"),{fmdecay}=registerControl("fmdecay"),{fmsustain}=registerControl("fmsustain"),{fmrelease}=registerControl("fmrelease"),{fmvelocity}=registerControl("fmvelocity"),{bank}=registerControl("bank"),{chorus}=registerControl("chorus"),{analyze}=registerControl("analyze"),{fft}=registerControl("fft"),{decay,dec}=registerControl("decay","dec"),{sustain,sus}=registerControl("sustain","sus"),{release,rel}=registerControl("release","rel"),{hold}=registerControl("hold"),{bandf,bpf,bp}=registerControl(["bandf","bandq","bpenv"],"bpf","bp"),{bandq,bpq}=registerControl("bandq","bpq"),{begin}=registerControl("begin"),{end}=registerControl("end"),{loop}=registerControl("loop"),{loopBegin,loopb}=registerControl("loopBegin","loopb"),{loopEnd,loope}=registerControl("loopEnd","loope"),{crush}=registerControl("crush"),{coarse}=registerControl("coarse"),{tremolo}=registerControl(["tremolo","tremolodepth","tremoloskew","tremolophase"],"trem"),{tremolosync}=registerControl(["tremolosync","tremolodepth","tremoloskew","tremolophase"],"tremsync"),{tremolodepth}=registerControl("tremolodepth","tremdepth"),{tremoloskew}=registerControl("tremoloskew","tremskew"),{tremolophase}=registerControl("tremolophase","tremphase"),{tremoloshape}=registerControl("tremoloshape","tremshape"),{drive}=registerControl("drive"),{duck}=registerControl("duckorbit","duck"),{duckdepth}=registerControl("duckdepth"),{duckonset}=registerControl("duckonset","duckons"),{duckattack}=registerControl("duckattack","duckatt"),{byteBeatExpression,bbexpr}=registerControl("byteBeatExpression","bbexpr"),{byteBeatStartTime,bbst}=registerControl("byteBeatStartTime","bbst"),{channels,ch}=registerControl("channels","ch"),{pw}=registerControl(["pw","pwrate","pwsweep"]),{pwrate}=registerControl("pwrate"),{pwsweep}=registerControl("pwsweep"),{phaserrate,ph,phaser}=registerControl(["phaserrate","phaserdepth","phasercenter","phasersweep"],"ph","phaser"),{phasersweep,phs}=registerControl("phasersweep","phs"),{phasercenter,phc}=registerControl("phasercenter","phc"),{phaserdepth,phd,phasdp}=registerControl("phaserdepth","phd","phasdp"),{channel}=registerControl("channel"),{cut}=registerControl("cut"),{cutoff,ctf,lpf,lp}=registerControl(["cutoff","resonance","lpenv"],"ctf","lpf","lp"),{lpenv,lpe}=registerControl("lpenv","lpe"),{hpenv,hpe}=registerControl("hpenv","hpe"),{bpenv,bpe}=registerControl("bpenv","bpe"),{lpattack,lpa}=registerControl("lpattack","lpa"),{hpattack,hpa}=registerControl("hpattack","hpa"),{bpattack,bpa}=registerControl("bpattack","bpa"),{lpdecay,lpd}=registerControl("lpdecay","lpd"),{hpdecay,hpd}=registerControl("hpdecay","hpd"),{bpdecay,bpd}=registerControl("bpdecay","bpd"),{lpsustain,lps}=registerControl("lpsustain","lps"),{hpsustain,hps}=registerControl("hpsustain","hps"),{bpsustain,bps}=registerControl("bpsustain","bps"),{lprelease,lpr}=registerControl("lprelease","lpr"),{hprelease,hpr}=registerControl("hprelease","hpr"),{bprelease,bpr}=registerControl("bprelease","bpr"),{ftype}=registerControl("ftype"),{fanchor}=registerControl("fanchor"),{lprate}=registerControl("lprate"),{lpsync}=registerControl("lpsync"),{lpdepth}=registerControl("lpdepth"),{lpdepthfrequency}=registerControl("lpdepthfrequency","lpdepthfreq"),{lpshape}=registerControl("lpshape"),{lpdc}=registerControl("lpdc"),{lpskew}=registerControl("lpskew"),{bprate}=registerControl("bprate"),{bpsync}=registerControl("bpsync"),{bpdepth}=registerControl("bpdepth"),{bpdepthfrequency}=registerControl("bpdepthfrequency","bpdepthfreq"),{bpshape}=registerControl("bpshape"),{bpdc}=registerControl("bpdc"),{bpskew}=registerControl("bpskew"),{hprate}=registerControl("hprate"),{hpsync}=registerControl("hpsync"),{hpdepth,hpdepthfreq}=registerControl("hpdepth"),{hpdepthfrequency}=registerControl("hpdepthfrequency","hpdepthfreq"),{hpshape}=registerControl("hpshape"),{hpdc}=registerControl("hpdc"),{hpskew}=registerControl("hpskew"),{vib,vibrato,v}=registerControl(["vib","vibmod"],"vibrato","v"),{noise}=registerControl("noise"),{vibmod,vmod}=registerControl(["vibmod","vib"],"vmod"),{hcutoff,hpf,hp}=registerControl(["hcutoff","hresonance","hpenv"],"hpf","hp"),{hresonance,hpq}=registerControl("hresonance","hpq"),{resonance,lpq}=registerControl("resonance","lpq"),{djf}=registerControl("djf"),{delay}=registerControl(["delay","delaytime","delayfeedback"]),{delayfeedback,delayfb,dfb}=registerControl("delayfeedback","delayfb","dfb"),{delayspeed}=registerControl("delayspeed"),{delaytime,delayt,dt}=registerControl("delaytime","delayt","dt"),{delaysync}=registerControl("delaysync"),{lock}=registerControl("lock"),{detune,det}=registerControl("detune","det"),{unison}=registerControl("unison"),{spread}=registerControl("spread"),{dry}=registerControl("dry"),{fadeTime,fadeOutTime}=registerControl("fadeTime","fadeOutTime"),{fadeInTime}=registerControl("fadeInTime"),{freq:freq$1}=registerControl("freq"),{pattack,patt}=registerControl("pattack","patt"),{pdecay,pdec}=registerControl("pdecay","pdec"),{psustain,psus}=registerControl("psustain","psus"),{prelease,prel}=registerControl("prelease","prel"),{penv}=registerControl("penv"),{pcurve}=registerControl("pcurve"),{panchor}=registerControl("panchor"),{gate,gat}=registerControl("gate","gat"),{leslie}=registerControl("leslie"),{lrate}=registerControl("lrate"),{lsize}=registerControl("lsize"),{activeLabel}=registerControl("activeLabel"),{label}=registerControl(["label","activeLabel"]),{degree}=registerControl("degree"),{mtranspose}=registerControl("mtranspose"),{ctranspose}=registerControl("ctranspose"),{harmonic}=registerControl("harmonic"),{stepsPerOctave}=registerControl("stepsPerOctave"),{octaveR}=registerControl("octaveR"),{nudge}=registerControl("nudge"),{octave:octave$1,oct}=registerControl("octave","oct"),{orbit}=registerControl("orbit","o"),{overgain}=registerControl("overgain"),{overshape}=registerControl("overshape"),{pan}=registerControl("pan"),{panspan}=registerControl("panspan"),{pansplay}=registerControl("pansplay"),{panwidth}=registerControl("panwidth"),{panorient}=registerControl("panorient"),{rate}=registerControl("rate"),{slide}=registerControl("slide"),{semitone}=registerControl("semitone"),{voice}=registerControl("voice"),{chord:chord$1}=registerControl("chord"),{dictionary:dictionary$5,dict}=registerControl("dictionary","dict"),{anchor}=registerControl("anchor"),{offset}=registerControl("offset"),{octaves}=registerControl("octaves"),{mode:mode$1}=registerControl(["mode","anchor"]),{room}=registerControl(["room","size"]),{roomlp,rlp}=registerControl("roomlp","rlp"),{roomdim,rdim}=registerControl("roomdim","rdim"),{roomfade,rfade}=registerControl("roomfade","rfade"),{ir,iresponse}=registerControl(["ir","i"],"iresponse"),{irspeed}=registerControl("irspeed"),{irbegin}=registerControl("irbegin"),{roomsize,size,sz,rsize}=registerControl("roomsize","size","sz","rsize"),{shape}=registerControl(["shape","shapevol"]),{distort,dist:dist$2}=registerControl(["distort","distortvol","distorttype"],"dist"),{distortvol}=registerControl("distortvol","distvol"),{distorttype}=registerControl("distorttype","disttype"),{compressor}=registerControl(["compressor","compressorRatio","compressorKnee","compressorAttack","compressorRelease"]),{compressorKnee}=registerControl("compressorKnee"),{compressorRatio}=registerControl("compressorRatio"),{compressorAttack}=registerControl("compressorAttack"),{compressorRelease}=registerControl("compressorRelease"),{speed}=registerControl("speed"),{stretch}=registerControl("stretch"),{unit}=registerControl("unit"),{squiz}=registerControl("squiz"),{vowel}=registerControl("vowel"),{waveloss}=registerControl("waveloss"),{density}=registerControl("density"),{expression}=registerControl("expression"),{sustainpedal}=registerControl("sustainpedal"),{fshift}=registerControl("fshift"),{fshiftnote}=registerControl("fshiftnote"),{fshiftphase}=registerControl("fshiftphase"),{triode}=registerControl("triode"),{krush}=registerControl("krush"),{kcutoff}=registerControl("kcutoff"),{octer}=registerControl("octer"),{octersub}=registerControl("octersub"),{octersubsub}=registerControl("octersubsub"),{ring}=registerControl("ring"),{ringf}=registerControl("ringf"),{ringdf}=registerControl("ringdf"),{freeze}=registerControl("freeze"),{xsdelay}=registerControl("xsdelay"),{tsdelay}=registerControl("tsdelay"),{real}=registerControl("real"),{imag}=registerControl("imag"),{enhance}=registerControl("enhance"),{comb}=registerControl("comb"),{smear:smear$1}=registerControl("smear"),{scram}=registerControl("scram"),{binshift}=registerControl("binshift"),{hbrick}=registerControl("hbrick"),{lbrick}=registerControl("lbrick"),{frameRate}=registerControl("frameRate"),{frames}=registerControl("frames"),{hours}=registerControl("hours"),{minutes}=registerControl("minutes"),{seconds}=registerControl("seconds"),{songPtr}=registerControl("songPtr"),{uid}=registerControl("uid"),{val}=registerControl("val"),{cps}=registerControl("cps"),{clip,legato}=registerControl("clip","legato"),{duration,dur}=registerControl("duration","dur"),{zrand}=registerControl("zrand"),{curve}=registerControl("curve"),{deltaSlide}=registerControl("deltaSlide"),{pitchJump}=registerControl("pitchJump"),{pitchJumpTime}=registerControl("pitchJumpTime"),{lfo,repeatTime}=registerControl("lfo","repeatTime"),{znoise}=registerControl("znoise"),{zmod}=registerControl("zmod"),{zcrush}=registerControl("zcrush"),{zdelay}=registerControl("zdelay"),{zzfx}=registerControl("zzfx"),{color,colour}=registerControl(["color","colour"]);let createParams=(...e)=>e.reduce((o,l)=>Object.assign(o,{[l]:createParam(l)}),{});const adsr=register("adsr",(e,o)=>{e=Array.isArray(e)?e:[e];const[l,d,O,A]=e;return o.set({attack:l,decay:d,sustain:O,release:A})}),ad=register("ad",(e,o)=>{e=Array.isArray(e)?e:[e];const[l,d=l]=e;return o.attack(l).decay(d)}),ds=register("ds",(e,o)=>{e=Array.isArray(e)?e:[e];const[l,d=0]=e;return o.set({decay:l,sustain:d})}),ar=register("ar",(e,o)=>{e=Array.isArray(e)?e:[e];const[l,d=l]=e;return o.set({attack:l,release:d})}),{midichan}=registerControl("midichan"),{midimap}=registerControl("midimap"),{midiport}=registerControl("midiport"),{midicmd}=registerControl("midicmd"),control=register("control",(e,o)=>{if(!Array.isArray(e))throw new Error("control expects an array of [ccn, ccv]");const[l,d]=e;return o.ccn(l).ccv(d)}),{ccn}=registerControl("ccn"),{ccv}=registerControl("ccv"),{ctlNum}=registerControl("ctlNum"),{nrpnn}=registerControl("nrpnn"),{nrpv}=registerControl("nrpv"),{progNum}=registerControl("progNum"),sysex=register("sysex",(e,o)=>{if(!Array.isArray(e))throw new Error("sysex expects an array of [id, data]");const[l,d]=e;return o.sysexid(l).sysexdata(d)}),{sysexid}=registerControl("sysexid"),{sysexdata}=registerControl("sysexdata"),{midibend}=registerControl("midibend"),{miditouch}=registerControl("miditouch"),{polyTouch}=registerControl("polyTouch"),{oschost}=registerControl("oschost"),{oscport}=registerControl("oscport"),getControlName=e=>controlAlias.has(e)?controlAlias.get(e):e,as=register("as",(e,o)=>(e=Array.isArray(e)?e:[e],o.fmap(l=>(l=Array.isArray(l)?l:[l],l=Object.fromEntries(e.map((d,O)=>[getControlName(d),l[O]])),l)))),scrub=register("scrub",(e,o)=>e.outerBind(l=>{Array.isArray(l)||(l=[l]);const[d,O=1]=l;return o.begin(d).mul(speed(O)).clip(1)}),!1),controls=Object.freeze(Object.defineProperty({__proto__:null,accelerate,activeLabel,ad,adsr,amp,analyze,anchor,ar,as,att,attack,bandf,bandq,bank,bbexpr,bbst,begin,binshift,bp,bpa,bpattack,bpd,bpdc,bpdecay,bpdepth,bpdepthfrequency,bpe,bpenv,bpf,bpq,bpr,bprate,bprelease,bps,bpshape,bpskew,bpsustain,bpsync,byteBeatExpression,byteBeatStartTime,ccn,ccv,ch,channel,channels,chord:chord$1,chorus,clip,coarse,color,colour,comb,compressor,compressorAttack,compressorKnee,compressorRatio,compressorRelease,control,cps,createParam,createParams,crush,ctf,ctlNum,ctranspose,curve,cut,cutoff,dec,decay,degree,delay,delayfb,delayfeedback,delayspeed,delaysync,delayt,delaytime,deltaSlide,density,det,detune,dfb,dict,dictionary:dictionary$5,dist:dist$2,distort,distorttype,distortvol,djf,drive,dry,ds,dt,duck,duckattack,duckdepth,duckonset,dur,duration,end,enhance,expression,fadeInTime,fadeOutTime,fadeTime,fanchor,fft,fm:fm$1,fmattack,fmdecay,fmenv,fmh,fmi,fmrelease,fmsustain,fmvelocity,fmwave,frameRate,frames,freeze,freq:freq$1,fshift,fshiftnote,fshiftphase,ftype,gain,gat,gate,getControlName,harmonic,hbrick,hcutoff,hold,hours,hp,hpa,hpattack,hpd,hpdc,hpdecay,hpdepth,hpdepthfreq,hpdepthfrequency,hpe,hpenv,hpf,hpq,hpr,hprate,hprelease,hps,hpshape,hpskew,hpsustain,hpsync,hresonance,imag,ir,irbegin,iresponse,irspeed,isControlName,kcutoff,krush,label,lbrick,legato,leslie,lfo,lock,loop,loopBegin,loopEnd,loopb,loope,lp,lpa,lpattack,lpd,lpdc,lpdecay,lpdepth,lpdepthfrequency,lpe,lpenv,lpf,lpq,lpr,lprate,lprelease,lps,lpshape,lpskew,lpsustain,lpsync,lrate,lsize,midibend,midichan,midicmd,midimap,midiport,miditouch,minutes,mode:mode$1,mtranspose,n,noise,note:note$2,nrpnn,nrpv,nudge,oct,octave:octave$1,octaveR,octaves,octer,octersub,octersubsub,offset,orbit,oschost,oscport,overgain,overshape,pan,panchor,panorient,panspan,pansplay,panwidth,patt,pattack,pcurve,pdec,pdecay,penv,ph,phasdp,phaser,phasercenter,phaserdepth,phaserrate,phasersweep,phc,phd,phs,pitchJump,pitchJumpTime,polyTouch,postgain,prel,prelease,progNum,psus,psustain,pw,pwrate,pwsweep,rate,rdim,real,registerControl,rel,release,repeatTime,resonance,rfade,ring,ringdf,ringf,rlp,room,roomdim,roomfade,roomlp,roomsize,rsize,s,scram,scrub,seconds,semitone,shape,size,slide,smear:smear$1,songPtr,sound,source,speed,spread,squiz,src,stepsPerOctave,stretch,sus,sustain,sustainpedal,sysex,sysexdata,sysexid,sz,tremolo,tremolodepth,tremolophase,tremoloshape,tremoloskew,tremolosync,triode,tsdelay,uid,unison,unit,v,val,velocity,vib,vibmod,vibrato,vmod,voice,vowel,warp,warpatt,warpattack,warpdc,warpdec,warpdecay,warpdepth,warpenv,warpmode,warprate,warprel,warprelease,warpshape,warpskew,warpsus,warpsustain,warpsync,waveloss,wavetablePhaseRand,wavetablePosition,wavetableWarp,wavetableWarpMode,wt,wtatt,wtattack,wtdc,wtdec,wtdecay,wtdepth,wtenv,wtphaserand,wtrate,wtrel,wtrelease,wtshape,wtskew,wtsus,wtsustain,wtsync,xsdelay,zcrush,zdelay,zmod,znoise,zrand,zzfx},Symbol.toStringTag,{value:"Module"})),left=function(e,o){const[l,d]=e,[O,A]=o,[S,$]=splitAt(d,O);return[[d,l-d],[zipWith((F,E)=>F.concat(E),S,A),$]]},right=function(e,o){const[l,d]=e,[O,A]=o,[S,$]=splitAt(l,A);return[[l,d-l],[zipWith((E,L)=>E.concat(L),O,S),$]]},_bjorklund=function(e,o){const[l,d]=e;return Math.min(l,d)<=1?[e,o]:_bjorklund(...l>d?left(e,o):right(e,o))},bjorklund=function(e,o){const l=e<0,d=Math.abs(e),O=o-d,A=Array(d).fill([1]),S=Array(O).fill([0]),$=_bjorklund([d,O],[A,S]),F=flatten($[1][0]).concat(flatten($[1][1]));return l?F.map(E=>1-E):F},_euclidRot=function(e,o,l){const d=bjorklund(e,o);return l?rotate$2(d,-l):d},euclid=register("euclid",function(e,o,l){return l.struct(_euclidRot(e,o,0))}),bjork=register("bjork",function(e,o){Array.isArray(e)||(e=[e]);const[l,d=l,O=0]=e;return o.struct(_euclidRot(l,d,O))}),{euclidrot,euclidRot}=register(["euclidrot","euclidRot"],function(e,o,l,d){return d.struct(_euclidRot(e,o,l))}),_euclidLegato=function(e,o,l,d){if(e<1)return silence;const A=_euclidRot(e,o,0).join("").split("1").slice(1).map(S=>[S.length+1,!0]);return d.struct(timeCat(...A)).late(Fraction(l).div(o))},euclidLegato=register(["euclidLegato"],function(e,o,l){return _euclidLegato(e,o,0,l)}),euclidLegatoRot=register(["euclidLegatoRot"],function(e,o,l,d){return _euclidLegato(e,o,l,d)}),{euclidish,eish}=register(["euclidish","eish"],function(e,o,l,d){const O=_morph(bjorklund(e,o),new Array(e).fill(1),l);return d.struct(O).setSteps(o)});function createClock(e,o,l=.05,d=.1,O=.1,A=globalThis.setInterval,S=globalThis.clearInterval,$=!0){let F=0,E=0,L=10**4,N=.01;const V=ie=>l=ie(l);O=O||d/2;const B=()=>{const ie=e(),ae=ie+d+O;for(E===0&&(E=ie+N);E<ae;)E=$?Math.round(E*L)/L:E,o(E,l,F,ie),E+=l,F++};let U;const q=()=>{ee(),B(),U=A(B,d*1e3)},ee=()=>{U!==void 0&&S(U),U=void 0};return{setDuration:V,start:q,stop:()=>{F=0,E=0,ee()},pause:()=>ee(),duration:l,interval:d,getPhase:()=>E,minLatency:N}}function steady(e){return new Pattern$1(o=>[new Hap(void 0,o.span,e)])}const signal=e=>{const o=l=>[new Hap(void 0,l.span,e(l.span.begin))];return new Pattern$1(o)},saw=signal(e=>e%1),saw2=saw.toBipolar(),isaw=signal(e=>1-e%1),isaw2=isaw.toBipolar(),sine2=signal(e=>Math.sin(Math.PI*2*e)),sine=sine2.fromBipolar(),cosine=sine._early(Fraction(1).div(4)),cosine2=sine2._early(Fraction(1).div(4)),square=signal(e=>Math.floor(e*2%2)),square2=square.toBipolar(),tri=fastcat(saw,isaw),tri2=fastcat(saw2,isaw2),itri=fastcat(isaw,saw),itri2=fastcat(isaw2,saw2),time$1=signal(id);let _mouseY=0,_mouseX=0;typeof window<"u"&&document.addEventListener("mousemove",e=>{_mouseY=e.clientY/document.body.clientHeight,_mouseX=e.clientX/document.body.clientWidth});const mousey=signal(()=>_mouseY),mouseY=signal(()=>_mouseY),mousex=signal(()=>_mouseX),mouseX=signal(()=>_mouseX),xorwise=e=>{const o=e<<13^e,l=o>>17^o;return l<<5^l},_frac=e=>e-Math.trunc(e),timeToIntSeed=e=>xorwise(Math.trunc(_frac(e/300)*536870912)),intSeedToRand=e=>e%536870912/536870912,timeToRand=e=>Math.abs(intSeedToRand(timeToIntSeed(e))),timeToRandsPrime=(e,o)=>{const l=[];for(let d=0;d<o;++d)l.push(intSeedToRand(e)),e=xorwise(e);return l},timeToRands=(e,o)=>timeToRandsPrime(timeToIntSeed(e),o),run=e=>saw.range(0,e).round().segment(e),binary=e=>{const o=reify(e).log2(0).floor().add(1);return binaryN(e,o)},binaryN=(e,o=16)=>{o=reify(o);const l=run(o).mul(-1).add(o.sub(1));return reify(e).segment(o).brshift(l).band(pure(1))},binaryL=e=>{const o=reify(e).log2(0).floor().add(1);return binaryNL(e,o)},binaryNL=(e,o=16)=>reify(e).withValue(l=>d=>{const O=[];for(let A=d-1;A>=0;A--)O.push(l>>A&1);return O}).appLeft(reify(o)),randL=e=>signal(o=>l=>timeToRands(o,l).map(Math.abs)).appLeft(reify(e)),randrun=e=>signal(o=>{const d=timeToRands(o.floor().add(.5),e).map((A,S)=>[A,S]).sort((A,S)=>(A[0]>S[0])-(A[0]<S[0])).map(A=>A[1]),O=o.cyclePos().mul(e).floor()%e;return d[O]})._segment(e),_rearrangeWith=(e,o,l)=>{const d=[...Array(o).keys()].map(O=>l.zoom(Fraction(O).div(o),Fraction(O+1).div(o)));return e.fmap(O=>d[O].repeatCycles(o)._fast(o)).innerJoin()},shuffle$2=register("shuffle",(e,o)=>_rearrangeWith(randrun(e),e,o)),scramble=register("scramble",(e,o)=>_rearrangeWith(_irand(e)._segment(e),e,o)),rand=signal(timeToRand),rand2=rand.toBipolar(),_brandBy=e=>rand.fmap(o=>o<e),brandBy=e=>reify(e).fmap(_brandBy).innerJoin(),brand=_brandBy(.5),_irand=e=>rand.fmap(o=>Math.trunc(o*e)),irand=e=>reify(e).fmap(_irand).innerJoin(),__chooseWith=(e,o)=>(o=o.map(reify),o.length==0?silence:e.range(0,o.length).fmap(l=>{const d=Math.min(Math.max(Math.floor(l),0),o.length-1);return o[d]})),chooseWith=(e,o)=>__chooseWith(e,o).outerJoin(),chooseInWith=(e,o)=>__chooseWith(e,o).innerJoin(),choose=(...e)=>chooseWith(rand,e),chooseIn=(...e)=>chooseInWith(rand,e),chooseOut=choose;Pattern$1.prototype.choose=function(...e){return chooseWith(this,e)},Pattern$1.prototype.choose2=function(...e){return chooseWith(this.fromBipolar(),e)};const chooseCycles=(...e)=>chooseInWith(rand.segment(1),e),randcat=chooseCycles,_wchooseWith=function(e,...o){const l=o.map($=>reify($[0])),d=[];let O=pure(0);for(const $ of o)O=O.add($[1]),d.push(O);const A=sequenceP(d),S=function($){const F=O.mul($);return A.fmap(E=>L=>l[E.findIndex(N=>N>L,E)]).appLeft(F)};return e.bind(S)},wchooseWith=(...e)=>_wchooseWith(...e).outerJoin(),wchoose=(...e)=>wchooseWith(rand,...e),wchooseCycles=(...e)=>_wchooseWith(rand.segment(1),...e).innerJoin(),wrandcat=wchooseCycles;function _perlin(e){let o=Math.floor(e),l=o+1;const d=S=>6*S**5-15*S**4+10*S**3;return(S=>$=>F=>$+d(S)*(F-$))(e-o)(timeToRand(o))(timeToRand(l))}const perlinWith=e=>e.fmap(_perlin);function _berlin(e){const o=Math.floor(e),l=o+1,d=timeToRand(o),O=timeToRand(l)+d,A=(e-o)/(l-o);return(($,F,E)=>$+(F-$)*E)(d,O,A)/2}const berlinWith=e=>e.fmap(_berlin),perlin=perlinWith(time$1.fmap(e=>Number(e))),berlin=berlinWith(time$1.fmap(e=>Number(e))),degradeByWith=register("degradeByWith",(e,o,l)=>l.fmap(d=>O=>d).appLeft(e.filterValues(d=>d>o)),!0,!0),degradeBy=register("degradeBy",function(e,o){return o._degradeByWith(rand,e)},!0,!0),degrade=register("degrade",e=>e._degradeBy(.5),!0,!0),undegradeBy=register("undegradeBy",function(e,o){return o._degradeByWith(rand.fmap(l=>1-l),e)},!0,!0),undegrade=register("undegrade",e=>e._undegradeBy(.5),!0,!0),sometimesBy=register("sometimesBy",function(e,o,l){return reify(e).fmap(d=>stack(l._degradeBy(d),o(l._undegradeBy(1-d)))).innerJoin()}),sometimes=register("sometimes",function(e,o){return o._sometimesBy(.5,e)}),someCyclesBy=register("someCyclesBy",function(e,o,l){return reify(e).fmap(d=>stack(l._degradeByWith(rand._segment(1),d),o(l._degradeByWith(rand.fmap(O=>1-O)._segment(1),1-d)))).innerJoin()}),someCycles=register("someCycles",function(e,o){return o._someCyclesBy(.5,e)}),often=register("often",function(e,o){return o.sometimesBy(.75,e)}),rarely=register("rarely",function(e,o){return o.sometimesBy(.25,e)}),almostNever=register("almostNever",function(e,o){return o.sometimesBy(.1,e)}),almostAlways=register("almostAlways",function(e,o){return o.sometimesBy(.9,e)}),never=register("never",function(e,o){return o}),always=register("always",function(e,o){return e(o)});function _keyDown(e){Array.isArray(e)===!1&&(e=[e]);const o=getCurrentKeyboardState();return e.every(l=>{const d=keyAlias.get(l)??l;return o[d]})}const whenKey=register("whenKey",function(e,o,l){return l.when(_keyDown(e),o)}),keyDown=register("keyDown",function(e){return e.fmap(_keyDown)}),_pick=function(e,o,l=!0){const d=Array.isArray(e),O=Object.keys(e).length;return e=objectMap(e,reify),O===0?silence:o.fmap(A=>{let S=A;return d&&(S=l?Math.round(S)%O:clamp$1(Math.round(S),0,e.length-1)),e[S]})},pick=function(e,o){return Array.isArray(o)&&([o,e]=[e,o]),__pick(e,o)},__pick=register("pick",function(e,o){return _pick(e,o,!1).innerJoin()}),pickmod=register("pickmod",function(e,o){return _pick(e,o,!0).innerJoin()}),pickF=register("pickF",function(e,o,l){return l.apply(pick(e,o))}),pickmodF=register("pickmodF",function(e,o,l){return l.apply(pickmod(e,o))}),pickOut=register("pickOut",function(e,o){return _pick(e,o,!1).outerJoin()}),pickmodOut=register("pickmodOut",function(e,o){return _pick(e,o,!0).outerJoin()}),pickRestart=register("pickRestart",function(e,o){return _pick(e,o,!1).restartJoin()}),pickmodRestart=register("pickmodRestart",function(e,o){return _pick(e,o,!0).restartJoin()}),pickReset=register("pickReset",function(e,o){return _pick(e,o,!1).resetJoin()}),pickmodReset=register("pickmodReset",function(e,o){return _pick(e,o,!0).resetJoin()}),{inhabit,pickSqueeze}=register(["inhabit","pickSqueeze"],function(e,o){return _pick(e,o,!1).squeezeJoin()}),{inhabitmod,pickmodSqueeze}=register(["inhabitmod","pickmodSqueeze"],function(e,o){return _pick(e,o,!0).squeezeJoin()}),squeeze=(e,o)=>(o=o.map(reify),o.length==0?silence:e.fmap(l=>{const d=_mod$2(Math.round(l),o.length);return o[d]}).squeezeJoin());let synth;try{synth=window?.speechSynthesis}catch(e){console.warn("cannot use window: not in browser?")}let allVoices=synth?.getVoices();function triggerSpeech(e,o,l){synth.cancel();const d=new SpeechSynthesisUtterance(e);d.lang=o,allVoices=synth.getVoices();const O=allVoices.filter(A=>A.lang.includes(o));typeof l=="number"?d.voice=O[l%O.length]:typeof l=="string"&&(d.voice=O.find(A=>A.name===A)),speechSynthesis.speak(d)}const speak=register("speak",function(e,o,l){return l.onTrigger(d=>{triggerSpeech(d.value,e,o)})}),strudelScope={},evalScope$1=async(...e)=>{const o=await Promise.allSettled(e),l=o.filter(d=>d.status==="fulfilled").map(d=>d.value);return o.forEach((d,O)=>{d.status==="rejected"&&console.warn(`evalScope: module with index ${O} could not be loaded:`,d.reason)}),l.forEach(d=>{Object.entries(d).forEach(([O,A])=>{globalThis[O]=A,strudelScope[O]=A})}),l};function safeEval(e,o={}){const{wrapExpression:l=!0,wrapAsync:d=!0}=o;l&&(e=`{${e}}`),d&&(e=`(async ()=>${e})()`);const O=`"use strict";return (${e})`;return Function(O)()}const evaluate$1=async(e,o,l)=>{let d={};if(o){const S=o(e,l);e=S.output,d=S}return{mode:"javascript",pattern:await safeEval(e,{wrapExpression:!!o}),meta:d}},jsContent=`(function(){"use strict";function L(){return performance.now()*.001}let _=0,r=0,o=.5;const h=new Map,m=.1,M=new BroadcastChannel("strudeltick"),b=(s,e)=>{M.postMessage({type:s,payload:e})},C=E(L,(s,e,t,n)=>{const i=r*e,d=s-n,c=n+d,u=i*o,l=_+u,g=n-c-e,f=e*o,p=l+f,y=l+g*o;b("tick",{begin:l,end:p,cps:o,time:n,cycle:y}),r++},m);let k=!1;const I=s=>{h.set(s,{started:!0}),!k&&(C.start(),k=!0)},A=async s=>{h.set(s,{started:!1});const e=Array.from(h.values()).some(t=>t.started);!k||e||(C.stop(),w(0),k=!1)},w=s=>{r=0,_=s},D=s=>{const{type:e,payload:t}=s;switch(e){case"cpschange":{if(t.cps!==o){const n=r*m;_=_+n*o,o=t.cps,r=0}break}case"setcycle":{w(t.cycle);break}case"toggle":{t.started?I(s.id):A(s.id);break}}};self.onconnect=function(s){const e=s.ports[0];e.addEventListener("message",function(t){D(t.data)}),e.start()};function E(s,e,t=.05,n=.1,i=.1){let d=0,c=0,u=10**4,l=.01;const g=a=>t=a(t);i=i||n/2;const f=()=>{const a=s(),O=a+n+i;for(c===0&&(c=a+l);c<O;)c=Math.round(c*u)/u,c>=a&&e(c,t,d,a),c<a&&console.log("TOO LATE",c),c+=t,d++};let p;const y=()=>{T(),f(),p=setInterval(f,n*1e3)},T=()=>p!==void 0&&clearInterval(p);return{setDuration:g,start:y,stop:()=>{d=0,c=0,T()},pause:()=>T(),duration:t,interval:n,getPhase:()=>c,minLatency:l}}})();
`,blob=typeof self<"u"&&self.Blob&&new Blob(["(self.URL || self.webkitURL).revokeObjectURL(self.location.href);",jsContent],{type:"text/javascript;charset=utf-8"});function WorkerWrapper(e){let o;try{if(o=blob&&(self.URL||self.webkitURL).createObjectURL(blob),!o)throw"";const l=new Worker(o,{name:e?.name});return l.addEventListener("error",()=>{(self.URL||self.webkitURL).revokeObjectURL(o)}),l}catch{return new Worker("data:text/javascript;charset=utf-8,"+encodeURIComponent(jsContent),{name:e?.name})}}class NeoCyclist{constructor({onTrigger:o,onToggle:l,getTime:d}){this.started=!1,this.cps=.5,this.getTime=d,this.time_at_last_tick_message=0,this.collator=new ClockCollator({getTargetClockTime:d}),this.onToggle=l,this.latency=.1,this.cycle=0,this.id=Math.round(Date.now()*Math.random()),this.worker=new SharedWorker(WorkerWrapper),this.worker.port.start(),this.channel=new BroadcastChannel("strudeltick");const O=S=>{const{cps:$,begin:F,end:E,cycle:L,time:N}=S;this.cps=$,this.cycle=L;const V=this.collator.calculateOffset(N)+N;A(F,E,V),this.time_at_last_tick_message=V},A=(S,$,F)=>{if(this.started===!1)return;this.pattern.queryArc(S,$,{_cps:this.cps,cyclist:"neocyclist"}).forEach(L=>{if(L.hasOnset()){const V=cycleToSeconds$1(L.whole.begin-this.cycle,this.cps)+F+this.latency,B=cycleToSeconds$1(L.duration,this.cps);o?.(L,0,B,this.cps,V)}})};this.channel.onmessage=S=>{if(!this.started)return;const{payload:$,type:F}=S.data;switch(F){case"tick":O($)}}}sendMessage(o,l){this.worker.port.postMessage({type:o,payload:l,id:this.id})}now(){const o=(this.getTime()-this.time_at_last_tick_message)*this.cps;return this.cycle+o}setCps(o=1){this.sendMessage("cpschange",{cps:o})}setCycle(o){this.sendMessage("setcycle",{cycle:o})}setStarted(o){this.sendMessage("toggle",{started:o}),this.started=o,this.onToggle?.(o)}start(){logger$2("[cyclist] start"),this.setStarted(!0)}stop(){logger$2("[cyclist] stop"),this.collator.reset(),this.setStarted(!1)}setPattern(o,l=!1){this.pattern=o,l&&!this.started&&this.start()}log(o,l,d){const O=d.filter(A=>A.hasOnset());console.log(`${o.toFixed(4)} - ${l.toFixed(4)} ${Array(O.length).fill("I").join("")}`)}}class Cyclist{constructor({interval:o,onTrigger:l,onToggle:d,onError:O,getTime:A,latency:S=.1,setInterval:$,clearInterval:F,beforeStart:E}){this.started=!1,this.beforeStart=E,this.cps=.5,this.num_ticks_since_cps_change=0,this.lastTick=0,this.lastBegin=0,this.lastEnd=0,this.getTime=A,this.num_cycles_at_cps_change=0,this.seconds_at_cps_change,this.onToggle=d,this.latency=S,this.clock=createClock(A,(L,N,V,B)=>{this.num_ticks_since_cps_change===0&&(this.num_cycles_at_cps_change=this.lastEnd,this.seconds_at_cps_change=L),this.num_ticks_since_cps_change++;const q=this.num_ticks_since_cps_change*N*this.cps;try{const ee=this.lastEnd;this.lastBegin=ee;const le=this.num_cycles_at_cps_change+q;if(this.lastEnd=le,this.lastTick=L,L<B){console.log("skip query: too late");return}this.pattern.queryArc(ee,le,{_cps:this.cps,cyclist:"cyclist"}).forEach(_e=>{if(_e.hasOnset()){const ie=(_e.whole.begin-this.num_cycles_at_cps_change)/this.cps+this.seconds_at_cps_change+S,ae=_e.duration/this.cps,fe=ie-L;l?.(_e,fe,ae,this.cps,ie),_e.value.cps!==void 0&&this.cps!=_e.value.cps&&(this.cps=_e.value.cps,this.num_ticks_since_cps_change=0)}})}catch(ee){errorLogger$1(ee),O?.(ee)}},o,.1,.1,$,F)}now(){if(!this.started)return 0;const o=this.getTime()-this.lastTick-this.clock.duration;return this.lastBegin+o*this.cps}setStarted(o){this.started=o,this.onToggle?.(o)}async start(){if(await this.beforeStart?.(),this.num_ticks_since_cps_change=0,this.num_cycles_at_cps_change=0,!this.pattern)throw new Error("Scheduler: no pattern set! call .setPattern first.");logger$2("[cyclist] start"),this.clock.start(),this.setStarted(!0)}pause(){logger$2("[cyclist] pause"),this.clock.pause(),this.setStarted(!1)}stop(){logger$2("[cyclist] stop"),this.clock.stop(),this.lastEnd=0,this.setStarted(!1)}async setPattern(o,l=!1){this.pattern=o,l&&!this.started&&await this.start()}setCps(o=.5){this.cps!==o&&(this.cps=o,this.num_ticks_since_cps_change=0)}log(o,l,d){const O=d.filter(A=>A.hasOnset());console.log(`${o.toFixed(4)} - ${l.toFixed(4)} ${Array(O.length).fill("I").join("")}`)}}let time;function getTime(){if(!time)throw new Error("no time set! use setTime to define a time source");return time()}function setTime(e){time=e}function repl$1({defaultOutput:e,onEvalError:o,beforeEval:l,beforeStart:d,afterEval:O,getTime:A,transpiler:S,onToggle:$,editPattern:F,onUpdateState:E,sync:L=!1,setInterval:N,clearInterval:V,id:B,mondo:U=!1}){const q={schedulerError:void 0,evalError:void 0,code:"// LOADING",activeCode:"// LOADING",pattern:void 0,miniLocations:[],widgets:[],pending:!1,started:!1},ee={id:B},le=Fe=>{Object.assign(q,Fe),q.isDirty=q.code!==q.activeCode,q.error=q.evalError||q.schedulerError,E?.(q)},ue={onTrigger:getTrigger({defaultOutput:e,getTime:A}),getTime:A,onToggle:Fe=>{le({started:Fe}),$?.(Fe)},setInterval:N,clearInterval:V,beforeStart:d},_e=L&&typeof SharedWorker<"u"?new NeoCyclist(ue):new Cyclist(ue);let ie={},ae=0,fe;const Oe=function(){return ie={},ae=0,fe=void 0,silence};function ve(Fe){return Fe._Pattern?Fe.__pure:Fe}const Re=async(Fe,pt=!0)=>(Fe=F?.(Fe)||Fe,await _e.setPattern(Fe,pt),Fe);setTime(()=>_e.now());const Me=()=>_e.stop(),Ye=()=>_e.start(),Te=()=>_e.pause(),Ge=()=>_e.toggle(),Ne=Fe=>(_e.setCps(ve(Fe)),silence),Je=Fe=>(_e.setCps(ve(Fe)/60),silence);let je=[];const qe=function(Fe){return je.push(Fe),silence},et=function(Fe){return fe=Fe,silence},Tt=()=>{Pattern$1.prototype.p=function(pt){return typeof pt=="string"&&(pt.startsWith("_")||pt.endsWith("_"))?silence:(pt.includes("$")&&(pt=`${pt}${ae}`,ae++),ie[pt]=this,this)},Pattern$1.prototype.q=function(pt){return silence};try{for(let pt=1;pt<10;++pt)Object.defineProperty(Pattern$1.prototype,`d${pt}`,{get(){return this.p(pt)},configurable:!0}),Object.defineProperty(Pattern$1.prototype,`p${pt}`,{get(){return this.p(pt)},configurable:!0}),Pattern$1.prototype[`q${pt}`]=silence}catch(pt){console.warn("injectPatternMethods: error:",pt)}const Fe=register("cpm",function(pt,we){return we._fast(pt/60/_e.cps)});return evalScope$1({all:qe,each:et,hush:Oe,cpm:Fe,setCps:Ne,setcps:Ne,setCpm:Je,setcpm:Je})};return{scheduler:_e,evaluate:async(Fe,pt=!0,we=!0)=>{if(!Fe)throw new Error("no code to evaluate");try{le({code:Fe,pending:!0}),await Tt(),setTime(()=>_e.now()),await l?.({code:Fe}),je=[],we&&Oe(),U&&(Fe=`mondolang\`${Fe}\``);let{pattern:xt,meta:Ct}=await evaluate$1(Fe,S,ee);if(Object.keys(ie).length){let Ze=[],St=!1;for(const[Lt,cn]of Object.entries(ie)){const sn=Lt.length>1&&Lt.startsWith("S");if(sn&&St===!1&&(Ze=[],St=!0),!St||St&&sn){const Xt=cn.withState(on=>on.setControls({id:Lt}));Ze.push(Xt)}}fe&&(Ze=Ze.map(Lt=>fe(Lt))),xt=stack(...Ze)}else fe&&(xt=fe(xt));if(je.length)for(const Ze of je)xt=Ze(xt);return isPattern(xt)||(xt=silence),logger$2("[eval] code updated"),xt=await Re(xt,pt),le({miniLocations:Ct?.miniLocations||[],widgets:Ct?.widgets||[],activeCode:Fe,pattern:xt,evalError:void 0,schedulerError:void 0,pending:!1}),O?.({code:Fe,pattern:xt,meta:Ct}),xt}catch(xt){logger$2(`[eval] error: ${xt.message}`,"error"),console.error(xt),le({evalError:xt,pending:!1}),o?.(xt)}},start:Ye,stop:Me,pause:Te,setCps:Ne,setPattern:Re,setCode:Fe=>le({code:Fe}),toggle:Ge,state:q}}const getTrigger=({getTime:e,defaultOutput:o})=>async(l,d,O,A,S)=>{try{(!l.context.onTrigger||!l.context.dominantTrigger)&&await o(l,d,O,A,S),l.context.onTrigger&&await l.context.onTrigger(l,e(),A,S)}catch($){errorLogger$1($,"getTrigger")}},backgroundImage=function(e,o={}){const l=document.getElementById("code"),d="background-image:url("+e+");background-size:contain;";l.style=d;const{className:O}=l,A=(F,E)=>{({style:()=>l.style=d+";"+E,className:()=>l.className=E+" "+O})[F]()},S=Object.entries(o).filter(([F,E])=>typeof E=="function");Object.entries(o).filter(([F,E])=>typeof E=="string").forEach(([F,E])=>A(F,E)),S.length},cleanupUi=()=>{const e=document.getElementById("code");e&&(e.style="")};logger$2("🌀 @strudel/core loaded 🌀"),globalThis._strudelLoaded&&console.warn(`@strudel/core was loaded more than once...
This might happen when you have multiple versions of strudel installed. 
Please check with "npm ls @strudel/core".`),globalThis._strudelLoaded=!0;const strudelCore=Object.freeze(Object.defineProperty({__proto__:null,ClockCollator,Cyclist,Fraction,Hap,Pattern:Pattern$1,State,TimeSpan,__chooseWith,_brandBy,_fitslice,_irand,_keyDown,_match,_mod:_mod$2,_morph,_polymeterListSteps,_retime,_slices,accelerate,activeLabel,ad,add:add$7,adsr,almostAlways,almostNever,always,amp,analyze,anchor,and,apply,applyN,ar,arp,arpWith,arrange,as,att,attack,averageArray,backgroundImage,band,bandf,bandq,bank,base64ToUnicode,bbexpr,bbst,beat,begin,berlin,berlinWith,binary,binaryL,binaryN,binaryNL,bind,binshift,bite,bjork,bjorklund,blshift,bor,bp,bpa,bpattack,bpd,bpdc,bpdecay,bpdepth,bpdepthfrequency,bpe,bpenv,bpf,bpq,bpr,bprate,bprelease,bps,bpshape,bpskew,bpsustain,bpsync,brak,brand,brandBy,brshift,bxor,bypass,byteBeatExpression,byteBeatStartTime,calculateSteps,cat,ccn,ccv,ceil,ch,channel,channels,choose,chooseCycles,chooseIn,chooseInWith,chooseOut,chooseWith,chop,chord:chord$1,chorus,chunk,chunkBack,chunkBackInto,chunkInto,chunkback,chunkbackinto,chunkinto,clamp:clamp$1,cleanupUi,clip,coarse,code2hash,color,colour,comb,compose,compress,compressSpan,compressor,compressorAttack,compressorKnee,compressorRatio,compressorRelease,compressspan,constant,contract,control,controls,cosine,cosine2,cpm,cps,createClock,createParam,createParams,crush,ctf,ctlNum,ctranspose,curry,curve,cut,cutoff,cycleToSeconds:cycleToSeconds$1,dec,decay,degrade,degradeBy,degradeByWith,degree,delay,delayfb,delayfeedback,delayspeed,delaysync,delayt,delaytime,deltaSlide,det,detune,dfb,dict,dictionary:dictionary$5,dist:dist$2,distort,distorttype,distortvol,div,djf,drawLine,drive,drop,dry,ds,dt,duck,duckattack,duckdepth,duckonset,dur,duration,early,echo,echoWith,echowith,eish,end,enhance,eq,eqt,errorLogger:errorLogger$1,euclid,euclidLegato,euclidLegatoRot,euclidRot,euclidish,euclidrot,evalScope:evalScope$1,evaluate:evaluate$1,every,expand,expression,extend,fadeInTime,fadeOutTime,fadeTime,fanchor,fast,fastChunk,fastGap,fastcat,fastchunk,fastgap,fft,filter:filter$1,filterWhen,firstOf,fit,flatten,floor,fm:fm$1,fmattack,fmdecay,fmenv,fmh,fmi,fmrelease,fmsustain,fmvelocity,fmwave,focus,focusSpan,focusspan,fractionalArgs,frameRate,frames,freeze,freq:freq$1,freqToMidi:freqToMidi$2,fromBipolar,fshift,fshiftnote,fshiftphase,ftype,func,gain,gap,gat,gate,getAccidentalsOffset:getAccidentalsOffset$1,getControlName,getCurrentKeyboardState,getEventOffsetMs,getFreq,getFrequency,getPerformanceTimeSeconds,getPlayableNoteValue,getSoundIndex:getSoundIndex$1,getTime,getTrigger,grow,gt,gte,harmonic,hash2code,hbrick,hcutoff,hold,hours,hp,hpa,hpattack,hpd,hpdc,hpdecay,hpdepth,hpdepthfreq,hpdepthfrequency,hpe,hpenv,hpf,hpq,hpr,hprate,hprelease,hps,hpshape,hpskew,hpsustain,hpsync,hresonance,hsl,hsla,hurry,id,imag,inhabit,inhabitmod,innerBind,inside,inv,invert:invert$1,ir,irand,irbegin,iresponse,irspeed,isControlName,isNote,isNoteWithOctave,isPattern,isaw,isaw2,iter,iterBack,iterback,itri,itri2,jux,juxBy,juxby,kcutoff,keep,keepif,keyAlias,keyDown,krush,label,lastOf,late,lbrick,legato,leslie,lfo,linger,listRange,lock,logKey,logger:logger$2,loop,loopAt,loopAtCps,loopBegin,loopEnd,loopat,loopatcps,loopb,loope,lp,lpa,lpattack,lpd,lpdc,lpdecay,lpdepth,lpdepthfrequency,lpe,lpenv,lpf,lpq,lpr,lprate,lprelease,lps,lpshape,lpskew,lpsustain,lpsync,lrate,lsize,lt,lte,mapArgs,mask,midi2note:midi2note$1,midiToFreq:midiToFreq$2,midibend,midichan,midicmd,midimap,midiport,miditouch,minutes,mod:mod$3,mode:mode$1,morph,mouseX,mouseY,mousex,mousey,mtranspose,mul,n,nanFallback:nanFallback$1,ne,net,never,noise,note:note$2,noteToMidi:noteToMidi$1,nothing,nrpnn,nrpv,nudge,numeralArgs,objectMap,oct,octave:octave$1,octaveR,octaves,octer,octersub,octersubsub,off,offset,often,or,orbit,oschost,oscport,outerBind,outside,overgain,overshape,pace,pairs,palindrome,pan,panchor,panorient,panspan,pansplay,panwidth,parray,parseFractional,parseNumeral,partials,patt,pattack,pcurve,pdec,pdecay,penv,perlin,perlinWith,ph,phasdp,phaser,phasercenter,phaserdepth,phaserrate,phasersweep,phases,phc,phd,phs,pick,pickF,pickOut,pickReset,pickRestart,pickSqueeze,pickmod,pickmodF,pickmodOut,pickmodReset,pickmodRestart,pickmodSqueeze,pipe,pitchJump,pitchJumpTime,ply,plyForEach,plyWith,pm,polyBind,polyTouch,polymeter,polyrhythm,postgain,pow,pr,prel,prelease,press,pressBy,progNum,psus,psustain,pure,pw,pwrate,pwsweep,rand,rand2,randL,randcat,randrun,range:range$2,range2,rangex,rarely,rate,ratio,rdim,real,ref:ref$1,register,registerControl,reify,rel,release,removeUndefineds,repeatCycles,repeatTime,repl:repl$1,replicate,resonance,rev,revv,rfade,rib,ribbon,ring,ringdf,ringf,rlp,room,roomdim,roomfade,roomlp,roomsize,rotate:rotate$2,round,rsize,run,s,s_add,s_alt,s_cat,s_contract,s_expand,s_extend,s_polymeter,s_sub,s_taper,s_taperlist,s_tour,s_zip,saw,saw2,scram,scramble,scrub,seconds,seg,segment,semitone,seq,seqPLoop,sequence,sequenceP,set,setStringParser,setTime,shape,shrink,shrinklist,shuffle:shuffle$2,signal,silence,sine,sine2,size,slice,slide,slow,slowChunk,slowcat,slowcatPrime,slowchunk,smear:smear$1,sol2note,someCycles,someCyclesBy,sometimes,sometimesBy,songPtr,sound,source,sparsity,speak,speed,splice,splitAt,spread,square,square2,squeeze,squeezeBind,squiz,src,stack,stackBy,stackCentre,stackLeft,stackRight,steady,stepBind,stepalt,stepcat,steps:steps$2,stepsPerOctave,stretch,striate,stringifyValues,struct,strudelScope,stut,stutWith,stutwith,sub,superimpose,sus,sustain,sustainpedal,swing,swingBy,sysex,sysexdata,sysexid,sz,take,time:time$1,timeCat,timecat,toBipolar,tokenizeNote:tokenizeNote$3,tour,tremolo,tremolodepth,tremolophase,tremoloshape,tremoloskew,tremolosync,tri,tri2,triode,tsdelay,uid,undegrade,undegradeBy,unicodeToBase64,uniq,uniqsort,uniqsortr,unison,unit,v,val,valueToMidi:valueToMidi$1,velocity,vib,vibmod,vibrato,vmod,voice,vowel,warp,warpatt,warpattack,warpdc,warpdec,warpdecay,warpdepth,warpenv,warpmode,warprate,warprel,warprelease,warpshape,warpskew,warpsus,warpsustain,warpsync,waveloss,wavetablePhaseRand,wavetablePosition,wavetableWarp,wavetableWarpMode,wchoose,wchooseCycles,when,whenKey,withValue,within,wrandcat,wt,wtatt,wtattack,wtdc,wtdec,wtdecay,wtdepth,wtenv,wtphaserand,wtrate,wtrel,wtrelease,wtshape,wtskew,wtsus,wtsustain,wtsync,xfade,xsdelay,zcrush,zdelay,zip,zipWith,zmod,znoise,zoom,zoomArc,zoomarc,zrand,zzfx},Symbol.toStringTag,{value:"Module"})),randOffset=3e-4,applyOptions=(e,o)=>(l,d)=>{const S=e.source_[d].options_?.ops,$=l.__steps_source;if(S)for(const F of S)switch(F.type_){case"stretch":{const E=["fast","slow"],{type:L,amount:N}=F.arguments_;if(!E.includes(L))throw new Error(`mini: stretch: type must be one of ${E.join("|")} but got ${L}`);l=reify(l)[L](o(N));break}case"replicate":{const{amount:E}=F.arguments_;l=reify(l),l=l._repeatCycles(E)._fast(E);break}case"bjorklund":{F.arguments_.rotation?l=l.euclidRot(o(F.arguments_.pulse),o(F.arguments_.step),o(F.arguments_.rotation)):l=l.euclid(o(F.arguments_.pulse),o(F.arguments_.step));break}case"degradeBy":{l=reify(l)._degradeByWith(rand.early(randOffset*F.arguments_.seed),F.arguments_.amount??.5);break}case"tail":{const E=o(F.arguments_.element);l=l.fmap(L=>N=>Array.isArray(L)?[...L,N]:[L,N]).appLeft(E);break}case"range":{const E=o(F.arguments_.element);l=reify(l);const L=(V,B,U=1)=>Array.from({length:Math.abs(B-V)/U+1},(q,ee)=>V<B?V+ee*U:V-ee*U);l=((V,B)=>V.squeezeBind(U=>B.bind(q=>fastcat(...L(U,q)))))(l,E);break}default:console.warn(`operator "${F.type_}" not implemented`)}return l.__steps_source=l.__steps_source||$,l};function patternifyAST(e,o,l,d=0){l?.(e);const O=A=>patternifyAST(A,o,l,d);switch(e.type_){case"pattern":{const A=e.source_.map(E=>O(E)).map(applyOptions(e,O)),S=e.arguments_.alignment,$=A.filter(E=>E.__steps_source);let F;switch(S){case"stack":{F=stack(...A),$.length&&(F._steps=lcm(...$.map(E=>Fraction(E._steps))));break}case"polymeter_slowcat":{F=stack(...A.map(E=>E._slow(E.__weight))),$.length&&(F._steps=lcm(...$.map(E=>Fraction(E._steps))));break}case"polymeter":{const E=e.arguments_.stepsPerCycle?O(e.arguments_.stepsPerCycle).fmap(N=>Fraction(N)):pure(Fraction(A.length>0?A[0].__weight:1)),L=A.map(N=>N.fast(E.fmap(V=>V.div(N.__weight))));F=stack(...L);break}case"rand":{F=chooseInWith(rand.early(randOffset*e.arguments_.seed).segment(1),A),$.length&&(F._steps=lcm(...$.map(E=>Fraction(E._steps))));break}case"feet":{F=fastcat(...A);break}default:{if(e.source_.some(L=>!!L.options_?.weight)){const L=e.source_.reduce((N,V)=>N.add(V.options_?.weight||Fraction(1)),Fraction(0));F=timeCat(...e.source_.map((N,V)=>[N.options_?.weight||Fraction(1),A[V]])),F.__weight=L,F._steps=L,$.length&&(F._steps=F._steps.mul(lcm(...$.map(N=>Fraction(N._steps)))))}else F=sequence(...A),F._steps=A.length;e.arguments_._steps&&(F.__steps_source=!0)}}return $.length&&(F.__steps_source=!0),F}case"element":return O(e.source_);case"atom":{if(e.source_==="~"||e.source_==="-")return silence;if(!e.location_)return console.warn("no location for",e),e.source_;const A=isNaN(Number(e.source_))?e.source_:Number(e.source_);if(d===-1)return pure(A);const[S,$]=getLeafLocation(o,e,d);return pure(A).withLoc(S,$)}case"stretch":return O(e.source_).slow(O(e.arguments_.amount));default:return console.warn(`node type "${e.type_}" not implemented -> returning silence`),silence}}const getLeafLocation=(e,o,l=0)=>{const{start:d,end:O}=o.location_,A=e?.split("").slice(d.offset,O.offset).join(""),[S=0,$=0]=A?A.split(o.source_).map(F=>F.split("").filter(E=>E===" ").length):[];return[d.offset+S+l,O.offset-$+l]},mini2ast=(e,o=0,l=e)=>{try{return peg$parse(e)}catch(d){const O=[d.location.start.offset+o,d.location.end.offset+o],A=l.slice(0,O[0]).split(`
`).length;throw new Error(`[mini] parse error at line ${A}: ${d.message}`)}},getLeaves=(e,o,l)=>{const d=mini2ast(e,o,l);let O=[];return patternifyAST(d,e,A=>{A.type_==="atom"&&O.push(A)},-1),O},getLeafLocations=(e,o=0,l)=>getLeaves(e,o,l).map(d=>getLeafLocation(e,d,o)),mini=(...e)=>{const o=e.map(l=>{const d=`"${l}"`,O=mini2ast(d);return patternifyAST(O,d)});return sequence(...o)},m$1=(e,o)=>{const l=`"${e}"`,d=mini2ast(l);return patternifyAST(d,l,null,o)},h$1=e=>{const o=mini2ast(e);return patternifyAST(o,e)};function minify(e){return typeof e=="string"?mini(e):reify(e)}function miniAllStrings(){setStringParser(mini)}const strudelMini$1=Object.freeze(Object.defineProperty({__proto__:null,StartRules:peg$allowedStartRules,SyntaxError:peg$SyntaxError,getLeafLocation,getLeafLocations,getLeaves,h:h$1,m:m$1,mini,mini2ast,miniAllStrings,minify,parse:peg$parse,patternifyAST},Symbol.toStringTag,{value:"Module"}));if(typeof DelayNode<"u"){class e extends DelayNode{constructor(l,d,O,A){super(l),d=Math.abs(d),this.delayTime.value=O;const S=l.createGain();S.gain.value=Math.min(Math.abs(A),.995),this.feedback=S.gain;const $=l.createGain();return $.gain.value=d,this.delayGain=$,this.connect(S),this.connect($),S.connect(this),this.connect=F=>$.connect(F),this}start(l){this.delayGain.gain.setValueAtTime(this.delayGain.gain.value,l+this.delayTime.value)}}AudioContext.prototype.createFeedbackDelay=function(o,l,d){return new e(this,o,l,d)}}var reverbGen={};reverbGen.generateReverb=function(e,o){for(var l=e.audioContext||new AudioContext,d=l.sampleRate,O=e.numChannels||2,A=e.decayTime*1.5,S=Math.round(e.decayTime*d),$=Math.round(A*d),F=Math.round((e.fadeInTime||0)*d),E=Math.pow(1/1e3,1/S),L=l.createBuffer(O,$,d),N=0;N<O;N++){for(var V=L.getChannelData(N),B=0;B<$;B++)V[B]=randomSample()*Math.pow(E,B);for(var B=0;B<F;B++)V[B]*=B/F}applyGradualLowpass(L,e.lpFreqStart||0,e.lpFreqEnd||0,e.decayTime,o)},reverbGen.generateGraph=function(e,o,l,d,O){var A=document.createElement("canvas");A.width=o,A.height=l;var S=A.getContext("2d");S.fillStyle="#000",S.fillRect(0,0,A.width,A.height),S.fillStyle="#fff";for(var $=o/e.length,F=l/(O-d),E=0;E<e.length;E++)S.fillRect(E*$,l-(e[E]-d)*F,1,1);return A};var applyGradualLowpass=function(e,o,l,d,O){if(o==0){O(e);return}var A=getAllChannelData(e),S=new OfflineAudioContext(e.numberOfChannels,A[0].length,e.sampleRate),$=S.createBufferSource();$.buffer=e;var F=S.createBiquadFilter();o=Math.min(o,e.sampleRate/2),l=Math.min(l,e.sampleRate/2),F.type="lowpass",F.Q.value=1e-4,F.frequency.setValueAtTime(o,0),F.frequency.linearRampToValueAtTime(l,d),$.connect(F),F.connect(S.destination),$.start(),S.oncomplete=function(E){O(E.renderedBuffer),F.disconnect(),$.disconnect()},S.startRendering(),window.filterNode=F},getAllChannelData=function(e){for(var o=[],l=0;l<e.numberOfChannels;l++)o[l]=e.getChannelData(l);return o},randomSample=function(){return Math.random()*2-1};let log=e=>console.log(e);function errorLogger(e,o="superdough"){process.env.NODE_ENV==="development"&&console.error(e),logger$1(`[${o}] error: ${e.message}`)}const logger$1=(...e)=>log(...e),setLogger=e=>{log=e},tokenizeNote$2=e=>{if(typeof e!="string")return[];const[o,l="",d]=e.match(/^([a-gA-G])([#bsf]*)(-?[0-9]*)$/)?.slice(1)||[];return o?[o,l,d?Number(d):void 0]:[]},chromas$1={c:0,d:2,e:4,f:5,g:7,a:9,b:11},accs$1={"#":1,b:-1,s:1,f:-1},getAccidentalsOffset=e=>e?.split("").reduce((o,l)=>o+accs$1[l],0)||0,noteToMidi=(e,o=3)=>{const[l,d,O=o]=tokenizeNote$2(e);if(!l)throw new Error('not a note: "'+e+'"');const A=chromas$1[l.toLowerCase()],S=getAccidentalsOffset(d);return(Number(O)+1)*12+A+S},midiToFreq$1=e=>Math.pow(2,(e-69)/12)*440,clamp=(e,o,l)=>Math.min(Math.max(e,o),l),freqToMidi$1=e=>12*Math.log(e/440)/Math.LN2+69,valueToMidi=(e,o)=>{if(typeof e!="object")throw new Error("valueToMidi: expected object value");let{freq:l,note:d}=e;return typeof l=="number"?freqToMidi$1(l):typeof d=="string"?noteToMidi(d):typeof d=="number"?d:o};function nanFallback(e,o=0,l){return isNaN(Number(e))?(!l&&logger$1(`"${e}" is not a number, falling back to ${o}`,"warning"),o):e}const _mod$1=(e,o)=>(e%o+o)%o,getSoundIndex=(e,o)=>_mod$1(Math.round(nanFallback(e,0)),o);function cycleToSeconds(e,o){return e/o}function getCommonSampleInfo(e,o){const{s:l,n:d=0}=e;let O=valueToMidi(e,36),A=O-36,S,$=0;if(Array.isArray(o))$=getSoundIndex(d,o.length),S=o[$];else{const E=N=>noteToMidi(N)-O,L=Object.keys(o).filter(N=>!N.startsWith("_")).reduce((N,V,B)=>!N||Math.abs(E(V))<Math.abs(E(N))?V:N,null);A=-E(L),$=getSoundIndex(d,o[L].length),S=o[L][$]}const F=`${l}:${$}`;return{transpose:A,url:S,index:$,midi:O,label:F}}const pickAndRename=(e,o)=>Object.fromEntries(Object.entries(o).map(([l,d])=>[l,e[d]])),getBaseURL=e=>{try{return new URL(".",new URL(e)).href.replace(/\/$/,"")}catch{return e.split("/").slice(0,-1).join("/")}};typeof AudioContext<"u"&&(AudioContext.prototype.adjustLength=function(e,o,l=1,d=0){const O=Math.floor(clamp(d,0,1)*o.length),A=o.sampleRate*e,S=this.createBuffer(o.numberOfChannels,o.length,o.sampleRate);for(let $=0;$<o.numberOfChannels;$++){let F=o.getChannelData($),E=S.getChannelData($);for(let L=0;L<A;L++){let N=(O+L*Math.abs(l))%F.length;l<1&&(N=N*-1),E[L]=F.at(N)||0}}return S},AudioContext.prototype.createReverb=function(e,o,l,d,O,A,S){const $=this.createConvolver();return $.generate=(F=2,E=.1,L=15e3,N=1e3,V,B,U)=>{$.duration=F,$.fade=E,$.lp=L,$.dim=N,$.ir=V,$.irspeed=B,$.irbegin=U,V?$.buffer=this.adjustLength(F,V,B,U):reverbGen.generateReverb({audioContext:this,numChannels:2,decayTime:F,fadeInTime:E,lpFreqStart:L,lpFreqEnd:N},q=>{$.buffer=q})},$.generate(e,o,l,d,O,A,S),$});var vowelFormant={a:{freqs:[660,1120,2750,3e3,3350],gains:[1,.5012,.0708,.0631,.0126],qs:[80,90,120,130,140]},e:{freqs:[440,1800,2700,3e3,3300],gains:[1,.1995,.1259,.1,.1],qs:[70,80,100,120,120]},i:{freqs:[270,1850,2900,3350,3590],gains:[1,.0631,.0631,.0158,.0158],qs:[40,90,100,120,120]},o:{freqs:[430,820,2700,3e3,3300],gains:[1,.3162,.0501,.0794,.01995],qs:[40,80,100,120,120]},u:{freqs:[370,630,2750,3e3,3400],gains:[1,.1,.0708,.0316,.01995],qs:[40,60,100,120,120]},ae:{freqs:[650,1515,2400,3e3,3350],gains:[1,.5,.1008,.0631,.0126],qs:[80,90,120,130,140]},aa:{freqs:[560,900,2570,3e3,3300],gains:[1,.5,.0708,.0631,.0126],qs:[80,90,120,130,140]},oe:{freqs:[500,1430,2300,3e3,3300],gains:[1,.2,.0708,.0316,.01995],qs:[40,60,100,120,120]},ue:{freqs:[250,1750,2150,3200,3300],gains:[1,.1,.0708,.0316,.01995],qs:[40,60,100,120,120]},y:{freqs:[400,1460,2400,3e3,3300],gains:[1,.2,.0708,.0316,.02995],qs:[40,60,100,120,120]},uh:{freqs:[600,1250,2100,3100,3500],gains:[1,.3,.0608,.0316,.01995],qs:[40,70,100,120,130]},un:{freqs:[500,1240,2280,3e3,3500],gains:[1,.1,.1708,.0216,.02995],qs:[40,60,100,120,120]},en:{freqs:[600,1480,2450,3200,3300],gains:[1,.15,.0708,.0316,.02995],qs:[40,60,100,120,120]},an:{freqs:[700,1050,2500,3e3,3300],gains:[1,.1,.0708,.0316,.02995],qs:[40,60,100,120,120]},on:{freqs:[500,1080,2350,3e3,3300],gains:[1,.1,.0708,.0316,.02995],qs:[40,60,100,120,120]},get æ(){return this.ae},get ø(){return this.oe},get ɑ(){return this.aa},get å(){return this.aa},get ö(){return this.oe},get ü(){return this.ue},get ı(){return this.y}};if(typeof GainNode<"u"){class e extends GainNode{constructor(l,d){if(super(l),!vowelFormant[d])throw new Error("vowel: unknown vowel "+d);const{gains:O,qs:A,freqs:S}=vowelFormant[d];this.makeupGain=l.createGain(),this.audioNodes=[];for(let $=0;$<5;$++){const F=l.createGain();F.gain.value=O[$];const E=l.createBiquadFilter();E.type="bandpass",E.Q.value=A[$],E.frequency.value=S[$],super.connect(E),E.connect(F),this.audioNodes.push(E),F.connect(this.makeupGain),this.audioNodes.push(F)}return this.makeupGain.gain.value=8,this}connect(l){this.makeupGain.connect(l)}disconnect(){this.makeupGain.disconnect(),this.audioNodes.forEach(l=>l.disconnect()),super.disconnect(),this.makeupGain=null,this.audioNodes=null}}AudioContext.prototype.createVowelFilter=function(o){return new e(this,o)}}const workletsUrl="data:text/javascript;base64,dmFyIF89KGZ1bmN0aW9uKGZ0KXsidXNlIHN0cmljdCI7Y2xhc3Mga3QgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7Y29uc3RydWN0b3IodCl7c3VwZXIodCksdGhpcy5zdGFydGVkPSExLHRoaXMubmJJbnB1dHM9dC5udW1iZXJPZklucHV0cyx0aGlzLm5iT3V0cHV0cz10Lm51bWJlck9mT3V0cHV0cyx0aGlzLmJsb2NrU2l6ZT10LnByb2Nlc3Nvck9wdGlvbnMuYmxvY2tTaXplLHRoaXMuaG9wU2l6ZT0xMjgsdGhpcy5uYk92ZXJsYXBzPXRoaXMuYmxvY2tTaXplL3RoaXMuaG9wU2l6ZSx0aGlzLmlucHV0QnVmZmVycz1uZXcgQXJyYXkodGhpcy5uYklucHV0cyksdGhpcy5pbnB1dEJ1ZmZlcnNIZWFkPW5ldyBBcnJheSh0aGlzLm5iSW5wdXRzKSx0aGlzLmlucHV0QnVmZmVyc1RvU2VuZD1uZXcgQXJyYXkodGhpcy5uYklucHV0cyk7Zm9yKGxldCBlPTA7ZTx0aGlzLm5iSW5wdXRzO2UrKyl0aGlzLmFsbG9jYXRlSW5wdXRDaGFubmVscyhlLDEpO3RoaXMub3V0cHV0QnVmZmVycz1uZXcgQXJyYXkodGhpcy5uYk91dHB1dHMpLHRoaXMub3V0cHV0QnVmZmVyc1RvUmV0cmlldmU9bmV3IEFycmF5KHRoaXMubmJPdXRwdXRzKTtmb3IobGV0IGU9MDtlPHRoaXMubmJPdXRwdXRzO2UrKyl0aGlzLmFsbG9jYXRlT3V0cHV0Q2hhbm5lbHMoZSwxKX1yZWFsbG9jYXRlQ2hhbm5lbHNJZk5lZWRlZCh0LGUpe2ZvcihsZXQgcz0wO3M8dGhpcy5uYklucHV0cztzKyspe2xldCByPXRbc10ubGVuZ3RoO3IhPXRoaXMuaW5wdXRCdWZmZXJzW3NdLmxlbmd0aCYmdGhpcy5hbGxvY2F0ZUlucHV0Q2hhbm5lbHMocyxyKX1mb3IobGV0IHM9MDtzPHRoaXMubmJPdXRwdXRzO3MrKyl7bGV0IHI9ZVtzXS5sZW5ndGg7ciE9dGhpcy5vdXRwdXRCdWZmZXJzW3NdLmxlbmd0aCYmdGhpcy5hbGxvY2F0ZU91dHB1dENoYW5uZWxzKHMscil9fWFsbG9jYXRlSW5wdXRDaGFubmVscyh0LGUpe3RoaXMuaW5wdXRCdWZmZXJzW3RdPW5ldyBBcnJheShlKTtmb3IobGV0IHM9MDtzPGU7cysrKXRoaXMuaW5wdXRCdWZmZXJzW3RdW3NdPW5ldyBGbG9hdDMyQXJyYXkodGhpcy5ibG9ja1NpemUrMTI4KSx0aGlzLmlucHV0QnVmZmVyc1t0XVtzXS5maWxsKDApO3RoaXMuaW5wdXRCdWZmZXJzSGVhZFt0XT1uZXcgQXJyYXkoZSksdGhpcy5pbnB1dEJ1ZmZlcnNUb1NlbmRbdF09bmV3IEFycmF5KGUpO2ZvcihsZXQgcz0wO3M8ZTtzKyspdGhpcy5pbnB1dEJ1ZmZlcnNIZWFkW3RdW3NdPXRoaXMuaW5wdXRCdWZmZXJzW3RdW3NdLnN1YmFycmF5KDAsdGhpcy5ibG9ja1NpemUpLHRoaXMuaW5wdXRCdWZmZXJzVG9TZW5kW3RdW3NdPW5ldyBGbG9hdDMyQXJyYXkodGhpcy5ibG9ja1NpemUpfWFsbG9jYXRlT3V0cHV0Q2hhbm5lbHModCxlKXt0aGlzLm91dHB1dEJ1ZmZlcnNbdF09bmV3IEFycmF5KGUpO2ZvcihsZXQgcz0wO3M8ZTtzKyspdGhpcy5vdXRwdXRCdWZmZXJzW3RdW3NdPW5ldyBGbG9hdDMyQXJyYXkodGhpcy5ibG9ja1NpemUpLHRoaXMub3V0cHV0QnVmZmVyc1t0XVtzXS5maWxsKDApO3RoaXMub3V0cHV0QnVmZmVyc1RvUmV0cmlldmVbdF09bmV3IEFycmF5KGUpO2ZvcihsZXQgcz0wO3M8ZTtzKyspdGhpcy5vdXRwdXRCdWZmZXJzVG9SZXRyaWV2ZVt0XVtzXT1uZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKSx0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlW3RdW3NdLmZpbGwoMCl9cmVhZElucHV0cyh0KXtpZih0WzBdLmxlbmd0aCYmdFswXVswXS5sZW5ndGg9PTApe2ZvcihsZXQgZT0wO2U8dGhpcy5uYklucHV0cztlKyspZm9yKGxldCBzPTA7czx0aGlzLmlucHV0QnVmZmVyc1tlXS5sZW5ndGg7cysrKXRoaXMuaW5wdXRCdWZmZXJzW2VdW3NdLmZpbGwoMCx0aGlzLmJsb2NrU2l6ZSk7cmV0dXJufWZvcihsZXQgZT0wO2U8dGhpcy5uYklucHV0cztlKyspZm9yKGxldCBzPTA7czx0aGlzLmlucHV0QnVmZmVyc1tlXS5sZW5ndGg7cysrKXtsZXQgcj10W2VdW3NdO3RoaXMuaW5wdXRCdWZmZXJzW2VdW3NdLnNldChyLHRoaXMuYmxvY2tTaXplKX19d3JpdGVPdXRwdXRzKHQpe2ZvcihsZXQgZT0wO2U8dGhpcy5uYklucHV0cztlKyspZm9yKGxldCBzPTA7czx0aGlzLmlucHV0QnVmZmVyc1tlXS5sZW5ndGg7cysrKXtsZXQgcj10aGlzLm91dHB1dEJ1ZmZlcnNbZV1bc10uc3ViYXJyYXkoMCwxMjgpO3RbZV1bc10uc2V0KHIpfX1zaGlmdElucHV0QnVmZmVycygpe2ZvcihsZXQgdD0wO3Q8dGhpcy5uYklucHV0czt0KyspZm9yKGxldCBlPTA7ZTx0aGlzLmlucHV0QnVmZmVyc1t0XS5sZW5ndGg7ZSsrKXRoaXMuaW5wdXRCdWZmZXJzW3RdW2VdLmNvcHlXaXRoaW4oMCwxMjgpfXNoaWZ0T3V0cHV0QnVmZmVycygpe2ZvcihsZXQgdD0wO3Q8dGhpcy5uYk91dHB1dHM7dCsrKWZvcihsZXQgZT0wO2U8dGhpcy5vdXRwdXRCdWZmZXJzW3RdLmxlbmd0aDtlKyspdGhpcy5vdXRwdXRCdWZmZXJzW3RdW2VdLmNvcHlXaXRoaW4oMCwxMjgpLHRoaXMub3V0cHV0QnVmZmVyc1t0XVtlXS5zdWJhcnJheSh0aGlzLmJsb2NrU2l6ZS0xMjgpLmZpbGwoMCl9cHJlcGFyZUlucHV0QnVmZmVyc1RvU2VuZCgpe2ZvcihsZXQgdD0wO3Q8dGhpcy5uYklucHV0czt0KyspZm9yKGxldCBlPTA7ZTx0aGlzLmlucHV0QnVmZmVyc1t0XS5sZW5ndGg7ZSsrKXRoaXMuaW5wdXRCdWZmZXJzVG9TZW5kW3RdW2VdLnNldCh0aGlzLmlucHV0QnVmZmVyc0hlYWRbdF1bZV0pfWhhbmRsZU91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlKCl7Zm9yKGxldCB0PTA7dDx0aGlzLm5iT3V0cHV0czt0KyspZm9yKGxldCBlPTA7ZTx0aGlzLm91dHB1dEJ1ZmZlcnNbdF0ubGVuZ3RoO2UrKylmb3IobGV0IHM9MDtzPHRoaXMuYmxvY2tTaXplO3MrKyl0aGlzLm91dHB1dEJ1ZmZlcnNbdF1bZV1bc10rPXRoaXMub3V0cHV0QnVmZmVyc1RvUmV0cmlldmVbdF1bZV1bc10vdGhpcy5uYk92ZXJsYXBzfXByb2Nlc3ModCxlLHMpe2NvbnN0IGk9dFswXVswXSE9PXZvaWQgMDtyZXR1cm4gdGhpcy5zdGFydGVkJiYhaT8hMToodGhpcy5zdGFydGVkPWksdGhpcy5yZWFsbG9jYXRlQ2hhbm5lbHNJZk5lZWRlZCh0LGUpLHRoaXMucmVhZElucHV0cyh0KSx0aGlzLnNoaWZ0SW5wdXRCdWZmZXJzKCksdGhpcy5wcmVwYXJlSW5wdXRCdWZmZXJzVG9TZW5kKCksdGhpcy5wcm9jZXNzT0xBKHRoaXMuaW5wdXRCdWZmZXJzVG9TZW5kLHRoaXMub3V0cHV0QnVmZmVyc1RvUmV0cmlldmUscyksdGhpcy5oYW5kbGVPdXRwdXRCdWZmZXJzVG9SZXRyaWV2ZSgpLHRoaXMud3JpdGVPdXRwdXRzKGUpLHRoaXMuc2hpZnRPdXRwdXRCdWZmZXJzKCksITApfXByb2Nlc3NPTEEodCxlLHMpe2NvbnNvbGUuYXNzZXJ0KCExLCJOb3Qgb3ZlcnJpZGVuIil9fWNsYXNzIEV0e2NvbnN0cnVjdG9yKHQpe2lmKHRoaXMuc2l6ZT10fDAsdGhpcy5zaXplPD0xfHwodGhpcy5zaXplJnRoaXMuc2l6ZS0xKSE9PTApdGhyb3cgbmV3IEVycm9yKCJGRlQgc2l6ZSBtdXN0IGJlIGEgcG93ZXIgb2YgdHdvIGFuZCBiaWdnZXIgdGhhbiAxIik7dGhpcy5fY3NpemU9dDw8MTtmb3IodmFyIGU9bmV3IEFycmF5KHRoaXMuc2l6ZSoyKSxzPTA7czxlLmxlbmd0aDtzKz0yKXtjb25zdCBjPU1hdGguUEkqcy90aGlzLnNpemU7ZVtzXT1NYXRoLmNvcyhjKSxlW3MrMV09LU1hdGguc2luKGMpfXRoaXMudGFibGU9ZTtmb3IodmFyIHI9MCxpPTE7dGhpcy5zaXplPmk7aTw8PTEpcisrO3RoaXMuX3dpZHRoPXIlMj09PTA/ci0xOnIsdGhpcy5fYml0cmV2PW5ldyBBcnJheSgxPDx0aGlzLl93aWR0aCk7Zm9yKHZhciBvPTA7bzx0aGlzLl9iaXRyZXYubGVuZ3RoO28rKyl7dGhpcy5fYml0cmV2W29dPTA7Zm9yKHZhciBhPTA7YTx0aGlzLl93aWR0aDthKz0yKXt2YXIgdT10aGlzLl93aWR0aC1hLTI7dGhpcy5fYml0cmV2W29dfD0obz4+PmEmMyk8PHV9fXRoaXMuX291dD1udWxsLHRoaXMuX2RhdGE9bnVsbCx0aGlzLl9pbnY9MH1mcm9tQ29tcGxleEFycmF5KHQsZSl7Zm9yKHZhciBzPWV8fG5ldyBBcnJheSh0Lmxlbmd0aD4+PjEpLHI9MDtyPHQubGVuZ3RoO3IrPTIpc1tyPj4+MV09dFtyXTtyZXR1cm4gc31jcmVhdGVDb21wbGV4QXJyYXkoKXtjb25zdCB0PW5ldyBBcnJheSh0aGlzLl9jc2l6ZSk7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspdFtlXT0wO3JldHVybiB0fXRvQ29tcGxleEFycmF5KHQsZSl7Zm9yKHZhciBzPWV8fHRoaXMuY3JlYXRlQ29tcGxleEFycmF5KCkscj0wO3I8cy5sZW5ndGg7cis9MilzW3JdPXRbcj4+PjFdLHNbcisxXT0wO3JldHVybiBzfWNvbXBsZXRlU3BlY3RydW0odCl7Zm9yKHZhciBlPXRoaXMuX2NzaXplLHM9ZT4+PjEscj0yO3I8cztyKz0yKXRbZS1yXT10W3JdLHRbZS1yKzFdPS10W3IrMV19dHJhbnNmb3JtKHQsZSl7aWYodD09PWUpdGhyb3cgbmV3IEVycm9yKCJJbnB1dCBhbmQgb3V0cHV0IGJ1ZmZlcnMgbXVzdCBiZSBkaWZmZXJlbnQiKTt0aGlzLl9vdXQ9dCx0aGlzLl9kYXRhPWUsdGhpcy5faW52PTAsdGhpcy5fdHJhbnNmb3JtNCgpLHRoaXMuX291dD1udWxsLHRoaXMuX2RhdGE9bnVsbH1yZWFsVHJhbnNmb3JtKHQsZSl7aWYodD09PWUpdGhyb3cgbmV3IEVycm9yKCJJbnB1dCBhbmQgb3V0cHV0IGJ1ZmZlcnMgbXVzdCBiZSBkaWZmZXJlbnQiKTt0aGlzLl9vdXQ9dCx0aGlzLl9kYXRhPWUsdGhpcy5faW52PTAsdGhpcy5fcmVhbFRyYW5zZm9ybTQoKSx0aGlzLl9vdXQ9bnVsbCx0aGlzLl9kYXRhPW51bGx9aW52ZXJzZVRyYW5zZm9ybSh0LGUpe2lmKHQ9PT1lKXRocm93IG5ldyBFcnJvcigiSW5wdXQgYW5kIG91dHB1dCBidWZmZXJzIG11c3QgYmUgZGlmZmVyZW50Iik7dGhpcy5fb3V0PXQsdGhpcy5fZGF0YT1lLHRoaXMuX2ludj0xLHRoaXMuX3RyYW5zZm9ybTQoKTtmb3IodmFyIHM9MDtzPHQubGVuZ3RoO3MrKyl0W3NdLz10aGlzLnNpemU7dGhpcy5fb3V0PW51bGwsdGhpcy5fZGF0YT1udWxsfV90cmFuc2Zvcm00KCl7dmFyIHQ9dGhpcy5fb3V0LGU9dGhpcy5fY3NpemUscz10aGlzLl93aWR0aCxyPTE8PHMsaT1lL3I8PDEsbyxhLHU9dGhpcy5fYml0cmV2O2lmKGk9PT00KWZvcihvPTAsYT0wO288ZTtvKz1pLGErKyl7Y29uc3QgbT11W2FdO3RoaXMuX3NpbmdsZVRyYW5zZm9ybTIobyxtLHIpfWVsc2UgZm9yKG89MCxhPTA7bzxlO28rPWksYSsrKXtjb25zdCBtPXVbYV07dGhpcy5fc2luZ2xlVHJhbnNmb3JtNChvLG0scil9dmFyIGM9dGhpcy5faW52Py0xOjEsaD10aGlzLnRhYmxlO2ZvcihyPj49MjtyPj0yO3I+Pj0yKXtpPWUvcjw8MTt2YXIgZj1pPj4+Mjtmb3Iobz0wO288ZTtvKz1pKWZvcih2YXIgZD1vK2YsbD1vLHA9MDtsPGQ7bCs9MixwKz1yKXtjb25zdCBtPWwsST1tK2YsZz1JK2Ysdj1nK2Ysdz10W21dLFA9dFttKzFdLFM9dFtJXSxWPXRbSSsxXSxNPXRbZ10seD10W2crMV0seT10W3ZdLEE9dFt2KzFdLFc9dyxOPVAsRT1oW3BdLE89YypoW3ArMV0sRj1TKkUtVipPLEQ9UypPK1YqRSxMPWhbMipwXSxDPWMqaFsyKnArMV0sZXQ9TSpMLXgqQyxzdD1NKkMreCpMLHJ0PWhbMypwXSxudD1jKmhbMypwKzFdLGl0PXkqcnQtQSpudCxvdD15Km50K0EqcnQsYXQ9VytldCwkPU4rc3QsRz1XLWV0LGN0PU4tc3QsdXQ9RitpdCxRPUQrb3QsSj1jKihGLWl0KSxodD1jKihELW90KSxsdD1hdCt1dCxidD0kK1EsSXQ9YXQtdXQsX3Q9JC1RLEJ0PUcraHQsd3Q9Y3QtSixUdD1HLWh0LFB0PWN0K0o7dFttXT1sdCx0W20rMV09YnQsdFtJXT1CdCx0W0krMV09d3QsdFtnXT1JdCx0W2crMV09X3QsdFt2XT1UdCx0W3YrMV09UHR9fX1fc2luZ2xlVHJhbnNmb3JtMih0LGUscyl7Y29uc3Qgcj10aGlzLl9vdXQsaT10aGlzLl9kYXRhLG89aVtlXSxhPWlbZSsxXSx1PWlbZStzXSxjPWlbZStzKzFdLGg9byt1LGY9YStjLGQ9by11LGw9YS1jO3JbdF09aCxyW3QrMV09ZixyW3QrMl09ZCxyW3QrM109bH1fc2luZ2xlVHJhbnNmb3JtNCh0LGUscyl7Y29uc3Qgcj10aGlzLl9vdXQsaT10aGlzLl9kYXRhLG89dGhpcy5faW52Py0xOjEsYT1zKjIsdT1zKjMsYz1pW2VdLGg9aVtlKzFdLGY9aVtlK3NdLGQ9aVtlK3MrMV0sbD1pW2UrYV0scD1pW2UrYSsxXSxtPWlbZSt1XSxJPWlbZSt1KzFdLGc9YytsLHY9aCtwLHc9Yy1sLFA9aC1wLFM9ZittLFY9ZCtJLE09byooZi1tKSx4PW8qKGQtSSkseT1nK1MsQT12K1YsVz13K3gsTj1QLU0sRT1nLVMsTz12LVYsRj13LXgsRD1QK007clt0XT15LHJbdCsxXT1BLHJbdCsyXT1XLHJbdCszXT1OLHJbdCs0XT1FLHJbdCs1XT1PLHJbdCs2XT1GLHJbdCs3XT1EfV9yZWFsVHJhbnNmb3JtNCgpe3ZhciB0PXRoaXMuX291dCxlPXRoaXMuX2NzaXplLHM9dGhpcy5fd2lkdGgscj0xPDxzLGk9ZS9yPDwxLG8sYSx1PXRoaXMuX2JpdHJldjtpZihpPT09NClmb3Iobz0wLGE9MDtvPGU7bys9aSxhKyspe2NvbnN0IE10PXVbYV07dGhpcy5fc2luZ2xlUmVhbFRyYW5zZm9ybTIobyxNdD4+PjEscj4+PjEpfWVsc2UgZm9yKG89MCxhPTA7bzxlO28rPWksYSsrKXtjb25zdCBNdD11W2FdO3RoaXMuX3NpbmdsZVJlYWxUcmFuc2Zvcm00KG8sTXQ+Pj4xLHI+Pj4xKX12YXIgYz10aGlzLl9pbnY/LTE6MSxoPXRoaXMudGFibGU7Zm9yKHI+Pj0yO3I+PTI7cj4+PTIpe2k9ZS9yPDwxO3ZhciBmPWk+Pj4xLGQ9Zj4+PjEsbD1kPj4+MTtmb3Iobz0wO288ZTtvKz1pKWZvcih2YXIgcD0wLG09MDtwPD1sO3ArPTIsbSs9cil7dmFyIEk9bytwLGc9SStkLHY9ZytkLHc9ditkLFA9dFtJXSxTPXRbSSsxXSxWPXRbZ10sTT10W2crMV0seD10W3ZdLHk9dFt2KzFdLEE9dFt3XSxXPXRbdysxXSxOPVAsRT1TLE89aFttXSxGPWMqaFttKzFdLEQ9VipPLU0qRixMPVYqRitNKk8sQz1oWzIqbV0sZXQ9YypoWzIqbSsxXSxzdD14KkMteSpldCxydD14KmV0K3kqQyxudD1oWzMqbV0saXQ9YypoWzMqbSsxXSxvdD1BKm50LVcqaXQsYXQ9QSppdCtXKm50LCQ9TitzdCxHPUUrcnQsY3Q9Ti1zdCx1dD1FLXJ0LFE9RCtvdCxKPUwrYXQsaHQ9YyooRC1vdCksbHQ9YyooTC1hdCksYnQ9JCtRLEl0PUcrSixfdD1jdCtsdCxCdD11dC1odDtpZih0W0ldPWJ0LHRbSSsxXT1JdCx0W2ddPV90LHRbZysxXT1CdCxwPT09MCl7dmFyIHd0PSQtUSxUdD1HLUo7dFt2XT13dCx0W3YrMV09VHQ7Y29udGludWV9aWYocCE9PWwpe3ZhciBQdD1jdCxnZT0tdXQsYmU9JCxJZT0tRyxfZT0tYypsdCxCZT0tYypodCx3ZT0tYypKLFRlPS1jKlEsUGU9UHQrX2UsTWU9Z2UrQmUsU2U9YmUrVGUsVmU9SWUtd2UsQ3Q9bytkLXAsUnQ9bytmLXA7dFtDdF09UGUsdFtDdCsxXT1NZSx0W1J0XT1TZSx0W1J0KzFdPVZlfX19fV9zaW5nbGVSZWFsVHJhbnNmb3JtMih0LGUscyl7Y29uc3Qgcj10aGlzLl9vdXQsaT10aGlzLl9kYXRhLG89aVtlXSxhPWlbZStzXSx1PW8rYSxjPW8tYTtyW3RdPXUsclt0KzFdPTAsclt0KzJdPWMsclt0KzNdPTB9X3NpbmdsZVJlYWxUcmFuc2Zvcm00KHQsZSxzKXtjb25zdCByPXRoaXMuX291dCxpPXRoaXMuX2RhdGEsbz10aGlzLl9pbnY/LTE6MSxhPXMqMix1PXMqMyxjPWlbZV0saD1pW2Urc10sZj1pW2UrYV0sZD1pW2UrdV0sbD1jK2YscD1jLWYsbT1oK2QsST1vKihoLWQpLGc9bCttLHY9cCx3PS1JLFA9bC1tLFM9cCxWPUk7clt0XT1nLHJbdCsxXT0wLHJbdCsyXT12LHJbdCszXT13LHJbdCs0XT1QLHJbdCs1XT0wLHJbdCs2XT1TLHJbdCs3XT1WfX1sZXQgRHQ9bj0+Y29uc29sZS5sb2cobik7Y29uc3QgenQ9KC4uLm4pPT5EdCguLi5uKSxXdD0obix0LGUpPT5NYXRoLm1pbihNYXRoLm1heChuLHQpLGUpLFN0PW49Pm4vKDErbikscXQ9KG4sdCk9PihuJXQrdCkldCxMdD0obix0KT0+KDErdCkqbi8oMSt0Kk1hdGguYWJzKG4pKSxZPShuLHQpPT5NYXRoLnRhbmgobiooMSt0KSksWXQ9KG4sdCk9Pld0KCgxK3QpKm4sLTEsMSksVnQ9KG4sdCk9PntsZXQgZT0oMSsuNSp0KSpuO2NvbnN0IHM9cXQoZSsxLDQpO3JldHVybiAxLU1hdGguYWJzKHMtMil9LGp0PShuLHQpPT5NYXRoLnNpbihNYXRoLlBJLzIqVnQobix0KSksSHQ9KG4sdCk9Pntjb25zdCBlPVN0KE1hdGgubG9nMXAodCkpLHM9KG4tZS8zKm4qbipuKS8oMS1lLzMpO3JldHVybiBZKHMsdCl9LHh0PShuLHQsZT0hMSk9Pntjb25zdCBzPTErMip0LGk9LjA3KlN0KE1hdGgubG9nMXAodCkpLG89WShuK2ksMip0KSxhPVkoZT9pOi1uK2ksMip0KSx1PW8tYSxjPTEvTWF0aC5jb3NoKHMqaSksaD1jKmMsZj1NYXRoLm1heCgxZS04LChlPzE6MikqcypoKTtyZXR1cm4gWSh1L2YsdCl9LHl0PXtzY3VydmU6THQsc29mdDpZLGhhcmQ6WXQsY3ViaWM6SHQsZGlvZGU6eHQsYXN5bToobix0KT0+eHQobix0LCEwKSxmb2xkOlZ0LHNpbmVmb2xkOmp0LGNoZWJ5c2hldjoobix0KT0+e2NvbnN0IGU9MTAqTWF0aC5sb2cxcCh0KTtsZXQgcz0xLHI9bixpLG89MDtmb3IobGV0IGE9MTthPDY0O2ErKyl7aWYoYTwyKXtvKz1hPT0wP3M6cjtjb250aW51ZX1pPTIqbipzLXIscj1zLHM9aSxhJTI9PT0wJiYobys9TWF0aC5taW4oMS4zKmUvYSwyKSppKX1yZXR1cm4gWShvLGUvMjApfX0sWD1PYmplY3QuZnJlZXplKE9iamVjdC5rZXlzKHl0KSksS3Q9bj0+e2xldCB0PW47dHlwZW9mIG49PSJzdHJpbmciJiYodD1YLmluZGV4T2YobiksdD09PS0xJiYoenQoYFtzdXBlcmRvdWdoXSBDb3VsZCBub3QgZmluZCB3YXZlc2hhcGluZyBhbGdvcml0aG0gJHtufS4KICAgICAgICBBdmFpbGFibGUgb3B0aW9ucyBhcmUgJHtYLmpvaW4oIiwgIil9LgogICAgICAgIERlZmF1bHRpbmcgdG8gJHtYWzBdfS5gKSx0PTApKTtjb25zdCBlPVhbdCVYLmxlbmd0aF07cmV0dXJuIHl0W2VdfSxqPTEyOCxSPU1hdGguUEksaz0yKlIscT0xL3NhbXBsZVJhdGUsVD0obix0LGUpPT5NYXRoLm1pbihNYXRoLm1heChuLHQpLGUpLFV0PShuLHQsZSk9PmUqKHQtbikrbixiPShuLHQpPT5uW3RdPz9uWzBdLEg9bj0+bi1NYXRoLmZsb29yKG4pLEs9bj0+bnwwLFU9bj0+SyhuKy41KSxadD1uPT5LKG4rMSksQXQ9bj0+bi1LKG4pLHo9bj0+e2NvbnN0IHQ9bioqMjtyZXR1cm4gbiooMjcrdCkvKDI3KzkqdCl9LE50PShuLHQpPT57aWYobjwyKXJldHVybiByPT4wO2NvbnN0IGU9dC8obi0xKSxzPXQqLjU7cmV0dXJuIHI9PnIqZS1zfSxaPShuLHQpPT5uKk1hdGgucG93KDIsdC8xMik7ZnVuY3Rpb24gJHQobix0KXt0PU1hdGgubWluKHQsMS10KTtjb25zdCBlPTEvdDtyZXR1cm4gbjx0PyhuKj1lLDIqbi1uKioyLTEpOm4+MS10PyhuPShuLTEpKmUsbioqMisyKm4rMSk6MH1jb25zdCBkdD17dHJpKG4sdD0uNSl7Y29uc3QgZT0xLXQ7cmV0dXJuIG4+PXQ/MS9lLW4vZTpuL3R9LHNpbmUobil7cmV0dXJuIE1hdGguc2luKGsqbikqLjUrLjV9LHJhbXAobil7cmV0dXJuIG59LHNhdyhuKXtyZXR1cm4gMS1ufSxzcXVhcmUobix0PS41KXtyZXR1cm4gbj49dD8wOjF9LGN1c3RvbShuLHQ9WzAsMV0pe2NvbnN0IGU9dC5sZW5ndGgtMSxzPU1hdGguZmxvb3IobiplKSxyPTEvZSxpPVQodFtzXSwwLDEpLGE9VCh0W3MrMV0sMCwxKSx1PWksYz0wLGg9cjtyZXR1cm4oYS11KS8oaC1jKSoobi1yKnMpK2l9LHNhd2JsZXAobix0KXtyZXR1cm4gMipuLTEtJHQobix0KX19LEd0PU9iamVjdC5rZXlzKGR0KTtjbGFzcyBRdCBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3NvcntzdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJiZWdpbiIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJ0aW1lIixkZWZhdWx0VmFsdWU6MH0se25hbWU6ImVuZCIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJmcmVxdWVuY3kiLGRlZmF1bHRWYWx1ZTouNX0se25hbWU6InNrZXciLGRlZmF1bHRWYWx1ZTouNX0se25hbWU6ImRlcHRoIixkZWZhdWx0VmFsdWU6MX0se25hbWU6InBoYXNlb2Zmc2V0IixkZWZhdWx0VmFsdWU6MH0se25hbWU6InNoYXBlIixkZWZhdWx0VmFsdWU6MH0se25hbWU6ImN1cnZlIixkZWZhdWx0VmFsdWU6MX0se25hbWU6ImRjb2Zmc2V0IixkZWZhdWx0VmFsdWU6MH0se25hbWU6Im1pbiIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJtYXgiLGRlZmF1bHRWYWx1ZToxfV19Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMucGhhc2V9aW5jcmVtZW50UGhhc2UodCl7dGhpcy5waGFzZSs9dCx0aGlzLnBoYXNlPjEmJih0aGlzLnBoYXNlPXRoaXMucGhhc2UtMSl9cHJvY2Vzcyh0LGUscyl7Y29uc3Qgcj1zLmJlZ2luWzBdO2lmKGN1cnJlbnRUaW1lPj1zLmVuZFswXSlyZXR1cm4hMTtpZihjdXJyZW50VGltZTw9cilyZXR1cm4hMDtjb25zdCBpPWVbMF0sbz1zLmZyZXF1ZW5jeVswXSxhPXMudGltZVswXSx1PXMuZGVwdGhbMF0sYz1zLnNrZXdbMF0saD1zLnBoYXNlb2Zmc2V0WzBdLGY9cy5jdXJ2ZVswXSxkPXMuZGNvZmZzZXRbMF0sbD1zLm1pblswXSxwPXMubWF4WzBdLG09R3Rbcy5zaGFwZVswXV0sST1pWzBdLmxlbmd0aD8/MDt0aGlzLnBoYXNlPT1udWxsJiYodGhpcy5waGFzZT1BdChhKm8raCkpO2NvbnN0IGc9bypxO2ZvcihsZXQgdj0wO3Y8STt2Kyspe2ZvcihsZXQgdz0wO3c8aS5sZW5ndGg7dysrKXtsZXQgUD0oZHRbbV0odGhpcy5waGFzZSxjKStkKSp1O1A9TWF0aC5wb3coUCxmKSxpW3ddW3ZdPVQoUCxsLHApfXRoaXMuaW5jcmVtZW50UGhhc2UoZyl9cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJsZm8tcHJvY2Vzc29yIixRdCk7Y2xhc3MgSnQgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToiY29hcnNlIixkZWZhdWx0VmFsdWU6MX1dfWNvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnN0YXJ0ZWQ9ITF9cHJvY2Vzcyh0LGUscyl7Y29uc3Qgcj10WzBdLGk9ZVswXSxvPXJbMF0hPT12b2lkIDA7aWYodGhpcy5zdGFydGVkJiYhbylyZXR1cm4hMTt0aGlzLnN0YXJ0ZWQ9bztsZXQgYT1zLmNvYXJzZVswXT8/MDthPU1hdGgubWF4KDEsYSk7Zm9yKGxldCB1PTA7dTxqO3UrKylmb3IobGV0IGM9MDtjPHIubGVuZ3RoO2MrKylpW2NdW3VdPXUlYT09PTA/cltjXVt1XTppW2NdW3UtMV07cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJjb2Fyc2UtcHJvY2Vzc29yIixKdCk7Y2xhc3MgWHQgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToiY3J1c2giLGRlZmF1bHRWYWx1ZTowfV19Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMuc3RhcnRlZD0hMX1wcm9jZXNzKHQsZSxzKXtjb25zdCByPXRbMF0saT1lWzBdLG89clswXSE9PXZvaWQgMDtpZih0aGlzLnN0YXJ0ZWQmJiFvKXJldHVybiExO3RoaXMuc3RhcnRlZD1vO2xldCBhPXMuY3J1c2hbMF0/Pzg7YT1NYXRoLm1heCgxLGEpO2ZvcihsZXQgdT0wO3U8ajt1KyspZm9yKGxldCBjPTA7YzxyLmxlbmd0aDtjKyspe2NvbnN0IGg9TWF0aC5wb3coMixhLTEpO2lbY11bdV09TWF0aC5yb3VuZChyW2NdW3VdKmgpL2h9cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJjcnVzaC1wcm9jZXNzb3IiLFh0KTtjbGFzcyB0ZSBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3NvcntzdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJzaGFwZSIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJwb3N0Z2FpbiIsZGVmYXVsdFZhbHVlOjF9XX1jb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5zdGFydGVkPSExfXByb2Nlc3ModCxlLHMpe2NvbnN0IHI9dFswXSxpPWVbMF0sbz1yWzBdIT09dm9pZCAwO2lmKHRoaXMuc3RhcnRlZCYmIW8pcmV0dXJuITE7dGhpcy5zdGFydGVkPW87bGV0IGE9cy5zaGFwZVswXTthPWE8MT9hOi45OTk5OTk5OTk2LGE9MiphLygxLWEpO2NvbnN0IHU9TWF0aC5tYXgoLjAwMSxNYXRoLm1pbigxLHMucG9zdGdhaW5bMF0pKTtmb3IobGV0IGM9MDtjPGo7YysrKWZvcihsZXQgaD0wO2g8ci5sZW5ndGg7aCsrKWlbaF1bY109KDErYSkqcltoXVtjXS8oMSthKk1hdGguYWJzKHJbaF1bY10pKSp1O3JldHVybiEwfX1yZWdpc3RlclByb2Nlc3Nvcigic2hhcGUtcHJvY2Vzc29yIix0ZSk7Y2xhc3MgT3R7czA9MDtzMT0wO3VwZGF0ZSh0LGUscz0wKXtzPVQocywwLDEpLGU9VChlLDAsc2FtcGxlUmF0ZS8yLTEpO2NvbnN0IHI9VCgyKk1hdGguc2luKGUqUipxKSwwLDEuMTQpLG89MS1NYXRoLnBvdyguNSw4KnMrMSkqcjtyZXR1cm4gdGhpcy5zMD1vKnRoaXMuczAtcip0aGlzLnMxK3IqdCx0aGlzLnMxPW8qdGhpcy5zMStyKnRoaXMuczAsdGhpcy5zMX19Y2xhc3MgZWUgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToidmFsdWUiLGRlZmF1bHRWYWx1ZTouNX1dfWNvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLmZpbHRlcnM9W25ldyBPdCxuZXcgT3RdfXByb2Nlc3ModCxlLHMpe2NvbnN0IHI9dFswXSxpPWVbMF0sbz1yWzBdIT09dm9pZCAwO3RoaXMuc3RhcnRlZD1vO2NvbnN0IGE9VChzLnZhbHVlWzBdLDAsMSk7bGV0IHU9Im5vbmUiLGMsaD0xO2E+LjUxPyh1PSJoaXBhc3MiLGg9KGEtLjUpKjIpOmE8LjQ5JiYodT0ibG9wYXNzIixoPWEqMiksYz1NYXRoLnBvdyhoKjExLDQpO2ZvcihsZXQgZj0wO2Y8ci5sZW5ndGg7ZisrKWZvcihsZXQgZD0wO2Q8ajtkKyspdT09Im5vbmUiP2lbZl1bZF09cltmXVtkXToodGhpcy5maWx0ZXJzW2ZdLnVwZGF0ZShyW2ZdW2RdLGMsLjEpLHU9PT0ibG9wYXNzIj9pW2ZdW2RdPXRoaXMuZmlsdGVyc1tmXS5zMTp1PT09ImhpcGFzcyI/aVtmXVtkXT1yW2ZdW2RdLXRoaXMuZmlsdGVyc1tmXS5zMTppW2ZdW2RdPXJbZl1bZF0pO3JldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigiZGpmLXByb2Nlc3NvciIsZWUpO2NsYXNzIHNlIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImZyZXF1ZW5jeSIsZGVmYXVsdFZhbHVlOjUwMH0se25hbWU6InEiLGRlZmF1bHRWYWx1ZToxfSx7bmFtZToiZHJpdmUiLGRlZmF1bHRWYWx1ZTouNjl9XX1jb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5zdGFydGVkPSExLHRoaXMucDA9WzAsMF0sdGhpcy5wMT1bMCwwXSx0aGlzLnAyPVswLDBdLHRoaXMucDM9WzAsMF0sdGhpcy5wMzI9WzAsMF0sdGhpcy5wMzM9WzAsMF0sdGhpcy5wMzQ9WzAsMF19cHJvY2Vzcyh0LGUscyl7Y29uc3Qgcj10WzBdLGk9ZVswXSxvPXJbMF0hPT12b2lkIDA7aWYodGhpcy5zdGFydGVkJiYhbylyZXR1cm4hMTt0aGlzLnN0YXJ0ZWQ9bztjb25zdCBhPXMucVswXSx1PVQoTWF0aC5leHAocy5kcml2ZVswXSksLjEsMmUzKTtsZXQgYz1zLmZyZXF1ZW5jeVswXTtjPWMqaypxLGM9Yz4xPzE6Yztjb25zdCBoPU1hdGgubWluKDgsYSouMTMpO2xldCBmPTEvdSpNYXRoLm1pbigxLjc1LDEraCk7Zm9yKGxldCBkPTA7ZDxqO2QrKylmb3IobGV0IGw9MDtsPHIubGVuZ3RoO2wrKyl7Y29uc3QgcD10aGlzLnAzW2xdKi4zNjA4OTErdGhpcy5wMzJbbF0qLjQxNzI5K3RoaXMucDMzW2xdKi4xNzc4OTYrdGhpcy5wMzRbbF0qLjA0Mzk3MjU7dGhpcy5wMzRbbF09dGhpcy5wMzNbbF0sdGhpcy5wMzNbbF09dGhpcy5wMzJbbF0sdGhpcy5wMzJbbF09dGhpcy5wM1tsXSx0aGlzLnAwW2xdKz0oeihyW2xdW2RdKnUtaCpwKS16KHRoaXMucDBbbF0pKSpjLHRoaXMucDFbbF0rPSh6KHRoaXMucDBbbF0pLXoodGhpcy5wMVtsXSkpKmMsdGhpcy5wMltsXSs9KHoodGhpcy5wMVtsXSkteih0aGlzLnAyW2xdKSkqYyx0aGlzLnAzW2xdKz0oeih0aGlzLnAyW2xdKS16KHRoaXMucDNbbF0pKSpjLGlbbF1bZF09cCpmfXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigibGFkZGVyLXByb2Nlc3NvciIsc2UpO2NsYXNzIHJlIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImRpc3RvcnQiLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToicG9zdGdhaW4iLGRlZmF1bHRWYWx1ZToxfV19Y29uc3RydWN0b3Ioe3Byb2Nlc3Nvck9wdGlvbnM6dH0pe3N1cGVyKCksdGhpcy5zdGFydGVkPSExLHRoaXMuYWxnb3JpdGhtPUt0KHQuYWxnb3JpdGhtKX1wcm9jZXNzKHQsZSxzKXtjb25zdCByPXRbMF0saT1lWzBdLG89clswXSE9PXZvaWQgMDtpZih0aGlzLnN0YXJ0ZWQmJiFvKXJldHVybiExO3RoaXMuc3RhcnRlZD1vO2ZvcihsZXQgYT0wO2E8ajthKyspe2NvbnN0IHU9VChiKHMucG9zdGdhaW4sYSksLjAwMSwxKSxjPU1hdGguZXhwbTEoYihzLmRpc3RvcnQsYSkpO2ZvcihsZXQgaD0wO2g8ci5sZW5ndGg7aCsrKXtjb25zdCBmPXJbaF1bYV07aVtoXVthXT11KnRoaXMuYWxnb3JpdGhtKGYsYyl9fXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigiZGlzdG9ydC1wcm9jZXNzb3IiLHJlKTtjbGFzcyBuZSBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3Nvcntjb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5waGFzZT1bXX1zdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJiZWdpbiIsZGVmYXVsdFZhbHVlOjAsbWF4Ok51bWJlci5QT1NJVElWRV9JTkZJTklUWSxtaW46MH0se25hbWU6ImVuZCIsZGVmYXVsdFZhbHVlOjAsbWF4Ok51bWJlci5QT1NJVElWRV9JTkZJTklUWSxtaW46MH0se25hbWU6ImZyZXF1ZW5jeSIsZGVmYXVsdFZhbHVlOjQ0MCxtaW46TnVtYmVyLkVQU0lMT059LHtuYW1lOiJwYW5zcHJlYWQiLGRlZmF1bHRWYWx1ZTouNCxtaW46MCxtYXg6MX0se25hbWU6ImZyZXFzcHJlYWQiLGRlZmF1bHRWYWx1ZTouMixtaW46MH0se25hbWU6ImRldHVuZSIsZGVmYXVsdFZhbHVlOjAsbWluOjB9LHtuYW1lOiJ2b2ljZXMiLGRlZmF1bHRWYWx1ZTo1LG1pbjoxLGF1dG9tYXRpb25SYXRlOiJrLXJhdGUifV19cHJvY2Vzcyh0LGUscyl7aWYoY3VycmVudFRpbWU8PXMuYmVnaW5bMF0pcmV0dXJuITA7aWYoY3VycmVudFRpbWU+PXMuZW5kWzBdKXJldHVybiExO2NvbnN0IHI9ZVswXSxpPXMudm9pY2VzWzBdO2ZvcihsZXQgbz0wO288clswXS5sZW5ndGg7bysrKXtjb25zdCBhPWIocy5kZXR1bmUsbyksdT1iKHMuZnJlcXNwcmVhZCxvKSxjPWIocy5wYW5zcHJlYWQsbykqLjUrLjU7bGV0IGg9TWF0aC5zcXJ0KDEtYyksZj1NYXRoLnNxcnQoYyksZD1iKHMuZnJlcXVlbmN5LG8pO2Q9WihkLGEvMTAwKTtjb25zdCBsPU50KGksdSk7Zm9yKGxldCBwPTA7cDxpO3ArKyl7Y29uc3QgbT1aKGQsbChwKSksST1IKG0qcSk7dGhpcy5waGFzZVtwXT10aGlzLnBoYXNlW3BdPz9NYXRoLnJhbmRvbSgpO2NvbnN0IGc9ZHQuc2F3YmxlcCh0aGlzLnBoYXNlW3BdLEkpO3JbMF1bb10rPWcqaCxyWzFdW29dKz1nKmY7bGV0IHY9dGhpcy5waGFzZVtwXStJO3Y+PTEmJih2LT0xKSx0aGlzLnBoYXNlW3BdPXY7Y29uc3Qgdz1oO2g9ZixmPXd9fXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3Nvcigic3VwZXJzYXctb3NjaWxsYXRvciIsbmUpO2NvbnN0IGllPTIwNDgscHQ9bmV3IE1hcDtmdW5jdGlvbiBvZShuKXtpZighcHQuaGFzKG4pKXtjb25zdCB0PW5ldyBGbG9hdDMyQXJyYXkobik7Zm9yKGxldCBlPTA7ZTxuO2UrKyl0W2VdPS41KigxLU1hdGguY29zKGsqZS9uKSk7cHQuc2V0KG4sdCl9cmV0dXJuIHB0LmdldChuKX1jbGFzcyBhZSBleHRlbmRzIGt0e3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6InBpdGNoRmFjdG9yIixkZWZhdWx0VmFsdWU6MX1dfWNvbnN0cnVjdG9yKHQpe3QucHJvY2Vzc29yT3B0aW9ucz17YmxvY2tTaXplOmllfSxzdXBlcih0KSx0aGlzLnRpbWVDdXJzb3I9MCx0aGlzLmZmdFNpemU9dGhpcy5ibG9ja1NpemUsdGhpcy5pbnZmZnRTaXplPTEvdGhpcy5mZnRTaXplLHRoaXMuaGFubldpbmRvdz1vZSh0aGlzLmZmdFNpemUpLHRoaXMuZmZ0PW5ldyBFdCh0aGlzLmZmdFNpemUpLHRoaXMuZnJlcUNvbXBsZXhCdWZmZXI9dGhpcy5mZnQuY3JlYXRlQ29tcGxleEFycmF5KCksdGhpcy5mcmVxQ29tcGxleEJ1ZmZlclNoaWZ0ZWQ9dGhpcy5mZnQuY3JlYXRlQ29tcGxleEFycmF5KCksdGhpcy50aW1lQ29tcGxleEJ1ZmZlcj10aGlzLmZmdC5jcmVhdGVDb21wbGV4QXJyYXkoKSx0aGlzLm1hZ25pdHVkZXM9bmV3IEZsb2F0MzJBcnJheSh0aGlzLmZmdFNpemUvMisxKSx0aGlzLnBlYWtJbmRleGVzPW5ldyBJbnQzMkFycmF5KHRoaXMubWFnbml0dWRlcy5sZW5ndGgpLHRoaXMubmJQZWFrcz0wfXByb2Nlc3NPTEEodCxlLHMpe2xldCByPXMucGl0Y2hGYWN0b3Jbcy5waXRjaEZhY3Rvci5sZW5ndGgtMV07cjwwJiYocj1yKi4yNSkscj1NYXRoLm1heCgwLHIrMSk7Zm9yKGxldCBpPTA7aTx0aGlzLm5iSW5wdXRzO2krKylmb3IobGV0IG89MDtvPHRbaV0ubGVuZ3RoO28rKyl7Y29uc3QgYT10W2ldW29dLHU9ZVtpXVtvXTt0aGlzLmFwcGx5SGFubldpbmRvdyhhKSx0aGlzLmZmdC5yZWFsVHJhbnNmb3JtKHRoaXMuZnJlcUNvbXBsZXhCdWZmZXIsYSksdGhpcy5jb21wdXRlTWFnbml0dWRlcygpLHRoaXMuZmluZFBlYWtzKCksdGhpcy5zaGlmdFBlYWtzKHIpLHRoaXMuZmZ0LmNvbXBsZXRlU3BlY3RydW0odGhpcy5mcmVxQ29tcGxleEJ1ZmZlclNoaWZ0ZWQpLHRoaXMuZmZ0LmludmVyc2VUcmFuc2Zvcm0odGhpcy50aW1lQ29tcGxleEJ1ZmZlcix0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZCksdGhpcy5mZnQuZnJvbUNvbXBsZXhBcnJheSh0aGlzLnRpbWVDb21wbGV4QnVmZmVyLHUpLHRoaXMuYXBwbHlIYW5uV2luZG93KHUpfXRoaXMudGltZUN1cnNvcis9dGhpcy5ob3BTaXplfWFwcGx5SGFubldpbmRvdyh0KXtmb3IobGV0IGU9MDtlPHRoaXMuYmxvY2tTaXplO2UrKyl0W2VdKj10aGlzLmhhbm5XaW5kb3dbZV0qMS42Mn1jb21wdXRlTWFnbml0dWRlcygpe2xldCB0PTAsZT0wO2Zvcig7dDx0aGlzLm1hZ25pdHVkZXMubGVuZ3RoOyl7Y29uc3Qgcz10aGlzLmZyZXFDb21wbGV4QnVmZmVyW2VdLHI9dGhpcy5mcmVxQ29tcGxleEJ1ZmZlcltlKzFdO3RoaXMubWFnbml0dWRlc1t0XT1zKioyK3IqKjIsdCs9MSxlKz0yfX1maW5kUGVha3MoKXt0aGlzLm5iUGVha3M9MDtsZXQgdD0yO2NvbnN0IGU9dGhpcy5tYWduaXR1ZGVzLmxlbmd0aC0yO2Zvcig7dDxlOyl7Y29uc3Qgcz10aGlzLm1hZ25pdHVkZXNbdF07aWYodGhpcy5tYWduaXR1ZGVzW3QtMV0+PXN8fHRoaXMubWFnbml0dWRlc1t0LTJdPj1zKXt0Kys7Y29udGludWV9aWYodGhpcy5tYWduaXR1ZGVzW3QrMV0+PXN8fHRoaXMubWFnbml0dWRlc1t0KzJdPj1zKXt0Kys7Y29udGludWV9dGhpcy5wZWFrSW5kZXhlc1t0aGlzLm5iUGVha3NdPXQsdGhpcy5uYlBlYWtzKyssdCs9Mn19c2hpZnRQZWFrcyh0KXt0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZC5maWxsKDApO2ZvcihsZXQgZT0wO2U8dGhpcy5uYlBlYWtzO2UrKyl7Y29uc3Qgcz10aGlzLnBlYWtJbmRleGVzW2VdLHI9VShzKnQpO2lmKHI+dGhpcy5tYWduaXR1ZGVzLmxlbmd0aClicmVhaztsZXQgaT0wLG89dGhpcy5mZnRTaXplO2U+MCYmKGk9cy1VKChzLXRoaXMucGVha0luZGV4ZXNbZS0xXSkvMikpLGU8dGhpcy5uYlBlYWtzLTEmJihvPXMrWnQoKHRoaXMucGVha0luZGV4ZXNbZSsxXS1zKS8yKSk7Y29uc3QgYT1pLXMsdT1vLXMsYz1rKnRoaXMuaW52ZmZ0U2l6ZSooci1zKSxoPU1hdGguY29zKGMqdGhpcy50aW1lQ3Vyc29yKSxmPU1hdGguc2luKGMqdGhpcy50aW1lQ3Vyc29yKTtmb3IobGV0IGQ9YTtkPHU7ZCsrKXtjb25zdCBsPXMrZCxwPXIrZDtpZihwPj10aGlzLm1hZ25pdHVkZXMubGVuZ3RoKWJyZWFrO2NvbnN0IG09MipsLEk9bSsxLGc9dGhpcy5mcmVxQ29tcGxleEJ1ZmZlclttXSx2PXRoaXMuZnJlcUNvbXBsZXhCdWZmZXJbSV0sdz1nKmgtdipmLFA9ZypmK3YqaCxTPTIqcCxWPVMrMTt0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZFtTXSs9dyx0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZFtWXSs9UH19fX1yZWdpc3RlclByb2Nlc3NvcigicGhhc2Utdm9jb2Rlci1wcm9jZXNzb3IiLGFlKTtjbGFzcyBjZSBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3Nvcntjb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5waGk9LVIsdGhpcy5ZMD0wLHRoaXMuWTE9MCx0aGlzLlBXPVIsdGhpcy5CPTIuMyx0aGlzLmRwaGlmPTAsdGhpcy5lbnZmPTB9c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToiYmVnaW4iLGRlZmF1bHRWYWx1ZTowLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksbWluOjB9LHtuYW1lOiJlbmQiLGRlZmF1bHRWYWx1ZTowLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksbWluOjB9LHtuYW1lOiJmcmVxdWVuY3kiLGRlZmF1bHRWYWx1ZTo0NDAsbWluOk51bWJlci5FUFNJTE9OfSx7bmFtZToiZGV0dW5lIixkZWZhdWx0VmFsdWU6MCxtaW46TnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFl9LHtuYW1lOiJwdWxzZXdpZHRoIixkZWZhdWx0VmFsdWU6MSxtaW46MCxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZfV19cHJvY2Vzcyh0LGUscyl7aWYodGhpcy5kaXNjb25uZWN0ZWQpcmV0dXJuITE7aWYoY3VycmVudFRpbWU8PXMuYmVnaW5bMF0pcmV0dXJuITA7aWYoY3VycmVudFRpbWU+PXMuZW5kWzBdKXJldHVybiExO2NvbnN0IHI9ZVswXTtsZXQgaT0xLG87Zm9yKGxldCBhPTA7YTwoclswXS5sZW5ndGg/PzApO2ErKyl7Y29uc3QgdT0oMS1UKGIocy5wdWxzZXdpZHRoLGEpLC0uOTksLjk5KSkqUixjPWIocy5kZXR1bmUsYSksaD1aKGIocy5mcmVxdWVuY3ksYSksYy8xMDApO289aCprKnEsdGhpcy5kcGhpZis9LjEqKG8tdGhpcy5kcGhpZiksaSo9Ljk5OTgsdGhpcy5lbnZmKz0uMSooaS10aGlzLmVudmYpLHRoaXMuQj0yLjMqKDEtMWUtNCpoKSx0aGlzLkI8MCYmKHRoaXMuQj0wKSx0aGlzLnBoaSs9dGhpcy5kcGhpZix0aGlzLnBoaT49UiYmKHRoaXMucGhpLT1rKTtsZXQgZj1NYXRoLmNvcyh0aGlzLnBoaSt0aGlzLkIqdGhpcy5ZMCk7dGhpcy5ZMD0uNSooZit0aGlzLlkwKTtsZXQgZD1NYXRoLmNvcyh0aGlzLnBoaSt0aGlzLkIqdGhpcy5ZMSt1KTt0aGlzLlkxPS41KihkK3RoaXMuWTEpO2ZvcihsZXQgbD0wO2w8ci5sZW5ndGg7bCsrKXJbbF1bYV09LjE1KihmLWQpKnRoaXMuZW52Zn1yZXR1cm4hMH19cmVnaXN0ZXJQcm9jZXNzb3IoInB1bHNlLW9zY2lsbGF0b3IiLGNlKTtjb25zdCBtdD17Yml0QzpmdW5jdGlvbihuLHQsZSl7cmV0dXJuIG4mdD9lOjB9LGJyOmZ1bmN0aW9uKG4sdD04KXtpZih0PjMyKXRocm93IG5ldyBFcnJvcigiYnIoKSBTaXplIGNhbm5vdCBiZSBncmVhdGVyIHRoYW4gMzIiKTtsZXQgZT0wO2ZvcihsZXQgcz0wO3M8dDtzKyspZXw9bXQuYml0QyhuLDE8PHMsMTw8dC0ocysxKSk7cmV0dXJuIGV9LHNpbmY6ZnVuY3Rpb24obil7cmV0dXJuIE1hdGguc2luKG4qUi8xMjgpfSxjb3NmOmZ1bmN0aW9uKG4pe3JldHVybiBNYXRoLmNvcyhuKlIvMTI4KX0sdGFuZjpmdW5jdGlvbihuKXtyZXR1cm4gTWF0aC50YW4obipSLzEyOCl9LHJlZ0c6ZnVuY3Rpb24obix0KXtyZXR1cm4gdC50ZXN0KG4udG9TdHJpbmcoMikpfX07bGV0IHR0LHZ0O2Z1bmN0aW9uIHVlKG4pe2lmKHR0PT1udWxsKXt0dD1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhNYXRoKSx2dD10dC5tYXAocz0+TWF0aFtzXSk7Y29uc3QgdD1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhtdCksZT10Lm1hcChzPT5tdFtzXSk7dHQucHVzaCgiaW50Iiwid2luZG93IiwuLi50KSx2dC5wdXNoKE1hdGguZmxvb3IsZ2xvYmFsVGhpcywuLi5lKX1yZXR1cm4gbmV3IEZ1bmN0aW9uKC4uLnR0LCJ0IixgcmV0dXJuIDAsCiR7bnx8MH07YCkuYmluZChnbG9iYWxUaGlzLC4uLnZ0KX1jbGFzcyBoZSBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3Nvcntjb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5wb3J0Lm9ubWVzc2FnZT10PT57bGV0e2NvZGVUZXh0OmV9PXQuZGF0YTtjb25zdHtieXRlQmVhdFN0YXJ0VGltZTpzfT10LmRhdGE7cyE9bnVsbCYmKHRoaXMudD0wLHRoaXMuaW5pdGlhbE9mZnNldD1NYXRoLmZsb29yKHMpKSxlPWUudHJpbSgpLnJlcGxhY2UoL15ldmFsXCh1bmVzY2FwZVwoZXNjYXBlKD86YHxcKCd8XCgifFwoYCkoLio/KSg/OmB8J1wpfCJcKXxgXCkpLnJlcGxhY2VcKFwvdVwoXC5cLlwpXC9nLFsiJ2BdXCQxJVsiJ2BdXClcKVwpJC8sKHIsaSk9PnVuZXNjYXBlKGVzY2FwZShpKS5yZXBsYWNlKC91KC4uKS9nLCIkMSUiKSkpLHRoaXMuZnVuYz11ZShlKX0sdGhpcy5pbml0aWFsT2Zmc2V0PTAsdGhpcy50PW51bGwsdGhpcy5mdW5jPW51bGx9c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToiYmVnaW4iLGRlZmF1bHRWYWx1ZTowLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksbWluOjB9LHtuYW1lOiJmcmVxdWVuY3kiLGRlZmF1bHRWYWx1ZTo0NDAsbWluOk51bWJlci5FUFNJTE9OfSx7bmFtZToiZGV0dW5lIixkZWZhdWx0VmFsdWU6MCxtaW46TnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFl9LHtuYW1lOiJlbmQiLGRlZmF1bHRWYWx1ZTowLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksbWluOjB9XX1wcm9jZXNzKHQsZSxzKXtpZih0aGlzLmRpc2Nvbm5lY3RlZClyZXR1cm4hMTtpZihjdXJyZW50VGltZTw9cy5iZWdpblswXSlyZXR1cm4hMDtpZihjdXJyZW50VGltZT49cy5lbmRbMF0pcmV0dXJuITE7dGhpcy50PT1udWxsJiYodGhpcy50PXMuYmVnaW5bMF0qc2FtcGxlUmF0ZSk7Y29uc3Qgcj1lWzBdLGk9MjU2KnE7Zm9yKGxldCBvPTA7bzxyWzBdLmxlbmd0aDtvKyspe2NvbnN0IGE9YihzLmRldHVuZSxvKSx1PVooYihzLmZyZXF1ZW5jeSxvKSxhLzEwMCksYz1pKnUqdGhpcy50K3RoaXMuaW5pdGlhbE9mZnNldCxmPSh0aGlzLmZ1bmMoYykmMjU1KS8xMjcuNS0xLGQ9VChmKi4yLC0uNCwuNCk7Zm9yKGxldCBsPTA7bDxyLmxlbmd0aDtsKyspcltsXVtvXT1kO3RoaXMudCsrfXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigiYnl0ZS1iZWF0LXByb2Nlc3NvciIsaGUpO2NsYXNzIGxlIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImJlZ2luIixkZWZhdWx0VmFsdWU6MH0se25hbWU6ImVuZCIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJhdHRhY2siLGRlZmF1bHRWYWx1ZTouMDA1LG1pblZhbHVlOjB9LHtuYW1lOiJkZWNheSIsZGVmYXVsdFZhbHVlOi4xNCxtaW5WYWx1ZTowfSx7bmFtZToic3VzdGFpbiIsZGVmYXVsdFZhbHVlOjAsbWluVmFsdWU6MCxtYXhWYWx1ZToxfSx7bmFtZToicmVsZWFzZSIsZGVmYXVsdFZhbHVlOi4xLG1pblZhbHVlOjB9LHtuYW1lOiJhdHRhY2tDdXJ2ZSIsZGVmYXVsdFZhbHVlOjAsbWluVmFsdWU6LTEsbWF4VmFsdWU6MX0se25hbWU6ImRlY2F5Q3VydmUiLGRlZmF1bHRWYWx1ZTowLG1pblZhbHVlOi0xLG1heFZhbHVlOjF9LHtuYW1lOiJyZWxlYXNlQ3VydmUiLGRlZmF1bHRWYWx1ZTowLG1pblZhbHVlOi0xLG1heFZhbHVlOjF9LHtuYW1lOiJwZWFrIixkZWZhdWx0VmFsdWU6MX0se25hbWU6InJldHJpZ2dlciIsZGVmYXVsdFZhbHVlOjEsbWluVmFsdWU6MCxtYXhWYWx1ZToxfV19Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMudmFsPTAsdGhpcy5zZWdJZHg9MCx0aGlzLnN0YXRlPTAsdGhpcy5iZWdpblRpbWU9MCx0aGlzLmVuZFRpbWU9MCx0aGlzLmF0dGFja1N0YXJ0PTB9X3dhcnAodCxlLHM9OCl7aWYodD09PTB8fHQ9PT0xKXJldHVybiB0O2lmKGU+MCl7Y29uc3Qgcj0xK3MqZTtyZXR1cm4gMS1NYXRoLnBvdygxLXQscil9ZWxzZXtjb25zdCByPTEtcyplO3JldHVybiBNYXRoLnBvdyh0LHIpfX1fYWR2YW5jZSh0LGUscyxyKXtpZihzPT09MHx8dD09PWUpdGhpcy52YWw9ZTtlbHNle2NvbnN0IGk9TWF0aC5taW4oMSwoY3VycmVudFRpbWUtdGhpcy5iZWdpblRpbWUpL3MpLG89dGhpcy5fd2FycChpLHIpO3RoaXMudmFsPXQrKGUtdCkqb319cHJvY2Vzcyh0LGUscyl7Y29uc3Qgcj1lWzBdWzBdO2lmKCFyKXJldHVybiEwO2NvbnN0IGk9YihzLmJlZ2luLDApLG89YihzLnJldHJpZ2dlciwwKT49LjU7aSE9PXRoaXMuYmVnaW5UaW1lJiYodGhpcy5zdGF0ZT09PTB8fG8pJiYodGhpcy5iZWdpblRpbWU9aSx0aGlzLnN0YXRlPTEsdGhpcy5lbmRUaW1lPWIocy5lbmQsMCksdGhpcy5hdHRhY2tTdGFydD10aGlzLnZhbCk7Y29uc3QgYT10aGlzLmVuZFRpbWUtdGhpcy5iZWdpblRpbWU7Zm9yKGxldCB1PTA7dTxyLmxlbmd0aDt1Kyspe2NvbnN0IGM9YihzLmF0dGFjayx1KSxoPWIocy5kZWNheSx1KSxmPWIocy5zdXN0YWluLHUpLGQ9YihzLnJlbGVhc2UsdSksbD1iKHMuYXR0YWNrQ3VydmUsdSkscD1iKHMuZGVjYXlDdXJ2ZSx1KSxtPWIocy5yZWxlYXNlQ3VydmUsdSksST1iKHMucGVhayx1KSxnPVt7dGltZTpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksc3RhcnQ6MCx0YXJnZXQ6MH0se3RpbWU6YyxzdGFydDp0aGlzLmF0dGFja1N0YXJ0LHRhcmdldDoxLGN1cnZlOmx9LHt0aW1lOmMraCxzdGFydDoxLHRhcmdldDpmLGN1cnZlOnB9LHt0aW1lOmEsc3RhcnQ6Zix0YXJnZXQ6Zn0se3RpbWU6YStkLHN0YXJ0OmYsdGFyZ2V0OjAsY3VydmU6bX1dO2xldHt0aW1lOnYsc3RhcnQ6dyx0YXJnZXQ6UCxjdXJ2ZTpTfT1nW3RoaXMuc3RhdGVdO2Zvcih0aGlzLl9hZHZhbmNlKHcsUCx2LFMpO2N1cnJlbnRUaW1lLXRoaXMuYmVnaW5UaW1lPj12Oyl0aGlzLnN0YXRlPSh0aGlzLnN0YXRlKzEpJWcubGVuZ3RoLHY9Z1t0aGlzLnN0YXRlXS50aW1lO3JbdV09dGhpcy52YWwqSX1yZXR1cm4hMH19cmVnaXN0ZXJQcm9jZXNzb3IoImVudmVsb3BlLXByb2Nlc3NvciIsbGUpO2NvbnN0IEI9T2JqZWN0LmZyZWV6ZSh7Tk9ORTowLEFTWU06MSxNSVJST1I6MixCRU5EUDozLEJFTkRNOjQsQkVORE1QOjUsU1lOQzo2LFFVQU5UOjcsRk9MRDo4LFBXTTo5LE9SQklUOjEwLFNQSU46MTEsQ0hBT1M6MTIsUFJJTUVTOjEzLEJJTkFSWToxNCxCUk9XTklBTjoxNSxSRUNJUFJPQ0FMOjE2LFdPUk1IT0xFOjE3LExPR0lTVElDOjE4LFNJR01PSUQ6MTksRlJBQ1RBTDoyMCxGTElQOjIxfSk7ZnVuY3Rpb24gZmUobil7cmV0dXJuIG49bisyMTI3OTEyMjE0KyhuPDwxMiksbj1uXjMzNDUwNzI3MDBebj4+PjE5LG49biszNzQ3NjEzOTMrKG48PDUpLG49biszNTUwNjM1MTE2Xm48PDksbj1uKzQyNTE5OTM3OTcrKG48PDMpLG49bl4zMDQyNTk0NTY5Xm4+Pj4xNixuPj4+MH1jb25zdCBGdD1uPT4oZmUobik+Pj44KS8xNjc3NzIxNjtmdW5jdGlvbiBkZShuLHQpe2xldCBlPTA7Zm9yKGxldCBzPTA7czx0O3MrKyllPWU8PDF8biYxLG4+Pj49MTtyZXR1cm4gZX1mdW5jdGlvbiBwZShuKXtjb25zdCB0PU1hdGguZmxvb3IobiksZT1uLXQscz1GdCh0KSxyPUZ0KHQrMSk7cmV0dXJuIHMrKHItcykqZX1mdW5jdGlvbiBtZShuLHQ9NCl7bGV0IGU9LjUscz0wLHI9MCxpPTE7Zm9yKGxldCBvPTA7bzx0O28rKylzKz1lKnBlKG4qaSkscis9ZSxlKj0uNSxpKj0yO3JldHVybiBzL3IqMi0xfWNvbnN0IGd0PXt9O2NsYXNzIHZlIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImJlZ2luIixkZWZhdWx0VmFsdWU6MCxtaW46MCxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZfSx7bmFtZToiZW5kIixkZWZhdWx0VmFsdWU6MCxtaW46MCxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZfSx7bmFtZToiZnJlcXVlbmN5IixkZWZhdWx0VmFsdWU6NDQwLG1pbjpOdW1iZXIuRVBTSUxPTn0se25hbWU6ImRldHVuZSIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJmcmVxc3ByZWFkIixkZWZhdWx0VmFsdWU6LjE4LG1pbjowfSx7bmFtZToicG9zaXRpb24iLGRlZmF1bHRWYWx1ZTowLG1pbjowLG1heDoxfSx7bmFtZToid2FycCIsZGVmYXVsdFZhbHVlOjAsbWluOjAsbWF4OjF9LHtuYW1lOiJ3YXJwTW9kZSIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJ2b2ljZXMiLGRlZmF1bHRWYWx1ZToxLG1pbjoxLGF1dG9tYXRpb25SYXRlOiJrLXJhdGUifSx7bmFtZToicGFuc3ByZWFkIixkZWZhdWx0VmFsdWU6LjcsbWluOjAsbWF4OjF9LHtuYW1lOiJwaGFzZXJhbmQiLGRlZmF1bHRWYWx1ZTowLG1pbjowLG1heDoxfV19Y29uc3RydWN0b3IodCl7c3VwZXIodCksdGhpcy5mcmFtZUxlbj0wLHRoaXMubnVtRnJhbWVzPTAsdGhpcy5waGFzZT1bXSx0aGlzLnBvcnQub25tZXNzYWdlPWU9Pntjb25zdHt0eXBlOnMscGF5bG9hZDpyfT1lLmRhdGF8fHt9O2lmKHM9PT0idGFibGUiKXtjb25zdCBpPXIua2V5O2lmKHRoaXMuZnJhbWVMZW49ci5mcmFtZUxlbiwhZ3RbaV0pe2NvbnN0IG89W3IuZnJhbWVzXTtsZXQgYT1vWzBdO2ZvcihsZXQgdT0xO3U8MTt1Kyspe2NvbnN0IGM9YS5sZW5ndGg+PjEsaD1hLm1hcChmPT57Y29uc3QgZD1uZXcgRmxvYXQzMkFycmF5KGMpO2ZvcihsZXQgbD0wO2w8YztsKyspZFtsXT0oZlsyKmxdK2ZbMipsKzFdKS8yO3JldHVybiBkfSk7aWYoby5wdXNoKGgpLGE9aCxjPD0zMilicmVha31ndFtpXT1vfXRoaXMudGFibGVzPWd0W2ldLHRoaXMubnVtRnJhbWVzPXRoaXMudGFibGVzWzBdLmxlbmd0aH19fV9taXJyb3IodCl7cmV0dXJuIDEtTWF0aC5hYnMoMip0LTEpfV90b0JpdHModCxlPTIscz0xMil7Y29uc3Qgcj1zKyhlLXMpKnQ7cmV0dXJue2I6cixuOlUoTWF0aC5wb3coMixyKSl9fV93YXJwUGhhc2UodCxlLHMpe3N3aXRjaChzKXtjYXNlIEIuTk9ORTpyZXR1cm4gdDtjYXNlIEIuQVNZTTp7Y29uc3Qgcj0uMDErLjk5KmU7cmV0dXJuIHQ8cj8uNSp0L3I6LjUrLjUqKHQtcikvKDEtcil9Y2FzZSBCLk1JUlJPUjpyZXR1cm4gdGhpcy5fbWlycm9yKHRoaXMuX3dhcnBQaGFzZSh0LGUsQi5BU1lNKSk7Y2FzZSBCLkJFTkRQOnJldHVybiBNYXRoLnBvdyh0LDErMyplKTtjYXNlIEIuQkVORE06cmV0dXJuIE1hdGgucG93KHQsMS8oMSszKmUpKTtjYXNlIEIuQkVORE1QOnJldHVybiBlPC41P3RoaXMuX3dhcnBQaGFzZSh0LDEtMiplLDMpOnRoaXMuX3dhcnBQaGFzZSh0LDIqZS0xLDIpO2Nhc2UgQi5TWU5DOntjb25zdCByPU1hdGgucG93KDE2LGUqKjIpO3JldHVybiB0KnIlMX1jYXNlIEIuUVVBTlQ6e2NvbnN0e246cn09dGhpcy5fdG9CaXRzKGUpO3JldHVybiBLKHQqcikvcn1jYXNlIEIuRk9MRDp7Y29uc3QgaT0xK01hdGgubWF4KDEsVSg3KmUpKTtyZXR1cm4gTWF0aC5hYnMoQXQoaSp0KS0uNSkqMn1jYXNlIEIuUFdNOntjb25zdCByPVQoLjUrLjQ5KigyKmUtMSksMCwxKTtyZXR1cm4gdDxyP3QvciouNTouNSsodC1yKS8oMS1yKSouNX1jYXNlIEIuT1JCSVQ6e2NvbnN0IHI9LjUqZTtyZXR1cm4gSCh0K3IqTWF0aC5zaW4oayozKnQpKX1jYXNlIEIuU1BJTjp7Y29uc3Qgcj0uNSplLHtuOml9PXRoaXMuX3RvQml0cyhlLDEsNik7cmV0dXJuIEgodCtyKk1hdGguc2luKGsqaSp0KSl9Y2FzZSBCLkNIQU9TOntjb25zdCBpPSgzLjcrLjMqZSkqdCooMS10KTtyZXR1cm4gVCgoMS1lKSp0K2UqaSwwLDEpfWNhc2UgQi5QUklNRVM6e2NvbnN0IHI9bz0+e2lmKG88MilyZXR1cm4hMTtpZihvJTI9PT0wKXJldHVybiBvPT09Mjtmb3IobGV0IGE9MzthKioyPD1vO2ErPTIpaWYobyVhPT09MClyZXR1cm4hMTtyZXR1cm4hMH07bGV0e246aX09dGhpcy5fdG9CaXRzKGUsMyk7Zm9yKDshcihpKTspaSsrO3JldHVybiBLKHQqaSkvaX1jYXNlIEIuQklOQVJZOntsZXR7YjpyfT10aGlzLl90b0JpdHMoZSwzKTtyPVUocik7Y29uc3QgaT0xPDxyLG89Syh0KmkpO3JldHVybiBkZShvLHIpL2l9Y2FzZSBCLkJST1dOSUFOOntjb25zdCByPS4yNSplKm1lKDY0KnQsNCk7cmV0dXJuIEgodCtyKX1jYXNlIEIuUkVDSVBST0NBTDp7Y29uc3Qgcj0yKzQqZSxpPXQqcixvPXQrKDEtdCkqcixhPW8+MWUtMTI/aS9vOjA7cmV0dXJuIFQoYSwwLDEpfWNhc2UgQi5XT1JNSE9MRTp7Y29uc3Qgcj1UKC44KmUsMCwxKSxpPS41KigxLXIpLG89LjUqKDErcik7cmV0dXJuIHQ8aT90L2kqLjU6dD5vPy41KigxKyh0LW8pLygxLW8pKTouNX1jYXNlIEIuTE9HSVNUSUM6e2xldCByPXQ7Y29uc3QgaT0zLjYrLjQqZSxvPTErVSgyKmUpO2ZvcihsZXQgYT0wO2E8bzthKyspcj1pKnIqKDEtcik7cmV0dXJuIFQociwwLDEpfWNhc2UgQi5TSUdNT0lEOntjb25zdCByPTErMTAqZSxpPXQtLjUsbz0xLygxK01hdGguZXhwKC1yKmkpKSxhPTEvKDErTWF0aC5leHAoLjUqcikpLHU9MS8oMStNYXRoLmV4cCgtLjUqcikpO3JldHVybihvLWEpLyh1LWEpfWNhc2UgQi5GUkFDVEFMOntjb25zdCByPS41Kk1hdGguc2luKGsqdCkqZTtyZXR1cm4gSCh0K3IpfWNhc2UgQi5GTElQOnJldHVybiB0O2RlZmF1bHQ6cmV0dXJuIHR9fV9zYW1wbGVGcmFtZSh0LGUpe2NvbnN0IHM9dC5sZW5ndGgscj1lKnM7bGV0IGk9cnwwO2k+PXMmJihpPTApO2NvbnN0IG89ci1pLGE9dFtpXTtsZXQgdT1pKzE7dT49cyYmKHU9MCk7Y29uc3QgYz10W3VdO3JldHVybiBhKyhjLWEpKm99X2Nob29zZU1pcCh0KXtjb25zdCBlPVQodCwxZS02LDY0KTtsZXQgcz0wO2Zvcig7cysxPCh0aGlzLnRhYmxlcz8ubGVuZ3RofHwxKSYmZTx0aGlzLnRhYmxlc1tzXVswXS5sZW5ndGgvODspcysrO3JldHVybiBzfXByb2Nlc3ModCxlLHMpe2lmKGN1cnJlbnRUaW1lPj1zLmVuZFswXSlyZXR1cm4hMTtpZihjdXJyZW50VGltZTw9cy5iZWdpblswXSlyZXR1cm4hMDtjb25zdCByPWVbMF1bMF0saT1lWzBdWzFdfHxlWzBdWzBdO2lmKCF0aGlzLnRhYmxlcylyZXR1cm4gci5maWxsKDApLGkhPT1yJiZpLnNldChyKSwhMDtjb25zdCBvPXMudm9pY2VzWzBdO2ZvcihsZXQgYT0wO2E8ci5sZW5ndGg7YSsrKXtjb25zdCB1PWIocy5kZXR1bmUsYSksYz1iKHMuZnJlcXNwcmVhZCxhKSxmPVQoYihzLnBvc2l0aW9uLGEpLDAsMSkqKHRoaXMubnVtRnJhbWVzLTEpLGQ9ZnwwLGw9Zi1kLHA9VChiKHMud2FycCxhKSwwLDEpLG09YihzLndhcnBNb2RlLGEpLEk9VChiKHMucGhhc2VyYW5kLGEpLDAsMSksZz1vPjE/VChiKHMucGFuc3ByZWFkLGEpLDAsMSk6MCx2PU1hdGguc3FydCguNS0uNSpnKSx3PU1hdGguc3FydCguNSsuNSpnKTtsZXQgUD1iKHMuZnJlcXVlbmN5LGEpO1A9WihQLHUvMTAwKTtjb25zdCBTPTEvTWF0aC5zcXJ0KG8pLFY9TnQobyxjKTtmb3IobGV0IE09MDtNPG87TSsrKXtjb25zdCB4PShNJjEpPT0xO2xldCB5PXYsQT13O3gmJih5PXcsQT12KTtjb25zdCBOPVooUCxWKE0pKSpxLEU9dGhpcy5fY2hvb3NlTWlwKE4pLE89dGhpcy50YWJsZXNbRV07dGhpcy5waGFzZVtNXT10aGlzLnBoYXNlW01dPz9NYXRoLnJhbmRvbSgpKkk7Y29uc3QgRj10aGlzLl93YXJwUGhhc2UodGhpcy5waGFzZVtNXSxwLG0pLEQ9dGhpcy5fc2FtcGxlRnJhbWUoT1tkXSxGKSxMPXRoaXMuX3NhbXBsZUZyYW1lKE9bTWF0aC5taW4odGhpcy5udW1GcmFtZXMtMSxkKzEpXSxGKTtsZXQgQz1VdChELEwsbCk7bT09PUIuRkxJUCYmdGhpcy5waGFzZVtNXTxwJiYoQz0tQyksclthXSs9Qyp5KlMsaVthXSs9QypBKlMsdGhpcy5waGFzZVtNXT1IKHRoaXMucGhhc2VbTV0rTil9fXJldHVybiEwfX1yZXR1cm4gcmVnaXN0ZXJQcm9jZXNzb3IoIndhdmV0YWJsZS1vc2NpbGxhdG9yLXByb2Nlc3NvciIsdmUpLGZ0LldhcnBNb2RlPUIsT2JqZWN0LmRlZmluZVByb3BlcnR5KGZ0LFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6Ik1vZHVsZSJ9KSxmdH0pKHt9KTsK";let audioContext;const setDefaultAudioContext=()=>(audioContext=new AudioContext,audioContext),getAudioContext=()=>audioContext||setDefaultAudioContext();function getAudioContextCurrentTime(){return getAudioContext().currentTime}let noiseCache={};function getNoiseBuffer(e,o){const l=getAudioContext();if(noiseCache[e])return noiseCache[e];const d=2*l.sampleRate,O=l.createBuffer(1,d,l.sampleRate),A=O.getChannelData(0);let S=0,$,F,E,L,N,V,B;$=F=E=L=N=V=B=0;for(let U=0;U<d;U++)if(e==="white")A[U]=Math.random()*2-1;else if(e==="brown"){let q=Math.random()*2-1;A[U]=(S+.02*q)/1.02,S=A[U]}else if(e==="pink"){let q=Math.random()*2-1;$=.99886*$+q*.0555179,F=.99332*F+q*.0750759,E=.969*E+q*.153852,L=.8665*L+q*.3104856,N=.55*N+q*.5329522,V=-.7616*V-q*.016898,A[U]=$+F+E+L+N+V+B+q*.5362,A[U]*=.11,B=q*.115926}else if(e==="crackle"){const q=o*.01;Math.random()<q?A[U]=Math.random()*2-1:A[U]=0}return e!=="crackle"&&(noiseCache[e]=O),O}function getNoiseOscillator(e="white",o,l=.02){const O=getAudioContext().createBufferSource();return O.buffer=getNoiseBuffer(e,l),O.loop=!0,O.start(o),{node:O,stop:A=>O.stop(A)}}function getNoiseMix(e,o,l){const d=getNoiseOscillator("pink",l),O=drywet(e,d.node,o);return d.node.onended=()=>O.onended(),{node:O.node,stop:A=>d?.stop(A)}}const noises=["pink","white","brown","crackle"];function gainNode(e){const o=getAudioContext().createGain();return o.gain.value=e,o}function effectSend(e,o,l){const d=gainNode(l);return e.connect(d),d.connect(o),d}const getSlope=(e,o,l,d)=>d-l===0?0:(o-e)/(d-l);function getWorklet(e,o,l,d){const O=new AudioWorkletNode(e,o,d);return Object.entries(l).forEach(([A,S])=>{S!==void 0&&(O.parameters.get(A).value=S)}),O}const getParamADSR=(e,o,l,d,O,A,S,$,F,E="exponential")=>{o=nanFallback(o),l=nanFallback(l),d=nanFallback(d),O=nanFallback(O);const L=E==="exponential"?"exponentialRampToValueAtTime":"linearRampToValueAtTime";E==="exponential"&&(A=A===0?.001:A,S=S===0?.001:S);const N=S-A,V=S,B=A+d*N,U=F-$,q=ee=>{let le;if(o>ee){let ue=getSlope(A,V,0,o);le=ee*ue+(A>V?A:0)}else le=(ee-o)*getSlope(V,B,0,l)+V;return E==="exponential"&&(le=le||.001),le};e.setValueAtTime(A,$),o>U?e[L](q(U),F):o+l>U?(e[L](q(o),$+o),e[L](q(U),F)):(e[L](q(o),$+o),e[L](q(o+l),$+o+l),e.setValueAtTime(B,F)),e[L](A,F+O)};function getModulationShapeInput(e){return typeof e=="number"?e%5:{tri:0,triangle:0,sine:1,ramp:2,saw:3,square:4}[e]??0}function getLfo(e,o,l,d={}){const{shape:O=0,...A}=d,{dcoffset:S=-.5,depth:$=1}=d,F={frequency:1,depth:$,skew:.5,phaseoffset:0,time:o,begin:o,end:l,shape:getModulationShapeInput(O),dcoffset:S,min:S*$,max:S*$+$,curve:1,...A};return getWorklet(e,"lfo-processor",F)}function getCompressor(e,o,l,d,O,A){const S={threshold:o??-3,ratio:l??10,knee:d??10,attack:O??.005,release:A??.05};return new DynamicsCompressorNode(e,S)}const getADSRValues=(e,o="linear",l)=>{const[S,$,F,E]=e;if(S==null&&$==null&&F==null&&E==null)return l??[.001,.001,1,.01];const L=F??(S!=null&&$==null||S==null&&$==null?1:.001);return[Math.max(S??0,.001),Math.max($??0,.001),Math.min(L,1),Math.max(E??0,.01)]};function getParamLfo(e,o,l,d,O){let{defaultDepth:A=1,depth:S,dcoffset:$,...F}=O;S==null&&(S=Object.values(F).some(N=>N!=null)?A:0);let E;return S&&(E=getLfo(e,l,d,{depth:S,dcoffset:$,...F}),E.connect(o)),E}function applyParameterModulators(e,o,l,d,O,A){let{amount:S,offset:$,defaultAmount:F=1,curve:E="linear",values:L,holdEnd:N,defaultValues:V}=O;S==null&&(S=L.some(ue=>ue!=null)?F:0);const B=$??0,U=S+B;if(Math.abs(U-B)){const[le,ue,_e,ie]=getADSRValues(L,E,V);getParamADSR(o,le,ue,_e,ie,B,U,l,N,E)}const ee=getParamLfo(e,o,l,d,A);return{lfo:ee,disconnect:()=>ee?.disconnect()}}function createFilter(e,o,l,d,O,A){let{frequency:S,anchor:$,env:F,type:E,model:L,q:N=1,drive:V=.69,depth:B,depthfrequency:U,dcoffset:q=-.5,skew:ee,shape:le,rate:ue,sync:_e}=d,ie,ae;L==="ladder"?(ae=getWorklet(e,"ladder-processor",{frequency:S,q:N,drive:V}),ie=ae.parameters.get("frequency")):(ae=e.createBiquadFilter(),ae.type=E,ae.Q.value=N,ae.frequency.value=S,ie=ae.frequency);const fe=[d.attack,d.decay,d.sustain,d.release],[Oe,ve,Re,Me]=getADSRValues(fe,"exponential",[.005,.14,0,.1]);if([...fe,F].some(Ne=>Ne!==void 0)){F=nanFallback(F,1,!0),$=nanFallback($,0,!0);const Ne=Math.abs(F),Je=Ne*$;let je=clamp(2**-Je*S,0,2e4),qe=clamp(2**(Ne-Je)*S,0,2e4);F<0&&([je,qe]=[qe,je]),getParamADSR(ie,Oe,ve,Re,Me,je,qe,o,l,"exponential")}_e!=null&&(ue=O*_e);const Te=[B,U,ee,le,ue].some(Ne=>Ne!==void 0);let Ge;if(Te){B=B??1;const Ne=A/O,je={depth:U??(B??1)*S,dcoffset:q,skew:ee,shape:le,frequency:ue??O,min:-S+30,max:2e4-S,time:Ne,curve:1};Ge=getParamLfo(e,ie,o,l,je)}return{filter:ae,lfo:Ge}}let wetfade=e=>e<.5?1:1-(e-.5)/.5;function drywet(e,o,l=0){const d=getAudioContext();if(!l)return e;let O=d.createGain(),A=d.createGain();e.connect(O),o.connect(A),O.gain.value=wetfade(l),A.gain.value=wetfade(1-l);let S=d.createGain();return O.connect(S),A.connect(S),{node:S,onended:()=>{O.disconnect(S),A.disconnect(S),e.disconnect(O),o.disconnect(A)}}}let curves=["linear","exponential"];function getPitchEnvelope(e,o,l,d){if((o.pattack??o.pdecay??o.psustain??o.prelease??o.penv)===void 0)return;const A=nanFallback(o.penv,1,!0),S=curves[o.pcurve??0];let[$,F,E,L]=getADSRValues([o.pattack,o.pdecay,o.psustain,o.prelease],S,[.2,.001,1,.001]),N=o.panchor??E;const V=A*100,B=0-V*N,U=V-V*N;getParamADSR(e,$,F,E,L,B,U,l,d,S)}function getVibratoOscillator(e,o,l){const{vibmod:d=.5,vib:O}=o;let A;if(O>0){A=getAudioContext().createOscillator(),A.frequency.value=O;const S=getAudioContext().createGain();return S.gain.value=d*100,A.connect(S),S.connect(e),A.onended=()=>{S.disconnect(e),A.disconnect(S)},A.start(l),A}}function scheduleAtTime(e,o,l=getAudioContext()){const d=l.currentTime;webAudioTimeout(l,e,d,o)}function webAudioTimeout(e,o,l,d){const O=new ConstantSourceNode(e),A=gainNode(0);return A.connect(e.destination),O.connect(A),O.onended=()=>{try{A.disconnect()}catch{}try{O.disconnect()}catch{}o()},O.start(l),O.stop(d),O}const mod$2=(e,o=1,l="sine")=>{const d=getAudioContext();let O;noises.includes(l)?(O=d.createBufferSource(),O.buffer=getNoiseBuffer(l,2),O.loop=!0):(O=d.createOscillator(),O.type=l,O.frequency.value=e),O.start();const A=gainNode(o);return O.connect(A),{node:A,stop:S=>O.stop(S),osc:O}},fm=(e,o,l,d="sine")=>{const A=e.value*o,S=A*l;return mod$2(A,S,d)};function applyFM(e,o,l){const{fmh:d=1,fmi:O,fmenv:A="exp",fmattack:S,fmdecay:$,fmsustain:F,fmrelease:E,fmvelocity:L,fmwave:N="sine",duration:V}=o;let B,U=()=>{};if(O){const ee=getAudioContext().createGain(),le=fm(e,d,O,N);if(B=le.node,U=le.stop,![S,$,F,E,L].some(ue=>ue!==void 0))B.connect(e);else{const[ue,_e,ie,ae]=getADSRValues([S,$,F,E]),fe=l+V;getParamADSR(ee.gain,ue,_e,ie,ae,0,1,l,fe,A==="exp"?"exponential":"linear"),B.connect(ee),ee.connect(e)}le.osc.onended=()=>{ee.disconnect(),B.disconnect(),le.osc.disconnect()}}return{stop:U}}const __squash=e=>e/(1+e),_mod=(e,o)=>(e%o+o)%o,_scurve=(e,o)=>(1+o)*e/(1+o*Math.abs(e)),_soft=(e,o)=>Math.tanh(e*(1+o)),_hard=(e,o)=>clamp((1+o)*e,-1,1),_fold=(e,o)=>{let l=(1+.5*o)*e;const d=_mod(l+1,4);return 1-Math.abs(d-2)},_sineFold=(e,o)=>Math.sin(Math.PI/2*_fold(e,o)),_cubic=(e,o)=>{const l=__squash(Math.log1p(o)),d=(e-l/3*e*e*e)/(1-l/3);return _soft(d,o)},_diode=(e,o,l=!1)=>{const d=1+2*o,A=.07*__squash(Math.log1p(o)),S=_soft(e+A,2*o),$=_soft(l?A:-e+A,2*o),F=S-$,E=1/Math.cosh(d*A),L=E*E,N=Math.max(1e-8,(l?1:2)*d*L);return _soft(F/N,o)},_asym=(e,o)=>_diode(e,o,!0),_chebyshev=(e,o)=>{const l=10*Math.log1p(o);let d=1,O=e,A,S=0;for(let $=1;$<64;$++){if($<2){S+=$==0?d:O;continue}A=2*e*d-O,O=d,d=A,$%2===0&&(S+=Math.min(1.3*l/$,2)*A)}return _soft(S,l/20)},distortionAlgorithms={scurve:_scurve,soft:_soft,hard:_hard,cubic:_cubic,diode:_diode,asym:_asym,fold:_fold,sinefold:_sineFold,chebyshev:_chebyshev},_algoNames=Object.freeze(Object.keys(distortionAlgorithms)),getDistortionAlgorithm=e=>{let o=e;typeof e=="string"&&(o=_algoNames.indexOf(e),o===-1&&(logger$1(`[superdough] Could not find waveshaping algorithm ${e}.
        Available options are ${_algoNames.join(", ")}.
        Defaulting to ${_algoNames[0]}.`),o=0));const l=_algoNames[o%_algoNames.length];return distortionAlgorithms[l]},getDistortion=(e,o,l)=>getWorklet(getAudioContext(),"distort-processor",{distort:e,postgain:o},{processorOptions:{algorithm:l}}),getFrequencyFromValue=(e,o=36)=>{let{note:l,freq:d,octave:O=0}=e;return l=l||o,typeof l=="string"&&(l=noteToMidi(l)),!d&&typeof l=="number"&&(d=midiToFreq$1(l)),d*=Math.pow(2,O),Number(d)},destroyAudioWorkletNode=e=>{e!=null&&(e.disconnect(),e.parameters.get("end")?.setValueAtTime(0,0))};let clean=Symbol("clean"),listenerQueue=[],lqIndex=0;const QUEUE_ITEMS_PER_LISTENER=4;let atom=e=>{let o=[],l={get(){return l.lc||l.listen(()=>{})(),l.value},lc:0,listen(d){return l.lc=o.push(d),()=>{for(let A=lqIndex+QUEUE_ITEMS_PER_LISTENER;A<listenerQueue.length;)listenerQueue[A]===d?listenerQueue.splice(A,QUEUE_ITEMS_PER_LISTENER):A+=QUEUE_ITEMS_PER_LISTENER;let O=o.indexOf(d);~O&&(o.splice(O,1),--l.lc||l.off())}},notify(d,O){let A=!listenerQueue.length;for(let S of o)listenerQueue.push(S,l.value,d,O);if(A){for(lqIndex=0;lqIndex<listenerQueue.length;lqIndex+=QUEUE_ITEMS_PER_LISTENER)listenerQueue[lqIndex](listenerQueue[lqIndex+1],listenerQueue[lqIndex+2],listenerQueue[lqIndex+3]);listenerQueue.length=0}},off(){},set(d){let O=l.value;O!==d&&(l.value=d,l.notify(O))},subscribe(d){let O=l.listen(d);return d(l.value),O},value:e};return process.env.NODE_ENV!=="production"&&(l[clean]=()=>{o=[],l.lc=0,l.off()}),l},map=(e={})=>{let o=atom(e);return o.setKey=function(l,d){let O=o.value;typeof d>"u"&&l in o.value?(o.value={...o.value},delete o.value[l],o.notify(O,l)):o.value[l]!==d&&(o.value={...o.value,[l]:d},o.notify(O,l))},o};const bufferCache$1={},loadCache$2={},getCachedBuffer=e=>bufferCache$1[e];function humanFileSize$1(e,o){var l=1024;if(e<l)return e+" B";var d=["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],O=-1;do e/=l,++O;while(e>=l);return e.toFixed(1)+" "+d[O]}function getSampleInfo(e,o){const{speed:l=1}=e,{transpose:d,url:O,index:A,midi:S,label:$}=getCommonSampleInfo(e,o);let F=Math.abs(l)*Math.pow(2,d/12);return{transpose:d,url:O,index:A,midi:S,label:$,playbackRate:F}}const getSampleBuffer=async(e,o,l)=>{let{url:d,label:O,playbackRate:A}=getSampleInfo(e,o);l&&(d=await l(d));const S=getAudioContext(),$=await loadBuffer$1(d,S,O);return e.unit==="c"&&(A=A*$.duration),{buffer:$,playbackRate:A}},getSampleBufferSource=async(e,o,l)=>{let{buffer:d,playbackRate:O}=await getSampleBuffer(e,o,l);e.speed<0&&(d=reverseBuffer(d));const S=getAudioContext().createBufferSource();S.buffer=d,S.playbackRate.value=O;const{loopBegin:$=0,loopEnd:F=1,begin:E=0,end:L=1}=e,N=E*S.buffer.duration;e.loop&&(S.loop=!0,S.loopStart=$*S.buffer.duration-N,S.loopEnd=F*S.buffer.duration-N);const B=S.buffer.duration/S.playbackRate.value,U=(L-E)*B;return{bufferSource:S,offset:N,bufferDuration:B,sliceDuration:U}},loadBuffer$1=(e,o,l,d=0)=>{const O=l?`sound "${l}:${d}"`:"sample";if(e=e.replace("#","%23"),!loadCache$2[e]){logger$1(`[sampler] load ${O}..`,"load-sample",{url:e});const A=Date.now();loadCache$2[e]=fetch(e).then(S=>S.arrayBuffer()).then(async S=>{const $=Date.now()-A,F=humanFileSize$1(S.byteLength);logger$1(`[sampler] load ${O}... done! loaded ${F} in ${$}ms`,"loaded-sample",{url:e});const E=await o.decodeAudioData(S);return bufferCache$1[e]=E,E})}return loadCache$2[e]};function reverseBuffer(e){const o=getAudioContext(),l=o.createBuffer(e.numberOfChannels,e.length,o.sampleRate);for(let d=0;d<e.numberOfChannels;d++)l.copyToChannel(e.getChannelData(d).slice().reverse(),d,d);return l}const getLoadedBuffer=e=>bufferCache$1[e];function resolveSpecialPaths(e){if(e.startsWith("bubo:")){const[o,l]=e.split(":");e=`github:Bubobubobubobubo/dough-${l}`}return e}function githubPath$2(e,o=""){if(!e.startsWith("github:"))throw new Error('expected "github:" at the start of pseudoUrl');let l=e.slice(7);l=l.endsWith("/")?l.slice(0,-1):l;let d=l.split("/"),O=d[0],A=d.length>=2?d[1]:"samples",S=d.length>=3?d[2]:"main",$=d.slice(3);return $.push(o||""),$=$.join("/"),`https://raw.githubusercontent.com/${O}/${A}/${S}/${$}`}const processSampleMap=(e,o,l=e._base||"")=>Object.entries(e).forEach(([d,O])=>{if(typeof O=="string"&&(O=[O]),typeof O!="object")throw new Error("wrong sample map format for "+d);l=O._base||l,l=resolveSpecialPaths(l),l.startsWith("github:")&&(l=githubPath$2(l,""));const A=S=>l+S;Array.isArray(O)?O=O.map(A):O=Object.fromEntries(Object.entries(O).map(([S,$])=>[S,(typeof $=="string"?[$]:$).map(A)])),o(d,O)});let resourcePrefixHandlers={};function registerSamplesPrefix(e,o){resourcePrefixHandlers[e]=o}function getSamplesPrefixHandler(e){const o=Object.entries(resourcePrefixHandlers).find(([l])=>e.startsWith(l));if(o)return o[1]}async function fetchSampleMap$1(e){const o=getSamplesPrefixHandler(e);if(o)return o(e);if(e=resolveSpecialPaths(e),e.startsWith("github:")&&(e=githubPath$2(e,"strudel.json")),e.startsWith("local:")&&(e="http://localhost:5432"),e.startsWith("shabda:")){let[O,A]=e.split("shabda:");e=`https://shabda.ndre.gr/${A}.json?strudel=1`}if(e.startsWith("shabda/speech")){let[O,A]=e.split("shabda/speech");A=A.startsWith("/")?A.substring(1):A;let[S,$]=A.split(":"),F="f",E="en-GB";S&&([E,F]=S.split("/")),e=`https://shabda.ndre.gr/speech/${$}.json?gender=${F}&language=${E}&strudel=1'`}if(typeof fetch!="function")return;const l=getBaseURL(e);if(typeof fetch>"u")return;const d=await fetch(e).then(O=>O.json()).catch(O=>{throw console.error(O),new Error(`error loading "${e}"`)});return[d,d._base||l]}const samples$1=async(e,o=e._base||"",l={})=>{if(typeof e=="string"){const[A,S]=await fetchSampleMap$1(e);return samples$1(A,o||S,l)}const{prebake:d,tag:O}=l;processSampleMap(e,(A,S)=>{registerSampleSource(A,S,{baseUrl:o,prebake:d,tag:O})},o)},cutGroups=[];async function onTriggerSample(e,o,l,d,O){let{s:A,nudge:S=0,cut:$,loop:F,clip:E=void 0,n:L=0,speed:N=1,duration:V}=o;if(N===0)return;const B=getAudioContext();let[U,q,ee,le]=getADSRValues([o.attack,o.decay,o.sustain,o.release]);const{bufferSource:ue,sliceDuration:_e,offset:ie}=await getSampleBufferSource(o,d,O);if(B.currentTime>e){logger$1(`[sampler] still loading sound "${A}:${L}"`,"highlight");return}if(!ue){logger$1(`[sampler] could not load "${A}:${L}"`,"error");return}let ae=getVibratoOscillator(ue.detune,o,e);const fe=e+S;ue.start(fe,ie);const Oe=B.createGain(),ve=ue.connect(Oe);E==null&&F==null&&o.release==null&&(V=_e);let Re=e+V;getParamADSR(ve.gain,U,q,ee,le,0,1,e,Re,"linear"),getPitchEnvelope(ue.detune,o,e,Re);const Me=B.createGain();ve.connect(Me),ue.onended=function(){ue.disconnect(),ae?.stop(),ve.disconnect(),Me.disconnect(),l()};let Ye=Re+le+.01;ue.stop(Ye);const Ge={node:Me,bufferSource:ue,stop:Ne=>{ue.stop(Ne)}};if($!==void 0){const Ne=cutGroups[$];Ne&&(Ne.node.gain.setValueAtTime(1,fe),Ne.node.gain.linearRampToValueAtTime(0,fe+.01)),cutGroups[$]=Ge}return Ge}function registerSample(e,o,l){registerSound(e,(d,O,A)=>onTriggerSample(d,O,A,o),{type:"sample",samples:o,...l})}function registerSampleSource(e,o,l){e.startsWith("wt_")?registerWaveTable(e,o,l):registerSample(e,o,l)}let hasChanged=(e,o)=>e!==void 0&&e!==o;class Orbit{reverbNode;delayNode;output;summingNode;djfNode;audioContext;constructor(o){this.audioContext=o,this.output=new GainNode(o,{gain:1,channelCount:2,channelCountMode:"explicit"}),this.summingNode=new GainNode(o,{gain:1,channelCount:2,channelCountMode:"explicit"}),this.summingNode.connect(this.output)}disconnect(){this.output.disconnect(),this.summingNode.disconnect(),this.delayNode?.disconnect(),this.reverbNode?.disconnect()}getDjf(o,l=0){this.djfNode==null&&(this.djfNode=getWorklet(this.audioContext,"djf-processor",{value:o}),this.summingNode.disconnect(),this.summingNode.connect(this.djfNode),this.djfNode.connect(this.output)),this.djfNode.parameters.get("value").setValueAtTime(o,l)}getDelay(o=0,l=.5,d){return l=clamp(l,0,.98),this.delayNode==null&&(this.delayNode=this.audioContext.createFeedbackDelay(1,o,l),this.delayNode.connect(this.summingNode),this.delayNode.start?.(d)),this.delayNode.delayTime.value!==o&&this.delayNode.delayTime.setValueAtTime(o,d),this.delayNode.feedback.value!==l&&this.delayNode.feedback.setValueAtTime(l,d),this.delayNode}getReverb(o,l,d,O,A,S,$){return this.reverbNode==null&&(this.reverbNode=this.audioContext.createReverb(o,l,d,O,A,S,$),this.reverbNode.connect(this.summingNode)),(hasChanged(o,this.reverbNode.duration)||hasChanged(l,this.reverbNode.fade)||hasChanged(d,this.reverbNode.lp)||hasChanged(O,this.reverbNode.dim)||hasChanged(S,this.reverbNode.irspeed)||hasChanged($,this.reverbNode.irbegin)||this.reverbNode.ir!==A)&&this.reverbNode.generate(o,l,d,O,A,S,$),this.reverbNode}sendReverb(o,l){return effectSend(o,this.reverbNode,l)}sendDelay(o,l){return effectSend(o,this.delayNode,l)}duck(o,l=0,d=.1,O=1){const A=l,S=Math.max(d,.002),$=this.output.gain;webAudioTimeout(this.audioContext,()=>{const F=this.audioContext.currentTime,E=$.value;$.cancelScheduledValues(F),$.setValueAtTime(E,F);const L=Math.max(o,F),N=clamp(1-Math.sqrt(O),.01,E);$.exponentialRampToValueAtTime(N,L+A),$.exponentialRampToValueAtTime(1,L+A+S)},0,o-.01)}connectToOutput(o){o.connect(this.summingNode)}}class SuperdoughOutput{channelMerger;destinationGain;constructor(o){this.audioContext=o,this.initializeAudio()}initializeAudio(){const o=this.audioContext,l=o.destination.maxChannelCount;this.audioContext.destination.channelCount=l,this.channelMerger=new ChannelMergerNode(o,{numberOfInputs:o.destination.channelCount}),this.destinationGain=new GainNode(o),this.channelMerger.connect(this.destinationGain),this.destinationGain.connect(o.destination)}reset(){this.disconnect(),this.initializeAudio()}disconnect(){this.channelMerger.disconnect(),this.destinationGain.disconnect(),this.destinationGain=null,this.channelMerger=null}connectToDestination=(o,l=[0,1])=>{const d=new StereoPannerNode(this.audioContext);o.connect(d);const O=new ChannelSplitterNode(this.audioContext,{numberOfOutputs:d.channelCount});d.connect(O),l.forEach((A,S)=>{O.connect(this.channelMerger,S%d.channelCount,A%this.audioContext.destination.channelCount)})}}class SuperdoughAudioController{audioContext;output;nodes={};constructor(o){this.audioContext=o,this.output=new SuperdoughOutput(o)}reset(){Array.from(this.nodes).forEach(o=>{o.disconnect()}),this.nodes={},this.output.reset()}duck(o,l,d=0,O=.1,A=1){const S=[o].flat(),$=[d].flat(),F=[O].flat(),E=[A].flat();S.forEach((L,N)=>{const V=this.nodes[L];if(V==null){errorLogger(new Error(`duck target orbit ${L} does not exist`),"superdough");return}const B=$[N]??$[0],U=Math.max(F[N]??F[0],.002),q=E[N]??E[0];V.duck(l,B,U,q)})}getOrbit(o,l){return this.nodes[o]==null&&(this.nodes[o]=new Orbit(this.audioContext),this.output.connectToDestination(this.nodes[o].output,l)),this.nodes[o]}}const DEFAULT_MAX_POLYPHONY=128,DEFAULT_AUDIO_DEVICE_NAME="System Standard";let maxPolyphony=DEFAULT_MAX_POLYPHONY;function setMaxPolyphony(e){maxPolyphony=parseInt(e)??DEFAULT_MAX_POLYPHONY}let multiChannelOrbits=!1;function setMultiChannelOrbits(e){multiChannelOrbits=e==!0}const soundMap$1=map();function registerSound(e,o,l={}){e=e.toLowerCase().replace(/\s+/g,"_"),soundMap$1.setKey(e,{onTrigger:o,data:l})}let gainCurveFunc=e=>e;function applyGainCurve(e){return gainCurveFunc(e)}function setGainCurve(e){gainCurveFunc=e}function aliasBankMap(e){for(const l in e)e[l.toLowerCase()]=e[l];const o=soundMap$1.get();for(const l in o){const[d,O]=l.split("_");if(!O)continue;const A=e[d];if(A){if(typeof A=="string")o[`${A}_${O}`.toLowerCase()]=o[l];else if(Array.isArray(A))for(const S of A)o[`${S}_${O}`.toLowerCase()]=o[l]}}soundMap$1.set({...o})}async function aliasBankPath(e){const l=await(await fetch(e)).json();aliasBankMap(l)}async function aliasBank(...e){switch(e.length){case 1:return typeof e[0]=="string"?aliasBankPath(e[0]):aliasBankMap(e[0]);case 2:return aliasBankMap({[e[0]]:e[1]});default:throw new Error("aliasMap expects 1 or 2 arguments, received "+e.length)}}function soundAlias(e,o){if(getSound(e)==null){logger$1("soundAlias: original sound not found");return}soundMap$1.setKey(o,getSound(e))}function getSound(e){return typeof e!="string"?(console.warn(`getSound: expected string got "${e}". fall back to triangle`),soundMap$1.get().triangle):soundMap$1.get()[e.toLowerCase()]}const getAudioDevices=async()=>{await navigator.mediaDevices.getUserMedia({audio:!0});let e=await navigator.mediaDevices.enumerateDevices();e=e.filter(l=>l.kind==="audiooutput"&&l.deviceId!=="default");const o=new Map;return o.set(DEFAULT_AUDIO_DEVICE_NAME,""),e.forEach(l=>{o.set(l.label,l.deviceId)}),o};let defaultDefaultValues={s:"triangle",gain:.8,postgain:1,density:".03",channels:[1,2],phaserdepth:.75,shapevol:1,distortvol:1,distorttype:0,delay:0,byteBeatExpression:"0",delayfeedback:.5,delaysync:3/16,orbit:1,i:1,velocity:1,fft:8};const defaultDefaultDefaultValues=Object.freeze({...defaultDefaultValues});function setDefault(e,o){defaultDefaultValues[e]=o}function resetDefaults(){defaultDefaultValues={...defaultDefaultDefaultValues}}let defaultControls=new Map(Object.entries(defaultDefaultValues));function setDefaultValue(e,o){defaultControls.set(e,o)}function getDefaultValue(e){return defaultControls.get(e)}function setDefaultValues(e){Object.keys(e).forEach(o=>{setDefaultValue(o,e[o])})}function resetDefaultValues(){defaultControls=new Map(Object.entries(defaultDefaultValues))}function setVersionDefaults(e){resetDefaultValues(),e==="1.0"&&setDefaultValue("fanchor",.5)}const resetLoadedSounds=()=>soundMap$1.set({});let externalWorklets=[];function registerWorklet(e){externalWorklets.push(e)}let workletsLoading;function loadWorklets(){if(!workletsLoading){const e=getAudioContext(),o=externalWorklets.concat([workletsUrl]);workletsLoading=Promise.all(o.map(l=>e.audioWorklet.addModule(l)))}return workletsLoading}async function initAudio$1(e={}){const{disableWorklets:o=!1,maxPolyphony:l,audioDeviceName:d=DEFAULT_AUDIO_DEVICE_NAME,multiChannelOrbits:O=!1}=e;if(setMaxPolyphony(l),setMultiChannelOrbits(O),typeof window>"u")return;const A=getAudioContext();if(d!=null&&d!=DEFAULT_AUDIO_DEVICE_NAME)try{const $=(await getAudioDevices()).get(d),F=($??"").length>0;A.sinkId!==$&&F&&await A.setSinkId($),logger$1(`[superdough] Audio Device set to ${d}, it might take a few seconds before audio plays on all output channels`)}catch{logger$1("[superdough] failed to set audio interface","warning")}if(await A.resume(),o){logger$1("[superdough]: AudioWorklets disabled with disableWorklets");return}try{await loadWorklets(),logger$1("[superdough] AudioWorklets loaded")}catch(S){console.warn("could not load AudioWorklet effects",S)}logger$1("[superdough] ready")}let audioReady;async function initAudioOnFirstClick(e){return audioReady||(audioReady=new Promise(o=>{document.addEventListener("mousedown",async function l(){document.removeEventListener("mousedown",l),await initAudio$1(e),o()})})),audioReady}let controller;function getSuperdoughAudioController(){return controller==null&&(controller=new SuperdoughAudioController(getAudioContext())),controller}function connectToDestination(e,o){getSuperdoughAudioController().output.connectToDestination(e,o)}function getPhaser(e,o,l=1,d=.5,O=1e3,A=2e3){const S=getAudioContext(),$=getLfo(S,e,o,{frequency:l,depth:A*2}),F=2;let E=0;const L=[];for(let N=0;N<F;N++){const V=S.createBiquadFilter();V.type="notch",V.gain.value=1,V.frequency.value=O+E,V.Q.value=2-Math.min(Math.max(d*2,0),1.9),$.connect(V.detune),E+=282,N>0&&L[N-1].connect(V),L.push(V)}return{phaser:L[L.length-1],lfo:$}}function getFilterType(e){e=e??0;const o=["12db","ladder","24db"];return typeof e=="number"?o[Math.floor(_mod$1(e,o.length))]:e}let analysers={},analysersData={};function getAnalyserById(e,o=1024,l=.5){if(!analysers[e]){const d=getAudioContext().createAnalyser();d.fftSize=o,d.smoothingTimeConstant=l,analysers[e]=d,analysersData[e]=new Float32Array(analysers[e].frequencyBinCount)}return analysers[e].fftSize!==o&&(analysers[e].fftSize=o,analysersData[e]=new Float32Array(analysers[e].frequencyBinCount)),analysers[e]}function getAnalyzerData(e="time",o=1){const l={time:()=>analysers[o]?.getFloatTimeDomainData(analysersData[o]),frequency:()=>analysers[o]?.getFloatFrequencyData(analysersData[o])}[e];if(!l)throw new Error(`getAnalyzerData: ${e} not supported. use one of ${Object.keys(l).join(", ")}`);return l(),analysersData[o]}function resetGlobalEffects(){controller?.reset(),analysers={},analysersData={}}let activeSoundSources=new Map;function mapChannelNumbers(e){return(Array.isArray(e)?e:[e]).map(o=>o-1)}const superdough=async(e,o,l,d=.5,O=.5)=>{const A=getAudioContext(),S=getSuperdoughAudioController();let{stretch:$}=e;if($!=null&&(o=o-.04),typeof e!="object")throw new Error(`expected hap.value to be an object, but got "${e}". Hint: append .note() or .s() to the end`,"error");if(e.duration=l,o<A.currentTime){console.warn(`[superdough]: cannot schedule sounds in the past (target: ${o.toFixed(2)}, now: ${A.currentTime.toFixed(2)})`);return}let{tremolo:F,tremolosync:E,tremolodepth:L=1,tremoloskew:N,tremolophase:V=0,tremoloshape:B,s:U=getDefaultValue("s"),bank:q,source:ee,gain:le=getDefaultValue("gain"),postgain:ue=getDefaultValue("postgain"),density:_e=getDefaultValue("density"),duckorbit:ie,duckonset:ae,duckattack:fe,duckdepth:Oe,djf:ve,fanchor:Re=getDefaultValue("fanchor"),release:Me=0,phaserrate:Ye,phaserdepth:Te=getDefaultValue("phaserdepth"),phasersweep:Ge,phasercenter:Ne,coarse:Je,crush:je,dry:qe,shape:et,shapevol:Tt=getDefaultValue("shapevol"),distort:Rt,distortvol:Qt=getDefaultValue("distortvol"),distorttype:Fe=getDefaultValue("distorttype"),pan:pt,vowel:we,delay:xt=getDefaultValue("delay"),delayfeedback:Ct=getDefaultValue("delayfeedback"),delaysync:Ze=getDefaultValue("delaysync"),delaytime:St,orbit:Lt=getDefaultValue("orbit"),room:cn,roomfade:sn,roomlp:Xt,roomdim:on,roomsize:bt,ir:un,irspeed:jt,irbegin:rn,i:$n=getDefaultValue("i"),velocity:Ae=getDefaultValue("velocity"),analyze:xe,fft:ye=getDefaultValue("fft"),compressor:ke,compressorRatio:Qe,compressorKnee:Ue,compressorAttack:Xe,compressorRelease:ut}=e;St=St??cycleToSeconds(Ze,d);const Ie=mapChannelNumbers(multiChannelOrbits&&Lt>0?[Lt*2-1,Lt*2]:getDefaultValue("channels")),at=e.channels!=null?mapChannelNumbers(e.channels):Ie,ft=S.getOrbit(Lt,at);ie!=null&&S.duck(ie,o,ae,fe,Oe),le=applyGainCurve(nanFallback(le,1)),ue=applyGainCurve(ue),Tt=applyGainCurve(Tt),Qt=applyGainCurve(Qt),xt=applyGainCurve(xt),Ae=applyGainCurve(Ae),L=applyGainCurve(L),le*=Ae;const Vt=o+l,Wt=Vt+Me,Pt=Math.round(Math.random()*1e6);for(let ct=0;ct<=activeSoundSources.size-maxPolyphony;ct++){const At=activeSoundSources.entries().next(),Nt=At.value[1].deref(),zt=At.value[0],fn=o+.25;Nt?.node?.gain?.linearRampToValueAtTime(0,fn),Nt?.stop?.(fn),activeSoundSources.delete(zt)}let kt=[];if(["-","~","_"].includes(U))return;q&&U&&(U=`${q}_${U}`,e.s=U);let an;if(ee)an=ee(o,e,l,d);else if(getSound(U)){const{onTrigger:ct}=getSound(U),Nt=await ct(o,e,()=>{kt.forEach(zt=>zt?.disconnect()),activeSoundSources.delete(Pt)},d);Nt&&(an=Nt.node,activeSoundSources.set(Pt,new WeakRef(Nt)))}else throw new Error(`sound ${U} not found! Is it loaded?`);if(!an)return;if(A.currentTime>o){logger$1("[webaudio] skip hap: still loading",A.currentTime-o);return}const Be=[];Be.push(an),$!==void 0&&Be.push(getWorklet(A,"phase-vocoder-processor",{pitchFactor:$})),Be.push(gainNode(le));const Ft=getFilterType(e.ftype);if(e.cutoff!==void 0){const At=pickAndRename(e,{frequency:"cutoff",q:"resonance",attack:"lpattack",decay:"lpdecay",sustain:"lpsustain",release:"lprelease",env:"lpenv",anchor:"fanchor",model:"ftype",drive:"drive",rate:"lprate",sync:"lpsync",depth:"lpdepth",depthfrequency:"lpdepthfrequency",shape:"lpshape",dcoffset:"lpdc",skew:"lpskew"});At.type="lowpass";const Nt=()=>createFilter(A,o,Vt,At,d,O),{filter:zt,lfo:fn}=Nt();if(Be.push(zt),fn&&kt.push(fn),Ft==="24db"){const{filter:Cn,lfo:dn}=Nt();Be.push(Cn),dn&&kt.push(dn)}}if(e.hcutoff!==void 0){const At=pickAndRename(e,{frequency:"hcutoff",q:"hresonance",attack:"hpattack",decay:"hpdecay",sustain:"hpsustain",release:"hprelease",env:"hpenv",anchor:"fanchor",model:"ftype",drive:"drive",rate:"hprate",sync:"hpsync",depth:"hpdepth",depthfrequency:"hpdepthfrequency",shape:"hpshape",dcoffset:"hpdc",skew:"hpskew"});At.type="highpass";const Nt=()=>createFilter(A,o,Vt,At,d,O),{filter:zt,lfo:fn}=Nt();if(Be.push(zt),fn&&kt.push(fn),Ft==="24db"){const{filter:Cn,lfo:dn}=Nt();Be.push(Cn),dn&&kt.push(dn)}}if(e.bandf!==void 0){const At=pickAndRename(e,{frequency:"bandf",q:"bandq",attack:"bpattack",decay:"bpdecay",sustain:"bpsustain",release:"bprelease",env:"bpenv",anchor:"fanchor",model:"ftype",drive:"drive",rate:"bprate",sync:"bpsync",depth:"bpdepth",depthfrequency:"bpdepthfrequency",shape:"bpshape",dcoffset:"bpdc",skew:"bpskew"});At.type="bandpass";const Nt=()=>createFilter(A,o,Vt,At,d,O),{filter:zt,lfo:fn}=Nt();if(Be.push(zt),fn&&kt.push(fn),Ft==="24db"){const{filter:Cn,lfo:dn}=Nt();Be.push(Cn),dn&&kt.push(dn)}}if(we!==void 0){const ct=A.createVowelFilter(we);Be.push(ct)}if(Je!==void 0&&Be.push(getWorklet(A,"coarse-processor",{coarse:Je})),je!==void 0&&Be.push(getWorklet(A,"crush-processor",{crush:je})),et!==void 0&&Be.push(getWorklet(A,"shape-processor",{shape:et,postgain:Tt})),Rt!==void 0&&Be.push(getDistortion(Rt,Qt,Fe)),E!=null&&(F=d*E),e.wtPosSynced!=null&&(e.wtPosRate/=d),e.wtWarpSynced!=null&&(e.wtWarpRate/=d),F!==void 0){const ct=Math.max(1-L,0),At=new GainNode(A,{gain:ct}),Nt=O/d,zt=getLfo(A,o,Wt,{skew:N??(B!=null?.5:1),frequency:F,depth:L,time:Nt,dcoffset:0,shape:B,phaseoffset:V,min:0,max:1,curve:1.5});zt.connect(At.gain),kt.push(zt),Be.push(At)}if(ke!==void 0&&Be.push(getCompressor(A,ke,Qe,Ue,Xe,ut)),pt!==void 0){const ct=A.createStereoPanner();ct.pan.value=2*pt-1,Be.push(ct)}if(Ye!==void 0&&Te>0){const{phaser:ct,lfo:At}=getPhaser(o,Wt,Ye,Te,Ne,Ge);kt.push(At),Be.push(ct)}const hn=new GainNode(A,{gain:ue});if(Be.push(hn),xt>0&&St>0&&Ct>0){ft.getDelay(St,Ct,o);const ct=ft.sendDelay(hn,xt);kt.push(ct)}if(cn>0){let ct;if(un!==void 0){let Nt,zt=getSound(un);Array.isArray(zt)?Nt=zt.data.samples[$n%zt.data.samples.length]:typeof zt=="object"&&(Nt=Object.values(zt.data.samples).flat()[$n%Object.values(zt.data.samples).length]),ct=await loadBuffer$1(Nt,A,un,0)}ft.getReverb(bt,sn,Xt,on,ct,jt,rn);const At=ft.sendReverb(hn,cn);kt.push(At)}if(ve!=null&&ft.getDjf(ve,o),xe){const ct=getAnalyserById(xe,2**(ye+5)),At=effectSend(hn,ct,1);kt.push(At)}if(qe!=null){qe=applyGainCurve(qe);const ct=new GainNode(A,{gain:qe});Be.push(ct),ft.connectToOutput(ct)}else ft.connectToOutput(hn);Be.slice(1).reduce((ct,At)=>ct.connect(At),Be[0]),kt=kt.concat(Be)},superdoughTrigger=(e,o,l,d)=>{superdough(o,e-l,o.duration/d,d)},waveforms=["triangle","square","sawtooth","sine","user"],waveformAliases=[["tri","triangle"],["sqr","square"],["saw","sawtooth"],["sin","sine"]];function makeSaturationCurve(e,o){const l=e,d=new Float32Array(o);for(let O=0;O<o;O++){const A=O*2/o-1;d[O]=Math.tanh(A*l)}return d}function registerSynthSounds$1(){[...waveforms].forEach(e=>{registerSound(e,(o,l,d)=>{const[O,A,S,$]=getADSRValues([l.attack,l.decay,l.sustain,l.release],"linear",[.001,.05,.6,.01]),F=gainNode(.3);let E=getOscillator(e,o,l,()=>{F.disconnect(),d()}),{node:L,stop:N,triggerRelease:V}=E;const{duration:B}=l,U=gainNode(1);let q=L.connect(F).connect(U);const ee=o+B;getParamADSR(q.gain,O,A,S,$,0,1,o,ee,"linear");const le=ee+$+.01;return V?.(le),N(le),{node:q,stop:ue=>{N(ue)}}},{type:"synth",prebake:!0})}),registerSound("sbd",(e,o,l)=>{const{duration:d,decay:O=.5,pdecay:A=.5,penv:S=36,clip:$}=o,F=getAudioContext(),E=.02,L=1.2,N=.025,V=1,B=F.createOscillator();B.type="triangle",B.frequency.value=getFrequencyFromValue(o,29),B.detune.setValueAtTime(S*100,0),B.detune.setValueAtTime(S*100,e),B.detune.exponentialRampToValueAtTime(.001,e+A);const U=gainNode(1);U.gain.setValueAtTime(1,e+E),U.gain.exponentialRampToValueAtTime(.001,e+E+O),B.start(e);const q=getNoiseOscillator("brown",e,2),ee=gainNode(1);ee.gain.setValueAtTime(L,e),ee.gain.exponentialRampToValueAtTime(.001,e+N);const le=new WaveShaperNode(F);le.curve=makeSaturationCurve(2,F.sampleRate);const ue=gainNode(V);B.onended=()=>{B.disconnect(),U.disconnect(),le.disconnect(),q.node.disconnect(),ee.disconnect(),ue.disconnect(),l()};const _e=B.connect(le).connect(U).connect(ue);q.node.connect(ee).connect(ue);let ae=e+O+.01;return $!=null&&(ae=Math.min(e+$*d,ae)),ue.gain.setValueAtTime(V,ae-.01),ue.gain.linearRampToValueAtTime(0,ae),B.stop(ae),q.stop(ae),{node:_e,stop:fe=>{B.stop(fe)}}},{type:"synth",prebake:!0}),registerSound("supersaw",(e,o,l)=>{const d=getAudioContext();let{duration:O,n:A,unison:S=5,spread:$=.6,detune:F}=o;F=F??A??.18;const E=getFrequencyFromValue(o),[L,N,V,B]=getADSRValues([o.attack,o.decay,o.sustain,o.release],"linear",[.001,.05,.6,.01]),U=e+O,q=U+B+.01,ee=clamp(S,1,100);let le=ee>1?clamp($,0,1):0,ue=getWorklet(d,"supersaw-oscillator",{frequency:E,begin:e,end:q,freqspread:F,voices:ee,panspread:le},{outputChannelCount:[2]});const _e=1/Math.sqrt(ee);getPitchEnvelope(ue.parameters.get("detune"),o,e,U);const ie=getVibratoOscillator(ue.parameters.get("detune"),o,e),ae=applyFM(ue.parameters.get("frequency"),o,e);let fe=gainNode(1);fe=ue.connect(fe),getParamADSR(fe.gain,L,N,V,B,0,.3*_e,e,U,"linear");let Oe=webAudioTimeout(d,()=>{destroyAudioWorkletNode(ue),fe.disconnect(),l(),ae?.stop(),ie?.stop()},e,q);return{node:fe,stop:ve=>{Oe.stop(ve)}}},{prebake:!0,type:"synth"}),registerSound("bytebeat",(e,o,l)=>{const d=["(t%255 >= t/255%255)*255","(t*(t*8%60 <= 300)|(-t)*(t*4%512 < 256))+t/400","t","t*(t >> 10^t)","t&128","t&t>>8","((t%255+t%128+t%64+t%32+t%16+t%127.8+t%64.8+t%32.8+t%16.8)/3)","((t%64+t%63.8+t%64.15+t%64.35+t%63.5)/1.25)","(t&(t>>7)-t)","(sin(t*PI/128)*127+127)","((t^t/2+t+64*(sin((t*PI/64)+(t*PI/32768))+64))%128*2)","((t^t/2+t+64*(cos >> 0))%127.85*2)","((t^t/2+t+64)%128*2)","(((t * .25)^(t * .25)/100+(t * .25))%128)*2","((t^t/2+t+64)%7 * 24)"],{n:O=0}=o,A=getFrequencyFromValue(o),{byteBeatExpression:S=d[O%d.length],byteBeatStartTime:$}=o,F=getAudioContext();let{duration:E}=o;const[L,N,V,B]=getADSRValues([o.attack,o.decay,o.sustain,o.release],"linear",[.001,.05,.6,.01]),U=e+E,q=U+B+.01;let ee=getWorklet(F,"byte-beat-processor",{frequency:A,begin:e,end:q},{outputChannelCount:[2]});ee.port.postMessage({codeText:S,byteBeatStartTime:$,frequency:A});let le=gainNode(1);le=ee.connect(le),getParamADSR(le.gain,L,N,V,B,0,1,e,U,"linear");let ue=webAudioTimeout(F,()=>{destroyAudioWorkletNode(ee),le.disconnect(),l()},e,q);return{node:le,stop:_e=>{ue.stop(_e)}}},{prebake:!0,type:"synth"}),registerSound("pulse",(e,o,l)=>{const d=getAudioContext();let{pwrate:O,pwsweep:A}=o;A==null&&(O!=null?A=.3:A=0),O==null&&A!=null&&(O=1);let{duration:S,pw:$=.5}=o;const F=getFrequencyFromValue(o),[E,L,N,V]=getADSRValues([o.attack,o.decay,o.sustain,o.release],"linear",[.001,.05,.6,.01]),B=e+S,U=B+V+.01;let q=getWorklet(d,"pulse-oscillator",{frequency:F,begin:e,end:U,pulsewidth:$},{outputChannelCount:[2]});getPitchEnvelope(q.parameters.get("detune"),o,e,B);const ee=getVibratoOscillator(q.parameters.get("detune"),o,e),le=applyFM(q.parameters.get("frequency"),o,e);let ue=gainNode(1);ue=q.connect(ue),getParamADSR(ue.gain,E,L,N,V,0,1,e,B,"linear");let _e;A!=0&&(_e=getLfo(d,e,U,{frequency:O,depth:A}),_e.connect(q.parameters.get("pulsewidth")));let ie=webAudioTimeout(d,()=>{destroyAudioWorkletNode(q),destroyAudioWorkletNode(_e),ue.disconnect(),l(),le?.stop(),ee?.stop()},e,U);return{node:ue,stop:ae=>{ie.stop(ae)}}},{prebake:!0,type:"synth"}),[...noises].forEach(e=>{registerSound(e,(o,l,d)=>{const[O,A,S,$]=getADSRValues([l.attack,l.decay,l.sustain,l.release],"linear",[.001,.05,.6,.01]);let F,{density:E}=l;F=getNoiseOscillator(e,o,E);let{node:L,stop:N,triggerRelease:V}=F;const B=gainNode(.3),{duration:U}=l;L.onended=()=>{L.disconnect(),B.disconnect(),d()};const q=gainNode(1);let ee=L.connect(B).connect(q);const le=o+U;getParamADSR(ee.gain,O,A,S,$,0,1,o,le,"linear");const ue=le+$+.01;return V?.(ue),N(ue),{node:ee,stop:_e=>{N(_e)}}},{type:"synth",prebake:!0})}),waveformAliases.forEach(([e,o])=>soundMap$1.set({...soundMap$1.get(),[e]:soundMap$1.get()[o]}))}const PI2=2*Math.PI;function waveformN(e,o,l){e=typeof e=="object"?e:new Float32Array(e).fill(1);const O=e.length,A=new Float32Array(O+1),S=new Float32Array(O+1),$=getAudioContext(),F=$.createOscillator(),E={sawtooth:N=>[0,-1/N],square:N=>[0,N%2===0?0:1/N],triangle:N=>[N%2===0?0:1/(N*N),0],user:N=>[0,1]};if(!E[l])throw new Error(`unknown wave type ${l}`);for(let N=0;N<O;N++){const V=e[N],[B,U]=E[l](N+1),q=o?.[N]??0;let ee=B*V,le=U*V;if(q!==0){const ue=Math.cos(PI2*q),_e=Math.sin(PI2*q);ee=ue*ee-_e*le,le=_e*ee+ue*le}A[N+1]=ee,S[N+1]=le}const L=$.createPeriodicWave(A,S);return F.setPeriodicWave(L),F}function getOscillator(e,o,l,d){const{duration:O,noise:A=0}=l,S=l.partials??l.n;let $;e==="user"&&!S&&(logger$1("[superdough] Synth 'user' was selected, but partials not specified. Defaulting to triangle. Use pat.partials to setup custom waveform"),e="triangle"),e=e==="user"&&!S?"triangle":e,!S||S?.length===0||e==="sine"?($=getAudioContext().createOscillator(),$.type=e||"triangle"):$=waveformN(S,l.phases,e),$.frequency.value=getFrequencyFromValue(l);let F=getVibratoOscillator($.detune,l,o);getPitchEnvelope($.detune,l,o,o+O);const E=applyFM($.frequency,l,o);let L;return A&&(L=getNoiseMix($,A,o)),$.onended=()=>{L||$.disconnect(),L?.node.disconnect(),d()},$.start(o),{node:L?.node||$,stop:N=>{E.stop(N),F?.stop(N),L?.stop(N),$.stop(N)},triggerRelease:N=>{}}}function buildSamples(e=1,o=.05,l=220,d=0,O=0,A=.1,S=0,$=1,F=0,E=0,L=0,N=0,V=0,B=0,U=0,q=0,ee=0,le=1,ue=0,_e=0){let ie=Math.PI*2,ae=getAudioContext().sampleRate,fe=Tt=>Tt>0?1:-1,Oe=F*=500*ie/ae/ae,ve=l*=(1+o*2*Math.random()-o)*ie/ae,Re=[],Me=0,Ye=0,Te=0,Ge=1,Ne=0,Je=0,je=0,qe,et;for(d=d*ae+9,ue*=ae,O*=ae,A*=ae,ee*=ae,E*=500*ie/ae**3,U*=ie/ae,L*=ie/ae,N*=ae,V=V*ae|0,et=d+ue+O+A+ee|0;Te<et;Re[Te++]=je)++Je%(q*100|0)||(je=S?S>1?S>2?S>3?Math.sin((Me%ie)**3):Math.max(Math.min(Math.tan(Me),1),-1):1-(2*Me/ie%2+2)%2:1-4*Math.abs(Math.round(Me/ie)-Me/ie):Math.sin(Me),je=(V?1-_e+_e*Math.sin(ie*Te/V):1)*fe(je)*Math.abs(je)**$*e*1*(Te<d?Te/d:Te<d+ue?1-(Te-d)/ue*(1-le):Te<d+ue+O?le:Te<et-ee?(et-Te-ee)/A*le:0),je=ee?je/2+(ee>Te?0:(Te<et-ee?1:(et-Te)/ee)*Re[Te-ee|0]/2):je),qe=(l+=F+=E)*Math.cos(U*Ye++),Me+=qe-qe*B*(1-(Math.sin(Te)+1)*1e9%2),Ge&&++Ge>N&&(l+=L,ve+=L,Ge=0),V&&!(++Ne%V)&&(l=ve,F=Oe,Ge||=1);return Re}const getZZFX=(e,o)=>{let{s:l,note:d=36,freq:O,zrand:A=0,attack:S=0,decay:$=0,sustain:F=.8,release:E=.1,curve:L=1,slide:N=0,deltaSlide:V=0,pitchJump:B=0,pitchJumpTime:U=0,lfo:q=0,znoise:ee=0,zmod:le=0,zcrush:ue=0,zdelay:_e=0,tremolo:ie=0,duration:ae=.2,zzfx:fe}=e;const Oe=Math.max(ae-S-$,0);typeof d=="string"&&(d=noteToMidi(d)),!O&&typeof d=="number"&&(O=midiToFreq$1(d)),l=l.replace("z_","");const ve=["sine","triangle","sawtooth","tan","noise"].indexOf(l)||0;L=l==="square"?0:L;const Me=buildSamples(...fe||[.25,A,O,S,Oe,E,ve,L,N,V,B,U,q,ee,le,ue,_e,F,$,ie]),Ye=getAudioContext(),Te=Ye.createBuffer(1,Me.length,Ye.sampleRate);Te.getChannelData(0).set(Me);const Ge=getAudioContext().createBufferSource();return Ge.buffer=Te,Ge.start(o),{node:Ge}};function registerZZFXSounds(){["zzfx","z_sine","z_sawtooth","z_triangle","z_square","z_tan","z_noise"].forEach(e=>{registerSound(e,(o,l,d)=>{const{node:O}=getZZFX({s:e,...l},o);return O.onended=()=>{O.disconnect(),d()},{node:O,stop:()=>{}}},{type:"synth",prebake:!0})})}let worklet;async function dspWorklet(e,o){const l=`dsp-worklet-${Date.now()}`,d=`${o}
let __q = []; // trigger queue
class MyProcessor extends AudioWorkletProcessor {
  constructor() {
    super();
    this.t = 0;
    this.stopped = false;
    this.port.onmessage = (e) => {
      if(e.data==='stop') {
        this.stopped = true;
      } else if(e.data?.dough) {
        __q.push(e.data)
      } else {
        msg?.(e.data)
      }
    };
  }
  process(inputs, outputs, parameters) {
    const output = outputs[0];
    if(__q.length) {
      for(let i=0;i<__q.length;++i) {
        const deadline = __q[i].time-currentTime;
        if(deadline<=0) {
          trigger(__q[i].dough)
          __q.splice(i,1)
        }
      }
    }
    for (let i = 0; i < output[0].length; i++) {
      const out = dsp(this.t / sampleRate);
      output.forEach((channel) => {
        channel[i] = out;
      });
      this.t++;
    }
  return !this.stopped;
  }
}
registerProcessor('${l}', MyProcessor);
`,A=`data:text/javascript;base64,${btoa(d)}`;await e.audioWorklet.addModule(A);const S=new AudioWorkletNode(e,l);return{node:S,stop:()=>S.port.postMessage("stop")}}const stop=()=>{worklet&&(worklet?.stop(),worklet?.node?.disconnect())};typeof window<"u"&&window.addEventListener("message",e=>{e.data==="strudel-stop"?stop():e.data?.dough&&worklet?.node.port.postMessage(e.data)});const dough=async e=>{const o=getAudioContext();stop(),worklet=await dspWorklet(o,e),worklet.node.connect(o.destination)};function doughTrigger(e,o,l,d){window.postMessage({time:d,dough:e.value,currentTime:o,duration:e.duration,cps:l})}const Warpmode=Object.freeze({NONE:0,ASYM:1,MIRROR:2,BENDP:3,BENDM:4,BENDMP:5,SYNC:6,QUANT:7,FOLD:8,PWM:9,ORBIT:10,SPIN:11,CHAOS:12,PRIMES:13,BINARY:14,BROWNIAN:15,RECIPROCAL:16,WORMHOLE:17,LOGISTIC:18,SIGMOID:19,FRACTAL:20,FLIP:21}),seenKeys=new Set;async function getPayload(e,o,l=2048){const d=`${e},${l}`;if(!seenKeys.has(d)){const A=(await loadBuffer(e,o)).getChannelData(0),S=A.length,$=Math.max(1,Math.floor(S/l)),F=new Array($);for(let E=0;E<$;E++){const L=E*l;F[E]=A.subarray(L,L+l)}return seenKeys.add(d),{frames:F,frameLen:l,numFrames:$,key:d}}return{frameLen:l,key:d}}function humanFileSize(e,o){var l=1024;if(e<l)return e+" B";var d=["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],O=-1;do e/=l,++O;while(e>=l);return e.toFixed(1)+" "+d[O]}function parseWavSampleRate(e){const o=new DataView(e);let l=12;for(;l+8<=o.byteLength;){const d=String.fromCharCode(o.getUint8(l),o.getUint8(l+1),o.getUint8(l+2),o.getUint8(l+3)),O=o.getUint32(l+4,!0);if(d==="fmt ")return o.getUint32(l+12,!0);l+=8+O+(O&1)}return null}async function decodeAtNativeRate(e){const o=parseWavSampleRate(e)||44100;return await new OfflineAudioContext(1,1,o).decodeAudioData(e)}const loadCache$1={},loadBuffer=(e,o)=>{if(e=e.replace("#","%23"),!loadCache$1[e]){logger$1(`[wavetable] load table ${o}..`,"load-table",{url:e});const l=Date.now();loadCache$1[e]=fetch(e).then(d=>d.arrayBuffer()).then(async d=>{const O=Date.now()-l,A=humanFileSize(d.byteLength);return logger$1(`[wavetable] load table ${o}... done! loaded ${A} in ${O}ms`,"loaded-table",{url:e}),await decodeAtNativeRate(d)})}return loadCache$1[e]};function githubPath$1(e,o=""){if(!e.startsWith("github:"))throw new Error('expected "github:" at the start of pseudoUrl');let[l,d]=e.split("github:");return d=d.endsWith("/")?d.slice(0,-1):d,d.split("/").length===2&&(d+="/main"),`https://raw.githubusercontent.com/${d}/${o}`}const _processTables=(e,o,l,d={})=>(o=e._base||o,Object.entries(e).forEach(([O,A])=>{if(O==="_base")return!1;if(typeof A=="string"&&(A=[A]),typeof A!="object")throw new Error("wrong json format for "+O);let S=o;S.startsWith("github:")&&(S=githubPath$1(S,"")),A=A.map($=>S+$).filter($=>$.toLowerCase().endsWith(".wav")?!0:(logger$1(`[wavetable] skipping ${$} -- wavetables must be ".wav" format`),!1)),A.length&&registerWaveTable(O,A,{baseUrl:o,frameLen:l})}));function registerWaveTable(e,o,l){registerSound(e,(d,O,A,S)=>onTriggerSynth(d,O,A,o,S,l?.frameLen??2048),{type:"wavetable",tables:o,...l})}const tables=async(e,o,l,d={})=>{if(l!==void 0)return _processTables(l,e,o);e.startsWith("github:")&&(e=githubPath$1(e,"strudel.json")),e.startsWith("local:")&&(e="http://localhost:5432");const O=getBaseURL(e);if(typeof fetch=="function"&&!(typeof fetch>"u"))return fetch(e).then(A=>A.json()).then(A=>_processTables(A,O,o,d)).catch(A=>{throw console.error(A),new Error(`error loading "${e}"`)})};async function onTriggerSynth(e,o,l,d,O,A){const{s:S,n:$=0,duration:F,clip:E}=o,L=getAudioContext(),[N,V,B,U]=getADSRValues([o.attack,o.decay,o.sustain,o.release]);let{warpmode:q}=o;typeof q=="string"&&(q=Warpmode[q.toUpperCase()]??Warpmode.NONE);const ee=getFrequencyFromValue(o),{url:le,label:ue}=getCommonSampleInfo(o,d),_e=await getPayload(le,ue,A);let ie=e+F;E!==void 0&&(ie=Math.min(e+E*F,ie));const ae=ie+U,fe=ae+.01,Oe=getWorklet(L,"wavetable-oscillator-processor",{begin:e,end:fe,frequency:ee,freqspread:o.detune,position:o.wt,warp:o.warp,warpMode:q,voices:Math.max(o.unison??1,1),panspread:o.spread,phaserand:o.wtphaserand??o.unison>1?1:0},{outputChannelCount:[2]});if(Oe.port.postMessage({type:"table",payload:_e}),L.currentTime>e){logger$1(`[wavetable] still loading sound "${S}:${$}"`,"highlight");return}const ve=[o.wtattack,o.wtdecay,o.wtsustain,o.wtrelease],Re=[o.warpattack,o.warpdecay,o.warpsustain,o.warprelease],Me=Oe.parameters,Ye=Me.get("position"),Te=Me.get("warp");let Ge=o.wtrate;o.wtsync!=null&&(Ge=O*o.wtsync);const Ne=applyParameterModulators(L,Ye,e,ae,{offset:o.wt,amount:o.wtenv,defaultAmount:.5,values:ve,holdEnd:ie,defaultValues:[0,.5,0,.1]},{frequency:Ge,depth:o.wtdepth,defaultDepth:.5,shape:o.wtshape,skew:o.wtskew,dcoffset:o.wtdc??0});let Je=o.warprate;o.warpsync!=null&&(Je=Je=O*o.warpsync);const je=applyParameterModulators(L,Te,e,ae,{offset:o.warp,amount:o.warpenv,defaultAmount:.5,values:Re,holdEnd:ie,defaultValues:[0,.5,0,.1]},{frequency:Je,depth:o.warpdepth,defaultDepth:.5,shape:o.warpshape,skew:o.warpskew,dcoffset:o.warpdc??0}),qe=getVibratoOscillator(Oe.parameters.get("detune"),o,e),et=applyFM(Oe.parameters.get("frequency"),o,e),Tt=L.createGain(),Rt=Oe.connect(Tt);getParamADSR(Rt.gain,N,V,B,U,0,.3,e,ie,"linear"),getPitchEnvelope(Oe.parameters.get("detune"),o,e,ie);const Qt={node:Rt,source:Oe},Fe=webAudioTimeout(L,()=>{destroyAudioWorkletNode(Oe),qe?.stop(),et?.stop(),Rt.disconnect(),Ne?.disconnect(),je?.disconnect(),l()},e,fe);return Qt.stop=pt=>{Fe.stop(pt)},Qt}let doughWorklet;function initDoughWorklet(){const e=getAudioContext();doughWorklet=getWorklet(e,"dough-processor",{},{outputChannelCount:[2]}),connectToDestination(doughWorklet)}const soundMap=new Map,loadedSounds=new Map;Pattern$1.prototype.supradough=function(){return this.onTrigger((e,o,l,d)=>{e.value._begin=d,e.value._duration=e.duration/l,!doughWorklet&&initDoughWorklet();const O=(e.value.bank?e.value.bank+"_":"")+e.value.s,A=e.value.n??0,S=`${O}:${A}`;if(soundMap.has(O)&&(e.value.s=S),soundMap.has(O)&&!loadedSounds.has(S)){const $=soundMap.get(O),F=$[A%$.length];console.log(`load ${S} from ${F}`);const E=fetchSample(F);loadedSounds.set(S,E),E.then(({channels:L,sampleRate:N})=>doughWorklet.port.postMessage({sample:S,channels:L,sampleRate:N}))}doughWorklet.port.postMessage({spawn:e.value})},1)};function githubPath(e,o=""){if(!e.startsWith("github:"))throw new Error('expected "github:" at the start of pseudoUrl');let[l,d]=e.split("github:");return d=d.endsWith("/")?d.slice(0,-1):d,d.split("/").length===2&&(d+="/main"),`https://raw.githubusercontent.com/${d}/${o}`}async function fetchSampleMap(e){if(e.startsWith("github:")&&(e=githubPath(e,"strudel.json")),e.startsWith("local:")&&(e="http://localhost:5432"),e.startsWith("shabda:")){let[d,O]=e.split("shabda:");e=`https://shabda.ndre.gr/${O}.json?strudel=1`}if(e.startsWith("shabda/speech")){let[d,O]=e.split("shabda/speech");O=O.startsWith("/")?O.substring(1):O;let[A,S]=O.split(":"),$="f",F="en-GB";A&&([F,$]=A.split("/")),e=`https://shabda.ndre.gr/speech/${S}.json?gender=${$}&language=${F}&strudel=1'`}if(typeof fetch!="function")return;const o=e.split("/").slice(0,-1).join("/");if(typeof fetch>"u")return;const l=await fetch(e).then(d=>d.json()).catch(d=>{throw console.error(d),new Error(`error loading "${e}"`)});return[l,l._base||o]}async function fetchSample(e){const o=await fetch(e).then(d=>d.arrayBuffer()).then(d=>getAudioContext().decodeAudioData(d));let l=[];for(let d=0;d<o.numberOfChannels;d++)l.push(o.getChannelData(d));return{channels:l,sampleRate:o.sampleRate}}async function doughsamples(e,o){if(typeof e=="string"){const[l,d]=await fetchSampleMap(e);return doughsamples(l,d)}Object.entries(e).map(async([l,d])=>{l!=="_base"&&(d=d.map(O=>o+O),soundMap.set(l,d))})}const _workletUrl="data:text/javascript;base64,KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2NvbnN0IGQ9dHlwZW9mIHNhbXBsZVJhdGU8InUiP3NhbXBsZVJhdGU6NDhlMyxBPU1hdGguUEkvZCxiPTEvZDtsZXQgRT1pPT5NYXRoLnBvdyhpLDIpO2NvbnN0IFY9KGkscyx0KT0+TWF0aC5taW4oTWF0aC5tYXgoaSxzKSx0KTtmdW5jdGlvbiBjKGkpe3JldHVybiBFKGkpfWZ1bmN0aW9uIE8oaSxzLHQpe2NvbnN0IGU9TWF0aC5zaW4oKDEtdCkqLjUqTWF0aC5QSSksaD1NYXRoLnNpbih0Ki41Kk1hdGguUEkpO3JldHVybiBpKmUrcypofWNsYXNzIHZ7cGhhc2U9MDt1cGRhdGUocyl7Y29uc3QgdD1NYXRoLnNpbih0aGlzLnBoYXNlKjIqTWF0aC5QSSk7cmV0dXJuIHRoaXMucGhhc2U9KHRoaXMucGhhc2Urcy9kKSUxLHR9fWNsYXNzIHh7cGhhc2U9MDt1cGRhdGUocyl7cmV0dXJuIHRoaXMucGhhc2UrPWIqcyx0aGlzLnBoYXNlJTEqMi0xfX1mdW5jdGlvbiB5KGkscyl7cmV0dXJuIGk8cz8oaS89cyxpK2ktaSppLTEpOmk+MS1zPyhpPShpLTEpL3MsaSppK2kraSsxKTowfWNsYXNzIFJ7Y29uc3RydWN0b3Iocz17fSl7dGhpcy5waGFzZT1zLnBoYXNlPz8wfXVwZGF0ZShzKXtjb25zdCB0PXMvZDtsZXQgZT15KHRoaXMucGhhc2UsdCksaD0yKnRoaXMucGhhc2UtMS1lO3JldHVybiB0aGlzLnBoYXNlKz10LHRoaXMucGhhc2U+MSYmKHRoaXMucGhhc2UtPTEpLGh9fWZ1bmN0aW9uIFQoaSxzLHQpe3JldHVybiBpPDI/MDooKGgsbyxuKT0+biooby1oKStoKSgtcyouNSxzKi41LHQvKGktMSkpfWZ1bmN0aW9uIHooaSxzKXtyZXR1cm4gaSpNYXRoLnBvdygyLHMvMTIpfWNsYXNzIEZ7Y29uc3RydWN0b3Iocz17fSl7dGhpcy52b2ljZXM9cy52b2ljZXM/PzUsdGhpcy5mcmVxc3ByZWFkPXMuZnJlcXNwcmVhZD8/LjIsdGhpcy5wYW5zcHJlYWQ9cy5wYW5zcHJlYWQ/Py40LHRoaXMucGhhc2U9bmV3IEZsb2F0MzJBcnJheSh0aGlzLnZvaWNlcykubWFwKCgpPT5NYXRoLnJhbmRvbSgpKX11cGRhdGUocyl7Y29uc3QgdD1NYXRoLnNxcnQoMS10aGlzLnBhbnNwcmVhZCksZT1NYXRoLnNxcnQodGhpcy5wYW5zcHJlYWQpO2xldCBoPTAsbz0wO2ZvcihsZXQgbj0wO248dGhpcy52b2ljZXM7bisrKXtjb25zdCBhPXoocyxUKHRoaXMudm9pY2VzLHRoaXMuZnJlcXNwcmVhZCxuKSkvZCxwPShuJjEpPT0xO2xldCB1PXQ7cCYmKHU9ZSk7bGV0IHE9eSh0aGlzLnBoYXNlW25dLGEpLEQ9Mip0aGlzLnBoYXNlW25dLTEtcTtoPWgrRCp1LG89bytEKnUsdGhpcy5waGFzZVtuXSs9YSx0aGlzLnBoYXNlW25dPjEmJih0aGlzLnBoYXNlW25dLT0xKX1yZXR1cm4gaCtvfX1jbGFzcyB3e3BoYXNlPTA7dXBkYXRlKHMpe3RoaXMucGhhc2UrPWIqcztsZXQgdD10aGlzLnBoYXNlJTE7cmV0dXJuKHQ8LjU/Mip0OjEtMioodC0uNSkpKjItMX19Y2xhc3MgZ3tzMD0wO3MxPTA7dXBkYXRlKHMsdCxlPTApe2U9TWF0aC5tYXgoZSwwKSx0PU1hdGgubWluKHQsMmU0KTtsZXQgaD0yKk1hdGguc2luKHQqQSk7aD1WKGgsMCwxLjE0KTtjb25zdCBuPTEtTWF0aC5wb3coLjUsKGUrLjEyNSkvLjEyNSkqaDtyZXR1cm4gdGhpcy5zMD1uKnRoaXMuczAtaCp0aGlzLnMxK2gqcyx0aGlzLnMxPW4qdGhpcy5zMStoKnRoaXMuczAsdGhpcy5zMX19Y2xhc3MgSXtjb25zdHJ1Y3RvcihzPTApe3RoaXMucGhhc2U9c31zYXcocyx0KXtsZXQgZT0odGhpcy5waGFzZStzKSUxLGg9eShlLHQpO3JldHVybiAyKmUtMS1ofXVwZGF0ZShzLHQ9LjUpe2NvbnN0IGU9cy9kO2xldCBoPXRoaXMuc2F3KDAsZSktdGhpcy5zYXcodCxlKTtyZXR1cm4gdGhpcy5waGFzZT0odGhpcy5waGFzZStlKSUxLGgrdCoyLTF9fWNsYXNzIEx7cGhhc2U9MDt1cGRhdGUocyx0PS41KXtyZXR1cm4gdGhpcy5waGFzZSs9YipzLHRoaXMucGhhc2UlMTx0PzE6LTF9fWNsYXNzIFN7dXBkYXRlPXM9Pk1hdGgucmFuZG9tKCk8cypiP01hdGgucmFuZG9tKCk6MH1jbGFzcyBOe3VwZGF0ZSgpe3JldHVybiBNYXRoLnJhbmRvbSgpKjItMX19Y2xhc3MgQntjb25zdHJ1Y3Rvcigpe3RoaXMub3V0PTB9dXBkYXRlKCl7bGV0IHM9TWF0aC5yYW5kb20oKSoyLTE7cmV0dXJuIHRoaXMub3V0PSh0aGlzLm91dCsuMDIqcykvMS4wMix0aGlzLm91dH19Y2xhc3MgR3tjb25zdHJ1Y3Rvcigpe3RoaXMuYjA9MCx0aGlzLmIxPTAsdGhpcy5iMj0wLHRoaXMuYjM9MCx0aGlzLmI0PTAsdGhpcy5iNT0wLHRoaXMuYjY9MH11cGRhdGUoKXtjb25zdCBzPU1hdGgucmFuZG9tKCkqMi0xO3RoaXMuYjA9Ljk5ODg2KnRoaXMuYjArcyouMDU1NTE3OSx0aGlzLmIxPS45OTMzMip0aGlzLmIxK3MqLjA3NTA3NTksdGhpcy5iMj0uOTY5KnRoaXMuYjIrcyouMTUzODUyLHRoaXMuYjM9Ljg2NjUqdGhpcy5iMytzKi4zMTA0ODU2LHRoaXMuYjQ9LjU1KnRoaXMuYjQrcyouNTMyOTUyMix0aGlzLmI1PS0uNzYxNip0aGlzLmI1LXMqLjAxNjg5ODtjb25zdCB0PXRoaXMuYjArdGhpcy5iMSt0aGlzLmIyK3RoaXMuYjMrdGhpcy5iNCt0aGlzLmI1K3RoaXMuYjYrcyouNTM2MjtyZXR1cm4gdGhpcy5iNj1zKi4xMTU5MjYsdCouMTF9fWNsYXNzIGp7cGhhc2U9MTt1cGRhdGUocyl7dGhpcy5waGFzZSs9YipzO2xldCB0PXRoaXMucGhhc2U+PTE/MTowO3JldHVybiB0aGlzLnBoYXNlPXRoaXMucGhhc2UlMSx0fX1mdW5jdGlvbiBNKGkscyx0LGU9MSl7aWYoaTw9MClyZXR1cm4gcztpZihpPj0xKXJldHVybiB0O2xldCBoO3JldHVybiBlPT09MD9oPWk6ZT4wP2g9TWF0aC5wb3coaSxlKTpoPTEtTWF0aC5wb3coMS1pLC1lKSxzKyh0LXMpKmh9Y2xhc3MgZntjb25zdHJ1Y3RvcihzPXt9KXt0aGlzLnN0YXRlPSJvZmYiLHRoaXMuc3RhcnRUaW1lPTAsdGhpcy5zdGFydFZhbD0wLHRoaXMuZGVjYXlDdXJ2ZT1zLmRlY2F5Q3VydmU/PzF9dXBkYXRlKHMsdCxlLGgsbyxuKXtzd2l0Y2godGhpcy5zdGF0ZSl7Y2FzZSJvZmYiOnJldHVybiB0PjAmJih0aGlzLnN0YXRlPSJhdHRhY2siLHRoaXMuc3RhcnRUaW1lPXMsdGhpcy5zdGFydFZhbD0wKSwwO2Nhc2UiYXR0YWNrIjp7bGV0IGw9cy10aGlzLnN0YXJ0VGltZTtyZXR1cm4gbD5lPyh0aGlzLnN0YXRlPSJkZWNheSIsdGhpcy5zdGFydFRpbWU9cywxKTpNKGwvZSx0aGlzLnN0YXJ0VmFsLDEsMSl9Y2FzZSJkZWNheSI6e2xldCBsPXMtdGhpcy5zdGFydFRpbWUsYT1NKGwvaCwxLG8sLXRoaXMuZGVjYXlDdXJ2ZSk7cmV0dXJuIHQ8PTA/KHRoaXMuc3RhdGU9InJlbGVhc2UiLHRoaXMuc3RhcnRUaW1lPXMsdGhpcy5zdGFydFZhbD1hLGEpOmw+aD8odGhpcy5zdGF0ZT0ic3VzdGFpbiIsdGhpcy5zdGFydFRpbWU9cyxvKTphfWNhc2Uic3VzdGFpbiI6cmV0dXJuIHQ8PTAmJih0aGlzLnN0YXRlPSJyZWxlYXNlIix0aGlzLnN0YXJ0VGltZT1zLHRoaXMuc3RhcnRWYWw9byksbztjYXNlInJlbGVhc2UiOntsZXQgbD1zLXRoaXMuc3RhcnRUaW1lO2lmKGw+bilyZXR1cm4gdGhpcy5zdGF0ZT0ib2ZmIiwwO2xldCBhPU0obC9uLHRoaXMuc3RhcnRWYWwsMCwtdGhpcy5kZWNheUN1cnZlKTtyZXR1cm4gdD4wJiYodGhpcy5zdGF0ZT0iYXR0YWNrIix0aGlzLnN0YXJ0VGltZT1zLHRoaXMuc3RhcnRWYWw9YSksYX19dGhyb3ciaW52YWxpZCBlbnZlbG9wZSBzdGF0ZSJ9fWNvbnN0ICQ9MTA7Y2xhc3Mga3t3cml0ZUlkeD0wO3JlYWRJZHg9MDtidWZmZXI9bmV3IEZsb2F0MzJBcnJheSgkKmQpO3dyaXRlKHMsdCl7dGhpcy53cml0ZUlkeD0odGhpcy53cml0ZUlkeCsxKSV0aGlzLmJ1ZmZlci5sZW5ndGgsdGhpcy5idWZmZXJbdGhpcy53cml0ZUlkeF09cztsZXQgZT1NYXRoLm1pbihNYXRoLmZsb29yKGQqdCksdGhpcy5idWZmZXIubGVuZ3RoLTEpO3RoaXMucmVhZElkeD10aGlzLndyaXRlSWR4LWUsdGhpcy5yZWFkSWR4PDAmJih0aGlzLnJlYWRJZHgrPXRoaXMuYnVmZmVyLmxlbmd0aCl9dXBkYXRlKHMsdCl7cmV0dXJuIHRoaXMud3JpdGUocyx0KSx0aGlzLmJ1ZmZlclt0aGlzLnJlYWRJZHhdfX1jbGFzcyBXe2RlbGF5PW5ldyBrO21vZHVsYXRvcj1uZXcgdzt1cGRhdGUocyx0LGUsaCxvKXtjb25zdCBuPXRoaXMubW9kdWxhdG9yLnVwZGF0ZShoKSpvLGw9dGhpcy5kZWxheS51cGRhdGUocyxlKigxK24pKTtyZXR1cm4gTyhzLGwsdCl9fWNsYXNzIFh7aG9sZD0wO3Q9MDt1cGRhdGUocyx0KXtyZXR1cm4gdGhpcy50KysldD09PTAmJih0aGlzLnQ9MCx0aGlzLmhvbGQ9cyksdGhpcy5ob2xkfX1jbGFzcyBVe3VwZGF0ZShzLHQpe3Q9TWF0aC5tYXgoMSx0KTtjb25zdCBlPU1hdGgucG93KDIsdC0xKTtyZXR1cm4gTWF0aC5yb3VuZChzKmUpL2V9fWNsYXNzIFl7dXBkYXRlKHMsdD0wLGU9MSl7ZT1NYXRoLm1heCguMDAxLE1hdGgubWluKDEsZSkpO2NvbnN0IGg9TWF0aC5leHBtMSh0KTtyZXR1cm4oMStoKSpzLygxK2gqTWF0aC5hYnMocykpKmV9fWNsYXNzIF97c3RhdGljIHNhbXBsZXM9bmV3IE1hcDtidWZmZXI7c2FtcGxlUmF0ZTtwb3M9MDtzYW1wbGVGcmVxPVAoKTtjb25zdHJ1Y3RvcihzLHQsZSl7dGhpcy5idWZmZXI9cyx0aGlzLnNhbXBsZVJhdGU9dCx0aGlzLmR1cmF0aW9uPXRoaXMuYnVmZmVyLmxlbmd0aC90aGlzLnNhbXBsZVJhdGUsdGhpcy5zcGVlZD1kL3RoaXMuc2FtcGxlUmF0ZSxlJiYodGhpcy5zcGVlZCo9dGhpcy5kdXJhdGlvbil9dXBkYXRlKHMpe2lmKHRoaXMucG9zPj10aGlzLmJ1ZmZlci5sZW5ndGgpcmV0dXJuIDA7Y29uc3QgdD1zL3RoaXMuc2FtcGxlRnJlcSp0aGlzLnNwZWVkO2xldCBlPXRoaXMuYnVmZmVyW01hdGguZmxvb3IodGhpcy5wb3MpXTtyZXR1cm4gdGhpcy5wb3M9dGhpcy5wb3MrdCxlfX1jb25zdCBtPShpLHM9ImxpbmVhciIsdCk9Pntjb25zdFtuLGwsYSxwXT1pO2lmKG49PW51bGwmJmw9PW51bGwmJmE9PW51bGwmJnA9PW51bGwpcmV0dXJuIHQ/P1suMDAxLC4wMDEsMSwuMDFdO2NvbnN0IHU9YT8/KG4hPW51bGwmJmw9PW51bGx8fG49PW51bGwmJmw9PW51bGw/MTouMDAxKTtyZXR1cm5bTWF0aC5tYXgobj8/MCwuMDAxKSxNYXRoLm1heChsPz8wLC4wMDEpLE1hdGgubWluKHUsMSksTWF0aC5tYXgocD8/MCwuMDEpXX07bGV0IEM9e3NpbmU6dixzYXc6Uix6YXc6eCxzYXd0b290aDpSLHphd3Rvb3RoOngsc3VwZXJzYXc6Rix0cmk6dyx0cmlhbmdsZTp3LHB1bHNlOkksc3F1YXJlOkkscHVsemU6TCxkdXN0OlMsY3JhY2tsZTpTLGltcHVsc2U6aix3aGl0ZTpOLGJyb3duOkIscGluazpHfTtjb25zdCBaPXtjaG9ydXM6MCxub3RlOjQ4LHM6InRyaWFuZ2xlIixiYW5rOiIiLGdhaW46MSxwb3N0Z2FpbjoxLHZlbG9jaXR5OjEsZGVuc2l0eToiLjAzIixmdHlwZToiMTJkYiIsZmFuY2hvcjowLHJlc29uYW5jZTowLGhyZXNvbmFuY2U6MCxiYW5kcTowLGNoYW5uZWxzOlsxLDJdLHBoYXNlcmRlcHRoOi43NSxzaGFwZXZvbDoxLGRpc3RvcnR2b2w6MSxkZWxheTowLGJ5dGVCZWF0RXhwcmVzc2lvbjoiMCIsZGVsYXlmZWVkYmFjazouNSxkZWxheXNwZWVkOjEsZGVsYXl0aW1lOi4yNSxvcmJpdDoxLGk6MSxmZnQ6OCx6OiJ0cmlhbmdsZSIscGFuOi41LGZtaDoxLGZtZW52OjAsc3BlZWQ6MSxwdzouNX07bGV0IHI9aT0+WltpXTtjb25zdCBIPXtjOjAsZDoyLGU6NCxmOjUsZzo3LGE6OSxiOjExfSxKPXsiIyI6MSxiOi0xLHM6MSxmOi0xfSxLPShpLHM9Myk9PntsZXRbdCxlPSIiLGg9IiJdPVN0cmluZyhpKS5tYXRjaCgvXihbYS1nQS1HXSkoWyNic2ZdKikoWzAtOV0qKSQvKT8uc2xpY2UoMSl8fFtdO2lmKCF0KXRocm93IG5ldyBFcnJvcignbm90IGEgbm90ZTogIicraSsnIicpO2NvbnN0IG89SFt0LnRvTG93ZXJDYXNlKCldLG49ZT8uc3BsaXQoIiIpLnJlZHVjZSgoYSxwKT0+YStKW3BdLDApfHwwO3JldHVybihOdW1iZXIoaHx8cykrMSkqMTIrbytufSxRPWk9Pk1hdGgucG93KDIsKGktNjkpLzEyKSo0NDAsUD1pPT4oaT1pfHxyKCJub3RlIiksdHlwZW9mIGk9PSJzdHJpbmciJiYoaT1LKGksMykpLFEoaSkpO2NsYXNzIHR0e2lkPTA7b3V0PVswLDBdO2F0dGFjaztkZWNheTtzdXN0YWluO3JlbGVhc2U7X2JlZ2luO19kdXJhdGlvbjtfc291bmQ7X2NoYW5uZWxzPTE7X2J1ZmZlcnM7dW5pdDtfcGVudjtwZW52O3BhdHRhY2s7cGRlY2F5O3BzdXN0YWluO3ByZWxlYXNlO3ZpYjtfdmliO3ZpYm1vZDtfZm07Zm1oO2ZtaTtfZm1lbnY7Zm1hdHRhY2s7Zm1kZWNheTtmbXN1c3RhaW47Zm1yZWxlYXNlO19scGVudjtscGVudjtscGF0dGFjaztscGRlY2F5O2xwc3VzdGFpbjtscHJlbGVhc2U7X2hwZW52O2hwZW52O2hwYXR0YWNrO2hwZGVjYXk7aHBzdXN0YWluO2hwcmVsZWFzZTtfYnBlbnY7YnBlbnY7YnBhdHRhY2s7YnBkZWNheTticHN1c3RhaW47YnByZWxlYXNlO2N1dG9mZjtoY3V0b2ZmO2JhbmRmO2NvYXJzZTtjcnVzaDtkaXN0b3J0O2ZyZXE7bm90ZTtfbHBmO19ocGY7X2JwZjtfY2hvcnVzO19jb2Fyc2U7X2NydXNoO19kaXN0b3J0O2NvbnN0cnVjdG9yKHMpe3RoaXMuZnJlcT8/PVAocy5ub3RlKSx0aGlzLl9iZWdpbj1zLl9iZWdpbix0aGlzLl9kdXJhdGlvbj1zLl9kdXJhdGlvbix0aGlzLnJlbGVhc2U9cy5yZWxlYXNlPz8wO2xldCB0PXRoaXM7aWYoT2JqZWN0LmFzc2lnbih0LHMpLHQucz10LnM/P3IoInMiKSx0LmdhaW49Yyh0LmdhaW4/P3IoImdhaW4iKSksdC52ZWxvY2l0eT1jKHQudmVsb2NpdHk/P3IoInZlbG9jaXR5IikpLHQucG9zdGdhaW49Yyh0LnBvc3RnYWluPz9yKCJwb3N0Z2FpbiIpKSx0LmRlbnNpdHk9dC5kZW5zaXR5Pz9yKCJkZW5zaXR5IiksdC5mYW5jaG9yPXQuZmFuY2hvcj8/cigiZmFuY2hvciIpLHQuZHJpdmU9dC5kcml2ZT8/LjY5LHQucGhhc2VyZGVwdGg9dC5waGFzZXJkZXB0aD8/cigicGhhc2VyZGVwdGgiKSx0LnNoYXBldm9sPWModC5zaGFwZXZvbD8/cigic2hhcGV2b2wiKSksdC5kaXN0b3J0dm9sPWModC5kaXN0b3J0dm9sPz9yKCJkaXN0b3J0dm9sIikpLHQuaT10Lmk/P3IoImkiKSx0LmNob3J1cz10LmNob3J1cz8/cigiY2hvcnVzIiksdC5mZnQ9dC5mZnQ/P3IoImZmdCIpLHQucGFuPXQucGFuPz9yKCJwYW4iKSx0Lm9yYml0PXQub3JiaXQ/P3IoIm9yYml0IiksdC5mbWVudj10LmZtZW52Pz9yKCJmbWVudiIpLHQucmVzb25hbmNlPXQucmVzb25hbmNlPz9yKCJyZXNvbmFuY2UiKSx0LmhyZXNvbmFuY2U9dC5ocmVzb25hbmNlPz9yKCJocmVzb25hbmNlIiksdC5iYW5kcT10LmJhbmRxPz9yKCJiYW5kcSIpLHQuc3BlZWQ9dC5zcGVlZD8/cigic3BlZWQiKSx0LnB3PXQucHc/P3IoInB3IiksW3QuYXR0YWNrLHQuZGVjYXksdC5zdXN0YWluLHQucmVsZWFzZV09bShbdC5hdHRhY2ssdC5kZWNheSx0LnN1c3RhaW4sdC5yZWxlYXNlXSksdC5faG9sZEVuZD10Ll9iZWdpbit0Ll9kdXJhdGlvbix0Ll9lbmQ9dC5faG9sZEVuZCt0LnJlbGVhc2UrLjAxLHQuZm1pJiYodC5zPT09InNhdyJ8fHQucz09PSJzYXd0b290aCIpJiYodC5zPSJ6YXciKSxDW3Quc10pe2NvbnN0IGU9Q1t0LnNdO3QuX3NvdW5kPW5ldyBlLHQuX2NoYW5uZWxzPTF9ZWxzZSBpZihfLnNhbXBsZXMuaGFzKHQucykpe2NvbnN0IGU9Xy5zYW1wbGVzLmdldCh0LnMpO3QuX2J1ZmZlcnM9W10sdC5fY2hhbm5lbHM9ZS5jaGFubmVscy5sZW5ndGg7Zm9yKGxldCBoPTA7aDx0Ll9jaGFubmVscztoKyspdC5fYnVmZmVycy5wdXNoKG5ldyBfKGUuY2hhbm5lbHNbaF0sZS5zYW1wbGVSYXRlLHQudW5pdD09PSJjIikpfWVsc2UgY29uc29sZS53YXJuKCJzb3VuZCBub3QgbG9hZGVkIix0LnMpO3QucGVudiYmKHQuX3BlbnY9bmV3IGYoe2RlY2F5Q3VydmU6NH0pLFt0LnBhdHRhY2ssdC5wZGVjYXksdC5wc3VzdGFpbix0LnByZWxlYXNlXT1tKFt0LnBhdHRhY2ssdC5wZGVjYXksdC5wc3VzdGFpbix0LnByZWxlYXNlXSkpLHQudmliJiYodC5fdmliPW5ldyB2LHQudmlibW9kPXQudmlibW9kPz9yKCJ2aWJtb2QiKSksdC5mbWkmJih0Ll9mbT1uZXcgdix0LmZtaD10LmZtaD8/cigiZm1oIiksdC5mbWVudiYmKHQuX2ZtZW52PW5ldyBmKHtkZWNheUN1cnZlOjJ9KSxbdC5mbWF0dGFjayx0LmZtZGVjYXksdC5mbXN1c3RhaW4sdC5mbXJlbGVhc2VdPW0oW3QuZm1hdHRhY2ssdC5mbWRlY2F5LHQuZm1zdXN0YWluLHQuZm1yZWxlYXNlXSkpKSx0Ll9hZHNyPW5ldyBmKHtkZWNheUN1cnZlOjJ9KSx0LmRlbGF5PWModC5kZWxheT8/cigiZGVsYXkiKSksdC5kZWxheWZlZWRiYWNrPXQuZGVsYXlmZWVkYmFjaz8/cigiZGVsYXlmZWVkYmFjayIpLHQuZGVsYXlzcGVlZD10LmRlbGF5c3BlZWQ/P3IoImRlbGF5c3BlZWQiKSx0LmRlbGF5dGltZT10LmRlbGF5dGltZT8/cigiZGVsYXl0aW1lIiksdC5scGVudiYmKHQuX2xwZW52PW5ldyBmKHtkZWNheUN1cnZlOjR9KSxbdC5scGF0dGFjayx0LmxwZGVjYXksdC5scHN1c3RhaW4sdC5scHJlbGVhc2VdPW0oW3QubHBhdHRhY2ssdC5scGRlY2F5LHQubHBzdXN0YWluLHQubHByZWxlYXNlXSkpLHQuaHBlbnYmJih0Ll9ocGVudj1uZXcgZih7ZGVjYXlDdXJ2ZTo0fSksW3QuaHBhdHRhY2ssdC5ocGRlY2F5LHQuaHBzdXN0YWluLHQuaHByZWxlYXNlXT1tKFt0LmhwYXR0YWNrLHQuaHBkZWNheSx0Lmhwc3VzdGFpbix0LmhwcmVsZWFzZV0pKSx0LmJwZW52JiYodC5fYnBlbnY9bmV3IGYoe2RlY2F5Q3VydmU6NH0pLFt0LmJwYXR0YWNrLHQuYnBkZWNheSx0LmJwc3VzdGFpbix0LmJwcmVsZWFzZV09bShbdC5icGF0dGFjayx0LmJwZGVjYXksdC5icHN1c3RhaW4sdC5icHJlbGVhc2VdKSksdC5fY2hvcnVzPXQuY2hvcnVzP1tdOm51bGwsdC5fbHBmPXQuY3V0b2ZmP1tdOm51bGwsdC5faHBmPXQuaGN1dG9mZj9bXTpudWxsLHQuX2JwZj10LmJhbmRmP1tdOm51bGwsdC5fY29hcnNlPXQuY29hcnNlP1tdOm51bGwsdC5fY3J1c2g9dC5jcnVzaD9bXTpudWxsLHQuX2Rpc3RvcnQ9dC5kaXN0b3J0P1tdOm51bGw7Zm9yKGxldCBlPTA7ZTx0aGlzLl9jaGFubmVscztlKyspdC5fbHBmPy5wdXNoKG5ldyBnKSx0Ll9ocGY/LnB1c2gobmV3IGcpLHQuX2JwZj8ucHVzaChuZXcgZyksdC5fY2hvcnVzPy5wdXNoKG5ldyBXKSx0Ll9jb2Fyc2U/LnB1c2gobmV3IFgpLHQuX2NydXNoPy5wdXNoKG5ldyBVKSx0Ll9kaXN0b3J0Py5wdXNoKG5ldyBZKX11cGRhdGUocyl7aWYoIXRoaXMuX3NvdW5kJiYhdGhpcy5fYnVmZmVycylyZXR1cm4gMDtsZXQgdD0rKHM+PXRoaXMuX2JlZ2luJiZzPD10aGlzLl9ob2xkRW5kKSxlPXRoaXMuZnJlcSp0aGlzLnNwZWVkO2lmKHRoaXMuX2ZtJiZ0aGlzLmZtaCE9PXZvaWQgMCYmdGhpcy5mbWkhPT12b2lkIDApe2xldCBhPXRoaXMuZm1pO2lmKHRoaXMuX2ZtZW52KXtjb25zdCBxPXRoaXMuX2ZtZW52LnVwZGF0ZShzLHQsdGhpcy5mbWF0dGFjayx0aGlzLmZtZGVjYXksdGhpcy5mbXN1c3RhaW4sdGhpcy5mbXJlbGVhc2UpO2E9dGhpcy5mbWVudipxKmF9Y29uc3QgcD1lKnRoaXMuZm1oLHU9cCphO2U9ZSt0aGlzLl9mbS51cGRhdGUocCkqdX1pZih0aGlzLl92aWImJnRoaXMudmlibW9kIT09dm9pZCAwJiYoZT1lKjIqKih0aGlzLl92aWIudXBkYXRlKHRoaXMudmliKSp0aGlzLnZpYm1vZC8xMikpLHRoaXMuX3BlbnYmJnRoaXMucGVudiE9PXZvaWQgMCl7Y29uc3QgYT10aGlzLl9wZW52LnVwZGF0ZShzLHQsdGhpcy5wYXR0YWNrLHRoaXMucGRlY2F5LHRoaXMucHN1c3RhaW4sdGhpcy5wcmVsZWFzZSk7ZT1lK2EqdGhpcy5wZW52fWxldCBoPXRoaXMuY3V0b2ZmO2lmKGghPT12b2lkIDAmJnRoaXMuX2xwZW52KXtjb25zdCBhPXRoaXMuX2xwZW52LnVwZGF0ZShzLHQsdGhpcy5scGF0dGFjayx0aGlzLmxwZGVjYXksdGhpcy5scHN1c3RhaW4sdGhpcy5scHJlbGVhc2UpO2g9dGhpcy5scGVudiphKmgraH1sZXQgbz10aGlzLmhjdXRvZmY7aWYobyE9PXZvaWQgMCYmdGhpcy5faHBlbnYmJnRoaXMuaHBlbnYhPT12b2lkIDApe2NvbnN0IGE9dGhpcy5faHBlbnYudXBkYXRlKHMsdCx0aGlzLmhwYXR0YWNrLHRoaXMuaHBkZWNheSx0aGlzLmhwc3VzdGFpbix0aGlzLmhwcmVsZWFzZSk7bz0yKip0aGlzLmhwZW52KmEqbytvfWxldCBuPXRoaXMuYmFuZGY7aWYobiE9PXZvaWQgMCYmdGhpcy5fYnBlbnYmJnRoaXMuYnBlbnYhPT12b2lkIDApe2NvbnN0IGE9dGhpcy5fYnBlbnYudXBkYXRlKHMsdCx0aGlzLmJwYXR0YWNrLHRoaXMuYnBkZWNheSx0aGlzLmJwc3VzdGFpbix0aGlzLmJwcmVsZWFzZSk7bj0yKip0aGlzLmJwZW52KmEqbitufWNvbnN0IGw9dGhpcy5fYWRzci51cGRhdGUocyx0LHRoaXMuYXR0YWNrLHRoaXMuZGVjYXksdGhpcy5zdXN0YWluLHRoaXMucmVsZWFzZSk7Zm9yKGxldCBhPTA7YTx0aGlzLl9jaGFubmVsczthKyspe2lmKHRoaXMuX3NvdW5kJiZ0aGlzLnM9PT0icHVsc2UiP3RoaXMub3V0W2FdPXRoaXMuX3NvdW5kLnVwZGF0ZShlLHRoaXMucHcpOnRoaXMuX3NvdW5kP3RoaXMub3V0W2FdPXRoaXMuX3NvdW5kLnVwZGF0ZShlKTp0aGlzLl9idWZmZXJzJiYodGhpcy5vdXRbYV09dGhpcy5fYnVmZmVyc1thXS51cGRhdGUoZSkpLHRoaXMub3V0W2FdPXRoaXMub3V0W2FdKnRoaXMuZ2Fpbip0aGlzLnZlbG9jaXR5LHRoaXMuX2Nob3J1cyl7Y29uc3QgcD10aGlzLl9jaG9ydXNbYV0udXBkYXRlKHRoaXMub3V0W2FdLHRoaXMuY2hvcnVzLC4wMysuMDUqYSwxLC4xMSk7dGhpcy5vdXRbYV09cCt0aGlzLm91dFthXX10aGlzLl9scGYmJih0aGlzLl9scGZbYV0udXBkYXRlKHRoaXMub3V0W2FdLGgsdGhpcy5yZXNvbmFuY2UpLHRoaXMub3V0W2FdPXRoaXMuX2xwZlthXS5zMSksdGhpcy5faHBmJiYodGhpcy5faHBmW2FdLnVwZGF0ZSh0aGlzLm91dFthXSxvLHRoaXMuaHJlc29uYW5jZSksdGhpcy5vdXRbYV09dGhpcy5vdXRbYV0tdGhpcy5faHBmW2FdLnMxKSx0aGlzLl9icGYmJih0aGlzLl9icGZbYV0udXBkYXRlKHRoaXMub3V0W2FdLG4sdGhpcy5iYW5kcSksdGhpcy5vdXRbYV09dGhpcy5fYnBmW2FdLnMwKSx0aGlzLl9jb2Fyc2UmJih0aGlzLm91dFthXT10aGlzLl9jb2Fyc2VbYV0udXBkYXRlKHRoaXMub3V0W2FdLHRoaXMuY29hcnNlKSksdGhpcy5fY3J1c2gmJih0aGlzLm91dFthXT10aGlzLl9jcnVzaFthXS51cGRhdGUodGhpcy5vdXRbYV0sdGhpcy5jcnVzaCkpLHRoaXMuX2Rpc3RvcnQmJih0aGlzLm91dFthXT10aGlzLl9kaXN0b3J0W2FdLnVwZGF0ZSh0aGlzLm91dFthXSx0aGlzLmRpc3RvcnQsdGhpcy5kaXN0b3J0dm9sKSksdGhpcy5vdXRbYV09dGhpcy5vdXRbYV0qbCx0aGlzLm91dFthXT10aGlzLm91dFthXSp0aGlzLnBvc3RnYWluLHRoaXMuX2J1ZmZlcnN8fCh0aGlzLm91dFthXT10aGlzLm91dFthXSouMil9aWYodGhpcy5fY2hhbm5lbHM9PT0xJiYodGhpcy5vdXRbMV09dGhpcy5vdXRbMF0pLHRoaXMucGFuIT09LjUpe2NvbnN0IGE9dGhpcy5wYW4qTWF0aC5QSS8yO3RoaXMub3V0WzBdPXRoaXMub3V0WzBdKk1hdGguY29zKGEpLHRoaXMub3V0WzFdPXRoaXMub3V0WzFdKk1hdGguc2luKGEpfX19Y2xhc3Mgc3R7dm9pY2VzPVtdO3ZpZD0wO3E9W107b3V0PVswLDBdO2RlbGF5c2VuZD1bMCwwXTtkZWxheXRpbWU9cigiZGVsYXl0aW1lIik7ZGVsYXlmZWVkYmFjaz1yKCJkZWxheWZlZWRiYWNrIik7ZGVsYXlzcGVlZD1yKCJkZWxheXNwZWVkIik7dD0wO2NvbnN0cnVjdG9yKHM9NDhlMyx0PTApe3RoaXMuc2FtcGxlUmF0ZT1zLHRoaXMudD1NYXRoLmZsb29yKHQqcyksdGhpcy5fZGVsYXlMPW5ldyBrLHRoaXMuX2RlbGF5Uj1uZXcga31sb2FkU2FtcGxlKHMsdCxlKXtfLnNhbXBsZXMuc2V0KHMse2NoYW5uZWxzOnQsc2FtcGxlUmF0ZTplfSl9c2NoZWR1bGVTcGF3bihzKXtpZihzLl9iZWdpbj09PXZvaWQgMCl0aHJvdyBuZXcgRXJyb3IoIltkb3VnaF06IHNjaGVkdWxlU3Bhd24gZXhwZWN0ZWQgX2JlZ2luIHRvIGJlIHNldCIpO2lmKHMuX2R1cmF0aW9uPT09dm9pZCAwKXRocm93IG5ldyBFcnJvcigiW2RvdWdoXTogc2NoZWR1bGVTcGF3biBleHBlY3RlZCBfZHVyYXRpb24gdG8gYmUgc2V0Iik7cy5zYW1wbGVSYXRlPXRoaXMuc2FtcGxlUmF0ZTtjb25zdCB0PU1hdGguZmxvb3Iocy5fYmVnaW4qdGhpcy5zYW1wbGVSYXRlKTt0aGlzLnNjaGVkdWxlKHt0aW1lOnQsdHlwZToic3Bhd24iLGFyZzpzfSl9c3Bhd24ocyl7cy5pZD10aGlzLnZpZCsrO2NvbnN0IHQ9bmV3IHR0KHMpO3RoaXMudm9pY2VzLnB1c2godCk7Y29uc3QgZT1NYXRoLmNlaWwodC5fZW5kKnRoaXMuc2FtcGxlUmF0ZSk7dGhpcy5zY2hlZHVsZSh7dGltZTplLHR5cGU6ImRlc3Bhd24iLGFyZzp0LmlkfSl9ZGVzcGF3bihzKXt0aGlzLnZvaWNlcz10aGlzLnZvaWNlcy5maWx0ZXIodD0+dC5pZCE9PXMpfXNjaGVkdWxlKHMpe2lmKCF0aGlzLnEubGVuZ3RoKXt0aGlzLnEucHVzaChzKTtyZXR1cm59bGV0IHQ9MDtmb3IoO3Q8dGhpcy5xLmxlbmd0aCYmdGhpcy5xW3RdLnRpbWU8cy50aW1lOyl0Kys7dGhpcy5xLnNwbGljZSh0LDAscyl9dXBkYXRlKCl7Zm9yKDt0aGlzLnEubGVuZ3RoPjAmJnRoaXMucVswXS50aW1lPD10aGlzLnQ7KXRoaXNbdGhpcy5xWzBdLnR5cGVdKHRoaXMucVswXS5hcmcpLHRoaXMucS5zaGlmdCgpO3RoaXMub3V0WzBdPTAsdGhpcy5vdXRbMV09MDtmb3IobGV0IGU9MDtlPHRoaXMudm9pY2VzLmxlbmd0aDtlKyspdGhpcy52b2ljZXNbZV0udXBkYXRlKHRoaXMudC90aGlzLnNhbXBsZVJhdGUpLHRoaXMub3V0WzBdKz10aGlzLnZvaWNlc1tlXS5vdXRbMF0sdGhpcy5vdXRbMV0rPXRoaXMudm9pY2VzW2VdLm91dFsxXSx0aGlzLnZvaWNlc1tlXS5kZWxheSYmKHRoaXMuZGVsYXlzZW5kWzBdKz10aGlzLnZvaWNlc1tlXS5vdXRbMF0qdGhpcy52b2ljZXNbZV0uZGVsYXksdGhpcy5kZWxheXNlbmRbMV0rPXRoaXMudm9pY2VzW2VdLm91dFsxXSp0aGlzLnZvaWNlc1tlXS5kZWxheSx0aGlzLmRlbGF5dGltZT10aGlzLnZvaWNlc1tlXS5kZWxheXRpbWUsdGhpcy5kZWxheXNwZWVkPXRoaXMudm9pY2VzW2VdLmRlbGF5c3BlZWQsdGhpcy5kZWxheWZlZWRiYWNrPXRoaXMudm9pY2VzW2VdLmRlbGF5ZmVlZGJhY2spO2NvbnN0IHM9dGhpcy5fZGVsYXlMLnVwZGF0ZSh0aGlzLmRlbGF5c2VuZFswXSx0aGlzLmRlbGF5dGltZSksdD10aGlzLl9kZWxheVIudXBkYXRlKHRoaXMuZGVsYXlzZW5kWzFdLHRoaXMuZGVsYXl0aW1lKTt0aGlzLmRlbGF5c2VuZFswXT1zKnRoaXMuZGVsYXlmZWVkYmFjayx0aGlzLmRlbGF5c2VuZFsxXT10KnRoaXMuZGVsYXlmZWVkYmFjayx0aGlzLm91dFswXSs9cyx0aGlzLm91dFsxXSs9dCx0aGlzLnQrK319Y29uc3QgZXQ9KGkscyx0KT0+TWF0aC5taW4oTWF0aC5tYXgoaSxzKSx0KTtjbGFzcyBpdCBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3Nvcntjb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5kb3VnaD1uZXcgc3Qoc2FtcGxlUmF0ZSxjdXJyZW50VGltZSksdGhpcy5wb3J0Lm9ubWVzc2FnZT1zPT57cy5kYXRhLnNwYXduP3RoaXMuZG91Z2guc2NoZWR1bGVTcGF3bihzLmRhdGEuc3Bhd24pOnMuZGF0YS5zYW1wbGU/dGhpcy5kb3VnaC5sb2FkU2FtcGxlKHMuZGF0YS5zYW1wbGUscy5kYXRhLmNoYW5uZWxzLHMuZGF0YS5zYW1wbGVSYXRlKTpzLmRhdGEuc2FtcGxlcz9zLmRhdGEuc2FtcGxlcy5mb3JFYWNoKChbdCxlLGhdKT0+e3RoaXMuZG91Z2gubG9hZFNhbXBsZSh0LGUsaCl9KTpjb25zb2xlLmxvZygidW5yZWNvZ25pemVkIGV2ZW50IHR5cGUiLHMuZGF0YSl9fXByb2Nlc3Mocyx0LGUpe2lmKHRoaXMuZGlzY29ubmVjdGVkKXJldHVybiExO2NvbnN0IGg9dFswXTtmb3IobGV0IG89MDtvPGhbMF0ubGVuZ3RoO28rKyl7dGhpcy5kb3VnaC51cGRhdGUoKTtmb3IobGV0IG49MDtuPGgubGVuZ3RoO24rKyloW25dW29dPWV0KHRoaXMuZG91Z2gub3V0W25dLC0xLDEpfXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigiZG91Z2gtcHJvY2Vzc29yIixpdCl9KSgpOwo=";typeof sampleRate<"u"&&sampleRate;const workletUrl=_workletUrl;registerWorklet(workletUrl);const{Pattern,logger,repl}=strudelCore;setLogger(logger);const hap2value=e=>(e.ensureObjectValue(),e.value),webaudioOutput=(e,o,l,d,O)=>superdough(hap2value(e),O,l,d,e.whole?.begin.valueOf());function webaudioRepl(e={}){return e={getTime:()=>getAudioContext().currentTime,defaultOutput:webaudioOutput,...e},repl(e)}Pattern.prototype.dough=function(){return this.onTrigger(doughTrigger,1)};const getDrawContext=(e="test-canvas",o)=>{let{contextType:l="2d",pixelated:d=!1,pixelRatio:O=window.devicePixelRatio}=o||{},A=document.querySelector("#"+e);if(!A){A=document.createElement("canvas"),A.id=e,A.width=window.innerWidth*O,A.height=window.innerHeight*O,A.style="pointer-events:none;width:100%;height:100%;position:fixed;top:0;left:0",d&&(A.style.imageRendering="pixelated"),document.body.prepend(A);let S;window.addEventListener("resize",()=>{S&&clearTimeout(S),S=setTimeout(()=>{A.width=window.innerWidth*O,A.height=window.innerHeight*O},200)})}return A.getContext(l,{willReadFrequently:!0})};let animationFrames={};function stopAnimationFrame(e){animationFrames[e]!==void 0&&(cancelAnimationFrame(animationFrames[e]),delete animationFrames[e])}function stopAllAnimations(e){Object.keys(animationFrames).forEach(o=>stopAnimationFrame(o))}let memory={};Pattern$1.prototype.draw=function(e,o){if(typeof window>"u")return this;let{id:l=1,lookbehind:d=0,lookahead:O=0}=o,A=Math.max(getTime(),0);stopAnimationFrame(l),d=Math.abs(d),memory[l]=(memory[l]||[]).filter(E=>!E.isInFuture(A));let S=this.queryArc(A,A+O).filter(E=>E.hasOnset());memory[l]=memory[l].concat(S);let $;const F=()=>{const E=getTime(),L=E+O;memory[l]=memory[l].filter(B=>B.isInNearPast(d,E));let N=Math.max($||L,L-1/10);const V=this.queryArc(N,L).filter(B=>B.hasOnset());memory[l]=memory[l].concat(V),$=L,e(memory[l],E,L,this),animationFrames[l]=requestAnimationFrame(F)};return animationFrames[l]=requestAnimationFrame(F),this};const cleanupDraw=(e=!0,o)=>{const l=getDrawContext();e&&l.clearRect(0,0,l.canvas.width,l.canvas.height),stopAllAnimations()};Pattern$1.prototype.onPaint=function(e){return this.withState(o=>(o.controls.painters||(o.controls.painters=[]),o.controls.painters.push(e),o))},Pattern$1.prototype.getPainters=function(){let e=[];return this.queryArc(0,0,{painters:e}),e};class Framer{constructor(o,l){this.onFrame=o,this.onError=l}start(){const o=this;let l=requestAnimationFrame(function d(O){try{o.onFrame(O)}catch(A){o.onError(A)}l=requestAnimationFrame(d)});o.cancel=()=>{cancelAnimationFrame(l)}}stop(){this.cancel&&this.cancel()}}let Drawer$1=class{constructor(o,l){this.visibleHaps=[],this.lastFrame=null,this.drawTime=l,this.painters=[],this.framer=new Framer(()=>{if(!this.scheduler){console.warn("Drawer: no scheduler");return}const d=Math.abs(this.drawTime[0]),O=this.drawTime[1],A=this.scheduler.now()+O;if(this.lastFrame===null){this.lastFrame=A;return}const S=this.scheduler.pattern.queryArc(Math.max(this.lastFrame,A-1/10),A);this.lastFrame=A,this.visibleHaps=(this.visibleHaps||[]).filter(F=>F.whole&&F.endClipped>=A-d-O).concat(S.filter(F=>F.hasOnset()));const $=A-O;o(this.visibleHaps,$,this,this.painters)},d=>{console.warn("draw error",d)})}setDrawTime(o){this.drawTime=o}invalidate(o=this.scheduler,l){if(!o)return;l=l??o.now(),this.scheduler=o;let[d,O]=this.drawTime;const[A,S]=[Math.max(l,0),l+O+.1];this.visibleHaps=this.visibleHaps.filter(F=>F.whole?.begin<l),this.painters=[];const $=o.pattern.queryArc(A,S,{painters:this.painters});this.visibleHaps=this.visibleHaps.concat($)}start(o){this.scheduler=o,this.invalidate(),this.framer.start()}stop(){this.framer&&this.framer.stop()}},theme={background:"#222",foreground:"#75baff",caret:"#ffcc00",selection:"rgba(128, 203, 196, 0.5)",selectionMatch:"#036dd626",lineHighlight:"#00000050",gutterBackground:"transparent",gutterForeground:"#8a919966"};function getTheme(){return theme}let clearColor="#22222210";Pattern$1.prototype.animate=function({callback:e,sync:o=!1,smear:l=.5}={}){window.frame&&cancelAnimationFrame(window.frame);const d=getDrawContext();let{clientWidth:O,clientHeight:A}=d.canvas;O*=window.devicePixelRatio,A*=window.devicePixelRatio;let S=l===0?"99":Number((1-l)*100).toFixed(0);S=S.length===1?`0${S}`:S,clearColor=`#200010${S}`;const $=F=>{let E;F=Math.round(F),E=this.slow(1e3).queryArc(F,F),d.fillStyle=clearColor,d.fillRect(0,0,O,A),E.forEach(L=>{let{x:N,y:V,w:B,h:U,s:q,r:ee,angle:le=0,fill:ue="darkseagreen"}=L.value;if(B*=O,U*=A,ee!==void 0&&le!==void 0){const ie=le*2*Math.PI,[ae,fe]=[(O-B)/2,(A-U)/2];N=ae+Math.cos(ie)*ee*ae,V=fe+Math.sin(ie)*ee*fe}else N*=O-B,V*=A-U;const _e={...L.value,x:N,y:V,w:B,h:U};d.fillStyle=ue,q==="rect"?d.fillRect(N,V,B,U):q==="ellipse"&&(d.beginPath(),d.ellipse(N+B/2,V+U/2,B/2,U/2,0,0,2*Math.PI),d.fill()),e&&e(d,_e,L)}),window.frame=requestAnimationFrame($)};return window.frame=requestAnimationFrame($),silence};const{x:x$1,y,w,h,angle,r,fill,smear}=createParams("x","y","w","h","angle","r","fill","smear");register("rescale",function(e,o){return o.mul(x$1(e).w(e).y(e).h(e))}),register("moveXY",function(e,o,l){return l.add(x$1(e).y(o))}),register("zoomIn",function(e,o){const l=pure(1).sub(e).div(2);return o.rescale(e).move(l,l)});const scale$2=(e,o,l)=>e*(l-o)+o,getValue=e=>{let{value:o}=e;typeof e.value!="object"&&(o={value:o});let{note:l,n:d,freq:O,s:A}=o;if(O)return freqToMidi$2(O);if(l=l??d,typeof l=="string")try{return noteToMidi$1(l)}catch{return 0}return typeof l=="number"?l:A?"_"+A:o};Pattern$1.prototype.pianoroll=function(e={}){let{cycles:o=4,playhead:l=.5,overscan:d=0,hideNegative:O=!1,ctx:A=getDrawContext(),id:S=1}=e,$=-o*l,F=o*(1-l);const E=(L,N)=>(!O||L.whole.begin>=0)&&L.isWithinTime(N+$,N+F);return this.draw((L,N)=>{__pianoroll({...e,time:N,ctx:A,haps:L.filter(V=>E(V,N))})},{lookbehind:$-d,lookahead:F+d,id:S}),this};function __pianoroll({time:e,haps:o,cycles:l=4,playhead:d=.5,flipTime:O=0,flipValues:A=0,hideNegative:S=!1,inactive:$=getTheme().foreground,active:F=getTheme().foreground,background:E="transparent",smear:L=0,playheadColor:N=getTheme().foreground,minMidi:V=10,maxMidi:B=90,autorange:U=0,timeframe:q,fold:ee=1,vertical:le=0,labels:ue=!1,fill:_e=1,fillActive:ie=!1,strokeActive:ae=!0,stroke:fe,hideInactive:Oe=0,colorizeInactive:ve=1,fontFamily:Re,ctx:Me,id:Ye}={}){const Te=Me.canvas.width,Ge=Me.canvas.height;let Ne=-l*d,Je=l*(1-d);Ye&&(o=o.filter(St=>St.hasTag(Ye))),q&&(console.warn("timeframe is deprecated! use from/to instead"),Ne=0,Je=q);const je=le?Ge:Te,qe=le?Te:Ge;let et=le?[je,0]:[0,je];const Tt=Je-Ne,Rt=le?[0,qe]:[qe,0];let Qt=B-V+1,Fe=qe/Qt,pt=[];O&&et.reverse(),A&&Rt.reverse();const{min:we,max:xt,values:Ct}=o.reduce(({min:St,max:Lt,values:cn},sn)=>{const Xt=getValue(sn);return{min:Xt<St?Xt:St,max:Xt>Lt?Xt:Lt,values:cn.includes(Xt)?cn:[...cn,Xt]}},{min:1/0,max:-1/0,values:[]});U&&(V=we,B=xt,Qt=B-V+1),pt=Ct.sort((St,Lt)=>typeof St=="number"&&typeof Lt=="number"?St-Lt:typeof St=="number"?1:String(St).localeCompare(String(Lt))),Fe=ee?qe/pt.length:qe/Qt,Me.fillStyle=E,Me.globalAlpha=1,L||(Me.clearRect(0,0,Te,Ge),Me.fillRect(0,0,Te,Ge)),o.forEach(St=>{const Lt=St.whole.begin<=e&&St.endClipped>e;let cn=fe??(ae&&Lt),sn=!Lt&&_e||Lt&&ie;if(Oe&&!Lt)return;let Xt=St.value?.color;F=Xt||F,$=ve&&Xt||$,Xt=Lt?F:$,Me.fillStyle=sn?Xt:"transparent",Me.strokeStyle=Xt;const{velocity:on=1,gain:bt=1}=St.value||{};Me.globalAlpha=on*bt;const un=(St.whole.begin-(O?Je:Ne))/Tt,jt=scale$2(un,...et);let rn=scale$2(St.duration/Tt,0,je);const $n=getValue(St),Ae=ee?pt.indexOf($n)/pt.length:(Number($n)-V)/Qt,xe=scale$2(Ae,...Rt);let ye=0;const ke=scale$2(e/Tt,...et);let Qe;if(le?Qe=[xe+1-(A?Fe:0),je-ke+jt+ye+1-(O?0:rn),Fe-2,rn-2]:Qe=[jt-ke+ye+1-(O?rn:0),xe+1-(A?0:Fe),rn-2,Fe-2],cn&&Me.strokeRect(...Qe),sn&&Me.fillRect(...Qe),ue){const Ue=St.value.note??St.value.s+(St.value.n?`:${St.value.n}`:""),{label:Xe,activeLabel:ut}=St.value,at=(Lt&&ut||Xe)??Ue;let ft=le?rn:Fe*.75;Me.font=`${ft}px ${Re||"monospace"}`,Me.fillStyle=sn?"black":Xt,Me.textBaseline="top",Me.fillText(at,...Qe)}}),Me.globalAlpha=1;const Ze=scale$2(-Ne/Tt,...et);return Me.strokeStyle=N,Me.beginPath(),le?(Me.moveTo(0,Ze),Me.lineTo(qe,Ze)):(Me.moveTo(Ze,0),Me.lineTo(Ze,qe)),Me.stroke(),this}function getDrawOptions(e,o={}){let[l,d]=e;l=Math.abs(l);const O=d+l,A=O!==0?l/O:0;return{fold:1,...o,cycles:O,playhead:A}}const getPunchcardPainter=(e={})=>(o,l,d,O)=>__pianoroll({ctx:o,time:l,haps:d,...getDrawOptions(O,e)});Pattern$1.prototype.punchcard=function(e){return this.onPaint(getPunchcardPainter(e))},Pattern$1.prototype.wordfall=function(e){return this.punchcard({vertical:1,labels:1,stroke:0,fillActive:1,active:"white",...e})};function fromPolar(e,o,l,d){const O=(e-90)*Math.PI/180;return[l+Math.cos(O)*o,d+Math.sin(O)*o]}const xyOnSpiral=(e,o,l,d,O=0)=>fromPolar((e+O)*360,o*e,l,d);function spiralSegment(e){let{ctx:o,from:l=0,to:d=3,margin:O=50,cx:A=100,cy:S=100,rotate:$=0,thickness:F=O/2,color:E=getTheme().foreground,cap:L="round",stretch:N=1,fromOpacity:V=1,toOpacity:B=1}=e;l*=N,d*=N,$*=N,o.lineWidth=F,o.lineCap=L,o.strokeStyle=E,o.globalAlpha=V,o.beginPath();let[U,q]=xyOnSpiral(l,O,A,S,$);o.moveTo(U,q);const ee=1/60;let le=l;for(;le<=d;){const[ue,_e]=xyOnSpiral(le,O,A,S,$);o.globalAlpha=(le-l)/(d-l)*B,o.lineTo(ue,_e),le+=ee}o.stroke()}function drawSpiral(e){let{stretch:o=1,size:l=80,thickness:d=l/2,cap:O="butt",inset:A=3,playheadColor:S="#ffffff",playheadLength:$=.02,playheadThickness:F=d,padding:E=0,steady:L=1,activeColor:N=getTheme().foreground,inactiveColor:V=getTheme().gutterForeground,colorizeInactive:B=0,fade:U=!0,ctx:q,time:ee,haps:le,drawTime:ue,id:_e}=e;_e&&(le=le.filter(Te=>Te.hasTag(_e)));const[ie,ae]=[q.canvas.width,q.canvas.height];q.clearRect(0,0,ie*2,ae*2);const[fe,Oe]=[ie/2,ae/2],ve={margin:l/o,cx:fe,cy:Oe,stretch:o,cap:O,thickness:d},Re={...ve,thickness:F,from:A-$,to:A,color:S},[Me]=ue,Ye=L*ee;le.forEach(Te=>{const Ge=Te.whole.begin<=ee&&Te.endClipped>ee,Ne=Te.whole.begin-ee+A,Je=Te.endClipped-ee+A-E,je=Te.value?.color||N,qe=B||Ge?je:V,et=U?1-Math.abs((Te.whole.begin-ee)/Me):1;spiralSegment({ctx:q,...ve,from:Ne,to:Je,rotate:Ye,color:qe,fromOpacity:et,toOpacity:et})}),spiralSegment({ctx:q,...Re,rotate:Ye})}Pattern$1.prototype.spiral=function(e={}){return this.onPaint((o,l,d,O)=>drawSpiral({ctx:o,time:l,haps:d,drawTime:O,...e}))};const c=midiToFreq$2(36),circlePos=(e,o,l,d)=>{d=d*Math.PI*2;const O=Math.sin(d)*l+e,A=Math.cos(d)*l+o;return[O,A]},freq2angle=(e,o)=>.5-Math.log2(e/o)%1;function pitchwheel({haps:e,ctx:o,id:l,hapcircles:d=1,circle:O=0,edo:A=12,root:S=c,thickness:$=3,hapRadius:F=6,mode:E="flake",margin:L=10}={}){const N=E==="polygon",V=E==="flake",B=o.canvas.width,U=o.canvas.height;o.clearRect(0,0,B,U);const q=getTheme().foreground,le=Math.min(B,U)/2-$/2-F-L,ue=B/2,_e=U/2;l&&(e=e.filter(ae=>ae.hasTag(l))),o.strokeStyle=q,o.fillStyle=q,o.globalAlpha=1,o.lineWidth=$,O&&(o.beginPath(),o.arc(ue,_e,le,0,2*Math.PI),o.stroke()),A&&(Array.from({length:A},(ae,fe)=>{const Oe=freq2angle(S*Math.pow(2,fe/A),S),[ve,Re]=circlePos(ue,_e,le,Oe);o.beginPath(),o.arc(ve,Re,F,0,2*Math.PI),o.fill()}),o.stroke());let ie=[];o.lineWidth=F,e.forEach(ae=>{let fe;try{fe=getFrequency(ae)}catch{return}const Oe=freq2angle(fe,S),[ve,Re]=circlePos(ue,_e,le,Oe),Me=ae.value.color||q;o.strokeStyle=Me,o.fillStyle=Me;const{velocity:Ye=1,gain:Te=1}=ae.value||{},Ge=Ye*Te;o.globalAlpha=Ge,ie.push([ve,Re,Oe,Me,Ge]),o.beginPath(),d&&(o.moveTo(ve+F,Re),o.arc(ve,Re,F,0,2*Math.PI),o.fill()),V&&(o.moveTo(ue,_e),o.lineTo(ve,Re)),o.stroke()}),o.strokeStyle=q,o.globalAlpha=1,N&&ie.length&&(ie=ie.sort((ae,fe)=>ae[2]-fe[2]),o.beginPath(),o.moveTo(ie[0][0],ie[0][1]),ie.forEach(([ae,fe,Oe,ve,Re])=>{o.strokeStyle=ve,o.globalAlpha=Re,o.lineTo(ae,fe)}),o.lineTo(ie[0][0],ie[0][1]),o.stroke())}Pattern$1.prototype.pitchwheel=function(e={}){let{ctx:o=getDrawContext(),id:l=1}=e;return this.tag(l).onPaint((d,O,A)=>pitchwheel({...e,ctx:o,haps:A.filter(S=>S.isActive(O)),id:l}))};function drawTimeScope(e,{align:o=!0,color:l="white",thickness:d=3,scale:O=.25,pos:A=.75,trigger:S=0,ctx:$=getDrawContext(),id:F=1}={}){$.lineWidth=d,$.strokeStyle=l;let E=$.canvas;if(!e){$.beginPath();let q=A*E.height;$.moveTo(0,q),$.lineTo(E.width,q),$.stroke();return}const L=getAnalyzerData("time",F);$.beginPath();const N=e.frequencyBinCount;let V=o?Array.from(L).findIndex((q,ee,le)=>ee&&le[ee-1]>-S&&q<=-S):0;V=Math.max(V,0);const B=E.width*1/N;let U=0;for(let q=V;q<N;q++){const ee=L[q]+1,le=(A-O*(ee-1))*E.height;q===0?$.moveTo(U,le):$.lineTo(U,le),U+=B}$.stroke()}function drawFrequencyScope(e,{color:o="white",scale:l=.25,pos:d=.75,lean:O=.5,min:A=-150,max:S=0,ctx:$=getDrawContext(),id:F=1}={}){if(!e){$.beginPath();let U=d*L.height;$.moveTo(0,U),$.lineTo(L.width,U),$.stroke();return}const E=getAnalyzerData("frequency",F),L=$.canvas;$.fillStyle=o;const N=e.frequencyBinCount,V=L.width*1/N;let B=0;for(let U=0;U<N;U++){const ee=clamp$1((E[U]-A)/(S-A),0,1)*l,le=ee*L.height,ue=(d-ee*O)*L.height;$.fillRect(B,ue,Math.max(V,1),le),B+=V}}function clearScreen(e=0,o="0,0,0",l=getDrawContext()){e?(l.fillStyle=`rgba(${o},${1-e})`,l.fillRect(0,0,l.canvas.width,l.canvas.height)):l.clearRect(0,0,l.canvas.width,l.canvas.height)}Pattern$1.prototype.fscope=function(e={}){let o=e.id??1;return this.analyze(o).draw(()=>{clearScreen(e.smear,"0,0,0",e.ctx),analysers[o]&&drawFrequencyScope(analysers[o],e)},{id:o})},Pattern$1.prototype.tscope=function(e={}){let o=e.id??1;return this.analyze(o).draw(l=>{e.color=l[0]?.value?.color||getTheme().foreground,e.color,clearScreen(e.smear,"0,0,0",e.ctx),drawTimeScope(analysers[o],e)},{id:o})},Pattern$1.prototype.scope=Pattern$1.prototype.tscope;let latestColor={};Pattern$1.prototype.spectrum=function(e={}){let o=e.id??1;return this.analyze(o).draw(l=>{e.color=l[0]?.value?.color||latestColor[o]||getTheme().foreground,latestColor[o]=e.color,drawSpectrum(analysers[o],e)},{id:o})},Pattern$1.prototype.scope=Pattern$1.prototype.tscope;const lastFrames=new Map;function drawSpectrum(e,{thickness:o=3,speed:l=1,min:d=-80,max:O=0,ctx:A=getDrawContext(),id:S=1,color:$}={}){if(A.lineWidth=o,A.strokeStyle=$,!e)return;const F=l,E=getAnalyzerData("frequency",S),L=A.canvas;A.fillStyle=$;const N=e.frequencyBinCount;let V=lastFrames.get(S)||A.getImageData(0,0,L.width,L.height);lastFrames.set(S,V),A.clearRect(0,0,A.canvas.width,A.canvas.height),A.putImageData(V,-F,0);let B=L.width-l;for(let U=0;U<N;U++){const q=clamp$1((E[U]-d)/(O-d),0,1);A.globalAlpha=q;const ee=Math.log(U+1)/Math.log(N)*L.height;A.fillRect(B,L.height-ee,F,2)}lastFrames.set(S,A.getImageData(0,0,L.width,L.height))}const strudelWebAudio=Object.freeze(Object.defineProperty({__proto__:null,DEFAULT_MAX_POLYPHONY,Warpmode,aliasBank,get analysers(){return analysers},get analysersData(){return analysersData},applyFM,applyGainCurve,applyParameterModulators,connectToDestination,createFilter,destroyAudioWorkletNode,distortionAlgorithms,dough,doughTrigger,doughsamples,drawFrequencyScope,drawTimeScope,drywet,dspWorklet,effectSend,errorLogger,gainNode,getADSRValues,getAnalyserById,getAnalyzerData,getAudioContext,getAudioContextCurrentTime,getAudioDevices,getCachedBuffer,getCompressor,getDefaultValue,getDistortion,getDistortionAlgorithm,getFrequencyFromValue,getLfo,getLoadedBuffer,getOscillator,getParamADSR,getParamLfo,getPitchEnvelope,getSampleBuffer,getSampleBufferSource,getSampleInfo,getSound,getSuperdoughAudioController,getVibratoOscillator,getWorklet,getZZFX,initAudio:initAudio$1,initAudioOnFirstClick,loadBuffer:loadBuffer$1,logger:logger$1,noises,onTriggerSample,onTriggerSynth,processSampleMap,registerSampleSource,registerSamplesPrefix,registerSound,registerSynthSounds:registerSynthSounds$1,registerWaveTable,registerWorklet,registerZZFXSounds,resetDefaultValues,resetDefaults,resetGlobalEffects,resetLoadedSounds,reverseBuffer,samples:samples$1,scheduleAtTime,setDefault,setDefaultAudioContext,setDefaultValue,setDefaultValues,setGainCurve,setLogger,setMaxPolyphony,setMultiChannelOrbits,setVersionDefaults,soundAlias,soundMap:soundMap$1,superdough,superdoughTrigger,tables,waveformN,webAudioTimeout,webaudioOutput,webaudioRepl},Symbol.toStringTag,{value:"Module"}));var astralIdentifierCodes=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,7,9,32,4,318,1,80,3,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,68,8,2,0,3,0,2,3,2,4,2,0,15,1,83,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,7,19,58,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,343,9,54,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,10,5350,0,7,14,11465,27,2343,9,87,9,39,4,60,6,26,9,535,9,470,0,2,54,8,3,82,0,12,1,19628,1,4178,9,519,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,245,1,2,9,726,6,110,6,6,9,4759,9,787719,239],astralIdentifierStartCodes=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,4,51,13,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,39,27,10,22,251,41,7,1,17,2,60,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,31,9,2,0,3,0,2,37,2,0,26,0,2,0,45,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,200,32,32,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,26,3994,6,582,6842,29,1763,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,433,44,212,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,42,9,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,229,29,3,0,496,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],nonASCIIidentifierChars="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࢗ-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‌‍‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯・꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿･",nonASCIIidentifierStartChars="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲊᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟍꟐꟑꟓꟕ-Ƛꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",reservedWords={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},ecma5AndLessKeywords="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",keywords$1={5:ecma5AndLessKeywords,"5module":ecma5AndLessKeywords+" export import",6:ecma5AndLessKeywords+" const class extends export import super"},keywordRelationalOperator=/^in(stanceof)?$/,nonASCIIidentifierStart=new RegExp("["+nonASCIIidentifierStartChars+"]"),nonASCIIidentifier=new RegExp("["+nonASCIIidentifierStartChars+nonASCIIidentifierChars+"]");function isInAstralSet(e,o){for(var l=65536,d=0;d<o.length;d+=2){if(l+=o[d],l>e)return!1;if(l+=o[d+1],l>=e)return!0}return!1}function isIdentifierStart(e,o){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&nonASCIIidentifierStart.test(String.fromCharCode(e)):o===!1?!1:isInAstralSet(e,astralIdentifierStartCodes)}function isIdentifierChar(e,o){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&nonASCIIidentifier.test(String.fromCharCode(e)):o===!1?!1:isInAstralSet(e,astralIdentifierStartCodes)||isInAstralSet(e,astralIdentifierCodes)}var TokenType=function(o,l){l===void 0&&(l={}),this.label=o,this.keyword=l.keyword,this.beforeExpr=!!l.beforeExpr,this.startsExpr=!!l.startsExpr,this.isLoop=!!l.isLoop,this.isAssign=!!l.isAssign,this.prefix=!!l.prefix,this.postfix=!!l.postfix,this.binop=l.binop||null,this.updateContext=null};function binop(e,o){return new TokenType(e,{beforeExpr:!0,binop:o})}var beforeExpr={beforeExpr:!0},startsExpr={startsExpr:!0},keywords={};function kw(e,o){return o===void 0&&(o={}),o.keyword=e,keywords[e]=new TokenType(e,o)}var types$1={num:new TokenType("num",startsExpr),regexp:new TokenType("regexp",startsExpr),string:new TokenType("string",startsExpr),name:new TokenType("name",startsExpr),privateId:new TokenType("privateId",startsExpr),eof:new TokenType("eof"),bracketL:new TokenType("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new TokenType("]"),braceL:new TokenType("{",{beforeExpr:!0,startsExpr:!0}),braceR:new TokenType("}"),parenL:new TokenType("(",{beforeExpr:!0,startsExpr:!0}),parenR:new TokenType(")"),comma:new TokenType(",",beforeExpr),semi:new TokenType(";",beforeExpr),colon:new TokenType(":",beforeExpr),dot:new TokenType("."),question:new TokenType("?",beforeExpr),questionDot:new TokenType("?."),arrow:new TokenType("=>",beforeExpr),template:new TokenType("template"),invalidTemplate:new TokenType("invalidTemplate"),ellipsis:new TokenType("...",beforeExpr),backQuote:new TokenType("`",startsExpr),dollarBraceL:new TokenType("${",{beforeExpr:!0,startsExpr:!0}),eq:new TokenType("=",{beforeExpr:!0,isAssign:!0}),assign:new TokenType("_=",{beforeExpr:!0,isAssign:!0}),incDec:new TokenType("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new TokenType("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:binop("||",1),logicalAND:binop("&&",2),bitwiseOR:binop("|",3),bitwiseXOR:binop("^",4),bitwiseAND:binop("&",5),equality:binop("==/!=/===/!==",6),relational:binop("</>/<=/>=",7),bitShift:binop("<</>>/>>>",8),plusMin:new TokenType("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:binop("%",10),star:binop("*",10),slash:binop("/",10),starstar:new TokenType("**",{beforeExpr:!0}),coalesce:binop("??",1),_break:kw("break"),_case:kw("case",beforeExpr),_catch:kw("catch"),_continue:kw("continue"),_debugger:kw("debugger"),_default:kw("default",beforeExpr),_do:kw("do",{isLoop:!0,beforeExpr:!0}),_else:kw("else",beforeExpr),_finally:kw("finally"),_for:kw("for",{isLoop:!0}),_function:kw("function",startsExpr),_if:kw("if"),_return:kw("return",beforeExpr),_switch:kw("switch"),_throw:kw("throw",beforeExpr),_try:kw("try"),_var:kw("var"),_const:kw("const"),_while:kw("while",{isLoop:!0}),_with:kw("with"),_new:kw("new",{beforeExpr:!0,startsExpr:!0}),_this:kw("this",startsExpr),_super:kw("super",startsExpr),_class:kw("class",startsExpr),_extends:kw("extends",beforeExpr),_export:kw("export"),_import:kw("import",startsExpr),_null:kw("null",startsExpr),_true:kw("true",startsExpr),_false:kw("false",startsExpr),_in:kw("in",{beforeExpr:!0,binop:7}),_instanceof:kw("instanceof",{beforeExpr:!0,binop:7}),_typeof:kw("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:kw("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:kw("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},lineBreak=/\r\n?|\n|\u2028|\u2029/,lineBreakG=new RegExp(lineBreak.source,"g");function isNewLine(e){return e===10||e===13||e===8232||e===8233}function nextLineBreak(e,o,l){l===void 0&&(l=e.length);for(var d=o;d<l;d++){var O=e.charCodeAt(d);if(isNewLine(O))return d<l-1&&O===13&&e.charCodeAt(d+1)===10?d+2:d+1}return-1}var nonASCIIwhitespace=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,skipWhiteSpace=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,ref=Object.prototype,hasOwnProperty=ref.hasOwnProperty,toString=ref.toString,hasOwn=Object.hasOwn||(function(e,o){return hasOwnProperty.call(e,o)}),isArray=Array.isArray||(function(e){return toString.call(e)==="[object Array]"}),regexpCache=Object.create(null);function wordsRegexp(e){return regexpCache[e]||(regexpCache[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function codePointToString(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var loneSurrogate=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,Position=function(o,l){this.line=o,this.column=l};Position.prototype.offset=function(o){return new Position(this.line,this.column+o)};var SourceLocation=function(o,l,d){this.start=l,this.end=d,o.sourceFile!==null&&(this.source=o.sourceFile)};function getLineInfo(e,o){for(var l=1,d=0;;){var O=nextLineBreak(e,d,o);if(O<0)return new Position(l,o-d);++l,d=O}}var defaultOptions={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},warnedAboutEcmaVersion=!1;function getOptions(e){var o={};for(var l in defaultOptions)o[l]=e&&hasOwn(e,l)?e[l]:defaultOptions[l];if(o.ecmaVersion==="latest"?o.ecmaVersion=1e8:o.ecmaVersion==null?(!warnedAboutEcmaVersion&&typeof console=="object"&&console.warn&&(warnedAboutEcmaVersion=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),o.ecmaVersion=11):o.ecmaVersion>=2015&&(o.ecmaVersion-=2009),o.allowReserved==null&&(o.allowReserved=o.ecmaVersion<5),(!e||e.allowHashBang==null)&&(o.allowHashBang=o.ecmaVersion>=14),isArray(o.onToken)){var d=o.onToken;o.onToken=function(O){return d.push(O)}}return isArray(o.onComment)&&(o.onComment=pushComment(o,o.onComment)),o}function pushComment(e,o){return function(l,d,O,A,S,$){var F={type:l?"Block":"Line",value:d,start:O,end:A};e.locations&&(F.loc=new SourceLocation(this,S,$)),e.ranges&&(F.range=[O,A]),o.push(F)}}var SCOPE_TOP=1,SCOPE_FUNCTION=2,SCOPE_ASYNC=4,SCOPE_GENERATOR=8,SCOPE_ARROW=16,SCOPE_SIMPLE_CATCH=32,SCOPE_SUPER=64,SCOPE_DIRECT_SUPER=128,SCOPE_CLASS_STATIC_BLOCK=256,SCOPE_CLASS_FIELD_INIT=512,SCOPE_VAR=SCOPE_TOP|SCOPE_FUNCTION|SCOPE_CLASS_STATIC_BLOCK;function functionFlags(e,o){return SCOPE_FUNCTION|(e?SCOPE_ASYNC:0)|(o?SCOPE_GENERATOR:0)}var BIND_NONE=0,BIND_VAR=1,BIND_LEXICAL=2,BIND_FUNCTION=3,BIND_SIMPLE_CATCH=4,BIND_OUTSIDE=5,Parser=function(o,l,d){this.options=o=getOptions(o),this.sourceFile=o.sourceFile,this.keywords=wordsRegexp(keywords$1[o.ecmaVersion>=6?6:o.sourceType==="module"?"5module":5]);var O="";o.allowReserved!==!0&&(O=reservedWords[o.ecmaVersion>=6?6:o.ecmaVersion===5?5:3],o.sourceType==="module"&&(O+=" await")),this.reservedWords=wordsRegexp(O);var A=(O?O+" ":"")+reservedWords.strict;this.reservedWordsStrict=wordsRegexp(A),this.reservedWordsStrictBind=wordsRegexp(A+" "+reservedWords.strictBind),this.input=String(l),this.containsEsc=!1,d?(this.pos=d,this.lineStart=this.input.lastIndexOf(`
`,d-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(lineBreak).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=types$1.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=o.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&o.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(SCOPE_TOP),this.regexpState=null,this.privateNameStack=[]},prototypeAccessors={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Parser.prototype.parse=function(){var o=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(o)},prototypeAccessors.inFunction.get=function(){return(this.currentVarScope().flags&SCOPE_FUNCTION)>0},prototypeAccessors.inGenerator.get=function(){return(this.currentVarScope().flags&SCOPE_GENERATOR)>0},prototypeAccessors.inAsync.get=function(){return(this.currentVarScope().flags&SCOPE_ASYNC)>0},prototypeAccessors.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var o=this.scopeStack[e],l=o.flags;if(l&(SCOPE_CLASS_STATIC_BLOCK|SCOPE_CLASS_FIELD_INIT))return!1;if(l&SCOPE_FUNCTION)return(l&SCOPE_ASYNC)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},prototypeAccessors.allowSuper.get=function(){var e=this.currentThisScope(),o=e.flags;return(o&SCOPE_SUPER)>0||this.options.allowSuperOutsideMethod},prototypeAccessors.allowDirectSuper.get=function(){return(this.currentThisScope().flags&SCOPE_DIRECT_SUPER)>0},prototypeAccessors.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},prototypeAccessors.allowNewDotTarget.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var o=this.scopeStack[e],l=o.flags;if(l&(SCOPE_CLASS_STATIC_BLOCK|SCOPE_CLASS_FIELD_INIT)||l&SCOPE_FUNCTION&&!(l&SCOPE_ARROW))return!0}return!1},prototypeAccessors.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&SCOPE_CLASS_STATIC_BLOCK)>0},Parser.extend=function(){for(var o=[],l=arguments.length;l--;)o[l]=arguments[l];for(var d=this,O=0;O<o.length;O++)d=o[O](d);return d},Parser.parse=function(o,l){return new this(l,o).parse()},Parser.parseExpressionAt=function(o,l,d){var O=new this(d,o,l);return O.nextToken(),O.parseExpression()},Parser.tokenizer=function(o,l){return new this(l,o)},Object.defineProperties(Parser.prototype,prototypeAccessors);var pp$9=Parser.prototype,literal=/^(?:'((?:\\[^]|[^'\\])*?)'|"((?:\\[^]|[^"\\])*?)")/;pp$9.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){skipWhiteSpace.lastIndex=e,e+=skipWhiteSpace.exec(this.input)[0].length;var o=literal.exec(this.input.slice(e));if(!o)return!1;if((o[1]||o[2])==="use strict"){skipWhiteSpace.lastIndex=e+o[0].length;var l=skipWhiteSpace.exec(this.input),d=l.index+l[0].length,O=this.input.charAt(d);return O===";"||O==="}"||lineBreak.test(l[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(O)||O==="!"&&this.input.charAt(d+1)==="=")}e+=o[0].length,skipWhiteSpace.lastIndex=e,e+=skipWhiteSpace.exec(this.input)[0].length,this.input[e]===";"&&e++}},pp$9.eat=function(e){return this.type===e?(this.next(),!0):!1},pp$9.isContextual=function(e){return this.type===types$1.name&&this.value===e&&!this.containsEsc},pp$9.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1},pp$9.expectContextual=function(e){this.eatContextual(e)||this.unexpected()},pp$9.canInsertSemicolon=function(){return this.type===types$1.eof||this.type===types$1.braceR||lineBreak.test(this.input.slice(this.lastTokEnd,this.start))},pp$9.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},pp$9.semicolon=function(){!this.eat(types$1.semi)&&!this.insertSemicolon()&&this.unexpected()},pp$9.afterTrailingComma=function(e,o){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),o||this.next(),!0},pp$9.expect=function(e){this.eat(e)||this.unexpected()},pp$9.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var DestructuringErrors=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};pp$9.checkPatternErrors=function(e,o){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var l=o?e.parenthesizedAssign:e.parenthesizedBind;l>-1&&this.raiseRecoverable(l,o?"Assigning to rvalue":"Parenthesized pattern")}},pp$9.checkExpressionErrors=function(e,o){if(!e)return!1;var l=e.shorthandAssign,d=e.doubleProto;if(!o)return l>=0||d>=0;l>=0&&this.raise(l,"Shorthand property assignments are valid only in destructuring patterns"),d>=0&&this.raiseRecoverable(d,"Redefinition of __proto__ property")},pp$9.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},pp$9.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var pp$8=Parser.prototype;pp$8.parseTopLevel=function(e){var o=Object.create(null);for(e.body||(e.body=[]);this.type!==types$1.eof;){var l=this.parseStatement(null,!0,o);e.body.push(l)}if(this.inModule)for(var d=0,O=Object.keys(this.undefinedExports);d<O.length;d+=1){var A=O[d];this.raiseRecoverable(this.undefinedExports[A].start,"Export '"+A+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var loopLabel={kind:"loop"},switchLabel={kind:"switch"};pp$8.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;skipWhiteSpace.lastIndex=this.pos;var o=skipWhiteSpace.exec(this.input),l=this.pos+o[0].length,d=this.input.charCodeAt(l);if(d===91||d===92)return!0;if(e)return!1;if(d===123||d>55295&&d<56320)return!0;if(isIdentifierStart(d,!0)){for(var O=l+1;isIdentifierChar(d=this.input.charCodeAt(O),!0);)++O;if(d===92||d>55295&&d<56320)return!0;var A=this.input.slice(l,O);if(!keywordRelationalOperator.test(A))return!0}return!1},pp$8.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;skipWhiteSpace.lastIndex=this.pos;var e=skipWhiteSpace.exec(this.input),o=this.pos+e[0].length,l;return!lineBreak.test(this.input.slice(this.pos,o))&&this.input.slice(o,o+8)==="function"&&(o+8===this.input.length||!(isIdentifierChar(l=this.input.charCodeAt(o+8))||l>55295&&l<56320))},pp$8.isUsingKeyword=function(e,o){if(this.options.ecmaVersion<17||!this.isContextual(e?"await":"using"))return!1;skipWhiteSpace.lastIndex=this.pos;var l=skipWhiteSpace.exec(this.input),d=this.pos+l[0].length;if(lineBreak.test(this.input.slice(this.pos,d)))return!1;if(e){var O=d+5,A;if(this.input.slice(d,O)!=="using"||O===this.input.length||isIdentifierChar(A=this.input.charCodeAt(O))||A>55295&&A<56320)return!1;skipWhiteSpace.lastIndex=O;var S=skipWhiteSpace.exec(this.input);if(S&&lineBreak.test(this.input.slice(O,O+S[0].length)))return!1}if(o){var $=d+2,F;if(this.input.slice(d,$)==="of"&&($===this.input.length||!isIdentifierChar(F=this.input.charCodeAt($))&&!(F>55295&&F<56320)))return!1}var E=this.input.charCodeAt(d);return isIdentifierStart(E,!0)||E===92},pp$8.isAwaitUsing=function(e){return this.isUsingKeyword(!0,e)},pp$8.isUsing=function(e){return this.isUsingKeyword(!1,e)},pp$8.parseStatement=function(e,o,l){var d=this.type,O=this.startNode(),A;switch(this.isLet(e)&&(d=types$1._var,A="let"),d){case types$1._break:case types$1._continue:return this.parseBreakContinueStatement(O,d.keyword);case types$1._debugger:return this.parseDebuggerStatement(O);case types$1._do:return this.parseDoStatement(O);case types$1._for:return this.parseForStatement(O);case types$1._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(O,!1,!e);case types$1._class:return e&&this.unexpected(),this.parseClass(O,!0);case types$1._if:return this.parseIfStatement(O);case types$1._return:return this.parseReturnStatement(O);case types$1._switch:return this.parseSwitchStatement(O);case types$1._throw:return this.parseThrowStatement(O);case types$1._try:return this.parseTryStatement(O);case types$1._const:case types$1._var:return A=A||this.value,e&&A!=="var"&&this.unexpected(),this.parseVarStatement(O,A);case types$1._while:return this.parseWhileStatement(O);case types$1._with:return this.parseWithStatement(O);case types$1.braceL:return this.parseBlock(!0,O);case types$1.semi:return this.parseEmptyStatement(O);case types$1._export:case types$1._import:if(this.options.ecmaVersion>10&&d===types$1._import){skipWhiteSpace.lastIndex=this.pos;var S=skipWhiteSpace.exec(this.input),$=this.pos+S[0].length,F=this.input.charCodeAt($);if(F===40||F===46)return this.parseExpressionStatement(O,this.parseExpression())}return this.options.allowImportExportEverywhere||(o||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),d===types$1._import?this.parseImport(O):this.parseExport(O,l);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(O,!0,!e);var E=this.isAwaitUsing(!1)?"await using":this.isUsing(!1)?"using":null;if(E)return o&&this.options.sourceType==="script"&&this.raise(this.start,"Using declaration cannot appear in the top level when source type is `script`"),E==="await using"&&(this.canAwait||this.raise(this.start,"Await using cannot appear outside of async function"),this.next()),this.next(),this.parseVar(O,!1,E),this.semicolon(),this.finishNode(O,"VariableDeclaration");var L=this.value,N=this.parseExpression();return d===types$1.name&&N.type==="Identifier"&&this.eat(types$1.colon)?this.parseLabeledStatement(O,L,N,e):this.parseExpressionStatement(O,N)}},pp$8.parseBreakContinueStatement=function(e,o){var l=o==="break";this.next(),this.eat(types$1.semi)||this.insertSemicolon()?e.label=null:this.type!==types$1.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var d=0;d<this.labels.length;++d){var O=this.labels[d];if((e.label==null||O.name===e.label.name)&&(O.kind!=null&&(l||O.kind==="loop")||e.label&&l))break}return d===this.labels.length&&this.raise(e.start,"Unsyntactic "+o),this.finishNode(e,l?"BreakStatement":"ContinueStatement")},pp$8.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")},pp$8.parseDoStatement=function(e){return this.next(),this.labels.push(loopLabel),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(types$1._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(types$1.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")},pp$8.parseForStatement=function(e){this.next();var o=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(loopLabel),this.enterScope(0),this.expect(types$1.parenL),this.type===types$1.semi)return o>-1&&this.unexpected(o),this.parseFor(e,null);var l=this.isLet();if(this.type===types$1._var||this.type===types$1._const||l){var d=this.startNode(),O=l?"let":this.value;return this.next(),this.parseVar(d,!0,O),this.finishNode(d,"VariableDeclaration"),this.parseForAfterInit(e,d,o)}var A=this.isContextual("let"),S=!1,$=this.isUsing(!0)?"using":this.isAwaitUsing(!0)?"await using":null;if($){var F=this.startNode();return this.next(),$==="await using"&&this.next(),this.parseVar(F,!0,$),this.finishNode(F,"VariableDeclaration"),this.parseForAfterInit(e,F,o)}var E=this.containsEsc,L=new DestructuringErrors,N=this.start,V=o>-1?this.parseExprSubscripts(L,"await"):this.parseExpression(!0,L);return this.type===types$1._in||(S=this.options.ecmaVersion>=6&&this.isContextual("of"))?(o>-1?(this.type===types$1._in&&this.unexpected(o),e.await=!0):S&&this.options.ecmaVersion>=8&&(V.start===N&&!E&&V.type==="Identifier"&&V.name==="async"?this.unexpected():this.options.ecmaVersion>=9&&(e.await=!1)),A&&S&&this.raise(V.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(V,!1,L),this.checkLValPattern(V),this.parseForIn(e,V)):(this.checkExpressionErrors(L,!0),o>-1&&this.unexpected(o),this.parseFor(e,V))},pp$8.parseForAfterInit=function(e,o,l){return(this.type===types$1._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&o.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===types$1._in?l>-1&&this.unexpected(l):e.await=l>-1),this.parseForIn(e,o)):(l>-1&&this.unexpected(l),this.parseFor(e,o))},pp$8.parseFunctionStatement=function(e,o,l){return this.next(),this.parseFunction(e,FUNC_STATEMENT|(l?0:FUNC_HANGING_STATEMENT),!1,o)},pp$8.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(types$1._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")},pp$8.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(types$1.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")},pp$8.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(types$1.braceL),this.labels.push(switchLabel),this.enterScope(0);for(var o,l=!1;this.type!==types$1.braceR;)if(this.type===types$1._case||this.type===types$1._default){var d=this.type===types$1._case;o&&this.finishNode(o,"SwitchCase"),e.cases.push(o=this.startNode()),o.consequent=[],this.next(),d?o.test=this.parseExpression():(l&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),l=!0,o.test=null),this.expect(types$1.colon)}else o||this.unexpected(),o.consequent.push(this.parseStatement(null));return this.exitScope(),o&&this.finishNode(o,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")},pp$8.parseThrowStatement=function(e){return this.next(),lineBreak.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var empty$1=[];pp$8.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),o=e.type==="Identifier";return this.enterScope(o?SCOPE_SIMPLE_CATCH:0),this.checkLValPattern(e,o?BIND_SIMPLE_CATCH:BIND_LEXICAL),this.expect(types$1.parenR),e},pp$8.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===types$1._catch){var o=this.startNode();this.next(),this.eat(types$1.parenL)?o.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),o.param=null,this.enterScope(0)),o.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(o,"CatchClause")}return e.finalizer=this.eat(types$1._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")},pp$8.parseVarStatement=function(e,o,l){return this.next(),this.parseVar(e,!1,o,l),this.semicolon(),this.finishNode(e,"VariableDeclaration")},pp$8.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(loopLabel),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")},pp$8.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")},pp$8.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")},pp$8.parseLabeledStatement=function(e,o,l,d){for(var O=0,A=this.labels;O<A.length;O+=1){var S=A[O];S.name===o&&this.raise(l.start,"Label '"+o+"' is already declared")}for(var $=this.type.isLoop?"loop":this.type===types$1._switch?"switch":null,F=this.labels.length-1;F>=0;F--){var E=this.labels[F];if(E.statementStart===e.start)E.statementStart=this.start,E.kind=$;else break}return this.labels.push({name:o,kind:$,statementStart:this.start}),e.body=this.parseStatement(d?d.indexOf("label")===-1?d+"label":d:"label"),this.labels.pop(),e.label=l,this.finishNode(e,"LabeledStatement")},pp$8.parseExpressionStatement=function(e,o){return e.expression=o,this.semicolon(),this.finishNode(e,"ExpressionStatement")},pp$8.parseBlock=function(e,o,l){for(e===void 0&&(e=!0),o===void 0&&(o=this.startNode()),o.body=[],this.expect(types$1.braceL),e&&this.enterScope(0);this.type!==types$1.braceR;){var d=this.parseStatement(null);o.body.push(d)}return l&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(o,"BlockStatement")},pp$8.parseFor=function(e,o){return e.init=o,this.expect(types$1.semi),e.test=this.type===types$1.semi?null:this.parseExpression(),this.expect(types$1.semi),e.update=this.type===types$1.parenR?null:this.parseExpression(),this.expect(types$1.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")},pp$8.parseForIn=function(e,o){var l=this.type===types$1._in;return this.next(),o.type==="VariableDeclaration"&&o.declarations[0].init!=null&&(!l||this.options.ecmaVersion<8||this.strict||o.kind!=="var"||o.declarations[0].id.type!=="Identifier")&&this.raise(o.start,(l?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=o,e.right=l?this.parseExpression():this.parseMaybeAssign(),this.expect(types$1.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,l?"ForInStatement":"ForOfStatement")},pp$8.parseVar=function(e,o,l,d){for(e.declarations=[],e.kind=l;;){var O=this.startNode();if(this.parseVarId(O,l),this.eat(types$1.eq)?O.init=this.parseMaybeAssign(o):!d&&l==="const"&&!(this.type===types$1._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!d&&(l==="using"||l==="await using")&&this.options.ecmaVersion>=17&&this.type!==types$1._in&&!this.isContextual("of")?this.raise(this.lastTokEnd,"Missing initializer in "+l+" declaration"):!d&&O.id.type!=="Identifier"&&!(o&&(this.type===types$1._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):O.init=null,e.declarations.push(this.finishNode(O,"VariableDeclarator")),!this.eat(types$1.comma))break}return e},pp$8.parseVarId=function(e,o){e.id=o==="using"||o==="await using"?this.parseIdent():this.parseBindingAtom(),this.checkLValPattern(e.id,o==="var"?BIND_VAR:BIND_LEXICAL,!1)};var FUNC_STATEMENT=1,FUNC_HANGING_STATEMENT=2,FUNC_NULLABLE_ID=4;pp$8.parseFunction=function(e,o,l,d,O){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!d)&&(this.type===types$1.star&&o&FUNC_HANGING_STATEMENT&&this.unexpected(),e.generator=this.eat(types$1.star)),this.options.ecmaVersion>=8&&(e.async=!!d),o&FUNC_STATEMENT&&(e.id=o&FUNC_NULLABLE_ID&&this.type!==types$1.name?null:this.parseIdent(),e.id&&!(o&FUNC_HANGING_STATEMENT)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?BIND_VAR:BIND_LEXICAL:BIND_FUNCTION));var A=this.yieldPos,S=this.awaitPos,$=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(functionFlags(e.async,e.generator)),o&FUNC_STATEMENT||(e.id=this.type===types$1.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,l,!1,O),this.yieldPos=A,this.awaitPos=S,this.awaitIdentPos=$,this.finishNode(e,o&FUNC_STATEMENT?"FunctionDeclaration":"FunctionExpression")},pp$8.parseFunctionParams=function(e){this.expect(types$1.parenL),e.params=this.parseBindingList(types$1.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},pp$8.parseClass=function(e,o){this.next();var l=this.strict;this.strict=!0,this.parseClassId(e,o),this.parseClassSuper(e);var d=this.enterClassBody(),O=this.startNode(),A=!1;for(O.body=[],this.expect(types$1.braceL);this.type!==types$1.braceR;){var S=this.parseClassElement(e.superClass!==null);S&&(O.body.push(S),S.type==="MethodDefinition"&&S.kind==="constructor"?(A&&this.raiseRecoverable(S.start,"Duplicate constructor in the same class"),A=!0):S.key&&S.key.type==="PrivateIdentifier"&&isPrivateNameConflicted(d,S)&&this.raiseRecoverable(S.key.start,"Identifier '#"+S.key.name+"' has already been declared"))}return this.strict=l,this.next(),e.body=this.finishNode(O,"ClassBody"),this.exitClassBody(),this.finishNode(e,o?"ClassDeclaration":"ClassExpression")},pp$8.parseClassElement=function(e){if(this.eat(types$1.semi))return null;var o=this.options.ecmaVersion,l=this.startNode(),d="",O=!1,A=!1,S="method",$=!1;if(this.eatContextual("static")){if(o>=13&&this.eat(types$1.braceL))return this.parseClassStaticBlock(l),l;this.isClassElementNameStart()||this.type===types$1.star?$=!0:d="static"}if(l.static=$,!d&&o>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===types$1.star)&&!this.canInsertSemicolon()?A=!0:d="async"),!d&&(o>=9||!A)&&this.eat(types$1.star)&&(O=!0),!d&&!A&&!O){var F=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?S=F:d=F)}if(d?(l.computed=!1,l.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),l.key.name=d,this.finishNode(l.key,"Identifier")):this.parseClassElementName(l),o<13||this.type===types$1.parenL||S!=="method"||O||A){var E=!l.static&&checkKeyName(l,"constructor"),L=E&&e;E&&S!=="method"&&this.raise(l.key.start,"Constructor can't have get/set modifier"),l.kind=E?"constructor":S,this.parseClassMethod(l,O,A,L)}else this.parseClassField(l);return l},pp$8.isClassElementNameStart=function(){return this.type===types$1.name||this.type===types$1.privateId||this.type===types$1.num||this.type===types$1.string||this.type===types$1.bracketL||this.type.keyword},pp$8.parseClassElementName=function(e){this.type===types$1.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)},pp$8.parseClassMethod=function(e,o,l,d){var O=e.key;e.kind==="constructor"?(o&&this.raise(O.start,"Constructor can't be a generator"),l&&this.raise(O.start,"Constructor can't be an async method")):e.static&&checkKeyName(e,"prototype")&&this.raise(O.start,"Classes may not have a static property named prototype");var A=e.value=this.parseMethod(o,l,d);return e.kind==="get"&&A.params.length!==0&&this.raiseRecoverable(A.start,"getter should have no params"),e.kind==="set"&&A.params.length!==1&&this.raiseRecoverable(A.start,"setter should have exactly one param"),e.kind==="set"&&A.params[0].type==="RestElement"&&this.raiseRecoverable(A.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")},pp$8.parseClassField=function(e){return checkKeyName(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&checkKeyName(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(types$1.eq)?(this.enterScope(SCOPE_CLASS_FIELD_INIT|SCOPE_SUPER),e.value=this.parseMaybeAssign(),this.exitScope()):e.value=null,this.semicolon(),this.finishNode(e,"PropertyDefinition")},pp$8.parseClassStaticBlock=function(e){e.body=[];var o=this.labels;for(this.labels=[],this.enterScope(SCOPE_CLASS_STATIC_BLOCK|SCOPE_SUPER);this.type!==types$1.braceR;){var l=this.parseStatement(null);e.body.push(l)}return this.next(),this.exitScope(),this.labels=o,this.finishNode(e,"StaticBlock")},pp$8.parseClassId=function(e,o){this.type===types$1.name?(e.id=this.parseIdent(),o&&this.checkLValSimple(e.id,BIND_LEXICAL,!1)):(o===!0&&this.unexpected(),e.id=null)},pp$8.parseClassSuper=function(e){e.superClass=this.eat(types$1._extends)?this.parseExprSubscripts(null,!1):null},pp$8.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared},pp$8.exitClassBody=function(){var e=this.privateNameStack.pop(),o=e.declared,l=e.used;if(this.options.checkPrivateFields)for(var d=this.privateNameStack.length,O=d===0?null:this.privateNameStack[d-1],A=0;A<l.length;++A){var S=l[A];hasOwn(o,S.name)||(O?O.used.push(S):this.raiseRecoverable(S.start,"Private field '#"+S.name+"' must be declared in an enclosing class"))}};function isPrivateNameConflicted(e,o){var l=o.key.name,d=e[l],O="true";return o.type==="MethodDefinition"&&(o.kind==="get"||o.kind==="set")&&(O=(o.static?"s":"i")+o.kind),d==="iget"&&O==="iset"||d==="iset"&&O==="iget"||d==="sget"&&O==="sset"||d==="sset"&&O==="sget"?(e[l]="true",!1):d?!0:(e[l]=O,!1)}function checkKeyName(e,o){var l=e.computed,d=e.key;return!l&&(d.type==="Identifier"&&d.name===o||d.type==="Literal"&&d.value===o)}pp$8.parseExportAllDeclaration=function(e,o){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(o,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==types$1.string&&this.unexpected(),e.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(e.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")},pp$8.parseExport=function(e,o){if(this.next(),this.eat(types$1.star))return this.parseExportAllDeclaration(e,o);if(this.eat(types$1._default))return this.checkExport(o,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(o,e.declaration.declarations):this.checkExport(o,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null,this.options.ecmaVersion>=16&&(e.attributes=[]);else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(o),this.eatContextual("from"))this.type!==types$1.string&&this.unexpected(),e.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(e.attributes=this.parseWithClause());else{for(var l=0,d=e.specifiers;l<d.length;l+=1){var O=d[l];this.checkUnreserved(O.local),this.checkLocalExport(O.local),O.local.type==="Literal"&&this.raise(O.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null,this.options.ecmaVersion>=16&&(e.attributes=[])}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")},pp$8.parseExportDeclaration=function(e){return this.parseStatement(null)},pp$8.parseExportDefaultDeclaration=function(){var e;if(this.type===types$1._function||(e=this.isAsyncFunction())){var o=this.startNode();return this.next(),e&&this.next(),this.parseFunction(o,FUNC_STATEMENT|FUNC_NULLABLE_ID,!1,e)}else if(this.type===types$1._class){var l=this.startNode();return this.parseClass(l,"nullableID")}else{var d=this.parseMaybeAssign();return this.semicolon(),d}},pp$8.checkExport=function(e,o,l){e&&(typeof o!="string"&&(o=o.type==="Identifier"?o.name:o.value),hasOwn(e,o)&&this.raiseRecoverable(l,"Duplicate export '"+o+"'"),e[o]=!0)},pp$8.checkPatternExport=function(e,o){var l=o.type;if(l==="Identifier")this.checkExport(e,o,o.start);else if(l==="ObjectPattern")for(var d=0,O=o.properties;d<O.length;d+=1){var A=O[d];this.checkPatternExport(e,A)}else if(l==="ArrayPattern")for(var S=0,$=o.elements;S<$.length;S+=1){var F=$[S];F&&this.checkPatternExport(e,F)}else l==="Property"?this.checkPatternExport(e,o.value):l==="AssignmentPattern"?this.checkPatternExport(e,o.left):l==="RestElement"&&this.checkPatternExport(e,o.argument)},pp$8.checkVariableExport=function(e,o){if(e)for(var l=0,d=o;l<d.length;l+=1){var O=d[l];this.checkPatternExport(e,O.id)}},pp$8.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()},pp$8.parseExportSpecifier=function(e){var o=this.startNode();return o.local=this.parseModuleExportName(),o.exported=this.eatContextual("as")?this.parseModuleExportName():o.local,this.checkExport(e,o.exported,o.exported.start),this.finishNode(o,"ExportSpecifier")},pp$8.parseExportSpecifiers=function(e){var o=[],l=!0;for(this.expect(types$1.braceL);!this.eat(types$1.braceR);){if(l)l=!1;else if(this.expect(types$1.comma),this.afterTrailingComma(types$1.braceR))break;o.push(this.parseExportSpecifier(e))}return o},pp$8.parseImport=function(e){return this.next(),this.type===types$1.string?(e.specifiers=empty$1,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===types$1.string?this.parseExprAtom():this.unexpected()),this.options.ecmaVersion>=16&&(e.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(e,"ImportDeclaration")},pp$8.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,BIND_LEXICAL),this.finishNode(e,"ImportSpecifier")},pp$8.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,BIND_LEXICAL),this.finishNode(e,"ImportDefaultSpecifier")},pp$8.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,BIND_LEXICAL),this.finishNode(e,"ImportNamespaceSpecifier")},pp$8.parseImportSpecifiers=function(){var e=[],o=!0;if(this.type===types$1.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(types$1.comma)))return e;if(this.type===types$1.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(types$1.braceL);!this.eat(types$1.braceR);){if(o)o=!1;else if(this.expect(types$1.comma),this.afterTrailingComma(types$1.braceR))break;e.push(this.parseImportSpecifier())}return e},pp$8.parseWithClause=function(){var e=[];if(!this.eat(types$1._with))return e;this.expect(types$1.braceL);for(var o={},l=!0;!this.eat(types$1.braceR);){if(l)l=!1;else if(this.expect(types$1.comma),this.afterTrailingComma(types$1.braceR))break;var d=this.parseImportAttribute(),O=d.key.type==="Identifier"?d.key.name:d.key.value;hasOwn(o,O)&&this.raiseRecoverable(d.key.start,"Duplicate attribute key '"+O+"'"),o[O]=!0,e.push(d)}return e},pp$8.parseImportAttribute=function(){var e=this.startNode();return e.key=this.type===types$1.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never"),this.expect(types$1.colon),this.type!==types$1.string&&this.unexpected(),e.value=this.parseExprAtom(),this.finishNode(e,"ImportAttribute")},pp$8.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===types$1.string){var e=this.parseLiteral(this.value);return loneSurrogate.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)},pp$8.adaptDirectivePrologue=function(e){for(var o=0;o<e.length&&this.isDirectiveCandidate(e[o]);++o)e[o].directive=e[o].expression.raw.slice(1,-1)},pp$8.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var pp$7=Parser.prototype;pp$7.toAssignable=function(e,o,l){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",l&&this.checkPatternErrors(l,!0);for(var d=0,O=e.properties;d<O.length;d+=1){var A=O[d];this.toAssignable(A,o),A.type==="RestElement"&&(A.argument.type==="ArrayPattern"||A.argument.type==="ObjectPattern")&&this.raise(A.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,o);break;case"ArrayExpression":e.type="ArrayPattern",l&&this.checkPatternErrors(l,!0),this.toAssignableList(e.elements,o);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,o),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,o);break;case"ParenthesizedExpression":this.toAssignable(e.expression,o,l);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!o)break;default:this.raise(e.start,"Assigning to rvalue")}else l&&this.checkPatternErrors(l,!0);return e},pp$7.toAssignableList=function(e,o){for(var l=e.length,d=0;d<l;d++){var O=e[d];O&&this.toAssignable(O,o)}if(l){var A=e[l-1];this.options.ecmaVersion===6&&o&&A&&A.type==="RestElement"&&A.argument.type!=="Identifier"&&this.unexpected(A.argument.start)}return e},pp$7.parseSpread=function(e){var o=this.startNode();return this.next(),o.argument=this.parseMaybeAssign(!1,e),this.finishNode(o,"SpreadElement")},pp$7.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==types$1.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")},pp$7.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case types$1.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(types$1.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case types$1.braceL:return this.parseObj(!0)}return this.parseIdent()},pp$7.parseBindingList=function(e,o,l,d){for(var O=[],A=!0;!this.eat(e);)if(A?A=!1:this.expect(types$1.comma),o&&this.type===types$1.comma)O.push(null);else{if(l&&this.afterTrailingComma(e))break;if(this.type===types$1.ellipsis){var S=this.parseRestBinding();this.parseBindingListItem(S),O.push(S),this.type===types$1.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else O.push(this.parseAssignableListItem(d))}return O},pp$7.parseAssignableListItem=function(e){var o=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(o),o},pp$7.parseBindingListItem=function(e){return e},pp$7.parseMaybeDefault=function(e,o,l){if(l=l||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(types$1.eq))return l;var d=this.startNodeAt(e,o);return d.left=l,d.right=this.parseMaybeAssign(),this.finishNode(d,"AssignmentPattern")},pp$7.checkLValSimple=function(e,o,l){o===void 0&&(o=BIND_NONE);var d=o!==BIND_NONE;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(d?"Binding ":"Assigning to ")+e.name+" in strict mode"),d&&(o===BIND_LEXICAL&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),l&&(hasOwn(l,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),l[e.name]=!0),o!==BIND_OUTSIDE&&this.declareName(e.name,o,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":d&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return d&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,o,l);default:this.raise(e.start,(d?"Binding":"Assigning to")+" rvalue")}},pp$7.checkLValPattern=function(e,o,l){switch(o===void 0&&(o=BIND_NONE),e.type){case"ObjectPattern":for(var d=0,O=e.properties;d<O.length;d+=1){var A=O[d];this.checkLValInnerPattern(A,o,l)}break;case"ArrayPattern":for(var S=0,$=e.elements;S<$.length;S+=1){var F=$[S];F&&this.checkLValInnerPattern(F,o,l)}break;default:this.checkLValSimple(e,o,l)}},pp$7.checkLValInnerPattern=function(e,o,l){switch(o===void 0&&(o=BIND_NONE),e.type){case"Property":this.checkLValInnerPattern(e.value,o,l);break;case"AssignmentPattern":this.checkLValPattern(e.left,o,l);break;case"RestElement":this.checkLValPattern(e.argument,o,l);break;default:this.checkLValPattern(e,o,l)}};var TokContext=function(o,l,d,O,A){this.token=o,this.isExpr=!!l,this.preserveSpace=!!d,this.override=O,this.generator=!!A},types={b_stat:new TokContext("{",!1),b_expr:new TokContext("{",!0),b_tmpl:new TokContext("${",!1),p_stat:new TokContext("(",!1),p_expr:new TokContext("(",!0),q_tmpl:new TokContext("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new TokContext("function",!1),f_expr:new TokContext("function",!0),f_expr_gen:new TokContext("function",!0,!1,null,!0),f_gen:new TokContext("function",!1,!1,null,!0)},pp$6=Parser.prototype;pp$6.initialContext=function(){return[types.b_stat]},pp$6.curContext=function(){return this.context[this.context.length-1]},pp$6.braceIsBlock=function(e){var o=this.curContext();return o===types.f_expr||o===types.f_stat?!0:e===types$1.colon&&(o===types.b_stat||o===types.b_expr)?!o.isExpr:e===types$1._return||e===types$1.name&&this.exprAllowed?lineBreak.test(this.input.slice(this.lastTokEnd,this.start)):e===types$1._else||e===types$1.semi||e===types$1.eof||e===types$1.parenR||e===types$1.arrow?!0:e===types$1.braceL?o===types.b_stat:e===types$1._var||e===types$1._const||e===types$1.name?!1:!this.exprAllowed},pp$6.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var o=this.context[e];if(o.token==="function")return o.generator}return!1},pp$6.updateContext=function(e){var o,l=this.type;l.keyword&&e===types$1.dot?this.exprAllowed=!1:(o=l.updateContext)?o.call(this,e):this.exprAllowed=l.beforeExpr},pp$6.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)},types$1.parenR.updateContext=types$1.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===types.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr},types$1.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?types.b_stat:types.b_expr),this.exprAllowed=!0},types$1.dollarBraceL.updateContext=function(){this.context.push(types.b_tmpl),this.exprAllowed=!0},types$1.parenL.updateContext=function(e){var o=e===types$1._if||e===types$1._for||e===types$1._with||e===types$1._while;this.context.push(o?types.p_stat:types.p_expr),this.exprAllowed=!0},types$1.incDec.updateContext=function(){},types$1._function.updateContext=types$1._class.updateContext=function(e){e.beforeExpr&&e!==types$1._else&&!(e===types$1.semi&&this.curContext()!==types.p_stat)&&!(e===types$1._return&&lineBreak.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===types$1.colon||e===types$1.braceL)&&this.curContext()===types.b_stat)?this.context.push(types.f_expr):this.context.push(types.f_stat),this.exprAllowed=!1},types$1.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0},types$1.backQuote.updateContext=function(){this.curContext()===types.q_tmpl?this.context.pop():this.context.push(types.q_tmpl),this.exprAllowed=!1},types$1.star.updateContext=function(e){if(e===types$1._function){var o=this.context.length-1;this.context[o]===types.f_expr?this.context[o]=types.f_expr_gen:this.context[o]=types.f_gen}this.exprAllowed=!0},types$1.name.updateContext=function(e){var o=!1;this.options.ecmaVersion>=6&&e!==types$1.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(o=!0),this.exprAllowed=o};var pp$5=Parser.prototype;pp$5.checkPropClash=function(e,o,l){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var d=e.key,O;switch(d.type){case"Identifier":O=d.name;break;case"Literal":O=String(d.value);break;default:return}var A=e.kind;if(this.options.ecmaVersion>=6){O==="__proto__"&&A==="init"&&(o.proto&&(l?l.doubleProto<0&&(l.doubleProto=d.start):this.raiseRecoverable(d.start,"Redefinition of __proto__ property")),o.proto=!0);return}O="$"+O;var S=o[O];if(S){var $;A==="init"?$=this.strict&&S.init||S.get||S.set:$=S.init||S[A],$&&this.raiseRecoverable(d.start,"Redefinition of property")}else S=o[O]={init:!1,get:!1,set:!1};S[A]=!0}},pp$5.parseExpression=function(e,o){var l=this.start,d=this.startLoc,O=this.parseMaybeAssign(e,o);if(this.type===types$1.comma){var A=this.startNodeAt(l,d);for(A.expressions=[O];this.eat(types$1.comma);)A.expressions.push(this.parseMaybeAssign(e,o));return this.finishNode(A,"SequenceExpression")}return O},pp$5.parseMaybeAssign=function(e,o,l){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var d=!1,O=-1,A=-1,S=-1;o?(O=o.parenthesizedAssign,A=o.trailingComma,S=o.doubleProto,o.parenthesizedAssign=o.trailingComma=-1):(o=new DestructuringErrors,d=!0);var $=this.start,F=this.startLoc;(this.type===types$1.parenL||this.type===types$1.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var E=this.parseMaybeConditional(e,o);if(l&&(E=l.call(this,E,$,F)),this.type.isAssign){var L=this.startNodeAt($,F);return L.operator=this.value,this.type===types$1.eq&&(E=this.toAssignable(E,!1,o)),d||(o.parenthesizedAssign=o.trailingComma=o.doubleProto=-1),o.shorthandAssign>=E.start&&(o.shorthandAssign=-1),this.type===types$1.eq?this.checkLValPattern(E):this.checkLValSimple(E),L.left=E,this.next(),L.right=this.parseMaybeAssign(e),S>-1&&(o.doubleProto=S),this.finishNode(L,"AssignmentExpression")}else d&&this.checkExpressionErrors(o,!0);return O>-1&&(o.parenthesizedAssign=O),A>-1&&(o.trailingComma=A),E},pp$5.parseMaybeConditional=function(e,o){var l=this.start,d=this.startLoc,O=this.parseExprOps(e,o);if(this.checkExpressionErrors(o))return O;if(this.eat(types$1.question)){var A=this.startNodeAt(l,d);return A.test=O,A.consequent=this.parseMaybeAssign(),this.expect(types$1.colon),A.alternate=this.parseMaybeAssign(e),this.finishNode(A,"ConditionalExpression")}return O},pp$5.parseExprOps=function(e,o){var l=this.start,d=this.startLoc,O=this.parseMaybeUnary(o,!1,!1,e);return this.checkExpressionErrors(o)||O.start===l&&O.type==="ArrowFunctionExpression"?O:this.parseExprOp(O,l,d,-1,e)},pp$5.parseExprOp=function(e,o,l,d,O){var A=this.type.binop;if(A!=null&&(!O||this.type!==types$1._in)&&A>d){var S=this.type===types$1.logicalOR||this.type===types$1.logicalAND,$=this.type===types$1.coalesce;$&&(A=types$1.logicalAND.binop);var F=this.value;this.next();var E=this.start,L=this.startLoc,N=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,O),E,L,A,O),V=this.buildBinary(o,l,e,N,F,S||$);return(S&&this.type===types$1.coalesce||$&&(this.type===types$1.logicalOR||this.type===types$1.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(V,o,l,d,O)}return e},pp$5.buildBinary=function(e,o,l,d,O,A){d.type==="PrivateIdentifier"&&this.raise(d.start,"Private identifier can only be left side of binary expression");var S=this.startNodeAt(e,o);return S.left=l,S.operator=O,S.right=d,this.finishNode(S,A?"LogicalExpression":"BinaryExpression")},pp$5.parseMaybeUnary=function(e,o,l,d){var O=this.start,A=this.startLoc,S;if(this.isContextual("await")&&this.canAwait)S=this.parseAwait(d),o=!0;else if(this.type.prefix){var $=this.startNode(),F=this.type===types$1.incDec;$.operator=this.value,$.prefix=!0,this.next(),$.argument=this.parseMaybeUnary(null,!0,F,d),this.checkExpressionErrors(e,!0),F?this.checkLValSimple($.argument):this.strict&&$.operator==="delete"&&isLocalVariableAccess($.argument)?this.raiseRecoverable($.start,"Deleting local variable in strict mode"):$.operator==="delete"&&isPrivateFieldAccess($.argument)?this.raiseRecoverable($.start,"Private fields can not be deleted"):o=!0,S=this.finishNode($,F?"UpdateExpression":"UnaryExpression")}else if(!o&&this.type===types$1.privateId)(d||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),S=this.parsePrivateIdent(),this.type!==types$1._in&&this.unexpected();else{if(S=this.parseExprSubscripts(e,d),this.checkExpressionErrors(e))return S;for(;this.type.postfix&&!this.canInsertSemicolon();){var E=this.startNodeAt(O,A);E.operator=this.value,E.prefix=!1,E.argument=S,this.checkLValSimple(S),this.next(),S=this.finishNode(E,"UpdateExpression")}}if(!l&&this.eat(types$1.starstar))if(o)this.unexpected(this.lastTokStart);else return this.buildBinary(O,A,S,this.parseMaybeUnary(null,!1,!1,d),"**",!1);else return S};function isLocalVariableAccess(e){return e.type==="Identifier"||e.type==="ParenthesizedExpression"&&isLocalVariableAccess(e.expression)}function isPrivateFieldAccess(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&isPrivateFieldAccess(e.expression)||e.type==="ParenthesizedExpression"&&isPrivateFieldAccess(e.expression)}pp$5.parseExprSubscripts=function(e,o){var l=this.start,d=this.startLoc,O=this.parseExprAtom(e,o);if(O.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return O;var A=this.parseSubscripts(O,l,d,!1,o);return e&&A.type==="MemberExpression"&&(e.parenthesizedAssign>=A.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=A.start&&(e.parenthesizedBind=-1),e.trailingComma>=A.start&&(e.trailingComma=-1)),A},pp$5.parseSubscripts=function(e,o,l,d,O){for(var A=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,S=!1;;){var $=this.parseSubscript(e,o,l,d,A,S,O);if($.optional&&(S=!0),$===e||$.type==="ArrowFunctionExpression"){if(S){var F=this.startNodeAt(o,l);F.expression=$,$=this.finishNode(F,"ChainExpression")}return $}e=$}},pp$5.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(types$1.arrow)},pp$5.parseSubscriptAsyncArrow=function(e,o,l,d){return this.parseArrowExpression(this.startNodeAt(e,o),l,!0,d)},pp$5.parseSubscript=function(e,o,l,d,O,A,S){var $=this.options.ecmaVersion>=11,F=$&&this.eat(types$1.questionDot);d&&F&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var E=this.eat(types$1.bracketL);if(E||F&&this.type!==types$1.parenL&&this.type!==types$1.backQuote||this.eat(types$1.dot)){var L=this.startNodeAt(o,l);L.object=e,E?(L.property=this.parseExpression(),this.expect(types$1.bracketR)):this.type===types$1.privateId&&e.type!=="Super"?L.property=this.parsePrivateIdent():L.property=this.parseIdent(this.options.allowReserved!=="never"),L.computed=!!E,$&&(L.optional=F),e=this.finishNode(L,"MemberExpression")}else if(!d&&this.eat(types$1.parenL)){var N=new DestructuringErrors,V=this.yieldPos,B=this.awaitPos,U=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var q=this.parseExprList(types$1.parenR,this.options.ecmaVersion>=8,!1,N);if(O&&!F&&this.shouldParseAsyncArrow())return this.checkPatternErrors(N,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=V,this.awaitPos=B,this.awaitIdentPos=U,this.parseSubscriptAsyncArrow(o,l,q,S);this.checkExpressionErrors(N,!0),this.yieldPos=V||this.yieldPos,this.awaitPos=B||this.awaitPos,this.awaitIdentPos=U||this.awaitIdentPos;var ee=this.startNodeAt(o,l);ee.callee=e,ee.arguments=q,$&&(ee.optional=F),e=this.finishNode(ee,"CallExpression")}else if(this.type===types$1.backQuote){(F||A)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var le=this.startNodeAt(o,l);le.tag=e,le.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(le,"TaggedTemplateExpression")}return e},pp$5.parseExprAtom=function(e,o,l){this.type===types$1.slash&&this.readRegexp();var d,O=this.potentialArrowAt===this.start;switch(this.type){case types$1._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),d=this.startNode(),this.next(),this.type===types$1.parenL&&!this.allowDirectSuper&&this.raise(d.start,"super() call outside constructor of a subclass"),this.type!==types$1.dot&&this.type!==types$1.bracketL&&this.type!==types$1.parenL&&this.unexpected(),this.finishNode(d,"Super");case types$1._this:return d=this.startNode(),this.next(),this.finishNode(d,"ThisExpression");case types$1.name:var A=this.start,S=this.startLoc,$=this.containsEsc,F=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!$&&F.name==="async"&&!this.canInsertSemicolon()&&this.eat(types$1._function))return this.overrideContext(types.f_expr),this.parseFunction(this.startNodeAt(A,S),0,!1,!0,o);if(O&&!this.canInsertSemicolon()){if(this.eat(types$1.arrow))return this.parseArrowExpression(this.startNodeAt(A,S),[F],!1,o);if(this.options.ecmaVersion>=8&&F.name==="async"&&this.type===types$1.name&&!$&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return F=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(types$1.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(A,S),[F],!0,o)}return F;case types$1.regexp:var E=this.value;return d=this.parseLiteral(E.value),d.regex={pattern:E.pattern,flags:E.flags},d;case types$1.num:case types$1.string:return this.parseLiteral(this.value);case types$1._null:case types$1._true:case types$1._false:return d=this.startNode(),d.value=this.type===types$1._null?null:this.type===types$1._true,d.raw=this.type.keyword,this.next(),this.finishNode(d,"Literal");case types$1.parenL:var L=this.start,N=this.parseParenAndDistinguishExpression(O,o);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(N)&&(e.parenthesizedAssign=L),e.parenthesizedBind<0&&(e.parenthesizedBind=L)),N;case types$1.bracketL:return d=this.startNode(),this.next(),d.elements=this.parseExprList(types$1.bracketR,!0,!0,e),this.finishNode(d,"ArrayExpression");case types$1.braceL:return this.overrideContext(types.b_expr),this.parseObj(!1,e);case types$1._function:return d=this.startNode(),this.next(),this.parseFunction(d,0);case types$1._class:return this.parseClass(this.startNode(),!1);case types$1._new:return this.parseNew();case types$1.backQuote:return this.parseTemplate();case types$1._import:return this.options.ecmaVersion>=11?this.parseExprImport(l):this.unexpected();default:return this.parseExprAtomDefault()}},pp$5.parseExprAtomDefault=function(){this.unexpected()},pp$5.parseExprImport=function(e){var o=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===types$1.parenL&&!e)return this.parseDynamicImport(o);if(this.type===types$1.dot){var l=this.startNodeAt(o.start,o.loc&&o.loc.start);return l.name="import",o.meta=this.finishNode(l,"Identifier"),this.parseImportMeta(o)}else this.unexpected()},pp$5.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),this.options.ecmaVersion>=16)this.eat(types$1.parenR)?e.options=null:(this.expect(types$1.comma),this.afterTrailingComma(types$1.parenR)?e.options=null:(e.options=this.parseMaybeAssign(),this.eat(types$1.parenR)||(this.expect(types$1.comma),this.afterTrailingComma(types$1.parenR)||this.unexpected())));else if(!this.eat(types$1.parenR)){var o=this.start;this.eat(types$1.comma)&&this.eat(types$1.parenR)?this.raiseRecoverable(o,"Trailing comma is not allowed in import()"):this.unexpected(o)}return this.finishNode(e,"ImportExpression")},pp$5.parseImportMeta=function(e){this.next();var o=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),o&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")},pp$5.parseLiteral=function(e){var o=this.startNode();return o.value=e,o.raw=this.input.slice(this.start,this.end),o.raw.charCodeAt(o.raw.length-1)===110&&(o.bigint=o.value!=null?o.value.toString():o.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(o,"Literal")},pp$5.parseParenExpression=function(){this.expect(types$1.parenL);var e=this.parseExpression();return this.expect(types$1.parenR),e},pp$5.shouldParseArrow=function(e){return!this.canInsertSemicolon()},pp$5.parseParenAndDistinguishExpression=function(e,o){var l=this.start,d=this.startLoc,O,A=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var S=this.start,$=this.startLoc,F=[],E=!0,L=!1,N=new DestructuringErrors,V=this.yieldPos,B=this.awaitPos,U;for(this.yieldPos=0,this.awaitPos=0;this.type!==types$1.parenR;)if(E?E=!1:this.expect(types$1.comma),A&&this.afterTrailingComma(types$1.parenR,!0)){L=!0;break}else if(this.type===types$1.ellipsis){U=this.start,F.push(this.parseParenItem(this.parseRestBinding())),this.type===types$1.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else F.push(this.parseMaybeAssign(!1,N,this.parseParenItem));var q=this.lastTokEnd,ee=this.lastTokEndLoc;if(this.expect(types$1.parenR),e&&this.shouldParseArrow(F)&&this.eat(types$1.arrow))return this.checkPatternErrors(N,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=V,this.awaitPos=B,this.parseParenArrowList(l,d,F,o);(!F.length||L)&&this.unexpected(this.lastTokStart),U&&this.unexpected(U),this.checkExpressionErrors(N,!0),this.yieldPos=V||this.yieldPos,this.awaitPos=B||this.awaitPos,F.length>1?(O=this.startNodeAt(S,$),O.expressions=F,this.finishNodeAt(O,"SequenceExpression",q,ee)):O=F[0]}else O=this.parseParenExpression();if(this.options.preserveParens){var le=this.startNodeAt(l,d);return le.expression=O,this.finishNode(le,"ParenthesizedExpression")}else return O},pp$5.parseParenItem=function(e){return e},pp$5.parseParenArrowList=function(e,o,l,d){return this.parseArrowExpression(this.startNodeAt(e,o),l,!1,d)};var empty=[];pp$5.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===types$1.dot){var o=this.startNodeAt(e.start,e.loc&&e.loc.start);o.name="new",e.meta=this.finishNode(o,"Identifier"),this.next();var l=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),l&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var d=this.start,O=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),d,O,!0,!1),this.eat(types$1.parenL)?e.arguments=this.parseExprList(types$1.parenR,this.options.ecmaVersion>=8,!1):e.arguments=empty,this.finishNode(e,"NewExpression")},pp$5.parseTemplateElement=function(e){var o=e.isTagged,l=this.startNode();return this.type===types$1.invalidTemplate?(o||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),l.value={raw:this.value.replace(/\r\n?/g,`
`),cooked:null}):l.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),l.tail=this.type===types$1.backQuote,this.finishNode(l,"TemplateElement")},pp$5.parseTemplate=function(e){e===void 0&&(e={});var o=e.isTagged;o===void 0&&(o=!1);var l=this.startNode();this.next(),l.expressions=[];var d=this.parseTemplateElement({isTagged:o});for(l.quasis=[d];!d.tail;)this.type===types$1.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(types$1.dollarBraceL),l.expressions.push(this.parseExpression()),this.expect(types$1.braceR),l.quasis.push(d=this.parseTemplateElement({isTagged:o}));return this.next(),this.finishNode(l,"TemplateLiteral")},pp$5.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===types$1.name||this.type===types$1.num||this.type===types$1.string||this.type===types$1.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===types$1.star)&&!lineBreak.test(this.input.slice(this.lastTokEnd,this.start))},pp$5.parseObj=function(e,o){var l=this.startNode(),d=!0,O={};for(l.properties=[],this.next();!this.eat(types$1.braceR);){if(d)d=!1;else if(this.expect(types$1.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(types$1.braceR))break;var A=this.parseProperty(e,o);e||this.checkPropClash(A,O,o),l.properties.push(A)}return this.finishNode(l,e?"ObjectPattern":"ObjectExpression")},pp$5.parseProperty=function(e,o){var l=this.startNode(),d,O,A,S;if(this.options.ecmaVersion>=9&&this.eat(types$1.ellipsis))return e?(l.argument=this.parseIdent(!1),this.type===types$1.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(l,"RestElement")):(l.argument=this.parseMaybeAssign(!1,o),this.type===types$1.comma&&o&&o.trailingComma<0&&(o.trailingComma=this.start),this.finishNode(l,"SpreadElement"));this.options.ecmaVersion>=6&&(l.method=!1,l.shorthand=!1,(e||o)&&(A=this.start,S=this.startLoc),e||(d=this.eat(types$1.star)));var $=this.containsEsc;return this.parsePropertyName(l),!e&&!$&&this.options.ecmaVersion>=8&&!d&&this.isAsyncProp(l)?(O=!0,d=this.options.ecmaVersion>=9&&this.eat(types$1.star),this.parsePropertyName(l)):O=!1,this.parsePropertyValue(l,e,d,O,A,S,o,$),this.finishNode(l,"Property")},pp$5.parseGetterSetter=function(e){var o=e.key.name;this.parsePropertyName(e),e.value=this.parseMethod(!1),e.kind=o;var l=e.kind==="get"?0:1;if(e.value.params.length!==l){var d=e.value.start;e.kind==="get"?this.raiseRecoverable(d,"getter should have no params"):this.raiseRecoverable(d,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")},pp$5.parsePropertyValue=function(e,o,l,d,O,A,S,$){(l||d)&&this.type===types$1.colon&&this.unexpected(),this.eat(types$1.colon)?(e.value=o?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,S),e.kind="init"):this.options.ecmaVersion>=6&&this.type===types$1.parenL?(o&&this.unexpected(),e.method=!0,e.value=this.parseMethod(l,d),e.kind="init"):!o&&!$&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==types$1.comma&&this.type!==types$1.braceR&&this.type!==types$1.eq?((l||d)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((l||d)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=O),o?e.value=this.parseMaybeDefault(O,A,this.copyNode(e.key)):this.type===types$1.eq&&S?(S.shorthandAssign<0&&(S.shorthandAssign=this.start),e.value=this.parseMaybeDefault(O,A,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.kind="init",e.shorthand=!0):this.unexpected()},pp$5.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(types$1.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(types$1.bracketR),e.key;e.computed=!1}return e.key=this.type===types$1.num||this.type===types$1.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")},pp$5.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)},pp$5.parseMethod=function(e,o,l){var d=this.startNode(),O=this.yieldPos,A=this.awaitPos,S=this.awaitIdentPos;return this.initFunction(d),this.options.ecmaVersion>=6&&(d.generator=e),this.options.ecmaVersion>=8&&(d.async=!!o),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(functionFlags(o,d.generator)|SCOPE_SUPER|(l?SCOPE_DIRECT_SUPER:0)),this.expect(types$1.parenL),d.params=this.parseBindingList(types$1.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(d,!1,!0,!1),this.yieldPos=O,this.awaitPos=A,this.awaitIdentPos=S,this.finishNode(d,"FunctionExpression")},pp$5.parseArrowExpression=function(e,o,l,d){var O=this.yieldPos,A=this.awaitPos,S=this.awaitIdentPos;return this.enterScope(functionFlags(l,!1)|SCOPE_ARROW),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!l),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(o,!0),this.parseFunctionBody(e,!0,!1,d),this.yieldPos=O,this.awaitPos=A,this.awaitIdentPos=S,this.finishNode(e,"ArrowFunctionExpression")},pp$5.parseFunctionBody=function(e,o,l,d){var O=o&&this.type!==types$1.braceL,A=this.strict,S=!1;if(O)e.body=this.parseMaybeAssign(d),e.expression=!0,this.checkParams(e,!1);else{var $=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!A||$)&&(S=this.strictDirective(this.end),S&&$&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var F=this.labels;this.labels=[],S&&(this.strict=!0),this.checkParams(e,!A&&!S&&!o&&!l&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,BIND_OUTSIDE),e.body=this.parseBlock(!1,void 0,S&&!A),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=F}this.exitScope()},pp$5.isSimpleParamList=function(e){for(var o=0,l=e;o<l.length;o+=1){var d=l[o];if(d.type!=="Identifier")return!1}return!0},pp$5.checkParams=function(e,o){for(var l=Object.create(null),d=0,O=e.params;d<O.length;d+=1){var A=O[d];this.checkLValInnerPattern(A,BIND_VAR,o?null:l)}},pp$5.parseExprList=function(e,o,l,d){for(var O=[],A=!0;!this.eat(e);){if(A)A=!1;else if(this.expect(types$1.comma),o&&this.afterTrailingComma(e))break;var S=void 0;l&&this.type===types$1.comma?S=null:this.type===types$1.ellipsis?(S=this.parseSpread(d),d&&this.type===types$1.comma&&d.trailingComma<0&&(d.trailingComma=this.start)):S=this.parseMaybeAssign(!1,d),O.push(S)}return O},pp$5.checkUnreserved=function(e){var o=e.start,l=e.end,d=e.name;if(this.inGenerator&&d==="yield"&&this.raiseRecoverable(o,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&d==="await"&&this.raiseRecoverable(o,"Cannot use 'await' as identifier inside an async function"),!(this.currentThisScope().flags&SCOPE_VAR)&&d==="arguments"&&this.raiseRecoverable(o,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(d==="arguments"||d==="await")&&this.raise(o,"Cannot use "+d+" in class static initialization block"),this.keywords.test(d)&&this.raise(o,"Unexpected keyword '"+d+"'"),!(this.options.ecmaVersion<6&&this.input.slice(o,l).indexOf("\\")!==-1)){var O=this.strict?this.reservedWordsStrict:this.reservedWords;O.test(d)&&(!this.inAsync&&d==="await"&&this.raiseRecoverable(o,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(o,"The keyword '"+d+"' is reserved"))}},pp$5.parseIdent=function(e){var o=this.parseIdentNode();return this.next(!!e),this.finishNode(o,"Identifier"),e||(this.checkUnreserved(o),o.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=o.start)),o},pp$5.parseIdentNode=function(){var e=this.startNode();return this.type===types$1.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=types$1.name):this.unexpected(),e},pp$5.parsePrivateIdent=function(){var e=this.startNode();return this.type===types$1.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e},pp$5.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var o=this.startNode();return this.next(),this.type===types$1.semi||this.canInsertSemicolon()||this.type!==types$1.star&&!this.type.startsExpr?(o.delegate=!1,o.argument=null):(o.delegate=this.eat(types$1.star),o.argument=this.parseMaybeAssign(e)),this.finishNode(o,"YieldExpression")},pp$5.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var o=this.startNode();return this.next(),o.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(o,"AwaitExpression")};var pp$4=Parser.prototype;pp$4.raise=function(e,o){var l=getLineInfo(this.input,e);o+=" ("+l.line+":"+l.column+")",this.sourceFile&&(o+=" in "+this.sourceFile);var d=new SyntaxError(o);throw d.pos=e,d.loc=l,d.raisedAt=this.pos,d},pp$4.raiseRecoverable=pp$4.raise,pp$4.curPosition=function(){if(this.options.locations)return new Position(this.curLine,this.pos-this.lineStart)};var pp$3=Parser.prototype,Scope=function(o){this.flags=o,this.var=[],this.lexical=[],this.functions=[]};pp$3.enterScope=function(e){this.scopeStack.push(new Scope(e))},pp$3.exitScope=function(){this.scopeStack.pop()},pp$3.treatFunctionsAsVarInScope=function(e){return e.flags&SCOPE_FUNCTION||!this.inModule&&e.flags&SCOPE_TOP},pp$3.declareName=function(e,o,l){var d=!1;if(o===BIND_LEXICAL){var O=this.currentScope();d=O.lexical.indexOf(e)>-1||O.functions.indexOf(e)>-1||O.var.indexOf(e)>-1,O.lexical.push(e),this.inModule&&O.flags&SCOPE_TOP&&delete this.undefinedExports[e]}else if(o===BIND_SIMPLE_CATCH){var A=this.currentScope();A.lexical.push(e)}else if(o===BIND_FUNCTION){var S=this.currentScope();this.treatFunctionsAsVar?d=S.lexical.indexOf(e)>-1:d=S.lexical.indexOf(e)>-1||S.var.indexOf(e)>-1,S.functions.push(e)}else for(var $=this.scopeStack.length-1;$>=0;--$){var F=this.scopeStack[$];if(F.lexical.indexOf(e)>-1&&!(F.flags&SCOPE_SIMPLE_CATCH&&F.lexical[0]===e)||!this.treatFunctionsAsVarInScope(F)&&F.functions.indexOf(e)>-1){d=!0;break}if(F.var.push(e),this.inModule&&F.flags&SCOPE_TOP&&delete this.undefinedExports[e],F.flags&SCOPE_VAR)break}d&&this.raiseRecoverable(l,"Identifier '"+e+"' has already been declared")},pp$3.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)},pp$3.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},pp$3.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var o=this.scopeStack[e];if(o.flags&(SCOPE_VAR|SCOPE_CLASS_FIELD_INIT|SCOPE_CLASS_STATIC_BLOCK))return o}},pp$3.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var o=this.scopeStack[e];if(o.flags&(SCOPE_VAR|SCOPE_CLASS_FIELD_INIT|SCOPE_CLASS_STATIC_BLOCK)&&!(o.flags&SCOPE_ARROW))return o}};var Node=function(o,l,d){this.type="",this.start=l,this.end=0,o.options.locations&&(this.loc=new SourceLocation(o,d)),o.options.directSourceFile&&(this.sourceFile=o.options.directSourceFile),o.options.ranges&&(this.range=[l,0])},pp$2=Parser.prototype;pp$2.startNode=function(){return new Node(this,this.start,this.startLoc)},pp$2.startNodeAt=function(e,o){return new Node(this,e,o)};function finishNodeAt(e,o,l,d){return e.type=o,e.end=l,this.options.locations&&(e.loc.end=d),this.options.ranges&&(e.range[1]=l),e}pp$2.finishNode=function(e,o){return finishNodeAt.call(this,e,o,this.lastTokEnd,this.lastTokEndLoc)},pp$2.finishNodeAt=function(e,o,l,d){return finishNodeAt.call(this,e,o,l,d)},pp$2.copyNode=function(e){var o=new Node(this,e.start,this.startLoc);for(var l in e)o[l]=e[l];return o};var scriptValuesAddedInUnicode="Gara Garay Gukh Gurung_Khema Hrkt Katakana_Or_Hiragana Kawi Kirat_Rai Krai Nag_Mundari Nagm Ol_Onal Onao Sunu Sunuwar Todhri Todr Tulu_Tigalari Tutg Unknown Zzzz",ecma9BinaryProperties="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",ecma10BinaryProperties=ecma9BinaryProperties+" Extended_Pictographic",ecma11BinaryProperties=ecma10BinaryProperties,ecma12BinaryProperties=ecma11BinaryProperties+" EBase EComp EMod EPres ExtPict",ecma13BinaryProperties=ecma12BinaryProperties,ecma14BinaryProperties=ecma13BinaryProperties,unicodeBinaryProperties={9:ecma9BinaryProperties,10:ecma10BinaryProperties,11:ecma11BinaryProperties,12:ecma12BinaryProperties,13:ecma13BinaryProperties,14:ecma14BinaryProperties},ecma14BinaryPropertiesOfStrings="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",unicodeBinaryPropertiesOfStrings={9:"",10:"",11:"",12:"",13:"",14:ecma14BinaryPropertiesOfStrings},unicodeGeneralCategoryValues="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",ecma9ScriptValues="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",ecma10ScriptValues=ecma9ScriptValues+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",ecma11ScriptValues=ecma10ScriptValues+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",ecma12ScriptValues=ecma11ScriptValues+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",ecma13ScriptValues=ecma12ScriptValues+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",ecma14ScriptValues=ecma13ScriptValues+" "+scriptValuesAddedInUnicode,unicodeScriptValues={9:ecma9ScriptValues,10:ecma10ScriptValues,11:ecma11ScriptValues,12:ecma12ScriptValues,13:ecma13ScriptValues,14:ecma14ScriptValues},data={};function buildUnicodeData(e){var o=data[e]={binary:wordsRegexp(unicodeBinaryProperties[e]+" "+unicodeGeneralCategoryValues),binaryOfStrings:wordsRegexp(unicodeBinaryPropertiesOfStrings[e]),nonBinary:{General_Category:wordsRegexp(unicodeGeneralCategoryValues),Script:wordsRegexp(unicodeScriptValues[e])}};o.nonBinary.Script_Extensions=o.nonBinary.Script,o.nonBinary.gc=o.nonBinary.General_Category,o.nonBinary.sc=o.nonBinary.Script,o.nonBinary.scx=o.nonBinary.Script_Extensions}for(var i=0,list=[9,10,11,12,13,14];i<list.length;i+=1){var ecmaVersion=list[i];buildUnicodeData(ecmaVersion)}var pp$1=Parser.prototype,BranchID=function(o,l){this.parent=o,this.base=l||this};BranchID.prototype.separatedFrom=function(o){for(var l=this;l;l=l.parent)for(var d=o;d;d=d.parent)if(l.base===d.base&&l!==d)return!0;return!1},BranchID.prototype.sibling=function(){return new BranchID(this.parent,this.base)};var RegExpValidationState=function(o){this.parser=o,this.validFlags="gim"+(o.options.ecmaVersion>=6?"uy":"")+(o.options.ecmaVersion>=9?"s":"")+(o.options.ecmaVersion>=13?"d":"")+(o.options.ecmaVersion>=15?"v":""),this.unicodeProperties=data[o.options.ecmaVersion>=14?14:o.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=Object.create(null),this.backReferenceNames=[],this.branchID=null};RegExpValidationState.prototype.reset=function(o,l,d){var O=d.indexOf("v")!==-1,A=d.indexOf("u")!==-1;this.start=o|0,this.source=l+"",this.flags=d,O&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=A&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=A&&this.parser.options.ecmaVersion>=9)},RegExpValidationState.prototype.raise=function(o){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+o)},RegExpValidationState.prototype.at=function(o,l){l===void 0&&(l=!1);var d=this.source,O=d.length;if(o>=O)return-1;var A=d.charCodeAt(o);if(!(l||this.switchU)||A<=55295||A>=57344||o+1>=O)return A;var S=d.charCodeAt(o+1);return S>=56320&&S<=57343?(A<<10)+S-56613888:A},RegExpValidationState.prototype.nextIndex=function(o,l){l===void 0&&(l=!1);var d=this.source,O=d.length;if(o>=O)return O;var A=d.charCodeAt(o),S;return!(l||this.switchU)||A<=55295||A>=57344||o+1>=O||(S=d.charCodeAt(o+1))<56320||S>57343?o+1:o+2},RegExpValidationState.prototype.current=function(o){return o===void 0&&(o=!1),this.at(this.pos,o)},RegExpValidationState.prototype.lookahead=function(o){return o===void 0&&(o=!1),this.at(this.nextIndex(this.pos,o),o)},RegExpValidationState.prototype.advance=function(o){o===void 0&&(o=!1),this.pos=this.nextIndex(this.pos,o)},RegExpValidationState.prototype.eat=function(o,l){return l===void 0&&(l=!1),this.current(l)===o?(this.advance(l),!0):!1},RegExpValidationState.prototype.eatChars=function(o,l){l===void 0&&(l=!1);for(var d=this.pos,O=0,A=o;O<A.length;O+=1){var S=A[O],$=this.at(d,l);if($===-1||$!==S)return!1;d=this.nextIndex(d,l)}return this.pos=d,!0},pp$1.validateRegExpFlags=function(e){for(var o=e.validFlags,l=e.flags,d=!1,O=!1,A=0;A<l.length;A++){var S=l.charAt(A);o.indexOf(S)===-1&&this.raise(e.start,"Invalid regular expression flag"),l.indexOf(S,A+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),S==="u"&&(d=!0),S==="v"&&(O=!0)}this.options.ecmaVersion>=15&&d&&O&&this.raise(e.start,"Invalid regular expression flag")};function hasProp(e){for(var o in e)return!0;return!1}pp$1.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&hasProp(e.groupNames)&&(e.switchN=!0,this.regexp_pattern(e))},pp$1.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames=Object.create(null),e.backReferenceNames.length=0,e.branchID=null,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var o=0,l=e.backReferenceNames;o<l.length;o+=1){var d=l[o];e.groupNames[d]||e.raise("Invalid named capture referenced")}},pp$1.regexp_disjunction=function(e){var o=this.options.ecmaVersion>=16;for(o&&(e.branchID=new BranchID(e.branchID,null)),this.regexp_alternative(e);e.eat(124);)o&&(e.branchID=e.branchID.sibling()),this.regexp_alternative(e);o&&(e.branchID=e.branchID.parent),this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")},pp$1.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););},pp$1.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1},pp$1.regexp_eatAssertion=function(e){var o=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=o}if(e.eat(40)&&e.eat(63)){var l=!1;if(this.options.ecmaVersion>=9&&(l=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!l,!0}return e.pos=o,!1},pp$1.regexp_eatQuantifier=function(e,o){return o===void 0&&(o=!1),this.regexp_eatQuantifierPrefix(e,o)?(e.eat(63),!0):!1},pp$1.regexp_eatQuantifierPrefix=function(e,o){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,o)},pp$1.regexp_eatBracedQuantifier=function(e,o){var l=e.pos;if(e.eat(123)){var d=0,O=-1;if(this.regexp_eatDecimalDigits(e)&&(d=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(O=e.lastIntValue),e.eat(125)))return O!==-1&&O<d&&!o&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!o&&e.raise("Incomplete quantifier"),e.pos=l}return!1},pp$1.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)},pp$1.regexp_eatReverseSolidusAtomEscape=function(e){var o=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=o}return!1},pp$1.regexp_eatUncapturingGroup=function(e){var o=e.pos;if(e.eat(40)){if(e.eat(63)){if(this.options.ecmaVersion>=16){var l=this.regexp_eatModifiers(e),d=e.eat(45);if(l||d){for(var O=0;O<l.length;O++){var A=l.charAt(O);l.indexOf(A,O+1)>-1&&e.raise("Duplicate regular expression modifiers")}if(d){var S=this.regexp_eatModifiers(e);!l&&!S&&e.current()===58&&e.raise("Invalid regular expression modifiers");for(var $=0;$<S.length;$++){var F=S.charAt($);(S.indexOf(F,$+1)>-1||l.indexOf(F)>-1)&&e.raise("Duplicate regular expression modifiers")}}}}if(e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}}e.pos=o}return!1},pp$1.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1},pp$1.regexp_eatModifiers=function(e){for(var o="",l=0;(l=e.current())!==-1&&isRegularExpressionModifier(l);)o+=codePointToString(l),e.advance();return o};function isRegularExpressionModifier(e){return e===105||e===109||e===115}pp$1.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)},pp$1.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1},pp$1.regexp_eatSyntaxCharacter=function(e){var o=e.current();return isSyntaxCharacter(o)?(e.lastIntValue=o,e.advance(),!0):!1};function isSyntaxCharacter(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}pp$1.regexp_eatPatternCharacters=function(e){for(var o=e.pos,l=0;(l=e.current())!==-1&&!isSyntaxCharacter(l);)e.advance();return e.pos!==o},pp$1.regexp_eatExtendedPatternCharacter=function(e){var o=e.current();return o!==-1&&o!==36&&!(o>=40&&o<=43)&&o!==46&&o!==63&&o!==91&&o!==94&&o!==124?(e.advance(),!0):!1},pp$1.regexp_groupSpecifier=function(e){if(e.eat(63)){this.regexp_eatGroupName(e)||e.raise("Invalid group");var o=this.options.ecmaVersion>=16,l=e.groupNames[e.lastStringValue];if(l)if(o)for(var d=0,O=l;d<O.length;d+=1){var A=O[d];A.separatedFrom(e.branchID)||e.raise("Duplicate capture group name")}else e.raise("Duplicate capture group name");o?(l||(e.groupNames[e.lastStringValue]=[])).push(e.branchID):e.groupNames[e.lastStringValue]=!0}},pp$1.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1},pp$1.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=codePointToString(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=codePointToString(e.lastIntValue);return!0}return!1},pp$1.regexp_eatRegExpIdentifierStart=function(e){var o=e.pos,l=this.options.ecmaVersion>=11,d=e.current(l);return e.advance(l),d===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,l)&&(d=e.lastIntValue),isRegExpIdentifierStart(d)?(e.lastIntValue=d,!0):(e.pos=o,!1)};function isRegExpIdentifierStart(e){return isIdentifierStart(e,!0)||e===36||e===95}pp$1.regexp_eatRegExpIdentifierPart=function(e){var o=e.pos,l=this.options.ecmaVersion>=11,d=e.current(l);return e.advance(l),d===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,l)&&(d=e.lastIntValue),isRegExpIdentifierPart(d)?(e.lastIntValue=d,!0):(e.pos=o,!1)};function isRegExpIdentifierPart(e){return isIdentifierChar(e,!0)||e===36||e===95||e===8204||e===8205}pp$1.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)},pp$1.regexp_eatBackReference=function(e){var o=e.pos;if(this.regexp_eatDecimalEscape(e)){var l=e.lastIntValue;if(e.switchU)return l>e.maxBackReference&&(e.maxBackReference=l),!0;if(l<=e.numCapturingParens)return!0;e.pos=o}return!1},pp$1.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1},pp$1.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)},pp$1.regexp_eatCControlLetter=function(e){var o=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=o}return!1},pp$1.regexp_eatZero=function(e){return e.current()===48&&!isDecimalDigit(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1},pp$1.regexp_eatControlEscape=function(e){var o=e.current();return o===116?(e.lastIntValue=9,e.advance(),!0):o===110?(e.lastIntValue=10,e.advance(),!0):o===118?(e.lastIntValue=11,e.advance(),!0):o===102?(e.lastIntValue=12,e.advance(),!0):o===114?(e.lastIntValue=13,e.advance(),!0):!1},pp$1.regexp_eatControlLetter=function(e){var o=e.current();return isControlLetter(o)?(e.lastIntValue=o%32,e.advance(),!0):!1};function isControlLetter(e){return e>=65&&e<=90||e>=97&&e<=122}pp$1.regexp_eatRegExpUnicodeEscapeSequence=function(e,o){o===void 0&&(o=!1);var l=e.pos,d=o||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var O=e.lastIntValue;if(d&&O>=55296&&O<=56319){var A=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var S=e.lastIntValue;if(S>=56320&&S<=57343)return e.lastIntValue=(O-55296)*1024+(S-56320)+65536,!0}e.pos=A,e.lastIntValue=O}return!0}if(d&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&isValidUnicode(e.lastIntValue))return!0;d&&e.raise("Invalid unicode escape"),e.pos=l}return!1};function isValidUnicode(e){return e>=0&&e<=1114111}pp$1.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var o=e.current();return o!==99&&(!e.switchN||o!==107)?(e.lastIntValue=o,e.advance(),!0):!1},pp$1.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var o=e.current();if(o>=49&&o<=57){do e.lastIntValue=10*e.lastIntValue+(o-48),e.advance();while((o=e.current())>=48&&o<=57);return!0}return!1};var CharSetNone=0,CharSetOk=1,CharSetString=2;pp$1.regexp_eatCharacterClassEscape=function(e){var o=e.current();if(isCharacterClassEscape(o))return e.lastIntValue=-1,e.advance(),CharSetOk;var l=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((l=o===80)||o===112)){e.lastIntValue=-1,e.advance();var d;if(e.eat(123)&&(d=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return l&&d===CharSetString&&e.raise("Invalid property name"),d;e.raise("Invalid property name")}return CharSetNone};function isCharacterClassEscape(e){return e===100||e===68||e===115||e===83||e===119||e===87}pp$1.regexp_eatUnicodePropertyValueExpression=function(e){var o=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var l=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var d=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,l,d),CharSetOk}}if(e.pos=o,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var O=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,O)}return CharSetNone},pp$1.regexp_validateUnicodePropertyNameAndValue=function(e,o,l){hasOwn(e.unicodeProperties.nonBinary,o)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[o].test(l)||e.raise("Invalid property value")},pp$1.regexp_validateUnicodePropertyNameOrValue=function(e,o){if(e.unicodeProperties.binary.test(o))return CharSetOk;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(o))return CharSetString;e.raise("Invalid property name")},pp$1.regexp_eatUnicodePropertyName=function(e){var o=0;for(e.lastStringValue="";isUnicodePropertyNameCharacter(o=e.current());)e.lastStringValue+=codePointToString(o),e.advance();return e.lastStringValue!==""};function isUnicodePropertyNameCharacter(e){return isControlLetter(e)||e===95}pp$1.regexp_eatUnicodePropertyValue=function(e){var o=0;for(e.lastStringValue="";isUnicodePropertyValueCharacter(o=e.current());)e.lastStringValue+=codePointToString(o),e.advance();return e.lastStringValue!==""};function isUnicodePropertyValueCharacter(e){return isUnicodePropertyNameCharacter(e)||isDecimalDigit(e)}pp$1.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)},pp$1.regexp_eatCharacterClass=function(e){if(e.eat(91)){var o=e.eat(94),l=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),o&&l===CharSetString&&e.raise("Negated character class may contain strings"),!0}return!1},pp$1.regexp_classContents=function(e){return e.current()===93?CharSetOk:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),CharSetOk)},pp$1.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var o=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var l=e.lastIntValue;e.switchU&&(o===-1||l===-1)&&e.raise("Invalid character class"),o!==-1&&l!==-1&&o>l&&e.raise("Range out of order in character class")}}},pp$1.regexp_eatClassAtom=function(e){var o=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var l=e.current();(l===99||isOctalDigit(l))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=o}var d=e.current();return d!==93?(e.lastIntValue=d,e.advance(),!0):!1},pp$1.regexp_eatClassEscape=function(e){var o=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=o}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)},pp$1.regexp_classSetExpression=function(e){var o=CharSetOk,l;if(!this.regexp_eatClassSetRange(e))if(l=this.regexp_eatClassSetOperand(e)){l===CharSetString&&(o=CharSetString);for(var d=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(l=this.regexp_eatClassSetOperand(e))){l!==CharSetString&&(o=CharSetOk);continue}e.raise("Invalid character in character class")}if(d!==e.pos)return o;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(d!==e.pos)return o}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(l=this.regexp_eatClassSetOperand(e),!l)return o;l===CharSetString&&(o=CharSetString)}},pp$1.regexp_eatClassSetRange=function(e){var o=e.pos;if(this.regexp_eatClassSetCharacter(e)){var l=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var d=e.lastIntValue;return l!==-1&&d!==-1&&l>d&&e.raise("Range out of order in character class"),!0}e.pos=o}return!1},pp$1.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?CharSetOk:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)},pp$1.regexp_eatNestedClass=function(e){var o=e.pos;if(e.eat(91)){var l=e.eat(94),d=this.regexp_classContents(e);if(e.eat(93))return l&&d===CharSetString&&e.raise("Negated character class may contain strings"),d;e.pos=o}if(e.eat(92)){var O=this.regexp_eatCharacterClassEscape(e);if(O)return O;e.pos=o}return null},pp$1.regexp_eatClassStringDisjunction=function(e){var o=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var l=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return l}else e.raise("Invalid escape");e.pos=o}return null},pp$1.regexp_classStringDisjunctionContents=function(e){for(var o=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===CharSetString&&(o=CharSetString);return o},pp$1.regexp_classString=function(e){for(var o=0;this.regexp_eatClassSetCharacter(e);)o++;return o===1?CharSetOk:CharSetString},pp$1.regexp_eatClassSetCharacter=function(e){var o=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=o,!1);var l=e.current();return l<0||l===e.lookahead()&&isClassSetReservedDoublePunctuatorCharacter(l)||isClassSetSyntaxCharacter(l)?!1:(e.advance(),e.lastIntValue=l,!0)};function isClassSetReservedDoublePunctuatorCharacter(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function isClassSetSyntaxCharacter(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}pp$1.regexp_eatClassSetReservedPunctuator=function(e){var o=e.current();return isClassSetReservedPunctuator(o)?(e.lastIntValue=o,e.advance(),!0):!1};function isClassSetReservedPunctuator(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}pp$1.regexp_eatClassControlLetter=function(e){var o=e.current();return isDecimalDigit(o)||o===95?(e.lastIntValue=o%32,e.advance(),!0):!1},pp$1.regexp_eatHexEscapeSequence=function(e){var o=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=o}return!1},pp$1.regexp_eatDecimalDigits=function(e){var o=e.pos,l=0;for(e.lastIntValue=0;isDecimalDigit(l=e.current());)e.lastIntValue=10*e.lastIntValue+(l-48),e.advance();return e.pos!==o};function isDecimalDigit(e){return e>=48&&e<=57}pp$1.regexp_eatHexDigits=function(e){var o=e.pos,l=0;for(e.lastIntValue=0;isHexDigit(l=e.current());)e.lastIntValue=16*e.lastIntValue+hexToInt(l),e.advance();return e.pos!==o};function isHexDigit(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function hexToInt(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}pp$1.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var o=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var l=e.lastIntValue;o<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=o*64+l*8+e.lastIntValue:e.lastIntValue=o*8+l}else e.lastIntValue=o;return!0}return!1},pp$1.regexp_eatOctalDigit=function(e){var o=e.current();return isOctalDigit(o)?(e.lastIntValue=o-48,e.advance(),!0):(e.lastIntValue=0,!1)};function isOctalDigit(e){return e>=48&&e<=55}pp$1.regexp_eatFixedHexDigits=function(e,o){var l=e.pos;e.lastIntValue=0;for(var d=0;d<o;++d){var O=e.current();if(!isHexDigit(O))return e.pos=l,!1;e.lastIntValue=16*e.lastIntValue+hexToInt(O),e.advance()}return!0};var Token=function(o){this.type=o.type,this.value=o.value,this.start=o.start,this.end=o.end,o.options.locations&&(this.loc=new SourceLocation(o,o.startLoc,o.endLoc)),o.options.ranges&&(this.range=[o.start,o.end])},pp=Parser.prototype;pp.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new Token(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},pp.getToken=function(){return this.next(),new Token(this)},typeof Symbol<"u"&&(pp[Symbol.iterator]=function(){var e=this;return{next:function(){var o=e.getToken();return{done:o.type===types$1.eof,value:o}}}}),pp.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(types$1.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())},pp.readToken=function(e){return isIdentifierStart(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)},pp.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var o=this.input.charCodeAt(this.pos+1);return o<=56319||o>=57344?e:(e<<10)+o-56613888},pp.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),o=this.pos,l=this.input.indexOf("*/",this.pos+=2);if(l===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=l+2,this.options.locations)for(var d=void 0,O=o;(d=nextLineBreak(this.input,O,this.pos))>-1;)++this.curLine,O=this.lineStart=d;this.options.onComment&&this.options.onComment(!0,this.input.slice(o+2,l),o,this.pos,e,this.curPosition())},pp.skipLineComment=function(e){for(var o=this.pos,l=this.options.onComment&&this.curPosition(),d=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!isNewLine(d);)d=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(o+e,this.pos),o,this.pos,l,this.curPosition())},pp.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&nonASCIIwhitespace.test(String.fromCharCode(e)))++this.pos;else break e}}},pp.finishToken=function(e,o){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var l=this.type;this.type=e,this.value=o,this.updateContext(l)},pp.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var o=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&o===46?(this.pos+=3,this.finishToken(types$1.ellipsis)):(++this.pos,this.finishToken(types$1.dot))},pp.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(types$1.assign,2):this.finishOp(types$1.slash,1)},pp.readToken_mult_modulo_exp=function(e){var o=this.input.charCodeAt(this.pos+1),l=1,d=e===42?types$1.star:types$1.modulo;return this.options.ecmaVersion>=7&&e===42&&o===42&&(++l,d=types$1.starstar,o=this.input.charCodeAt(this.pos+2)),o===61?this.finishOp(types$1.assign,l+1):this.finishOp(d,l)},pp.readToken_pipe_amp=function(e){var o=this.input.charCodeAt(this.pos+1);if(o===e){if(this.options.ecmaVersion>=12){var l=this.input.charCodeAt(this.pos+2);if(l===61)return this.finishOp(types$1.assign,3)}return this.finishOp(e===124?types$1.logicalOR:types$1.logicalAND,2)}return o===61?this.finishOp(types$1.assign,2):this.finishOp(e===124?types$1.bitwiseOR:types$1.bitwiseAND,1)},pp.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(types$1.assign,2):this.finishOp(types$1.bitwiseXOR,1)},pp.readToken_plus_min=function(e){var o=this.input.charCodeAt(this.pos+1);return o===e?o===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||lineBreak.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(types$1.incDec,2):o===61?this.finishOp(types$1.assign,2):this.finishOp(types$1.plusMin,1)},pp.readToken_lt_gt=function(e){var o=this.input.charCodeAt(this.pos+1),l=1;return o===e?(l=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+l)===61?this.finishOp(types$1.assign,l+1):this.finishOp(types$1.bitShift,l)):o===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(o===61&&(l=2),this.finishOp(types$1.relational,l))},pp.readToken_eq_excl=function(e){var o=this.input.charCodeAt(this.pos+1);return o===61?this.finishOp(types$1.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&o===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(types$1.arrow)):this.finishOp(e===61?types$1.eq:types$1.prefix,1)},pp.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var o=this.input.charCodeAt(this.pos+1);if(o===46){var l=this.input.charCodeAt(this.pos+2);if(l<48||l>57)return this.finishOp(types$1.questionDot,2)}if(o===63){if(e>=12){var d=this.input.charCodeAt(this.pos+2);if(d===61)return this.finishOp(types$1.assign,3)}return this.finishOp(types$1.coalesce,2)}}return this.finishOp(types$1.question,1)},pp.readToken_numberSign=function(){var e=this.options.ecmaVersion,o=35;if(e>=13&&(++this.pos,o=this.fullCharCodeAtPos(),isIdentifierStart(o,!0)||o===92))return this.finishToken(types$1.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+codePointToString(o)+"'")},pp.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(types$1.parenL);case 41:return++this.pos,this.finishToken(types$1.parenR);case 59:return++this.pos,this.finishToken(types$1.semi);case 44:return++this.pos,this.finishToken(types$1.comma);case 91:return++this.pos,this.finishToken(types$1.bracketL);case 93:return++this.pos,this.finishToken(types$1.bracketR);case 123:return++this.pos,this.finishToken(types$1.braceL);case 125:return++this.pos,this.finishToken(types$1.braceR);case 58:return++this.pos,this.finishToken(types$1.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(types$1.backQuote);case 48:var o=this.input.charCodeAt(this.pos+1);if(o===120||o===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(o===111||o===79)return this.readRadixNumber(8);if(o===98||o===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(types$1.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+codePointToString(e)+"'")},pp.finishOp=function(e,o){var l=this.input.slice(this.pos,this.pos+o);return this.pos+=o,this.finishToken(e,l)},pp.readRegexp=function(){for(var e,o,l=this.pos;;){this.pos>=this.input.length&&this.raise(l,"Unterminated regular expression");var d=this.input.charAt(this.pos);if(lineBreak.test(d)&&this.raise(l,"Unterminated regular expression"),e)e=!1;else{if(d==="[")o=!0;else if(d==="]"&&o)o=!1;else if(d==="/"&&!o)break;e=d==="\\"}++this.pos}var O=this.input.slice(l,this.pos);++this.pos;var A=this.pos,S=this.readWord1();this.containsEsc&&this.unexpected(A);var $=this.regexpState||(this.regexpState=new RegExpValidationState(this));$.reset(l,O,S),this.validateRegExpFlags($),this.validateRegExpPattern($);var F=null;try{F=new RegExp(O,S)}catch{}return this.finishToken(types$1.regexp,{pattern:O,flags:S,value:F})},pp.readInt=function(e,o,l){for(var d=this.options.ecmaVersion>=12&&o===void 0,O=l&&this.input.charCodeAt(this.pos)===48,A=this.pos,S=0,$=0,F=0,E=o??1/0;F<E;++F,++this.pos){var L=this.input.charCodeAt(this.pos),N=void 0;if(d&&L===95){O&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),$===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),F===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),$=L;continue}if(L>=97?N=L-97+10:L>=65?N=L-65+10:L>=48&&L<=57?N=L-48:N=1/0,N>=e)break;$=L,S=S*e+N}return d&&$===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===A||o!=null&&this.pos-A!==o?null:S};function stringToNumber(e,o){return o?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function stringToBigInt(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}pp.readRadixNumber=function(e){var o=this.pos;this.pos+=2;var l=this.readInt(e);return l==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(l=stringToBigInt(this.input.slice(o,this.pos)),++this.pos):isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(types$1.num,l)},pp.readNumber=function(e){var o=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(o,"Invalid number");var l=this.pos-o>=2&&this.input.charCodeAt(o)===48;l&&this.strict&&this.raise(o,"Invalid number");var d=this.input.charCodeAt(this.pos);if(!l&&!e&&this.options.ecmaVersion>=11&&d===110){var O=stringToBigInt(this.input.slice(o,this.pos));return++this.pos,isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(types$1.num,O)}l&&/[89]/.test(this.input.slice(o,this.pos))&&(l=!1),d===46&&!l&&(++this.pos,this.readInt(10),d=this.input.charCodeAt(this.pos)),(d===69||d===101)&&!l&&(d=this.input.charCodeAt(++this.pos),(d===43||d===45)&&++this.pos,this.readInt(10)===null&&this.raise(o,"Invalid number")),isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var A=stringToNumber(this.input.slice(o,this.pos),l);return this.finishToken(types$1.num,A)},pp.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),o;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var l=++this.pos;o=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,o>1114111&&this.invalidStringToken(l,"Code point out of bounds")}else o=this.readHexChar(4);return o},pp.readString=function(e){for(var o="",l=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var d=this.input.charCodeAt(this.pos);if(d===e)break;d===92?(o+=this.input.slice(l,this.pos),o+=this.readEscapedChar(!1),l=this.pos):d===8232||d===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(isNewLine(d)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return o+=this.input.slice(l,this.pos++),this.finishToken(types$1.string,o)};var INVALID_TEMPLATE_ESCAPE_ERROR={};pp.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===INVALID_TEMPLATE_ESCAPE_ERROR)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1},pp.invalidStringToken=function(e,o){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw INVALID_TEMPLATE_ESCAPE_ERROR;this.raise(e,o)},pp.readTmplToken=function(){for(var e="",o=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var l=this.input.charCodeAt(this.pos);if(l===96||l===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===types$1.template||this.type===types$1.invalidTemplate)?l===36?(this.pos+=2,this.finishToken(types$1.dollarBraceL)):(++this.pos,this.finishToken(types$1.backQuote)):(e+=this.input.slice(o,this.pos),this.finishToken(types$1.template,e));if(l===92)e+=this.input.slice(o,this.pos),e+=this.readEscapedChar(!0),o=this.pos;else if(isNewLine(l)){switch(e+=this.input.slice(o,this.pos),++this.pos,l){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(l);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),o=this.pos}else++this.pos}},pp.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(types$1.invalidTemplate,this.input.slice(this.start,this.pos));case"\r":this.input[this.pos+1]===`
`&&++this.pos;case`
`:case"\u2028":case"\u2029":++this.curLine,this.lineStart=this.pos+1;break}this.raise(this.start,"Unterminated template")},pp.readEscapedChar=function(e){var o=this.input.charCodeAt(++this.pos);switch(++this.pos,o){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return codePointToString(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var l=this.pos-1;this.invalidStringToken(l,"Invalid escape sequence in template string")}default:if(o>=48&&o<=55){var d=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],O=parseInt(d,8);return O>255&&(d=d.slice(0,-1),O=parseInt(d,8)),this.pos+=d.length-1,o=this.input.charCodeAt(this.pos),(d!=="0"||o===56||o===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-d.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(O)}return isNewLine(o)?(this.options.locations&&(this.lineStart=this.pos,++this.curLine),""):String.fromCharCode(o)}},pp.readHexChar=function(e){var o=this.pos,l=this.readInt(16,e);return l===null&&this.invalidStringToken(o,"Bad character escape sequence"),l},pp.readWord1=function(){this.containsEsc=!1;for(var e="",o=!0,l=this.pos,d=this.options.ecmaVersion>=6;this.pos<this.input.length;){var O=this.fullCharCodeAtPos();if(isIdentifierChar(O,d))this.pos+=O<=65535?1:2;else if(O===92){this.containsEsc=!0,e+=this.input.slice(l,this.pos);var A=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var S=this.readCodePoint();(o?isIdentifierStart:isIdentifierChar)(S,d)||this.invalidStringToken(A,"Invalid Unicode escape"),e+=codePointToString(S),l=this.pos}else break;o=!1}return e+this.input.slice(l,this.pos)},pp.readWord=function(){var e=this.readWord1(),o=types$1.name;return this.keywords.test(e)&&(o=keywords[e]),this.finishToken(o,e)};var version$1="8.15.0";Parser.acorn={Parser,version:version$1,defaultOptions,Position,SourceLocation,getLineInfo,Node,TokenType,tokTypes:types$1,keywordTypes:keywords,TokContext,tokContexts:types,isIdentifierChar,isIdentifierStart,Token,isNewLine,lineBreak,lineBreakG,nonASCIIwhitespace};function parse$a(e,o){return Parser.parse(e,o)}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var o=e.default;if(typeof o=="function"){var l=function d(){var O=!1;try{O=this instanceof d}catch{}return O?Reflect.construct(o,arguments,this.constructor):o.apply(this,arguments)};l.prototype=o.prototype}else l={};return Object.defineProperty(l,"__esModule",{value:!0}),Object.keys(e).forEach(function(d){var O=Object.getOwnPropertyDescriptor(e,d);Object.defineProperty(l,d,O.get?O:{enumerable:!0,get:function(){return e[d]}})}),l}var escodegen$1={},estraverse={},hasRequiredEstraverse;function requireEstraverse(){return hasRequiredEstraverse||(hasRequiredEstraverse=1,(function(e){(function o(l){var d,O,A,S,$,F;function E(ae){var fe={},Oe,ve;for(Oe in ae)ae.hasOwnProperty(Oe)&&(ve=ae[Oe],typeof ve=="object"&&ve!==null?fe[Oe]=E(ve):fe[Oe]=ve);return fe}function L(ae,fe){var Oe,ve,Re,Me;for(ve=ae.length,Re=0;ve;)Oe=ve>>>1,Me=Re+Oe,fe(ae[Me])?ve=Oe:(Re=Me+1,ve-=Oe+1);return Re}d={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ChainExpression:"ChainExpression",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportExpression:"ImportExpression",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",PrivateIdentifier:"PrivateIdentifier",Program:"Program",Property:"Property",PropertyDefinition:"PropertyDefinition",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},A={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ChainExpression:["expression"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportExpression:["source"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],PrivateIdentifier:[],Program:["body"],Property:["key","value"],PropertyDefinition:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},S={},$={},F={},O={Break:S,Skip:$,Remove:F};function N(ae,fe){this.parent=ae,this.key=fe}N.prototype.replace=function(fe){this.parent[this.key]=fe},N.prototype.remove=function(){return Array.isArray(this.parent)?(this.parent.splice(this.key,1),!0):(this.replace(null),!1)};function V(ae,fe,Oe,ve){this.node=ae,this.path=fe,this.wrap=Oe,this.ref=ve}function B(){}B.prototype.path=function(){var fe,Oe,ve,Re,Me,Ye;function Te(Ge,Ne){if(Array.isArray(Ne))for(ve=0,Re=Ne.length;ve<Re;++ve)Ge.push(Ne[ve]);else Ge.push(Ne)}if(!this.__current.path)return null;for(Me=[],fe=2,Oe=this.__leavelist.length;fe<Oe;++fe)Ye=this.__leavelist[fe],Te(Me,Ye.path);return Te(Me,this.__current.path),Me},B.prototype.type=function(){var ae=this.current();return ae.type||this.__current.wrap},B.prototype.parents=function(){var fe,Oe,ve;for(ve=[],fe=1,Oe=this.__leavelist.length;fe<Oe;++fe)ve.push(this.__leavelist[fe].node);return ve},B.prototype.current=function(){return this.__current.node},B.prototype.__execute=function(fe,Oe){var ve,Re;return Re=void 0,ve=this.__current,this.__current=Oe,this.__state=null,fe&&(Re=fe.call(this,Oe.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=ve,Re},B.prototype.notify=function(fe){this.__state=fe},B.prototype.skip=function(){this.notify($)},B.prototype.break=function(){this.notify(S)},B.prototype.remove=function(){this.notify(F)},B.prototype.__initialize=function(ae,fe){this.visitor=fe,this.root=ae,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null,this.__fallback=null,fe.fallback==="iteration"?this.__fallback=Object.keys:typeof fe.fallback=="function"&&(this.__fallback=fe.fallback),this.__keys=A,fe.keys&&(this.__keys=Object.assign(Object.create(this.__keys),fe.keys))};function U(ae){return ae==null?!1:typeof ae=="object"&&typeof ae.type=="string"}function q(ae,fe){return(ae===d.ObjectExpression||ae===d.ObjectPattern)&&fe==="properties"}function ee(ae,fe){for(var Oe=ae.length-1;Oe>=0;--Oe)if(ae[Oe].node===fe)return!0;return!1}B.prototype.traverse=function(fe,Oe){var ve,Re,Me,Ye,Te,Ge,Ne,Je,je,qe,et,Tt;for(this.__initialize(fe,Oe),Tt={},ve=this.__worklist,Re=this.__leavelist,ve.push(new V(fe,null,null,null)),Re.push(new V(null,null,null,null));ve.length;){if(Me=ve.pop(),Me===Tt){if(Me=Re.pop(),Ge=this.__execute(Oe.leave,Me),this.__state===S||Ge===S)return;continue}if(Me.node){if(Ge=this.__execute(Oe.enter,Me),this.__state===S||Ge===S)return;if(ve.push(Tt),Re.push(Me),this.__state===$||Ge===$)continue;if(Ye=Me.node,Te=Ye.type||Me.wrap,qe=this.__keys[Te],!qe)if(this.__fallback)qe=this.__fallback(Ye);else throw new Error("Unknown node type "+Te+".");for(Je=qe.length;(Je-=1)>=0;)if(Ne=qe[Je],et=Ye[Ne],!!et){if(Array.isArray(et)){for(je=et.length;(je-=1)>=0;)if(et[je]&&!ee(Re,et[je])){if(q(Te,qe[Je]))Me=new V(et[je],[Ne,je],"Property",null);else if(U(et[je]))Me=new V(et[je],[Ne,je],null,null);else continue;ve.push(Me)}}else if(U(et)){if(ee(Re,et))continue;ve.push(new V(et,Ne,null,null))}}}}},B.prototype.replace=function(fe,Oe){var ve,Re,Me,Ye,Te,Ge,Ne,Je,je,qe,et,Tt,Rt;function Qt(Fe){var pt,we,xt,Ct;if(Fe.ref.remove()){for(we=Fe.ref.key,Ct=Fe.ref.parent,pt=ve.length;pt--;)if(xt=ve[pt],xt.ref&&xt.ref.parent===Ct){if(xt.ref.key<we)break;--xt.ref.key}}}for(this.__initialize(fe,Oe),et={},ve=this.__worklist,Re=this.__leavelist,Tt={root:fe},Ge=new V(fe,null,null,new N(Tt,"root")),ve.push(Ge),Re.push(Ge);ve.length;){if(Ge=ve.pop(),Ge===et){if(Ge=Re.pop(),Te=this.__execute(Oe.leave,Ge),Te!==void 0&&Te!==S&&Te!==$&&Te!==F&&Ge.ref.replace(Te),(this.__state===F||Te===F)&&Qt(Ge),this.__state===S||Te===S)return Tt.root;continue}if(Te=this.__execute(Oe.enter,Ge),Te!==void 0&&Te!==S&&Te!==$&&Te!==F&&(Ge.ref.replace(Te),Ge.node=Te),(this.__state===F||Te===F)&&(Qt(Ge),Ge.node=null),this.__state===S||Te===S)return Tt.root;if(Me=Ge.node,!!Me&&(ve.push(et),Re.push(Ge),!(this.__state===$||Te===$))){if(Ye=Me.type||Ge.wrap,je=this.__keys[Ye],!je)if(this.__fallback)je=this.__fallback(Me);else throw new Error("Unknown node type "+Ye+".");for(Ne=je.length;(Ne-=1)>=0;)if(Rt=je[Ne],qe=Me[Rt],!!qe)if(Array.isArray(qe)){for(Je=qe.length;(Je-=1)>=0;)if(qe[Je]){if(q(Ye,je[Ne]))Ge=new V(qe[Je],[Rt,Je],"Property",new N(qe,Je));else if(U(qe[Je]))Ge=new V(qe[Je],[Rt,Je],null,new N(qe,Je));else continue;ve.push(Ge)}}else U(qe)&&ve.push(new V(qe,Rt,null,new N(Me,Rt)))}}return Tt.root};function le(ae,fe){var Oe=new B;return Oe.traverse(ae,fe)}function ue(ae,fe){var Oe=new B;return Oe.replace(ae,fe)}function _e(ae,fe){var Oe;return Oe=L(fe,function(Re){return Re.range[0]>ae.range[0]}),ae.extendedRange=[ae.range[0],ae.range[1]],Oe!==fe.length&&(ae.extendedRange[1]=fe[Oe].range[0]),Oe-=1,Oe>=0&&(ae.extendedRange[0]=fe[Oe].range[1]),ae}function ie(ae,fe,Oe){var ve=[],Re,Me,Ye,Te;if(!ae.range)throw new Error("attachComments needs range information");if(!Oe.length){if(fe.length){for(Ye=0,Me=fe.length;Ye<Me;Ye+=1)Re=E(fe[Ye]),Re.extendedRange=[0,ae.range[0]],ve.push(Re);ae.leadingComments=ve}return ae}for(Ye=0,Me=fe.length;Ye<Me;Ye+=1)ve.push(_e(E(fe[Ye]),Oe));return Te=0,le(ae,{enter:function(Ge){for(var Ne;Te<ve.length&&(Ne=ve[Te],!(Ne.extendedRange[1]>Ge.range[0]));)Ne.extendedRange[1]===Ge.range[0]?(Ge.leadingComments||(Ge.leadingComments=[]),Ge.leadingComments.push(Ne),ve.splice(Te,1)):Te+=1;if(Te===ve.length)return O.Break;if(ve[Te].extendedRange[0]>Ge.range[1])return O.Skip}}),Te=0,le(ae,{leave:function(Ge){for(var Ne;Te<ve.length&&(Ne=ve[Te],!(Ge.range[1]<Ne.extendedRange[0]));)Ge.range[1]===Ne.extendedRange[0]?(Ge.trailingComments||(Ge.trailingComments=[]),Ge.trailingComments.push(Ne),ve.splice(Te,1)):Te+=1;if(Te===ve.length)return O.Break;if(ve[Te].extendedRange[0]>Ge.range[1])return O.Skip}}),ae}return l.Syntax=d,l.traverse=le,l.replace=ue,l.attachComments=ie,l.VisitorKeys=A,l.VisitorOption=O,l.Controller=B,l.cloneEnvironment=function(){return o({})},l})(e)})(estraverse)),estraverse}var utils={},ast={exports:{}},hasRequiredAst;function requireAst(){return hasRequiredAst||(hasRequiredAst=1,(function(){function e(S){if(S==null)return!1;switch(S.type){case"ArrayExpression":case"AssignmentExpression":case"BinaryExpression":case"CallExpression":case"ConditionalExpression":case"FunctionExpression":case"Identifier":case"Literal":case"LogicalExpression":case"MemberExpression":case"NewExpression":case"ObjectExpression":case"SequenceExpression":case"ThisExpression":case"UnaryExpression":case"UpdateExpression":return!0}return!1}function o(S){if(S==null)return!1;switch(S.type){case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"WhileStatement":return!0}return!1}function l(S){if(S==null)return!1;switch(S.type){case"BlockStatement":case"BreakStatement":case"ContinueStatement":case"DebuggerStatement":case"DoWhileStatement":case"EmptyStatement":case"ExpressionStatement":case"ForInStatement":case"ForStatement":case"IfStatement":case"LabeledStatement":case"ReturnStatement":case"SwitchStatement":case"ThrowStatement":case"TryStatement":case"VariableDeclaration":case"WhileStatement":case"WithStatement":return!0}return!1}function d(S){return l(S)||S!=null&&S.type==="FunctionDeclaration"}function O(S){switch(S.type){case"IfStatement":return S.alternate!=null?S.alternate:S.consequent;case"LabeledStatement":case"ForStatement":case"ForInStatement":case"WhileStatement":case"WithStatement":return S.body}return null}function A(S){var $;if(S.type!=="IfStatement"||S.alternate==null)return!1;$=S.consequent;do{if($.type==="IfStatement"&&$.alternate==null)return!0;$=O($)}while($);return!1}ast.exports={isExpression:e,isStatement:l,isIterationStatement:o,isSourceElement:d,isProblematicIfStatement:A,trailingStatement:O}})()),ast.exports}var code={exports:{}},hasRequiredCode;function requireCode(){return hasRequiredCode||(hasRequiredCode=1,(function(){var e,o,l,d,O,A;o={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,NonAsciiIdentifierPart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/},e={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};function S(ee){return 48<=ee&&ee<=57}function $(ee){return 48<=ee&&ee<=57||97<=ee&&ee<=102||65<=ee&&ee<=70}function F(ee){return ee>=48&&ee<=55}l=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function E(ee){return ee===32||ee===9||ee===11||ee===12||ee===160||ee>=5760&&l.indexOf(ee)>=0}function L(ee){return ee===10||ee===13||ee===8232||ee===8233}function N(ee){if(ee<=65535)return String.fromCharCode(ee);var le=String.fromCharCode(Math.floor((ee-65536)/1024)+55296),ue=String.fromCharCode((ee-65536)%1024+56320);return le+ue}for(d=new Array(128),A=0;A<128;++A)d[A]=A>=97&&A<=122||A>=65&&A<=90||A===36||A===95;for(O=new Array(128),A=0;A<128;++A)O[A]=A>=97&&A<=122||A>=65&&A<=90||A>=48&&A<=57||A===36||A===95;function V(ee){return ee<128?d[ee]:o.NonAsciiIdentifierStart.test(N(ee))}function B(ee){return ee<128?O[ee]:o.NonAsciiIdentifierPart.test(N(ee))}function U(ee){return ee<128?d[ee]:e.NonAsciiIdentifierStart.test(N(ee))}function q(ee){return ee<128?O[ee]:e.NonAsciiIdentifierPart.test(N(ee))}code.exports={isDecimalDigit:S,isHexDigit:$,isOctalDigit:F,isWhiteSpace:E,isLineTerminator:L,isIdentifierStartES5:V,isIdentifierPartES5:B,isIdentifierStartES6:U,isIdentifierPartES6:q}})()),code.exports}var keyword={exports:{}},hasRequiredKeyword;function requireKeyword(){return hasRequiredKeyword||(hasRequiredKeyword=1,(function(){var e=requireCode();function o(V){switch(V){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"let":return!0;default:return!1}}function l(V,B){return!B&&V==="yield"?!1:d(V,B)}function d(V,B){if(B&&o(V))return!0;switch(V.length){case 2:return V==="if"||V==="in"||V==="do";case 3:return V==="var"||V==="for"||V==="new"||V==="try";case 4:return V==="this"||V==="else"||V==="case"||V==="void"||V==="with"||V==="enum";case 5:return V==="while"||V==="break"||V==="catch"||V==="throw"||V==="const"||V==="yield"||V==="class"||V==="super";case 6:return V==="return"||V==="typeof"||V==="delete"||V==="switch"||V==="export"||V==="import";case 7:return V==="default"||V==="finally"||V==="extends";case 8:return V==="function"||V==="continue"||V==="debugger";case 10:return V==="instanceof";default:return!1}}function O(V,B){return V==="null"||V==="true"||V==="false"||l(V,B)}function A(V,B){return V==="null"||V==="true"||V==="false"||d(V,B)}function S(V){return V==="eval"||V==="arguments"}function $(V){var B,U,q;if(V.length===0||(q=V.charCodeAt(0),!e.isIdentifierStartES5(q)))return!1;for(B=1,U=V.length;B<U;++B)if(q=V.charCodeAt(B),!e.isIdentifierPartES5(q))return!1;return!0}function F(V,B){return(V-55296)*1024+(B-56320)+65536}function E(V){var B,U,q,ee,le;if(V.length===0)return!1;for(le=e.isIdentifierStartES6,B=0,U=V.length;B<U;++B){if(q=V.charCodeAt(B),55296<=q&&q<=56319){if(++B,B>=U||(ee=V.charCodeAt(B),!(56320<=ee&&ee<=57343)))return!1;q=F(q,ee)}if(!le(q))return!1;le=e.isIdentifierPartES6}return!0}function L(V,B){return $(V)&&!O(V,B)}function N(V,B){return E(V)&&!A(V,B)}keyword.exports={isKeywordES5:l,isKeywordES6:d,isReservedWordES5:O,isReservedWordES6:A,isRestrictedWord:S,isIdentifierNameES5:$,isIdentifierNameES6:E,isIdentifierES5:L,isIdentifierES6:N}})()),keyword.exports}var hasRequiredUtils;function requireUtils(){return hasRequiredUtils||(hasRequiredUtils=1,(function(){utils.ast=requireAst(),utils.code=requireCode(),utils.keyword=requireKeyword()})()),utils}var sourceMap={},sourceMapGenerator={},base64Vlq={},base64={},hasRequiredBase64;function requireBase64(){if(hasRequiredBase64)return base64;hasRequiredBase64=1;var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");return base64.encode=function(o){if(0<=o&&o<e.length)return e[o];throw new TypeError("Must be between 0 and 63: "+o)},base64.decode=function(o){var l=65,d=90,O=97,A=122,S=48,$=57,F=43,E=47,L=26,N=52;return l<=o&&o<=d?o-l:O<=o&&o<=A?o-O+L:S<=o&&o<=$?o-S+N:o==F?62:o==E?63:-1},base64}var hasRequiredBase64Vlq;function requireBase64Vlq(){if(hasRequiredBase64Vlq)return base64Vlq;hasRequiredBase64Vlq=1;var e=requireBase64(),o=5,l=1<<o,d=l-1,O=l;function A($){return $<0?(-$<<1)+1:($<<1)+0}function S($){var F=($&1)===1,E=$>>1;return F?-E:E}return base64Vlq.encode=function(F){var E="",L,N=A(F);do L=N&d,N>>>=o,N>0&&(L|=O),E+=e.encode(L);while(N>0);return E},base64Vlq.decode=function(F,E,L){var N=F.length,V=0,B=0,U,q;do{if(E>=N)throw new Error("Expected more digits in base 64 VLQ value.");if(q=e.decode(F.charCodeAt(E++)),q===-1)throw new Error("Invalid base64 digit: "+F.charAt(E-1));U=!!(q&O),q&=d,V=V+(q<<B),B+=o}while(U);L.value=S(V),L.rest=E},base64Vlq}var util={},hasRequiredUtil;function requireUtil(){return hasRequiredUtil||(hasRequiredUtil=1,(function(e){function o(ie,ae,fe){if(ae in ie)return ie[ae];if(arguments.length===3)return fe;throw new Error('"'+ae+'" is a required argument.')}e.getArg=o;var l=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,d=/^data:.+\,.+$/;function O(ie){var ae=ie.match(l);return ae?{scheme:ae[1],auth:ae[2],host:ae[3],port:ae[4],path:ae[5]}:null}e.urlParse=O;function A(ie){var ae="";return ie.scheme&&(ae+=ie.scheme+":"),ae+="//",ie.auth&&(ae+=ie.auth+"@"),ie.host&&(ae+=ie.host),ie.port&&(ae+=":"+ie.port),ie.path&&(ae+=ie.path),ae}e.urlGenerate=A;function S(ie){var ae=ie,fe=O(ie);if(fe){if(!fe.path)return ie;ae=fe.path}for(var Oe=e.isAbsolute(ae),ve=ae.split(/\/+/),Re,Me=0,Ye=ve.length-1;Ye>=0;Ye--)Re=ve[Ye],Re==="."?ve.splice(Ye,1):Re===".."?Me++:Me>0&&(Re===""?(ve.splice(Ye+1,Me),Me=0):(ve.splice(Ye,2),Me--));return ae=ve.join("/"),ae===""&&(ae=Oe?"/":"."),fe?(fe.path=ae,A(fe)):ae}e.normalize=S;function $(ie,ae){ie===""&&(ie="."),ae===""&&(ae=".");var fe=O(ae),Oe=O(ie);if(Oe&&(ie=Oe.path||"/"),fe&&!fe.scheme)return Oe&&(fe.scheme=Oe.scheme),A(fe);if(fe||ae.match(d))return ae;if(Oe&&!Oe.host&&!Oe.path)return Oe.host=ae,A(Oe);var ve=ae.charAt(0)==="/"?ae:S(ie.replace(/\/+$/,"")+"/"+ae);return Oe?(Oe.path=ve,A(Oe)):ve}e.join=$,e.isAbsolute=function(ie){return ie.charAt(0)==="/"||l.test(ie)};function F(ie,ae){ie===""&&(ie="."),ie=ie.replace(/\/$/,"");for(var fe=0;ae.indexOf(ie+"/")!==0;){var Oe=ie.lastIndexOf("/");if(Oe<0||(ie=ie.slice(0,Oe),ie.match(/^([^\/]+:\/)?\/*$/)))return ae;++fe}return Array(fe+1).join("../")+ae.substr(ie.length+1)}e.relative=F;var E=(function(){var ie=Object.create(null);return!("__proto__"in ie)})();function L(ie){return ie}function N(ie){return B(ie)?"$"+ie:ie}e.toSetString=E?L:N;function V(ie){return B(ie)?ie.slice(1):ie}e.fromSetString=E?L:V;function B(ie){if(!ie)return!1;var ae=ie.length;if(ae<9||ie.charCodeAt(ae-1)!==95||ie.charCodeAt(ae-2)!==95||ie.charCodeAt(ae-3)!==111||ie.charCodeAt(ae-4)!==116||ie.charCodeAt(ae-5)!==111||ie.charCodeAt(ae-6)!==114||ie.charCodeAt(ae-7)!==112||ie.charCodeAt(ae-8)!==95||ie.charCodeAt(ae-9)!==95)return!1;for(var fe=ae-10;fe>=0;fe--)if(ie.charCodeAt(fe)!==36)return!1;return!0}function U(ie,ae,fe){var Oe=ee(ie.source,ae.source);return Oe!==0||(Oe=ie.originalLine-ae.originalLine,Oe!==0)||(Oe=ie.originalColumn-ae.originalColumn,Oe!==0||fe)||(Oe=ie.generatedColumn-ae.generatedColumn,Oe!==0)||(Oe=ie.generatedLine-ae.generatedLine,Oe!==0)?Oe:ee(ie.name,ae.name)}e.compareByOriginalPositions=U;function q(ie,ae,fe){var Oe=ie.generatedLine-ae.generatedLine;return Oe!==0||(Oe=ie.generatedColumn-ae.generatedColumn,Oe!==0||fe)||(Oe=ee(ie.source,ae.source),Oe!==0)||(Oe=ie.originalLine-ae.originalLine,Oe!==0)||(Oe=ie.originalColumn-ae.originalColumn,Oe!==0)?Oe:ee(ie.name,ae.name)}e.compareByGeneratedPositionsDeflated=q;function ee(ie,ae){return ie===ae?0:ie===null?1:ae===null?-1:ie>ae?1:-1}function le(ie,ae){var fe=ie.generatedLine-ae.generatedLine;return fe!==0||(fe=ie.generatedColumn-ae.generatedColumn,fe!==0)||(fe=ee(ie.source,ae.source),fe!==0)||(fe=ie.originalLine-ae.originalLine,fe!==0)||(fe=ie.originalColumn-ae.originalColumn,fe!==0)?fe:ee(ie.name,ae.name)}e.compareByGeneratedPositionsInflated=le;function ue(ie){return JSON.parse(ie.replace(/^\)]}'[^\n]*\n/,""))}e.parseSourceMapInput=ue;function _e(ie,ae,fe){if(ae=ae||"",ie&&(ie[ie.length-1]!=="/"&&ae[0]!=="/"&&(ie+="/"),ae=ie+ae),fe){var Oe=O(fe);if(!Oe)throw new Error("sourceMapURL could not be parsed");if(Oe.path){var ve=Oe.path.lastIndexOf("/");ve>=0&&(Oe.path=Oe.path.substring(0,ve+1))}ae=$(A(Oe),ae)}return S(ae)}e.computeSourceURL=_e})(util)),util}var arraySet={},hasRequiredArraySet;function requireArraySet(){if(hasRequiredArraySet)return arraySet;hasRequiredArraySet=1;var e=requireUtil(),o=Object.prototype.hasOwnProperty,l=typeof Map<"u";function d(){this._array=[],this._set=l?new Map:Object.create(null)}return d.fromArray=function(A,S){for(var $=new d,F=0,E=A.length;F<E;F++)$.add(A[F],S);return $},d.prototype.size=function(){return l?this._set.size:Object.getOwnPropertyNames(this._set).length},d.prototype.add=function(A,S){var $=l?A:e.toSetString(A),F=l?this.has(A):o.call(this._set,$),E=this._array.length;(!F||S)&&this._array.push(A),F||(l?this._set.set(A,E):this._set[$]=E)},d.prototype.has=function(A){if(l)return this._set.has(A);var S=e.toSetString(A);return o.call(this._set,S)},d.prototype.indexOf=function(A){if(l){var S=this._set.get(A);if(S>=0)return S}else{var $=e.toSetString(A);if(o.call(this._set,$))return this._set[$]}throw new Error('"'+A+'" is not in the set.')},d.prototype.at=function(A){if(A>=0&&A<this._array.length)return this._array[A];throw new Error("No element indexed by "+A)},d.prototype.toArray=function(){return this._array.slice()},arraySet.ArraySet=d,arraySet}var mappingList={},hasRequiredMappingList;function requireMappingList(){if(hasRequiredMappingList)return mappingList;hasRequiredMappingList=1;var e=requireUtil();function o(d,O){var A=d.generatedLine,S=O.generatedLine,$=d.generatedColumn,F=O.generatedColumn;return S>A||S==A&&F>=$||e.compareByGeneratedPositionsInflated(d,O)<=0}function l(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}return l.prototype.unsortedForEach=function(O,A){this._array.forEach(O,A)},l.prototype.add=function(O){o(this._last,O)?(this._last=O,this._array.push(O)):(this._sorted=!1,this._array.push(O))},l.prototype.toArray=function(){return this._sorted||(this._array.sort(e.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},mappingList.MappingList=l,mappingList}var hasRequiredSourceMapGenerator;function requireSourceMapGenerator(){if(hasRequiredSourceMapGenerator)return sourceMapGenerator;hasRequiredSourceMapGenerator=1;var e=requireBase64Vlq(),o=requireUtil(),l=requireArraySet().ArraySet,d=requireMappingList().MappingList;function O(A){A||(A={}),this._file=o.getArg(A,"file",null),this._sourceRoot=o.getArg(A,"sourceRoot",null),this._skipValidation=o.getArg(A,"skipValidation",!1),this._sources=new l,this._names=new l,this._mappings=new d,this._sourcesContents=null}return O.prototype._version=3,O.fromSourceMap=function(S){var $=S.sourceRoot,F=new O({file:S.file,sourceRoot:$});return S.eachMapping(function(E){var L={generated:{line:E.generatedLine,column:E.generatedColumn}};E.source!=null&&(L.source=E.source,$!=null&&(L.source=o.relative($,L.source)),L.original={line:E.originalLine,column:E.originalColumn},E.name!=null&&(L.name=E.name)),F.addMapping(L)}),S.sources.forEach(function(E){var L=E;$!==null&&(L=o.relative($,E)),F._sources.has(L)||F._sources.add(L);var N=S.sourceContentFor(E);N!=null&&F.setSourceContent(E,N)}),F},O.prototype.addMapping=function(S){var $=o.getArg(S,"generated"),F=o.getArg(S,"original",null),E=o.getArg(S,"source",null),L=o.getArg(S,"name",null);this._skipValidation||this._validateMapping($,F,E,L),E!=null&&(E=String(E),this._sources.has(E)||this._sources.add(E)),L!=null&&(L=String(L),this._names.has(L)||this._names.add(L)),this._mappings.add({generatedLine:$.line,generatedColumn:$.column,originalLine:F!=null&&F.line,originalColumn:F!=null&&F.column,source:E,name:L})},O.prototype.setSourceContent=function(S,$){var F=S;this._sourceRoot!=null&&(F=o.relative(this._sourceRoot,F)),$!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[o.toSetString(F)]=$):this._sourcesContents&&(delete this._sourcesContents[o.toSetString(F)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},O.prototype.applySourceMap=function(S,$,F){var E=$;if($==null){if(S.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);E=S.file}var L=this._sourceRoot;L!=null&&(E=o.relative(L,E));var N=new l,V=new l;this._mappings.unsortedForEach(function(B){if(B.source===E&&B.originalLine!=null){var U=S.originalPositionFor({line:B.originalLine,column:B.originalColumn});U.source!=null&&(B.source=U.source,F!=null&&(B.source=o.join(F,B.source)),L!=null&&(B.source=o.relative(L,B.source)),B.originalLine=U.line,B.originalColumn=U.column,U.name!=null&&(B.name=U.name))}var q=B.source;q!=null&&!N.has(q)&&N.add(q);var ee=B.name;ee!=null&&!V.has(ee)&&V.add(ee)},this),this._sources=N,this._names=V,S.sources.forEach(function(B){var U=S.sourceContentFor(B);U!=null&&(F!=null&&(B=o.join(F,B)),L!=null&&(B=o.relative(L,B)),this.setSourceContent(B,U))},this)},O.prototype._validateMapping=function(S,$,F,E){if($&&typeof $.line!="number"&&typeof $.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(S&&"line"in S&&"column"in S&&S.line>0&&S.column>=0&&!$&&!F&&!E)){if(S&&"line"in S&&"column"in S&&$&&"line"in $&&"column"in $&&S.line>0&&S.column>=0&&$.line>0&&$.column>=0&&F)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:S,source:F,original:$,name:E}))}},O.prototype._serializeMappings=function(){for(var S=0,$=1,F=0,E=0,L=0,N=0,V="",B,U,q,ee,le=this._mappings.toArray(),ue=0,_e=le.length;ue<_e;ue++){if(U=le[ue],B="",U.generatedLine!==$)for(S=0;U.generatedLine!==$;)B+=";",$++;else if(ue>0){if(!o.compareByGeneratedPositionsInflated(U,le[ue-1]))continue;B+=","}B+=e.encode(U.generatedColumn-S),S=U.generatedColumn,U.source!=null&&(ee=this._sources.indexOf(U.source),B+=e.encode(ee-N),N=ee,B+=e.encode(U.originalLine-1-E),E=U.originalLine-1,B+=e.encode(U.originalColumn-F),F=U.originalColumn,U.name!=null&&(q=this._names.indexOf(U.name),B+=e.encode(q-L),L=q)),V+=B}return V},O.prototype._generateSourcesContent=function(S,$){return S.map(function(F){if(!this._sourcesContents)return null;$!=null&&(F=o.relative($,F));var E=o.toSetString(F);return Object.prototype.hasOwnProperty.call(this._sourcesContents,E)?this._sourcesContents[E]:null},this)},O.prototype.toJSON=function(){var S={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(S.file=this._file),this._sourceRoot!=null&&(S.sourceRoot=this._sourceRoot),this._sourcesContents&&(S.sourcesContent=this._generateSourcesContent(S.sources,S.sourceRoot)),S},O.prototype.toString=function(){return JSON.stringify(this.toJSON())},sourceMapGenerator.SourceMapGenerator=O,sourceMapGenerator}var sourceMapConsumer={},binarySearch={},hasRequiredBinarySearch;function requireBinarySearch(){return hasRequiredBinarySearch||(hasRequiredBinarySearch=1,(function(e){e.GREATEST_LOWER_BOUND=1,e.LEAST_UPPER_BOUND=2;function o(l,d,O,A,S,$){var F=Math.floor((d-l)/2)+l,E=S(O,A[F],!0);return E===0?F:E>0?d-F>1?o(F,d,O,A,S,$):$==e.LEAST_UPPER_BOUND?d<A.length?d:-1:F:F-l>1?o(l,F,O,A,S,$):$==e.LEAST_UPPER_BOUND?F:l<0?-1:l}e.search=function(d,O,A,S){if(O.length===0)return-1;var $=o(-1,O.length,d,O,A,S||e.GREATEST_LOWER_BOUND);if($<0)return-1;for(;$-1>=0&&A(O[$],O[$-1],!0)===0;)--$;return $}})(binarySearch)),binarySearch}var quickSort={},hasRequiredQuickSort;function requireQuickSort(){if(hasRequiredQuickSort)return quickSort;hasRequiredQuickSort=1;function e(d,O,A){var S=d[O];d[O]=d[A],d[A]=S}function o(d,O){return Math.round(d+Math.random()*(O-d))}function l(d,O,A,S){if(A<S){var $=o(A,S),F=A-1;e(d,$,S);for(var E=d[S],L=A;L<S;L++)O(d[L],E)<=0&&(F+=1,e(d,F,L));e(d,F+1,L);var N=F+1;l(d,O,A,N-1),l(d,O,N+1,S)}}return quickSort.quickSort=function(d,O){l(d,O,0,d.length-1)},quickSort}var hasRequiredSourceMapConsumer;function requireSourceMapConsumer(){if(hasRequiredSourceMapConsumer)return sourceMapConsumer;hasRequiredSourceMapConsumer=1;var e=requireUtil(),o=requireBinarySearch(),l=requireArraySet().ArraySet,d=requireBase64Vlq(),O=requireQuickSort().quickSort;function A(E,L){var N=E;return typeof E=="string"&&(N=e.parseSourceMapInput(E)),N.sections!=null?new F(N,L):new S(N,L)}A.fromSourceMap=function(E,L){return S.fromSourceMap(E,L)},A.prototype._version=3,A.prototype.__generatedMappings=null,Object.defineProperty(A.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),A.prototype.__originalMappings=null,Object.defineProperty(A.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),A.prototype._charIsMappingSeparator=function(L,N){var V=L.charAt(N);return V===";"||V===","},A.prototype._parseMappings=function(L,N){throw new Error("Subclasses must implement _parseMappings")},A.GENERATED_ORDER=1,A.ORIGINAL_ORDER=2,A.GREATEST_LOWER_BOUND=1,A.LEAST_UPPER_BOUND=2,A.prototype.eachMapping=function(L,N,V){var B=N||null,U=V||A.GENERATED_ORDER,q;switch(U){case A.GENERATED_ORDER:q=this._generatedMappings;break;case A.ORIGINAL_ORDER:q=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var ee=this.sourceRoot;q.map(function(le){var ue=le.source===null?null:this._sources.at(le.source);return ue=e.computeSourceURL(ee,ue,this._sourceMapURL),{source:ue,generatedLine:le.generatedLine,generatedColumn:le.generatedColumn,originalLine:le.originalLine,originalColumn:le.originalColumn,name:le.name===null?null:this._names.at(le.name)}},this).forEach(L,B)},A.prototype.allGeneratedPositionsFor=function(L){var N=e.getArg(L,"line"),V={source:e.getArg(L,"source"),originalLine:N,originalColumn:e.getArg(L,"column",0)};if(V.source=this._findSourceIndex(V.source),V.source<0)return[];var B=[],U=this._findMapping(V,this._originalMappings,"originalLine","originalColumn",e.compareByOriginalPositions,o.LEAST_UPPER_BOUND);if(U>=0){var q=this._originalMappings[U];if(L.column===void 0)for(var ee=q.originalLine;q&&q.originalLine===ee;)B.push({line:e.getArg(q,"generatedLine",null),column:e.getArg(q,"generatedColumn",null),lastColumn:e.getArg(q,"lastGeneratedColumn",null)}),q=this._originalMappings[++U];else for(var le=q.originalColumn;q&&q.originalLine===N&&q.originalColumn==le;)B.push({line:e.getArg(q,"generatedLine",null),column:e.getArg(q,"generatedColumn",null),lastColumn:e.getArg(q,"lastGeneratedColumn",null)}),q=this._originalMappings[++U]}return B},sourceMapConsumer.SourceMapConsumer=A;function S(E,L){var N=E;typeof E=="string"&&(N=e.parseSourceMapInput(E));var V=e.getArg(N,"version"),B=e.getArg(N,"sources"),U=e.getArg(N,"names",[]),q=e.getArg(N,"sourceRoot",null),ee=e.getArg(N,"sourcesContent",null),le=e.getArg(N,"mappings"),ue=e.getArg(N,"file",null);if(V!=this._version)throw new Error("Unsupported version: "+V);q&&(q=e.normalize(q)),B=B.map(String).map(e.normalize).map(function(_e){return q&&e.isAbsolute(q)&&e.isAbsolute(_e)?e.relative(q,_e):_e}),this._names=l.fromArray(U.map(String),!0),this._sources=l.fromArray(B,!0),this._absoluteSources=this._sources.toArray().map(function(_e){return e.computeSourceURL(q,_e,L)}),this.sourceRoot=q,this.sourcesContent=ee,this._mappings=le,this._sourceMapURL=L,this.file=ue}S.prototype=Object.create(A.prototype),S.prototype.consumer=A,S.prototype._findSourceIndex=function(E){var L=E;if(this.sourceRoot!=null&&(L=e.relative(this.sourceRoot,L)),this._sources.has(L))return this._sources.indexOf(L);var N;for(N=0;N<this._absoluteSources.length;++N)if(this._absoluteSources[N]==E)return N;return-1},S.fromSourceMap=function(L,N){var V=Object.create(S.prototype),B=V._names=l.fromArray(L._names.toArray(),!0),U=V._sources=l.fromArray(L._sources.toArray(),!0);V.sourceRoot=L._sourceRoot,V.sourcesContent=L._generateSourcesContent(V._sources.toArray(),V.sourceRoot),V.file=L._file,V._sourceMapURL=N,V._absoluteSources=V._sources.toArray().map(function(fe){return e.computeSourceURL(V.sourceRoot,fe,N)});for(var q=L._mappings.toArray().slice(),ee=V.__generatedMappings=[],le=V.__originalMappings=[],ue=0,_e=q.length;ue<_e;ue++){var ie=q[ue],ae=new $;ae.generatedLine=ie.generatedLine,ae.generatedColumn=ie.generatedColumn,ie.source&&(ae.source=U.indexOf(ie.source),ae.originalLine=ie.originalLine,ae.originalColumn=ie.originalColumn,ie.name&&(ae.name=B.indexOf(ie.name)),le.push(ae)),ee.push(ae)}return O(V.__originalMappings,e.compareByOriginalPositions),V},S.prototype._version=3,Object.defineProperty(S.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function $(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}S.prototype._parseMappings=function(L,N){for(var V=1,B=0,U=0,q=0,ee=0,le=0,ue=L.length,_e=0,ie={},ae={},fe=[],Oe=[],ve,Re,Me,Ye,Te;_e<ue;)if(L.charAt(_e)===";")V++,_e++,B=0;else if(L.charAt(_e)===",")_e++;else{for(ve=new $,ve.generatedLine=V,Ye=_e;Ye<ue&&!this._charIsMappingSeparator(L,Ye);Ye++);if(Re=L.slice(_e,Ye),Me=ie[Re],Me)_e+=Re.length;else{for(Me=[];_e<Ye;)d.decode(L,_e,ae),Te=ae.value,_e=ae.rest,Me.push(Te);if(Me.length===2)throw new Error("Found a source, but no line and column");if(Me.length===3)throw new Error("Found a source and line, but no column");ie[Re]=Me}ve.generatedColumn=B+Me[0],B=ve.generatedColumn,Me.length>1&&(ve.source=ee+Me[1],ee+=Me[1],ve.originalLine=U+Me[2],U=ve.originalLine,ve.originalLine+=1,ve.originalColumn=q+Me[3],q=ve.originalColumn,Me.length>4&&(ve.name=le+Me[4],le+=Me[4])),Oe.push(ve),typeof ve.originalLine=="number"&&fe.push(ve)}O(Oe,e.compareByGeneratedPositionsDeflated),this.__generatedMappings=Oe,O(fe,e.compareByOriginalPositions),this.__originalMappings=fe},S.prototype._findMapping=function(L,N,V,B,U,q){if(L[V]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+L[V]);if(L[B]<0)throw new TypeError("Column must be greater than or equal to 0, got "+L[B]);return o.search(L,N,U,q)},S.prototype.computeColumnSpans=function(){for(var L=0;L<this._generatedMappings.length;++L){var N=this._generatedMappings[L];if(L+1<this._generatedMappings.length){var V=this._generatedMappings[L+1];if(N.generatedLine===V.generatedLine){N.lastGeneratedColumn=V.generatedColumn-1;continue}}N.lastGeneratedColumn=1/0}},S.prototype.originalPositionFor=function(L){var N={generatedLine:e.getArg(L,"line"),generatedColumn:e.getArg(L,"column")},V=this._findMapping(N,this._generatedMappings,"generatedLine","generatedColumn",e.compareByGeneratedPositionsDeflated,e.getArg(L,"bias",A.GREATEST_LOWER_BOUND));if(V>=0){var B=this._generatedMappings[V];if(B.generatedLine===N.generatedLine){var U=e.getArg(B,"source",null);U!==null&&(U=this._sources.at(U),U=e.computeSourceURL(this.sourceRoot,U,this._sourceMapURL));var q=e.getArg(B,"name",null);return q!==null&&(q=this._names.at(q)),{source:U,line:e.getArg(B,"originalLine",null),column:e.getArg(B,"originalColumn",null),name:q}}}return{source:null,line:null,column:null,name:null}},S.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(L){return L==null}):!1},S.prototype.sourceContentFor=function(L,N){if(!this.sourcesContent)return null;var V=this._findSourceIndex(L);if(V>=0)return this.sourcesContent[V];var B=L;this.sourceRoot!=null&&(B=e.relative(this.sourceRoot,B));var U;if(this.sourceRoot!=null&&(U=e.urlParse(this.sourceRoot))){var q=B.replace(/^file:\/\//,"");if(U.scheme=="file"&&this._sources.has(q))return this.sourcesContent[this._sources.indexOf(q)];if((!U.path||U.path=="/")&&this._sources.has("/"+B))return this.sourcesContent[this._sources.indexOf("/"+B)]}if(N)return null;throw new Error('"'+B+'" is not in the SourceMap.')},S.prototype.generatedPositionFor=function(L){var N=e.getArg(L,"source");if(N=this._findSourceIndex(N),N<0)return{line:null,column:null,lastColumn:null};var V={source:N,originalLine:e.getArg(L,"line"),originalColumn:e.getArg(L,"column")},B=this._findMapping(V,this._originalMappings,"originalLine","originalColumn",e.compareByOriginalPositions,e.getArg(L,"bias",A.GREATEST_LOWER_BOUND));if(B>=0){var U=this._originalMappings[B];if(U.source===V.source)return{line:e.getArg(U,"generatedLine",null),column:e.getArg(U,"generatedColumn",null),lastColumn:e.getArg(U,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},sourceMapConsumer.BasicSourceMapConsumer=S;function F(E,L){var N=E;typeof E=="string"&&(N=e.parseSourceMapInput(E));var V=e.getArg(N,"version"),B=e.getArg(N,"sections");if(V!=this._version)throw new Error("Unsupported version: "+V);this._sources=new l,this._names=new l;var U={line:-1,column:0};this._sections=B.map(function(q){if(q.url)throw new Error("Support for url field in sections not implemented.");var ee=e.getArg(q,"offset"),le=e.getArg(ee,"line"),ue=e.getArg(ee,"column");if(le<U.line||le===U.line&&ue<U.column)throw new Error("Section offsets must be ordered and non-overlapping.");return U=ee,{generatedOffset:{generatedLine:le+1,generatedColumn:ue+1},consumer:new A(e.getArg(q,"map"),L)}})}return F.prototype=Object.create(A.prototype),F.prototype.constructor=A,F.prototype._version=3,Object.defineProperty(F.prototype,"sources",{get:function(){for(var E=[],L=0;L<this._sections.length;L++)for(var N=0;N<this._sections[L].consumer.sources.length;N++)E.push(this._sections[L].consumer.sources[N]);return E}}),F.prototype.originalPositionFor=function(L){var N={generatedLine:e.getArg(L,"line"),generatedColumn:e.getArg(L,"column")},V=o.search(N,this._sections,function(U,q){var ee=U.generatedLine-q.generatedOffset.generatedLine;return ee||U.generatedColumn-q.generatedOffset.generatedColumn}),B=this._sections[V];return B?B.consumer.originalPositionFor({line:N.generatedLine-(B.generatedOffset.generatedLine-1),column:N.generatedColumn-(B.generatedOffset.generatedLine===N.generatedLine?B.generatedOffset.generatedColumn-1:0),bias:L.bias}):{source:null,line:null,column:null,name:null}},F.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(L){return L.consumer.hasContentsOfAllSources()})},F.prototype.sourceContentFor=function(L,N){for(var V=0;V<this._sections.length;V++){var B=this._sections[V],U=B.consumer.sourceContentFor(L,!0);if(U)return U}if(N)return null;throw new Error('"'+L+'" is not in the SourceMap.')},F.prototype.generatedPositionFor=function(L){for(var N=0;N<this._sections.length;N++){var V=this._sections[N];if(V.consumer._findSourceIndex(e.getArg(L,"source"))!==-1){var B=V.consumer.generatedPositionFor(L);if(B){var U={line:B.line+(V.generatedOffset.generatedLine-1),column:B.column+(V.generatedOffset.generatedLine===B.line?V.generatedOffset.generatedColumn-1:0)};return U}}}return{line:null,column:null}},F.prototype._parseMappings=function(L,N){this.__generatedMappings=[],this.__originalMappings=[];for(var V=0;V<this._sections.length;V++)for(var B=this._sections[V],U=B.consumer._generatedMappings,q=0;q<U.length;q++){var ee=U[q],le=B.consumer._sources.at(ee.source);le=e.computeSourceURL(B.consumer.sourceRoot,le,this._sourceMapURL),this._sources.add(le),le=this._sources.indexOf(le);var ue=null;ee.name&&(ue=B.consumer._names.at(ee.name),this._names.add(ue),ue=this._names.indexOf(ue));var _e={source:le,generatedLine:ee.generatedLine+(B.generatedOffset.generatedLine-1),generatedColumn:ee.generatedColumn+(B.generatedOffset.generatedLine===ee.generatedLine?B.generatedOffset.generatedColumn-1:0),originalLine:ee.originalLine,originalColumn:ee.originalColumn,name:ue};this.__generatedMappings.push(_e),typeof _e.originalLine=="number"&&this.__originalMappings.push(_e)}O(this.__generatedMappings,e.compareByGeneratedPositionsDeflated),O(this.__originalMappings,e.compareByOriginalPositions)},sourceMapConsumer.IndexedSourceMapConsumer=F,sourceMapConsumer}var sourceNode={},hasRequiredSourceNode;function requireSourceNode(){if(hasRequiredSourceNode)return sourceNode;hasRequiredSourceNode=1;var e=requireSourceMapGenerator().SourceMapGenerator,o=requireUtil(),l=/(\r?\n)/,d=10,O="$$$isSourceNode$$$";function A(S,$,F,E,L){this.children=[],this.sourceContents={},this.line=S??null,this.column=$??null,this.source=F??null,this.name=L??null,this[O]=!0,E!=null&&this.add(E)}return A.fromStringWithSourceMap=function($,F,E){var L=new A,N=$.split(l),V=0,B=function(){var ue=ie(),_e=ie()||"";return ue+_e;function ie(){return V<N.length?N[V++]:void 0}},U=1,q=0,ee=null;return F.eachMapping(function(ue){if(ee!==null)if(U<ue.generatedLine)le(ee,B()),U++,q=0;else{var _e=N[V]||"",ie=_e.substr(0,ue.generatedColumn-q);N[V]=_e.substr(ue.generatedColumn-q),q=ue.generatedColumn,le(ee,ie),ee=ue;return}for(;U<ue.generatedLine;)L.add(B()),U++;if(q<ue.generatedColumn){var _e=N[V]||"";L.add(_e.substr(0,ue.generatedColumn)),N[V]=_e.substr(ue.generatedColumn),q=ue.generatedColumn}ee=ue},this),V<N.length&&(ee&&le(ee,B()),L.add(N.splice(V).join(""))),F.sources.forEach(function(ue){var _e=F.sourceContentFor(ue);_e!=null&&(E!=null&&(ue=o.join(E,ue)),L.setSourceContent(ue,_e))}),L;function le(ue,_e){if(ue===null||ue.source===void 0)L.add(_e);else{var ie=E?o.join(E,ue.source):ue.source;L.add(new A(ue.originalLine,ue.originalColumn,ie,_e,ue.name))}}},A.prototype.add=function($){if(Array.isArray($))$.forEach(function(F){this.add(F)},this);else if($[O]||typeof $=="string")$&&this.children.push($);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+$);return this},A.prototype.prepend=function($){if(Array.isArray($))for(var F=$.length-1;F>=0;F--)this.prepend($[F]);else if($[O]||typeof $=="string")this.children.unshift($);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+$);return this},A.prototype.walk=function($){for(var F,E=0,L=this.children.length;E<L;E++)F=this.children[E],F[O]?F.walk($):F!==""&&$(F,{source:this.source,line:this.line,column:this.column,name:this.name})},A.prototype.join=function($){var F,E,L=this.children.length;if(L>0){for(F=[],E=0;E<L-1;E++)F.push(this.children[E]),F.push($);F.push(this.children[E]),this.children=F}return this},A.prototype.replaceRight=function($,F){var E=this.children[this.children.length-1];return E[O]?E.replaceRight($,F):typeof E=="string"?this.children[this.children.length-1]=E.replace($,F):this.children.push("".replace($,F)),this},A.prototype.setSourceContent=function($,F){this.sourceContents[o.toSetString($)]=F},A.prototype.walkSourceContents=function($){for(var F=0,E=this.children.length;F<E;F++)this.children[F][O]&&this.children[F].walkSourceContents($);for(var L=Object.keys(this.sourceContents),F=0,E=L.length;F<E;F++)$(o.fromSetString(L[F]),this.sourceContents[L[F]])},A.prototype.toString=function(){var $="";return this.walk(function(F){$+=F}),$},A.prototype.toStringWithSourceMap=function($){var F={code:"",line:1,column:0},E=new e($),L=!1,N=null,V=null,B=null,U=null;return this.walk(function(q,ee){F.code+=q,ee.source!==null&&ee.line!==null&&ee.column!==null?((N!==ee.source||V!==ee.line||B!==ee.column||U!==ee.name)&&E.addMapping({source:ee.source,original:{line:ee.line,column:ee.column},generated:{line:F.line,column:F.column},name:ee.name}),N=ee.source,V=ee.line,B=ee.column,U=ee.name,L=!0):L&&(E.addMapping({generated:{line:F.line,column:F.column}}),N=null,L=!1);for(var le=0,ue=q.length;le<ue;le++)q.charCodeAt(le)===d?(F.line++,F.column=0,le+1===ue?(N=null,L=!1):L&&E.addMapping({source:ee.source,original:{line:ee.line,column:ee.column},generated:{line:F.line,column:F.column},name:ee.name})):F.column++}),this.walkSourceContents(function(q,ee){E.setSourceContent(q,ee)}),{code:F.code,map:E}},sourceNode.SourceNode=A,sourceNode}var hasRequiredSourceMap;function requireSourceMap(){return hasRequiredSourceMap||(hasRequiredSourceMap=1,sourceMap.SourceMapGenerator=requireSourceMapGenerator().SourceMapGenerator,sourceMap.SourceMapConsumer=requireSourceMapConsumer().SourceMapConsumer,sourceMap.SourceNode=requireSourceNode().SourceNode),sourceMap}const version="2.1.0",require$$3={version};var hasRequiredEscodegen;function requireEscodegen(){return hasRequiredEscodegen||(hasRequiredEscodegen=1,(function(e){(function(){var o,l,d,O,A,S,$,F,E,L,N,V,B,U,q,ee,le,ue,_e,ie,ae,fe,Oe,ve,Re,Me;A=requireEstraverse(),S=requireUtils(),o=A.Syntax;function Ye(I){return ct.Expression.hasOwnProperty(I.type)}function Te(I){return ct.Statement.hasOwnProperty(I.type)}l={Sequence:0,Yield:1,Assignment:1,Conditional:2,ArrowFunction:2,Coalesce:3,LogicalOR:4,LogicalAND:5,BitwiseOR:6,BitwiseXOR:7,BitwiseAND:8,Equality:9,Relational:10,BitwiseSHIFT:11,Additive:12,Multiplicative:13,Exponentiation:14,Await:15,Unary:15,Postfix:16,OptionalChaining:17,Call:18,New:19,TaggedTemplate:20,Member:21,Primary:22},d={"??":l.Coalesce,"||":l.LogicalOR,"&&":l.LogicalAND,"|":l.BitwiseOR,"^":l.BitwiseXOR,"&":l.BitwiseAND,"==":l.Equality,"!=":l.Equality,"===":l.Equality,"!==":l.Equality,is:l.Equality,isnt:l.Equality,"<":l.Relational,">":l.Relational,"<=":l.Relational,">=":l.Relational,in:l.Relational,instanceof:l.Relational,"<<":l.BitwiseSHIFT,">>":l.BitwiseSHIFT,">>>":l.BitwiseSHIFT,"+":l.Additive,"-":l.Additive,"*":l.Multiplicative,"%":l.Multiplicative,"/":l.Multiplicative,"**":l.Exponentiation};var Ge=1,Ne=2,Je=4,je=8,qe=16,et=32,Tt=64,Rt=Ne|Je,Qt=Ge|Ne,Fe=Ge|Ne|Je,pt=Ge,we=Je,xt=Ge|Je,Ct=Ge,Ze=Ge|et,St=0,Lt=Ge|qe,cn=Ge|je;function sn(){return{indent:null,base:null,parse:null,comment:!1,format:{indent:{style:"    ",base:0,adjustMultilineComment:!1},newline:`
`,space:" ",json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0,safeConcatenation:!1,preserveBlankLines:!1},moz:{comprehensionExpressionStartsWithAssignment:!1,starlessGenerator:!1},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:!1,directive:!1,raw:!0,verbatim:null,sourceCode:null}}function Xt(I,re){var te="";for(re|=0;re>0;re>>>=1,I+=I)re&1&&(te+=I);return te}function on(I){return/[\r\n]/g.test(I)}function bt(I){var re=I.length;return re&&S.code.isLineTerminator(I.charCodeAt(re-1))}function un(I,re){var te;for(te in re)re.hasOwnProperty(te)&&(I[te]=re[te]);return I}function jt(I,re){var te,se;function pe(Pe){return typeof Pe=="object"&&Pe instanceof Object&&!(Pe instanceof RegExp)}for(te in re)re.hasOwnProperty(te)&&(se=re[te],pe(se)?pe(I[te])?jt(I[te],se):I[te]=jt({},se):I[te]=se);return I}function rn(I){var re,te,se,pe,Pe;if(I!==I)throw new Error("Numeric literal whose value is NaN");if(I<0||I===0&&1/I<0)throw new Error("Numeric literal whose value is negative");if(I===1/0)return E?"null":L?"1e400":"1e+400";if(re=""+I,!L||re.length<3)return re;for(te=re.indexOf("."),!E&&re.charCodeAt(0)===48&&te===1&&(te=0,re=re.slice(1)),se=re,re=re.replace("e+","e"),pe=0,(Pe=se.indexOf("e"))>0&&(pe=+se.slice(Pe+1),se=se.slice(0,Pe)),te>=0&&(pe-=se.length-te-1,se=+(se.slice(0,te)+se.slice(te+1))+""),Pe=0;se.charCodeAt(se.length+Pe-1)===48;)--Pe;return Pe!==0&&(pe-=Pe,se=se.slice(0,Pe)),pe!==0&&(se+="e"+pe),(se.length<re.length||N&&I>1e12&&Math.floor(I)===I&&(se="0x"+I.toString(16)).length<re.length)&&+se===I&&(re=se),re}function $n(I,re){return(I&-2)===8232?(re?"u":"\\u")+(I===8232?"2028":"2029"):I===10||I===13?(re?"":"\\")+(I===10?"n":"r"):String.fromCharCode(I)}function Ae(I){var re,te,se,pe,Pe,$e,Le,it;if(te=I.toString(),I.source){if(re=te.match(/\/([^/]*)$/),!re)return te;for(se=re[1],te="",Le=!1,it=!1,pe=0,Pe=I.source.length;pe<Pe;++pe)$e=I.source.charCodeAt(pe),it?(te+=$n($e,it),it=!1):(Le?$e===93&&(Le=!1):$e===47?te+="\\":$e===91&&(Le=!0),te+=$n($e,it),it=$e===92);return"/"+te+"/"+se}return te}function xe(I,re){var te;return I===8?"\\b":I===12?"\\f":I===9?"\\t":(te=I.toString(16).toUpperCase(),E||I>255?"\\u"+"0000".slice(te.length)+te:I===0&&!S.code.isDecimalDigit(re)?"\\0":I===11?"\\x0B":"\\x"+"00".slice(te.length)+te)}function ye(I){if(I===92)return"\\\\";if(I===10)return"\\n";if(I===13)return"\\r";if(I===8232)return"\\u2028";if(I===8233)return"\\u2029";throw new Error("Incorrectly classified character")}function ke(I){var re,te,se,pe;for(pe=V==="double"?'"':"'",re=0,te=I.length;re<te;++re)if(se=I.charCodeAt(re),se===39){pe='"';break}else if(se===34){pe="'";break}else se===92&&++re;return pe+I+pe}function Qe(I){var re="",te,se,pe,Pe=0,$e=0,Le,it;for(te=0,se=I.length;te<se;++te){if(pe=I.charCodeAt(te),pe===39)++Pe;else if(pe===34)++$e;else if(pe===47&&E)re+="\\";else if(S.code.isLineTerminator(pe)||pe===92){re+=ye(pe);continue}else if(!S.code.isIdentifierPartES5(pe)&&(E&&pe<32||!E&&!B&&(pe<32||pe>126))){re+=xe(pe,I.charCodeAt(te+1));continue}re+=String.fromCharCode(pe)}if(Le=!(V==="double"||V==="auto"&&$e<Pe),it=Le?"'":'"',!(Le?Pe:$e))return it+re+it;for(I=re,re=it,te=0,se=I.length;te<se;++te)pe=I.charCodeAt(te),(pe===39&&Le||pe===34&&!Le)&&(re+="\\"),re+=String.fromCharCode(pe);return re+it}function Ue(I){var re,te,se,pe="";for(re=0,te=I.length;re<te;++re)se=I[re],pe+=Array.isArray(se)?Ue(se):se;return pe}function Xe(I,re){if(!fe)return Array.isArray(I)?Ue(I):I;if(re==null){if(I instanceof O)return I;re={}}return re.loc==null?new O(null,null,fe,I,re.name||null):new O(re.loc.start.line,re.loc.start.column,fe===!0?re.loc.source||null:fe,I,re.name||null)}function ut(){return q||" "}function Ie(I,re){var te,se,pe,Pe;return te=Xe(I).toString(),te.length===0?[re]:(se=Xe(re).toString(),se.length===0?[I]:(pe=te.charCodeAt(te.length-1),Pe=se.charCodeAt(0),(pe===43||pe===45)&&pe===Pe||S.code.isIdentifierPartES5(pe)&&S.code.isIdentifierPartES5(Pe)||pe===47&&Pe===105?[I,ut(),re]:S.code.isWhiteSpace(pe)||S.code.isLineTerminator(pe)||S.code.isWhiteSpace(Pe)||S.code.isLineTerminator(Pe)?[I,re]:[I,q,re]))}function at(I){return[$,I]}function ft(I){var re;re=$,$+=F,I($),$=re}function Vt(I){var re;for(re=I.length-1;re>=0&&!S.code.isLineTerminator(I.charCodeAt(re));--re);return I.length-1-re}function Wt(I,re){var te,se,pe,Pe,$e,Le,it,Dt;for(te=I.split(/\r\n|[\r\n]/),Le=Number.MAX_VALUE,se=1,pe=te.length;se<pe;++se){for(Pe=te[se],$e=0;$e<Pe.length&&S.code.isWhiteSpace(Pe.charCodeAt($e));)++$e;Le>$e&&(Le=$e)}for(typeof re<"u"?(it=$,te[1][Le]==="*"&&(re+=" "),$=re):(Le&1&&--Le,it=$),se=1,pe=te.length;se<pe;++se)Dt=Xe(at(te[se].slice(Le))),te[se]=fe?Dt.join(""):Dt;return $=it,te.join(`
`)}function Pt(I,re){if(I.type==="Line"){if(bt(I.value))return"//"+I.value;var te="//"+I.value;return ve||(te+=`
`),te}return ie.format.indent.adjustMultilineComment&&/[\n\r]/.test(I.value)?Wt("/*"+I.value+"*/",re):"/*"+I.value+"*/"}function kt(I,re){var te,se,pe,Pe,$e,Le,it,Dt,en,vt,mi,Xn,Ki,Dn;if(I.leadingComments&&I.leadingComments.length>0){if(Pe=re,ve){for(pe=I.leadingComments[0],re=[],Dt=pe.extendedRange,en=pe.range,mi=Oe.substring(Dt[0],en[0]),Dn=(mi.match(/\n/g)||[]).length,Dn>0?(re.push(Xt(`
`,Dn)),re.push(at(Pt(pe)))):(re.push(mi),re.push(Pt(pe))),vt=en,te=1,se=I.leadingComments.length;te<se;te++)pe=I.leadingComments[te],en=pe.range,Xn=Oe.substring(vt[1],en[0]),Dn=(Xn.match(/\n/g)||[]).length,re.push(Xt(`
`,Dn)),re.push(at(Pt(pe))),vt=en;Ki=Oe.substring(en[1],Dt[1]),Dn=(Ki.match(/\n/g)||[]).length,re.push(Xt(`
`,Dn))}else for(pe=I.leadingComments[0],re=[],ue&&I.type===o.Program&&I.body.length===0&&re.push(`
`),re.push(Pt(pe)),bt(Xe(re).toString())||re.push(`
`),te=1,se=I.leadingComments.length;te<se;++te)pe=I.leadingComments[te],it=[Pt(pe)],bt(Xe(it).toString())||it.push(`
`),re.push(at(it));re.push(at(Pe))}if(I.trailingComments)if(ve)pe=I.trailingComments[0],Dt=pe.extendedRange,en=pe.range,mi=Oe.substring(Dt[0],en[0]),Dn=(mi.match(/\n/g)||[]).length,Dn>0?(re.push(Xt(`
`,Dn)),re.push(at(Pt(pe)))):(re.push(mi),re.push(Pt(pe)));else for($e=!bt(Xe(re).toString()),Le=Xt(" ",Vt(Xe([$,re,F]).toString())),te=0,se=I.trailingComments.length;te<se;++te)pe=I.trailingComments[te],$e?(te===0?re=[re,F]:re=[re,Le],re.push(Pt(pe,Le))):re=[re,at(Pt(pe))],te!==se-1&&!bt(Xe(re).toString())&&(re=[re,`
`]);return re}function an(I,re,te){var se,pe=0;for(se=I;se<re;se++)Oe[se]===`
`&&pe++;for(se=1;se<pe;se++)te.push(U)}function Be(I,re,te){return re<te?["(",I,")"]:I}function Ft(I){var re,te,se;for(se=I.split(/\r\n|\n/),re=1,te=se.length;re<te;re++)se[re]=U+$+se[re];return se}function hn(I,re){var te,se,pe;return te=I[ie.verbatim],typeof te=="string"?se=Be(Ft(te),l.Sequence,re):(se=Ft(te.content),pe=te.precedence!=null?te.precedence:l.Sequence,se=Be(se,pe,re)),Xe(se,I)}function ct(){}ct.prototype.maybeBlock=function(I,re){var te,se,pe=this;return se=!ie.comment||!I.leadingComments,I.type===o.BlockStatement&&se?[q,this.generateStatement(I,re)]:I.type===o.EmptyStatement&&se?";":(ft(function(){te=[U,at(pe.generateStatement(I,re))]}),te)},ct.prototype.maybeBlockSuffix=function(I,re){var te=bt(Xe(re).toString());return I.type===o.BlockStatement&&(!ie.comment||!I.leadingComments)&&!te?[re,q]:te?[re,$]:[re,U,$]};function At(I){return Xe(I.name,I)}function Nt(I,re){return I.async?"async"+(re?ut():q):""}function zt(I){var re=I.generator&&!ie.moz.starlessGenerator;return re?"*"+q:""}function fn(I){var re=I.value,te="";return re.async&&(te+=Nt(re,!I.computed)),re.generator&&(te+=zt(re)?"*":""),te}ct.prototype.generatePattern=function(I,re,te){return I.type===o.Identifier?At(I):this.generateExpression(I,re,te)},ct.prototype.generateFunctionParams=function(I){var re,te,se,pe;if(pe=!1,I.type===o.ArrowFunctionExpression&&!I.rest&&(!I.defaults||I.defaults.length===0)&&I.params.length===1&&I.params[0].type===o.Identifier)se=[Nt(I,!0),At(I.params[0])];else{for(se=I.type===o.ArrowFunctionExpression?[Nt(I,!1)]:[],se.push("("),I.defaults&&(pe=!0),re=0,te=I.params.length;re<te;++re)pe&&I.defaults[re]?se.push(this.generateAssignment(I.params[re],I.defaults[re],"=",l.Assignment,Fe)):se.push(this.generatePattern(I.params[re],l.Assignment,Fe)),re+1<te&&se.push(","+q);I.rest&&(I.params.length&&se.push(","+q),se.push("..."),se.push(At(I.rest))),se.push(")")}return se},ct.prototype.generateFunctionBody=function(I){var re,te;return re=this.generateFunctionParams(I),I.type===o.ArrowFunctionExpression&&(re.push(q),re.push("=>")),I.expression?(re.push(q),te=this.generateExpression(I.body,l.Assignment,Fe),te.toString().charAt(0)==="{"&&(te=["(",te,")"]),re.push(te)):re.push(this.maybeBlock(I.body,cn)),re},ct.prototype.generateIterationForStatement=function(I,re,te){var se=["for"+(re.await?ut()+"await":"")+q+"("],pe=this;return ft(function(){re.left.type===o.VariableDeclaration?ft(function(){se.push(re.left.kind+ut()),se.push(pe.generateStatement(re.left.declarations[0],St))}):se.push(pe.generateExpression(re.left,l.Call,Fe)),se=Ie(se,I),se=[Ie(se,pe.generateExpression(re.right,l.Assignment,Fe)),")"]}),se.push(this.maybeBlock(re.body,te)),se},ct.prototype.generatePropertyKey=function(I,re){var te=[];return re&&te.push("["),te.push(this.generateExpression(I,l.Assignment,Fe)),re&&te.push("]"),te},ct.prototype.generateAssignment=function(I,re,te,se,pe){return l.Assignment<se&&(pe|=Ge),Be([this.generateExpression(I,l.Call,pe),q+te+q,this.generateExpression(re,l.Assignment,pe)],l.Assignment,se)},ct.prototype.semicolon=function(I){return!le&&I&et?"":";"},ct.Statement={BlockStatement:function(I,re){var te,se,pe=["{",U],Pe=this;return ft(function(){I.body.length===0&&ve&&(te=I.range,te[1]-te[0]>2&&(se=Oe.substring(te[0]+1,te[1]-1),se[0]===`
`&&(pe=["{"]),pe.push(se)));var $e,Le,it,Dt;for(Dt=Ct,re&je&&(Dt|=qe),$e=0,Le=I.body.length;$e<Le;++$e)ve&&($e===0&&(I.body[0].leadingComments&&(te=I.body[0].leadingComments[0].extendedRange,se=Oe.substring(te[0],te[1]),se[0]===`
`&&(pe=["{"])),I.body[0].leadingComments||an(I.range[0],I.body[0].range[0],pe)),$e>0&&!I.body[$e-1].trailingComments&&!I.body[$e].leadingComments&&an(I.body[$e-1].range[1],I.body[$e].range[0],pe)),$e===Le-1&&(Dt|=et),I.body[$e].leadingComments&&ve?it=Pe.generateStatement(I.body[$e],Dt):it=at(Pe.generateStatement(I.body[$e],Dt)),pe.push(it),bt(Xe(it).toString())||ve&&$e<Le-1&&I.body[$e+1].leadingComments||pe.push(U),ve&&$e===Le-1&&(I.body[$e].trailingComments||an(I.body[$e].range[1],I.range[1],pe))}),pe.push(at("}")),pe},BreakStatement:function(I,re){return I.label?"break "+I.label.name+this.semicolon(re):"break"+this.semicolon(re)},ContinueStatement:function(I,re){return I.label?"continue "+I.label.name+this.semicolon(re):"continue"+this.semicolon(re)},ClassBody:function(I,re){var te=["{",U],se=this;return ft(function(pe){var Pe,$e;for(Pe=0,$e=I.body.length;Pe<$e;++Pe)te.push(pe),te.push(se.generateExpression(I.body[Pe],l.Sequence,Fe)),Pe+1<$e&&te.push(U)}),bt(Xe(te).toString())||te.push(U),te.push($),te.push("}"),te},ClassDeclaration:function(I,re){var te,se;return te=["class"],I.id&&(te=Ie(te,this.generateExpression(I.id,l.Sequence,Fe))),I.superClass&&(se=Ie("extends",this.generateExpression(I.superClass,l.Unary,Fe)),te=Ie(te,se)),te.push(q),te.push(this.generateStatement(I.body,Ze)),te},DirectiveStatement:function(I,re){return ie.raw&&I.raw?I.raw+this.semicolon(re):ke(I.directive)+this.semicolon(re)},DoWhileStatement:function(I,re){var te=Ie("do",this.maybeBlock(I.body,Ct));return te=this.maybeBlockSuffix(I.body,te),Ie(te,["while"+q+"(",this.generateExpression(I.test,l.Sequence,Fe),")"+this.semicolon(re)])},CatchClause:function(I,re){var te,se=this;return ft(function(){var pe;I.param?(te=["catch"+q+"(",se.generateExpression(I.param,l.Sequence,Fe),")"],I.guard&&(pe=se.generateExpression(I.guard,l.Sequence,Fe),te.splice(2,0," if ",pe))):te=["catch"]}),te.push(this.maybeBlock(I.body,Ct)),te},DebuggerStatement:function(I,re){return"debugger"+this.semicolon(re)},EmptyStatement:function(I,re){return";"},ExportDefaultDeclaration:function(I,re){var te=["export"],se;return se=re&et?Ze:Ct,te=Ie(te,"default"),Te(I.declaration)?te=Ie(te,this.generateStatement(I.declaration,se)):te=Ie(te,this.generateExpression(I.declaration,l.Assignment,Fe)+this.semicolon(re)),te},ExportNamedDeclaration:function(I,re){var te=["export"],se,pe=this;return se=re&et?Ze:Ct,I.declaration?Ie(te,this.generateStatement(I.declaration,se)):(I.specifiers&&(I.specifiers.length===0?te=Ie(te,"{"+q+"}"):I.specifiers[0].type===o.ExportBatchSpecifier?te=Ie(te,this.generateExpression(I.specifiers[0],l.Sequence,Fe)):(te=Ie(te,"{"),ft(function(Pe){var $e,Le;for(te.push(U),$e=0,Le=I.specifiers.length;$e<Le;++$e)te.push(Pe),te.push(pe.generateExpression(I.specifiers[$e],l.Sequence,Fe)),$e+1<Le&&te.push(","+U)}),bt(Xe(te).toString())||te.push(U),te.push($+"}")),I.source?te=Ie(te,["from"+q,this.generateExpression(I.source,l.Sequence,Fe),this.semicolon(re)]):te.push(this.semicolon(re))),te)},ExportAllDeclaration:function(I,re){return["export"+q,"*"+q,"from"+q,this.generateExpression(I.source,l.Sequence,Fe),this.semicolon(re)]},ExpressionStatement:function(I,re){var te,se;function pe(Le){var it;return Le.slice(0,5)!=="class"?!1:(it=Le.charCodeAt(5),it===123||S.code.isWhiteSpace(it)||S.code.isLineTerminator(it))}function Pe(Le){var it;return Le.slice(0,8)!=="function"?!1:(it=Le.charCodeAt(8),it===40||S.code.isWhiteSpace(it)||it===42||S.code.isLineTerminator(it))}function $e(Le){var it,Dt,en;if(Le.slice(0,5)!=="async"||!S.code.isWhiteSpace(Le.charCodeAt(5)))return!1;for(Dt=6,en=Le.length;Dt<en&&S.code.isWhiteSpace(Le.charCodeAt(Dt));++Dt);return Dt===en||Le.slice(Dt,Dt+8)!=="function"?!1:(it=Le.charCodeAt(Dt+8),it===40||S.code.isWhiteSpace(it)||it===42||S.code.isLineTerminator(it))}return te=[this.generateExpression(I.expression,l.Sequence,Fe)],se=Xe(te).toString(),se.charCodeAt(0)===123||pe(se)||Pe(se)||$e(se)||_e&&re&qe&&I.expression.type===o.Literal&&typeof I.expression.value=="string"?te=["(",te,")"+this.semicolon(re)]:te.push(this.semicolon(re)),te},ImportDeclaration:function(I,re){var te,se,pe=this;return I.specifiers.length===0?["import",q,this.generateExpression(I.source,l.Sequence,Fe),this.semicolon(re)]:(te=["import"],se=0,I.specifiers[se].type===o.ImportDefaultSpecifier&&(te=Ie(te,[this.generateExpression(I.specifiers[se],l.Sequence,Fe)]),++se),I.specifiers[se]&&(se!==0&&te.push(","),I.specifiers[se].type===o.ImportNamespaceSpecifier?te=Ie(te,[q,this.generateExpression(I.specifiers[se],l.Sequence,Fe)]):(te.push(q+"{"),I.specifiers.length-se===1?(te.push(q),te.push(this.generateExpression(I.specifiers[se],l.Sequence,Fe)),te.push(q+"}"+q)):(ft(function(Pe){var $e,Le;for(te.push(U),$e=se,Le=I.specifiers.length;$e<Le;++$e)te.push(Pe),te.push(pe.generateExpression(I.specifiers[$e],l.Sequence,Fe)),$e+1<Le&&te.push(","+U)}),bt(Xe(te).toString())||te.push(U),te.push($+"}"+q)))),te=Ie(te,["from"+q,this.generateExpression(I.source,l.Sequence,Fe),this.semicolon(re)]),te)},VariableDeclarator:function(I,re){var te=re&Ge?Fe:Rt;return I.init?[this.generateExpression(I.id,l.Assignment,te),q,"=",q,this.generateExpression(I.init,l.Assignment,te)]:this.generatePattern(I.id,l.Assignment,te)},VariableDeclaration:function(I,re){var te,se,pe,Pe,$e,Le=this;te=[I.kind],$e=re&Ge?Ct:St;function it(){for(Pe=I.declarations[0],ie.comment&&Pe.leadingComments?(te.push(`
`),te.push(at(Le.generateStatement(Pe,$e)))):(te.push(ut()),te.push(Le.generateStatement(Pe,$e))),se=1,pe=I.declarations.length;se<pe;++se)Pe=I.declarations[se],ie.comment&&Pe.leadingComments?(te.push(","+U),te.push(at(Le.generateStatement(Pe,$e)))):(te.push(","+q),te.push(Le.generateStatement(Pe,$e)))}return I.declarations.length>1?ft(it):it(),te.push(this.semicolon(re)),te},ThrowStatement:function(I,re){return[Ie("throw",this.generateExpression(I.argument,l.Sequence,Fe)),this.semicolon(re)]},TryStatement:function(I,re){var te,se,pe,Pe;if(te=["try",this.maybeBlock(I.block,Ct)],te=this.maybeBlockSuffix(I.block,te),I.handlers)for(se=0,pe=I.handlers.length;se<pe;++se)te=Ie(te,this.generateStatement(I.handlers[se],Ct)),(I.finalizer||se+1!==pe)&&(te=this.maybeBlockSuffix(I.handlers[se].body,te));else{for(Pe=I.guardedHandlers||[],se=0,pe=Pe.length;se<pe;++se)te=Ie(te,this.generateStatement(Pe[se],Ct)),(I.finalizer||se+1!==pe)&&(te=this.maybeBlockSuffix(Pe[se].body,te));if(I.handler)if(Array.isArray(I.handler))for(se=0,pe=I.handler.length;se<pe;++se)te=Ie(te,this.generateStatement(I.handler[se],Ct)),(I.finalizer||se+1!==pe)&&(te=this.maybeBlockSuffix(I.handler[se].body,te));else te=Ie(te,this.generateStatement(I.handler,Ct)),I.finalizer&&(te=this.maybeBlockSuffix(I.handler.body,te))}return I.finalizer&&(te=Ie(te,["finally",this.maybeBlock(I.finalizer,Ct)])),te},SwitchStatement:function(I,re){var te,se,pe,Pe,$e,Le=this;if(ft(function(){te=["switch"+q+"(",Le.generateExpression(I.discriminant,l.Sequence,Fe),")"+q+"{"+U]}),I.cases)for($e=Ct,pe=0,Pe=I.cases.length;pe<Pe;++pe)pe===Pe-1&&($e|=et),se=at(this.generateStatement(I.cases[pe],$e)),te.push(se),bt(Xe(se).toString())||te.push(U);return te.push(at("}")),te},SwitchCase:function(I,re){var te,se,pe,Pe,$e,Le=this;return ft(function(){for(I.test?te=[Ie("case",Le.generateExpression(I.test,l.Sequence,Fe)),":"]:te=["default:"],pe=0,Pe=I.consequent.length,Pe&&I.consequent[0].type===o.BlockStatement&&(se=Le.maybeBlock(I.consequent[0],Ct),te.push(se),pe=1),pe!==Pe&&!bt(Xe(te).toString())&&te.push(U),$e=Ct;pe<Pe;++pe)pe===Pe-1&&re&et&&($e|=et),se=at(Le.generateStatement(I.consequent[pe],$e)),te.push(se),pe+1!==Pe&&!bt(Xe(se).toString())&&te.push(U)}),te},IfStatement:function(I,re){var te,se,pe,Pe=this;return ft(function(){te=["if"+q+"(",Pe.generateExpression(I.test,l.Sequence,Fe),")"]}),pe=re&et,se=Ct,pe&&(se|=et),I.alternate?(te.push(this.maybeBlock(I.consequent,Ct)),te=this.maybeBlockSuffix(I.consequent,te),I.alternate.type===o.IfStatement?te=Ie(te,["else ",this.generateStatement(I.alternate,se)]):te=Ie(te,Ie("else",this.maybeBlock(I.alternate,se)))):te.push(this.maybeBlock(I.consequent,se)),te},ForStatement:function(I,re){var te,se=this;return ft(function(){te=["for"+q+"("],I.init?I.init.type===o.VariableDeclaration?te.push(se.generateStatement(I.init,St)):(te.push(se.generateExpression(I.init,l.Sequence,Rt)),te.push(";")):te.push(";"),I.test&&(te.push(q),te.push(se.generateExpression(I.test,l.Sequence,Fe))),te.push(";"),I.update&&(te.push(q),te.push(se.generateExpression(I.update,l.Sequence,Fe))),te.push(")")}),te.push(this.maybeBlock(I.body,re&et?Ze:Ct)),te},ForInStatement:function(I,re){return this.generateIterationForStatement("in",I,re&et?Ze:Ct)},ForOfStatement:function(I,re){return this.generateIterationForStatement("of",I,re&et?Ze:Ct)},LabeledStatement:function(I,re){return[I.label.name+":",this.maybeBlock(I.body,re&et?Ze:Ct)]},Program:function(I,re){var te,se,pe,Pe,$e;for(Pe=I.body.length,te=[ue&&Pe>0?`
`:""],$e=Lt,pe=0;pe<Pe;++pe)!ue&&pe===Pe-1&&($e|=et),ve&&(pe===0&&(I.body[0].leadingComments||an(I.range[0],I.body[pe].range[0],te)),pe>0&&!I.body[pe-1].trailingComments&&!I.body[pe].leadingComments&&an(I.body[pe-1].range[1],I.body[pe].range[0],te)),se=at(this.generateStatement(I.body[pe],$e)),te.push(se),pe+1<Pe&&!bt(Xe(se).toString())&&(ve&&I.body[pe+1].leadingComments||te.push(U)),ve&&pe===Pe-1&&(I.body[pe].trailingComments||an(I.body[pe].range[1],I.range[1],te));return te},FunctionDeclaration:function(I,re){return[Nt(I,!0),"function",zt(I)||ut(),I.id?At(I.id):"",this.generateFunctionBody(I)]},ReturnStatement:function(I,re){return I.argument?[Ie("return",this.generateExpression(I.argument,l.Sequence,Fe)),this.semicolon(re)]:["return"+this.semicolon(re)]},WhileStatement:function(I,re){var te,se=this;return ft(function(){te=["while"+q+"(",se.generateExpression(I.test,l.Sequence,Fe),")"]}),te.push(this.maybeBlock(I.body,re&et?Ze:Ct)),te},WithStatement:function(I,re){var te,se=this;return ft(function(){te=["with"+q+"(",se.generateExpression(I.object,l.Sequence,Fe),")"]}),te.push(this.maybeBlock(I.body,re&et?Ze:Ct)),te}},un(ct.prototype,ct.Statement),ct.Expression={SequenceExpression:function(I,re,te){var se,pe,Pe;for(l.Sequence<re&&(te|=Ge),se=[],pe=0,Pe=I.expressions.length;pe<Pe;++pe)se.push(this.generateExpression(I.expressions[pe],l.Assignment,te)),pe+1<Pe&&se.push(","+q);return Be(se,l.Sequence,re)},AssignmentExpression:function(I,re,te){return this.generateAssignment(I.left,I.right,I.operator,re,te)},ArrowFunctionExpression:function(I,re,te){return Be(this.generateFunctionBody(I),l.ArrowFunction,re)},ConditionalExpression:function(I,re,te){return l.Conditional<re&&(te|=Ge),Be([this.generateExpression(I.test,l.Coalesce,te),q+"?"+q,this.generateExpression(I.consequent,l.Assignment,te),q+":"+q,this.generateExpression(I.alternate,l.Assignment,te)],l.Conditional,re)},LogicalExpression:function(I,re,te){return I.operator==="??"&&(te|=Tt),this.BinaryExpression(I,re,te)},BinaryExpression:function(I,re,te){var se,pe,Pe,$e,Le,it;return $e=d[I.operator],pe=I.operator==="**"?l.Postfix:$e,Pe=I.operator==="**"?$e:$e+1,$e<re&&(te|=Ge),Le=this.generateExpression(I.left,pe,te),it=Le.toString(),it.charCodeAt(it.length-1)===47&&S.code.isIdentifierPartES5(I.operator.charCodeAt(0))?se=[Le,ut(),I.operator]:se=Ie(Le,I.operator),Le=this.generateExpression(I.right,Pe,te),I.operator==="/"&&Le.toString().charAt(0)==="/"||I.operator.slice(-1)==="<"&&Le.toString().slice(0,3)==="!--"?(se.push(ut()),se.push(Le)):se=Ie(se,Le),I.operator==="in"&&!(te&Ge)?["(",se,")"]:(I.operator==="||"||I.operator==="&&")&&te&Tt?["(",se,")"]:Be(se,$e,re)},CallExpression:function(I,re,te){var se,pe,Pe;for(se=[this.generateExpression(I.callee,l.Call,Qt)],I.optional&&se.push("?."),se.push("("),pe=0,Pe=I.arguments.length;pe<Pe;++pe)se.push(this.generateExpression(I.arguments[pe],l.Assignment,Fe)),pe+1<Pe&&se.push(","+q);return se.push(")"),te&Ne?Be(se,l.Call,re):["(",se,")"]},ChainExpression:function(I,re,te){l.OptionalChaining<re&&(te|=Ne);var se=this.generateExpression(I.expression,l.OptionalChaining,te);return Be(se,l.OptionalChaining,re)},NewExpression:function(I,re,te){var se,pe,Pe,$e,Le;if(pe=I.arguments.length,Le=te&Je&&!ee&&pe===0?xt:pt,se=Ie("new",this.generateExpression(I.callee,l.New,Le)),!(te&Je)||ee||pe>0){for(se.push("("),Pe=0,$e=pe;Pe<$e;++Pe)se.push(this.generateExpression(I.arguments[Pe],l.Assignment,Fe)),Pe+1<$e&&se.push(","+q);se.push(")")}return Be(se,l.New,re)},MemberExpression:function(I,re,te){var se,pe;return se=[this.generateExpression(I.object,l.Call,te&Ne?Qt:pt)],I.computed?(I.optional&&se.push("?."),se.push("["),se.push(this.generateExpression(I.property,l.Sequence,te&Ne?Fe:xt)),se.push("]")):(!I.optional&&I.object.type===o.Literal&&typeof I.object.value=="number"&&(pe=Xe(se).toString(),pe.indexOf(".")<0&&!/[eExX]/.test(pe)&&S.code.isDecimalDigit(pe.charCodeAt(pe.length-1))&&!(pe.length>=2&&pe.charCodeAt(0)===48)&&se.push(" ")),se.push(I.optional?"?.":"."),se.push(At(I.property))),Be(se,l.Member,re)},MetaProperty:function(I,re,te){var se;return se=[],se.push(typeof I.meta=="string"?I.meta:At(I.meta)),se.push("."),se.push(typeof I.property=="string"?I.property:At(I.property)),Be(se,l.Member,re)},UnaryExpression:function(I,re,te){var se,pe,Pe,$e,Le;return pe=this.generateExpression(I.argument,l.Unary,Fe),q===""?se=Ie(I.operator,pe):(se=[I.operator],I.operator.length>2?se=Ie(se,pe):($e=Xe(se).toString(),Le=$e.charCodeAt($e.length-1),Pe=pe.toString().charCodeAt(0),((Le===43||Le===45)&&Le===Pe||S.code.isIdentifierPartES5(Le)&&S.code.isIdentifierPartES5(Pe))&&se.push(ut()),se.push(pe))),Be(se,l.Unary,re)},YieldExpression:function(I,re,te){var se;return I.delegate?se="yield*":se="yield",I.argument&&(se=Ie(se,this.generateExpression(I.argument,l.Yield,Fe))),Be(se,l.Yield,re)},AwaitExpression:function(I,re,te){var se=Ie(I.all?"await*":"await",this.generateExpression(I.argument,l.Await,Fe));return Be(se,l.Await,re)},UpdateExpression:function(I,re,te){return I.prefix?Be([I.operator,this.generateExpression(I.argument,l.Unary,Fe)],l.Unary,re):Be([this.generateExpression(I.argument,l.Postfix,Fe),I.operator],l.Postfix,re)},FunctionExpression:function(I,re,te){var se=[Nt(I,!0),"function"];return I.id?(se.push(zt(I)||ut()),se.push(At(I.id))):se.push(zt(I)||q),se.push(this.generateFunctionBody(I)),se},ArrayPattern:function(I,re,te){return this.ArrayExpression(I,re,te,!0)},ArrayExpression:function(I,re,te,se){var pe,Pe,$e=this;return I.elements.length?(Pe=se?!1:I.elements.length>1,pe=["[",Pe?U:""],ft(function(Le){var it,Dt;for(it=0,Dt=I.elements.length;it<Dt;++it)I.elements[it]?(pe.push(Pe?Le:""),pe.push($e.generateExpression(I.elements[it],l.Assignment,Fe))):(Pe&&pe.push(Le),it+1===Dt&&pe.push(",")),it+1<Dt&&pe.push(","+(Pe?U:q))}),Pe&&!bt(Xe(pe).toString())&&pe.push(U),pe.push(Pe?$:""),pe.push("]"),pe):"[]"},RestElement:function(I,re,te){return"..."+this.generatePattern(I.argument)},ClassExpression:function(I,re,te){var se,pe;return se=["class"],I.id&&(se=Ie(se,this.generateExpression(I.id,l.Sequence,Fe))),I.superClass&&(pe=Ie("extends",this.generateExpression(I.superClass,l.Unary,Fe)),se=Ie(se,pe)),se.push(q),se.push(this.generateStatement(I.body,Ze)),se},MethodDefinition:function(I,re,te){var se,pe;return I.static?se=["static"+q]:se=[],I.kind==="get"||I.kind==="set"?pe=[Ie(I.kind,this.generatePropertyKey(I.key,I.computed)),this.generateFunctionBody(I.value)]:pe=[fn(I),this.generatePropertyKey(I.key,I.computed),this.generateFunctionBody(I.value)],Ie(se,pe)},Property:function(I,re,te){return I.kind==="get"||I.kind==="set"?[I.kind,ut(),this.generatePropertyKey(I.key,I.computed),this.generateFunctionBody(I.value)]:I.shorthand?I.value.type==="AssignmentPattern"?this.AssignmentPattern(I.value,l.Sequence,Fe):this.generatePropertyKey(I.key,I.computed):I.method?[fn(I),this.generatePropertyKey(I.key,I.computed),this.generateFunctionBody(I.value)]:[this.generatePropertyKey(I.key,I.computed),":"+q,this.generateExpression(I.value,l.Assignment,Fe)]},ObjectExpression:function(I,re,te){var se,pe,Pe,$e=this;return I.properties.length?(se=I.properties.length>1,ft(function(){Pe=$e.generateExpression(I.properties[0],l.Sequence,Fe)}),!se&&!on(Xe(Pe).toString())?["{",q,Pe,q,"}"]:(ft(function(Le){var it,Dt;if(pe=["{",U,Le,Pe],se)for(pe.push(","+U),it=1,Dt=I.properties.length;it<Dt;++it)pe.push(Le),pe.push($e.generateExpression(I.properties[it],l.Sequence,Fe)),it+1<Dt&&pe.push(","+U)}),bt(Xe(pe).toString())||pe.push(U),pe.push($),pe.push("}"),pe)):"{}"},AssignmentPattern:function(I,re,te){return this.generateAssignment(I.left,I.right,"=",re,te)},ObjectPattern:function(I,re,te){var se,pe,Pe,$e,Le,it=this;if(!I.properties.length)return"{}";if($e=!1,I.properties.length===1)Le=I.properties[0],Le.type===o.Property&&Le.value.type!==o.Identifier&&($e=!0);else for(pe=0,Pe=I.properties.length;pe<Pe;++pe)if(Le=I.properties[pe],Le.type===o.Property&&!Le.shorthand){$e=!0;break}return se=["{",$e?U:""],ft(function(Dt){var en,vt;for(en=0,vt=I.properties.length;en<vt;++en)se.push($e?Dt:""),se.push(it.generateExpression(I.properties[en],l.Sequence,Fe)),en+1<vt&&se.push(","+($e?U:q))}),$e&&!bt(Xe(se).toString())&&se.push(U),se.push($e?$:""),se.push("}"),se},ThisExpression:function(I,re,te){return"this"},Super:function(I,re,te){return"super"},Identifier:function(I,re,te){return At(I)},ImportDefaultSpecifier:function(I,re,te){return At(I.id||I.local)},ImportNamespaceSpecifier:function(I,re,te){var se=["*"],pe=I.id||I.local;return pe&&se.push(q+"as"+ut()+At(pe)),se},ImportSpecifier:function(I,re,te){var se=I.imported,pe=[se.name],Pe=I.local;return Pe&&Pe.name!==se.name&&pe.push(ut()+"as"+ut()+At(Pe)),pe},ExportSpecifier:function(I,re,te){var se=I.local,pe=[se.name],Pe=I.exported;return Pe&&Pe.name!==se.name&&pe.push(ut()+"as"+ut()+At(Pe)),pe},Literal:function(I,re,te){var se;if(I.hasOwnProperty("raw")&&ae&&ie.raw)try{if(se=ae(I.raw).body[0].expression,se.type===o.Literal&&se.value===I.value)return I.raw}catch{}return I.regex?"/"+I.regex.pattern+"/"+I.regex.flags:typeof I.value=="bigint"?I.value.toString()+"n":I.bigint?I.bigint+"n":I.value===null?"null":typeof I.value=="string"?Qe(I.value):typeof I.value=="number"?rn(I.value):typeof I.value=="boolean"?I.value?"true":"false":Ae(I.value)},GeneratorExpression:function(I,re,te){return this.ComprehensionExpression(I,re,te)},ComprehensionExpression:function(I,re,te){var se,pe,Pe,$e,Le=this;return se=I.type===o.GeneratorExpression?["("]:["["],ie.moz.comprehensionExpressionStartsWithAssignment&&($e=this.generateExpression(I.body,l.Assignment,Fe),se.push($e)),I.blocks&&ft(function(){for(pe=0,Pe=I.blocks.length;pe<Pe;++pe)$e=Le.generateExpression(I.blocks[pe],l.Sequence,Fe),pe>0||ie.moz.comprehensionExpressionStartsWithAssignment?se=Ie(se,$e):se.push($e)}),I.filter&&(se=Ie(se,"if"+q),$e=this.generateExpression(I.filter,l.Sequence,Fe),se=Ie(se,["(",$e,")"])),ie.moz.comprehensionExpressionStartsWithAssignment||($e=this.generateExpression(I.body,l.Assignment,Fe),se=Ie(se,$e)),se.push(I.type===o.GeneratorExpression?")":"]"),se},ComprehensionBlock:function(I,re,te){var se;return I.left.type===o.VariableDeclaration?se=[I.left.kind,ut(),this.generateStatement(I.left.declarations[0],St)]:se=this.generateExpression(I.left,l.Call,Fe),se=Ie(se,I.of?"of":"in"),se=Ie(se,this.generateExpression(I.right,l.Sequence,Fe)),["for"+q+"(",se,")"]},SpreadElement:function(I,re,te){return["...",this.generateExpression(I.argument,l.Assignment,Fe)]},TaggedTemplateExpression:function(I,re,te){var se=Qt;te&Ne||(se=pt);var pe=[this.generateExpression(I.tag,l.Call,se),this.generateExpression(I.quasi,l.Primary,we)];return Be(pe,l.TaggedTemplate,re)},TemplateElement:function(I,re,te){return I.value.raw},TemplateLiteral:function(I,re,te){var se,pe,Pe;for(se=["`"],pe=0,Pe=I.quasis.length;pe<Pe;++pe)se.push(this.generateExpression(I.quasis[pe],l.Primary,Fe)),pe+1<Pe&&(se.push("${"+q),se.push(this.generateExpression(I.expressions[pe],l.Sequence,Fe)),se.push(q+"}"));return se.push("`"),se},ModuleSpecifier:function(I,re,te){return this.Literal(I,re,te)},ImportExpression:function(I,re,te){return Be(["import(",this.generateExpression(I.source,l.Assignment,Fe),")"],l.Call,re)}},un(ct.prototype,ct.Expression),ct.prototype.generateExpression=function(I,re,te){var se,pe;return pe=I.type||o.Property,ie.verbatim&&I.hasOwnProperty(ie.verbatim)?hn(I,re):(se=this[pe](I,re,te),ie.comment&&(se=kt(I,se)),Xe(se,I))},ct.prototype.generateStatement=function(I,re){var te,se;return te=this[I.type](I,re),ie.comment&&(te=kt(I,te)),se=Xe(te).toString(),I.type===o.Program&&!ue&&U===""&&se.charAt(se.length-1)===`
`&&(te=fe?Xe(te).replaceRight(/\s+$/,""):se.replace(/\s+$/,"")),Xe(te,I)};function Cn(I){var re;if(re=new ct,Te(I))return re.generateStatement(I,Ct);if(Ye(I))return re.generateExpression(I,l.Sequence,Fe);throw new Error("Unknown node type: "+I.type)}function dn(I,re){var te=sn(),se,pe;return re!=null?(typeof re.indent=="string"&&(te.format.indent.style=re.indent),typeof re.base=="number"&&(te.format.indent.base=re.base),re=jt(te,re),F=re.format.indent.style,typeof re.base=="string"?$=re.base:$=Xt(F,re.format.indent.base)):(re=te,F=re.format.indent.style,$=Xt(F,re.format.indent.base)),E=re.format.json,L=re.format.renumber,N=E?!1:re.format.hexadecimal,V=E?"double":re.format.quotes,B=re.format.escapeless,U=re.format.newline,q=re.format.space,re.format.compact&&(U=q=F=$=""),ee=re.format.parentheses,le=re.format.semicolons,ue=re.format.safeConcatenation,_e=re.directive,ae=E?null:re.parse,fe=re.sourceMap,Oe=re.sourceCode,ve=re.format.preserveBlankLines&&Oe!==null,ie=re,fe&&(e.browser?O=commonjsGlobal.sourceMap.SourceNode:O=requireSourceMap().SourceNode),se=Cn(I),fe?(pe=se.toStringWithSourceMap({file:re.file,sourceRoot:re.sourceMapRoot}),re.sourceContent&&pe.map.setSourceContent(re.sourceMap,re.sourceContent),re.sourceMapWithCode?pe:pe.map.toString()):(pe={code:se.toString(),map:null},re.sourceMapWithCode?pe:pe.code)}Re={indent:{style:"",base:0},renumber:!0,hexadecimal:!0,quotes:"auto",escapeless:!0,compact:!0,parentheses:!1,semicolons:!1},Me=sn().format,e.version=require$$3.version,e.generate=dn,e.attachComments=A.attachComments,e.Precedence=jt({},l),e.browser=!1,e.FORMAT_MINIFY=Re,e.FORMAT_DEFAULTS=Me})()})(escodegen$1)),escodegen$1}var escodegenExports=requireEscodegen();const escodegen=getDefaultExportFromCjs(escodegenExports);class WalkerBase{constructor(){this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.context={skip:()=>this.should_skip=!0,remove:()=>this.should_remove=!0,replace:o=>this.replacement=o}}replace(o,l,d,O){o&&l&&(d!=null?o[l][d]=O:o[l]=O)}remove(o,l,d){o&&l&&(d!=null?o[l].splice(d,1):delete o[l])}}class SyncWalker extends WalkerBase{constructor(o,l){super(),this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.context={skip:()=>this.should_skip=!0,remove:()=>this.should_remove=!0,replace:d=>this.replacement=d},this.enter=o,this.leave=l}visit(o,l,d,O){if(o){if(this.enter){const S=this.should_skip,$=this.should_remove,F=this.replacement;this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.enter.call(this.context,o,l,d,O),this.replacement&&(o=this.replacement,this.replace(l,d,O,o)),this.should_remove&&this.remove(l,d,O);const E=this.should_skip,L=this.should_remove;if(this.should_skip=S,this.should_remove=$,this.replacement=F,E)return o;if(L)return null}let A;for(A in o){const S=o[A];if(S&&typeof S=="object")if(Array.isArray(S)){const $=S;for(let F=0;F<$.length;F+=1){const E=$[F];isNode(E)&&(this.visit(E,o,A,F)||F--)}}else isNode(S)&&this.visit(S,o,A,null)}if(this.leave){const S=this.replacement,$=this.should_remove;this.replacement=null,this.should_remove=!1,this.leave.call(this.context,o,l,d,O),this.replacement&&(o=this.replacement,this.replace(l,d,O,o)),this.should_remove&&this.remove(l,d,O);const F=this.should_remove;if(this.replacement=S,this.should_remove=$,F)return null}}return o}}function isNode(e){return e!==null&&typeof e=="object"&&"type"in e&&typeof e.type=="string"}function walk(e,{enter:o,leave:l}){return new SyncWalker(o,l).visit(e,null)}let widgetMethods=[],languages=new Map;function transpiler(e,o={}){const{wrapAsync:l=!1,addReturn:d=!0,emitMiniLocations:O=!0,emitWidgets:A=!0}=o;let S=parse$a(e,{ecmaVersion:2022,allowAwaitOutsideFunction:!0,locations:!0}),$=[];const F=(V,B)=>{const U=languages.get("minilang");if(U){const q=`[${V}]`,ee=U.getLocations(q,B.start);$=$.concat(ee)}else{const q=getLeafLocations(`"${V}"`,B.start,e);$=$.concat(q)}};let E=[];walk(S,{enter(V,B){if(isLanguageLiteral(V)){const{name:U}=V.tag,q=languages.get(U),ee=V.quasi.quasis[0].value.raw,le=V.quasi.start+1;if(O){const ue=q.getLocations(ee,le);$=$.concat(ue)}return this.skip(),this.replace(languageWithLocation(U,ee,le))}if(isTemplateLiteral(V,"tidal")){const U=V.quasi.quasis[0].value.raw,q=V.quasi.start+1;if(O){const ee=collectHaskellMiniLocations(U,q);$=$.concat(ee)}return this.skip(),this.replace(tidalWithLocation(U,q))}if(isBackTickString(V,B)){const{quasis:U}=V,{raw:q}=U[0].value;return this.skip(),O&&F(q,V),this.replace(miniWithLocation(q,V))}if(isStringWithDoubleQuotes(V)){const{value:U}=V;return this.skip(),O&&F(U,V),this.replace(miniWithLocation(U,V))}if(isSliderFunction(V))return A&&E.push({from:V.arguments[0].start,to:V.arguments[0].end,value:V.arguments[0].raw,min:V.arguments[1]?.value??0,max:V.arguments[2]?.value??1,step:V.arguments[3]?.value,type:"slider"}),this.replace(sliderWithLocation(V));if(isWidgetMethod(V)){const U=V.callee.property.name,q=E.filter(le=>le.type===U).length,ee={to:V.end,index:q,type:U,id:o.id};return A&&E.push(ee),this.replace(widgetWithLocation(V,ee))}if(isBareSamplesCall(V,B))return this.replace(withAwait(V));if(isLabelStatement(V))return this.replace(labelToP(V))},leave(V,B,U,q){}});let{body:L}=S;if(!L.length)console.warn("empty body -> fallback to silence"),L.push({type:"ExpressionStatement",expression:{type:"Identifier",name:"silence"}});else if(!L?.[L.length-1]?.expression)throw new Error("unexpected ast format without body expression");if(d){const{expression:V}=L[L.length-1];L[L.length-1]={type:"ReturnStatement",argument:V}}let N=escodegen.generate(S);return l&&(N=`(async ()=>{${N}})()`),O?{output:N,miniLocations:$,widgets:E}:{output:N}}function isStringWithDoubleQuotes(e,o,l){return e.type!=="Literal"?!1:e.raw[0]==='"'}function isBackTickString(e,o){return e.type==="TemplateLiteral"&&o.type!=="TaggedTemplateExpression"}function miniWithLocation(e,o){const{start:l}=o,d=languages.get("minilang");let O="m";return d&&d.name&&(O=d.name),{type:"CallExpression",callee:{type:"Identifier",name:O},arguments:[{type:"Literal",value:e},{type:"Literal",value:l}],optional:!1}}function isSliderFunction(e){return e.type==="CallExpression"&&e.callee.name==="slider"}function isWidgetMethod(e){return e.type==="CallExpression"&&widgetMethods.includes(e.callee.property?.name)}function sliderWithLocation(e){const o="slider_"+e.arguments[0].start;return e.arguments.unshift({type:"Literal",value:o,raw:o}),e.callee.name="sliderWithID",e}function getWidgetID(e){return`${e.id||""}_widget_${e.type}_${e.index}`}function widgetWithLocation(e,o){const l=getWidgetID(o);return e.arguments.unshift({type:"Literal",value:l,raw:l}),e}function isBareSamplesCall(e,o){return e.type==="CallExpression"&&e.callee.name==="samples"&&o.type!=="AwaitExpression"}function withAwait(e){return{type:"AwaitExpression",argument:e}}function isLabelStatement(e){return e.type==="LabeledStatement"}function labelToP(e){return{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"MemberExpression",object:e.body.expression,property:{type:"Identifier",name:"p"}},arguments:[{type:"Literal",value:e.label.name,raw:`'${e.label.name}'`}]}}}function isLanguageLiteral(e){return e.type==="TaggedTemplateExpression"&&languages.has(e.tag.name)}function isTemplateLiteral(e,o){return e.type==="TaggedTemplateExpression"&&e.tag.name===o}function collectHaskellMiniLocations(e,o){return e.split("").reduce((l,d,O)=>(d!=='"'||(!l.length||l[l.length-1].length>1?l.push([O+1]):l[l.length-1].push(O)),l),[]).map(([l,d])=>{const O=e.slice(l,d);return getLeafLocations(`"${O}"`,o+l-1)}).flat()}function tidalWithLocation(e,o){return{type:"CallExpression",callee:{type:"Identifier",name:"tidal"},arguments:[{type:"Literal",value:e},{type:"Literal",value:o}],optional:!1}}function languageWithLocation(e,o,l){return{type:"CallExpression",callee:{type:"Identifier",name:e},arguments:[{type:"Literal",value:o},{type:"Literal",value:l}],optional:!1}}const gm={gm_piano:["0000_JCLive_sf2_file","0000_FluidR3_GM_sf2_file","0000_Aspirin_sf2_file","0000_Chaos_sf2_file","0000_GeneralUserGS_sf2_file","0001_FluidR3_GM_sf2_file","0001_GeneralUserGS_sf2_file","0010_Aspirin_sf2_file","0010_Chaos_sf2_file","0010_FluidR3_GM_sf2_file","0010_GeneralUserGS_sf2_file","0010_JCLive_sf2_file","0011_Aspirin_sf2_file","0011_FluidR3_GM_sf2_file","0011_GeneralUserGS_sf2_file","0012_GeneralUserGS_sf2_file","0020_Aspirin_sf2_file","0020_Chaos_sf2_file","0020_FluidR3_GM_sf2_file","0020_GeneralUserGS_sf2_file","0020_JCLive_sf2_file","0021_Aspirin_sf2_file","0021_GeneralUserGS_sf2_file","0022_Aspirin_sf2_file","0030_Aspirin_sf2_file","0030_Chaos_sf2_file","0030_FluidR3_GM_sf2_file","0030_GeneralUserGS_sf2_file","0030_JCLive_sf2_file","0031_Aspirin_sf2_file","0031_FluidR3_GM_sf2_file","0031_GeneralUserGS_sf2_file"],gm_epiano1:["0040_JCLive_sf2_file","0040_FluidR3_GM_sf2_file","0040_Aspirin_sf2_file","0040_Chaos_sf2_file","0040_GeneralUserGS_sf2_file","0041_FluidR3_GM_sf2_file","0041_GeneralUserGS_sf2_file","0042_GeneralUserGS_sf2_file","0043_GeneralUserGS_sf2_file","0044_GeneralUserGS_sf2_file","0046_GeneralUserGS_sf2_file"],gm_epiano2:["0050_JCLive_sf2_file","0050_FluidR3_GM_sf2_file","0050_Aspirin_sf2_file","0050_Chaos_sf2_file","0050_GeneralUserGS_sf2_file","0051_FluidR3_GM_sf2_file","0051_GeneralUserGS_sf2_file","0053_GeneralUserGS_sf2_file","0054_GeneralUserGS_sf2_file"],gm_harpsichord:["0060_JCLive_sf2_file","0060_FluidR3_GM_sf2_file","0060_Aspirin_sf2_file","0060_Chaos_sf2_file","0060_GeneralUserGS_sf2_file","0061_Aspirin_sf2_file","0061_GeneralUserGS_sf2_file","0062_GeneralUserGS_sf2_file"],gm_clavinet:["0070_JCLive_sf2_file","0070_FluidR3_GM_sf2_file","0070_Aspirin_sf2_file","0070_Chaos_sf2_file"],gm_celesta:["0080_JCLive_sf2_file","0080_Aspirin_sf2_file","0080_Chaos_sf2_file","0080_FluidR3_GM_sf2_file","0080_GeneralUserGS_sf2_file","0081_FluidR3_GM_sf2_file"],gm_glockenspiel:["0090_JCLive_sf2_file","0090_Aspirin_sf2_file","0090_Chaos_sf2_file","0090_FluidR3_GM_sf2_file","0090_GeneralUserGS_sf2_file"],gm_music_box:["0100_JCLive_sf2_file","0100_Aspirin_sf2_file","0100_Chaos_sf2_file","0100_FluidR3_GM_sf2_file","0100_GeneralUserGS_sf2_file"],gm_vibraphone:["0110_JCLive_sf2_file","0110_Aspirin_sf2_file","0110_Chaos_sf2_file","0110_FluidR3_GM_sf2_file","0110_GeneralUserGS_sf2_file","0111_FluidR3_GM_sf2_file"],gm_marimba:["0120_JCLive_sf2_file","0120_Aspirin_sf2_file","0120_Chaos_sf2_file","0120_FluidR3_GM_sf2_file","0120_GeneralUserGS_sf2_file","0121_FluidR3_GM_sf2_file","0121_GeneralUserGS_sf2_file"],gm_xylophone:["0130_JCLive_sf2_file","0130_Aspirin_sf2_file","0130_Chaos_sf2_file","0130_FluidR3_GM_sf2_file","0130_GeneralUserGS_sf2_file","0131_FluidR3_GM_sf2_file"],gm_tubular_bells:["0140_JCLive_sf2_file","0140_Aspirin_sf2_file","0140_FluidR3_GM_sf2_file","0140_GeneralUserGS_sf2_file","0141_FluidR3_GM_sf2_file","0142_GeneralUserGS_sf2_file"],gm_dulcimer:["0150_Aspirin_sf2_file","0150_Chaos_sf2_file","0150_FluidR3_GM_sf2_file","0150_GeneralUserGS_sf2_file","0151_FluidR3_GM_sf2_file"],gm_drawbar_organ:["0160_JCLive_sf2_file","0160_Aspirin_sf2_file","0160_Chaos_sf2_file","0160_FluidR3_GM_sf2_file","0160_GeneralUserGS_sf2_file","0161_Aspirin_sf2_file","0161_FluidR3_GM_sf2_file"],gm_percussive_organ:["0170_JCLive_sf2_file","0170_Aspirin_sf2_file","0170_Chaos_sf2_file","0170_FluidR3_GM_sf2_file","0171_FluidR3_GM_sf2_file","0172_FluidR3_GM_sf2_file"],gm_rock_organ:["0180_JCLive_sf2_file","0180_Aspirin_sf2_file","0180_Chaos_sf2_file","0180_FluidR3_GM_sf2_file","0180_GeneralUserGS_sf2_file"],gm_church_organ:["0190_JCLive_sf2_file","0190_Aspirin_sf2_file","0190_Chaos_sf2_file","0190_FluidR3_GM_sf2_file","0190_GeneralUserGS_sf2_file"],gm_reed_organ:["0200_JCLive_sf2_file","0200_Aspirin_sf2_file","0200_Chaos_sf2_file","0200_FluidR3_GM_sf2_file","0200_GeneralUserGS_sf2_file","0201_Aspirin_sf2_file","0201_FluidR3_GM_sf2_file","0201_GeneralUserGS_sf2_file"],gm_accordion:["0210_JCLive_sf2_file","0210_FluidR3_GM_sf2_file","0210_GeneralUserGS_sf2_file","0211_Aspirin_sf2_file","0211_FluidR3_GM_sf2_file","0211_GeneralUserGS_sf2_file","0212_GeneralUserGS_sf2_file"],gm_harmonica:["0220_FluidR3_GM_sf2_file","0220_JCLive_sf2_file","0220_Aspirin_sf2_file","0220_Chaos_sf2_file","0220_GeneralUserGS_sf2_file","0221_FluidR3_GM_sf2_file"],gm_bandoneon:["0230_Aspirin_sf2_file","0230_JCLive_sf2_file","0230_Chaos_sf2_file","0230_FluidR3_GM_sf2_file","0230_GeneralUserGS_sf2_file","0231_FluidR3_GM_sf2_file","0231_GeneralUserGS_sf2_file","0231_JCLive_sf2_file","0232_FluidR3_GM_sf2_file","0233_FluidR3_GM_sf2_file"],gm_acoustic_guitar_nylon:["0240_JCLive_sf2_file","0240_Aspirin_sf2_file","0240_Chaos_sf2_file","0240_FluidR3_GM_sf2_file","0240_GeneralUserGS_sf2_file","0240_LK_Godin_Nylon_SF2_file","0241_JCLive_sf2_file","0242_JCLive_sf2_file","0243_JCLive_sf2_file"],gm_acoustic_guitar_steel:["0253_Acoustic_Guitar_sf2_file","0250_Aspirin_sf2_file","0250_Chaos_sf2_file","0250_FluidR3_GM_sf2_file","0250_GeneralUserGS_sf2_file","0250_LK_AcousticSteel_SF2_file","0253_Acoustic_Guitar_sf2_file","0253_GeneralUserGS_sf2_file","0254_Acoustic_Guitar_sf2_file","0254_GeneralUserGS_sf2_file"],gm_electric_guitar_jazz:["0260_JCLive_sf2_file","0260_Aspirin_sf2_file","0260_Chaos_sf2_file","0260_FluidR3_GM_sf2_file","0260_GeneralUserGS_sf2_file","0260_Stratocaster_sf2_file","0261_GeneralUserGS_sf2_file","0261_Stratocaster_sf2_file","0262_Stratocaster_sf2_file"],gm_electric_guitar_clean:["0270_Aspirin_sf2_file","0270_Chaos_sf2_file","0270_FluidR3_GM_sf2_file","0270_GeneralUserGS_sf2_file","0270_SBAWE32_sf2_file","0270_Stratocaster_sf2_file","0271_GeneralUserGS_sf2_file","0271_Stratocaster_sf2_file","0272_Stratocaster_sf2_file"],gm_electric_guitar_muted:["0280_Aspirin_sf2_file","0280_Chaos_sf2_file","0280_GeneralUserGS_sf2_file","0280_JCLive_sf2_file","0280_LesPaul_sf2_file","0280_SBAWE32_sf2_file","0281_Aspirin_sf2_file","0281_FluidR3_GM_sf2_file","0281_GeneralUserGS_sf2_file","0282_FluidR3_GM_sf2_file"],gm_overdriven_guitar:["0290_FluidR3_GM_sf2_file","0290_Aspirin_sf2_file","0290_Chaos_sf2_file","0290_GeneralUserGS_sf2_file","0290_LesPaul_sf2_file","0290_SBAWE32_sf2_file","0291_LesPaul_sf2_file","0291_SBAWE32_sf2_file","0292_Aspirin_sf2_file","0292_LesPaul_sf2_file"],gm_distortion_guitar:["0300_FluidR3_GM_sf2_file","0300_Aspirin_sf2_file","0300_Chaos_sf2_file","0300_GeneralUserGS_sf2_file","0300_LesPaul_sf2_file","0302_Aspirin_sf2_file","0304_Aspirin_sf2_file"],gm_guitar_harmonics:["0310_Aspirin_sf2_file","0310_FluidR3_GM_sf2_file","0310_Chaos_sf2_file"],gm_acoustic_bass:["0320_JCLive_sf2_file","0320_FluidR3_GM_sf2_file","0320_Aspirin_sf2_file","0320_Chaos_sf2_file"],gm_electric_bass_finger:["0330_JCLive_sf2_file","0330_FluidR3_GM_sf2_fible","0330_Aspirin_sf2_file","0330_GeneralUserGS_sf2_file"],gm_electric_bass_pick:["0340_JCLive_sf2_file","0340_FluidR3_GM_sf2_file","0340_Aspirin_sf2_file","0340_GeneralUserGS_sf2_file","0341_Aspirin_sf2_file"],gm_fretless_bass:["0350_Aspirin_sf2_file","0350_JCLive_sf2_file"],gm_slap_bass_1:["0360_Aspirin_sf2_file","0360_JCLive_sf2_file","0360_FluidR3_GM_sf2_file","0360_Chaos_sf2_file"],gm_slap_bass_2:["0370_Aspirin_sf2_file","0370_FluidR3_GM_sf2_file","0370_GeneralUserGS_sf2_fil e","0370_JCLive_sf2_file"],gm_synth_bass_1:["0380_Chaos_sf2_file","0380_FluidR3_GM_sf2_file","0380_JCLive_sf2_file","0381_FluidR3_GM_sf2_file","0381_GeneralUserGS_sf2_file","0382_GeneralUserGS_sf2_file","0383_GeneralUserGS_sf2_file","0384_GeneralUserGS_sf2_file","0387_GeneralUserGS_sf2_file"],gm_synth_bass_2:["0390_Aspirin_sf2_file","0390_FluidR3_GM_sf2_file","0390_GeneralUserGS_sf2_file","0390_JCLive_sf2_file","0391_FluidR3_GM_sf2_file","0392_FluidR3_GM_sf2_file","0393_GeneralUserGS_sf2_file"],gm_violin:["0400_Aspirin_sf2_file","0400_Chaos_sf2_file","0400_JCLive_sf2_file","0400_FluidR3_GM_sf2_file","0400_GeneralUserGS_sf2_file","0401_Aspirin_sf2_file","0401_FluidR3_GM_sf2_file","0401_GeneralUserGS_sf2_file","0402_GeneralUserGS_sf2_file"],gm_viola:["0410_Aspirin_sf2_file","0410_FluidR3_GM_sf2_file","0410_GeneralUserGS_sf2_file","0410_JCLive_sf2_file","0411_FluidR3_GM_sf2_file"],gm_cello:["0420_Aspirin_sf2_file","0420_FluidR3_GM_sf2_file","0420_GeneralUserGS_sf2_file","0420_JCLive_sf2_file","0421_FluidR3_GM_sf2_file","0421_GeneralUserGS_sf2_file"],gm_contrabass:["0430_Aspirin_sf2_file","0430_Chaos_sf2_file","0430_GeneralUserGS_sf2_file"],gm_tremolo_strings:["0440_Aspirin_sf2_file","0440_Chaos_sf2_file","0440_GeneralUserGS_sf2_file","0440_JCLive_sf2_file","0441_GeneralUserGS_sf2_file","0442_GeneralUserGS_sf2_file"],gm_pizzicato_strings:["0450_Aspirin_sf2_file","0450_Chaos_sf2_file","0450_FluidR3_GM_sf2_file","0450_GeneralUserGS_sf2_file","0450_JCLive_sf2_file","0451_FluidR3_GM_sf2_file"],gm_orchestral_harp:["0460_Aspirin_sf2_file","0460_FluidR3_GM_sf2_file","0460_GeneralUserGS_sf2_file","0460_JCLive_sf2_file","0461_FluidR3_GM_sf2_file"],gm_timpani:["0470_Aspirin_sf2_file","0470_Chaos_sf2_file","0470_FluidR3_GM_sf2_file","0470_GeneralUserGS_sf2_file","0471_FluidR3_GM_sf2_file","0471_GeneralUserGS_sf2_file"],gm_string_ensemble_1:["0480_Aspirin_sf2_file","0480_Chaos_sf2_file","0480_FluidR3_GM_sf2_file","0480_GeneralUserGS_sf2_file","0480_JCLive_sf2_file","0481_Aspirin_sf2_file","0481_FluidR3_GM_sf2_file","0481_GeneralUserGS_sf2_file","0482_Aspirin_sf2_file","0482_GeneralUserGS_sf2_file","0483_GeneralUserGS_sf2_file"],gm_string_ensemble_2:["0490_Aspirin_sf2_file","0490_Chaos_sf2_file","0490_FluidR3_GM_sf2_file","0490_GeneralUserGS_sf2_file","0490_JCLive_sf2_file","0491_GeneralUserGS_sf2_file","0492_GeneralUserGS_sf2_file"],gm_synth_strings_1:["0500_Aspirin_sf2_file","0500_GeneralUserGS_sf2_file","0500_JCLive_sf2_file","0501_FluidR3_GM_sf2_file","0502_GeneralUserGS_sf2_file","0503_FluidR3_GM_sf2_file","0505_FluidR3_GM_sf2_file"],gm_synth_strings_2:["0510_Aspirin_sf2_file","0510_Chaos_sf2_file","0510_GeneralUserGS_sf2_file","0511_GeneralUserGS_sf2_file"],gm_choir_aahs:["0520_Aspirin_sf2_file","0520_Chaos_sf2_file","0520_FluidR3_GM_sf2_file","0520_GeneralUserGS_sf2_file","0520_JCLive_sf2_file","0520_Soul_Ahhs_sf2_file","0521_FluidR3_GM_sf2_file","0521_Soul_Ahhs_sf2_file","0522_Soul_Ahhs_sf2_file"],gm_voice_oohs:["0530_Aspirin_sf2_file","0530_Chaos_sf2_file","0530_FluidR3_GM_sf2_file","0530_GeneralUserGS_sf2_file","0531_FluidR3_GM_sf2_file","0531_JCLive_sf2_file"],gm_synth_choir:["0540_Aspirin_sf2_file","0540_Chaos_sf2_file","0540_FluidR3_GM_sf2_file","0540_GeneralUserGS_sf2_file","0541_FluidR3_GM_sf2_file"],gm_orchestra_hit:["0550_Aspirin_sf2_file","0550_Chaos_sf2_file","0550_FluidR3_GM_sf2_file","0550_GeneralUserGS_sf2_file","0551_FluidR3_GM_sf2_file"],gm_trumpet:["0560_FluidR3_GM_sf2_file","0560_JCLive_sf2_file","0560_Aspirin_sf2_file","0560_Chaos_sf2_file"],gm_trombone:["0570_Aspirin_sf2_file","0570_Chaos_sf2_file","0570_FluidR3_GM_sf2_file","0570_GeneralUserGS_sf2_file","0571_GeneralUserGS_sf2_file"],gm_tuba:["0580_FluidR3_GM_sf2_file","0580_Aspirin_sf2_file","0580_Chaos_sf2_file","0580_GeneralUserGS_sf2_file"],gm_muted_trumpet:["0590_JCLive_sf2_file","0590_Aspirin_sf2_file","0590_Chaos_sf2_file","0590_FluidR3_GM_sf2_file","0590_GeneralUserGS_sf2_file"],gm_french_horn:["0600_Aspirin_sf2_file","0600_FluidR3_GM_sf2_file","0600_GeneralUserGS_sf2_file","0600_JCLive_sf2_file","0601_FluidR3_GM_sf2_file"],gm_brass_section:["0610_JCLive_sf2_file","0610_Aspirin_sf2_file","0610_Chaos_sf2_file","0610_FluidR3_GM_sf2_file","0610_GeneralUserGS_sf2_file"],gm_synth_brass_1:["0620_Aspirin_sf2_file","0620_FluidR3_GM_sf2_file","0621_Aspirin_sf2_file","0621_FluidR3_GM_sf2_file"],gm_synth_brass_2:["0630_Aspirin_sf2_file","0630_Chaos_sf2_file","0630_FluidR3_GM_sf2_file","0630_JCLive_sf2_file","0631_FluidR3_GM_sf2_file","0632_FluidR3_GM_sf2_file","0633_FluidR3_GM_sf2_file"],gm_soprano_sax:["0640_JCLive_sf2_file","0640_Aspirin_sf2_file","0640_Chaos_sf2_file","0640_FluidR3_GM_sf2_file","0641_FluidR3_GM_sf2_file"],gm_alto_sax:["0650_JCLive_sf2_file","0650_Chaos_sf2_file","0650_FluidR3_GM_sf2_file","0650_GeneralUserGS_sf2_file","0651_Aspirin_sf2_file","0651_FluidR3_GM_sf2_file"],gm_tenor_sax:["0660_JCLive_sf2_file","0660_Aspirin_sf2_file","0660_Chaos_sf2_file","0660_GeneralUserGS_sf2_file"],gm_baritone_sax:["0670_JCLive_sf2_file","0670_Aspirin_sf2_file","0670_Chaos_sf2_file","0670_FluidR3_GM_sf2_file","0670_GeneralUserGS_sf2_file","0671_FluidR3_GM_sf2_file"],gm_oboe:["0680_JCLive_sf2_file","0680_Chaos_sf2_file","0680_FluidR3_GM_sf2_file","0680_GeneralUserGS_sf2_file","0681_FluidR3_GM_sf2_file"],gm_english_horn:["0690_JCLive_sf2_file","0690_Aspirin_sf2_file","0690_FluidR3_GM_sf2_file","0691_FluidR3_GM_sf2_file"],gm_bassoon:["0700_JCLive_sf2_file","0700_FluidR3_GM_sf2_file","0700_GeneralUserGS_sf2_file","0701_FluidR3_GM_sf2_file"],gm_clarinet:["0710_JCLive_sf2_file","0710_Aspirin_sf2_file","0710_Chaos_sf2_file","0710_FluidR3_GM_sf2_file","0710_GeneralUserGS_sf2_file","0711_FluidR3_GM_sf2_file"],gm_piccolo:["0720_JCLive_sf2_file","0720_Aspirin_sf2_file","0720_FluidR3_GM_sf2_file","0720_GeneralUserGS_sf2_file","0721_FluidR3_GM_sf2_file"],gm_flute:["0730_JCLive_sf2_file","0730_Aspirin_sf2_file","0730_FluidR3_GM_sf2_file","0730_GeneralUserGS_sf2_file","0731_FluidR3_GM_sf2_file"],gm_recorder:["0740_JCLive_sf2_file","0740_Aspirin_sf2_file","0740_Chaos_sf2_file","0740_FluidR3_GM_sf2_file","0740_GeneralUserGS_sf2_file"],gm_pan_flute:["0750_JCLive_sf2_file","0750_FluidR3_GM_sf2_file","0750_Aspirin_sf2_file","0750_Chaos_sf2_file","0750_GeneralUserGS_sf2_file","0751_Aspirin_sf2_file","0751_FluidR3_GM_sf2_file","0751_GeneralUserGS_sf2_file"],gm_blown_bottle:["0760_FluidR3_GM_sf2_file","0760_JCLive_sf2_file","0760_Chaos_sf2_file","0760_GeneralUserGS_sf2_file","0761_FluidR3_GM_sf2_file"],gm_shakuhachi:["0770_JCLive_sf2_file","0771_FluidR3_GM_sf2_file","0770_Aspirin_sf2_file","0770_FluidR3_GM_sf2_file","0770_GeneralUserGS_sf2_file"],gm_whistle:["0780_FluidR3_GM_sf2_file","0780_JCLive_sf2_file","0780_Aspirin_sf2_file","0780_Chaos_sf2_file"],gm_ocarina:["0790_FluidR3_GM_sf2_file","0790_JCLive_sf2_file","0790_Aspirin_sf2_file","0790_GeneralUserGS_sf2_file"],gm_lead_1_square:["0800_Aspirin_sf2_file","0800_Chaos_sf2_file","0800_FluidR3_GM_sf2_file"],gm_lead_2_sawtooth:["0810_JCLive_sf2_file","0810_Aspirin_sf2_file","0810_Chaos_sf2_file","0810_FluidR3_GM_sf2_file","0810_GeneralUserGS_sf2_file","0811_Aspirin_sf2_file","0811_GeneralUserGS_sf2_file"],gm_lead_3_calliope:["0820_JCLive_sf2_file","0820_Aspirin_sf2_file","0820_Chaos_sf2_file","0820_FluidR3_GM_sf2_file","0820_GeneralUserGS_sf2_file","0821_FluidR3_GM_sf2_file","0821_GeneralUserGS_sf2_file"],gm_lead_4_chiff:["0830_JCLive_sf2_file","0830_Aspirin_sf2_file","0830_FluidR3_GM_sf2_file","0830_GeneralUserGS_sf2_file","0831_FluidR3_GM_sf2_file","0831_GeneralUserGS_sf2_file"],gm_lead_5_charang:["0840_JCLive_sf2_file","0840_FluidR3_GM_sf2_file","0840_Aspirin_sf2_file","0840_Chaos_sf2_file","0840_GeneralUserGS_sf2_file","0841_Aspirin_sf2_file","0841_Chaos_sf2_file","0841_FluidR3_GM_sf2_file","0841_GeneralUserGS_sf2_file","0842_FluidR3_GM_sf2_file"],gm_lead_6_voice:["0850_JCLive_sf2_file","0850_Aspirin_sf2_file","0850_FluidR3_GM_sf2_file","0851_FluidR3_GM_sf2_file","0851_GeneralUserGS_sf2_file","0851_JCLive_sf2_file"],gm_lead_7_fifths:["0860_JCLive_sf2_file","0860_Aspirin_sf2_file","0860_Chaos_sf2_file","0860_GeneralUserGS_sf2_file","0861_Aspirin_sf2_file"],gm_lead_8_bass_lead:["0870_JCLive_sf2_file","0870_Aspirin_sf2_file","0870_Chaos_sf2_file","0870_FluidR3_GM_sf2_file","0870_GeneralUserGS_sf2_file"],gm_pad_new_age:["0880_JCLive_sf2_file","0880_Aspirin_sf2_file","0880_Chaos_sf2_file","0880_FluidR3_GM_sf2_file","0880_GeneralUserGS_sf2_file","0881_Aspirin_sf2_file","0881_FluidR3_GM_sf2_file","0881_GeneralUserGS_sf2_file","0882_Aspirin_sf2_file","0882_GeneralUserGS_sf2_file","0885_GeneralUserGS_sf2_file","0887_GeneralUserGS_sf2_file"],gm_pad_warm:["0890_JCLive_sf2_file","0890_Aspirin_sf2_file","0890_Chaos_sf2_file","0890_FluidR3_GM_sf2_file","0890_GeneralUserGS_sf2_file","0891_Aspirin_sf2_file","0891_FluidR3_GM_sf2_file"],gm_pad_poly:["0900_JCLive_sf2_file","0900_Chaos_sf2_file","0900_FluidR3_GM_sf2_file","0900_GeneralUserGS_sf2_file","0901_Aspirin_sf2_file","0901_FluidR3_GM_sf2_file","0901_GeneralUserGS_sf2_file"],gm_pad_choir:["0910_FluidR3_GM_sf2_file","0910_JCLive_sf2_file","0910_Aspirin_sf2_file","0910_GeneralUserGS_sf2_file","0911_GeneralUserGS_sf2_file","0911_JCLive_sf2_file"],gm_pad_bowed:["0920_JCLive_sf2_file","0920_Aspirin_sf2_file","0920_GeneralUserGS_sf2_file","0921_Aspirin_sf2_file","0921_GeneralUserGS_sf2_file"],gm_pad_metallic:["0930_Aspirin_sf2_file","0930_Chaos_sf2_file","0930_FluidR3_GM_sf2_file","0930_GeneralUserGS_sf2_file","0931_Aspirin_sf2_file","0931_FluidR3_GM_sf2_file","0931_GeneralUserGS_sf2_file"],gm_pad_halo:["0940_Chaos_sf2_file","0940_FluidR3_GM_sf2_file","0940_GeneralUserGS_sf2_file","0940_JCLive_sf2_file","0941_Aspirin_sf2_file","0941_FluidR3_GM_sf2_file","0941_GeneralUserGS_sf2_file","0941_JCLive_sf2_file"],gm_pad_sweep:["0950_Aspirin_sf2_file","0950_Chaos_sf2_file","0950_FluidR3_GM_sf2_file","0950_GeneralUserGS_sf2_file","0950_JCLive_sf2_file","0951_FluidR3_GM_sf2_file","0951_GeneralUserGS_sf2_file"],gm_fx_rain:["0960_FluidR3_GM_sf2_file","0960_Chaos_sf2_file","0960_GeneralUserGS_sf2_file","0961_Aspirin_sf2_file","0961_FluidR3_GM_sf2_file","0962_GeneralUserGS_sf2_file"],gm_fx_soundtrack:["0970_FluidR3_GM_sf2_file","0970_Aspirin_sf2_file","0970_GeneralUserGS_sf2_file","0971_FluidR3_GM_sf2_file","0971_GeneralUserGS_sf2_file"],gm_fx_crystal:["0980_Aspirin_sf2_file","0980_JCLive_sf2_file","0980_Chaos_sf2_file","0980_GeneralUserGS_sf2_file","0981_FluidR3_GM_sf2_file","0981_Aspirin_sf2_file","0981_GeneralUserGS_sf2_file","0982_GeneralUserGS_sf2_file","0983_GeneralUserGS_sf2_file","0984_GeneralUserGS_sf2_file"],gm_fx_atmosphere:["0990_JCLive_sf2_file","0990_Aspirin_sf2_file","0990_Chaos_sf2_file","0990_FluidR3_GM_sf2_file","0990_GeneralUserGS_sf2_file","0991_Aspirin_sf2_file","0991_FluidR3_GM_sf2_file","0991_GeneralUserGS_sf2_file","0991_JCLive_sf2_file","0992_FluidR3_GM_sf2_file","0992_JCLive_sf2_file","0993_JCLive_sf2_file","0994_JCLive_sf2_file"],gm_fx_brightness:["1000_JCLive_sf2_file","1000_Aspirin_sf2_file","1000_Chaos_sf2_file","1000_FluidR3_GM_sf2_file","1000_GeneralUserGS_sf2_file","1001_Aspirin_sf2_file","1001_FluidR3_GM_sf2_file","1001_GeneralUserGS_sf2_file","1001_JCLive_sf2_file","1002_Aspirin_sf2_file","1002_FluidR3_GM_sf2_file","1002_GeneralUserGS_sf2_file"],gm_fx_goblins:["1010_FluidR3_GM_sf2_file","1010_JCLive_sf2_file","1010_Aspirin_sf2_file","1010_Chaos_sf2_file","1010_GeneralUserGS_sf2_file","1011_Aspirin_sf2_file","1011_FluidR3_GM_sf2_file","1011_JCLive_sf2_file","1012_Aspirin_sf2_file"],gm_fx_echoes:["1020_FluidR3_GM_sf2_file","1020_JCLive_sf2_file","1020_Aspirin_sf2_file","1020_Chaos_sf2_file","1020_GeneralUserGS_sf2_file","1021_Aspirin_sf2_file","1021_FluidR3_GM_sf2_file","1021_GeneralUserGS_sf2_file","1021_JCLive_sf2_file","1022_GeneralUserGS_sf2_file"],gm_fx_sci_fi:["1030_FluidR3_GM_sf2_file","1030_Aspirin_sf2_file","1030_Chaos_sf2_file","1030_GeneralUserGS_sf2_file","1030_JCLive_sf2_file","1031_Aspirin_sf2_file","1031_FluidR3_GM_sf2_file","1031_GeneralUserGS_sf2_file","1032_FluidR3_GM_sf2_file"],gm_sitar:["1040_Aspirin_sf2_file","1040_FluidR3_GM_sf2_file","1040_JCLive_sf2_file","1040_Chaos_sf2_file","1040_GeneralUserGS_sf2_file","1041_FluidR3_GM_sf2_file","1041_GeneralUserGS_sf2_file"],gm_banjo:["1050_FluidR3_GM_sf2_file","1050_JCLive_sf2_file","1050_Aspirin_sf2_file","1050_Chaos_sf2_file","1050_GeneralUserGS_sf2_file","1051_GeneralUserGS_sf2_file"],gm_shamisen:["1060_JCLive_sf2_file","1060_FluidR3_GM_sf2_file","1060_Aspirin_sf2_file","1060_Chaos_sf2_file","1060_GeneralUserGS_sf2_file","1061_FluidR3_GM_sf2_file","1061_GeneralUserGS_sf2_file"],gm_koto:["1070_FluidR3_GM_sf2_file","1070_JCLive_sf2_file","1070_Aspirin_sf2_file","1070_Chaos_sf2_file","1070_GeneralUserGS_sf2_file","1071_FluidR3_GM_sf2_file","1071_GeneralUserGS_sf2_file","1072_GeneralUserGS_sf2_file","1073_GeneralUserGS_sf2_file"],gm_kalimba:["1080_JCLive_sf2_file","1080_FluidR3_GM_sf2_file","1080_Aspirin_sf2_file","1080_Chaos_sf2_file","1080_GeneralUserGS_sf2_file"],gm_bagpipe:["1090_Aspirin_sf2_file"],gm_fiddle:["1100_JCLive_sf2_file","1100_Aspirin_sf2_file","1100_Chaos_sf2_file","1100_FluidR3_GM_sf2_file","1100_GeneralUserGS_sf2_file","1101_Aspirin_sf2_file","1101_FluidR3_GM_sf2_file","1101_GeneralUserGS_sf2_file","1102_GeneralUserGS_sf2_file"],gm_shanai:["1110_Aspirin_sf2_file","1110_FluidR3_GM_sf2_file","1110_JCLive_sf2_file","1110_Chaos_sf2_file","1110_GeneralUserGS_sf2_file"],gm_tinkle_bell:["1120_Aspirin_sf2_file"],gm_agogo:["1130_JCLive_sf2_file","1130_Aspirin_sf2_file","1130_Chaos_sf2_file","1130_FluidR3_GM_sf2_file","1130_GeneralUserGS_sf2_file","1131_FluidR3_GM_sf2_file"],gm_steel_drums:["1140_FluidR3_GM_sf2_file","1140_Aspirin_sf2_file","1140_JCLive_sf2_file","1140_Chaos_sf2_file","1140_GeneralUserGS_sf2_file","1141_FluidR3_GM_sf2_file"],gm_woodblock:["1150_JCLive_sf2_file","1150_Aspirin_sf2_file","1150_Chaos_sf2_file","1150_FluidR3_GM_sf2_file","1150_GeneralUserGS_sf2_file","1151_FluidR3_GM_sf2_file","1151_GeneralUserGS_sf2_file","1152_FluidR3_GM_sf2_file","1152_GeneralUserGS_sf2_file"],gm_taiko_drum:["1160_JCLive_sf2_file","1160_FluidR3_GM_sf2_file","1160_Aspirin_sf2_file","1160_Chaos_sf2_file","1160_GeneralUserGS_sf2_file","1161_FluidR3_GM_sf2_file","1161_GeneralUserGS_sf2_file","1162_FluidR3_GM_sf2_file","1162_GeneralUserGS_sf2_file","1163_FluidR3_GM_sf2_file"],gm_melodic_tom:["1170_JCLive_sf2_file","1170_Aspirin_sf2_file","1170_Chaos_sf2_file","1170_FluidR3_GM_sf2_file","1170_GeneralUserGS_sf2_file","1171_FluidR3_GM_sf2_file","1171_GeneralUserGS_sf2_file","1172_FluidR3_GM_sf2_file","1173_FluidR3_GM_sf2_file"],gm_synth_drum:["1180_JCLive_sf2_file","1180_Aspirin_sf2_file","1180_Chaos_sf2_file","1180_FluidR3_GM_sf2_file","1180_GeneralUserGS_sf2_file","1181_FluidR3_GM_sf2_file","1181_GeneralUserGS_sf2_file"],gm_reverse_cymbal:["1190_JCLive_sf2_file","1190_Aspirin_sf2_file","1190_Chaos_sf2_file","1190_FluidR3_GM_sf2_file","1190_GeneralUserGS_sf2_file","1191_GeneralUserGS_sf2_file","1192_GeneralUserGS_sf2_file","1193_GeneralUserGS_sf2_file","1194_GeneralUserGS_sf2_file"],gm_guitar_fret_noise:["1200_JCLive_sf2_file","1200_Aspirin_sf2_file","1200_Chaos_sf2_file","1200_FluidR3_GM_sf2_file","1200_GeneralUserGS_sf2_file","1201_Aspirin_sf2_file","1201_GeneralUserGS_sf2_file","1202_GeneralUserGS_sf2_file"],gm_breath_noise:["1210_FluidR3_GM_sf2_file","1210_JCLive_sf2_file","1210_Aspirin_sf2_file","1210_Chaos_sf2_file","1210_GeneralUserGS_sf2_file","1211_Aspirin_sf2_file","1211_GeneralUserGS_sf2_file","1212_GeneralUserGS_sf2_file"],gm_seashore:["1220_JCLive_sf2_file","1220_Aspirin_sf2_file","1220_Chaos_sf2_file","1220_FluidR3_GM_sf2_file","1220_GeneralUserGS_sf2_file","1221_Aspirin_sf2_file","1221_GeneralUserGS_sf2_file","1221_JCLive_sf2_file","1222_Aspirin_sf2_file","1222_GeneralUserGS_sf2_file","1223_Aspirin_sf2_file","1223_GeneralUserGS_sf2_file","1224_Aspirin_sf2_file","1224_GeneralUserGS_sf2_file","1225_GeneralUserGS_sf2_file","1226_GeneralUserGS_sf2_file"],gm_bird_tweet:["1230_FluidR3_GM_sf2_file","1230_JCLive_sf2_file","1230_Aspirin_sf2_file","1230_GeneralUserGS_sf2_file","1231_GeneralUserGS_sf2_file","1232_GeneralUserGS_sf2_file","1234_GeneralUserGS_sf2_file"],gm_telephone:["1240_JCLive_sf2_file","1240_Aspirin_sf2_file","1240_Chaos_sf2_file","1240_FluidR3_GM_sf2_file","1241_Aspirin_sf2_file","1242_GeneralUserGS_sf2_file","1243_Aspirin_sf2_file","1243_GeneralUserGS_sf2_file","1244_Aspirin_sf2_file","1244_GeneralUserGS_sf2_file"],gm_helicopter:["1250_JCLive_sf2_file","1250_Aspirin_sf2_file","1250_FluidR3_GM_sf2_file","1250_GeneralUserGS_sf2_file","1251_FluidR3_GM_sf2_file","1251_GeneralUserGS_sf2_file","1252_Aspirin_sf2_file","1252_FluidR3_GM_sf2_file","1252_GeneralUserGS_sf2_file","1253_GeneralUserGS_sf2_file","1254_GeneralUserGS_sf2_file","1255_GeneralUserGS_sf2_file","1256_GeneralUserGS_sf2_file","1257_GeneralUserGS_sf2_file","1258_GeneralUserGS_sf2_file","1259_GeneralUserGS_sf2_file"],gm_applause:["1260_JCLive_sf2_file","1260_Aspirin_sf2_file","1260_Chaos_sf2_file","1260_FluidR3_GM_sf2_file","1260_GeneralUserGS_sf2_file","1261_Aspirin_sf2_file","1261_GeneralUserGS_sf2_file","1262_Aspirin_sf2_file","1262_GeneralUserGS_sf2_file","1263_Aspirin_sf2_file","1263_GeneralUserGS_sf2_file","1264_Aspirin_sf2_file","1264_GeneralUserGS_sf2_file","1265_Aspirin_sf2_file","1265_GeneralUserGS_sf2_file"],gm_gunshot:["1270_JCLive_sf2_file","1270_Aspirin_sf2_file","1270_Chaos_sf2_file","1270_FluidR3_GM_sf2_file","1270_GeneralUserGS_sf2_file","1271_Aspirin_sf2_file","1271_GeneralUserGS_sf2_file","1272_Aspirin_sf2_file","1272_GeneralUserGS_sf2_file","1273_GeneralUserGS_sf2_file","1274_GeneralUserGS_sf2_file",""]};let defaultSoundfontUrl="https://felixroos.github.io/webaudiofontdata/sound",soundfontUrl=defaultSoundfontUrl,loadCache={};async function loadFont(name){if(loadCache[name])return loadCache[name];const load=async()=>{const url=`${soundfontUrl}/${name}.js`,preset=await fetch(url).then(e=>e.text());let[_,data]=preset.split("={");return eval("{"+data)};return loadCache[name]=load(),loadCache[name]}async function getFontBufferSource(e,o,l){let{note:d="c3",freq:O}=o,A;if(O)A=freqToMidi$2(O);else if(typeof d=="string")A=noteToMidi$1(d);else if(typeof d=="number")A=d;else throw new Error(`unexpected "note" type "${typeof d}"`);const{buffer:S,zone:$}=await getFontPitch(e,A,l),F=l.createBufferSource();F.buffer=S;const E=$.originalPitch-100*$.coarseTune-$.fineTune,L=1*Math.pow(2,(100*A-E)/1200);return F.playbackRate.value=L,$.loopStart>1&&$.loopStart<$.loopEnd&&(F.loop=!0,F.loopStart=$.loopStart/$.sampleRate,F.loopEnd=$.loopEnd/$.sampleRate),F}let bufferCache={};async function getFontPitch(e,o,l){const d=`${e}:::${o}`;if(bufferCache[d])return bufferCache[d];const O=async()=>{const A=await loadFont(e);if(!A)throw new Error(`Could not load soundfont ${e}`);const S=findZone(A,o);if(!S)throw new Error("no soundfont zone found for preset ",e,"pitch",o);const $=await getBuffer(S,l);if(!$)throw new Error(`no soundfont buffer found for preset ${e}, pitch: ${o}`);return{buffer:$,zone:S}};return bufferCache[d]=O(),bufferCache[d]}function findZone(e,o){return e.find(l=>l.keyRangeLow<=o&&l.keyRangeHigh+1>=o)}async function getBuffer(e,o){if(e.sample){console.warn("zone.sample untested!");const d=atob(e.sample);e.buffer=o.createBuffer(1,d.length/2,e.sampleRate);const O=e.buffer.getChannelData(0);let A,S,$;for(var l=0;l<d.length/2;l++)A=d.charCodeAt(l*2),S=d.charCodeAt(l*2+1),A<0&&(A=256+A),S<0&&(S=256+S),$=S*256+A,$>=65536/2&&($=$-65536),O[l]=$/65536}else if(e.file){const d=e.file.length,O=new ArrayBuffer(d),A=new Uint8Array(O),S=atob(e.file);let $;for(let F=0;F<S.length;F++)$=S.charCodeAt(F),A[F]=$;return new Promise(F=>o.decodeAudioData(O,F))}}function registerSoundfonts$1(){Object.entries(gm).forEach(([e,o])=>{registerSound(e,async(l,d,O)=>{const[A,S,$,F]=getADSRValues([d.attack,d.decay,d.sustain,d.release]),{duration:E}=d,L=getSoundIndex$1(d.n,o.length),N=o[L],V=getAudioContext(),B=await getFontBufferSource(N,d,V);B.start(l);const U=V.createGain(),q=B.connect(U),ee=l+E;getParamADSR(q.gain,A,S,$,F,0,.3,l,ee,"linear");let le=ee+F+.01,ue=getVibratoOscillator(B.detune,d,l);getPitchEnvelope(B.detune,d,l,ee),B.stop(le);const _e=ie=>{};return B.onended=()=>{B.disconnect(),ue?.stop(),q.disconnect(),O()},{node:q,stop:_e}},{type:"soundfont",prebake:!0,fonts:o})})}var SoundFont2={exports:{}},hasRequiredSoundFont2;function requireSoundFont2(){return hasRequiredSoundFont2||(hasRequiredSoundFont2=1,(function(e,o){(function(l,d){e.exports=d()})(window,function(){return(function(l){var d={};function O(A){if(d[A])return d[A].exports;var S=d[A]={i:A,l:!1,exports:{}};return l[A].call(S.exports,S,S.exports,O),S.l=!0,S.exports}return O.m=l,O.c=d,O.d=function(A,S,$){O.o(A,S)||Object.defineProperty(A,S,{enumerable:!0,get:$})},O.r=function(A){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(A,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(A,"__esModule",{value:!0})},O.t=function(A,S){if(1&S&&(A=O(A)),8&S||4&S&&typeof A=="object"&&A&&A.__esModule)return A;var $=Object.create(null);if(O.r($),Object.defineProperty($,"default",{enumerable:!0,value:A}),2&S&&typeof A!="string")for(var F in A)O.d($,F,function(E){return A[E]}.bind(null,F));return $},O.n=function(A){var S=A&&A.__esModule?function(){return A.default}:function(){return A};return O.d(S,"a",S),S},O.o=function(A,S){return Object.prototype.hasOwnProperty.call(A,S)},O.p="",O(O.s="./src/index.ts")})({"./src/chunk.ts":function(l,d,O){O.r(d),O.d(d,"SF2Chunk",function(){return B});var A=O("./src/riff/index.ts"),S=O("./src/constants.ts"),$=O("./src/chunks/index.ts");function F(U){return(F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(q){return typeof q}:function(q){return q&&typeof Symbol=="function"&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q})(U)}function E(U,q){for(var ee=0;ee<q.length;ee++){var le=q[ee];le.enumerable=le.enumerable||!1,le.configurable=!0,"value"in le&&(le.writable=!0),Object.defineProperty(U,le.key,le)}}function L(U){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(q){return q.__proto__||Object.getPrototypeOf(q)})(U)}function N(U,q){return(N=Object.setPrototypeOf||function(ee,le){return ee.__proto__=le,ee})(U,q)}function V(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}var B=(function(U){function q(ue){var _e,ie,ae,fe,Oe,ve;return(function(Re,Me){if(!(Re instanceof Me))throw new TypeError("Cannot call a class as a function")})(this,q),ie=this,_e=!(ae=L(q).call(this,ue.id,ue.length,ue.buffer,ue.subChunks))||F(ae)!=="object"&&typeof ae!="function"?V(ie):ae,fe=V(V(_e)),ve=void 0,(Oe="subChunks")in fe?Object.defineProperty(fe,Oe,{value:ve,enumerable:!0,configurable:!0,writable:!0}):fe[Oe]=ve,_e.subChunks=ue.subChunks.map(function(Re){return new q(Re)}),_e}var ee,le;return(function(ue,_e){if(typeof _e!="function"&&_e!==null)throw new TypeError("Super expression must either be null or a function");ue.prototype=Object.create(_e&&_e.prototype,{constructor:{value:ue,writable:!0,configurable:!0}}),_e&&N(ue,_e)})(q,A.RIFFChunk),ee=q,(le=[{key:"getMetaData",value:function(){if(this.id!=="LIST")throw new A.ParseError("Unexpected chunk ID","'LIST'","'".concat(this.id,"'"));var ue=this.subChunks.reduce(function(_e,ie){if(ie.id==="ifil"||ie.id==="iver"){if(ie.length!==S.SF_VERSION_LENGTH)throw new A.ParseError("Invalid size for the '".concat(ie.id,"' sub-chunk"));_e[ie.id]="".concat(ie.getInt16(),".").concat(ie.getInt16(2))}else _e[ie.id]=ie.getString();return _e},{});if(!ue.ifil)throw new A.ParseError("Missing required 'ifil' sub-chunk");if(!ue.INAM)throw new A.ParseError("Missing required 'INAM' sub-chunk");return{version:ue.ifil,soundEngine:ue.isng||"EMU8000",name:ue.INAM,rom:ue.irom,romVersion:ue.iver,creationDate:ue.ICRD,author:ue.IENG,product:ue.IPRD,copyright:ue.ICOP,comments:ue.ICMT,createdBy:ue.ISFT}}},{key:"getSampleData",value:function(){if(this.id!=="LIST")throw new A.ParseError("Unexpected chunk ID","'LIST'","'".concat(this.id,"'"));var ue=this.subChunks[0];if(ue.id!=="smpl")throw new A.ParseError("Invalid chunk signature","'smpl'","'".concat(ue.id,"'"));return ue.buffer}},{key:"getPresetData",value:function(){if(this.id!=="LIST")throw new A.ParseError("Unexpected chunk ID","'LIST'","'".concat(this.id,"'"));return{presetHeaders:Object($.getPresetHeaders)(this.subChunks[0]),presetZones:Object($.getZones)(this.subChunks[1],"pbag"),presetModulators:Object($.getModulators)(this.subChunks[2],"pmod"),presetGenerators:Object($.getGenerators)(this.subChunks[3],"pgen"),instrumentHeaders:Object($.getInstrumentHeaders)(this.subChunks[4]),instrumentZones:Object($.getZones)(this.subChunks[5],"ibag"),instrumentModulators:Object($.getModulators)(this.subChunks[6],"imod"),instrumentGenerators:Object($.getGenerators)(this.subChunks[7],"igen"),sampleHeaders:Object($.getSampleHeaders)(this.subChunks[8])}}}])&&E(ee.prototype,le),q})()},"./src/chunks/generators.ts":function(l,d,O){O.r(d),O.d(d,"getGenerators",function(){return N});var A=O("./src/riff/index.ts"),S=O("./src/types/index.ts"),$=O("./src/constants.ts"),F=[S.GeneratorType.StartAddrsOffset,S.GeneratorType.EndAddrsOffset,S.GeneratorType.StartLoopAddrsOffset,S.GeneratorType.EndLoopAddrsOffset,S.GeneratorType.StartAddrsCoarseOffset,S.GeneratorType.EndAddrsCoarseOffset,S.GeneratorType.StartLoopAddrsCoarseOffset,S.GeneratorType.KeyNum,S.GeneratorType.Velocity,S.GeneratorType.EndLoopAddrsCoarseOffset,S.GeneratorType.SampleModes,S.GeneratorType.ExclusiveClass,S.GeneratorType.OverridingRootKey],E=[S.GeneratorType.Unused1,S.GeneratorType.Unused2,S.GeneratorType.Unused3,S.GeneratorType.Unused4,S.GeneratorType.Reserved1,S.GeneratorType.Reserved2,S.GeneratorType.Reserved3],L=[S.GeneratorType.KeyRange,S.GeneratorType.VelRange],N=function(V,B){if(V.id!==B)throw new A.ParseError("Unexpected chunk ID","'".concat(B,"'"),"'".concat(V.id,"'"));if(V.length%$.SF_GENERATOR_SIZE)throw new A.ParseError("Invalid size for the '".concat(B,"' sub-chunk"));return V.iterate(function(U){var q=U.getInt16();return S.GeneratorType[q]?B==="pgen"&&F.includes(q)||B==="igen"&&E.includes(q)?null:L.includes(q)?{id:q,range:{lo:U.getByte(),hi:U.getByte()}}:{id:q,value:U.getInt16BE()}:null})}},"./src/chunks/index.ts":function(l,d,O){O.r(d);var A=O("./src/chunks/instruments/index.ts");O.d(d,"getInstrumentHeaders",function(){return A.getInstrumentHeaders});var S=O("./src/chunks/presets/index.ts");O.d(d,"getPresetHeaders",function(){return S.getPresetHeaders});var $=O("./src/chunks/samples/index.ts");O.d(d,"getSampleHeaders",function(){return $.getSampleHeaders});var F=O("./src/chunks/generators.ts");O.d(d,"getGenerators",function(){return F.getGenerators});var E=O("./src/chunks/modulators.ts");O.d(d,"getModulators",function(){return E.getModulators});var L=O("./src/chunks/zones.ts");O.d(d,"getZones",function(){return L.getZones}),O.d(d,"getItemsInZone",function(){return L.getItemsInZone})},"./src/chunks/instruments/headers.ts":function(l,d,O){O.r(d),O.d(d,"getInstrumentHeaders",function(){return $});var A=O("./src/riff/index.ts"),S=O("./src/constants.ts"),$=function(F){if(F.id!=="inst")throw new A.ParseError("Unexpected chunk ID","'inst'","'".concat(F.id,"'"));if(F.length%S.SF_INSTRUMENT_HEADER_SIZE)throw new A.ParseError("Invalid size for the 'inst' sub-chunk");return F.iterate(function(E){return{name:E.getString(),bagIndex:E.getInt16()}})}},"./src/chunks/instruments/index.ts":function(l,d,O){O.r(d);var A=O("./src/chunks/instruments/headers.ts");O.d(d,"getInstrumentHeaders",function(){return A.getInstrumentHeaders})},"./src/chunks/modulators.ts":function(l,d,O){O.r(d),O.d(d,"getModulators",function(){return F});var A=O("./src/riff/index.ts"),S=O("./src/constants.ts"),$=function(E){return{type:E>>10&63,polarity:E>>9&1,direction:E>>8&1,palette:E>>7&1,index:127&E}},F=function(E,L){if(E.id!==L)throw new A.ParseError("Unexpected chunk ID","'".concat(L,"'"),"'".concat(E.id,"'"));if(E.length%S.SF_MODULATOR_SIZE)throw new A.ParseError("Invalid size for the '".concat(L,"' sub-chunk"));return E.iterate(function(N){return{source:$(N.getInt16BE()),id:N.getInt16BE(),value:N.getInt16BE(),valueSource:$(N.getInt16BE()),transform:N.getInt16BE()}})}},"./src/chunks/presets/headers.ts":function(l,d,O){O.r(d),O.d(d,"getPresetHeaders",function(){return $});var A=O("./src/riff/index.ts"),S=O("./src/constants.ts"),$=function(F){if(F.id!=="phdr")throw new A.ParseError("Invalid chunk ID","'phdr'","'".concat(F.id,"'"));if(F.length%S.SF_PRESET_HEADER_SIZE)throw new A.ParseError("Invalid size for the 'phdr' sub-chunk");return F.iterate(function(E){return{name:E.getString(),preset:E.getInt16(),bank:E.getInt16(),bagIndex:E.getInt16(),library:E.getUInt32(),genre:E.getUInt32(),morphology:E.getUInt32()}})}},"./src/chunks/presets/index.ts":function(l,d,O){O.r(d);var A=O("./src/chunks/presets/headers.ts");O.d(d,"getPresetHeaders",function(){return A.getPresetHeaders})},"./src/chunks/samples/headers.ts":function(l,d,O){O.r(d),O.d(d,"getSampleHeaders",function(){return $});var A=O("./src/riff/index.ts"),S=O("./src/constants.ts"),$=function(F){if(F.id!=="shdr")throw new A.ParseError("Unexpected chunk ID","'shdr'","'".concat(F.id,"'"));if(F.length%S.SF_SAMPLE_HEADER_SIZE)throw new A.ParseError("Invalid size for the 'shdr' sub-chunk");return F.iterate(function(E){return{name:E.getString(),start:E.getUInt32(),end:E.getUInt32(),startLoop:E.getUInt32(),endLoop:E.getUInt32(),sampleRate:E.getUInt32(),originalPitch:E.getByte(),pitchCorrection:E.getChar(),link:E.getInt16(),type:E.getInt16()}})}},"./src/chunks/samples/index.ts":function(l,d,O){O.r(d);var A=O("./src/chunks/samples/headers.ts");O.d(d,"getSampleHeaders",function(){return A.getSampleHeaders})},"./src/chunks/zones.ts":function(l,d,O){O.r(d),O.d(d,"getZones",function(){return F}),O.d(d,"getItemsInZone",function(){return E});var A=O("./src/riff/index.ts"),S=O("./src/constants.ts"),$=O("./src/types/index.ts"),F=function(B,U){if(B.id!==U)throw new A.ParseError("Unexpected chunk ID","'".concat(U,"'"),"'".concat(B.id,"'"));if(B.length%S.SF_BAG_SIZE)throw new A.ParseError("Invalid size for the '".concat(U,"' sub-chunk"));return B.iterate(function(q){return{generatorIndex:q.getInt16(),modulatorIndex:q.getInt16()}})},E=function(B,U,q,ee,le,ue){for(var _e=[],ie=0;ie<B.length;ie++){for(var ae=B[ie],fe=B[ie+1],Oe=ae.bagIndex,ve=fe?fe.bagIndex:U.length,Re=[],Me=void 0,Ye=Oe;Ye<ve;Ye++){var Te=L(Ye,U,q),Ge=N(Ye,U,ee),Ne=Ge[$.GeneratorType.KeyRange]&&Ge[$.GeneratorType.KeyRange].range,Je=Ge[ue];if(Je){var je=le[Je.value];je&&Re.push({keyRange:Ne,modulators:Te,generators:Ge,reference:je})}else Ye-Oe==0&&(Me={keyRange:Ne,modulators:Te,generators:Ge})}_e.push({header:ae,globalZone:Me,zones:Re})}return _e},L=function(B,U,q){var ee=U[B],le=U[B+1],ue=ee.modulatorIndex,_e=le?le.modulatorIndex:U.length;return V(ue,_e,q)},N=function(B,U,q){var ee=U[B],le=U[B+1],ue=ee.generatorIndex,_e=le?le.generatorIndex:U.length;return V(ue,_e,q)},V=function(B,U,q){for(var ee={},le=B;le<U;le++){var ue=q[le];ue&&(ee[ue.id]=ue)}return ee}},"./src/constants.ts":function(l,d,O){O.r(d),O.d(d,"SF_VERSION_LENGTH",function(){return A}),O.d(d,"SF_PRESET_HEADER_SIZE",function(){return S}),O.d(d,"SF_BAG_SIZE",function(){return $}),O.d(d,"SF_MODULATOR_SIZE",function(){return F}),O.d(d,"SF_GENERATOR_SIZE",function(){return E}),O.d(d,"SF_INSTRUMENT_HEADER_SIZE",function(){return L}),O.d(d,"SF_SAMPLE_HEADER_SIZE",function(){return N}),O.d(d,"DEFAULT_SAMPLE_RATE",function(){return V});var A=4,S=38,$=4,F=10,E=4,L=22,N=46,V=22050},"./src/index.ts":function(l,d,O){O.r(d);var A=O("./src/types/index.ts");for(var S in A)S!=="default"&&(function(L){O.d(d,L,function(){return A[L]})})(S);var $=O("./src/chunk.ts");O.d(d,"SF2Chunk",function(){return $.SF2Chunk});var F=O("./src/constants.ts");O.d(d,"SF_VERSION_LENGTH",function(){return F.SF_VERSION_LENGTH}),O.d(d,"SF_PRESET_HEADER_SIZE",function(){return F.SF_PRESET_HEADER_SIZE}),O.d(d,"SF_BAG_SIZE",function(){return F.SF_BAG_SIZE}),O.d(d,"SF_MODULATOR_SIZE",function(){return F.SF_MODULATOR_SIZE}),O.d(d,"SF_GENERATOR_SIZE",function(){return F.SF_GENERATOR_SIZE}),O.d(d,"SF_INSTRUMENT_HEADER_SIZE",function(){return F.SF_INSTRUMENT_HEADER_SIZE}),O.d(d,"SF_SAMPLE_HEADER_SIZE",function(){return F.SF_SAMPLE_HEADER_SIZE}),O.d(d,"DEFAULT_SAMPLE_RATE",function(){return F.DEFAULT_SAMPLE_RATE});var E=O("./src/soundFont2.ts");O.d(d,"SoundFont2",function(){return E.SoundFont2})},"./src/riff/chunkIterator.ts":function(l,d,O){O.r(d),O.d(d,"ChunkIterator",function(){return F});var A=O("./src/utils/index.ts");function S(E,L){for(var N=0;N<L.length;N++){var V=L[N];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(E,V.key,V)}}function $(E,L,N){return L in E?Object.defineProperty(E,L,{value:N,enumerable:!0,configurable:!0,writable:!0}):E[L]=N,E}var F=(function(){function E(V){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;(function(U,q){if(!(U instanceof q))throw new TypeError("Cannot call a class as a function")})(this,E),$(this,"target",[]),$(this,"chunk",void 0),$(this,"position",0),this.chunk=V,this.position=B}var L,N;return L=E,(N=[{key:"iterate",value:function(V){for(;this.position<this.chunk.length;){var B=V(this);B&&this.target.push(B)}}},{key:"getString",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:20,B=Object(A.getStringFromBuffer)(this.getBuffer(this.position,V));return this.position+=V,B}},{key:"getInt16",value:function(){return this.chunk.buffer[this.position++]|this.chunk.buffer[this.position++]<<8}},{key:"getInt16BE",value:function(){return this.getInt16()<<16>>16}},{key:"getUInt32",value:function(){return(this.chunk.buffer[this.position++]|this.chunk.buffer[this.position++]<<8|this.chunk.buffer[this.position++]<<16|this.chunk.buffer[this.position++]<<24)>>>0}},{key:"getByte",value:function(){return this.chunk.buffer[this.position++]}},{key:"getChar",value:function(){return this.chunk.buffer[this.position++]<<24>>24}},{key:"skip",value:function(V){this.position+=V}},{key:"getBuffer",value:function(V,B){return this.chunk.buffer.subarray(V,V+B)}},{key:"currentPosition",get:function(){return this.position}}])&&S(L.prototype,N),E})()},"./src/riff/index.ts":function(l,d,O){O.r(d);var A=O("./src/riff/chunkIterator.ts");O.d(d,"ChunkIterator",function(){return A.ChunkIterator});var S=O("./src/riff/parseError.ts");O.d(d,"ParseError",function(){return S.ParseError});var $=O("./src/riff/parser.ts");O.d(d,"parseBuffer",function(){return $.parseBuffer}),O.d(d,"getChunk",function(){return $.getChunk}),O.d(d,"getChunkLength",function(){return $.getChunkLength}),O.d(d,"getSubChunks",function(){return $.getSubChunks}),O.d(d,"getChunkId",function(){return $.getChunkId});var F=O("./src/riff/riffChunk.ts");O.d(d,"RIFFChunk",function(){return F.RIFFChunk})},"./src/riff/parseError.ts":function(l,d,O){function A(V){return(A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B})(V)}function S(V,B){return!B||A(B)!=="object"&&typeof B!="function"?(function(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U})(V):B}function $(V){var B=typeof Map=="function"?new Map:void 0;return($=function(U){if(U===null||(q=U,Function.toString.call(q).indexOf("[native code]")===-1))return U;var q;if(typeof U!="function")throw new TypeError("Super expression must either be null or a function");if(B!==void 0){if(B.has(U))return B.get(U);B.set(U,ee)}function ee(){return F(U,arguments,L(this).constructor)}return ee.prototype=Object.create(U.prototype,{constructor:{value:ee,enumerable:!1,writable:!0,configurable:!0}}),E(ee,U)})(V)}function F(V,B,U){return(F=(function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}})()?Reflect.construct:function(q,ee,le){var ue=[null];ue.push.apply(ue,ee);var _e=new(Function.bind.apply(q,ue));return le&&E(_e,le.prototype),_e}).apply(null,arguments)}function E(V,B){return(E=Object.setPrototypeOf||function(U,q){return U.__proto__=q,U})(V,B)}function L(V){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(B){return B.__proto__||Object.getPrototypeOf(B)})(V)}O.r(d),O.d(d,"ParseError",function(){return N});var N=(function(V){function B(U,q,ee){return(function(le,ue){if(!(le instanceof ue))throw new TypeError("Cannot call a class as a function")})(this,B),S(this,L(B).call(this,"".concat(U).concat(q&&ee?", expected ".concat(q,", received ").concat(ee):"")))}return(function(U,q){if(typeof q!="function"&&q!==null)throw new TypeError("Super expression must either be null or a function");U.prototype=Object.create(q&&q.prototype,{constructor:{value:U,writable:!0,configurable:!0}}),q&&E(U,q)})(B,$(Error)),B})()},"./src/riff/parser.ts":function(l,d,O){O.r(d),O.d(d,"parseBuffer",function(){return F}),O.d(d,"getChunk",function(){return E}),O.d(d,"getChunkLength",function(){return L}),O.d(d,"getSubChunks",function(){return N}),O.d(d,"getChunkId",function(){return V});var A=O("./src/riff/parseError.ts"),S=O("./src/utils/buffer.ts"),$=O("./src/riff/riffChunk.ts"),F=function(B){var U=V(B);if(U!=="RIFF")throw new A.ParseError("Invalid file format","RIFF",U);var q=V(B,8);if(q!=="sfbk")throw new A.ParseError("Invalid signature","sfbk",q);var ee=B.subarray(8),le=N(ee.subarray(4));return new $.RIFFChunk(U,ee.length,ee,le)},E=function(B,U){var q=V(B,U),ee=L(B,U+4),le=[];return q!=="RIFF"&&q!=="LIST"||(le=N(B.subarray(U+12))),new $.RIFFChunk(q,ee,B.subarray(U+8),le)},L=function(B,U){return((B=B.subarray(U,U+4))[0]|B[1]<<8|B[2]<<16|B[3]<<24)>>>0},N=function(B){for(var U=[],q=0;q<=B.length-8;){var ee=E(B,q);U.push(ee),q=(q+=8+ee.length)%2?q+1:q}return U},V=function(B){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Object(S.getStringFromBuffer)(B.subarray(U,U+4))}},"./src/riff/riffChunk.ts":function(l,d,O){O.r(d),O.d(d,"RIFFChunk",function(){return E});var A=O("./src/riff/chunkIterator.ts"),S=O("./src/utils/index.ts");function $(L,N){for(var V=0;V<N.length;V++){var B=N[V];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(L,B.key,B)}}function F(L,N,V){return N in L?Object.defineProperty(L,N,{value:V,enumerable:!0,configurable:!0,writable:!0}):L[N]=V,L}var E=(function(){function L(B,U,q,ee){(function(le,ue){if(!(le instanceof ue))throw new TypeError("Cannot call a class as a function")})(this,L),F(this,"id",void 0),F(this,"length",void 0),F(this,"buffer",void 0),F(this,"subChunks",void 0),this.id=B,this.length=U,this.buffer=q,this.subChunks=ee}var N,V;return N=L,(V=[{key:"getString",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,U=arguments.length>1?arguments[1]:void 0;return Object(S.getStringFromBuffer)(this.getBuffer(B,U||this.length-B))}},{key:"getInt16",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.buffer[B++]|this.buffer[B]<<8}},{key:"getUInt32",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return(this.buffer[B++]|this.buffer[B++]<<8|this.buffer[B++]<<16|this.buffer[B]<<24)>>>0}},{key:"getByte",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.buffer[B]}},{key:"getChar",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.buffer[B]<<24>>24}},{key:"iterator",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new A.ChunkIterator(this,B)}},{key:"iterate",value:function(B){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,q=new A.ChunkIterator(this,U);return q.iterate(B),q.target}},{key:"getBuffer",value:function(B,U){return this.buffer.subarray(B,B+U)}}])&&$(N.prototype,V),L})()},"./src/soundFont2.ts":function(l,d,O){O.r(d),O.d(d,"SoundFont2",function(){return U});var A=O("./src/types/index.ts"),S=O("./src/chunk.ts"),$=O("./src/riff/index.ts"),F=O("./src/chunks/index.ts"),E=O("./src/utils/index.ts");function L(q){for(var ee=1;ee<arguments.length;ee++){var le=arguments[ee]!=null?arguments[ee]:{},ue=Object.keys(le);typeof Object.getOwnPropertySymbols=="function"&&(ue=ue.concat(Object.getOwnPropertySymbols(le).filter(function(_e){return Object.getOwnPropertyDescriptor(le,_e).enumerable}))),ue.forEach(function(_e){B(q,_e,le[_e])})}return q}function N(q,ee){for(var le=0;le<ee.length;le++){var ue=ee[le];ue.enumerable=ue.enumerable||!1,ue.configurable=!0,"value"in ue&&(ue.writable=!0),Object.defineProperty(q,ue.key,ue)}}function V(q,ee,le){return ee&&N(q.prototype,ee),le&&N(q,le),q}function B(q,ee,le){return ee in q?Object.defineProperty(q,ee,{value:le,enumerable:!0,configurable:!0,writable:!0}):q[ee]=le,q}var U=(function(){function q(ee){if((function(ue,_e){if(!(ue instanceof _e))throw new TypeError("Cannot call a class as a function")})(this,q),B(this,"chunk",void 0),B(this,"metaData",void 0),B(this,"sampleData",void 0),B(this,"samples",void 0),B(this,"presetData",void 0),B(this,"instruments",void 0),B(this,"presets",void 0),B(this,"banks",void 0),!(ee instanceof S.SF2Chunk)){var le=Object($.parseBuffer)(ee);ee=new S.SF2Chunk(le)}if(ee.subChunks.length!==3)throw new $.ParseError("Invalid sfbk structure","3 chunks","".concat(ee.subChunks.length," chunks"));this.chunk=ee,this.metaData=ee.subChunks[0].getMetaData(),this.sampleData=ee.subChunks[1].getSampleData(),this.presetData=ee.subChunks[2].getPresetData(),this.samples=this.getSamples(),this.instruments=this.getInstruments(),this.presets=this.getPresets(),this.banks=this.getBanks()}return V(q,null,[{key:"from",value:function(ee){return new q(ee)}}]),V(q,[{key:"getKeyData",value:function(ee){var le=this,ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,_e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return Object(E.memoize)(function(ie,ae,fe){var Oe=le.banks[ae];if(Oe){var ve=Oe.presets[fe];if(ve){var Re=ve.zones.find(function(Je){return le.isKeyInRange(Je,ie)});if(Re){var Me=Re.instrument,Ye=Me.zones.find(function(Je){return le.isKeyInRange(Je,ie)});if(Ye){var Te=Ye.sample,Ge=L({},Re.generators,Ye.generators),Ne=L({},Re.modulators,Ye.modulators);return{keyNumber:ie,preset:ve,instrument:Me,sample:Te,generators:Ge,modulators:Ne}}}}}return null})(ee,ue,_e)}},{key:"isKeyInRange",value:function(ee,le){return ee.keyRange===void 0||ee.keyRange.lo<=le&&ee.keyRange.hi>=le}},{key:"getBanks",value:function(){return this.presets.reduce(function(ee,le){var ue=le.header.bank;return ee[ue]||(ee[ue]={presets:[]}),ee[ue].presets[le.header.preset]=le,ee},[])}},{key:"getPresets",value:function(){var ee=this.presetData,le=ee.presetHeaders,ue=ee.presetZones,_e=ee.presetGenerators,ie=ee.presetModulators;return Object(F.getItemsInZone)(le,ue,ie,_e,this.instruments,A.GeneratorType.Instrument).filter(function(ae){return ae.header.name!=="EOP"}).map(function(ae){return{header:ae.header,globalZone:ae.globalZone,zones:ae.zones.map(function(fe){return{keyRange:fe.keyRange,generators:fe.generators,modulators:fe.modulators,instrument:fe.reference}})}})}},{key:"getInstruments",value:function(){var ee=this.presetData,le=ee.instrumentHeaders,ue=ee.instrumentZones,_e=ee.instrumentModulators,ie=ee.instrumentGenerators;return Object(F.getItemsInZone)(le,ue,_e,ie,this.samples,A.GeneratorType.SampleId).filter(function(ae){return ae.header.name!=="EOI"}).map(function(ae){return{header:ae.header,globalZone:ae.globalZone,zones:ae.zones.map(function(fe){return{keyRange:fe.keyRange,generators:fe.generators,modulators:fe.modulators,sample:fe.reference}})}})}},{key:"getSamples",value:function(){var ee=this;return this.presetData.sampleHeaders.filter(function(le){return le.name!=="EOS"}).map(function(le){if(le.name!=="EOS"&&le.sampleRate<=0)throw new Error("Illegal sample rate of ".concat(le.sampleRate," hz in sample '").concat(le.name,"'"));return le.originalPitch>=128&&le.originalPitch<=254&&(le.originalPitch=60),le.startLoop-=le.start,le.endLoop-=le.start,{header:le,data:new Int16Array(new Uint8Array(ee.sampleData.subarray(2*le.start,2*le.end)).buffer)}})}}]),q})()},"./src/types/bank.ts":function(l,d){},"./src/types/generator.ts":function(l,d,O){var A,S;function $(E,L,N){return L in E?Object.defineProperty(E,L,{value:N,enumerable:!0,configurable:!0,writable:!0}):E[L]=N,E}O.r(d),O.d(d,"GeneratorType",function(){return S}),O.d(d,"DEFAULT_GENERATOR_VALUES",function(){return F}),(function(E){E[E.StartAddrsOffset=0]="StartAddrsOffset",E[E.EndAddrsOffset=1]="EndAddrsOffset",E[E.StartLoopAddrsOffset=2]="StartLoopAddrsOffset",E[E.EndLoopAddrsOffset=3]="EndLoopAddrsOffset",E[E.StartAddrsCoarseOffset=4]="StartAddrsCoarseOffset",E[E.ModLFOToPitch=5]="ModLFOToPitch",E[E.VibLFOToPitch=6]="VibLFOToPitch",E[E.ModEnvToPitch=7]="ModEnvToPitch",E[E.InitialFilterFc=8]="InitialFilterFc",E[E.InitialFilterQ=9]="InitialFilterQ",E[E.ModLFOToFilterFc=10]="ModLFOToFilterFc",E[E.ModEnvToFilterFc=11]="ModEnvToFilterFc",E[E.EndAddrsCoarseOffset=12]="EndAddrsCoarseOffset",E[E.ModLFOToVolume=13]="ModLFOToVolume",E[E.Unused1=14]="Unused1",E[E.ChorusEffectsSend=15]="ChorusEffectsSend",E[E.ReverbEffectsSend=16]="ReverbEffectsSend",E[E.Pan=17]="Pan",E[E.Unused2=18]="Unused2",E[E.Unused3=19]="Unused3",E[E.Unused4=20]="Unused4",E[E.DelayModLFO=21]="DelayModLFO",E[E.FreqModLFO=22]="FreqModLFO",E[E.DelayVibLFO=23]="DelayVibLFO",E[E.FreqVibLFO=24]="FreqVibLFO",E[E.DelayModEnv=25]="DelayModEnv",E[E.AttackModEnv=26]="AttackModEnv",E[E.HoldModEnv=27]="HoldModEnv",E[E.DecayModEnv=28]="DecayModEnv",E[E.SustainModEnv=29]="SustainModEnv",E[E.ReleaseModEnv=30]="ReleaseModEnv",E[E.KeyNumToModEnvHold=31]="KeyNumToModEnvHold",E[E.KeyNumToModEnvDecay=32]="KeyNumToModEnvDecay",E[E.DelayVolEnv=33]="DelayVolEnv",E[E.AttackVolEnv=34]="AttackVolEnv",E[E.HoldVolEnv=35]="HoldVolEnv",E[E.DecayVolEnv=36]="DecayVolEnv",E[E.SustainVolEnv=37]="SustainVolEnv",E[E.ReleaseVolEnv=38]="ReleaseVolEnv",E[E.KeyNumToVolEnvHold=39]="KeyNumToVolEnvHold",E[E.KeyNumToVolEnvDecay=40]="KeyNumToVolEnvDecay",E[E.Instrument=41]="Instrument",E[E.Reserved1=42]="Reserved1",E[E.KeyRange=43]="KeyRange",E[E.VelRange=44]="VelRange",E[E.StartLoopAddrsCoarseOffset=45]="StartLoopAddrsCoarseOffset",E[E.KeyNum=46]="KeyNum",E[E.Velocity=47]="Velocity",E[E.InitialAttenuation=48]="InitialAttenuation",E[E.Reserved2=49]="Reserved2",E[E.EndLoopAddrsCoarseOffset=50]="EndLoopAddrsCoarseOffset",E[E.CoarseTune=51]="CoarseTune",E[E.FineTune=52]="FineTune",E[E.SampleId=53]="SampleId",E[E.SampleModes=54]="SampleModes",E[E.Reserved3=55]="Reserved3",E[E.ScaleTuning=56]="ScaleTuning",E[E.ExclusiveClass=57]="ExclusiveClass",E[E.OverridingRootKey=58]="OverridingRootKey",E[E.Unused5=59]="Unused5",E[E.EndOper=60]="EndOper"})(S||(S={}));var F=($(A={},S.StartAddrsOffset,0),$(A,S.EndAddrsOffset,0),$(A,S.StartLoopAddrsOffset,0),$(A,S.EndLoopAddrsOffset,0),$(A,S.StartAddrsCoarseOffset,0),$(A,S.ModLFOToPitch,0),$(A,S.VibLFOToPitch,0),$(A,S.ModEnvToPitch,0),$(A,S.InitialFilterFc,13500),$(A,S.InitialFilterQ,0),$(A,S.ModLFOToFilterFc,0),$(A,S.ModEnvToFilterFc,0),$(A,S.EndAddrsCoarseOffset,0),$(A,S.ModLFOToVolume,0),$(A,S.ChorusEffectsSend,0),$(A,S.ReverbEffectsSend,0),$(A,S.Pan,0),$(A,S.DelayModLFO,-12e3),$(A,S.FreqModLFO,0),$(A,S.DelayVibLFO,-12e3),$(A,S.FreqVibLFO,0),$(A,S.DelayModEnv,-12e3),$(A,S.AttackModEnv,-12e3),$(A,S.HoldModEnv,-12e3),$(A,S.DecayModEnv,-12e3),$(A,S.SustainModEnv,0),$(A,S.ReleaseModEnv,-12e3),$(A,S.KeyNumToModEnvHold,0),$(A,S.KeyNumToModEnvDecay,0),$(A,S.DelayVolEnv,-12e3),$(A,S.AttackVolEnv,-12e3),$(A,S.HoldVolEnv,-12e3),$(A,S.DecayVolEnv,-12e3),$(A,S.SustainVolEnv,0),$(A,S.ReleaseVolEnv,-12e3),$(A,S.KeyNumToVolEnvHold,0),$(A,S.KeyNumToVolEnvDecay,0),$(A,S.StartLoopAddrsCoarseOffset,0),$(A,S.KeyNum,-1),$(A,S.Velocity,-1),$(A,S.InitialAttenuation,0),$(A,S.EndLoopAddrsCoarseOffset,0),$(A,S.CoarseTune,0),$(A,S.FineTune,0),$(A,S.SampleModes,0),$(A,S.ScaleTuning,100),$(A,S.ExclusiveClass,0),$(A,S.OverridingRootKey,-1),A)},"./src/types/index.ts":function(l,d,O){O.r(d);var A=O("./src/types/bank.ts");for(var S in A)S!=="default"&&(function(ee){O.d(d,ee,function(){return A[ee]})})(S);var $=O("./src/types/generator.ts");O.d(d,"GeneratorType",function(){return $.GeneratorType}),O.d(d,"DEFAULT_GENERATOR_VALUES",function(){return $.DEFAULT_GENERATOR_VALUES});var F=O("./src/types/instrument.ts");for(var S in F)["GeneratorType","DEFAULT_GENERATOR_VALUES","default"].indexOf(S)<0&&(function(le){O.d(d,le,function(){return F[le]})})(S);var E=O("./src/types/key.ts");for(var S in E)["GeneratorType","DEFAULT_GENERATOR_VALUES","default"].indexOf(S)<0&&(function(le){O.d(d,le,function(){return E[le]})})(S);var L=O("./src/types/metaData.ts");for(var S in L)["GeneratorType","DEFAULT_GENERATOR_VALUES","default"].indexOf(S)<0&&(function(le){O.d(d,le,function(){return L[le]})})(S);var N=O("./src/types/modulator.ts");O.d(d,"ControllerType",function(){return N.ControllerType}),O.d(d,"ControllerPolarity",function(){return N.ControllerPolarity}),O.d(d,"ControllerDirection",function(){return N.ControllerDirection}),O.d(d,"ControllerPalette",function(){return N.ControllerPalette}),O.d(d,"Controller",function(){return N.Controller}),O.d(d,"TransformType",function(){return N.TransformType}),O.d(d,"DEFAULT_INSTRUMENT_MODULATORS",function(){return N.DEFAULT_INSTRUMENT_MODULATORS});var V=O("./src/types/preset.ts");for(var S in V)["GeneratorType","DEFAULT_GENERATOR_VALUES","ControllerType","ControllerPolarity","ControllerDirection","ControllerPalette","Controller","TransformType","DEFAULT_INSTRUMENT_MODULATORS","default"].indexOf(S)<0&&(function(le){O.d(d,le,function(){return V[le]})})(S);var B=O("./src/types/presetData.ts");for(var S in B)["GeneratorType","DEFAULT_GENERATOR_VALUES","ControllerType","ControllerPolarity","ControllerDirection","ControllerPalette","Controller","TransformType","DEFAULT_INSTRUMENT_MODULATORS","default"].indexOf(S)<0&&(function(le){O.d(d,le,function(){return B[le]})})(S);var U=O("./src/types/sample.ts");O.d(d,"SampleType",function(){return U.SampleType});var q=O("./src/types/zone.ts");for(var S in q)["GeneratorType","DEFAULT_GENERATOR_VALUES","ControllerType","ControllerPolarity","ControllerDirection","ControllerPalette","Controller","TransformType","DEFAULT_INSTRUMENT_MODULATORS","SampleType","default"].indexOf(S)<0&&(function(le){O.d(d,le,function(){return q[le]})})(S)},"./src/types/instrument.ts":function(l,d){},"./src/types/key.ts":function(l,d){},"./src/types/metaData.ts":function(l,d){},"./src/types/modulator.ts":function(l,d,O){O.r(d),O.d(d,"ControllerType",function(){return A}),O.d(d,"ControllerPolarity",function(){return S}),O.d(d,"ControllerDirection",function(){return $}),O.d(d,"ControllerPalette",function(){return F}),O.d(d,"Controller",function(){return E}),O.d(d,"TransformType",function(){return L}),O.d(d,"DEFAULT_INSTRUMENT_MODULATORS",function(){return V});var A,S,$,F,E,L,N=O("./src/types/generator.ts");(function(B){B[B.Linear=0]="Linear",B[B.Concave=1]="Concave",B[B.Convex=2]="Convex",B[B.Switch=3]="Switch"})(A||(A={})),(function(B){B[B.Unipolar=0]="Unipolar",B[B.Bipolar=1]="Bipolar"})(S||(S={})),(function(B){B[B.Increasing=0]="Increasing",B[B.Decreasing=1]="Decreasing"})($||($={})),(function(B){B[B.GeneralController=0]="GeneralController",B[B.MidiController=1]="MidiController"})(F||(F={})),(function(B){B[B.NoController=0]="NoController",B[B.NoteOnVelocity=2]="NoteOnVelocity",B[B.NoteOnKeyNumber=3]="NoteOnKeyNumber",B[B.PolyPressure=10]="PolyPressure",B[B.ChannelPressure=13]="ChannelPressure",B[B.PitchWheel=14]="PitchWheel",B[B.PitchWheelSensitivity=16]="PitchWheelSensitivity",B[B.Link=127]="Link"})(E||(E={})),(function(B){B[B.Linear=0]="Linear",B[B.Absolute=2]="Absolute"})(L||(L={}));var V=[{id:N.GeneratorType.InitialAttenuation,source:{type:A.Concave,polarity:S.Unipolar,direction:$.Decreasing,palette:F.GeneralController,index:E.NoteOnVelocity},value:960,valueSource:{type:A.Linear,polarity:S.Unipolar,direction:$.Increasing,palette:F.GeneralController,index:E.NoController},transform:L.Linear},{id:N.GeneratorType.InitialFilterFc,source:{type:A.Linear,polarity:S.Unipolar,direction:$.Decreasing,palette:F.GeneralController,index:E.NoteOnVelocity},value:-2400,valueSource:{type:A.Linear,polarity:S.Unipolar,direction:$.Increasing,palette:F.GeneralController,index:E.NoController},transform:L.Linear},{id:N.GeneratorType.VibLFOToPitch,source:{type:A.Linear,polarity:S.Unipolar,direction:$.Increasing,palette:F.GeneralController,index:E.ChannelPressure},value:50,valueSource:{type:A.Linear,polarity:S.Unipolar,direction:$.Increasing,palette:F.GeneralController,index:E.NoController},transform:L.Linear},{id:N.GeneratorType.VibLFOToPitch,source:{type:A.Linear,polarity:S.Unipolar,direction:$.Increasing,palette:F.MidiController,index:1},value:50,valueSource:{type:A.Linear,polarity:S.Unipolar,direction:$.Increasing,palette:F.GeneralController,index:E.NoController},transform:L.Linear},{id:N.GeneratorType.InitialAttenuation,source:{type:A.Concave,polarity:S.Unipolar,direction:$.Decreasing,palette:F.MidiController,index:7},value:960,valueSource:{type:A.Linear,polarity:S.Unipolar,direction:$.Increasing,palette:F.GeneralController,index:E.NoController},transform:L.Linear},{id:N.GeneratorType.InitialAttenuation,source:{type:A.Linear,polarity:S.Bipolar,direction:$.Increasing,palette:F.MidiController,index:10},value:1e3,valueSource:{type:A.Linear,polarity:S.Unipolar,direction:$.Increasing,palette:F.GeneralController,index:E.NoController},transform:L.Linear},{id:N.GeneratorType.InitialAttenuation,source:{type:A.Concave,polarity:S.Unipolar,direction:$.Decreasing,palette:F.MidiController,index:11},value:960,valueSource:{type:A.Linear,polarity:S.Unipolar,direction:$.Increasing,palette:F.GeneralController,index:E.NoController},transform:L.Linear},{id:N.GeneratorType.ReverbEffectsSend,source:{type:A.Linear,polarity:S.Unipolar,direction:$.Increasing,palette:F.MidiController,index:91},value:200,valueSource:{type:A.Linear,polarity:S.Unipolar,direction:$.Increasing,palette:F.GeneralController,index:E.NoController},transform:L.Linear},{id:N.GeneratorType.ChorusEffectsSend,source:{type:A.Linear,polarity:S.Unipolar,direction:$.Increasing,palette:F.MidiController,index:93},value:200,valueSource:{type:A.Linear,polarity:S.Unipolar,direction:$.Increasing,palette:F.GeneralController,index:E.NoController},transform:L.Linear},{id:N.GeneratorType.CoarseTune,source:{type:A.Linear,polarity:S.Bipolar,direction:$.Increasing,palette:F.GeneralController,index:E.PitchWheel},value:12700,valueSource:{type:A.Linear,polarity:S.Unipolar,direction:$.Increasing,palette:F.GeneralController,index:E.PitchWheelSensitivity},transform:L.Linear}]},"./src/types/preset.ts":function(l,d){},"./src/types/presetData.ts":function(l,d){},"./src/types/sample.ts":function(l,d,O){var A;O.r(d),O.d(d,"SampleType",function(){return A}),(function(S){S[S.EOS=0]="EOS",S[S.Mono=1]="Mono",S[S.Right=2]="Right",S[S.Left=4]="Left",S[S.Linked=8]="Linked",S[S.RomMono=32769]="RomMono",S[S.RomRight=32770]="RomRight",S[S.RomLeft=32772]="RomLeft",S[S.RomLinked=32776]="RomLinked"})(A||(A={}))},"./src/types/zone.ts":function(l,d){},"./src/utils/buffer.ts":function(l,d,O){O.r(d),O.d(d,"getStringFromBuffer",function(){return A});var A=function(S){return new TextDecoder("utf8").decode(S).split(/\0/)[0].trim()}},"./src/utils/index.ts":function(l,d,O){O.r(d);var A=O("./src/utils/buffer.ts");O.d(d,"getStringFromBuffer",function(){return A.getStringFromBuffer});var S=O("./src/utils/memoize.ts");O.d(d,"memoize",function(){return S.memoize})},"./src/utils/memoize.ts":function(l,d,O){O.r(d),O.d(d,"memoize",function(){return A});var A=function(S){var $={};return function(){for(var F=arguments.length,E=new Array(F),L=0;L<F;L++)E[L]=arguments[L];var N=JSON.stringify(E);if(N in $)return $[N];var V=S.apply(void 0,E);return $[N]=V,V}}}})})})(SoundFont2)),SoundFont2.exports}var SoundFont2Exports=requireSoundFont2();const m=e=>Math.pow(2,e/1200),Q=e=>e/1e3,G=(e,o)=>{const l=Math.pow(10,o);return Math.round(e*l)/l};typeof AudioParam<"u"&&(AudioParam.prototype.dahdsr=function(e,o,l,d,O,A,S,$,F){O=Math.max(G(O,4),.001),S=Math.max(G(S,4),.001),F=G(F,4),o=Math.max(o,.001);let E=e;return this.setValueAtTime(o,E),this.setValueAtTime(o,E+=d),this.exponentialRampToValueAtTime(l,E+=O),this.setValueAtTime(l,E+=A),this.exponentialRampToValueAtTime(Math.max($*l,.001),E+=S),(L,N)=>{this.cancelAndHoldAtTime(L);const V=Math.max(N??o,.001);this.exponentialRampToValueAtTime(V,L+F)}});const T={0:"startAddrOffset",1:"endAddrOffset",2:"startloopAddrsOffset",3:"endloopAddrsOffset",4:"startAddrsCoarseOffset",5:"modLfoToPitch",6:"vibLfoToPitch",7:"modEnvToPitch",8:"initialFilterFc",9:"initialFilterQ",10:"modLfoToFilterFc",11:"modEnvToFilterFc",12:"endAddrsCoarseOffset",13:"modLfoToVolume",14:"unused1",15:"chorusEffectsSend",16:"reverbEffectsSend",17:"pan",18:"unused2",19:"unused3",20:"unused4",21:"delayModLFO",22:"freqModLFO",23:"delayVibLFO",24:"freqVibLFO",25:"delayModEnv",26:"attackModEnv",27:"holdModEnv",28:"decayModEnv",29:"sustainModEnv",30:"releaseModEnv",31:"keyNumToModEnvHold",32:"keyNumToModEnvDecay",33:"delayVolEnv",34:"attackVolEnv",35:"holdVolEnv",36:"decayVolEnv",37:"sustainVolEnv",38:"releaseVolEnv",39:"keyNumToVolEnvHold",40:"keyNumToVolEnvDecay",41:"instrument",42:"reserved1",43:"keyRange",44:"velRange",45:"startloopAddrsCoarseOffset",46:"keyNum",47:"velocity",48:"initialAttenuation",49:"reserved2",50:"endloopAddrsCoarseOffset",51:"coarseTune",52:"fineTune",53:"sampleID",54:"sampleModes",55:"reserved3",56:"scaleTuning",57:"exclusiveClass",58:"overridingRootKey",59:"unused5",60:"endOper"};Object.fromEntries(Object.entries(SoundFont2Exports.DEFAULT_GENERATOR_VALUES).map(([e,o])=>[T[e],o]));const D=(e,o,l,d,O)=>{var A,S,$,F,E,L,N;const V=SoundFont2Exports.DEFAULT_GENERATOR_VALUES[e];if(typeof V!="number")throw new Error(`no default value found for generator with index ${e}`);const B=o.generators[e],U=(S=(A=l.globalZone)==null?void 0:A.generators)==null?void 0:S[e],q=($=d?.generators)==null?void 0:$[e],ee=(E=(F=O.globalZone)==null?void 0:F.generators)==null?void 0:E[e],le=B&&"value"in B?B.value:void 0,ue=U&&"value"in U?U.value:void 0,_e=q&&"value"in q?q.value:void 0,ie=ee&&"value"in ee?ee.value:void 0,ae=(L=le??ue)!=null?L:V,fe=(N=_e??ie)!=null?N:0;return ae+fe},J=e=>SoundFont2Exports.DEFAULT_GENERATOR_VALUES[e]!==void 0,W=(e,o,l)=>{var d,O,A,S;return Object.fromEntries(Array.from(new Set([Object.keys((O=(d=l.globalZone)==null?void 0:d.generators)!=null?O:{}),Object.keys(o.generators),Object.keys((S=(A=o.instrument.globalZone)==null?void 0:A.generators)!=null?S:{}),Object.keys(e.generators)].flat())).filter(J).map($=>[T[$],D(parseInt($),e,o.instrument,o,l)]))};function X(e,o,l){let{time:d=e.currentTime}=l;const{midi:O,start:A,velocity:S=.3,startLoop:$,endLoop:F,sampleRate:E,originalPitch:L,pitchCorrection:N,type:V,sampleModes:B=0,overridingRootKey:U,fineTune:q=0,startloopAddrsOffset:ee=0,startloopAddrsCoarseOffset:le=0,endloopAddrsOffset:ue=0,endloopAddrsCoarseOffset:_e=0,delayVolEnv:ie=-12e3,attackVolEnv:ae=-12e3,holdVolEnv:fe=-12e3,decayVolEnv:Oe=-12e3,sustainVolEnv:ve=0,releaseVolEnv:Re=-12e3,pan:Me=0,...Ye}=l,Te=100*(U!==void 0&&U!==-1?U:L)+N-q,Ge=O*100-Te,Ne=1*Math.pow(2,Ge/1200);o.playbackRate.value=Ne;const Je=$+ee+le*32768,je=F+ue+_e*32768;je>Je&&B===1?(o.loopStart=Je/E,o.loopEnd=je/E,o.loop=!0):B===3&&console.warn("unimplemented sampleMode 3 (play till end on note off)"),Object.keys(Ye).filter(Qt=>!["name","instrument","keyRange","sampleID","end"].includes(Qt)).length;const qe=e.createGain(),et=[d,0,S,m(ie),m(ae),m(fe),m(Oe),ve>=960?0:1-Q(ve),m(Re)],Tt=qe.gain.dahdsr(...et),Rt=e.createStereoPanner();return Rt.pan.value=Me/1e3,qe.connect(Rt),o.connect(qe),Rt.connect(e.destination),o.start(d),(Qt=e.currentTime)=>{o.stop(Qt+m(Re)),Tt(Qt)}}function Y(e,o,l={}){const{header:d,data:O}=o,A=new Float32Array(O.length);for(let F=0;F<O.length;F++)A[F]=O[F]/32768;const S=e.createBuffer(1,A.length,d.sampleRate);S.getChannelData(0).set(A);const $=e.createBufferSource();return $.buffer=S,l={...d,...l},X(e,$,l)}const C=(e,o)=>!e.keyRange||e.keyRange.lo<=o&&o<=e.keyRange.hi,x=(e,o)=>e.zones.filter(l=>C(l,o)&&l.instrument).map(l=>l.instrument.zones.filter(d=>C(d,o)).map(d=>{const O=W(d,l,e);return{...d,mergedGenerators:O}})).flat(),ce=(e,o,l,d=e.currentTime)=>{const O=x(o,l).map(A=>Y(e,A.sample,{...A.mergedGenerators,midi:l,time:d}));return(A=e.currentTime)=>{O.forEach(S=>S(A))}};Pattern$1.prototype.soundfont=function(e,o=0){return this.onTrigger((l,d,O,A)=>{const S=getAudioContext(),$=getPlayableNoteValue(l),F=e.presets[o%e.presets.length],E=A,L=[S,F,noteToMidi$1($),E];ce(...L)(E+l.duration)})};let latestOptions,hydra;async function initHydra(e={}){if(latestOptions&&JSON.stringify(latestOptions)!==JSON.stringify(e)&&document.getElementById("hydra-canvas")?.remove(),latestOptions=e,!document.getElementById("hydra-canvas")){const{src:o="https://unpkg.com/hydra-synth",feedStrudel:l=!1,contextType:d="webgl",pixelRatio:O=1,pixelated:A=!0,...S}={detectAudio:!1,...e},{canvas:$}=getDrawContext("hydra-canvas",{contextType:d,pixelRatio:O,pixelated:A});if(S.canvas=$,await import(o),hydra=new Hydra(S),l){const{canvas:F}=getDrawContext();F.style.display="none",hydra.synth.s0.init({src:F})}}return hydra}function clearHydra(){hydra&&hydra.hush(),globalThis.s0?.clear(),document.getElementById("hydra-canvas")?.remove(),globalThis.speed=speed,globalThis.shape=shape}const H=e=>()=>reify(e).queryArc(getTime(),getTime())[0].value;App.last_eval_error="",App.handle_eval_error=e=>{App.has_error=!0,App.last_eval_error=e?.message||`${e}`,App.set_status(App.last_eval_error)};const{evaluate,scheduler}=webaudioRepl({transpiler,onEvalError:e=>{App.handle_eval_error(e)}});App.evaluate=evaluate,App.scheduler=scheduler,App.app_name="Slide",App.current_song="",App.events_started=!1,App.audio_started=!1,App.fetch_in_flight=!1,App.status_watch_cancelled=!1,App.default_cpm=60,App.tempo=App.default_cpm,App.tempo_debounce_timer=void 0,App.color_index=0,App.color_cycle_timer=void 0,App.do_partial_updates=!1,App.fetch_delay_seconds=5,App.code_url_max=1920,App.border_color="#444",App.default_cpm=30,App.cycle_colors=["#94dd94","rgb(197, 187, 106)","rgb(222, 143, 143)","rgb(127, 155, 210)"],App.on_load=()=>{App.start_events()},App.get_config=async()=>{let e=await fetch("config/config.json");try{App.config=await e.json()}catch(o){console.error("Failed to parse config.json",o),App.config={}}},App.clear_draw_context=()=>{try{cleanupDraw(!0)}catch(e){console.warn("Failed to clear draw context",e)}},App.reset_eval_state=()=>{App.has_error=!1},App.report_eval_failure=e=>{let o=e?.message||App.last_eval_error||"Failed to evaluate Strudel code";App.last_eval_error=o,App.set_status(o)},App.normalize_code=(e="")=>e.replace(/\r\n/g,`
`).trim(),App.strip_set_cpm=e=>e.split(`
`).filter(o=>!o.trim().match(/^setCpm\s*\(/)).join(`
`),App.split_by_newlines=e=>{let o="",l=null,d=0,O=0,A=0,S=[],$=()=>{let F=o.trim();F&&S.push(F),o=""};for(let F=0;F<e.length;F+=1){let E=e[F],L=e[F-1];if(o+=E,l){E===l&&L!=="\\"&&(l=null);continue}if(E==='"'||E==="'"||E==="`"){l=E;continue}if(E==="("?d+=1:E===")"?d=Math.max(0,d-1):E==="["?O+=1:E==="]"?O=Math.max(0,O-1):E==="{"?A+=1:E==="}"&&(A=Math.max(0,A-1)),E!==`
`)continue;let N=e[F+1];d===0&&O===0&&A===0&&!(N===" "||N==="	")&&!(N===`
`)&&$()}return $(),S},App.segment_code=e=>{let o=App.normalize_code(e);if(!o)return[];let l=o.split(/\n{2,}/g).map(O=>O.trim()).filter(Boolean),d=[];for(let O of l){if(!O.includes(`
`)){d.push(O);continue}let A=App.split_by_newlines(O);A.length?d.push(...A):d.push(O)}if(d.length<=1&&o.includes(`
`)){let O=o.split(/\n+/g).map(A=>A.trim()).filter(Boolean);if(O.length>1)return O}return d},App.apply_partial_update=async e=>{let o=App.segment_code(e);if(!o.length)return!1;let l=[],d=0;for(let A of o){let S=await App.run_eval(A);if(S.ok){l.push(A);continue}d+=1,console.warn("Skipping segment due to error",S.error)}if(!l.length)return!1;let O=l.join(`

`);return App.set_input(O),d>0?App.playing(`Skipped ${d} segment(s)`):App.playing(),!0},App.ensure_strudel_ready=async()=>App.strudel_init?(await App.strudel_init(),!0):(App.set_status("Bundle not loaded. Check console for errors"),console.error("strudel.bundle.js is missing or failed to load"),!1),App.start_events=async()=>{if(App.events_started)return;App.events_started=!0,await App.get_config(),App.load_all_storage(),App.create_modals(),App.start_visual(),DOM.ev("#btn-play","click",()=>{let l=App.get_input_value();App.play_action(l,!0)}),DOM.ev("#btn-url","click",()=>{App.get_beat_url()}),DOM.ev("#btn-auto","click",()=>{App.open_auto_modal()}),DOM.ev("#btn-stop","click",()=>{App.stop_action()}),DOM.ev("#btn-new","click",()=>{App.new_beat()}),DOM.ev("#btn-songs","click",()=>{App.open_songs_modal()});let e=DOM.el("#image");e&&DOM.ev(e,"click",()=>{App.open_settings_modal()});let o=DOM.el("#title");o&&DOM.ev(o,"click",()=>{App.open_about_modal()}),App.setup_player(),App.setup_status(),App.setup_volume(),App.setup_auto(),App.setup_input(),App.setup_scope(),App.init_volume_controls(),App.init_tempo_controls(),App.init_code_input_controls(),App.start_keyboard(),DOM.ev(window,"resize",()=>{App.handle_scope_resize()}),App.make_main_visible(),App.set_beat_title_from_query(),App.max_input(),await App.load_song_from_query()||App.load_url_from_query()||App.load_code_from_query()||App.load_last_code()},App.make_main_visible=()=>{DOM.el("#main").classList.remove("invisible")},App.set_title=e=>{if(e){document.title=`${App.app_name} - ${e}`;return}document.title=App.app_name},App.get_query_params=()=>new URLSearchParams(window.location.search),App.update_title=()=>{let e=App.app_name,o=App.get_song_name(!0);o?e=`${e} - ${o}`:App.beat_title&&(e=`${e} - ${App.beat_title}`),document.title=e},App.get_top_height=()=>{let e=DOM.el("#top");return App.get_el_height(e)},App.get_scope_height=()=>{if(App.scope_enabled){let e=DOM.el("#scope-container");return App.get_el_height(e)}return 0},App.get_controls_height=()=>{let e=DOM.el("#controls");return App.get_el_height(e)},App.loading=()=>{App.set_status("Loading...")},App.new_beat=()=>{confirm("Start a new beat?")&&(App.last_code="",App.current_song="",App.set_input(""),App.stop_action(),App.focus_input())},window.H=H,window.initHydra=initHydra,window.clearHydra=clearHydra,window.lz=m$2,window.Drawer=Drawer$1,window.strudelMini=strudelMini$1,window.registerSoundfonts=registerSoundfonts$1,window.registerSynthSounds=registerSynthSounds$1,window.initAudio=initAudio$1,window.samples=samples$1,App.filter_code=e=>(e=e.replace(/\n\s*\n\s*\n+/g,`

`),e.trim()),App.code_scroll_frame=void 0,App.code_scroll_last_ts=0,App.code_scroll_direction=1,App.code_scroll_active=!1,App.code_scroll_speed_px_per_second=80,App.code_scroll_pause_until=0,App.code_scroll_wheel_pause_ms=1e3,App.code_scroll_song_pause_ms=1.2*1e3,App.code_scroll_pending_delay_ms=0,App.input_mirror_time=3*1e3,App.input_grow_time=3*1e3,App.lines_enabled=!0,App.setup_input=()=>{App.create_editor(),App.setup_editor_autocomplete(),App.max_button=App.get_max_button(),App.lines_enabled?App.enable_lines():App.disable_lines()},App.create_editor=()=>{let{EditorView:e,EditorState:o,Compartment:l,lineNumbers:d,highlightActiveLineGutter:O,foldGutter:A,history:S,drawSelection:$,dropCursor:F,indentOnInput:E,bracketMatching:L,closeBrackets:N,rectangularSelection:V,crosshairCursor:B,keymap:U,defaultKeymap:q,historyKeymap:ee,indentWithTab:le,highlightSelectionMatches:ue,searchKeymap:_e,search:ie,selectNextOccurrence:ae,javascript:fe,nord:Oe,vscodeKeymap:ve,Prec:Re,copyLineDown:Me,copyLineUp:Ye}=window.CM;App.lineNumbers=d,App.compartment=new l;let Te=DOM.el("#code-input-wrapper"),Ge=e.theme(App.editor_theme,{dark:!0});App.setup_strudel_mirror();let Ne=[d(),O(),A()],Je=[Oe,Ge,App.compartment.of(Ne),o.allowMultipleSelections.of(!0),Re.highest(U.of([{key:"Ctrl-Shift-Alt-ArrowDown",run:Me},{key:"Ctrl-Shift-Alt-ArrowUp",run:Ye},{key:"Mod-d",run:ae,preventDefault:!0},...ve])),ie(),S(),$(),F(),N(),E(),L(),V(),B(),ue(),App.highlight_extension,U.of([...q,...ee,..._e,le]),fe(),e.lineWrapping],je=o.create({doc:"",extensions:Je});App.editor=new e({state:je,parent:Te}),App.editor.dom.id="codemirror-wrapper"},App.get_input=()=>DOM.el("#codemirror-wrapper"),App.get_input_wrapper=()=>DOM.el("#code-input-wrapper"),App.get_input_value=()=>App.editor.state.doc.toString(),App.defer_code_scroll=e=>{if(!Number.isFinite(e)||e<=0){App.code_scroll_pending_delay_ms=0;return}App.code_scroll_pending_delay_ms=e},App.reset_code_scroll_for_content=(e={})=>{let o=0,l=e.scroll_delay_ms??App.code_scroll_song_pause_ms,d=e.direction??1;if(App.code_scroll_active&&(Number.isFinite(App.code_scroll_pending_delay_ms)&&App.code_scroll_pending_delay_ms>0?o=App.code_scroll_pending_delay_ms:Number.isFinite(l)&&l>0&&(o=l)),App.code_scroll_pending_delay_ms=0,App.code_scroll_direction=d,App.code_scroll_last_ts=0,o<=0||typeof window>"u"){App.code_scroll_pause_until=0;return}window.performance?.now?App.code_scroll_pause_until=window.performance.now()+o:App.code_scroll_pause_until=o},App.set_input=e=>{App.get_input_value()!==e&&(App.editor.dispatch({changes:{from:0,to:App.editor.state.doc.length,insert:e}}),App.scroll_input_to_top(),App.reset_code_scroll_for_content())},App.set_code_scroll_button_active=e=>{let o=DOM.el("#code-input-scroll");if(o){if(e){o.classList.add("active");return}o.classList.remove("active")}},App.code_scroll_tick=e=>{if(!App.code_scroll_active){App.code_scroll_frame=void 0;return}if(!App.editor){App.stop_code_scroll();return}if(App.code_scroll_last_ts||(App.code_scroll_last_ts=e),App.code_scroll_pause_until&&e<App.code_scroll_pause_until){App.code_scroll_last_ts=e,App.code_scroll_frame=window.requestAnimationFrame(App.code_scroll_tick);return}App.code_scroll_pause_until=0;let o=e-App.code_scroll_last_ts;App.code_scroll_last_ts=e;let l=App.code_scroll_speed_px_per_second*o/1e3,d=App.get_input_scroll()+l*App.code_scroll_direction,O=Math.max(0,App.get_input_height()-App.get_input_client_height());if(App.set_input_scroll(d),O<=0){App.stop_code_scroll();return}App.code_scroll_direction>0&&Math.ceil(App.get_input_scroll())+1>=O?(App.set_input_scroll(O),App.reset_code_scroll_for_content({direction:-1})):App.code_scroll_direction<0&&App.get_input_scroll()<=0&&(App.scroll_input_to_top(),App.reset_code_scroll_for_content({direction:1})),App.code_scroll_frame=window.requestAnimationFrame(App.code_scroll_tick)},App.start_code_scroll=()=>{App.code_scroll_active||Math.max(0,App.get_input_height()-App.get_input_client_height())<=0||(App.code_scroll_active=!0,App.code_scroll_direction=1,App.code_scroll_last_ts=window.performance.now()-16,App.code_scroll_pause_until=0,App.set_code_scroll_button_active(!0),App.code_scroll_frame=window.requestAnimationFrame(App.code_scroll_tick))},App.stop_code_scroll=()=>{!App.code_scroll_active&&!App.code_scroll_frame||(App.code_scroll_active=!1,App.code_scroll_direction=1,App.code_scroll_last_ts=0,App.code_scroll_pause_until=0,App.code_scroll_frame&&(window.cancelAnimationFrame(App.code_scroll_frame),App.code_scroll_frame=void 0),App.set_code_scroll_button_active(!1))},App.init_code_input_controls=()=>{let e=App.get_input_wrapper(),o=DOM.el("#code-input-scroll"),l=App.get_max_button(),d=DOM.el("#code-input-top"),O=DOM.el("#code-input-bottom"),A=DOM.el("#code-input-sounds"),S=DOM.el("#code-input-notes"),$=DOM.el("#code-input-banks");d&&DOM.ev(d,"click",E=>{E.preventDefault(),App.scroll_input_to_top(),App.reset_code_scroll_for_content()}),O&&DOM.ev(O,"click",E=>{E.preventDefault(),App.scroll_input_to_bottom(),App.reset_code_scroll_for_content({direction:-1})}),o&&DOM.ev(o,"click",E=>{if(E.preventDefault(),App.code_scroll_active){App.stop_code_scroll();return}App.start_code_scroll()}),l&&DOM.ev(l,"click",E=>{App.max_input()}),A&&DOM.ev(A,"click",E=>{E.preventDefault(),App.show_sounds_context(E)}),S&&DOM.ev(S,"click",E=>{E.preventDefault(),App.show_notes_context(E)}),$&&DOM.ev($,"click",E=>{E.preventDefault(),App.show_banks_context(E)});let F=App.get_input();if(DOM.ev(F,"pointerdown",E=>{if(!App.code_scroll_active)return;let N=E.target.getBoundingClientRect();E.clientX>N.right-20&&E.clientY>N.bottom-20||App.stop_code_scroll()}),e){let E=DOM.el("#resize-handle");if(E){let L=!1;DOM.ev(E,"mousedown",N=>{N.preventDefault(),L=!0,document.body.style.userSelect="none",document.body.style.cursor="se-resize",App.activate_top_input_controls(),App.activate_bottom_input_controls(),E.style.opacity="1",E.style.pointerEvents="auto",E.classList.add("active");let V=N.clientX,B=N.clientY,U=e.offsetWidth,q=e.offsetHeight,ee=ue=>{if(!L)return;let _e=U+(ue.clientX-V),ie=q+(ue.clientY-B),ae=getComputedStyle(document.documentElement),fe=parseInt(ae.getPropertyValue("--input_min_width")),Oe=parseInt(ae.getPropertyValue("--input_min_height"));_e=Math.max(fe,_e),ie=Math.max(Oe,ie),e.style.width=`${_e}px`,e.style.height=`${ie}px`},le=()=>{L=!1,document.body.style.userSelect="",document.body.style.cursor="",App.deactivate_top_input_controls(),App.deactivate_bottom_input_controls(),E.style.opacity="",E.style.pointerEvents="",E.classList.remove("active"),document.removeEventListener("mousemove",ee),document.removeEventListener("mouseup",le),App.scope_debouncer.call()};DOM.ev(document,"mousemove",ee),DOM.ev(document,"mouseup",le)}),DOM.ev(E,"dblclick",N=>{App.restore_input()})}DOM.ev(e,"mouseover",()=>{App.check_max_button()})}DOM.ev(F,"wheel",E=>{App.code_scroll_active&&App.stop_code_scroll()},{passive:!0})},App.restore_input=()=>{let e=App.get_input_wrapper();if(!e)return;let o=getComputedStyle(document.documentElement),l=parseInt(o.getPropertyValue("--input_height")),d=parseInt(o.getPropertyValue("--input_max_width"));e.style.height=`${l}px`,e.style.width=`${d}%`},App.input_is_maxed=()=>{let e=App.get_input_wrapper(),o=parseInt(e.style.height),l=parseInt(e.style.width),[d,O]=App.max_input(!0);return o===d&&l===O},App.restart_code_scroll=()=>{App.scroll_input_to_top(),App.code_scroll_active&&(App.defer_code_scroll(App.code_scroll_song_pause_ms),App.reset_code_scroll_for_content(App.code_scroll_song_pause_ms))},App.add_text_to_input=e=>{App.editor.dispatch(App.editor.state.replaceSelection(e)),App.editor.focus()},App.focus_input=()=>{App.editor.focus()},App.activate_top_input_controls=()=>{let e=DOM.el("#code-input-controls-top");e&&(e.style.opacity="1",e.style.pointerEvents="auto",e.classList.add("active"))},App.activate_bottom_input_controls=()=>{let e=DOM.el("#code-input-controls-bottom");e&&(e.style.opacity="1",e.style.pointerEvents="auto",e.classList.add("active"))},App.deactivate_top_input_controls=()=>{let e=DOM.el("#code-input-controls-top");e&&(e.style.opacity="1",e.style.pointerEvents="auto",e.classList.remove("active"))},App.deactivate_bottom_input_controls=()=>{let e=DOM.el("#code-input-controls-bottom");e&&(e.style.opacity="1",e.style.pointerEvents="auto",e.classList.remove("active"))},App.mirror_input=()=>{let e=App.get_input();e.classList.add("mirror"),clearTimeout(App.input_mirror_timeout),App.input_mirror_timeout=setTimeout(()=>{e.classList.remove("mirror")},App.input_mirror_time)},App.glow_input=()=>{let e=App.get_input();e.classList.add("glow"),clearTimeout(App.input_grow_timeout),App.input_grow_timeout=setTimeout(()=>{e.classList.remove("glow")},App.input_grow_time)},App.cursive_input=()=>{let e=App.get_input();e.classList.add("cursive"),clearTimeout(App.input_grow_timeout),App.input_grow_timeout=setTimeout(()=>{e.classList.remove("cursive")},App.input_grow_time)},App.max_input=(e=!1)=>{let o=App.get_input_wrapper(),l=getComputedStyle(document.documentElement),d=parseInt(l.getPropertyValue("--input_max_width")),O=App.get_input_diff();return e||(o.style.height=`${O}px`,o.style.width=`${d}%`,App.check_max_button()),[O,d]},App.get_input_diff=()=>{let e=App.get_top_height(),o=App.get_scope_height(),l=App.get_controls_height(),d=e+o+l;return App.viewport_height()-d-33},App.check_max_button=()=>{App.input_is_maxed()?App.disable_max_button():App.enable_max_button()},App.get_max_button=()=>DOM.el("#code-input-max"),App.enable_max_button=()=>{App.max_button.classList.remove("disabled")},App.disable_max_button=()=>{App.max_button.classList.add("disabled")},App.set_input_scroll=e=>{App.editor.scrollDOM.scrollTop=e},App.scroll_input_to_top=()=>{App.set_input_scroll(0)},App.scroll_input_to_bottom=()=>{let e=App.editor.scrollDOM.scrollHeight;App.editor.scrollDOM.scrollTop=e},App.get_input_scroll=()=>App.editor.scrollDOM.scrollTop,App.get_input_height=()=>App.editor.scrollDOM.scrollHeight,App.get_input_client_height=()=>App.editor.scrollDOM.clientHeight,App.set_input_border=e=>{App.editor.dom.style.borderColor=e},App.toggle_lines=()=>{App.lines_enabled=!App.lines_enabled,App.lines_enabled?App.enable_lines():App.disable_lines(),App.stor_save_lines()},App.enable_lines=()=>{App.editor.dispatch({effects:App.compartment.reconfigure(App.lineNumbers())})},App.disable_lines=()=>{App.editor.dispatch({effects:App.compartment.reconfigure([])})},App.volume=100,App.volume_step=1,App.setup_volume=()=>{App.update_volume(App.volume)},App.get_volume_slider=()=>DOM.el("#volume-slider"),App.get_volume_value=()=>DOM.el("#volume-value"),App.read_volume_value=e=>{if(!e)return App.volume;let o=e.valueAsNumber;if(Number.isFinite(o))return o;let l=parseInt(e.value,10);return Number.isFinite(l)?l:App.volume},App.refresh_volume_ui=()=>{let e=App.get_volume_slider(),o=App.get_volume_value();e&&(e.value=`${App.volume}`),o&&(o.innerText=`${App.volume}%`)},App.apply_volume=()=>{if(App.audio_started)try{let o=getSuperdoughAudioController()?.output?.destinationGain;if(!o){console.warn("Destination gain node missing");return}o.gain.value=App.volume/100}catch(e){console.error("Failed to apply volume",e)}},App.update_volume=e=>{let o=Number(e);Number.isFinite(o)||(o=App.volume),o=Math.min(100,Math.max(0,o)),App.volume=o,App.refresh_volume_ui(),App.stor_save_volume(),App.apply_volume()},App.init_volume_controls=()=>{let e=App.get_volume_slider(),o=DOM.el("#volume-control"),l=DOM.el("#volume-decrement"),d=DOM.el("#volume-increment");if(!e)return;App.refresh_volume_ui(),App.stor_save_volume(),DOM.ev(e,"input",A=>{App.update_volume(App.read_volume_value(A.target))});let O=A=>{App.update_volume(App.volume+A*App.volume_step)};l&&DOM.ev(l,"click",()=>{O(-1)}),d&&DOM.ev(d,"click",()=>{O(1)}),DOM.ev(o,"auxclick",A=>{A.button===1&&App.update_volume(50)}),DOM.ev(o,"wheel",A=>{A.preventDefault();let S=parseInt(e.step,10)||App.volume_step,$=parseInt(e.value,10);A.deltaY<0?e.value=$+S:e.value=$-S,App.update_volume(App.read_volume_value(e))},{passive:!1})},App.tempo=App.default_cpm,App.tempo_debounce_timer=void 0,App.tempo_commit_delay_ms=500,App.min_tempo=20,App.max_tempo=120,App.tempo_step=5,App.tempo_wheel_commit_timer=void 0,App.tempo_wheel_commit_delay_ms=150,App.schedule_tempo_commit=e=>{if(typeof window>"u"){e();return}App.tempo_debounce_timer&&window.clearTimeout(App.tempo_debounce_timer),App.tempo_debounce_timer=window.setTimeout(()=>{App.tempo_debounce_timer=void 0,e()},App.tempo_commit_delay_ms)},App.schedule_tempo_wheel_commit=()=>{if(typeof window>"u"){App.on_tempo_change(!0,App.tempo);return}App.tempo_wheel_commit_timer&&window.clearTimeout(App.tempo_wheel_commit_timer),App.tempo_wheel_commit_timer=window.setTimeout(()=>{App.tempo_wheel_commit_timer=void 0,App.on_tempo_change(!0,App.tempo)},App.tempo_wheel_commit_delay_ms)},App.get_tempo_slider=()=>DOM.el("#tempo-slider"),App.get_tempo_value=()=>DOM.el("#tempo-value"),App.refresh_tempo_ui=()=>{let e=App.get_tempo_slider(),o=App.get_tempo_value();e&&(e.value=`${App.tempo}`),o&&(o.textContent=`${App.tempo} cpm`)},App.persist_tempo=()=>{if(!(typeof window>"u"))try{App.stor_save_tempo()}catch(e){console.warn("Failed to persist tempo",e)}},App.update_tempo=e=>{let o=parseInt(e,10);Number.isFinite(o)||(o=App.tempo),o=Math.round(o/App.tempo_step)*App.tempo_step,o=Math.min(App.max_tempo,Math.max(App.min_tempo,o)),App.tempo=o,App.refresh_tempo_ui()},App.on_tempo_change=(e=!1,o=void 0)=>{let l=o;l===null&&(l=App.get_tempo_slider()?.value),App.update_tempo(l),e&&App.schedule_tempo_commit(()=>{App.persist_tempo(),App.set_tempo()})},App.init_tempo_controls=()=>{let e=App.get_tempo_slider(),o=DOM.el("#tempo-control"),l=DOM.el("#tempo-decrement"),d=DOM.el("#tempo-increment"),O=DOM.el("#tempo-intended");if(!e)return;App.refresh_tempo_ui(),App.persist_tempo(),DOM.ev(e,"input",S=>{App.update_tempo(S.target.value)}),DOM.ev(o,"auxclick",S=>{S.button===1&&(e.value=App.default_cpm,App.update_tempo(App.default_cpm),App.set_tempo())}),DOM.ev(o,"wheel",S=>{if(S.preventDefault(),!e)return;let $=parseInt(e.step,10);(!Number.isFinite($)||$<=0)&&($=App.tempo_step);let F=e.valueAsNumber;if(Number.isFinite(F)||(F=App.tempo),S.deltaY<0)F+=$;else if(S.deltaY>0)F-=$;else return;App.on_tempo_change(!1,F),App.schedule_tempo_wheel_commit()},{passive:!1}),DOM.ev(o,"change",()=>{App.on_tempo_change(!0)});let A=S=>{let $=App.tempo+S*App.tempo_step;App.on_tempo_change(!0,$)};l&&DOM.ev(l,"click",()=>{A(-1)}),d&&DOM.ev(d,"click",()=>{A(1)}),O&&DOM.ev(O,"click",()=>{App.set_song_tempo(App.last_code)})},App.set_tempo=()=>{try{App.scheduler.setCps(App.tempo/60)}catch(e){console.debug("Tempo will be applied when audio starts",e)}},App.intended_cpm=e=>{let o=S=>{try{return Function(`"use strict"; return (${S})`)()}catch{return null}},l=App.default_cpm,d=e.match(/setcpm\(\s*([\d./*+ -]+)\s*\)/),O=e.match(/setcps\(\s*([\d./*+ -]+)\s*\)/),A=e.match(/setbpm\(\s*([\d./*+ -]+)\s*\)/);if(d){let S=o(d[1]);S!==null&&(l=S)}else if(O){let S=o(O[1]);S!==null&&(l=S*60)}else if(A){let S=o(A[1]);S!==null&&(l=S/4)}return l},App.set_song_tempo=e=>{App.tempo=App.intended_cpm(e),App.set_tempo(),App.refresh_tempo_ui()};function isNamedPitch$6(e){return e!==null&&typeof e=="object"&&"name"in e&&typeof e.name=="string"}function isPitch$6(e){return e!==null&&typeof e=="object"&&"step"in e&&typeof e.step=="number"&&"alt"in e&&typeof e.alt=="number"&&!isNaN(e.step)&&!isNaN(e.alt)}var FIFTHS$6=[0,2,4,-1,1,3,5],STEPS_TO_OCTS$6=FIFTHS$6.map(e=>Math.floor(e*7/12));function coordinates$6(e){const{step:o,alt:l,oct:d,dir:O=1}=e,A=FIFTHS$6[o]+7*l;if(d===void 0)return[O*A];const S=d-STEPS_TO_OCTS$6[o]-4*l;return[O*A,O*S]}var FIFTHS_TO_STEPS$3=[3,0,4,1,5,2,6];function pitch$3(e){const[o,l,d]=e,O=FIFTHS_TO_STEPS$3[unaltered$3(o)],A=Math.floor((o+1)/7);if(l===void 0)return{step:O,alt:A,dir:d};const S=l+4*A+STEPS_TO_OCTS$6[O];return{step:O,alt:A,oct:S,dir:d}}function unaltered$3(e){const o=(e+1)%7;return o<0?7+o:o}var fillStr$9=(e,o)=>Array(Math.abs(o)+1).join(e),NoInterval$5=Object.freeze({empty:!0,name:"",num:NaN,q:"",type:"",step:NaN,alt:NaN,dir:NaN,simple:NaN,semitones:NaN,chroma:NaN,coord:[],oct:NaN}),INTERVAL_TONAL_REGEX$5="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",INTERVAL_SHORTHAND_REGEX$5="(AA|A|P|M|m|d|dd)([-+]?\\d+)",REGEX$c=new RegExp("^"+INTERVAL_TONAL_REGEX$5+"|"+INTERVAL_SHORTHAND_REGEX$5+"$");function tokenizeInterval$5(e){const o=REGEX$c.exec(`${e}`);return o===null?["",""]:o[1]?[o[1],o[2]]:[o[4],o[3]]}var cache$9={};function interval$5(e){return typeof e=="string"?cache$9[e]||(cache$9[e]=parse$9(e)):isPitch$6(e)?interval$5(pitchName$7(e)):isNamedPitch$6(e)?interval$5(e.name):NoInterval$5}var SIZES$6=[0,2,4,5,7,9,11],TYPES$5="PMMPPMM";function parse$9(e){const o=tokenizeInterval$5(e);if(o[0]==="")return NoInterval$5;const l=+o[0],d=o[1],O=(Math.abs(l)-1)%7,A=TYPES$5[O];if(A==="M"&&d==="P")return NoInterval$5;const S=A==="M"?"majorable":"perfectable",$=""+l+d,F=l<0?-1:1,E=l===8||l===-8?l:F*(O+1),L=qToAlt$5(S,d),N=Math.floor((Math.abs(l)-1)/7),V=F*(SIZES$6[O]+L+12*N),B=(F*(SIZES$6[O]+L)%12+12)%12,U=coordinates$6({step:O,alt:L,oct:N,dir:F});return{empty:!1,name:$,num:l,q:d,step:O,alt:L,dir:F,type:S,simple:E,semitones:V,chroma:B,coord:U,oct:N}}function coordToInterval$2(e,o){const[l,d=0]=e,O=l*7+d*12<0,A=o||O?[-l,-d,-1]:[l,d,1];return interval$5(pitch$3(A))}function qToAlt$5(e,o){return o==="M"&&e==="majorable"||o==="P"&&e==="perfectable"?0:o==="m"&&e==="majorable"?-1:/^A+$/.test(o)?o.length:/^d+$/.test(o)?-1*(e==="perfectable"?o.length:o.length+1):0}function pitchName$7(e){const{step:o,alt:l,oct:d=0,dir:O}=e;if(!O)return"";const A=o+1+7*d,S=A===0?o+1:A,$=O<0?"-":"",F=TYPES$5[o]==="M"?"majorable":"perfectable";return $+S+altToQ$5(F,l)}function altToQ$5(e,o){return o===0?e==="majorable"?"M":"P":o===-1&&e==="majorable"?"m":o>0?fillStr$9("A",o):fillStr$9("d",e==="perfectable"?o:o+1)}function isNamedPitch$5(e){return e!==null&&typeof e=="object"&&"name"in e&&typeof e.name=="string"}function isPitch$5(e){return e!==null&&typeof e=="object"&&"step"in e&&typeof e.step=="number"&&"alt"in e&&typeof e.alt=="number"&&!isNaN(e.step)&&!isNaN(e.alt)}var FIFTHS$5=[0,2,4,-1,1,3,5],STEPS_TO_OCTS$5=FIFTHS$5.map(e=>Math.floor(e*7/12));function coordinates$5(e){const{step:o,alt:l,oct:d,dir:O=1}=e,A=FIFTHS$5[o]+7*l;if(d===void 0)return[O*A];const S=d-STEPS_TO_OCTS$5[o]-4*l;return[O*A,O*S]}var FIFTHS_TO_STEPS$2=[3,0,4,1,5,2,6];function pitch$2(e){const[o,l,d]=e,O=FIFTHS_TO_STEPS$2[unaltered$2(o)],A=Math.floor((o+1)/7);if(l===void 0)return{step:O,alt:A,dir:d};const S=l+4*A+STEPS_TO_OCTS$5[O];return{step:O,alt:A,oct:S,dir:d}}function unaltered$2(e){const o=(e+1)%7;return o<0?7+o:o}var fillStr$8=(e,o)=>Array(Math.abs(o)+1).join(e),NoNote$1=Object.freeze({empty:!0,name:"",letter:"",acc:"",pc:"",step:NaN,alt:NaN,chroma:NaN,height:NaN,coord:[],midi:null,freq:null}),cache$8=new Map,stepToLetter$1=e=>"CDEFGAB".charAt(e),altToAcc$1=e=>e<0?fillStr$8("b",-e):fillStr$8("#",e),accToAlt$1=e=>e[0]==="b"?-e.length:e.length;function note$1(e){const o=JSON.stringify(e),l=cache$8.get(o);if(l)return l;const d=typeof e=="string"?parse$8(e):isPitch$5(e)?note$1(pitchName$6(e)):isNamedPitch$5(e)?note$1(e.name):NoNote$1;return cache$8.set(o,d),d}var REGEX$b=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function tokenizeNote$1(e){const o=REGEX$b.exec(e);return o?[o[1].toUpperCase(),o[2].replace(/x/g,"##"),o[3],o[4]]:["","","",""]}function coordToNote$1(e){return note$1(pitch$2(e))}var mod$1=(e,o)=>(e%o+o)%o,SEMI$1=[0,2,4,5,7,9,11];function parse$8(e){const o=tokenizeNote$1(e);if(o[0]===""||o[3]!=="")return NoNote$1;const l=o[0],d=o[1],O=o[2],A=(l.charCodeAt(0)+3)%7,S=accToAlt$1(d),$=O.length?+O:void 0,F=coordinates$5({step:A,alt:S,oct:$}),E=l+d+O,L=l+d,N=(SEMI$1[A]+S+120)%12,V=$===void 0?mod$1(SEMI$1[A]+S,12)-1188:SEMI$1[A]+S+12*($+1),B=V>=0&&V<=127?V:null,U=$===void 0?null:Math.pow(2,(V-69)/12)*440;return{empty:!1,acc:d,alt:S,chroma:N,coord:F,freq:U,height:V,letter:l,midi:B,name:E,oct:$,pc:L,step:A}}function pitchName$6(e){const{step:o,alt:l,oct:d}=e,O=stepToLetter$1(o);if(!O)return"";const A=O+altToAcc$1(l);return d||d===0?A+d:A}function transpose$5(e,o){const l=note$1(e),d=Array.isArray(o)?o:interval$5(o).coord;if(l.empty||!d||d.length<2)return"";const O=l.coord,A=O.length===1?[O[0]+d[0]]:[O[0]+d[0],O[1]+d[1]];return coordToNote$1(A).name}function tonicIntervalsTransposer$1(e,o){const l=e.length;return d=>{if(!o)return"";const O=d<0?(l- -d%l)%l:d%l,A=Math.floor(d/l),S=transpose$5(o,[0,A]);return transpose$5(S,e[O])}}function distance$5(e,o){const l=note$1(e),d=note$1(o);if(l.empty||d.empty)return"";const O=l.coord,A=d.coord,S=A[0]-O[0],$=O.length===2&&A.length===2?A[1]-O[1]:-Math.floor(S*7/12),F=d.height===l.height&&d.midi!==null&&l.oct===d.oct&&l.step>d.step;return coordToInterval$2([S,$],F).name}var fillStr$7=(e,o)=>Array(o+1).join(e),REGEX$a=/^(_{1,}|=|\^{1,}|)([abcdefgABCDEFG])([,']*)$/;function tokenize$4(e){const o=REGEX$a.exec(e);return o?[o[1],o[2],o[3]]:["","",""]}function abcToScientificNotation(e){const[o,l,d]=tokenize$4(e);if(l==="")return"";let O=4;for(let S=0;S<d.length;S++)O+=d.charAt(S)===","?-1:1;const A=o[0]==="_"?o.replace(/_/g,"b"):o[0]==="^"?o.replace(/\^/g,"#"):"";return l.charCodeAt(0)>96?l.toUpperCase()+A+(O+1):l+A+O}function scientificToAbcNotation(e){const o=note$1(e);if(o.empty||!o.oct&&o.oct!==0)return"";const{letter:l,acc:d,oct:O}=o,A=d[0]==="b"?d.replace(/b/g,"_"):d.replace(/#/g,"^"),S=O>4?l.toLowerCase():l,$=O===5?"":O>4?fillStr$7("'",O-5):fillStr$7(",",4-O);return A+S+$}function transpose$4(e,o){return scientificToAbcNotation(transpose$5(abcToScientificNotation(e),o))}function distance$4(e,o){return distance$5(abcToScientificNotation(e),abcToScientificNotation(o))}var abc_notation_default={abcToScientificNotation,scientificToAbcNotation,tokenize:tokenize$4,transpose:transpose$4,distance:distance$4};function ascR$1(e,o){const l=[];for(;o--;l[o]=o+e);return l}function descR$1(e,o){const l=[];for(;o--;l[o]=e-o);return l}function range$1(e,o){return e<o?ascR$1(e,o-e+1):descR$1(e,e-o+1)}function rotate$1(e,o){const l=o.length,d=(e%l+l)%l;return o.slice(d,l).concat(o.slice(0,d))}function compact$1(e){return e.filter(o=>o===0||o)}function sortedNoteNames(e){return e.map(l=>note$1(l)).filter(l=>!l.empty).sort((l,d)=>l.height-d.height).map(l=>l.name)}function sortedUniqNoteNames(e){return sortedNoteNames(e).filter((o,l,d)=>l===0||o!==d[l-1])}function shuffle$1(e,o=Math.random){let l,d,O=e.length;for(;O;)l=Math.floor(o()*O--),d=e[O],e[O]=e[l],e[l]=d;return e}function permutations$1(e){return e.length===0?[[]]:permutations$1(e.slice(1)).reduce((o,l)=>o.concat(e.map((d,O)=>{const A=l.slice();return A.splice(O,0,e[0]),A})),[])}const index$6=Object.freeze(Object.defineProperty({__proto__:null,compact:compact$1,permutations:permutations$1,range:range$1,rotate:rotate$1,shuffle:shuffle$1,sortedNoteNames,sortedUniqNoteNames},Symbol.toStringTag,{value:"Module"}));function ascR(e,o){const l=[];for(;o--;l[o]=o+e);return l}function descR(e,o){const l=[];for(;o--;l[o]=e-o);return l}function range(e,o){return e<o?ascR(e,o-e+1):descR(e,e-o+1)}function rotate(e,o){const l=o.length,d=(e%l+l)%l;return o.slice(d,l).concat(o.slice(0,d))}function compact(e){return e.filter(o=>o===0||o)}function shuffle(e,o=Math.random){let l,d,O=e.length;for(;O;)l=Math.floor(o()*O--),d=e[O],e[O]=e[l],e[l]=d;return e}function permutations(e){return e.length===0?[[]]:permutations(e.slice(1)).reduce((o,l)=>o.concat(e.map((d,O)=>{const A=l.slice();return A.splice(O,0,e[0]),A})),[])}var collection_default={compact,permutations,range,rotate,shuffle};function isNamedPitch$4(e){return e!==null&&typeof e=="object"&&"name"in e&&typeof e.name=="string"}function isPitch$4(e){return e!==null&&typeof e=="object"&&"step"in e&&typeof e.step=="number"&&"alt"in e&&typeof e.alt=="number"&&!isNaN(e.step)&&!isNaN(e.alt)}var FIFTHS$4=[0,2,4,-1,1,3,5],STEPS_TO_OCTS$4=FIFTHS$4.map(e=>Math.floor(e*7/12));function coordinates$4(e){const{step:o,alt:l,oct:d,dir:O=1}=e,A=FIFTHS$4[o]+7*l;if(d===void 0)return[O*A];const S=d-STEPS_TO_OCTS$4[o]-4*l;return[O*A,O*S]}var fillStr$6=(e,o)=>Array(Math.abs(o)+1).join(e),NoInterval$4=Object.freeze({empty:!0,name:"",num:NaN,q:"",type:"",step:NaN,alt:NaN,dir:NaN,simple:NaN,semitones:NaN,chroma:NaN,coord:[],oct:NaN}),INTERVAL_TONAL_REGEX$4="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",INTERVAL_SHORTHAND_REGEX$4="(AA|A|P|M|m|d|dd)([-+]?\\d+)",REGEX$9=new RegExp("^"+INTERVAL_TONAL_REGEX$4+"|"+INTERVAL_SHORTHAND_REGEX$4+"$");function tokenizeInterval$4(e){const o=REGEX$9.exec(`${e}`);return o===null?["",""]:o[1]?[o[1],o[2]]:[o[4],o[3]]}var cache$7={};function interval$4(e){return typeof e=="string"?cache$7[e]||(cache$7[e]=parse$7(e)):isPitch$4(e)?interval$4(pitchName$5(e)):isNamedPitch$4(e)?interval$4(e.name):NoInterval$4}var SIZES$5=[0,2,4,5,7,9,11],TYPES$4="PMMPPMM";function parse$7(e){const o=tokenizeInterval$4(e);if(o[0]==="")return NoInterval$4;const l=+o[0],d=o[1],O=(Math.abs(l)-1)%7,A=TYPES$4[O];if(A==="M"&&d==="P")return NoInterval$4;const S=A==="M"?"majorable":"perfectable",$=""+l+d,F=l<0?-1:1,E=l===8||l===-8?l:F*(O+1),L=qToAlt$4(S,d),N=Math.floor((Math.abs(l)-1)/7),V=F*(SIZES$5[O]+L+12*N),B=(F*(SIZES$5[O]+L)%12+12)%12,U=coordinates$4({step:O,alt:L,oct:N,dir:F});return{empty:!1,name:$,num:l,q:d,step:O,alt:L,dir:F,type:S,simple:E,semitones:V,chroma:B,coord:U,oct:N}}function qToAlt$4(e,o){return o==="M"&&e==="majorable"||o==="P"&&e==="perfectable"?0:o==="m"&&e==="majorable"?-1:/^A+$/.test(o)?o.length:/^d+$/.test(o)?-1*(e==="perfectable"?o.length:o.length+1):0}function pitchName$5(e){const{step:o,alt:l,oct:d=0,dir:O}=e;if(!O)return"";const A=o+1+7*d,S=A===0?o+1:A,$=O<0?"-":"",F=TYPES$4[o]==="M"?"majorable":"perfectable";return $+S+altToQ$4(F,l)}function altToQ$4(e,o){return o===0?e==="majorable"?"M":"P":o===-1&&e==="majorable"?"m":o>0?fillStr$6("A",o):fillStr$6("d",e==="perfectable"?o:o+1)}var EmptyPcset={empty:!0,name:"",setNum:0,chroma:"000000000000",normalized:"000000000000",intervals:[]},setNumToChroma=e=>Number(e).toString(2).padStart(12,"0"),chromaToNumber=e=>parseInt(e,2),REGEX$8=/^[01]{12}$/;function isChroma(e){return REGEX$8.test(e)}var isPcsetNum=e=>typeof e=="number"&&e>=0&&e<=4095,isPcset=e=>e&&isChroma(e.chroma),cache$6={[EmptyPcset.chroma]:EmptyPcset};function get$b(e){const o=isChroma(e)?e:isPcsetNum(e)?setNumToChroma(e):Array.isArray(e)?listToChroma(e):isPcset(e)?e.chroma:EmptyPcset.chroma;return cache$6[o]=cache$6[o]||chromaToPcset(o)}var pcset$1=get$b,chroma$3=e=>get$b(e).chroma,intervals=e=>get$b(e).intervals,num$1=e=>get$b(e).setNum,IVLS=["1P","2m","2M","3m","3M","4P","5d","5P","6m","6M","7m","7M"];function chromaToIntervals(e){const o=[];for(let l=0;l<12;l++)e.charAt(l)==="1"&&o.push(IVLS[l]);return o}function notes$1(e){return get$b(e).intervals.map(o=>transpose$5("C",o))}function chromas(){return range(2048,4095).map(setNumToChroma)}function modes$1(e,o=!0){const d=get$b(e).chroma.split("");return compact(d.map((O,A)=>{const S=rotate(A,d);return o&&S[0]==="0"?null:S.join("")}))}function isEqual(e,o){return get$b(e).setNum===get$b(o).setNum}function isSubsetOf(e){const o=get$b(e).setNum;return l=>{const d=get$b(l).setNum;return o&&o!==d&&(d&o)===d}}function isSupersetOf(e){const o=get$b(e).setNum;return l=>{const d=get$b(l).setNum;return o&&o!==d&&(d|o)===d}}function isNoteIncludedIn(e){const o=get$b(e);return l=>{const d=note$1(l);return o&&!d.empty&&o.chroma.charAt(d.chroma)==="1"}}function filter(e){const o=isNoteIncludedIn(e);return l=>l.filter(o)}var pcset_default={get:get$b,chroma:chroma$3,num:num$1,intervals,chromas,isSupersetOf,isSubsetOf,isNoteIncludedIn,isEqual,filter,modes:modes$1,notes:notes$1,pcset:pcset$1};function chromaRotations(e){const o=e.split("");return o.map((l,d)=>rotate(d,o).join(""))}function chromaToPcset(e){const o=chromaToNumber(e),l=chromaRotations(e).map(chromaToNumber).filter(A=>A>=2048).sort()[0],d=setNumToChroma(l),O=chromaToIntervals(e);return{empty:!1,name:"",setNum:o,chroma:e,normalized:d,intervals:O}}function listToChroma(e){if(e.length===0)return EmptyPcset.chroma;let o;const l=[0,0,0,0,0,0,0,0,0,0,0,0];for(let d=0;d<e.length;d++)o=note$1(e[d]),o.empty&&(o=interval$4(e[d])),o.empty||(l[o.chroma]=1);return l.join("")}var CHORDS$3=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7 Δ ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 Δ9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 Δ#4 Δ#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -Δ7 mΔ -^7 -maj7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim ° o"],["1P 3m 5d 7d","diminished seventh","dim7 °7 o7"],["1P 3m 5d 7m","half-diminished","m7b5 ø -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 Δ9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],data_default$5=CHORDS$3;({...EmptyPcset});var dictionary$4=[],index$5={};function all$4(){return dictionary$4.slice()}function add$6(e,o,l){const d=getQuality$3(e),O={...get$b(e),name:l||"",quality:d,intervals:e,aliases:o};dictionary$4.push(O),O.name&&(index$5[O.name]=O),index$5[O.setNum]=O,index$5[O.chroma]=O,O.aliases.forEach(A=>addAlias$4(O,A))}function addAlias$4(e,o){index$5[o]=e}function getQuality$3(e){const o=l=>e.indexOf(l)!==-1;return o("5A")?"Augmented":o("3M")?"Major":o("5d")?"Diminished":o("3m")?"Minor":"Unknown"}data_default$5.forEach(([e,o,l])=>add$6(e.split(" "),l.split(" "),o)),dictionary$4.sort((e,o)=>e.setNum-o.setNum);var namedSet=e=>{const o=e.reduce((l,d)=>{const O=note$1(d).chroma;return O!==void 0&&(l[O]=l[O]||note$1(d).name),l},{});return l=>o[l]};function detect$1(e,o={}){const l=e.map(O=>note$1(O).pc).filter(O=>O);return note$1.length===0?[]:findMatches(l,1,o).filter(O=>O.weight).sort((O,A)=>A.weight-O.weight).map(O=>O.name)}var BITMASK={anyThirds:384,perfectFifth:16,nonPerfectFifths:40,anySeventh:3},testChromaNumber=e=>o=>!!(o&e),hasAnyThird=testChromaNumber(BITMASK.anyThirds),hasPerfectFifth=testChromaNumber(BITMASK.perfectFifth),hasAnySeventh=testChromaNumber(BITMASK.anySeventh),hasNonPerfectFifth=testChromaNumber(BITMASK.nonPerfectFifths);function hasAnyThirdAndPerfectFifthAndAnySeventh(e){const o=parseInt(e.chroma,2);return hasAnyThird(o)&&hasPerfectFifth(o)&&hasAnySeventh(o)}function withPerfectFifth(e){const o=parseInt(e,2);return hasNonPerfectFifth(o)?e:(o|16).toString(2)}function findMatches(e,o,l){const d=e[0],O=note$1(d).chroma,A=namedSet(e),S=modes$1(e,!1),$=[];return S.forEach((F,E)=>{const L=l.assumePerfectFifth&&withPerfectFifth(F);all$4().filter(V=>l.assumePerfectFifth&&hasAnyThirdAndPerfectFifthAndAnySeventh(V)?V.chroma===L:V.chroma===F).forEach(V=>{const B=V.aliases[0],U=A(E);E!==O?$.push({weight:.5*o,name:`${U}${B}/${d}`}):$.push({weight:1*o,name:`${U}${B}`})})}),$}function isNamedPitch$3(e){return e!==null&&typeof e=="object"&&"name"in e&&typeof e.name=="string"}var SIZES$4=[0,2,4,5,7,9,11],chroma$2=({step:e,alt:o})=>(SIZES$4[e]+o+120)%12,height=({step:e,alt:o,oct:l,dir:d=1})=>d*(SIZES$4[e]+o+12*(l===void 0?-100:l)),midi$1=e=>{const o=height(e);return e.oct!==void 0&&o>=-12&&o<=115?o+12:null};function isPitch$3(e){return e!==null&&typeof e=="object"&&"step"in e&&typeof e.step=="number"&&"alt"in e&&typeof e.alt=="number"}var FIFTHS$3=[0,2,4,-1,1,3,5],STEPS_TO_OCTS$3=FIFTHS$3.map(e=>Math.floor(e*7/12));function coordinates$3(e){const{step:o,alt:l,oct:d,dir:O=1}=e,A=FIFTHS$3[o]+7*l;if(d===void 0)return[O*A];const S=d-STEPS_TO_OCTS$3[o]-4*l;return[O*A,O*S]}var FIFTHS_TO_STEPS$1=[3,0,4,1,5,2,6];function pitch$1(e){const[o,l,d]=e,O=FIFTHS_TO_STEPS$1[unaltered$1(o)],A=Math.floor((o+1)/7);if(l===void 0)return{step:O,alt:A,dir:d};const S=l+4*A+STEPS_TO_OCTS$3[O];return{step:O,alt:A,oct:S,dir:d}}function unaltered$1(e){const o=(e+1)%7;return o<0?7+o:o}var fillStr$5=(e,o)=>Array(Math.abs(o)+1).join(e),NoInterval$3={empty:!0,name:"",acc:""},INTERVAL_TONAL_REGEX$3="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",INTERVAL_SHORTHAND_REGEX$3="(AA|A|P|M|m|d|dd)([-+]?\\d+)",REGEX$7=new RegExp("^"+INTERVAL_TONAL_REGEX$3+"|"+INTERVAL_SHORTHAND_REGEX$3+"$");function tokenizeInterval$3(e){const o=REGEX$7.exec(`${e}`);return o===null?["",""]:o[1]?[o[1],o[2]]:[o[4],o[3]]}var cache$5={};function interval$3(e){return typeof e=="string"?cache$5[e]||(cache$5[e]=parse$6(e)):isPitch$3(e)?interval$3(pitchName$4(e)):isNamedPitch$3(e)?interval$3(e.name):NoInterval$3}var SIZES$3=[0,2,4,5,7,9,11],TYPES$3="PMMPPMM";function parse$6(e){const o=tokenizeInterval$3(e);if(o[0]==="")return NoInterval$3;const l=+o[0],d=o[1],O=(Math.abs(l)-1)%7,A=TYPES$3[O];if(A==="M"&&d==="P")return NoInterval$3;const S=A==="M"?"majorable":"perfectable",$=""+l+d,F=l<0?-1:1,E=l===8||l===-8?l:F*(O+1),L=qToAlt$3(S,d),N=Math.floor((Math.abs(l)-1)/7),V=F*(SIZES$3[O]+L+12*N),B=(F*(SIZES$3[O]+L)%12+12)%12,U=coordinates$3({step:O,alt:L,oct:N,dir:F});return{empty:!1,name:$,num:l,q:d,step:O,alt:L,dir:F,type:S,simple:E,semitones:V,chroma:B,coord:U,oct:N}}function coordToInterval$1(e,o){const[l,d=0]=e,O=l*7+d*12<0,A=o||O?[-l,-d,-1]:[l,d,1];return interval$3(pitch$1(A))}function qToAlt$3(e,o){return o==="M"&&e==="majorable"||o==="P"&&e==="perfectable"?0:o==="m"&&e==="majorable"?-1:/^A+$/.test(o)?o.length:/^d+$/.test(o)?-1*(e==="perfectable"?o.length:o.length+1):0}function pitchName$4(e){const{step:o,alt:l,oct:d=0,dir:O}=e;if(!O)return"";const A=o+1+7*d,S=A===0?o+1:A,$=O<0?"-":"",F=TYPES$3[o]==="M"?"majorable":"perfectable";return $+S+altToQ$3(F,l)}function altToQ$3(e,o){return o===0?e==="majorable"?"M":"P":o===-1&&e==="majorable"?"m":o>0?fillStr$5("A",o):fillStr$5("d",e==="perfectable"?o:o+1)}var fillStr$4=(e,o)=>Array(Math.abs(o)+1).join(e),NoNote={empty:!0,name:"",pc:"",acc:""},cache$4=new Map,stepToLetter=e=>"CDEFGAB".charAt(e),altToAcc=e=>e<0?fillStr$4("b",-e):fillStr$4("#",e),accToAlt=e=>e[0]==="b"?-e.length:e.length;function note(e){const o=JSON.stringify(e),l=cache$4.get(o);if(l)return l;const d=typeof e=="string"?parse$5(e):isPitch$3(e)?note(pitchName$3(e)):isNamedPitch$3(e)?note(e.name):NoNote;return cache$4.set(o,d),d}var REGEX$6=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function tokenizeNote(e){const o=REGEX$6.exec(e);return o?[o[1].toUpperCase(),o[2].replace(/x/g,"##"),o[3],o[4]]:["","","",""]}function coordToNote(e){return note(pitch$1(e))}var mod=(e,o)=>(e%o+o)%o,SEMI=[0,2,4,5,7,9,11];function parse$5(e){const o=tokenizeNote(e);if(o[0]===""||o[3]!=="")return NoNote;const l=o[0],d=o[1],O=o[2],A=(l.charCodeAt(0)+3)%7,S=accToAlt(d),$=O.length?+O:void 0,F=coordinates$3({step:A,alt:S,oct:$}),E=l+d+O,L=l+d,N=(SEMI[A]+S+120)%12,V=$===void 0?mod(SEMI[A]+S,12)-1188:SEMI[A]+S+12*($+1),B=V>=0&&V<=127?V:null,U=$===void 0?null:Math.pow(2,(V-69)/12)*440;return{empty:!1,acc:d,alt:S,chroma:N,coord:F,freq:U,height:V,letter:l,midi:B,name:E,oct:$,pc:L,step:A}}function pitchName$3(e){const{step:o,alt:l,oct:d}=e,O=stepToLetter(o);if(!O)return"";const A=O+altToAcc(l);return d||d===0?A+d:A}function transpose$3(e,o){const l=note(e),d=Array.isArray(o)?o:interval$3(o).coord;if(l.empty||!d||d.length<2)return"";const O=l.coord,A=O.length===1?[O[0]+d[0]]:[O[0]+d[0],O[1]+d[1]];return coordToNote(A).name}function tonicIntervalsTransposer(e,o){const l=e.length;return d=>{if(!o)return"";const O=d<0?(l- -d%l)%l:d%l,A=Math.floor(d/l),S=transpose$3(o,[0,A]);return transpose$3(S,e[O])}}function distance$3(e,o){const l=note(e),d=note(o);if(l.empty||d.empty)return"";const O=l.coord,A=d.coord,S=A[0]-O[0],$=O.length===2&&A.length===2?A[1]-O[1]:-Math.floor(S*7/12),F=d.height===l.height&&d.midi!==null&&l.midi!==null&&l.step>d.step;return coordToInterval$1([S,$],F).name}var fillStr$3=(e,o)=>Array(Math.abs(o)+1).join(e);function deprecate(e,o,l){return function(...d){return console.warn(`${e} is deprecated. Use ${o}.`),l.apply(this,d)}}var isNamed=deprecate("isNamed","isNamedPitch",isNamedPitch$3);const Core=Object.freeze(Object.defineProperty({__proto__:null,accToAlt,altToAcc,chroma:chroma$2,coordToInterval:coordToInterval$1,coordToNote,coordinates:coordinates$3,deprecate,distance:distance$3,fillStr:fillStr$3,height,interval:interval$3,isNamed,isNamedPitch:isNamedPitch$3,isPitch:isPitch$3,midi:midi$1,note,pitch:pitch$1,stepToLetter,tokenizeInterval:tokenizeInterval$3,tokenizeNote,tonicIntervalsTransposer,transpose:transpose$3},Symbol.toStringTag,{value:"Module"}));var CHORDS$2=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7 Δ ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 Δ9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 Δ#4 Δ#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -Δ7 mΔ -^7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim ° o"],["1P 3m 5d 7d","diminished seventh","dim7 °7 o7"],["1P 3m 5d 7m","half-diminished","m7b5 ø -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 Δ9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],data_default$4=CHORDS$2,NoChordType={...EmptyPcset,name:"",quality:"Unknown",intervals:[],aliases:[]},dictionary$3=[],index$4={};function get$a(e){return index$4[e]||NoChordType}var chordType=deprecate("ChordType.chordType","ChordType.get",get$a);function names$8(){return dictionary$3.map(e=>e.name).filter(e=>e)}function symbols(){return dictionary$3.map(e=>e.aliases[0]).filter(e=>e)}function keys$1(){return Object.keys(index$4)}function all$3(){return dictionary$3.slice()}var entries$2=deprecate("ChordType.entries","ChordType.all",all$3);function removeAll$1(){dictionary$3=[],index$4={}}function add$5(e,o,l){const d=getQuality$2(e),O={...get$b(e),name:l||"",quality:d,intervals:e,aliases:o};dictionary$3.push(O),O.name&&(index$4[O.name]=O),index$4[O.setNum]=O,index$4[O.chroma]=O,O.aliases.forEach(A=>addAlias$3(O,A))}function addAlias$3(e,o){index$4[o]=e}function getQuality$2(e){const o=l=>e.indexOf(l)!==-1;return o("5A")?"Augmented":o("3M")?"Major":o("5d")?"Diminished":o("3m")?"Minor":"Unknown"}data_default$4.forEach(([e,o,l])=>add$5(e.split(" "),l.split(" "),o)),dictionary$3.sort((e,o)=>e.setNum-o.setNum);var chord_type_default={names:names$8,symbols,get:get$a,all:all$3,add:add$5,removeAll:removeAll$1,keys:keys$1,entries:entries$2,chordType},SCALES=[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2M 3m 4P 5P 6m 7m","minor","aeolian"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 6A","whole tone","messiaen's mode #1"],["1P 2m 4P 4A 5P 7M","messiaen's mode #5"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2m 2A 3M 4A 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished","aeolian b5"],["1P 2M 3M 4P 5P 6m 7m","mixolydian b6","melodic minor fifth mode","hindu"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7","overtone"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","dorian b2","phrygian #6","melodic minor second mode"],["1P 2m 3m 4d 5d 6m 7d","ultralocrian","superlocrian bb7","superlocrian diminished"],["1P 2m 3m 4P 5d 6M 7m","locrian 6","locrian natural 6","locrian sharp 6"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 4A 5P 6M 7m","dorian #4","ukrainian dorian","romanian minor","altered dorian"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","major augmented","major #5","ionian augmented","ionian #5"],["1P 2A 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 2M 4P 4A 5P 6m 7M","messiaen's mode #4"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished","messiaen's mode #2"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3M 4P 4A 5A 6A 7M","messiaen's mode #6"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2M 3m 3M 4A 5P 6m 7m 7M","messiaen's mode #3"],["1P 2m 2M 3m 4P 4A 5P 6m 6M 7M","messiaen's mode #7"],["1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M","chromatic"]],data_default$3=SCALES,NoScaleType={...EmptyPcset,intervals:[],aliases:[]},dictionary$2=[],index$3={};function names$7(){return dictionary$2.map(e=>e.name)}function get$9(e){return index$3[e]||NoScaleType}var scaleType=get$9;function all$2(){return dictionary$2.slice()}var entries$1=all$2;function keys(){return Object.keys(index$3)}function removeAll(){dictionary$2=[],index$3={}}function add$4(e,o,l=[]){const d={...get$b(e),name:o,intervals:e,aliases:l};return dictionary$2.push(d),index$3[d.name]=d,index$3[d.setNum]=d,index$3[d.chroma]=d,d.aliases.forEach(O=>addAlias$2(d,O)),d}function addAlias$2(e,o){index$3[o]=e}data_default$3.forEach(([e,o,...l])=>add$4(e.split(" "),o,l));var scale_type_default={names:names$7,get:get$9,all:all$2,add:add$4,removeAll,keys,entries:entries$1,scaleType},NoChord={empty:!0,name:"",symbol:"",root:"",rootDegree:0,type:"",tonic:null,setNum:NaN,quality:"Unknown",chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function tokenize$3(e){const[o,l,d,O]=tokenizeNote(e);return o===""?["",e]:o==="A"&&O==="ug"?["","aug"]:[o+l,d+O]}function get$8(e){if(e==="")return NoChord;if(Array.isArray(e)&&e.length===2)return getChord(e[1],e[0]);{const[o,l]=tokenize$3(e),d=getChord(l,o);return d.empty?getChord(e):d}}function getChord(e,o,l){const d=get$a(e),O=note(o||""),A=note(l||"");if(d.empty||o&&O.empty||l&&A.empty)return NoChord;const S=distance$3(O.pc,A.pc),$=d.intervals.indexOf(S)+1;if(!A.empty&&!$)return NoChord;const F=Array.from(d.intervals);for(let V=1;V<$;V++){const B=F[0][0],U=F[0][1],q=parseInt(B,10)+7;F.push(`${q}${U}`),F.shift()}const E=O.empty?[]:F.map(V=>transpose$3(O,V));e=d.aliases.indexOf(e)!==-1?e:d.aliases[0];const L=`${O.empty?"":O.pc}${e}${A.empty||$<=1?"":"/"+A.pc}`,N=`${o?O.pc+" ":""}${d.name}${$>1&&l?" over "+A.pc:""}`;return{...d,name:N,symbol:L,type:d.name,root:A.name,intervals:F,rootDegree:$,tonic:O.name,notes:E}}var chord=deprecate("Chord.chord","Chord.get",get$8);function transpose$2(e,o){const[l,d]=tokenize$3(e);return l?transpose$3(l,o)+d:e}function chordScales(e){const o=get$8(e),l=isSupersetOf(o.chroma);return all$2().filter(d=>l(d.chroma)).map(d=>d.name)}function extended$1(e){const o=get$8(e),l=isSupersetOf(o.chroma);return all$3().filter(d=>l(d.chroma)).map(d=>o.tonic+d.aliases[0])}function reduced$1(e){const o=get$8(e),l=isSubsetOf(o.chroma);return all$3().filter(d=>l(d.chroma)).map(d=>o.tonic+d.aliases[0])}function degrees$1(e){const{intervals:o,tonic:l}=get$8(e),d=tonicIntervalsTransposer(o,l);return O=>O?d(O>0?O-1:O):""}function steps$1(e){const{intervals:o,tonic:l}=get$8(e);return tonicIntervalsTransposer(o,l)}var chord_default={getChord,get:get$8,detect:detect$1,chordScales,extended:extended$1,reduced:reduced$1,tokenize:tokenize$3,transpose:transpose$2,degrees:degrees$1,steps:steps$1,chord},DATA=[[.125,"dl",["large","duplex longa","maxima","octuple","octuple whole"]],[.25,"l",["long","longa"]],[.5,"d",["double whole","double","breve"]],[1,"w",["whole","semibreve"]],[2,"h",["half","minim"]],[4,"q",["quarter","crotchet"]],[8,"e",["eighth","quaver"]],[16,"s",["sixteenth","semiquaver"]],[32,"t",["thirty-second","demisemiquaver"]],[64,"sf",["sixty-fourth","hemidemisemiquaver"]],[128,"h",["hundred twenty-eighth"]],[256,"th",["two hundred fifty-sixth"]]],data_default$2=DATA,VALUES=[];data_default$2.forEach(([e,o,l])=>add$3(e,o,l));var NoDuration={empty:!0,name:"",value:0,fraction:[0,0],shorthand:"",dots:"",names:[]};function names$6(){return VALUES.reduce((e,o)=>(o.names.forEach(l=>e.push(l)),e),[])}function shorthands(){return VALUES.map(e=>e.shorthand)}var REGEX$5=/^([^.]+)(\.*)$/;function get$7(e){const[o,l,d]=REGEX$5.exec(e)||[],O=VALUES.find($=>$.shorthand===l||$.names.includes(l));if(!O)return NoDuration;const A=calcDots(O.fraction,d.length),S=A[0]/A[1];return{...O,name:e,dots:d,value:S,fraction:A}}var value=e=>get$7(e).value,fraction=e=>get$7(e).fraction,duration_value_default={names:names$6,shorthands,get:get$7,value,fraction};function add$3(e,o,l){VALUES.push({empty:!1,dots:"",name:"",value:1/e,fraction:e<1?[1/e,1]:[1,e],shorthand:o,names:l})}function calcDots(e,o){const l=Math.pow(2,o);let d=e[0]*l,O=e[1]*l;const A=d;for(let S=0;S<o;S++)d+=A/Math.pow(2,S+1);for(;d%2===0&&O%2===0;)d/=2,O/=2;return[d,O]}function names$5(){return"1P 2M 3M 4P 5P 6m 7m".split(" ")}var get$6=interval$3,name$1=e=>interval$3(e).name,semitones=e=>interval$3(e).semitones,quality=e=>interval$3(e).q,num=e=>interval$3(e).num;function simplify$2(e){const o=interval$3(e);return o.empty?"":o.simple+o.q}function invert(e){const o=interval$3(e);if(o.empty)return"";const l=(7-o.step)%7,d=o.type==="perfectable"?-o.alt:-(o.alt+1);return interval$3({step:l,alt:d,oct:o.oct,dir:o.dir}).name}var IN=[1,2,2,3,3,4,5,5,6,6,7,7],IQ="P m M m M P d P m M m M".split(" ");function fromSemitones(e){const o=e<0?-1:1,l=Math.abs(e),d=l%12,O=Math.floor(l/12);return o*(IN[d]+7*O)+IQ[d]}var distance$2=distance$5,add$2=combinator((e,o)=>[e[0]+o[0],e[1]+o[1]]),addTo=e=>o=>add$2(e,o),substract=combinator((e,o)=>[e[0]-o[0],e[1]-o[1]]);function transposeFifths$2(e,o){const l=get$6(e);if(l.empty)return"";const[d,O,A]=l.coord;return coordToInterval$1([d+o,O,A]).name}var interval_default={names:names$5,get:get$6,name:name$1,num,semitones,quality,fromSemitones,distance:distance$2,invert,simplify:simplify$2,add:add$2,addTo,substract,transposeFifths:transposeFifths$2};function combinator(e){return(o,l)=>{const d=interval$3(o).coord,O=interval$3(l).coord;if(d&&O){const A=e(d,O);return coordToInterval$1(A).name}}}function isMidi(e){return+e>=0&&+e<=127}function toMidi(e){if(isMidi(e))return+e;const o=note$1(e);return o.empty?null:o.midi}function midiToFreq(e,o=440){return Math.pow(2,(e-69)/12)*o}var L2=Math.log(2),L440=Math.log(440);function freqToMidi(e){const o=12*(Math.log(e)-L440)/L2+69;return Math.round(o*100)/100}var SHARPS="C C# D D# E F F# G G# A A# B".split(" "),FLATS="C Db D Eb E F Gb G Ab A Bb B".split(" ");function midiToNoteName(e,o={}){if(isNaN(e)||e===-1/0||e===1/0)return"";e=Math.round(e);const d=(o.sharps===!0?SHARPS:FLATS)[e%12];if(o.pitchClass)return d;const O=Math.floor(e/12)-1;return d+O}function chroma$1(e){return e%12}function pcsetFromChroma(e){return e.split("").reduce((o,l,d)=>(d<12&&l==="1"&&o.push(d),o),[])}function pcsetFromMidi(e){return e.map(chroma$1).sort((o,l)=>o-l).filter((o,l,d)=>l===0||o!==d[l-1])}function pcset(e){return Array.isArray(e)?pcsetFromMidi(e):pcsetFromChroma(e)}function pcsetNearest(e){const o=pcset(e);return l=>{const d=chroma$1(l);for(let O=0;O<12;O++){if(o.includes(d+O))return l+O;if(o.includes(d-O))return l-O}}}function pcsetSteps(e,o){const l=pcset(e),d=l.length;return O=>{const A=O<0?(d- -O%d)%d:O%d,S=Math.floor(O/d);return l[A]+S*12+o}}function pcsetDegrees(e,o){const l=pcsetSteps(e,o);return d=>{if(d!==0)return l(d>0?d-1:d)}}var index_default$4={chroma:chroma$1,freqToMidi,isMidi,midiToFreq,midiToNoteName,pcsetNearest,pcset,pcsetDegrees,pcsetSteps,toMidi},NAMES$2=["C","D","E","F","G","A","B"],toName=e=>e.name,onlyNotes=e=>e.map(note$1).filter(o=>!o.empty);function names$4(e){return e===void 0?NAMES$2.slice():Array.isArray(e)?onlyNotes(e).map(toName):[]}var get$5=note$1,name=e=>get$5(e).name,pitchClass=e=>get$5(e).pc,accidentals=e=>get$5(e).acc,octave=e=>get$5(e).oct,midi=e=>get$5(e).midi,freq=e=>get$5(e).freq,chroma=e=>get$5(e).chroma;function fromMidi(e){return midiToNoteName(e)}function fromFreq(e){return midiToNoteName(freqToMidi(e))}function fromFreqSharps(e){return midiToNoteName(freqToMidi(e),{sharps:!0})}function fromMidiSharps(e){return midiToNoteName(e,{sharps:!0})}var distance$1=distance$5,transpose$1=transpose$5,tr=transpose$5,transposeBy=e=>o=>transpose$1(o,e),trBy=transposeBy,transposeFrom=e=>o=>transpose$1(e,o),trFrom=transposeFrom;function transposeFifths$1(e,o){return transpose$1(e,[o,0])}var trFifths=transposeFifths$1;function transposeOctaves(e,o){return transpose$1(e,[0,o])}var ascending=(e,o)=>e.height-o.height,descending=(e,o)=>o.height-e.height;function sortedNames(e,o){return o=o||ascending,onlyNotes(e).sort(o).map(toName)}function sortedUniqNames(e){return sortedNames(e,ascending).filter((o,l,d)=>l===0||o!==d[l-1])}var simplify$1=e=>{const o=get$5(e);return o.empty?"":midiToNoteName(o.midi||o.chroma,{sharps:o.alt>0,pitchClass:o.midi===null})};function enharmonic(e,o){const l=get$5(e);if(l.empty)return"";const d=get$5(o||midiToNoteName(l.midi||l.chroma,{sharps:l.alt<0,pitchClass:!0}));if(d.empty||d.chroma!==l.chroma)return"";if(l.oct===void 0)return d.pc;const O=l.chroma-l.alt,A=d.chroma-d.alt,S=O>11||A<0?-1:O<0||A>11?1:0,$=l.oct+S;return d.pc+$}var index_default$3={names:names$4,get:get$5,name,pitchClass,accidentals,octave,midi,ascending,descending,distance:distance$1,sortedNames,sortedUniqNames,fromMidi,fromMidiSharps,freq,fromFreq,fromFreqSharps,chroma,transpose:transpose$1,tr,transposeBy,trBy,transposeFrom,trFrom,transposeFifths:transposeFifths$1,transposeOctaves,trFifths,simplify:simplify$1,enharmonic};function isNamedPitch$2(e){return e!==null&&typeof e=="object"&&"name"in e&&typeof e.name=="string"}function isPitch$2(e){return e!==null&&typeof e=="object"&&"step"in e&&typeof e.step=="number"&&"alt"in e&&typeof e.alt=="number"&&!isNaN(e.step)&&!isNaN(e.alt)}var FIFTHS$2=[0,2,4,-1,1,3,5],STEPS_TO_OCTS$2=FIFTHS$2.map(e=>Math.floor(e*7/12));function coordinates$2(e){const{step:o,alt:l,oct:d,dir:O=1}=e,A=FIFTHS$2[o]+7*l;if(d===void 0)return[O*A];const S=d-STEPS_TO_OCTS$2[o]-4*l;return[O*A,O*S]}var fillStr$2=(e,o)=>Array(Math.abs(o)+1).join(e),NoInterval$2=Object.freeze({empty:!0,name:"",num:NaN,q:"",type:"",step:NaN,alt:NaN,dir:NaN,simple:NaN,semitones:NaN,chroma:NaN,coord:[],oct:NaN}),INTERVAL_TONAL_REGEX$2="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",INTERVAL_SHORTHAND_REGEX$2="(AA|A|P|M|m|d|dd)([-+]?\\d+)",REGEX$4=new RegExp("^"+INTERVAL_TONAL_REGEX$2+"|"+INTERVAL_SHORTHAND_REGEX$2+"$");function tokenizeInterval$2(e){const o=REGEX$4.exec(`${e}`);return o===null?["",""]:o[1]?[o[1],o[2]]:[o[4],o[3]]}var cache$3={};function interval$2(e){return typeof e=="string"?cache$3[e]||(cache$3[e]=parse$4(e)):isPitch$2(e)?interval$2(pitchName$2(e)):isNamedPitch$2(e)?interval$2(e.name):NoInterval$2}var SIZES$2=[0,2,4,5,7,9,11],TYPES$2="PMMPPMM";function parse$4(e){const o=tokenizeInterval$2(e);if(o[0]==="")return NoInterval$2;const l=+o[0],d=o[1],O=(Math.abs(l)-1)%7,A=TYPES$2[O];if(A==="M"&&d==="P")return NoInterval$2;const S=A==="M"?"majorable":"perfectable",$=""+l+d,F=l<0?-1:1,E=l===8||l===-8?l:F*(O+1),L=qToAlt$2(S,d),N=Math.floor((Math.abs(l)-1)/7),V=F*(SIZES$2[O]+L+12*N),B=(F*(SIZES$2[O]+L)%12+12)%12,U=coordinates$2({step:O,alt:L,oct:N,dir:F});return{empty:!1,name:$,num:l,q:d,step:O,alt:L,dir:F,type:S,simple:E,semitones:V,chroma:B,coord:U,oct:N}}function qToAlt$2(e,o){return o==="M"&&e==="majorable"||o==="P"&&e==="perfectable"?0:o==="m"&&e==="majorable"?-1:/^A+$/.test(o)?o.length:/^d+$/.test(o)?-1*(e==="perfectable"?o.length:o.length+1):0}function pitchName$2(e){const{step:o,alt:l,oct:d=0,dir:O}=e;if(!O)return"";const A=o+1+7*d,S=A===0?o+1:A,$=O<0?"-":"",F=TYPES$2[o]==="M"?"majorable":"perfectable";return $+S+altToQ$2(F,l)}function altToQ$2(e,o){return o===0?e==="majorable"?"M":"P":o===-1&&e==="majorable"?"m":o>0?fillStr$2("A",o):fillStr$2("d",e==="perfectable"?o:o+1)}var NoRomanNumeral={empty:!0,name:"",chordType:""},cache$2={};function get$4(e){return typeof e=="string"?cache$2[e]||(cache$2[e]=parse$3(e)):typeof e=="number"?get$4(NAMES$1[e]||""):isPitch$2(e)?fromPitch(e):isNamedPitch$2(e)?get$4(e.name):NoRomanNumeral}var romanNumeral=get$4;function names$3(e=!0){return(e?NAMES$1:NAMES_MINOR).slice()}function fromPitch(e){return get$4(altToAcc$1(e.alt)+NAMES$1[e.step])}var REGEX$3=/^(#{1,}|b{1,}|x{1,}|)(IV|I{1,3}|VI{0,2}|iv|i{1,3}|vi{0,2})([^IViv]*)$/;function tokenize$2(e){return REGEX$3.exec(e)||["","","",""]}var ROMANS="I II III IV V VI VII",NAMES$1=ROMANS.split(" "),NAMES_MINOR=ROMANS.toLowerCase().split(" ");function parse$3(e){const[o,l,d,O]=tokenize$2(e);if(!d)return NoRomanNumeral;const A=d.toUpperCase(),S=NAMES$1.indexOf(A),$=accToAlt$1(l),F=1;return{empty:!1,name:o,roman:d,interval:interval$2({step:S,alt:$,dir:F}).name,acc:l,chordType:O,alt:$,step:S,major:d===A,oct:0,dir:F}}var roman_numeral_default={names:names$3,get:get$4,romanNumeral},Empty=Object.freeze([]),NoKey={type:"major",tonic:"",alteration:0,keySignature:""},NoKeyScale={tonic:"",grades:Empty,intervals:Empty,scale:Empty,triads:Empty,chords:Empty,chordsHarmonicFunction:Empty,chordScales:Empty,secondaryDominants:Empty,secondaryDominantSupertonics:Empty,substituteDominantsMinorRelative:Empty,substituteDominants:Empty,substituteDominantSupertonics:Empty,secondaryDominantsMinorRelative:Empty},NoMajorKey={...NoKey,...NoKeyScale,type:"major",minorRelative:"",scale:Empty,substituteDominants:Empty,secondaryDominantSupertonics:Empty,substituteDominantsMinorRelative:Empty},NoMinorKey={...NoKey,type:"minor",relativeMajor:"",natural:NoKeyScale,harmonic:NoKeyScale,melodic:NoKeyScale},mapScaleToType=(e,o,l="")=>o.map((d,O)=>`${e[O]}${l}${d}`);function keyScale(e,o,l,d,O){return A=>{const S=e.map(B=>get$4(B).interval||""),$=S.map(B=>transpose$1(A,B)),F=mapScaleToType($,l),E=$.map(B=>transpose$1(B,"5P")).map(B=>$.includes(B)&&!F.includes(B+"7")?B+"7":""),L=supertonics(E,o),N=E.map(B=>{if(!B)return"";const U=B.slice(0,-1);return transpose$1(U,"5d")+"7"}),V=supertonics(N,o);return{tonic:A,grades:e,intervals:S,scale:$,triads:mapScaleToType($,o),chords:F,chordsHarmonicFunction:d.slice(),chordScales:mapScaleToType($,O," "),secondaryDominants:E,secondaryDominantSupertonics:L,substituteDominants:N,substituteDominantSupertonics:V,secondaryDominantsMinorRelative:L,substituteDominantsMinorRelative:V}}}var supertonics=(e,o)=>e.map((l,d)=>{if(!l)return"";const O=l.slice(0,-1),A=transpose$1(O,"5P");return o[d].endsWith("m")?A+"m7":A+"m7b5"}),distInFifths=(e,o)=>{const l=note$1(e),d=note$1(o);return l.empty||d.empty?0:d.coord[0]-l.coord[0]},MajorScale=keyScale("I II III IV V VI VII".split(" ")," m m   m dim".split(" "),"maj7 m7 m7 maj7 7 m7 m7b5".split(" "),"T SD T SD D T D".split(" "),"major,dorian,phrygian,lydian,mixolydian,minor,locrian".split(",")),NaturalScale=keyScale("I II bIII IV V bVI bVII".split(" "),"m dim  m m  ".split(" "),"m7 m7b5 maj7 m7 m7 maj7 7".split(" "),"T SD T SD D SD SD".split(" "),"minor,locrian,major,dorian,phrygian,lydian,mixolydian".split(",")),HarmonicScale=keyScale("I II bIII IV V bVI VII".split(" "),"m dim aug m   dim".split(" "),"mMaj7 m7b5 +maj7 m7 7 maj7 o7".split(" "),"T SD T SD D SD D".split(" "),"harmonic minor,locrian 6,major augmented,lydian diminished,phrygian dominant,lydian #9,ultralocrian".split(",")),MelodicScale=keyScale("I II bIII IV V VI VII".split(" "),"m m aug   dim dim".split(" "),"m6 m7 +maj7 7 7 m7b5 m7b5".split(" "),"T SD T SD D  ".split(" "),"melodic minor,dorian b2,lydian augmented,lydian dominant,mixolydian b6,locrian #2,altered".split(","));function majorKey(e){const o=note$1(e).pc;if(!o)return NoMajorKey;const l=MajorScale(o),d=distInFifths("C",o);return{...l,type:"major",minorRelative:transpose$1(o,"-3m"),alteration:d,keySignature:altToAcc$1(d)}}function minorKey(e){const o=note$1(e).pc;if(!o)return NoMinorKey;const l=distInFifths("C",o)-3;return{type:"minor",tonic:o,relativeMajor:transpose$1(o,"3m"),alteration:l,keySignature:altToAcc$1(l),natural:NaturalScale(o),harmonic:HarmonicScale(o),melodic:MelodicScale(o)}}function majorTonicFromKeySignature(e){return typeof e=="number"?transposeFifths$1("C",e):typeof e=="string"&&/^b+|#+$/.test(e)?transposeFifths$1("C",accToAlt$1(e)):null}var index_default$2={majorKey,majorTonicFromKeySignature,minorKey};function isNamedPitch$1(e){return e!==null&&typeof e=="object"&&"name"in e&&typeof e.name=="string"}function isPitch$1(e){return e!==null&&typeof e=="object"&&"step"in e&&typeof e.step=="number"&&"alt"in e&&typeof e.alt=="number"&&!isNaN(e.step)&&!isNaN(e.alt)}var FIFTHS$1=[0,2,4,-1,1,3,5],STEPS_TO_OCTS$1=FIFTHS$1.map(e=>Math.floor(e*7/12));function coordinates$1(e){const{step:o,alt:l,oct:d,dir:O=1}=e,A=FIFTHS$1[o]+7*l;if(d===void 0)return[O*A];const S=d-STEPS_TO_OCTS$1[o]-4*l;return[O*A,O*S]}var FIFTHS_TO_STEPS=[3,0,4,1,5,2,6];function pitch(e){const[o,l,d]=e,O=FIFTHS_TO_STEPS[unaltered(o)],A=Math.floor((o+1)/7);if(l===void 0)return{step:O,alt:A,dir:d};const S=l+4*A+STEPS_TO_OCTS$1[O];return{step:O,alt:A,oct:S,dir:d}}function unaltered(e){const o=(e+1)%7;return o<0?7+o:o}var fillStr$1=(e,o)=>Array(Math.abs(o)+1).join(e),NoInterval$1=Object.freeze({empty:!0,name:"",num:NaN,q:"",type:"",step:NaN,alt:NaN,dir:NaN,simple:NaN,semitones:NaN,chroma:NaN,coord:[],oct:NaN}),INTERVAL_TONAL_REGEX$1="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",INTERVAL_SHORTHAND_REGEX$1="(AA|A|P|M|m|d|dd)([-+]?\\d+)",REGEX$2=new RegExp("^"+INTERVAL_TONAL_REGEX$1+"|"+INTERVAL_SHORTHAND_REGEX$1+"$");function tokenizeInterval$1(e){const o=REGEX$2.exec(`${e}`);return o===null?["",""]:o[1]?[o[1],o[2]]:[o[4],o[3]]}var cache$1={};function interval$1(e){return typeof e=="string"?cache$1[e]||(cache$1[e]=parse$2(e)):isPitch$1(e)?interval$1(pitchName$1(e)):isNamedPitch$1(e)?interval$1(e.name):NoInterval$1}var SIZES$1=[0,2,4,5,7,9,11],TYPES$1="PMMPPMM";function parse$2(e){const o=tokenizeInterval$1(e);if(o[0]==="")return NoInterval$1;const l=+o[0],d=o[1],O=(Math.abs(l)-1)%7,A=TYPES$1[O];if(A==="M"&&d==="P")return NoInterval$1;const S=A==="M"?"majorable":"perfectable",$=""+l+d,F=l<0?-1:1,E=l===8||l===-8?l:F*(O+1),L=qToAlt$1(S,d),N=Math.floor((Math.abs(l)-1)/7),V=F*(SIZES$1[O]+L+12*N),B=(F*(SIZES$1[O]+L)%12+12)%12,U=coordinates$1({step:O,alt:L,oct:N,dir:F});return{empty:!1,name:$,num:l,q:d,step:O,alt:L,dir:F,type:S,simple:E,semitones:V,chroma:B,coord:U,oct:N}}function coordToInterval(e,o){const[l,d=0]=e,A=l*7+d*12<0?[-l,-d,-1]:[l,d,1];return interval$1(pitch(A))}function qToAlt$1(e,o){return o==="M"&&e==="majorable"||o==="P"&&e==="perfectable"?0:o==="m"&&e==="majorable"?-1:/^A+$/.test(o)?o.length:/^d+$/.test(o)?-1*(e==="perfectable"?o.length:o.length+1):0}function pitchName$1(e){const{step:o,alt:l,oct:d=0,dir:O}=e;if(!O)return"";const A=o+1+7*d,S=A===0?o+1:A,$=O<0?"-":"",F=TYPES$1[o]==="M"?"majorable":"perfectable";return $+S+altToQ$1(F,l)}function altToQ$1(e,o){return o===0?e==="majorable"?"M":"P":o===-1&&e==="majorable"?"m":o>0?fillStr$1("A",o):fillStr$1("d",e==="perfectable"?o:o+1)}var get$3=interval$1;function simplify(e){const o=interval$1(e);return o.empty?"":o.simple+o.q}function transposeFifths(e,o){const l=get$3(e);if(l.empty)return"";const[d,O,A]=l.coord;return coordToInterval([d+o,O,A]).name}var MODES=[[0,2773,0,"ionian","","Maj7","major"],[1,2902,2,"dorian","m","m7"],[2,3418,4,"phrygian","m","m7"],[3,2741,-1,"lydian","","Maj7"],[4,2774,1,"mixolydian","","7"],[5,2906,3,"aeolian","m","m7","minor"],[6,3434,5,"locrian","dim","m7b5"]],NoMode={...EmptyPcset,name:"",alt:0,modeNum:NaN,triad:"",seventh:"",aliases:[]},modes=MODES.map(toMode),index$2={};modes.forEach(e=>{index$2[e.name]=e,e.aliases.forEach(o=>{index$2[o]=e})});function get$2(e){return typeof e=="string"?index$2[e.toLowerCase()]||NoMode:e&&e.name?get$2(e.name):NoMode}var mode=get$2;function all$1(){return modes.slice()}var entries=all$1;function names$2(){return modes.map(e=>e.name)}function toMode(e){const[o,l,d,O,A,S,$]=e,F=$?[$]:[],E=Number(l).toString(2);return{empty:!1,intervals:get$9(O).intervals,modeNum:o,chroma:E,normalized:E,name:O,setNum:l,alt:d,triad:A,seventh:S,aliases:F}}function notes(e,o){return get$2(e).intervals.map(l=>transpose$5(o,l))}function chords(e){return(o,l)=>{const d=get$2(o);if(d.empty)return[];const O=rotate(d.modeNum,e),A=d.intervals.map(S=>transpose$5(l,S));return O.map((S,$)=>A[$]+S)}}var triads$1=chords(MODES.map(e=>e[4])),seventhChords=chords(MODES.map(e=>e[5]));function distance(e,o){const l=get$2(o),d=get$2(e);return l.empty||d.empty?"":simplify(transposeFifths("1P",d.alt-l.alt))}function relativeTonic(e,o,l){return transpose$5(l,distance(e,o))}var mode_default={get:get$2,names:names$2,all:all$1,distance,relativeTonic,notes,triads:triads$1,seventhChords,entries,mode},CHORDS$1=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7 Δ ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 Δ9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 Δ#4 Δ#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -Δ7 mΔ -^7 -maj7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim ° o"],["1P 3m 5d 7d","diminished seventh","dim7 °7 o7"],["1P 3m 5d 7m","half-diminished","m7b5 ø -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 Δ9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],data_default$1=CHORDS$1;({...EmptyPcset});var dictionary$1=[],index$1={};function add$1(e,o,l){const d=getQuality$1(e),O={...get$b(e),name:l||"",quality:d,intervals:e,aliases:o};dictionary$1.push(O),O.name&&(index$1[O.name]=O),index$1[O.setNum]=O,index$1[O.chroma]=O,O.aliases.forEach(A=>addAlias$1(O,A))}function addAlias$1(e,o){index$1[o]=e}function getQuality$1(e){const o=l=>e.indexOf(l)!==-1;return o("5A")?"Augmented":o("3M")?"Major":o("5d")?"Diminished":o("3m")?"Minor":"Unknown"}data_default$1.forEach(([e,o,l])=>add$1(e.split(" "),l.split(" "),o)),dictionary$1.sort((e,o)=>e.setNum-o.setNum);function isNamedPitch(e){return e!==null&&typeof e=="object"&&"name"in e&&typeof e.name=="string"}function isPitch(e){return e!==null&&typeof e=="object"&&"step"in e&&typeof e.step=="number"&&"alt"in e&&typeof e.alt=="number"&&!isNaN(e.step)&&!isNaN(e.alt)}var FIFTHS=[0,2,4,-1,1,3,5],STEPS_TO_OCTS=FIFTHS.map(e=>Math.floor(e*7/12));function coordinates(e){const{step:o,alt:l,oct:d,dir:O=1}=e,A=FIFTHS[o]+7*l;if(d===void 0)return[O*A];const S=d-STEPS_TO_OCTS[o]-4*l;return[O*A,O*S]}var fillStr=(e,o)=>Array(Math.abs(o)+1).join(e),NoInterval=Object.freeze({empty:!0,name:"",num:NaN,q:"",type:"",step:NaN,alt:NaN,dir:NaN,simple:NaN,semitones:NaN,chroma:NaN,coord:[],oct:NaN}),INTERVAL_TONAL_REGEX="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",INTERVAL_SHORTHAND_REGEX="(AA|A|P|M|m|d|dd)([-+]?\\d+)",REGEX$1=new RegExp("^"+INTERVAL_TONAL_REGEX+"|"+INTERVAL_SHORTHAND_REGEX+"$");function tokenizeInterval(e){const o=REGEX$1.exec(`${e}`);return o===null?["",""]:o[1]?[o[1],o[2]]:[o[4],o[3]]}var cache={};function interval(e){return typeof e=="string"?cache[e]||(cache[e]=parse$1(e)):isPitch(e)?interval(pitchName(e)):isNamedPitch(e)?interval(e.name):NoInterval}var SIZES=[0,2,4,5,7,9,11],TYPES="PMMPPMM";function parse$1(e){const o=tokenizeInterval(e);if(o[0]==="")return NoInterval;const l=+o[0],d=o[1],O=(Math.abs(l)-1)%7,A=TYPES[O];if(A==="M"&&d==="P")return NoInterval;const S=A==="M"?"majorable":"perfectable",$=""+l+d,F=l<0?-1:1,E=l===8||l===-8?l:F*(O+1),L=qToAlt(S,d),N=Math.floor((Math.abs(l)-1)/7),V=F*(SIZES[O]+L+12*N),B=(F*(SIZES[O]+L)%12+12)%12,U=coordinates({step:O,alt:L,oct:N,dir:F});return{empty:!1,name:$,num:l,q:d,step:O,alt:L,dir:F,type:S,simple:E,semitones:V,chroma:B,coord:U,oct:N}}function qToAlt(e,o){return o==="M"&&e==="majorable"||o==="P"&&e==="perfectable"?0:o==="m"&&e==="majorable"?-1:/^A+$/.test(o)?o.length:/^d+$/.test(o)?-1*(e==="perfectable"?o.length:o.length+1):0}function pitchName(e){const{step:o,alt:l,oct:d=0,dir:O}=e;if(!O)return"";const A=o+1+7*d,S=A===0?o+1:A,$=O<0?"-":"",F=TYPES[o]==="M"?"majorable":"perfectable";return $+S+altToQ(F,l)}function altToQ(e,o){return o===0?e==="majorable"?"M":"P":o===-1&&e==="majorable"?"m":o>0?fillStr("A",o):fillStr("d",e==="perfectable"?o:o+1)}function tokenize$1(e){const[o,l,d,O]=tokenizeNote$1(e);return o===""?tokenizeBass("",e):o==="A"&&O==="ug"?tokenizeBass("","aug"):tokenizeBass(o+l,d+O)}function tokenizeBass(e,o){const l=o.split("/");if(l.length===1)return[e,l[0],""];const[d,O,A,S]=tokenizeNote$1(l[1]);return d!==""&&A===""&&S===""?[e,l[0],d+O]:[e,o,""]}function fromRomanNumerals(e,o){return o.map(get$4).map(d=>transpose$5(e,interval(d))+d.chordType)}function toRomanNumerals(e,o){return o.map(l=>{const[d,O]=tokenize$1(l),A=distance$5(e,d);return get$4(interval(A)).name+O})}var progression_default={fromRomanNumerals,toRomanNumerals};function numeric(e){const o=compact(e.map(l=>typeof l=="number"?l:toMidi(l)));return!e.length||o.length!==e.length?[]:o.reduce((l,d)=>{const O=l[l.length-1];return l.concat(range(O,d).slice(1))},[o[0]])}function chromatic(e,o){return numeric(e).map(l=>midiToNoteName(l,o))}var index_default$1={numeric,chromatic},CHORDS=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7 Δ ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 Δ9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 Δ#4 Δ#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -Δ7 mΔ -^7 -maj7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim ° o"],["1P 3m 5d 7d","diminished seventh","dim7 °7 o7"],["1P 3m 5d 7m","half-diminished","m7b5 ø -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 Δ9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],data_default=CHORDS;({...EmptyPcset});var dictionary=[],index={};function all(){return dictionary.slice()}function add(e,o,l){const d=getQuality(e),O={...get$b(e),name:l||"",quality:d,intervals:e,aliases:o};dictionary.push(O),O.name&&(index[O.name]=O),index[O.setNum]=O,index[O.chroma]=O,O.aliases.forEach(A=>addAlias(O,A))}function addAlias(e,o){index[o]=e}function getQuality(e){const o=l=>e.indexOf(l)!==-1;return o("5A")?"Augmented":o("3M")?"Major":o("5d")?"Diminished":o("3m")?"Minor":"Unknown"}data_default.forEach(([e,o,l])=>add(e.split(" "),l.split(" "),o)),dictionary.sort((e,o)=>e.setNum-o.setNum);var NoScale={empty:!0,name:"",type:"",tonic:null,setNum:NaN,chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function tokenize(e){if(typeof e!="string")return["",""];const o=e.indexOf(" "),l=note$1(e.substring(0,o));if(l.empty){const O=note$1(e);return O.empty?["",e.toLowerCase()]:[O.name,""]}const d=e.substring(l.name.length+1).toLowerCase();return[l.name,d.length?d:""]}var names$1=names$7;function get$1(e){const o=Array.isArray(e)?e:tokenize(e),l=note$1(o[0]).name,d=get$9(o[1]);if(d.empty)return NoScale;const O=d.name,A=l?d.intervals.map($=>transpose$5(l,$)):[],S=l?l+" "+O:O;return{...d,name:S,type:O,tonic:l,notes:A}}var scale$1=get$1;function detect(e,o={}){const l=chroma$3(e),d=note$1(o.tonic??e[0]??""),O=d.chroma;if(O===void 0)return[];const A=l.split("");A[O]="1";const S=rotate(O,A).join(""),$=all$2().find(E=>E.chroma===S),F=[];return $&&F.push(d.name+" "+$.name),o.match==="exact"||extended(S).forEach(E=>{F.push(d.name+" "+E)}),F}function scaleChords(e){const o=get$1(e),l=isSubsetOf(o.chroma);return all().filter(d=>l(d.chroma)).map(d=>d.aliases[0])}function extended(e){const o=isChroma(e)?e:get$1(e).chroma,l=isSupersetOf(o);return all$2().filter(d=>l(d.chroma)).map(d=>d.name)}function reduced(e){const o=isSubsetOf(get$1(e).chroma);return all$2().filter(l=>o(l.chroma)).map(l=>l.name)}function scaleNotes(e){const o=e.map(O=>note$1(O).pc).filter(O=>O),l=o[0],d=sortedUniqNames(o);return rotate(d.indexOf(l),d)}function modeNames(e){const o=get$1(e);if(o.empty)return[];const l=o.tonic?o.notes:o.intervals;return modes$1(o.chroma).map((d,O)=>{const A=get$1(d).name;return A?[l[O],A]:["",""]}).filter(d=>d[0])}function getNoteNameOf(e){const o=Array.isArray(e)?scaleNotes(e):get$1(e).notes,l=o.map(d=>note$1(d).chroma);return d=>{const O=note$1(typeof d=="number"?fromMidi(d):d),A=O.height;if(A===void 0)return;const S=A%12,$=l.indexOf(S);if($!==-1)return enharmonic(O.name,o[$])}}function rangeOf(e){const o=getNoteNameOf(e);return(l,d)=>{const O=note$1(l).height,A=note$1(d).height;return O===void 0||A===void 0?[]:range(O,A).map(o).filter(S=>S)}}function degrees(e){const{intervals:o,tonic:l}=get$1(e),d=tonicIntervalsTransposer$1(o,l);return O=>O?d(O>0?O-1:O):""}function steps(e){const{intervals:o,tonic:l}=get$1(e);return tonicIntervalsTransposer$1(o,l)}var index_default={degrees,detect,extended,get:get$1,modeNames,names:names$1,rangeOf,reduced,scaleChords,scaleNotes,steps,tokenize,scale:scale$1},NONE={empty:!0,name:"",upper:void 0,lower:void 0,type:void 0,additive:[]},NAMES=["4/4","3/4","2/4","2/2","12/8","9/8","6/8","3/8"];function names(){return NAMES.slice()}var REGEX=/^(\d*\d(?:\+\d)*)\/(\d+)$/,CACHE=new Map;function get(e){const o=JSON.stringify(e),l=CACHE.get(o);if(l)return l;const d=build(parse(e));return CACHE.set(o,d),d}function parse(e){if(typeof e=="string"){const[A,S,$]=REGEX.exec(e)||[];return parse([S,$])}const[o,l]=e,d=+l;if(typeof o=="number")return[o,d];const O=o.split("+").map(A=>+A);return O.length===1?[O[0],d]:[O,d]}var time_signature_default={names,parse,get},isPowerOfTwo=e=>Math.log(e)/Math.log(2)%1===0;function build([e,o]){const l=Array.isArray(e)?e.reduce(($,F)=>$+F,0):e,d=o;if(l===0||d===0)return NONE;const O=Array.isArray(e)?`${e.join("+")}/${o}`:`${e}/${o}`,A=Array.isArray(e)?e:[],S=d===4||d===2?"simple":d===8&&l%3===0?"compound":isPowerOfTwo(d)?"irregular":"irrational";return{empty:!1,name:O,type:S,upper:l,lower:d,additive:A}}var Tonal=Core,PcSet=pcset_default,ChordDictionary=chord_type_default,ScaleDictionary=scale_type_default;const dist$1=Object.freeze(Object.defineProperty({__proto__:null,AbcNotation:abc_notation_default,Array:index$6,Chord:chord_default,ChordDictionary,ChordType:chord_type_default,Collection:collection_default,Core,DurationValue:duration_value_default,Interval:interval_default,Key:index_default$2,Midi:index_default$4,Mode:mode_default,Note:index_default$3,PcSet,Pcset:pcset_default,Progression:progression_default,Range:index_default$1,RomanNumeral:roman_numeral_default,Scale:index_default,ScaleDictionary,ScaleType:scale_type_default,TimeSignature:time_signature_default,Tonal,accToAlt,altToAcc,chroma:chroma$2,coordToInterval:coordToInterval$1,coordToNote,coordinates:coordinates$3,deprecate,distance:distance$3,fillStr:fillStr$3,height,interval:interval$3,isNamed,isNamedPitch:isNamedPitch$3,isPitch:isPitch$3,midi:midi$1,note,pitch:pitch$1,stepToLetter,tokenizeInterval:tokenizeInterval$3,tokenizeNote,tonicIntervalsTransposer,transpose:transpose$3},Symbol.toStringTag,{value:"Module"})),flats=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],pcs=["c","db","d","eb","e","f","gb","g","ab","a","bb","b"],sharps=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],accs={b:-1,"#":1},pc2chroma=e=>{const[o,...l]=e.split("");return pcs.indexOf(o.toLowerCase())+l.reduce((d,O)=>d+accs[O],0)};function tokenizeChord$1(e){const o=(e||"").match(/^([A-G][b#]*)([^/]*)[/]?([A-G][b#]*)?$/);return o?o.slice(1):[]}const midi2chroma=e=>e%12,step2semitones=e=>{let o=Number(e);return isNaN(o)?interval_default.semitones(e):o},x2midi=(e,o)=>{if(typeof e=="number")return e;if(typeof e=="string")return noteToMidi$1(e,o)},midi2note=(e,o=!1)=>{const l=Math.floor(e/12)-1;return(o?sharps:flats)[e%12]+l};function scaleStep$1(e,o,l=1){e=e.map(O=>typeof O=="string"?noteToMidi$1(O):O);const d=Math.floor(o/e.length)*l*12;return o=_mod$2(o,e.length),e[o]+d}function nearestNumberIndex(e,o,l){let d=0,O=1/0;return o.forEach((A,S)=>{const $=Math.abs(A-e);(!l&&$<O||l&&$<=O)&&(d=S,O=$)}),d}let scaleSteps={};function stepInNamedScale(e,o,l,d){const[O,A]=index_default.tokenize(o),S=x2midi(O),$=midi2chroma(S);if(!scaleSteps[A]){const{intervals:V}=index_default.get(`C ${A}`);scaleSteps[A]=V.map(step2semitones)}const F=scaleSteps[A];if(!F)return null;let E=S;if(l){l=x2midi(l,3);const V=midi2chroma(l),B=_mod$2(V-$,12),U=nearestNumberIndex(B,F,d);e=e+U,E=l-B}const L=Math.floor(e/F.length)*12;return e=_mod$2(e,F.length),F[e]+E+L}let modeTarget={below:e=>e.slice(-1)[0],duck:e=>e.slice(-1)[0],above:e=>e[0],root:e=>e[0]};function renderVoicing({chord:e,dictionary:o,offset:l=0,n:d,mode:O="below",anchor:A="c5",octaves:S=1}){const[$,F]=tokenizeChord$1(e),E=pc2chroma($);A=x2midi(A?.note||A,4);const L=midi2chroma(A),N=o[F].map(fe=>(typeof fe=="string"?fe.split(" "):fe).map(step2semitones));let V,B,U=N.map((fe,Oe)=>{const ve=modeTarget[O](fe),Re=_mod$2(L-ve-E,12);return(V===void 0||Re<V)&&(V=Re,B=Oe),Re});O==="root"&&(B=0);const q=Math.ceil(l/N.length)*12,ee=_mod$2(B+l,N.length),le=N[ee],ue=modeTarget[O](le),_e=A-U[ee]+q,ie=le.map(fe=>_e-ue+fe);let ae=ie.map(fe=>midi2note(fe));return O==="duck"&&(ae=ae.filter((fe,Oe)=>ie[Oe]!==A)),d!==void 0?[scaleStep$1(ae,d,S)]:ae}const octavesInterval=e=>(e<=0?-1:1)+e*7+"P";function getScale(e){e=e.replaceAll(":"," ");const o=index_default.get(e),{tonic:l,empty:d}=o;if(d&&isNote(e)||d&&!l)throw new Error(`Scale name ${e} is incomplete. Make sure to use ":" instead of spaces, example: .scale("C:major")`);if(d)throw new Error(`Invalid scale name "${e}"`);return o}function scaleStep(e,o){e=Math.ceil(e);let{intervals:l,tonic:d}=getScale(o);d=d||"C";const{pc:O,oct:A=3}=index_default$3.get(d),S=Math.floor(e/l.length),$=_mod$2(e,l.length),F=interval_default.add(l[$],octavesInterval(S));return index_default$3.transpose(O+A,F)}function scaleOffset(e,o,l){let{notes:d}=getScale(e);if(d=d.map(N=>index_default$3.get(N).pc),o=Number(o),isNaN(o))throw new Error(`scale offset "${o}" not a number`);const{pc:O,oct:A=3}=index_default$3.get(l),S=d.indexOf(O);if(S===-1)throw new Error(`note "${l}" is not in scale "${e}"`);let $=S,F=A,E=O;const L=Math.sign(o);for(;Math.abs($-S)<Math.abs(o);){$+=L;const N=_mod$2($,d.length);L<0&&E[0]==="C"&&(F+=L),E=d[N],L>0&&E[0]==="C"&&(F+=L)}return E+F}const{transpose,trans}=register(["transpose","trans"],function e(o,l){return l.withHap(d=>{const O=d.value.note??d.value;if(typeof O=="number"){let $;typeof o=="number"?$=o:typeof o=="string"&&($=interval_default.semitones(o)||0);const F=O+$;return typeof d.value=="object"?d.withValue(()=>({...d.value,note:F})):d.withValue(()=>F)}if(typeof O!="string"||!isNote(O))return logger$2(`[tonal] transpose: not a note "${O}"`,"warning"),d;const A=isNaN(Number(o))?String(o):interval_default.fromSemitones(o),S=index_default$3.transpose(O,A);return typeof d.value=="object"?d.withValue(()=>({...d.value,note:S})):d.withValue(()=>S)})}),{scaleTranspose,scaleTrans,strans}=register(["scaleTranspose","scaleTrans","strans"],function(e,o){return o.withHap(l=>{if(!l.context.scale)throw new Error("can only use scaleTranspose after .scale");if(typeof l.value=="object")return l.withValue(()=>({...l.value,note:scaleOffset(l.context.scale,Number(e),l.value.note)}));if(typeof l.value!="string")throw new Error("can only use scaleTranspose with notes");return l.withValue(()=>scaleOffset(l.context.scale,Number(e),l.value))})});function _convertStepToNumberAndOffset(e){let o=Number(e),l=0;if(isNaN(o)){e=String(e);const d=/^(-?\d+)([#bsf]*)$/.exec(e);if(!d)throw new Error(`invalid scale step "${e}", expected number or integer with optional # b suffixes`);o=Number(d[1]);const O=d[2]||"";l=getAccidentalsOffset$1(O)}return[o,l]}let scaleToMidisAndNotes={};function _getNearestScaleNote(e,o,l=!0){let d=typeof o=="string"?noteToMidi$1(o):o;if(scaleToMidisAndNotes[e]===void 0){const{intervals:N,tonic:V}=getScale(e),{pc:B}=index_default$3.get(V),q=N.concat("8P").map(le=>index_default$3.transpose(B+"0",le)),ee=q.map(noteToMidi$1);scaleToMidisAndNotes[e]=[ee,q]}const[O,A]=scaleToMidisAndNotes[e],S=O[0],$=Math.floor((d-S)/12),F=O.map(N=>N+12*$),E=nearestNumberIndex(d,F,l),L=A[E];return index_default$3.transpose(L,interval_default.fromSemitones(12*$))}const scale=register("scale",function(e,o){return Array.isArray(e)&&(e=e.flat().join(" ")),o.withHaps(l=>(l=l.map(d=>{let O=d.value;const A=typeof O=="object";O=A?O:{n:O};const{note:S,n:$,value:F,...E}=O,L=S??$??F;if(L===void 0)return logger$2(`[tonal] Invalid value format for 'scale'. Value must contain n, note, or value but received keys [${Object.keys(O).join(", ")}]`,"error"),d;let N;if(isNote(L))N=_getNearestScaleNote(e,L),d.value={...E,note:N};else try{const[V,B]=_convertStepToNumberAndOffset(L);E.anchor?N=stepInNamedScale(V,e,E.anchor):N=scaleStep(V,e),B!=0&&(N=index_default$3.transpose(N,interval_default.fromSemitones(B)))}catch(V){errorLogger$1(V,"tonal");return}return d.value=A?{...E,note:N}:N,d.setContext({...d.context,scale:e})}),removeUndefineds(l)))},!0,!0);var dist={},dictionaryVoicing$1={},getBestVoicing={},hasRequiredGetBestVoicing;function requireGetBestVoicing(){if(hasRequiredGetBestVoicing)return getBestVoicing;hasRequiredGetBestVoicing=1,getBestVoicing.__esModule=!0,getBestVoicing.getBestVoicing=void 0;function e(o){var l=o.chord,d=o.range,O=o.finder,A=o.picker,S=o.lastVoicing,$=O(l,d);return $.length?A($,S):[]}return getBestVoicing.getBestVoicing=e,getBestVoicing}var voicingsInRange={};const require$$0=getAugmentedNamespace(dist$1);var tokenizeChord={},hasRequiredTokenizeChord;function requireTokenizeChord(){if(hasRequiredTokenizeChord)return tokenizeChord;hasRequiredTokenizeChord=1,tokenizeChord.__esModule=!0,tokenizeChord.tokenizeChord=void 0;function e(o){var l=(o||"").match(/^([A-G][b#]*)([^\/]*)[\/]?([A-G][b#]*)?$/);return l?l.slice(1):[]}return tokenizeChord.tokenizeChord=e,tokenizeChord}var hasRequiredVoicingsInRange;function requireVoicingsInRange(){if(hasRequiredVoicingsInRange)return voicingsInRange;hasRequiredVoicingsInRange=1,voicingsInRange.__esModule=!0,voicingsInRange.voicingsInRange=void 0;var e=require$$0,o=requireDictionaryVoicing(),l=requireTokenizeChord();function d(O,A,S){A===void 0&&(A=o.lefthand),S===void 0&&(S=["D3","A4"]);var $=(0,l.tokenizeChord)(O),F=$[0],E=$[1];if(!A[E])return[];var L=A[E].map(function(V){return V.split(" ")}),N=e.Range.chromatic(S);return L.reduce(function(V,B){var U=B.map(function(ue){return e.Interval.substract(ue,B[0])}),q=e.Note.transpose(F,B[0]),ee=N.filter(function(ue){return e.Note.chroma(ue)===e.Note.chroma(q)}).filter(function(ue){return e.Note.midi(e.Note.transpose(ue,U[U.length-1]))<=e.Note.midi(S[1])}).map(function(ue){return e.Note.enharmonic(ue,q)}),le=ee.map(function(ue){return U.map(function(_e){return e.Note.transpose(ue,_e)})});return V.concat(le)},[])}return voicingsInRange.voicingsInRange=d,voicingsInRange}var hasRequiredDictionaryVoicing;function requireDictionaryVoicing(){return hasRequiredDictionaryVoicing||(hasRequiredDictionaryVoicing=1,(function(e){var o=dictionaryVoicing$1&&dictionaryVoicing$1.__assign||function(){return o=Object.assign||function($){for(var F,E=1,L=arguments.length;E<L;E++){F=arguments[E];for(var N in F)Object.prototype.hasOwnProperty.call(F,N)&&($[N]=F[N])}return $},o.apply(this,arguments)},l=dictionaryVoicing$1&&dictionaryVoicing$1.__rest||function($,F){var E={};for(var L in $)Object.prototype.hasOwnProperty.call($,L)&&F.indexOf(L)<0&&(E[L]=$[L]);if($!=null&&typeof Object.getOwnPropertySymbols=="function")for(var N=0,L=Object.getOwnPropertySymbols($);N<L.length;N++)F.indexOf(L[N])<0&&Object.prototype.propertyIsEnumerable.call($,L[N])&&(E[L[N]]=$[L[N]]);return E};e.__esModule=!0,e.dictionaryVoicing=e.dictionaryVoicingFinder=e.triads=e.guidetones=e.lefthand=void 0;var d=requireGetBestVoicing(),O=requireVoicingsInRange();e.lefthand={m7:["3m 5P 7m 9M","7m 9M 10m 12P"],7:["3M 6M 7m 9M","7m 9M 10M 13M"],"^7":["3M 5P 7M 9M","7M 9M 10M 12P"],69:["3M 5P 6A 9M"],m7b5:["3m 5d 7m 8P","7m 8P 10m 12d"],"7b9":["3M 6m 7m 9m","7m 9m 10M 13m"],"7b13":["3M 6m 7m 9m","7m 9m 10M 13m"],o7:["1P 3m 5d 6M","5d 6M 8P 10m"],"7#11":["7m 9M 11A 13A"],"7#9":["3M 7m 9A"],mM7:["3m 5P 7M 9M","7M 9M 10m 12P"],m6:["3m 5P 6M 9M","6M 9M 10m 12P"]},e.guidetones={m7:["3m 7m","7m 10m"],m9:["3m 7m","7m 10m"],7:["3M 7m","7m 10M"],"^7":["3M 7M","7M 10M"],"^9":["3M 7M","7M 10M"],69:["3M 6M"],6:["3M 6M","6M 10M"],m7b5:["3m 7m","7m 10m"],"7b9":["3M 7m","7m 10M"],"7b13":["3M 7m","7m 10M"],o7:["3m 6M","6M 10m"],"7#11":["3M 7m","7m 10M"],"7#9":["3M 7m","7m 10M"],mM7:["3m 7M","7M 10m"],m6:["3m 6M","6M 10m"]},e.triads={M:["1P 3M 5P","3M 5P 8P","5P 8P 10M"],m:["1P 3m 5P","3m 5P 8P","5P 8P 10m"],o:["1P 3m 5d","3m 5d 8P","5d 8P 10m"],aug:["1P 3m 5A","3m 5A 8P","5A 8P 10m"]};var A=function($){return function(F,E){return(0,O.voicingsInRange)(F,$,E)}};e.dictionaryVoicingFinder=A;var S=function($){var F=$.dictionary,E=$.range,L=l($,["dictionary","range"]);return(0,d.getBestVoicing)(o(o({},L),{range:E,finder:(0,e.dictionaryVoicingFinder)(F)}))};e.dictionaryVoicing=S})(dictionaryVoicing$1)),dictionaryVoicing$1}var minTopNoteDiff$1={},hasRequiredMinTopNoteDiff;function requireMinTopNoteDiff(){if(hasRequiredMinTopNoteDiff)return minTopNoteDiff$1;hasRequiredMinTopNoteDiff=1,minTopNoteDiff$1.__esModule=!0,minTopNoteDiff$1.minTopNoteDiff=void 0;var e=require$$0;function o(l,d){if(!d)return l[0];var O=function(A){return Math.abs(e.Note.midi(d[d.length-1])-e.Note.midi(A[A.length-1]))};return l.reduce(function(A,S){return O(S)<O(A)?S:A},l[0])}return minTopNoteDiff$1.minTopNoteDiff=o,minTopNoteDiff$1}var hasRequiredDist;function requireDist(){return hasRequiredDist||(hasRequiredDist=1,(function(e){e.__esModule=!0;var o=requireDictionaryVoicing(),l=requireMinTopNoteDiff(),d=requireGetBestVoicing(),O=requireTokenizeChord();e.default={tokenizeChord:O.tokenizeChord,getBestVoicing:d.getBestVoicing,dictionaryVoicing:o.dictionaryVoicing,dictionaryVoicingFinder:o.dictionaryVoicingFinder,lefthand:o.lefthand,guidetones:o.guidetones,triads:o.triads,minTopNoteDiff:l.minTopNoteDiff}})(dist)),dist}var distExports=requireDist();const _voicings=getDefaultExportFromCjs(distExports),simple={2:["1P 5P 8P 9M","1P 5P 8P 9M 12P","5P 8P 9M 12P"],5:["1P 5P 8P 12P","5P 8P 12P 15P"],6:["1P 5P 6M 8P 10M","1P 5P 8P 10M 13M","3M 5P 8P 10M 13M","5P 8P 10M 12P 13M"],7:["1P 5P 7m 8P 10M","1P 7m 8P 10M 12P","3M 7m 8P 10M 12P","3M 7m 8P 10M 14m","3M 7m 10M 12P 15P","7m 10M 12P 14m 15P","7m 10M 12P 15P 17M"],9:["1P 5P 7m 9M 10M","1P 7m 9M 10M 12P","3M 7m 8P 9M 12P","7m 9M 10M 14m 15P","3M 7m 8P 12P 16M","7m 10M 12P 15P 16M"],11:["1P 5P 7m 9M 11P","5P 7m 8P 9M 11P","7m 8P 9M 11P 12P","7m 8P 11P 12P 16M"],13:["1P 6M 7m 9M 10M","1P 7m 9M 10M 13M","3M 7m 8P 9M 13M","7m 8P 9M 10M 13M","7m 9M 10M 13M 15P"],69:["1P 5P 6M 9M 10M","1P 5P 9M 10M 13M","3M 5P 8P 9M 13M","5P 8P 9M 10M 13M"],add9:["1P 5P 8P 9M 10M","1P 5P 9M 10M 12P","3M 8P 9M 10M 12P","3M 8P 9M 12P 15P","5P 8P 9M 12P 17M"],"+":["1P 3M 6m 8P 10M","1P 6m 8P 10M 13m","3M 6m 8P 10M 13m","3M 8P 10M 13m 15P","6m 8P 10M 13m 15P","6m 10M 13m 15P 17M"],o:["1P 5d 8P 10m 12d","3m 8P 10m 12d 15P","5d 8P 10m 12d 15P"],h:["3m 5d 7m 8P 10m","1P 5d 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 7m 8P 10m 14m","5d 8P 10m 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],sus:["1P 4P 5P 8P","1P 4P 5P 8P 11P","5P 8P 11P 12P","5P 8P 11P 12P 15P"],"^":["1P 5P 8P 10M","1P 5P 8P 10M 12P","3M 5P 8P 10M 12P","3M 8P 10M 12P 15P","5P 8P 10M 12P 15P"],"-":["1P 3m 5P 8P 10m","1P 5P 8P 10m 12P","3m 5P 8P 10m 12P","5P 8P 10m 12P 15P"],"^7":["1P 5P 7M 10M 12P","1P 10M 12P 14M","3M 8P 10M 12P 14M","5P 8P 10M 12P 14M","5P 8P 10M 14M 17M"],"-7":["1P 3m 5P 7m 10m","1P 5P 7m 10m 12P","3m 7m 8P 10m 12P","3m 7m 8P 10m 14m","5P 7m 8P 10m 14m","7m 10m 12P 14m 15P","5P 8P 10m 14m 17m","7m 10m 12P 15P 17m"],"7sus":["1P 5P 7m 8P 11P","5P 8P 11P 12P 14m","7m 8P 11P 12P 14m","7m 11P 12P 14m 18P"],h7:["3m 5d 7m 8P 10m","1P 5d 7m 10m 12d","1P 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 7m 8P 10m 14m","5d 8P 10m 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],o7:["1P 6M 8P 10m 12d","1P 6M 10m 12d 13M","3m 8P 10m 12d 13M","3m 8P 12d 13M 15P","5d 10m 12d 13M 15P","5d 10m 13M 15P 17m","6M 12d 13M 15P 17m","6M 12d 15P 17m 19d"],"^9":["1P 5P 7M 9M 10M","1P 7M 9M 10M 12P","3M 7M 8P 9M 12P","3M 7M 8P 12P 16M","5P 8P 10M 14M 16M","7M 8P 10M 12P 16M"],"^13":["1P 6M 7M 9M 10M","1P 7M 9M 10M 13M","3M 7M 8P 9M 13M","3M 7M 8P 13M 16M","7M 8P 10M 13M 16M"],"^7#11":["1P 5P 7M 10M 12d","3M 7M 8P 10M 12d","1P 7M 10M 12d 14M","3M 7M 8P 12d 14M","5P 8P 10M 12d 14M"],"^9#11":["1P 3M 5d 7M 9M","1P 7M 9M 10M 12d","3M 7M 8P 9M 12d","3M 8P 9M 12d 14M"],"^7#5":["1P 6m 7M 10M 13m","3M 7M 8P 10M 13m","6m 7M 8P 10M 13m"],"-6":["1P 3m 5P 6M 8P","1P 5P 6M 8P 10m","3m 5P 6M 8P 10m","1P 5P 8P 10m 13M","3m 5P 8P 10m 13M","5P 8P 10m 12P 13M","5P 8P 10m 13M 15P"],"-69":["1P 3m 5P 6M 9M","3m 5P 6M 8P 9M","3m 6M 9M 10m 12P","1P 5P 9M 10m 13M","3m 5P 8P 9M 13M","5P 8P 9M 10m 13M","5P 8P 10m 13M 16M"],"-^7":["1P 3m 5P 7M 10m","1P 5P 7M 10m 12P","3m 7M 8P 10m 12P","5P 7M 8P 10m 14M","5P 8P 10m 14M 17m"],"-^9":["1P 3m 5P 7M 9M","1P 7M 9M 10m 12P","3m 7M 8P 9M 12P","5P 8P 9M 10m 14M"],"-9":["1P 3m 5P 7m 9M","3m 5P 7m 8P 9M","3m 7m 8P 9M 12P","5P 8P 9M 10m 14m","3m 7m 9M 12P 15P","7m 10m 12P 15P 16M"],"-add9":["1P 2M 3m 5P 8P","1P 3m 5P 9M","3m 5P 8P 9M 12P","5P 8P 9M 10m 12P"],"-11":["1P 3m 7m 9M 11P","3m 7m 8P 9M 11P","1P 4P 7m 10m 12P","5P 8P 11P 14m","3m 7m 9M 11P 15P","5P 8P 11P 14m 16M","7m 10m 12P 15P 18P"],"-7b5":["3m 5d 7m 8P 10m","1P 7m 10m 12d","1P 5d 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 7m 8P 10m 14m","5d 8P 10m 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],h9:["1P 7m 9M 10m 12d","3m 7m 8P 9M 12d","5d 8P 9M 10m 14m","7m 10m 12d 15P 16M"],"-b6":["1P 5P 6m 8P 10m","1P 5P 8P 10m 13m","3m 5P 8P 10m 13m","5P 8P 10m 13m","5P 8P 10m 13m 15P"],"-#5":["1P 6m 8P 10m 13m","3m 6m 8P 10m 13m","6m 8P 10m 13m 15P"],"7b9":["1P 3M 7m 9m 10M","3M 7m 8P 9m 10M","3M 7m 8P 9m 14m","7m 9m 10M 14m 15P"],"7#9":["1P 3M 7m 10m","3M 7m 8P 10m 14m","7m 10m 10M 14m 15P"],"7#11":["1P 3M 7m 10M 12d","3M 7m 8P 10M 12d","7m 10M 12d 14m 15P"],"7b5":["1P 3M 7m 10M 12d","3M 7m 8P 10M 12d","7m 10M 12d 14m 15P"],"7#5":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P"],"9#11":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9b5":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9#5":["1P 7m 9M 10M 13m","3M 7m 9M 10M 13m","3M 7m 9M 13m 14m","7m 10M 13m 14m 16M","7m 10M 13m 16M 17M"],"7b13":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P"],"7#9#5":["1P 3M 7m 10m 13m","3M 7m 10m 13m 15P","7m 10M 13m 15P 17m"],"7#9b5":["1P 3M 7m 10m 12d","3M 7m 10m 12d 15P","7m 10M 12d 15P 17m"],"7#9#11":["1P 3M 7m 10m 12d","3M 7m 10m 12d 15P","7m 10M 12d 15P 17m"],"7b9#11":["1P 7m 9m 10M 12d","3M 7m 8P 9m 12d","7m 8P 10M 12d 16m"],"7b9b5":["1P 7m 9m 10M 12d","3M 7m 8P 9m 12d","7m 8P 10M 12d 16m"],"7b9#5":["1P 7m 9m 10M 13m","3M 7m 8P 9m 13m","7m 9m 10M 13m 15P"],"7b9#9":["1P 3M 7m 9m 10m","3M 7m 8P 9m 10m","7m 8P 10M 16m 17m"],"7b9b13":["1P 7m 9m 10M 13m","3M 7m 8P 9m 13m","7m 9m 10M 13m 15P"],"7alt":["3M 7m 8P 9m 12d","1P 7m 10m 10M 13m","3M 7m 8P 10m 13m","3M 7m 9m 12d 15P","3M 7m 10m 13m 15P","7m 10M 12d 15P 17m","7m 10M 13m 15P 17m"],"13#11":["1P 6M 7m 10M 12d","3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"13b9":["1P 3M 6M 7m 9m","1P 6M 7m 9m 10M","3M 7m 9m 10M 13M","3M 7m 10M 13M 16m","7m 10M 13M 16m 17M"],"13#9":["1P 3M 6M 7m 10m","3M 7m 8P 10m 13M","7m 10M 13M 14m 17m"],"7b9sus":["1P 5P 7m 9m 11P","5P 7m 8P 9m 11P","7m 8P 11P 14m 16m"],"7susadd3":["1P 4P 5P 7m 10M","5P 8P 10M 11P 14m","7m 11P 12P 15P 17M"],"9sus":["1P 5P 7m 9M 11P","5P 7m 8P 9M 11P","7m 8P 9M 11P 12P","7m 8P 11P 12P 16M"],"13sus":["1P 4P 6M 7m 9M","1P 7m 9M 11P 13M","5P 7m 9M 11P 13M","7m 9M 11P 13M 15P"],"7b13sus":["1P 5P 7m 11P 13m","5P 7m 8P 11P 13m","7m 11P 13m 14m 15P"]},complex={2:["1P 5P 6M 8P 9M","1P 5P 8P 9M 12P","5P 8P 9M 12P 13M","5P 8P 9M 12P 15P"],5:["1P 5P 8P 12P","1P 5P 8P 9M 12P","5P 8P 12P 15P","5P 8P 12P 15P 16M"],6:["1P 5P 6M 9M 10M","1P 5P 9M 10M 13M","3M 5P 9M 10M 13M","5P 8P 9M 10M 13M","3M 6M 9M 12P 15P"],7:["1P 5P 7m 8P 10M","1P 7m 8P 10M 12P","3M 7m 8P 10M 12P","3M 7m 8P 10M 14m","3M 7m 10M 12P 15P","7m 10M 12P 14m 15P","7m 10M 12P 15P 17M","7m 10M 14m 17M 19P"],9:["1P 6M 7m 9M 10M","3M 7m 9M 10M 12P","1P 7m 9M 10M 13M","3M 7m 9M 10M 13M","3M 7m 9M 12P 15P","7m 10M 12P 13M 16M","7m 10M 13M 16M 17M","7m 10M 13M 16M 19P"],11:["1P 4P 6M 7m 9M","1P 5P 7m 9M 11P","4P 6M 7m 9M 11P","5P 8P 9M 11P 14m","7m 9M 11P 13M 15P","7m 11P 12P 14m 18P"],13:["3M 7m 9M 10M 13M","3M 7m 9M 13M 15P","3M 7m 10M 13M 16M","7m 10M 12P 13M 16M","7m 10M 13M 16M 17M","7m 10M 13M 16M 19P"],69:["1P 5P 6M 9M 10M","1P 5P 9M 10M 13M","3M 5P 9M 10M 13M","5P 8P 9M 10M 13M","3M 6M 9M 12P 15P"],add9:["1P 5P 8P 9M 10M","1P 5P 9M 10M 12P","3M 8P 9M 10M 12P","3M 8P 9M 12P 15P","5P 8P 9M 10M 15P","5P 8P 9M 12P 17M"],"+":["1P 6m 8P 9M 10M","1P 6m 8P 10M 13m","3M 8P 9M 10M 13m","3M 8P 10M 13m 15P","6m 10M 13m 15P 16M","6m 10M 13m 15P 17M"],o:["1P 6M 8P 10m 12d","1P 6M 10m 12d 13M","3m 8P 10m 12d 13M","3m 8P 12d 13M 15P","5d 10m 12d 13M 15P","5d 10m 13M 15P 17m","6M 12d 13M 15P 17m","6M 12d 15P 17m 19d"],h:["1P 5d 7m 10m 11P","3m 5d 7m 8P 11P","5d 7m 8P 10m 11P","1P 7m 10m 12d","3m 7m 8P 12d 14m","5d 8P 10m 11P 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],sus:["1P 4P 5P 8P 9M","1P 4P 5P 8P 11P","1P 5P 8P 9M 11P","5P 8P 9M 11P 12P","5P 8P 11P 12P 13M","5P 8P 11P 13M 15P"],"^":["1P 3M 5P 6M 9M","1P 5P 8P 10M 12P","3M 5P 9M 10M 12P","1P 5P 8P 10M 13M","3M 8P 10M 13M 15P","5P 9M 10M 12P 15P"],"-":["1P 3m 5P 8P 10m","1P 3m 5P 9M 11P","3m 5P 8P 9M 11P","5P 8P 9M 10m 11P","1P 5P 9M 10m 12P","3m 5P 8P 10m 12P","5P 8P 10m 12P 15P"],"^7":["1P 6M 7M 9M 10M","3M 7M 9M 10M 12P","1P 7M 9M 10M 13M","3M 7M 9M 10M 13M","3M 7M 9M 12P 13M","3M 7M 9M 13M 14M","3M 7M 10M 13M 16M","7M 10M 13M 14M 16M","7M 10M 13M 16M 17M","7M 10M 13M 16M 19P"],"-7":["1P 3m 5P 7m 9M","1P 3m 5P 7m 10m","1P 5P 7m 10m 11P","3m 7m 8P 10m 11P","1P 5P 7m 10m 12P","3m 7m 9M 10m 12P","3m 7m 8P 10m 14m","5P 7m 9M 10m 14m","7m 10m 11P 14m 15P","7m 10m 12P 15P 16M","5P 8P 11P 14m 17m","7m 10m 12P 15P 17m"],"7sus":["1P 4P 6M 7m 9M","1P 5P 7m 9M 11P","4P 6M 7m 9M 11P","5P 8P 9M 11P 14m","7m 9M 11P 13M 15P","7m 11P 12P 14m 18P"],h7:["1P 5d 7m 10m 11P","3m 5d 7m 8P 11P","5d 7m 8P 10m 11P","1P 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 8P 10m 11P 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],o7:["1P 6M 8P 10m 12d","1P 6M 10m 12d 13M","3m 8P 10m 12d 13M","3m 8P 12d 13M 15P","5d 10m 12d 13M 15P","5d 10m 13M 15P 17m","6M 12d 13M 15P 17m","6M 12d 15P 17m 19d"],"^9":["1P 6M 7M 9M 10M","1P 7M 9M 10M 13M","3M 7M 9M 10M 13M","3M 7M 9M 12P 13M","3M 7M 8P 9M 13M","3M 7M 9M 13M 14M","3M 7M 10M 13M 16M","7M 10M 13M 14M 16M","7M 10M 13M 16M 17M","7M 10M 13M 16M 19P"],"^13":["1P 6M 7M 9M 10M","1P 7M 9M 10M 13M","3M 7M 9M 12P 13M","3M 7M 9M 10M 13M","3M 7M 8P 9M 13M","3M 7M 9M 13M 14M","3M 7M 10M 13M 16M","7M 10M 13M 14M 16M","7M 10M 13M 16M 17M","7M 10M 13M 16M 19P"],"^7#11":["1P 3M 5d 7M 9M","1P 7M 9M 10M 12d","3M 7M 9M 10M 12d","3M 7M 9M 12d 13M","3M 7M 10M 12d 14M","7M 10M 12d 13M 14M","7M 10M 12d 13M 16M","7M 10M 12d 14M 17M"],"^9#11":["1P 3M 5d 7M 9M","1P 7M 9M 10M 12d","3M 7M 9M 10M 12d","3M 7M 9M 12d 13M","3M 7M 9M 12d 14M","7M 10M 12d 14M 16M","7M 10M 12d 13M 16M"],"^7#5":["1P 6m 7M 10M 13m","3M 7M 9M 10M 13m","3M 7M 10M 13m 14M","7M 10M 13m 14M 16M","7M 10M 13m 14M 17M"],"-6":["1P 3m 5P 6M 9M","3m 5P 6M 8P 9M","1P 5P 6M 10m 11P","3m 5P 6M 8P 11P","1P 5P 9M 10m 13M","3m 5P 8P 9M 13M","5P 8P 10m 11P 13M","5P 8P 10m 13M 16M"],"-69":["1P 3m 5P 6M 9M","3m 5P 6M 8P 9M","3m 6M 9M 10m 12P","1P 5P 9M 10m 13M","3m 5P 8P 9M 13M","5P 8P 9M 10m 13M","5P 8P 10m 13M 16M"],"-^7":["1P 3m 5P 7M 9M","1P 5P 7M 10m 11P","3m 7M 9M 10m 11P","3m 7M 9M 10m 12P","3m 7M 9M 12P 14M","7M 10m 11P 12P 14M","7M 10m 12P 14M 16M"],"-^9":["1P 3m 5P 7M 9M","1P 5P 7M 10m 11P","3m 7M 9M 10m 11P","3m 7M 9M 10m 12P","3m 7M 9M 12P 14M","7M 10m 11P 12P 14M","7M 10m 12P 14M 16M"],"-9":["1P 3m 5P 7m 9M","1P 3m 7m 9M 11P","3m 7m 9M 10m 11P","3m 7m 9M 10m 12P","3m 7m 9M 10m 14m","3m 7m 9M 12P 15P","7m 10m 11P 14m 16M","7m 10m 12P 16M 18P"],"-add9":["1P 2M 3m 5P 8P","1P 3m 5P 9M","3m 5P 8P 9M 12P","5P 8P 9M 10m 12P"],"-11":["3m 5P 7m 9M 11P","7m 9M 10m 11P","1P 4P 7m 10m 12P","3m 7m 9M 11P 12P","7m 9M 10m 11P 12P","3m 7m 9M 11P 14m","4P 10m 12P 14m","5P 8P 11P 14m","5P 8P 11P 14m 16M","7m 10m 12P 16M 18P","7m 10m 11P 16M 21m"],"-7b5":["1P 5d 7m 10m 11P","3m 5d 7m 8P 11P","5d 7m 8P 10m 11P","1P 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 8P 10m 11P 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],h9:["3m 5d 7m 9M 11P","1P 7m 9M 10m 12d","3m 7m 9M 12d 14m","5d 8P 9M 10m 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 16M"],"-b6":["1P 3m 5P 6m 8P","3m 5P 8P 11P 13m","5P 8P 10m 11P 13m"],"-#5":["1P 6m 8P 10m 13m","3m 6m 8P 11P 13m","6m 8P 10m 13m 15P"],"7b9":["1P 3M 7m 9m 10M","3M 7m 8P 9m 10M","3M 7m 8P 9m 14m","7m 9m 10M 14m 15P"],"7#9":["1P 3M 7m 10m","3M 7m 10m 10M 12P","3M 7m 10m 12P 14m","7m 10M 12P 14m 17m"],"7#11":["1P 3M 7m 9M 12d","3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"7b5":["1P 3M 7m 9M 12d","3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"7#5":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P","7m 10M 13m 14m 17M"],"9#11":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9b5":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9#5":["1P 7m 9M 10M 13m","3M 7m 9M 10M 13m","3M 7m 9M 13m 14m","7m 10M 13m 14m 16M","7m 10M 13m 16M 17M"],"7b13":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P","7m 10M 13m 14m 17M"],"7#9#5":["3M 7m 10m 10M 13m","3M 7m 10m 13m 14m","7m 10M 13m 14m 17m"],"7#9b5":["3M 7m 10m 10M 12d","3M 7m 10m 12d 14m","7m 10M 12d 14m 17m"],"7#9#11":["3M 7m 10m 10M 12d","3M 7m 10m 12d 14m","7m 10M 12d 14m 17m"],"7b9#11":["3M 7m 9m 10M 12d","3M 7m 9m 12d 14m","7m 8P 10M 12d 16m","7m 10M 12d 14m 16m"],"7b9b5":["3M 7m 9m 10M 12d","3M 7m 9m 12d 14m","7m 8P 10M 12d 16m","7m 10M 12d 14m 16m"],"7b9#5":["1P 7m 9m 10M 13m","3M 7m 9m 10M 13m","3M 7m 10M 13m 16m","7m 10M 13m 14m 16m","7m 10M 13m 16m 17M"],"7b9#9":["1P 3M 7m 9m 10m","3M 7m 10m 13m 16m","7m 10M 13m 16m 17m"],"7b9b13":["1P 7m 9m 10M 13m","3M 7m 9m 10M 13m","3M 7m 10M 13m 16m","7m 10M 13m 14m 16m","7m 10M 13m 16m 17M"],"7alt":["3M 7m 8P 10m 13m","3M 7m 9m 12d 13m","3M 7m 9m 10m 13m","3M 7m 10m 13m 14m","3M 7m 9m 12d 14m","3M 7m 10m 13m 15P","3M 7m 10m 13m 16m","7m 10M 12d 14m 16m","7m 10M 12d 13m 16m","7m 10M 13m 15P 17m","7m 10M 13m 16m 17m","7m 10M 13m 16m 19d"],"13#11":["3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"13b9":["3M 7m 9m 10M 13M","3M 7m 10M 13M 16m","7m 10M 13M 16m 17M"],"13#9":["3M 7m 10m 10M 13M","7m 10M 13M 14m 17m"],"7b9sus":["1P 5P 7m 9m 11P","5P 7m 8P 9m 11P","7m 8P 11P 14m 16m"],"7susadd3":["1P 4P 5P 7m 10M","5P 8P 10M 11P 14m","7m 11P 12P 15P 17M"],"9sus":["1P 4P 6M 7m 9M","1P 5P 7m 9M 11P","4P 6M 7m 9M 11P","5P 8P 9M 11P 14m","7m 9M 11P 13M 15P","7m 11P 12P 14m 18P"],"13sus":["1P 4P 6M 7m 9M","1P 7m 9M 11P 13M","4P 7m 9M 11P 13M","7m 9M 11P 13M 15P","7m 11P 13M 14m 16M","7m 11P 13M 16M 18P"],"7b13sus":["1P 5P 7m 11P 13m","5P 7m 8P 11P 13m","7m 11P 13m 14m 15P"]},{dictionaryVoicing,minTopNoteDiff}=_voicings.default||_voicings,lefthand={m7:["3m 5P 7m 9M","7m 9M 10m 12P"],7:["3M 6M 7m 9M","7m 9M 10M 13M"],"^7":["3M 5P 7M 9M","7M 9M 10M 12P"],69:["3M 5P 6A 9M"],m7b5:["3m 5d 7m 8P","7m 8P 10m 12d"],"7b9":["3M 6m 7m 9m","7m 9m 10M 13m"],"7b13":["3M 6m 7m 9m","7m 9m 10M 13m"],o7:["1P 3m 5d 6M","5d 6M 8P 10m"],"7#11":["7m 9M 11A 13A"],"7#9":["3M 7m 9A"],mM7:["3m 5P 7M 9M","7M 9M 10m 12P"],m6:["3m 5P 6M 9M","6M 9M 10m 12P"]},guidetones={m7:["3m 7m","7m 10m"],m9:["3m 7m","7m 10m"],7:["3M 7m","7m 10M"],"^7":["3M 7M","7M 10M"],"^9":["3M 7M","7M 10M"],69:["3M 6M"],6:["3M 6M","6M 10M"],m7b5:["3m 7m","7m 10m"],"7b9":["3M 7m","7m 10M"],"7b13":["3M 7m","7m 10M"],o7:["3m 6M","6M 10m"],"7#11":["3M 7m","7m 10M"],"7#9":["3M 7m","7m 10M"],mM7:["3m 7M","7M 10m"],m6:["3m 6M","6M 10m"]},triads={"":["1P 3M 5P","3M 5P 8P","5P 8P 10M"],M:["1P 3M 5P","3M 5P 8P","5P 8P 10M"],m:["1P 3m 5P","3m 5P 8P","5P 8P 10m"],o:["1P 3m 5d","3m 5d 8P","5d 8P 10m"],aug:["1P 3m 5A","3m 5A 8P","5A 8P 10m"]},defaultDictionary={"":["1P 3M 5P","3M 5P 8P","5P 8P 10M"],M:["1P 3M 5P","3M 5P 8P","5P 8P 10M"],m:["1P 3m 5P","3m 5P 8P","5P 8P 10m"],o:["1P 3m 5d","3m 5d 8P","5d 8P 10m"],aug:["1P 3m 5A","3m 5A 8P","5A 8P 10m"],m7:["3m 5P 7m 9M","7m 9M 10m 12P"],7:["3M 6M 7m 9M","7m 9M 10M 13M"],"^7":["3M 5P 7M 9M","7M 9M 10M 12P"],69:["3M 5P 6A 9M"],m7b5:["3m 5d 7m 8P","7m 8P 10m 12d"],"7b9":["3M 6m 7m 9m","7m 9m 10M 13m"],"7b13":["3M 6m 7m 9m","7m 9m 10M 13m"],o7:["1P 3m 5d 6M","5d 6M 8P 10m"],"7#11":["7m 9M 11A 13A"],"7#9":["3M 7m 9A"],mM7:["3m 5P 7M 9M","7M 9M 10m 12P"],m6:["3m 5P 6M 9M","6M 9M 10m 12P"]},voicingRegistry={lefthand:{dictionary:lefthand,range:["F3","A4"],mode:"below",anchor:"a4"},triads:{dictionary:triads,mode:"below",anchor:"a4"},guidetones:{dictionary:guidetones,mode:"above",anchor:"a4"},legacy:{dictionary:defaultDictionary,mode:"below",anchor:"a4"}};let defaultDict="ireal";const setDefaultVoicings=e=>defaultDict=e,setVoicingRange=(e,o)=>addVoicings(e,voicingRegistry[e].dictionary,o),addVoicings=(e,o,l=["F3","A4"])=>{Object.assign(voicingRegistry,{[e]:{dictionary:o,range:l}})},registerVoicings=(e,o,l={})=>{Object.assign(voicingRegistry,{[e]:{dictionary:o,...l}})},getVoicing=(e,o,l)=>{const{dictionary:d,range:O}=voicingRegistry[o];return dictionaryVoicing({chord:e,dictionary:d,range:O,picker:minTopNoteDiff,lastVoicing:l})};let lastVoicing;const voicings=register("voicings",function(e,o){return o.fmap(l=>(lastVoicing=getVoicing(l,e,lastVoicing),stack(...lastVoicing))).outerJoin()}),rootNotes=register("rootNotes",function(e,o){return o.fmap(l=>{const A=(l.chord||l).match(/^([a-gA-G][b#]?).*$/)[1]+e;return l.chord?{note:A}:A})}),voicing=register("voicing",function(e){return e.fmap(o=>{o=typeof o=="string"?{chord:o}:o;let{dictionary:l=defaultDict,chord:d,anchor:O,offset:A,mode:S,n:$,octaves:F,...E}=o;l=typeof l=="string"?voicingRegistry[l]:{dictionary:l,mode:"below",anchor:"c5"};try{let L=renderVoicing({...l,chord:d,anchor:O,offset:A,mode:S,n:$,octaves:F});return stack(...L).note().set(E)}catch{return logger$2(`[voicing]: unknown chord "${d}"`),silence}}).outerJoin()});function voicingAlias(e,o,l){l=Array.isArray(l)?l:[l],l.forEach(d=>{d[o]=d[e]})}voicingAlias("^","",[simple,complex]),Object.keys(simple).forEach(e=>{if(e.includes("-")){let o=e.replace("-","m");voicingAlias(e,o,[complex,simple])}if(e.includes("^")){let o=e.replace("^","M");voicingAlias(e,o,[complex,simple])}if(e.includes("+")){let o=e.replace("+","aug");voicingAlias(e,o,[complex,simple])}}),registerVoicings("ireal",simple),registerVoicings("ireal-ext",complex);function resetVoicings(){lastVoicing=void 0,setDefaultVoicings("ireal")}const packageName="@strudel/tonal",strudelTonal=Object.freeze(Object.defineProperty({__proto__:null,addVoicings,complex,packageName,registerVoicings,resetVoicings,rootNotes,scale,scaleTrans,scaleTranspose,setDefaultVoicings,setVoicingRange,simple,strans,trans,transpose,voicing,voicingAlias,voicingRegistry,voicings},Symbol.toStringTag,{value:"Module"})),{evalScope}=strudelCore;App.scope_container_el=void 0,App.scope_canvas_el=void 0,App.scope_canvas_ctx=void 0,App.scope_analyser=void 0,App.scope_waveform=void 0,App.scope_animation_id=void 0,App.scope_connected=!1,App.scope_pixel_ratio=1,App.scope_enabled=!0,App.scope_max_y=-1,App.scope_min_y=-1,App.scope_background="#111111da",App.scope_color="rgba(204, 198, 239, 1)",App.scope_click_color_1="rgba(162, 171, 234, 0.5)",App.scope_click_color_2="rgba(255, 137, 204, 1)",App.scope_click_color_3="rgba(222, 242, 92, 1)",App.scope_click_color_4="rgba(91, 163, 240, 1)",App.scope_click_color_5="rgba(255, 255, 255, 1)",App.scope_click_level=1,App.scope_sine_time=0,App.scope_clicks=[],App.scope_click_time=3*1e3,App.scope_click_size=18,App.scope_is_drawing=!1,App.scope_click_distance=120,App.scope_mousedown_date=0,App.scope_beep_delay=300,App.scope_enable_date=0,App.scope_click_lock=250,App.scope_debouncer_delay=50,App.scope_click_level_time=3*1e3,App.scope_clicks_min=5,App.scope_click_rotation_speed=.001,App.setup_scope=()=>{App.scope_debouncer=App.create_debouncer(()=>{App.resize_scope_canvas()},App.scope_debouncer_delay),App.stor_load_scope(),App.init_scope_checkbox(),App.setup_scope_canvas(),App.start_scope_visualizer(),App.scope_enabled?App.enable_scope_visualizer():App.disable_scope_visualizer()},App.get_scope_container=()=>(App.scope_container_el||(App.scope_container_el=DOM.el("#scope-container")),App.scope_container_el),App.get_scope_canvas=()=>(App.scope_canvas_el||(App.scope_canvas_el=DOM.el("#scope-canvas")),App.scope_canvas_el),App.get_scope_dimensions=()=>{if(!App.scope_canvas_el)return{width:0,height:0};let e=App.scope_canvas_el.clientWidth,o=App.scope_canvas_el.clientHeight;return e||(e=App.scope_canvas_el.width/App.scope_pixel_ratio),o||(o=App.scope_canvas_el.height/App.scope_pixel_ratio),{width:Math.max(0,e||0),height:Math.max(0,o||0)}},App.setup_scope_canvas=()=>{let e=App.get_scope_canvas();if(e){if(!App.scope_canvas_ctx){let o=e.getContext("2d");if(!o){console.warn("Scope canvas context unavailable");return}App.scope_canvas_ctx=o}return App.resize_scope_canvas(),e}},App.resize_scope_canvas=()=>{if(!App.scope_enabled||!App.scope_canvas_el||!App.scope_canvas_ctx)return;DOM.show("#scope-container",2);let e=1;typeof window<"u"&&(e=window.devicePixelRatio||1),App.scope_pixel_ratio=e;let o=App.get_input_wrapper(),l=App.get_scope_container(),d=320;if(o&&l){let F=o.getBoundingClientRect().width,E=window.getComputedStyle(l),L=parseFloat(E.borderLeftWidth)||0,N=parseFloat(E.borderRightWidth)||0;d=F-L-N}else d=App.scope_canvas_el.clientWidth||App.scope_canvas_el.width/e;let O=App.scope_canvas_el.clientHeight||App.scope_canvas_el.height/e||80;App.scope_canvas_el.style.width=`${d}px`,App.scope_canvas_el.style.height=`${O}px`;let A=Math.round(d*e),S=Math.round(O*e);(App.scope_canvas_el.width!==A||App.scope_canvas_el.height!==S)&&(App.scope_canvas_el.width=A,App.scope_canvas_el.height=S),App.scope_canvas_ctx.setTransform(1,0,0,1,0,0),App.scope_canvas_ctx.scale(e,e),App.clear_scope_canvas()},App.clear_scope_canvas=()=>{if(!App.scope_canvas_ctx)return;let{width:e,height:o}=App.get_scope_dimensions();!e||!o||(App.scope_canvas_ctx.fillStyle=App.scope_background,App.scope_canvas_ctx.fillRect(0,0,e,o))},App.ensure_scope_waveform=()=>{if(App.scope_analyser)return(!App.scope_waveform||App.scope_waveform.length!==App.scope_analyser.fftSize)&&(App.scope_waveform=new Uint8Array(App.scope_analyser.fftSize)),App.scope_waveform},App.ensure_scope_analyser=()=>{if(App.scope_analyser)return App.scope_analyser;try{let o=getAudioContext().createAnalyser();o.fftSize=2048,o.minDecibels=-90,o.maxDecibels=-10,o.smoothingTimeConstant=.85,App.scope_analyser=o,App.ensure_scope_waveform()}catch(e){console.error("Failed to create scope analyser",e),App.scope_analyser=void 0,App.scope_waveform=void 0}return App.scope_analyser},App.connect_scope_analyser=()=>{if(App.scope_connected)return!0;let e=App.ensure_scope_analyser();if(!e)return!1;try{let l=getSuperdoughAudioController()?.output?.destinationGain;return l?(l.connect(e),App.scope_connected=!0,!0):(console.warn("Scope destination missing"),!1)}catch(o){return console.warn("Failed to connect scope analyser",o),!1}},App.stop_scope_loop=()=>{App.scope_animation_id&&(cancelAnimationFrame(App.scope_animation_id),App.scope_animation_id=void 0)},App.handle_scope_click=e=>{let o=App.get_scope_canvas();if(!o)return;let l=o.getBoundingClientRect(),d=e.clientX-l.left,O=e.clientY-l.top;App.scope_clicks.push({x:d,y:O,timestamp:Date.now()})},App.handle_scope_mouse_down=e=>{App.mouse_down_coords=App.get_scope_coords(e),App.scope_mousedown_date=Date.now(),App.scope_is_drawing=!0,App.scope_clicks.length<=App.scope_clicks_min&&(App.scope_gestures_enabled=!0),App.handle_scope_click(e)},App.handle_scope_mouse_move=e=>{if(App.scope_is_drawing){let o=App.get_scope_canvas();if(!o)return;let l=o.getBoundingClientRect(),d=e.clientX-l.left,O=e.clientY-l.top;if((App.scope_max_y===-1||O>App.scope_max_y)&&(App.scope_max_y=O),(App.scope_min_y===-1||O<App.scope_min_y)&&(App.scope_min_y=O),App.scope_last_point){let A=App.scope_last_point.x,S=App.scope_last_point.y,$=d-A,F=O-S,E=Math.sqrt($*$+F*F),L=Math.ceil(E/App.scope_click_distance);for(let N=1;N<=L;N++){let V=A+$*N/L,B=S+F*N/L;App.scope_clicks.push({x:V,y:B,timestamp:Date.now()})}}App.scope_clicks.push({x:d,y:O,timestamp:Date.now()}),App.scope_last_point={x:d,y:O}}},App.handle_scope_mouse_up=e=>{App.mouse_up_coords=App.get_scope_coords(e),App.check_gestures()},App.increase_scope_click_level=e=>{App.scope_click_level=e,clearTimeout(App.scope_click_level_timeout),App.color_interface(e),App.scope_click_level_timeout=setTimeout(()=>{App.scope_click_level=1,App.restore_interface_colors()},App.scope_click_level_time)},App.draw_star=(e,o,l,d,O,A,S=0)=>{let $=Math.PI/2*3+S,F=Math.PI/O,E=o+Math.cos($)*A,L=l+Math.sin($)*A;e.beginPath(),e.moveTo(E,L);for(let N=0;N<O;N++){let V=o+Math.cos($)*A,B=l+Math.sin($)*A;e.lineTo(V,B),$+=F;let U=o+Math.cos($)*d,q=l+Math.sin($)*d;e.lineTo(U,q),$+=F}e.lineTo(E,L),e.closePath()},App.draw_scope_frame=()=>{if(!App.scope_enabled){App.stop_scope_loop();return}if(!App.scope_canvas_ctx){App.stop_scope_loop();return}let{width:e,height:o}=App.get_scope_dimensions();if(!e||!o){App.scope_animation_id=requestAnimationFrame(App.draw_scope_frame);return}let l=10;App.scope_canvas_ctx.clearRect(-l,-l,e+l*2,o+l*2),App.scope_canvas_ctx.fillStyle=App.scope_background,App.scope_canvas_ctx.fillRect(-l,-l,e+l*2,o+l*2),App.scope_canvas_ctx.strokeStyle=App.scope_color,App.scope_canvas_ctx.lineWidth=2,App.scope_canvas_ctx.beginPath();let d=App.scope_analyser,O=App.ensure_scope_waveform();if(App.is_playing&&d&&O){d.getByteTimeDomainData(O);let S=e/O.length,$=0;for(let F=0;F<O.length;F+=1){let L=O[F]/128-1,N=o/2+L*(o/2);F===0?App.scope_canvas_ctx.moveTo($,N):App.scope_canvas_ctx.lineTo($,N),$+=S}}else{App.scope_sine_time+=.012;let S=O?O.length:2048,$=e/S,F=0;for(let E=0;E<S;E+=1){let L=E/S*(Math.PI*2)*6,V=Math.sin(L+App.scope_sine_time)*.3,B=o/2+V*(o/2);E===0?App.scope_canvas_ctx.moveTo(F,B):App.scope_canvas_ctx.lineTo(F,B),F+=$}}App.scope_canvas_ctx.stroke();let A=Date.now();App.scope_clicks=App.scope_clicks.filter(S=>A-S.timestamp<App.scope_click_time);for(let S of App.scope_clicks){let $=A-S.timestamp,F=0;App.scope_click_level>1&&(F=$*App.scope_click_rotation_speed),App.scope_canvas_ctx.fillStyle=App[`scope_click_color_${App.scope_click_level}`],App.draw_star(App.scope_canvas_ctx,S.x,S.y,3,5,App.scope_click_size,F),App.scope_canvas_ctx.fill()}App.scope_animation_id=requestAnimationFrame(App.draw_scope_frame)},App.start_scope_loop=()=>{App.scope_animation_id||(App.scope_animation_id=requestAnimationFrame(App.draw_scope_frame))},App.set_scope_visibility=e=>{let o=App.get_scope_container();o&&(e?DOM.show(o):DOM.hide(o))},App.stop_scope_visualizer=()=>{App.stop_scope_loop(),App.set_scope_visibility(!1),App.clear_scope_canvas()},App.start_scope_visualizer=()=>{App.setup_scope_canvas()&&(App.scope_connected||App.connect_scope_analyser())},App.scope_mouse_enabled=()=>Date.now()-App.scope_enable_date>=App.scope_click_lock,App.init_scope_click_handler=()=>{let e=App.get_scope_canvas();e&&(DOM.ev(e,"mousedown",o=>{App.scope_max_y=-1,App.scope_min_y=-1,App.scope_mouse_enabled()&&App.handle_scope_mouse_down(o)}),DOM.ev(e,"mousemove",o=>{App.scope_mouse_enabled()&&App.handle_scope_mouse_move(o)}),DOM.ev(e,"click",o=>{App.scope_mouse_enabled()&&App.handle_scope_click(o)}),DOM.ev(document,"mouseup",o=>{App.scope_mouse_enabled()&&App.handle_scope_mouse_up(o),App.scope_is_drawing=!1,App.scope_last_point=null}),DOM.ev(e,"contextmenu",o=>{o.preventDefault()}))},App.toggle_scope=()=>{App.scope_enabled?App.disable_scope_visualizer():App.enable_scope_visualizer()},App.enable_scope_visualizer=()=>{App.scope_enabled=!0,App.set_scope_visibility(!0),App.handle_scope_resize(),App.setup_scope_canvas()&&!App.scope_animation_id&&App.start_scope_loop(),App.scope_enable_date=Date.now(),App.start_scope_visualizer(),App.init_scope_click_handler(),App.stor_save_scope()},App.disable_scope_visualizer=()=>{App.scope_enabled=!1,App.stop_scope_visualizer(),App.stor_save_scope()},App.handle_scope_resize=()=>{App.scope_canvas_el&&(App.scope_debouncer.call(),App.scope_enabled||App.clear_scope_canvas())},App.init_scope_checkbox=()=>{let e=DOM.el("#scope-checkbox");e&&(e.checked=App.scope_enabled,App.scope_enabled?App.enable_scope_visualizer():App.set_scope_visibility(!1),DOM.ev(e,"change",o=>{o.target.checked?App.enable_scope_visualizer():App.disable_scope_visualizer()}))},App.ensure_scope=()=>(App.scope_promise||(App.scope_promise=evalScope(strudelCore,strudelMini$1,strudelWebAudio,strudelTonal).catch(e=>{throw App.scope_promise=void 0,console.error("Strudel scope failed to load",e),e})),App.scope_promise),App.get_scope_coords=e=>{let o=App.get_scope_canvas();if(o){let l=o.getBoundingClientRect(),d=e.clientX-l.left,O=e.clientY-l.top;return{x:d,y:O}}},App.clear_clicks=()=>{setTimeout(()=>{App.scope_clicks=[]},100)},App.song_cache={},App.fetch_songs_list=async()=>{try{let e=await fetch("/songs/list");if(!e.ok)throw new Error("Failed to fetch songs list");let o=await e.json();return Array.isArray(o)?o:(console.error("Songs list payload was not an array"),[])}catch(e){return console.error("Error fetching songs",e),[]}},App.fetch_song_code=async e=>{try{let o=await fetch(`/songs/${e}.js`);if(!o.ok)throw new Error(`Failed to fetch song ${e}`);let l=await o.text(),d=App.clean_song_name(e),O={};return O.name=e,O.clean_name=d,O.raw=l,O.filtered=App.filter_code(l),App.song_cache[e]=O,App.last_code=l,l}catch(o){throw console.error("Error fetching song content",o),o}},App.create_songs_modal=()=>{let e=App.create_list_modal("songs"),o=DOM.el(".modal-title",e);o.textContent="Select Song"},App.open_songs_modal=async()=>{let e=await App.fetch_songs_list(),o=[];for(let l of e)o.push({text:l,title:"Click to load and play this song"});App.show_items_modal("songs",{items:o,action:l=>{App.load_song(l.text)}})},App.load_song=async e=>{App.close_all_modals();try{App.set_status(`Loading ${e}...`);let o=await App.fetch_song_code(e);App.stop_status_watch(),App.stop_color_cycle(),App.clear_draw_context(),App.code_scroll_active&&App.defer_code_scroll(App.code_scroll_song_pause_ms),await App.play_action(o,!0),App.set_song_context(e)}catch(o){App.set_status(`Failed to load song: ${o.message}`),console.error("Failed to load song:",o)}},App.set_song_context=(e="")=>{App.current_song=e||"",App.set_title(App.underspace(App.current_song)),App.update_url(App.current_song),App.update_title()},App.random_song=async()=>{try{let e=await App.fetch_songs_list();if(!e.length){console.error("No songs available to pick from");return}let o=e.filter(O=>O!==App.current_song);if(!o.length){console.error("No songs available after filtering out the current song");return}let l=App.random_int({min:0,max:o.length-1}),d=o[l];await App.load_song(d)}catch(e){console.error("Error selecting a random song",e)}},App.get_matched_song=()=>{for(let e in App.song_cache){let o=App.song_cache[e];if(o.filtered===App.last_code)return o;if(o.raw===App.last_code)return o}},App.get_song_name=(e=!1)=>{let o=App.get_matched_song(),l="";return o&&(e?l=o.clean_name:l=o.name),l},App.clean_song_name=e=>App.capitalize(App.underspace(e)),App.modal_factory=(e,o)=>{let l=DOM.el(`#${o}`),d=DOM.create("div");d.innerHTML=l.innerHTML,DOM.el("#modals").appendChild(d);let O=DOM.el(".modal",d);return O.id=`${e}-modal`,O},App.create_modal=e=>App.modal_factory(e,"template-modal"),App.create_list_modal=e=>{let o=App.modal_factory(e,"template-list-modal"),l=DOM.el(".modal-filter",o);return l.id=`${e}-modal-filter`,o},App.create_modals=()=>{App.create_about_modal(),App.create_songs_modal(),App.create_auto_modal(),App.create_visual_modal(),App.create_settings_modal(),DOM.ev("#main","click",e=>{let o=e.target.closest(".modal-close");if(o){let l=o.closest(".modal");l&&App.do_close_modal(l)}}),DOM.ev("#modal-overlay","click",e=>{App.close_all_modals()})},App.show_items_modal=async(e,o={})=>{let l={loaded:!1,active:-1,capitalize:!0,icons:!0};App.def_args(l,o);let d=o.loaded||!1,O=DOM.el(`#${e}-modal`),A=DOM.el(".modal-body",O),S=DOM.el(".modal-filter",O);if(d&&(A.innerHTML='<div class="loading">Loading items...</div>'),S&&(S.value="",S.disabled=!0,S.oninput=null,S.onkeydown=null),!o.items.length){A.innerHTML='<div class="loading">Nothing found</div>';return}let $=E=>{if(A.innerHTML="",!E.length){A.innerHTML='<div class="loading">No results</div>';return}for(let[L,N]of E.entries()){let V=DOM.create("div"),B=DOM.create("div");V.className="modal-item";let U=N.alt_text||N.text;if(o.icons){let q=DOM.create("canvas","modal-icon");q.width=25,q.height=25,V.appendChild(q),jdenticon.update(q,U)}o.capitalize&&(U=App.capitalize(U)),B.textContent=App.underspace(U),V.title=N.title,DOM.ev(V,"click",()=>o.action(N)),o.active===L&&V.classList.add("modal-active-item"),V.appendChild(B),A.appendChild(V)}};if($(o.items),!S)return;let F=()=>{let E=S.value.trim().toLowerCase();if(!E){$(o.items);return}let L=o.items.filter(N=>(N.alt_text||N.text).toLowerCase().includes(E));$(L)};S.disabled=!1,S.focus(),S.oninput=F,S.onkeydown=E=>{if(E.key!=="Enter")return;E.preventDefault();let L=DOM.els(".modal-item",A);for(let N of L){N.click();break}},App.do_open_modal(O),App.focus_modal_filter(e)},App.open_modal=e=>{let o=DOM.el(`#${e}-modal`);o&&App.do_open_modal(o)},App.do_open_modal=e=>{let o=DOM.el(".modal-body",e);App.show_overlay(),e.classList.add("active"),o.scrollTop=0},App.close_modal=e=>{let o=DOM.el(`#${e}-modal`);o&&App.do_close_modal(o)},App.do_close_modal=e=>{e.classList.remove("active"),DOM.els(".modal.active").length===0&&App.hide_overlay()},App.close_all_modals=()=>{let e=DOM.els(".modal");for(let o of e)App.do_close_modal(o)},App.close_current_modal=()=>{let e=DOM.els(".modal.active");if(e.length>0){let o=e[e.length-1];App.do_close_modal(o)}},App.modal_open=()=>DOM.els(".modal.active").length>0,App.show_overlay=()=>{DOM.show("#modal-overlay")},App.hide_overlay=()=>{DOM.hide("#modal-overlay")},App.focus_modal_filter=e=>{let o=DOM.el(`#${e}-modal-filter`);o&&o.focus()},App.create_about_modal=()=>{let e=App.create_modal("about"),o=DOM.el(".modal-header",e),l=DOM.create("img","","modal-about-image");l.src="/img/slide.png",o.prepend(l);let d=DOM.el(".modal-title",e),O=`v${App.config.version}`;d.textContent=`Slide | ${O} | Merkoba | 2025 | ${App.commit_hash}`,d.id="modal-title-about",d.title="Name | Version | Company | Year | Commit Hash";let A=DOM.el(".modal-body",e);A.id="modal-body-about",A.innerHTML=`
    <div class="about-item">Slide is a music player that uses <a target=_blank class="popup" href="https://strudel.cc">strudel</a> code.</div>
    <div class="about-item">It's meant to allow automatic & seamless code updates.</div>
    <div class="about-item">There's a song picker to play elaborate tunes.</div>
    <div class="about-item">The code can be edited in real time and applied with Play.</div>
    <div class="about-item">The scope visualizer can be clicked in the left/center/right.</div>
    <div class="about-item">Clicking the scope produces a tone and a reverb affect.</div>
    <div class="about-item">Clicking the scope on the left produces left panning.</div>
    <div class="about-item">Clicking the scope on the right produces right panning.</div>
    <div class="about-item">A straight line to the left on the scope sets the next visual.</div>
    <div class="about-item">A straight line to the right on the scope opens a random song.</div>
    <div class="about-item">Ctrl+s = Starts playback / Updates code.</div>
    <div class="about-item">Escape = Closes top modal or stops playback.</div>
    <div class="about-item">Ctrl+1 = Show the sound context.</div>
    <div class="about-item">Ctrl+2 = Show the note context.</div>
    <div class="about-item">Ctrl+3 = Show the bank context.</div>
    <div class="about-item">Try drawing a triangle on the scope.</div>
    <div class="about-item">Try drawing a rectangle on the scope.</div>
    <div class="about-item">Try drawing a circle on the scope.</div>
    <hr>
    <div class="about-item">Credit: Gemini</div>
    <div class="about-item">Credit: ChatGPT</div>
    <div class="about-item">Credit: Claude</div>
  `},App.open_about_modal=()=>{App.open_modal("about")},App.auto_delay=5,App.auto_endpoint="/status",App.setup_auto=()=>{let e=DOM.el("#auto-start");e&&DOM.ev(e,"click",()=>{let A=DOM.el("#auto-input");A&&App.start_auto(A.value)});let o=DOM.el("#auto-stop");o&&DOM.ev(o,"click",()=>{App.stop_status_watch()});let l=DOM.el("#auto-default");l&&DOM.ev(l,"click",()=>{App.start_auto("/status")});let d=DOM.el("#auto-input");d&&DOM.ev(d,"keydown",A=>{if(A.key==="Enter"){A.preventDefault();let S=DOM.el("#auto-input");S&&App.start_auto(S.value)}});let O=DOM.el("#auto-delay");O&&DOM.ev(O,"change",A=>{App.auto_delay=parseInt(A.target.value,10),App.stor_save_auto_delay(),App.fetch_timer&&App.strudel_watch_status()})},App.create_auto_modal=()=>{let e=App.create_modal("auto"),o=DOM.el(".modal-title",e);o.textContent="Auto Mode";let l=DOM.el(".modal-body",e);l.id="modal-body-auto";let d=DOM.create("div","","auto-info");d.textContent="Code will be fetched periodically";let O=DOM.create("select","modal-select","auto-delay");O.innerHTML=`
    <option value="1">1 second</option>
    <option value="5" selected>5 seconds</option>
    <option value="10">10 seconds</option>
    <option value="30">30 seconds</option>
    <option value="60">1 minute</option>
    <option value="300">5 minutes</option>
    <option value="600">10 minutes</option>
    <option value="900">15 minutes</option>
    <option value="1200">20 minutes</option>
    <option value="1800">30 minutes</option>
    <option value="3600">1 hour</option>
  `;let A=DOM.create("input","","auto-input");A.classList.add("modal-input"),A.placeholder="Endpoint URL";let S=DOM.create("div","modal-buttons","auto-buttons");S.innerHTML=`
    <button id="auto-default">Default</button>
    <button id="auto-stop">Stop</button>
    <button id="auto-start">Start</button>
  `,l.appendChild(d),l.appendChild(O),l.appendChild(A),l.appendChild(S)},App.open_auto_modal=()=>{App.open_modal("auto"),DOM.el("#auto-delay").value=App.auto_delay,DOM.el("#auto-input").value=App.auto_endpoint,App.fetch_timer?(DOM.hide("#auto-start"),DOM.show("#auto-stop")):(DOM.show("#auto-start"),DOM.hide("#auto-stop"))},App.start_auto=async e=>{if(App.close_modal("auto"),!e||!e.trim()){App.set_status("Invalid endpoint");return}App.auto_endpoint=e.trim(),App.stor_save_auto_endpoint(),await App.ensure_strudel_ready()&&App.strudel_watch_status()},App.fetch_status_code=async()=>{const e=await fetch(App.auto_endpoint,{cache:"no-store"});if(!e.ok)throw new Error(`Status endpoint returned ${e.status}`);return e.text()},App.strudel_watch_status=()=>{if(!App.strudel_watch_status){console.warn("Polling function missing. Did strudel bundle load?");return}if(!App.auto_delay||App.auto_delay<=0){console.error("Provide a fetch interval in seconds greater than zero");return}App.status_watch_cancelled=!1;const e=App.auto_delay*1e3,o=async()=>{if(console.info("🤖 Fetching auto code"),!App.fetch_in_flight){App.fetch_in_flight=!0;try{const d=(await App.fetch_status_code()).trim();if(!d)return;if(App.status_watch_cancelled){console.info("Status watch was cancelled, skipping play action");return}App.set_song_context(),App.audio_started?await App.play_action(d):App.code_to_play=d}catch(l){console.error("Failed to update Strudel status",l)}finally{App.fetch_in_flight=!1}}};App.stop_status_watch(!1),o(),App.fetch_timer=setInterval(()=>{o()},e),console.info("Interval started.")},App.stop_status_watch=(e=!0)=>{App.close_modal("auto"),App.fetch_timer&&(console.info("Interval cleared 🖐"),clearInterval(App.fetch_timer),App.fetch_timer=void 0,e&&(App.status_watch_cancelled=!0))},App.canvas_effect_time=3*1e3,App.animation_frames=0,App.visual_items=[{text:"auto",alt_text:"Auto - The code sets it",title:"Let the code decide. If the code contains animation calls they will be visible, else it will be a solid background"},{text:"none",alt_text:"None - Solid background",title:"Use a solid background. Most performant option"},{text:"flux surface",title:"A shimmering, flowing horizon where colors swirl like a sunset blending into dawn, a landscape in constant motion that feels alive and mysterious, like walking through a translucent, rippling lake of light"},{text:"hyper rose",title:"A surreal garden of glowing petals that pulse with vibrant energy, blossoms blooming in impossible hues, evoking a sense of wonder and infinite growth in a dreamlike meadow"},{text:"bio tunnel",title:"A lush, organic corridor woven with twisting vines and luminous flora, evoking the feeling of wandering through an underground rainforest alive with whispers of nature’s secret life"},{text:"liquid aether",title:"A flowing, translucent river of ethereal substance, shimmering with iridescent waves that pulse softly, inviting you to drift through an otherworldly sea of pure energy and serenity"},{text:"aurora borealis",title:"A celestial dance of shimmering lights in the night sky, ribbons of green, pink, and purple swirling gracefully over icy mountains, evoking awe and the mysterious beauty of the polar skies"},{text:"orb balloons",title:"A whimsical cluster of floating orbs, each glowing softly like lanterns drifting lazily in a gentle breeze, creating a playful, dreamlike atmosphere of floating serenity and joyful levity"}],App.get_bg_canvas=()=>DOM.el("#background-canvas"),App.get_bg_context=()=>App.background_canvas.getContext("2d"),App.start_visual=()=>{App.visual=App.visual||"auto",App.background_canvas=App.get_bg_canvas(),App.background_canvas_ctx=App.get_bg_context(),App.visual_animations=[App.anim_neon_waves],DOM.ev(window,"resize",()=>{App.background_canvas&&(App.background_canvas.width=window.innerWidth,App.background_canvas.height=window.innerHeight)}),App.resize_listener||(App.resize_listener=()=>{App.background_canvas&&(App.background_canvas.width=window.innerWidth,App.background_canvas.height=window.innerHeight)},DOM.ev(window,"resize",App.resize_listener)),App.background_canvas.width=window.innerWidth,App.background_canvas.height=window.innerHeight,App.apply_visual(App.visual)},App.create_visual_modal=()=>{let e=App.create_list_modal("visual"),o=DOM.el(".modal-title",e);o.textContent="Select Visual"},App.open_visual_modal=async()=>{let e=App.visual_items;App.show_items_modal("visual",{items:e,action:o=>{let l=o.text.toLowerCase();App.apply_visual(l),App.close_modal("visual")},active:App.get_active_visual_index()})},App.apply_visual=e=>{App.animation_id&&(cancelAnimationFrame(App.animation_id),App.animation_id=null),App.flow_particles=null,App.bg_orbs=null,App.visual=e,App.stor_save_visual(),["auto"].includes(e)?(App.clear_visual(),App.background_canvas.classList.add("under")):["none"].includes(e)?(App.clear_visual(),App.background_canvas.classList.remove("under")):(App.background_canvas.classList.remove("under"),App.render_animation())},App.anim_bio_tunnel=(e,o,l,d)=>{let O=o/2,A=l/2,S=d*.02;for(let $=0;$<40;$++){let F=($*20+d*5)%1e3,E=1e3/(F+10);if(E>20)continue;e.beginPath(),e.lineWidth=2*E;let L=(S*50+F*.5)%360;e.strokeStyle=`hsla(${L}, 80%, 60%, ${F/1e3})`;for(let N=0;N<=6;N++){let V=N/6*Math.PI*2,U=(200+Math.sin(S*3+V*4)*50)*E,q=S*.5,ee=O+Math.cos(V+q)*U,le=A+Math.sin(V+q)*U;N===0?e.moveTo(ee,le):e.lineTo(ee,le)}e.closePath(),e.stroke()}},App.anim_flux_surface=(e,o,l,d)=>{let O=30,A=40,S=d*.03,$=S*2,F=65;e.lineWidth=2;let E=[];for(let L=0;L<=o;L+=A)E.push(Math.sin(L*.005+S)*50);for(let L=-F;L<l+F;L+=O){let N=L*.01,V=(L*.2+d*.5)%360;e.strokeStyle=`hsla(${V}, 60%, 60%, 0.8)`,e.beginPath();let B=0;for(let U=0;U<=o;U+=A){let q=E[B],ee=Math.sin(U*.02-$+N)*15;e.lineTo(U,L+q+ee),B++}e.stroke()}},App.anim_hyper_rose=(e,o,l,d)=>{let O=o/2,A=l/2,S=Math.max(o,l)*.8,$=d*.002,F=Math.PI*2,E=.01;e.lineWidth=2,e.lineJoin="round",e.globalCompositeOperation="lighter";for(let L=0;L<8;L++){let N=L/8,V=S*(1-N),B=(d*.2+L*15)%360;e.strokeStyle=`hsla(${B}, 80%, 50%, 0.6)`,e.beginPath();for(let U=0;U<F;U+=E){let q=Math.sin(U*7+$*5)*Math.cos(U*3-$),ee=V*(.5+.5*q),le=U+$*(L+1),ue=O+Math.cos(le)*ee,_e=A+Math.sin(le)*ee;e.lineTo(ue,_e)}e.closePath(),e.stroke()}e.globalCompositeOperation="source-over"},App.anim_liquid_aether=(e,o,l,d)=>{let O=80,A=.6,S=4;(!App.flow_particles||App.flow_particles.length!==O)&&(App.flow_particles=Array(O).fill().map(()=>{let E=Math.random()*100;return{x:Math.random()*o,y:Math.random()*l,speed:A,life:E,max_life:E,angle_offset:Math.random()*Math.PI*2,size:Math.random()*4+2}})),(!App.bg_orbs||App.bg_orbs.length!==S)&&(App.bg_orbs=Array(S).fill().map((E,L)=>({x:Math.random()*o,y:Math.random()*l,vx:(Math.random()-.5)*1,vy:(Math.random()-.5)*1,radius:Math.random()*500+400,hue:L*50}))),e.globalCompositeOperation="source-over",e.fillStyle="rgba(15, 10, 30, 0.1)",e.fillRect(0,0,o,l);let $=d*.002;e.globalCompositeOperation="lighter",App.bg_orbs.forEach(E=>{E.x+=E.vx+Math.sin($)*1,E.y+=E.vy+Math.cos($)*1,E.x<-E.radius&&(E.x=o+E.radius),E.x>o+E.radius&&(E.x=-E.radius),E.y<-E.radius&&(E.y=l+E.radius),E.y>l+E.radius&&(E.y=-E.radius);let L=e.createRadialGradient(E.x,E.y,0,E.x,E.y,E.radius),N=.4+Math.sin($*2+E.hue)*.2;L.addColorStop(0,`hsla(${E.hue+d*.1}, 80%, 60%, ${N})`),L.addColorStop(1,"rgba(0,0,0,0)"),e.fillStyle=L,e.beginPath(),e.arc(E.x,E.y,E.radius,0,Math.PI*2),e.fill()}),e.globalCompositeOperation="source-over";let F=5e-4;App.flow_particles.forEach(E=>{E.life--,E.life<=0&&(E.x=Math.random()*o,E.y=Math.random()*l,E.life=100+Math.random()*100,E.max_life=E.life,E.size=Math.random()*4+2),e.beginPath();let L=(d*.1+E.x*.02+E.y*.02)%360,N=(E.max_life-E.life)/50,V=E.life/50,B=Math.min(N,V,.8);B=Math.max(0,B),e.fillStyle=`hsla(${L}, 90%, 80%, ${B})`,e.arc(E.x,E.y,E.size,0,Math.PI*2),e.fill();let U=Math.cos(E.x*F+$)+Math.sin(E.y*F+$)+E.angle_offset;E.x+=Math.cos(U)*E.speed,E.y+=Math.sin(U)*E.speed,E.x<-10&&(E.x=o+10),E.x>o+10&&(E.x=-10),E.y<-10&&(E.y=l+10),E.y>l+10&&(E.y=-10)})},App.anim_orb_balloons=(e,o,l,d)=>{let O=8;(!App.bg_orbs||App.bg_orbs.length!==O)&&(App.bg_orbs=Array(O).fill().map((S,$)=>({x:Math.random()*o,y:Math.random()*l,vx:(Math.random()-.5)*3,vy:(Math.random()-.5)*3,base_radius:Math.random()*150+100,hue:Math.random()*360,phase:Math.random()*Math.PI*2}))),e.globalCompositeOperation="source-over",e.fillStyle="rgba(15, 5, 25, 0.2)",e.fillRect(0,0,o,l);let A=d*.01;e.globalCompositeOperation="lighter",App.bg_orbs.forEach(S=>{S.x+=S.vx,S.y+=S.vy,S.x<-S.base_radius&&(S.vx*=-1),S.x>o+S.base_radius&&(S.vx*=-1),S.y<-S.base_radius&&(S.vy*=-1),S.y>l+S.base_radius&&(S.vy*=-1);let $=S.base_radius+Math.sin(A+S.phase)*50,F=e.createRadialGradient(S.x,S.y,0,S.x,S.y,$),E=(S.hue+d*.5)%360;F.addColorStop(0,`hsla(${E}, 80%, 60%, 0.6)`),F.addColorStop(1,`hsla(${E}, 80%, 40%, 0)`),e.fillStyle=F,e.beginPath(),e.arc(S.x,S.y,$,0,Math.PI*2),e.fill()}),e.globalCompositeOperation="source-over"},App.anim_aurora_borealis=(e,o,l,d)=>{let O=d*.02;e.lineWidth=2,e.globalCompositeOperation="lighter";for(let A=0;A<5;A++){e.beginPath();let S=l*.8,$=(d*.5+A*50)%360;e.fillStyle=`hsla(${$}, 60%, 50%, 0.3)`,e.moveTo(0,l);for(let F=0;F<=o;F+=20){let E=Math.sin(F*.002+O+A)*100+Math.sin(F*.01-O*2)*50;e.lineTo(F,S+E-A*100)}e.lineTo(o,l),e.closePath(),e.fill()}e.globalCompositeOperation="source-over"},App.render_animation=()=>{if(["auto","none"].includes(App.visual))return;let e=window.innerWidth,o=window.innerHeight,l="rgba(0, 0, 0, 0.12)";App.background_canvas_ctx.fillStyle=l,App.background_canvas_ctx.fillRect(0,0,e,o),App.visual==="bio tunnel"?App.anim_bio_tunnel(App.background_canvas_ctx,e,o,App.animation_frames):App.visual==="flux surface"?App.anim_flux_surface(App.background_canvas_ctx,e,o,App.animation_frames):App.visual==="hyper rose"?App.anim_hyper_rose(App.background_canvas_ctx,e,o,App.animation_frames):App.visual==="liquid aether"?App.anim_liquid_aether(App.background_canvas_ctx,e,o,App.animation_frames):App.visual==="aurora borealis"?App.anim_aurora_borealis(App.background_canvas_ctx,e,o,App.animation_frames):App.visual==="orb balloons"&&App.anim_orb_balloons(App.background_canvas_ctx,e,o,App.animation_frames),App.animation_frames++,App.animation_id=requestAnimationFrame(App.render_animation)},App.clear_visual=()=>{let e=window.innerWidth,o=window.innerHeight;App.background_canvas_ctx.clearRect(0,0,e,o)},App.get_active_visual_index=()=>App.visual_items.map(e=>e.text).indexOf(App.visual),App.next_visual=()=>{let e=App.get_active_visual_index();e+=1,e>=App.visual_items.length&&(e=0),e<=1&&(e=2);let o=App.visual_items[e];App.apply_visual(o.text)},App.canvas_effect_1=()=>{let l=App.get_raw_volume()*1e3;l>50&&(l=50);let d=100+l,O=100+l*.5,A=`brightness(${d}%) contrast(${O}%)`,S=App.get_bg_canvas();S.style.filter=A,App.start_canvas_effect_timeout()},App.canvas_effect_2=()=>{let e=App.get_volume(),o=App.get_bg_context();o.save(),o.translate(canvas.width/2,canvas.height/2);let l=1+e*.2;if(o.scale(l,l),e>.9){let d=(Math.random()-.5)*.1;o.rotate(d)}o.translate(-canvas.width/2,-canvas.height/2),current_visual.draw(o),o.restore(),App.start_canvas_effect_timeout()},App.start_canvas_effect_timeout=()=>{App.canvas_effect_timeout=setTimeout(()=>{App.clear_canvas_effects()},App.canvas_effect_time)},App.clear_canvas_effects=()=>{let e=App.get_bg_canvas();e.style.filter=""},App.def_args=(e,o)=>{for(let l in e)o[l]===void 0&&e[l]!==void 0&&(o[l]=e[l])},App.escape_regex=e=>e.replace(/[\^$*+?.()|[\]{}-]/g,"\\$&"),App.underspace=e=>e.replace(/_+/g," ").trim(),App.clean_canvas=()=>{let e=document.body,o=DOM.els("canvas");for(let l of o)["scope-canvas","background-canvas"].includes(l.id)||Array.from(l.classList).some(O=>["modal-icon"].includes(O))||e.removeChild(l)},App.truncate_path=(e,o=20)=>e.length<=o?e:e.substring(0,o)+"...",App.random_int=(e={})=>{let o={exclude:[]};if(App.def_args(o,e),e.exclude.length>0){let l=[];for(let O=e.min;O<=e.max;O++)e.exclude.includes(O)||l.push(O);if(l.length===0)return;let d;return e.rand?d=Math.floor(e.rand()*l.length):d=Math.floor(Math.random()*l.length),l[d]}return e.rand?Math.floor(e.rand()*(e.max-e.min+1)+e.min):Math.floor(Math.random()*(e.max-e.min+1)+e.min)},App.create_debouncer=(e,o)=>{if(typeof e!="function"){App.error("Invalid debouncer function");return}if(typeof o!="number"||o<1){App.error("Invalid debouncer delay");return}let l,d={};function O(){clearTimeout(l),l=void 0}function A(...S){e(...S)}return d.call=(...S)=>{O(),l=setTimeout(()=>{A(...S)},o)},d.call_2=(...S)=>{l||d.call(S)},d.now=(...S)=>{O(),A(...S)},d.cancel=()=>{O()},d},App.boolstring=e=>e&&e==="true",App.capitalize=e=>e.split(" ").map(o=>o.charAt(0).toUpperCase()+o.slice(1)).join(" "),App.get_el_height=e=>{if(!e)return 0;let o=window.getComputedStyle(e),l=e.clientHeight,d=parseFloat(o.paddingTop)||0,O=parseFloat(o.paddingBottom)||0,A=parseFloat(o.marginTop)||0,S=parseFloat(o.marginBottom)||0;return l-d-O+d+O+A+S},App.viewport_height=()=>window.innerHeight||document.documentElement.clientHeight,App.compress_string=e=>{try{return lz.compressToEncodedURIComponent(e)}catch{return""}},App.uncompress_string=e=>{try{return lz.decompressFromEncodedURIComponent(e)}catch{return""}},App.tempo_storage_key="slide.tempo",App.auto_endpoint_storage_key="slide.auto_endpoint",App.auto_delay_storage_key="slide.auto_delay",App.volume_storage_key="slide.volume",App.visual_storage_key="slide.visual",App.scope_storage_key="slide.scope",App.colors_storage_key="slide.colors",App.code_storage_key="slide.code",App.lines_storage_key="slide.lines",App.load_storage=(e,o)=>{let l=localStorage.getItem(App[`${e}_storage_key`]);[null,void 0].includes(l)||o(l)},App.save_storage=(e,o)=>{localStorage.setItem(App[`${e}_storage_key`],o)},App.load_all_storage=()=>{App.stor_load_auto_endpoint(),App.stor_load_auto_delay(),App.stor_load_tempo(),App.stor_load_volume(),App.stor_load_visual(),App.stor_load_scope(),App.stor_load_colors(),App.stor_load_code(),App.stor_load_lines()},App.stor_load_auto_endpoint=()=>{App.load_storage("auto_endpoint",e=>{App.auto_endpoint=e})},App.stor_load_auto_delay=()=>{App.load_storage("auto_delay",e=>{App.auto_delay=parseInt(e)})},App.stor_load_tempo=()=>{App.load_storage("tempo",e=>{App.tempo=parseInt(e)})},App.stor_load_volume=()=>{App.load_storage("volume",e=>{App.volume=parseInt(e)})},App.stor_load_visual=()=>{App.load_storage("visual",e=>{App.visual=e})},App.stor_load_scope=()=>{App.load_storage("scope",e=>{App.scope_enabled=App.boolstring(e)})},App.stor_load_colors=()=>{App.load_storage("colors",e=>{App.colors_enabled=App.boolstring(e)})},App.stor_load_lines=()=>{App.load_storage("lines",e=>{App.lines_enabled=App.boolstring(e)})},App.stor_load_code=()=>{App.load_storage("code",e=>{App.last_code=e})},App.stor_save_auto_delay=()=>{App.save_storage("auto_delay",App.auto_delay)},App.stor_save_auto_endpoint=()=>{App.save_storage("auto_endpoint",App.auto_endpoint)},App.stor_save_tempo=()=>{App.save_storage("tempo",App.tempo)},App.stor_save_volume=()=>{App.save_storage("volume",App.volume)},App.stor_save_visual=()=>{App.save_storage("visual",App.visual)},App.stor_save_scope=()=>{App.save_storage("scope",App.scope_enabled)},App.stor_save_colors=()=>{App.save_storage("colors",App.colors_enabled)},App.stor_save_lines=()=>{App.save_storage("lines",App.lines_enabled)},App.stor_save_code=()=>{App.save_storage("code",App.last_code)},App.beep_sound=()=>{try{let e=App.get_audio_context(),o=e.createOscillator(),l=e.createGain();o.type="triangle",o.frequency.setValueAtTime(440,e.currentTime),o.frequency.linearRampToValueAtTime(445,e.currentTime+.1),l.gain.setValueAtTime(.05,e.currentTime),l.gain.exponentialRampToValueAtTime(.001,e.currentTime+.2),o.connect(l),l.connect(e.destination),o.start(),o.stop(e.currentTime+.2)}catch(e){console.error("Failed to play sound",e)}},App.get_audio_context=()=>{if(window.master_fx&&window.master_fx.context)return window.master_fx.context;if(App.audio_context)return App.audio_context;try{return App.audio_context=new(AudioContext||window.webkitAudioContext),App.audio_context}catch{return console.error("Web Audio API is not supported"),null}},App.splash_reverb=e=>{window.master_fx.splash_reverb(e)},App.set_panning=(e,o=0)=>{if(window.master_fx.set_panning(e),o>0){clearInterval(App.panning_interval);let l=e/(o*1e3/50),d=e;App.panning_interval=setInterval(()=>{d-=l,Math.abs(d)<=Math.abs(l)?(window.master_fx.set_panning(0),clearInterval(App.panning_interval)):window.master_fx.set_panning(d)},50)}},App.get_panning=()=>App.panning.pan.value,App.set_gain=e=>{window.master_fx.set_volume(e)},App.set_eq=(e,o,l)=>{window.master_fx.set_eq_freqs(e,o,l)},App.start_auto_pan=(e=2,o=.8)=>{window.master_fx.set_auto_pan(e,o)},App.stop_auto_pan=()=>{window.master_fx.set_auto_pan(0,0)},App.spin_panning=(e=2e3)=>{App.start_auto_pan(4,1),setTimeout(()=>{App.stop_auto_pan()},e)},App.get_raw_volume=()=>window.master_fx?.get_volume()||0,App.is_playing=!1,App.play_running=!1,App.setup_player=()=>{let e=[];App.drawer=new Drawer(o=>{let l=[];for(let O of o)O.context&&O.context.locations?l.push(...O.context.locations):O.context&&O.context.location&&l.push(O.context.location);let d=!1;if(l.length!==e.length)d=!0;else for(let O=0;O<l.length;O++){let A=l[O],S=e[O];if(A.start!==S.start||A.end!==S.end){d=!0;break}}d&&(App.editor&&App.editor.dispatch({effects:App.set_highlight.of(l)}),e=l)},[0,0])},App.reset_playing=()=>{App.play_running=!1},App.play_action=async(e="",o=!1)=>{if(console.info("🔮 Play Action"),App.play_running)return;if(App.play_running=!0,App.update_url(),!await App.ensure_strudel_ready()){App.reset_playing();return}if(e||(e=App.get_input_value()),!e){App.last_code="",App.current_song="",App.reset_playing(),App.stop_action();return}if(!o&&e===App.last_code){App.reset_playing();return}App.restart_code_scroll(!1),App.last_code=e,App.stor_save_code(),App.clear_draw_context(),App.start_color_cycle(),App.clean_canvas(),App.update_title(),App.is_playing=!0;try{await App.strudel_update(e)}catch(d){App.set_status(`Error: ${d.message}`)}App.reset_playing()},App.stop_action=()=>{console.info("🔮 Stop Action"),App.stop_strudel(),App.stop_code_scroll(),App.clear_draw_context(),App.set_stop_status(),App.set_song_context(""),App.is_playing=!1},App.stop_strudel=()=>{App.stop_color_cycle(),App.clear_draw_context(),App.scheduler.stop(),App.clean_canvas()},App.strudel_update=async e=>{if(!App.audio_started){console.warn("Audio not started yet. Call strudel_init() first.");return}console.info("Updating 💨"),await App.ensure_scope(),App.set_song_tempo(e),App.update_url();let o=await App.run_eval(e);if(o.ok){App.playing();return}App.do_partial_updates&&await App.apply_partial_update(e)||App.report_eval_failure(o.error)},App.playing=e=>{let o="",l=App.get_song_name(!0);l&&(o=`Playing: ${l}`),o||(App.fetch_timer?o="Playing 🤖":App.beat_title?o=`Playing: ${App.beat_title}`:o="Playing 🥁"),e&&(o=`${o} - ${e}`.trim()),App.set_status(o)},App.set_stop_status=()=>{let e=App.get_song_name(!0);e?App.set_status(`Stopped: ${e}`):App.set_status("Stopped")},App.load_last_code=()=>{App.last_code&&App.set_input(App.last_code)},App.restart_code_scroll=(e=!0)=>{e&&App.scroll_input_to_top(),App.code_scroll_active&&(App.defer_code_scroll(App.code_scroll_song_pause_ms),App.reset_code_scroll_for_content(App.code_scroll_song_pause_ms))},App.strudel_init=async()=>{if(App.audio_started){console.info("Audio already initialized");return}console.info("Initializing Audio...");try{console.info("Loading scope..."),await App.ensure_scope(),console.info("Scope loaded"),console.info("Initializing audio context..."),await initAudio(),strudelMini.miniAllStrings();let e="https://raw.githubusercontent.com/felixroos/dough-samples/main";console.info("Loading samples and soundfonts..."),await Promise.all([registerSynthSounds(),registerSoundfonts(),samples("github:tidalcycles/dirt-samples"),samples(`${e}/tidal-drum-machines.json`)]),App.audio_started=!0,App.apply_volume(),console.info("Audio Ready."),App.code_to_play&&(App.play_action(App.code_to_play),App.code_to_play="")}catch(e){throw console.error("Audio Failed:",e),e}},App.run_eval=async e=>{App.reset_eval_state(),e=App.filter_code(e),App.set_input(e);try{await App.evaluate(e),App.draw_started||(App.drawer.start(App.scheduler),App.draw_started=!0)}catch(o){return{ok:!1,error:o}}return App.has_error?{ok:!1,error:new Error(App.last_eval_error||"Evaluation error")}:{ok:!0}},App.create_settings_modal=()=>{let e=App.create_modal("settings"),o=DOM.el(".modal-title",e);o.textContent="Settings";let l=DOM.el(".modal-body",e),d=App.register_setting("Select Visual","Change the background animation",()=>{App.open_visual_modal()}),O=App.register_setting("Toggle Scope","Show or hide the scope visualizer",()=>{App.toggle_scope()}),A=App.register_setting("Toggle Colors","Enable or disable the color animation",()=>{App.toggle_colors()}),S=App.register_setting("Toggle Lines","Enable or disable the line numbers",()=>{App.toggle_lines()});l.appendChild(d),l.appendChild(O),l.appendChild(A),l.appendChild(S)},App.register_setting=(e,o,l)=>{let d=DOM.create("button");return d.textContent=e,d.title=o,DOM.ev(d,"click",()=>{l(),App.close_modal("settings")}),d},App.open_settings_modal=()=>{App.open_modal("settings")},App.beat_title="",App.setup_status=()=>{App.status_debouncer=App.create_debouncer(o=>{App.do_set_status(o)},200);let e=App.get_status();DOM.ev(e,"click",()=>{App.ask_for_title()}),DOM.ev(e,"wheel",o=>{o.deltaY<0?e.scrollLeft-=20:o.deltaY>0&&(e.scrollLeft+=20)})},App.get_status=()=>DOM.el("#status"),App.set_status=e=>{App.status_debouncer&&App.status_debouncer.call(e)},App.do_set_status=e=>{let o=App.get_status();o.scrollTop=0,o.scrollLeft=0,o.innerText=e},App.ask_for_title=()=>{if(App.get_matched_song())return;let o=prompt("Title of this beat");o&&(App.beat_title=o.trim(),App.update_url(),App.update_title(),App.is_playing&&App.playing())},App.start_keyboard=()=>{DOM.ev(document,"keydown",e=>{if(e.key==="s")e.ctrlKey&&(e.preventDefault(),App.play_action());else if(e.key==="Escape"){if(e.preventDefault(),NeedContext.open)return;App.modal_open()?App.close_current_modal():App.stop_action()}else e.key==="1"?e.ctrlKey&&App.show_sounds_context():e.key==="2"?e.ctrlKey&&App.show_notes_context():e.key==="3"&&e.ctrlKey&&App.show_banks_context()})},App.generic_hint=(e,o,l)=>{let d=e.getCursor(),O=e.getTokenAt(d),A=O.string.replace(/['"]/g,""),S=l.filter($=>$.toLowerCase().startsWith(A.toLowerCase()));S.length===0?console.log("⚠️ No matches found for:",A):console.log(`✅ Found ${S.length} matches`),o({list:S,from:{line:d.line,ch:O.start+1},to:{line:d.line,ch:O.end}})},App.sounds_hint=(e,o)=>{App.generic_hint(e,o,App.strudel_sounds)},App.notes_hint=(e,o)=>{App.generic_hint(e,o,App.strudel_notes)},App.banks_hint=(e,o)=>{App.generic_hint(e,o,App.strudel_banks)},App.sounds_hint.async=!0,App.notes_hint.async=!0,App.banks_hint.async=!0,App.sound_hint_func=e=>{let o=e.getCursor();return{list:App.strudel_sounds,from:o,to:o}},App.custom_completion_source=e=>{let o=e.matchBefore(/(note|bank|sound)\(["']/);if(!o)return null;let l=[];return o.text.startsWith("note")?l=App.notes_hint:o.text.startsWith("bank")?l=App.banks_hint:o.text.startsWith("sound")&&(l=App.sounds_hint),{from:e.pos,options:l.map(d=>({label:d,type:"text"}))}},App.setup_editor_autocomplete=()=>{let{autocompletion:e}=window.CM;return e({override:[App.custom_completion_source],defaultKeymap:!0})},NeedContext.init(),NeedContext.after_hide=()=>{App.focus_input()},App.show_generic_context=(e,o,l)=>{let d=e.map(O=>({text:O,action:()=>{App.add_text_to_input(O)}}));App.show_context(d,l,o)},App.show_sounds_context=e=>{App.show_generic_context(App.strudel_sounds,"Sounds",e)},App.show_notes_context=e=>{App.show_generic_context(App.strudel_notes,"Notes",e)},App.show_banks_context=e=>{App.show_generic_context(App.strudel_banks,"Banks",e)},App.show_context=(e,o,l)=>{let d={items:e,title:l};o&&(d.x=o.x,d.y=o.y),NeedContext.show(d)},App.strudel_banks=["AJKPercusyn","AkaiLinn","AkaiMPC60","AkaiXR10","AlesisHR16","AlesisSR16","BossDR110","BossDR220","BossDR55","BossDR550","CasioRZ1","CasioSK1","CasioVL1","DoepferMS404","EmuDrumulator","EmuSP12","KorgDDM110","KorgKPR77","KorgKR55","KorgKRZ","KorgM1","KorgMinipops","KorgPoly800","KorgT3","Linn9000","LinnLM1","LinnLM2","MoogConcertMateMG1","OberheimDMX","RhodesPolaris","RhythmAce","RolandCompurhythm1000","RolandCompurhythm78","RolandCompurhythm8000","RolandD110","RolandD70","RolandDDR30","RolandJD990","RolandMC202","RolandMC303","RolandMT32","RolandR8","RolandS50","RolandSH09","RolandSystem100","RolandTR505","RolandTR606","RolandTR626","RolandTR707","RolandTR727","RolandTR808","RolandTR909","SakataDPM48","SequentialCircuitsDrumtracks","SequentialCircuitsTom","SimmonsSDS400","SimmonsSDS5","SoundmastersR88","UnivoxMicroRhythmer12","ViscoSpaceDrum","XdrumLM8953","YamahaRM50","YamahaRX21","YamahaRX5","YamahaRY30","YamahaTG33"],App.strudel_sounds=["sawtooth","square","triangle","sine","sax","gtr","moog","white","pink","brown","bd","sd","rim","hh","oh","lt","mt","ht","rd","cr"],App.strudel_notes=["c4","e4","g4","a4","f4","d4","b4","c3","e3","g3","a3","f3","d3","b3","f#4","bb4","c#4","eb4","g#4","f#3","bb3","c#3","eb3","g#3","c5","e5","g5","a5","f5","d5","b5","c2","e2","g2","a2","f2","d2","b2","f#5","bb5","c#5","eb5","g#5","f#2","bb2","c#2","eb2","g#2","c6","e6","g6","a6","f6","d6","b6","c1","e1","g1","a1","f1","d1","b1","f#6","bb6","c#6","eb6","g#6","f#1","bb1","c#1","eb1","g#1","c7","e7","g7","c0","e0","g0"],App.colors_enabled=!0,App.apply_color=e=>{let o=DOM.el("#volume-value"),l=DOM.el("#volume-slider"),d=DOM.el("#tempo-value"),O=DOM.el("#tempo-slider"),A=DOM.el("#status"),S=DOM.el("#image");o&&(o.style.color=e),l&&(l.style.accentColor=e),d&&(d.style.color=e),O&&(O.style.accentColor=e),A&&(A.style.color=e),S&&(S.style.filter=`drop-shadow(0 0 0.15rem ${e})`)},App.start_color_cycle=()=>{App.colors_enabled&&(App.color_cycle_timer||(App.color_index=0,App.apply_color(App.cycle_colors[0],0),App.color_cycle_timer=setInterval(()=>{App.color_index=(App.color_index+1)%App.cycle_colors.length,App.apply_color(App.cycle_colors[App.color_index],App.color_index)},3*1e3)))},App.stop_color_cycle=()=>{App.color_cycle_timer&&(clearInterval(App.color_cycle_timer),App.color_cycle_timer=void 0),App.color_index=0;let e=App.cycle_colors[0],o=DOM.el("#volume-value"),l=DOM.el("#volume-slider"),d=DOM.el("#tempo-value"),O=DOM.el("#tempo-slider"),A=DOM.el("#status"),S=DOM.el("#image");o&&(o.style.color=e),l&&(l.style.accentColor=e),d&&(d.style.color=e),O&&(O.style.accentColor=e),A&&(A.style.color=e),S&&(S.style.filter="")},App.toggle_colors=()=>{App.colors_enabled=!App.colors_enabled,App.stor_save_colors(),App.is_playing&&(App.colors_enabled?App.start_color_cycle():App.is_playing&&App.stop_color_cycle())},App.color_interface=e=>{let o=App[`scope_click_color_${e}`];App.do_color_interface(o)},App.restore_interface_colors=()=>{App.do_color_interface(App.border_color)},App.do_color_interface=e=>{App.set_input_border(e);let o=App.get_scope_container();o.style.borderColor=e},App.max_scope_slide_y_dff=50,App.scope_panning_zone=100,App.scope_padding_amount=.9,App.scope_slide_distance=180,App.scope_slide_delay=800,App.scope_gestures_enabled=!1,App.many_clicks_amount=100,App.check_gestures=()=>{if(Date.now()-App.scope_mousedown_date<=App.scope_slide_delay&&App.check_scope_slide()){App.scope_gestures_enabled=!1;return}if(App.scope_gestures_enabled){if(App.triangle_gesture()){App.gesture_function(2,()=>{App.glow_input(),App.canvas_effect_1()});return}else if(App.square_gesture()){App.gesture_function(3,()=>{App.glow_input()});return}else if(App.circle_gesture()){App.gesture_function(4,()=>{App.glow_input()});return}else if(App.scope_clicks.length>=App.many_clicks_amount){App.gesture_function(5,()=>{App.glow_input()});return}}Date.now()-App.scope_mousedown_date<=App.scope_beep_delay&&(App.splash_reverb(2),App.check_scope_panning()||App.beep_sound())},App.check_scope_slide=()=>{let e=App.mouse_down_coords,o=App.mouse_up_coords;if(!(Math.abs(App.scope_max_y-App.scope_min_y)>=App.max_scope_slide_y_dff))return Math.abs(e.x-o.x)>=App.scope_slide_distance?(e.x<o.x?App.random_song():App.next_visual(),App.clear_clicks(),!0):!1},App.check_scope_panning=()=>{let e=App.mouse_down_coords,o=App.mouse_up_coords,{width:l,height:d}=App.get_scope_dimensions(),O=App.scope_panning_zone,A=App.scope_padding_amount;return e.x<=O||o.x<=O?(App.set_panning(-A,3),!0):e.x>=l-O||o.x>=l-O?(App.set_panning(A,3),!0):!1},App.circle_gesture=()=>{let e=App.scope_clicks;if(!e||!Array.isArray(e))return!1;let o=e.length;if(o<8)return!1;let l=1/0,d=-1/0,O=1/0,A=-1/0,S=0,$=0;for(let Oe=0;Oe<o;Oe++){let ve=e[Oe];ve.x<l&&(l=ve.x),ve.x>d&&(d=ve.x),ve.y<O&&(O=ve.y),ve.y>A&&(A=ve.y),S+=ve.x,$+=ve.y}let F=Math.hypot(d-l,A-O),E=e[0],L=e[o-1];if(Math.hypot(E.x-L.x,E.y-L.y)/F>.35)return!1;let V=d-l,B=A-O,U=V/B;if(U<.4||U>2.5)return!1;let q=S/o,ee=$/o,le=0,ue=[];for(let Oe=0;Oe<o;Oe++){let ve=e[Oe].x-q,Re=e[Oe].y-ee,Me=Math.hypot(ve,Re);ue.push(Me),le+=Me}let _e=le/o,ie=0;for(let Oe=0;Oe<o;Oe++){let ve=ue[Oe]-_e;ie+=ve*ve}return Math.sqrt(ie/o)/_e<.35},App.triangle_gesture=()=>{let e=(A,S)=>{let $=A.x-S.x,F=A.y-S.y;return $*$+F*F},o=(A,S,$)=>{let F=e(S,$);if(F===0)return e(A,S);let E=((A.x-S.x)*($.x-S.x)+(A.y-S.y)*($.y-S.y))/F;return E=Math.max(0,Math.min(1,E)),e(A,{x:S.x+E*($.x-S.x),y:S.y+E*($.y-S.y)})},l=(A,S,$)=>{let F={x:A.x-S.x,y:A.y-S.y},E={x:$.x-S.x,y:$.y-S.y},L=F.x*E.x+F.y*E.y,N=Math.sqrt(F.x*F.x+F.y*F.y),V=Math.sqrt(E.x*E.x+E.y*E.y);if(N*V===0)return 0;let B=L/(N*V);return B=Math.max(-1,Math.min(1,B)),Math.acos(B)*(180/Math.PI)},d=(A,S)=>{if(A.length<=2)return A;let $=0,F=0,E=A.length-1;for(let L=1;L<E;L++){let N=o(A[L],A[0],A[E]);N>$&&($=N,F=L)}if($>S*S){let L=d(A.slice(0,F+1),S),N=d(A.slice(F),S);return L.slice(0,L.length-1).concat(N)}return[A[0],A[E]]};return(A=>{let S=A.length;if(S<10)return!1;let $=1/0,F=-1/0,E=1/0,L=-1/0;for(let ie=0;ie<S;ie++)$=Math.min($,A[ie].x),F=Math.max(F,A[ie].x),E=Math.min(E,A[ie].y),L=Math.max(L,A[ie].y);let N=Math.hypot(F-$,L-E),V=A[0],B=A[S-1];if(Math.hypot(V.x-B.x,V.y-B.y)/N>.2)return!1;let q=N*.15,ee=d(A,q),le=ee.length;if(le<3||le>4)return!1;let ue=ee.slice(0,3),_e=[l(ue[2],ue[0],ue[1]),l(ue[0],ue[1],ue[2]),l(ue[1],ue[2],ue[0])];for(let ie=0;ie<3;ie++)if(_e[ie]<10||_e[ie]>170)return!1;return!0})(App.scope_clicks)},App.square_gesture=()=>{let e=App.scope_clicks;if(!e||!Array.isArray(e))return!1;let o=e.length;if(o<10)return!1;let l=(ie,ae)=>{let fe=ie.x-ae.x,Oe=ie.y-ae.y;return fe*fe+Oe*Oe},d=(ie,ae,fe)=>{let Oe=l(ae,fe);if(Oe===0)return l(ie,ae);let ve=((ie.x-ae.x)*(fe.x-ae.x)+(ie.y-ae.y)*(fe.y-ae.y))/Oe;return ve=Math.max(0,Math.min(1,ve)),l(ie,{x:ae.x+ve*(fe.x-ae.x),y:ae.y+ve*(fe.y-ae.y)})},O=(ie,ae)=>{if(ie.length<=2)return ie;let fe=0,Oe=0,ve=ie.length-1;for(let Re=1;Re<ve;Re++){let Me=d(ie[Re],ie[0],ie[ve]);Me>fe&&(fe=Me,Oe=Re)}if(fe>ae*ae){let Re=O(ie.slice(0,Oe+1),ae),Me=O(ie.slice(Oe),ae);return Re.slice(0,Re.length-1).concat(Me)}return[ie[0],ie[ve]]},A=1/0,S=-1/0,$=1/0,F=-1/0;for(let ie=0;ie<o;ie++){let ae=e[ie];A=Math.min(A,ae.x),S=Math.max(S,ae.x),$=Math.min($,ae.y),F=Math.max(F,ae.y)}let E=Math.hypot(S-A,F-$),L=e[0],N=e[o-1];if(Math.hypot(L.x-N.x,L.y-N.y)/E>.4)return!1;let B=S-A,U=F-$,q=B/U;if(q<.15||q>6)return!1;let ee=E*.06,le=O(e,ee),ue=le.length;if(ue<4||ue>6)return!1;let _e=0;for(let ie=1;ie<ue-1;ie++){let ae=le[ie-1],fe=le[ie],Oe=le[ie+1],ve=fe.x-ae.x,Re=fe.y-ae.y,Me=Oe.x-fe.x,Ye=Oe.y-fe.y,Te=ve*Me+Re*Ye,Ge=Math.hypot(ve,Re),Ne=Math.hypot(Me,Ye),Je=Te/(Ge*Ne);Math.abs(Je)<.5&&_e++}return _e>=2},App.gesture_function=(e,o)=>{App.scope_gestures_enabled=!1,App.increase_scope_click_level(e),App.spin_panning(),o()},App.code_query_key="code",App.song_query_key="song",App.beat_query_key="beat",App.url_query_key="url",App.update_url=(e="")=>{let o=new URL(window.location.href),l=App.get_input_value().trim();if(e||(e=App.get_song_name()),e?o.searchParams.set(App.song_query_key,e):o.searchParams.delete(App.song_query_key),!e&&App.beat_url?o.searchParams.set(App.url_query_key,App.beat_url):o.searchParams.delete(App.url_query_key),l&&!e&&!App.beat_url&&l.length<=App.code_url_max){let d=App.compress_string(l);o.searchParams.set(App.code_query_key,d)}else o.searchParams.delete(App.code_query_key);!e&&App.beat_title?o.searchParams.set(App.beat_query_key,App.beat_title):o.searchParams.delete(App.beat_query_key),window.history.replaceState({},document.title,`${o.pathname}${o.search}${o.hash}`)},App.load_code_from_query=()=>{let o=new URLSearchParams(window.location.search).get(App.code_query_key);if(!o)return!1;try{let l=App.uncompress_string(o);return App.last_code=l,App.load_last_code(),!0}catch(l){App.set_status(`Failed to load song: ${l.message}`),console.error("Failed to load song:",l)}return!1},App.load_url_from_query=()=>{let o=new URLSearchParams(window.location.search).get(App.url_query_key);if(!o)return!1;try{return App.beat_url=o,App.load_beat_url(),!0}catch(l){App.set_status(`Failed to load song: ${l.message}`),console.error("Failed to load song:",l)}return!1},App.load_song_from_query=async()=>{let o=App.get_query_params().get(App.song_query_key);if(!o)return!1;try{App.loading();let l=await App.fetch_song_code(o);App.set_input(l),App.set_song_tempo(l),App.set_song_context(o);let d=App.clean_song_name(o);return App.set_status(`Loaded: ${d}`),!0}catch(l){App.set_status(`Failed to load song: ${l.message}`),console.error("Failed to load song:",l)}return!1},App.set_beat_title_from_query=()=>{let o=App.get_query_params().get(App.beat_query_key);o&&(App.beat_title=o)},App.get_beat_url=()=>{let e=prompt("URL of the beat (javascript/text file)");e&&(App.beat_url=e.trim(),App.load_beat_url())},App.load_beat_url=async()=>{if(App.update_url(),!!App.beat_url)try{App.loading();let e=await fetch(App.beat_url);if(!e.ok)throw new Error(`Failed to fetch the beat at ${App.beat_url}`);let o=await e.text();if(!o){App.playing();return}let l=o.trim();if(!l){App.playing();return}App.stop_action(),App.stop_status_watch(),App.last_code=l,App.set_input(l),App.set_song_tempo(l),App.set_status("Loaded URL 🌐"),App.update_url()}catch(e){console.error(e),App.playing()}},App.editor_theme={"& .cm-activeLine":{backgroundColor:"transparent !important"},"& .cm-activeLineGutter":{backgroundColor:"transparent !important"},"& .cm-gutters":{backgroundColor:"#202020 !important",borderRight:"1px solid #4C566A",paddingRight:"0.66rem"},"& .cm-lineNumbers .cm-gutterElement":{paddingLeft:"8px",color:"#aaa"},"& .cm-matchingBracket":{backgroundColor:"rgba(136, 192, 208, 0.2) !important",color:"#ECEFF4 !important"},"& .cm-nonmatchingBracket":{backgroundColor:"rgba(191, 97, 106, 0.3) !important"},"& .cm-selectionMatch":{backgroundColor:"rgba(136, 192, 208, 0.25) !important",outline:"1px solid rgba(136, 192, 208, 0.4)"},"& .cm-selectionBackground, &.cm-focused .cm-selectionBackground":{backgroundColor:"rgba(67, 76, 94, 0.8) !important"},".cm-panels":{backgroundColor:"#2E3440",color:"#D8DEE9",borderTop:"1px solid #4C566A",borderBottom:"1px solid #4C566A"},".cm-panels-top":{borderBottom:"2px solid #3B4252"},".cm-panels-bottom":{borderTop:"2px solid #3B4252"},".cm-search":{display:"block",alignItems:"center",gap:"8px",padding:"8px 12px",fontFamily:"inherit"},".cm-search .cm-textfield":{backgroundColor:"#3B4252",color:"#ECEFF4",border:"1px solid #4C566A",borderRadius:"4px",padding:"4px 8px",outline:"none",minWidth:"200px"},".cm-search .cm-textfield:focus":{border:"1px solid #88C0D0"},".cm-button":{backgroundImage:"none",backgroundColor:"#434C5E",color:"#ECEFF4",border:"none",borderRadius:"4px",padding:"4px 10px",cursor:"pointer",textTransform:"capitalize",fontSize:"0.9em"},".cm-button:hover":{backgroundColor:"#5E81AC"},".cm-button:active":{transform:"translateY(1px)"},".cm-search label":{display:"inline-flex",alignItems:"center",gap:"4px",fontSize:"0.85em",cursor:"pointer"},".cm-search input[type='checkbox']":{cursor:"pointer",accentColor:"#88C0D0"},".cm-panel.cm-search [name='close']":{marginLeft:"auto",padding:"2px 6px",fontSize:"1.2em",background:"transparent"},".cm-panel.cm-search [name='close']:hover":{color:"#C3C3C3"},".cm-searchMatch":{backgroundColor:"rgba(235, 203, 139, 0.4)",outline:"1px solid #EBCB8B"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#EBCB8B",color:"#2E3440"}},App.setup_strudel_mirror=()=>{let{EditorView:e,Decoration:o,StateField:l,StateEffect:d}=window.CM;App.set_highlight=d.define(),App.highlight_extension=l.define({create(){return o.none},update(O,A){O=O.map(A.changes);for(let S of A.effects)if(S.is(App.set_highlight)){let $=S.value.map(F=>o.mark({class:"sh-executing"}).range(F.start,F.end));return o.set($,!0)}return O},provide:O=>e.decorations.from(O)})}})();
