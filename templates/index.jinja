<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>{% if song_display %}Slide - {{ song_display }}{% else %}Slide{% endif %}</title>
        <meta property="og:title" content="{% if song_display %}Slide - {{ song_display }}{% else %}Slide{% endif %}">
        <meta property="og:description" content="{% if song_display %}Listen to {{ song_display }} on Slide{% else %}Slide - A player for strudel code{% endif %}">
        <meta property="og:type" content="music.song">
        <meta name="twitter:card" content="summary">
        <meta name="twitter:title" content="{% if song_display %}Slide - {{ song_display }}{% else %}Slide{% endif %}">
        <meta name="twitter:description" content="{% if song_display %}Listen to {{ song_display }} on Slide{% else %}Slide - A player for strudel code{% endif %}">
        <link rel="stylesheet" type="text/css" href="/css/style.css">
        <link rel="icon" type="image/png" href="/img/slide.png">
    </head>

    <body>
        <div id="main">
            <div id="top">
                <img id="image" src="/img/slide.png">
                <div id="title">Slide</div>

                <div id="top-controls">
                    <div id="volume-control" class="control-container">
                        <label for="volume-slider">Volume</label>

                        <div class="control-stepper">
                            <button id="volume-decrement" class="step-button" type="button" aria-label="Decrease volume">-</button>
                            <input id="volume-slider" type="range" min="0" max="100" value="100" step="1">
                            <button id="volume-increment" class="step-button" type="button" aria-label="Increase volume">+</button>
                        </div>
                        <span id="volume-value">100%</span>
                    </div>

                    <div id="tempo-control" class="control-container">
                        <label for="tempo-slider">Tempo</label>

                        <div class="control-stepper">
                            <button id="tempo-decrement" class="step-button" type="button" aria-label="Decrease tempo">-</button>
                            <input id="tempo-slider" type="range" min="20" max="160" value="60" step="5">
                            <button id="tempo-increment" class="step-button" type="button" aria-label="Increase tempo">+</button>
                        </div>
                        <span id="tempo-value">60 cpm</span>
                    </div>

                    <div id="scope-control">
                        <input id="scope-checkbox" type="checkbox" checked>
                        <label for="scope-checkbox">Scope</label>
                    </div>
                </div>
            </div>

            <div id="scope-wrapper">
                <div id="scope-visualizer">
                    <canvas id="scope-canvas" width="640" height="120"></canvas>
                </div>
            </div>

            <div id="code-input-wrapper" class="code-input-wrapper">
                <textarea id="code-input" spellcheck="false"></textarea>

                <div id="code-input-controls" class="code-input-controls">
                    <button type="button" id="code-input-top" class="code-input-control">Top</button>
                    <button type="button" id="code-input-bottom" class="code-input-control">Bottom</button>
                    <button type="button" id="code-input-max" class="code-input-control">Max</button>
                    <button type="button" id="code-input-scroll" class="code-input-control">Scroll</button>
                </div>

                <div id="resize-handle"></div>
            </div>

            <div id="controls">
                <button id="btn-play" title="Play the current code">Play</button>
                <button id="btn-stop" title="Stop the beat">Stop</button>
                <button id="btn-auto" title="Let the code be updated automatically (This might not be available at the time)">Auto</button>
                <button id="btn-songs" title="Play an available song">Songs</button>
                <div id="status">Not started</div>
            </div>

            <div id="songs-modal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <div id="song-picker-title">Select a Song</div>
                        <button id="modal-close">&times;</button>
                    </div>

                    <div id="songs-filter-wrapper">
                        <input id="songs-filter" type="text" placeholder="Filter songs..." autocomplete="off">
                    </div>

                    <div id="songs-list" class="songs-list">
                        <div class="loading">Loading songs...</div>
                    </div>
                </div>
            </div>

            <div id="about-modal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <div id="about-title">Slide v{{ config.version }} | Merkoba | 2025</div>
                        <button id="about-close">&times;</button>
                    </div>

                    <div id="about-body">
                        <p>Slide is a player for <a target=_blank class="popup" href="https://strudel.cc">strudel</a> code.</p>
                        <p>It's meant to allow automatic & seamless code updates.</a></p>
                        <p>There's a song picker to play elaborate tunes.</a></p>
                        <p>The code can be edited in real time and applied with Play.</a></p>
                    </div>
                </div>
            </div>

            <div id="endpoint-modal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <div id="endpoint-title">Auto Mode Endpoint</div>
                        <button id="endpoint-close">&times;</button>
                    </div>

                    <div id="endpoint-body">
                        <div>
                            Code will be fetched periodically
                        </div>

                        <div>
                            <select id="endpoint-delay-select">
                                <option value="1">1 second</option>
                                <option value="5" selected>5 seconds</option>
                                <option value="10">10 seconds</option>
                                <option value="30">30 seconds</option>
                                <option value="60">1 minute</option>
                                <option value="300">5 minutes</option>
                                <option value="600">10 minutes</option>
                                <option value="900">15 minutes</option>
                                <option value="1200">20 minutes</option>
                                <option value="1800">30 minutes</option>
                                <option value="3600">1 hour</option>
                            </select>
                        </div>

                        <input id="endpoint-input" type="text" placeholder="Enter endpoint URL..." value="/status" autocomplete="off">

                        <div id="endpoint-buttons">
                            <button id="endpoint-default">Default</button>
                            <button id="endpoint-start">Start</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script src="/dist/strudel.bundle.js"></script>
    </body>
</html>
